(()=>{var Ec=Object.defineProperty;var Ac=(wt,na,si)=>na in wt?Ec(wt,na,{enumerable:!0,configurable:!0,writable:!0,value:si}):wt[na]=si;var wc=(wt,na,si)=>Ac(wt,typeof na!="symbol"?na+"":na,si);var{useState:Ws,useEffect:Gl,useRef:Cc,useMemo:nu}=React,Od=(()=>{var wt="fof_coach_chat_v1",na="A2.4b Track Nutrition Rebuilt \u2022 2026-01-02 11:21 UTC";try{console.log(na)}catch(ee){}var{useState:si,useEffect:Ii,useRef:Ta,useMemo:ti}=React;(function(){try{if(window.SecondaryActivityConflictScreen)return;var ee=rt=>{var Xt=String(rt||"").toUpperCase();return Xt==="YOGA"?"Yoga / Mobility":Xt==="SPORT"?"Sport / Cardio":"Strength"},ge=rt=>{try{var lt=((typeof window.__fof_getEventsForDate=="function"?window.__fof_getEventsForDate(rt):[])||[]).map(mt=>String(mt&&mt.kind||"").toUpperCase());if(lt.some(mt=>mt.includes("WORKOUT")))return"STRENGTH";if(lt.some(mt=>mt.includes("YOGA")))return"YOGA";if(lt.some(mt=>mt.includes("RUN")||mt.includes("CARDIO")||mt.includes("SPORT")))return"SPORT"}catch(Xt){}return null},bt=({primaryType:rt,secondaryType:Xt,zone:lt})=>{var mt=String(rt||"").toUpperCase(),kt=String(Xt||"").toUpperCase(),Rt=String(lt||"MID").toUpperCase()==="LOW",ea=(Qa,Pi,Bs,Ba)=>({level:Qa,title:Pi,message:Bs,suggestion:Ba}),Gt=()=>({type:"YOGA",label:"Swap to Mobility (20\u201330m)",note:"Recovery-first option."}),fa=()=>({type:"STRENGTH",label:"Do a lighter Strength session",note:"Reduce sets/loads; technique focus."}),pt=()=>({type:"SPORT",label:"Do an easy Cardio session",note:"Zone 2 / low intensity."});return mt?kt==="YOGA"?ea("SAFE","Recovery-friendly","Yoga/Mobility is usually safe as a second session and supports recovery.",null):mt==="STRENGTH"&&kt==="STRENGTH"?Rt?ea("RISK","High risk of overreaching","Two strength sessions on a low-capacity day raises injury and recovery risk.",Gt()):ea("CAUTION","Caution: two hard sessions","A second strength session may reduce recovery. Consider lighter volume or mobility.",fa()):mt==="STRENGTH"&&kt==="SPORT"?Rt?ea("RISK","Higher injury risk","Adding sport/cardio after strength on a low-capacity day can increase injury risk.",Gt()):ea("CAUTION","Caution: stack load","Consider lowering intensity or choosing mobility if you feel tight/fatigued.",pt()):mt==="SPORT"&&kt==="STRENGTH"?Rt?ea("RISK","High load on low capacity","Stacking strength after sport on a low-capacity day is high load.",Gt()):ea("CAUTION","Caution: total load","If you proceed, keep the strength session lighter and focus on technique.",fa()):mt==="SPORT"&&kt==="SPORT"?Rt?ea("RISK","Too much intensity today","Two sport/cardio sessions on a low-capacity day is high strain.",Gt()):ea("CAUTION","Caution: double cardio","Consider making the second session easy or swap to mobility.",pt()):mt==="YOGA"&&(kt==="STRENGTH"||kt==="SPORT")?Rt?ea("CAUTION","Caution on a low-capacity day","Capacity is low. If you proceed, keep intensity conservative.",Gt()):ea("SAFE","Looks good","Yoga + a second session is usually fine. Keep it aligned with your capacity.",null):ea("CAUTION","Caution","This combination may impact recovery. Consider an easier alternative if needed.",Gt()):Rt&&(kt==="STRENGTH"||kt==="SPORT")?ea("CAUTION","Low capacity today","Capacity is low. If you proceed, keep intensity conservative.",Gt()):ea("SAFE","Looks good","No primary activity detected for today. This should be fine.",null)};window.__FOF_FallbackOverlayShell=window.__FOF_FallbackOverlayShell||function(rt){var{title:Xt,onClose:lt,children:mt}=rt||{};return React.createElement("div",{className:"fixed inset-0 z-[1000] flex items-end sm:items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{try{lt&&lt()}catch(kt){}}}),React.createElement("div",{className:"relative w-full sm:max-w-lg mx-auto rounded-t-3xl sm:rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 pb-6"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",{className:"text-base font-semibold text-white"},Xt||""),React.createElement("button",{className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 text-white/80 hover:text-white",onClick:()=>{try{lt&&lt()}catch(kt){}}},"Close")),mt))},window.SecondaryActivityConflictScreen=function(Xt){var{nodeId:lt,from:mt,isLinked:kt,persona:Ft,onClose:Rt,navTo:ea}=Xt||{},Gt=typeof window.__fof_getSelectedDayKey=="function"?window.__fof_getSelectedDayKey():typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10),fa=Number(window.readiness||window.capacityScore||0)||0,pt=fa<=33?"LOW":fa<=66?"MID":"HIGH",Qa=React.useMemo(()=>ge(Gt),[Gt]),[Pi,Bs]=React.useState(null),[Ba,ja]=React.useState(null),Aa=Zi=>{var ci=String(Zi||"").toUpperCase();Bs(ci);var Cs=bt({primaryType:Qa,secondaryType:ci,zone:pt});ja(Cs);try{typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Gt,"SECONDARY_CONFLICT_CHECKED",{primaryType:Qa,secondaryType:ci,zone:pt},{module:"SECONDARY_CONFLICT",from:mt||lt},"ui")}catch(xt){}},Ci=(Zi={})=>{var ci=!!Zi.override;try{typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Gt,"SECONDARY_ACTIVITY_ADD",{primaryType:Qa,secondaryType:Pi,zone:pt,decisionLevel:Ba&&Ba.level?Ba.level:"SAFE",override:ci,suggested:Ba&&Ba.suggestion?Ba.suggestion.type:null},{module:"SECONDARY_CONFLICT",from:mt||lt},"ui")}catch(Cs){}try{typeof window.__fof_toast=="function"&&window.__fof_toast("Added to today")}catch(Cs){}try{Rt&&Rt()}catch(Cs){}},Ri=()=>{!Ba||!Ba.suggestion||Aa(Ba.suggestion.type)},_i=Ba?Ba.level:null,ns=_i==="SAFE"?React.createElement("span",{className:"inline-flex items-center rounded-full border border-emerald-300/25 bg-emerald-300/10 px-2 py-0.5 text-[11px] font-semibold text-emerald-100"},"SAFE"):_i==="RISK"?React.createElement("span",{className:"inline-flex items-center rounded-full border border-rose-300/25 bg-rose-300/10 px-2 py-0.5 text-[11px] font-semibold text-rose-100"},"RISK"):_i==="CAUTION"?React.createElement("span",{className:"inline-flex items-center rounded-full border border-amber-300/25 bg-amber-300/10 px-2 py-0.5 text-[11px] font-semibold text-amber-100"},"CAUTION"):null;return React.createElement(window.CDEPOverlayShell||window.__FOF_FallbackOverlayShell,{title:"Secondary Activity Check",onClose:Rt},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Today context"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},Qa?"Primary: "+ee(Qa):"Primary: Not detected"," \u2022 ","Capacity: ",pt)),ns)),Ba?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 px-4 py-4 space-y-2"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},Ba.title||"Check"),React.createElement("div",{className:"text-[12px] text-white/70"},Ba.message||""),Ba.suggestion?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Suggested alternative"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},Ba.suggestion.label,Ba.suggestion.note?" \u2022 "+Ba.suggestion.note:""),React.createElement("button",{className:"mt-2 w-full rounded-2xl border border-white/12 bg-black/30 px-3 py-2 text-[12px] font-semibold text-white/85 active:scale-[0.99]",onClick:Ri},"Apply suggestion")):null,React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},_i==="RISK"?React.createElement("button",{className:"w-full rounded-2xl bg-rose-500/15 border border-rose-400/25 px-4 py-3 text-[13px] font-semibold text-rose-50 active:scale-[0.99]",onClick:()=>Ci({override:!0})},"Proceed anyway (log override)"):null,React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>Ci({override:!1})},"Proceed"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>{ja(null),Bs(null)}},"Change selection"))):React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"What do you want to add?"),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("button",{className:"rounded-2xl border border-white/12 bg-white/5 px-3 py-3 text-[12px] font-semibold text-white/90 active:scale-[0.99]",onClick:()=>Aa("STRENGTH")},"Strength"),React.createElement("button",{className:"rounded-2xl border border-white/12 bg-white/5 px-3 py-3 text-[12px] font-semibold text-white/90 active:scale-[0.99]",onClick:()=>Aa("YOGA")},"Yoga"),React.createElement("button",{className:"rounded-2xl border border-white/12 bg-white/5 px-3 py-3 text-[12px] font-semibold text-white/90 active:scale-[0.99]",onClick:()=>Aa("SPORT")},"Sport")))))}}catch(ee){window.SecondaryActivityConflictScreen=function(bt){try{var rt=bt&&bt.onClose;return React.createElement(window.CDEPOverlayShell||window.__FOF_FallbackOverlayShell,{title:"Secondary Activity Check",onClose:rt},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/70"},"This feature is temporarily unavailable."))}catch(rt){return null}}}})(),function(){try{var mt=function({open:Ft=!0,onClose:Rt,surfaceKeyOverride:ea=null}){if(!Ft)return null;var Gt=(window.__fof_getClientContext?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{})||{},fa=String(ea||Gt.surfaceKey||Gt.clientId||Gt.id||"demo_surface"),pt=typeof __fof_safeTodayKey=="function"?__fof_safeTodayKey():new Date().toISOString().slice(0,10),[Qa,Pi]=React.useState(0);React.useEffect(()=>{var ja=()=>Pi(Aa=>Aa+1);try{window.addEventListener("flowofit:habitsUpdated",ja)}catch(Aa){}return()=>{try{window.removeEventListener("flowofit:habitsUpdated",ja)}catch(Aa){}}},[]);var Bs=typeof window.__fof_habits_getStreak=="function"?window.__fof_habits_getStreak(fa):{count:0},Ba=typeof window.__fof_habits_weekCount=="function"?window.__fof_habits_weekCount(fa,pt,7):0;return React.createElement(CDEPOverlayShell,{title:"Consistency",onClose:Rt},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-widest text-white/55 font-bold"},"Showed up"),React.createElement("div",{className:"mt-1 text-[28px] font-extrabold text-white leading-none"},Math.max(0,Number(Bs.count||0))),React.createElement("div",{className:"mt-2 text-[12px] text-white/70 leading-relaxed"},"This streak is designed to be ",React.createElement("span",{className:"text-white font-semibold"},"non\u2011punitive"),". If you miss a day, it simply pauses \u2014 no shame, no harsh reset."),React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"This week: ",React.createElement("span",{className:"text-white font-semibold"},Ba,"/7")),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Counts: workout \u2022 nutrition \u2022 recovery"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/30 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Want an easy win?"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WORKOUT_LOGGER",props:{dateKey:pt,from:"HABITS_STREAK"}}}))}catch(ja){}try{Rt&&Rt()}catch(ja){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Log workout"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"Any session counts.")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"NUTRITION_LOGGER",props:{dateKey:pt,from:"HABITS_STREAK"}}}))}catch(ja){}try{Rt&&Rt()}catch(ja){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Log nutrition"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"One meal is enough.")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"RECOVERY_ACTIONS_V1",props:{from:"HABITS_STREAK"}}}))}catch(ja){}try{Rt&&Rt()}catch(ja){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Do recovery"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"5\u201315 min options."))),React.createElement("button",{type:"button",onClick:()=>{try{Rt&&Rt()}catch(ja){}},className:"mt-3 w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]"},"Got it"))))},kt=function({open:Ft,onClose:Rt,from:ea}){var Gt=rt(),fa=Xt(),pt=React.useMemo(()=>lt(),[]),Qa=React.useMemo(()=>Object.keys(pt||{}),[pt]),Pi=React.useMemo(()=>Qa.filter(Ri=>{var _i;return(((_i=pt==null?void 0:pt[Ri])==null?void 0:_i.entries)||0)>0}).length,[Qa,pt]),Bs=7-Pi,Ba=React.useMemo(()=>{var Ri=Number((fa==null?void 0:fa.kcal)||0)||0;return Ri?Qa.filter(_i=>{var ns,Zi;return(((ns=pt==null?void 0:pt[_i])==null?void 0:ns.entries)||0)>0&&Number(((Zi=pt==null?void 0:pt[_i])==null?void 0:Zi.kcal)||0)>Ri*1.15}).length:0},[Qa,pt,fa]),ja=React.useMemo(()=>{var Ri=Number((fa==null?void 0:fa.kcal)||0)||0;return Ri?Qa.filter(_i=>{var ns,Zi;return(((ns=pt==null?void 0:pt[_i])==null?void 0:ns.entries)||0)>0&&Number(((Zi=pt==null?void 0:pt[_i])==null?void 0:Zi.kcal)||0)<Ri*.6}).length:0},[Qa,pt,fa]),Aa=React.useMemo(()=>Gt==="NUTRITION"&&Pi<3?{level:"WARN",text:"Not enough nutrition logs to guide you yet."}:Gt==="FITNESS"&&Pi===0?{level:"NUDGE",text:"Fueling data is empty \u2014 it can affect training consistency."}:Gt==="HYBRID"&&Pi<2?{level:"NUDGE",text:"Hybrid works best with some nutrition consistency."}:null,[Gt,Pi]);React.useEffect(()=>{if(Ft)try{var Ri=typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10);typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Ri,"NUTRITION_WEEKLY_VIEWED",{loggedDays:Pi},{module:"PHASE2_NUTRITION",from:ea||"NUTRITION_WEEKLY_SUMMARY_V1"},"ui")}catch(Ri){}},[Ft]);var Ci=React.useMemo(()=>Pi<3?"Aim for 3 logging days next week \u2014 enough to get useful signals.":Ba>=3?"Try tightening one meal window (or reduce snacks) on 2 days next week.":ja>=3?"If energy is low, add a consistent protein + carb anchor meal.":"Keep it simple: repeat 1\u20132 \u201Cdefault meals\u201D for consistency.",[Pi,Ba,ja]);return React.createElement(qo,{open:!!Ft,title:"This Week: Nutrition",kicker:"Weekly summary",onClose:()=>{try{Rt&&Rt()}catch(Ri){}},footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Rt&&Rt()}catch(Ri){}},className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black rounded-2xl font-extrabold"},"Done"))},React.createElement("div",{className:"space-y-3"},Aa?React.createElement("div",{className:"rounded-3xl border p-4 "+(Aa.level==="WARN"?"border-amber-300/25 bg-amber-300/10":"border-white/10 bg-white/5")},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Goal mismatch"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold text-white"},Aa.text)):null,React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Logged days"),React.createElement("div",{className:"mt-1 text-[22px] font-black text-white"},Pi,React.createElement("span",{className:"text-white/50 text-[12px] font-extrabold"},"/7"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Missing"),React.createElement("div",{className:"mt-1 text-[22px] font-black text-white"},Bs)),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Excess"),React.createElement("div",{className:"mt-1 text-[22px] font-black text-white"},Ba))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Good"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-extrabold"},Pi>=4?"Solid consistency this week.":Pi>=2?"Some consistency \u2014 build the loop.":"Start small \u2014 log a few days."),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 font-semibold"},"Target: ",Number((fa==null?void 0:fa.kcal)||0)?`${Math.round(Number(fa.kcal))} kcal/day`:"\u2014",Number((fa==null?void 0:fa.kcal)||0)?` \u2022 Low days: ${ja}`:"")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"One suggestion"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-extrabold"},Ci)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[11px] text-white/55 font-bold"},"No micronutrient deep dive yet \u2014 this is a simple weekly loop.")))};var ee=mt,ge=kt;if(window.RecoveryActionsSheetV1)return;var bt=()=>{try{var Ft=[];for(var Rt=0;Rt<7;Rt++){var ea=new Date;ea.setDate(ea.getDate()-Rt);var Gt=typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(ea):ea.toISOString().slice(0,10);Ft.push(Gt)}return Ft.reverse()}catch(Ft){return[]}},rt=()=>{var Ft;try{var Rt=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{};return String(((Ft=Rt==null?void 0:Rt.goals)==null?void 0:Ft.focus)||(Rt==null?void 0:Rt.emphasis)||localStorage.getItem("fof_goal_focus_v1")||"FITNESS").toUpperCase()}catch(Rt){return"FITNESS"}},Xt=()=>{try{var Ft={kcal:2e3},Rt=typeof localStorage!="undefined"?localStorage.getItem("__fof_nutrition_targets_v1"):null,ea=Rt?JSON.parse(Rt)||{}:{},Gt=ea.kcal!=null?Number(ea.kcal):Ft.kcal;return{kcal:Number.isFinite(Gt)?Gt:Ft.kcal}}catch(Ft){return{kcal:2e3}}},lt=()=>{var Ft=bt(),Rt={};try{var ea=typeof window!="undefined"&&window.__fof_nutrAll||null,Gt=(()=>{try{return{db:JSON.parse(localStorage.getItem("fof_client_logs_v1")||"{}")||{}}}catch(pt){return{db:{}}}})();Ft.forEach(pt=>{Rt[pt]={kcal:0,entries:0}});var fa=pt=>{try{return typeof window.__fof_getLogBucket=="function"?window.__fof_getLogBucket(pt,"nutrition")||[]:[]}catch(Qa){return[]}};Ft.forEach(pt=>{var Qa=fa(pt);Array.isArray(Qa)&&Qa.length&&Qa.forEach(Pi=>{var ja,Aa,Ci;var Bs=Pi&&(Pi.payload||Pi.details||Pi.data)?Pi.payload||Pi.details||Pi.data:Pi,Ba=Number((Ci=(Aa=(ja=Bs==null?void 0:Bs.kcal)!=null?ja:Bs==null?void 0:Bs.calories)!=null?Aa:Bs==null?void 0:Bs.cal)!=null?Ci:0)||0;Rt[pt].kcal+=Ba,Rt[pt].entries+=1})})}catch(ea){}return Rt};window.RecoveryActionsSheetV1=function({open:Rt,onClose:ea,from:Gt}){var fa=React.useMemo(()=>[{id:"MOB_5",title:"5\u2011min Mobility Reset",mins:5,steps:["Breathe 60s","Hips 90/90 60s/side","Thoracic openers 60s/side","Ankles 60s/side"]},{id:"STRETCH_10",title:"10\u2011min Stretch Flow",mins:10,steps:["Hamstrings 90s","Hip flexors 90s/side","Chest opener 90s","Calves 60s/side","Easy walk 2 min"]},{id:"DOWN_6",title:"Breathing / Downshift",mins:6,steps:["Box breathing 4\xD74\xD74\xD74","Long exhales x10","Body scan 2 min"]},{id:"WALK_15",title:"Easy Walk",mins:15,steps:["Keep nasal breathing","Easy pace (Zone 1\u20132)","Finish with 60s slow breathing"]},{id:"REST",title:"Rest day (recommended)",mins:0,steps:["Skip training today","Hydrate + early sleep","Optional 5\u2011min mobility later"]}],[]),[pt,Qa]=React.useState("LIST"),[Pi,Bs]=React.useState(null),[Ba,ja]=React.useState(0),Aa=_i=>{Bs(_i),Qa("PLAY");var ns=Math.max(0,Number((_i==null?void 0:_i.mins)||0)*60);ja(ns);try{var Zi=typeof window.__fof_getSelectedDayKey=="function"?window.__fof_getSelectedDayKey():typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10);typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Zi,"RECOVERY_ACTION_STARTED",{actionId:_i==null?void 0:_i.id,mins:(_i==null?void 0:_i.mins)||0},{module:"PHASE2_RECOVERY",from:Gt||"RECOVERY_ACTIONS_V1"},"ui")}catch(Zi){}};React.useEffect(()=>{if(pt!=="PLAY"||!Pi||!(Ba>0))return;var _i=setInterval(()=>ja(ns=>Math.max(0,Number(ns||0)-1)),1e3);return()=>clearInterval(_i)},[pt,Pi,Ba]);var Ci=()=>{try{var _i=typeof window.__fof_getSelectedDayKey=="function"?window.__fof_getSelectedDayKey():typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10);typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(_i,"RECOVERY_ACTION_DONE",{actionId:Pi==null?void 0:Pi.id,mins:(Pi==null?void 0:Pi.mins)||0},{module:"PHASE2_RECOVERY",from:Gt||"RECOVERY_ACTIONS_V1"},"ui")}catch(_i){}try{typeof window.__fof_toast=="function"&&window.__fof_toast("Recovery action saved.")}catch(_i){}try{ea&&ea()}catch(_i){}},Ri=_i=>{var ns=Math.max(0,Number(_i||0)),Zi=Math.floor(ns/60),ci=ns%60;return`${Zi}:${String(ci).padStart(2,"0")}`};return React.createElement(qo,{open:!!Rt,title:pt==="PLAY"&&Pi?Pi.title:"Recovery Actions",kicker:"Low capacity day",onClose:()=>{try{ea&&ea()}catch(_i){}},footer:pt==="PLAY"&&Pi?React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{Qa("LIST"),Bs(null),ja(0)},className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Back"),React.createElement("button",{type:"button",onClick:Ci,className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black rounded-2xl font-extrabold"},"Done")):React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{ea&&ea()}catch(_i){}},className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Close"))},pt==="LIST"?React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/70 font-semibold"},"Capacity is low today \u2014 choose a short recovery action to keep the loop alive without overreaching."),(fa||[]).map(_i=>React.createElement("button",{key:_i.id,type:"button",onClick:()=>Aa(_i),className:"w-full text-left rounded-3xl border border-white/10 bg-white/5 hover:bg-white/8 p-4 transition"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},_i.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},_i.mins?`${_i.mins} min`:"No timer"," \u2022 ",_i.steps.length," steps")),React.createElement("span",{className:"text-white/55 text-[12px] font-extrabold"},"Start \u203A"))))):React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Timer"),React.createElement("div",{className:"text-[20px] font-black text-white"},Pi!=null&&Pi.mins?Ri(Ba):"\u2014")),React.createElement("div",{className:"mt-3 space-y-2"},((Pi==null?void 0:Pi.steps)||[]).map((_i,ns)=>React.createElement("div",{key:ns,className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/80 font-semibold"},_i))),Pi!=null&&Pi.mins?React.createElement("div",{className:"mt-3 text-[11px] text-white/55 font-bold"},"Tip: keep intensity low. This is about consistency."):React.createElement("div",{className:"mt-3 text-[11px] text-white/55 font-bold"},"Rest is a valid action. Come back tomorrow."))))},window.HabitStreakSheetV1=mt,window.NutritionWeeklySummarySheetV1=kt}catch(bt){}}(),function(){try{if(window.PostWorkoutAddonSheetV1)return;window.PostWorkoutAddonSheetV1=function(ge){try{if(!!!(ge&&ge.open))return null;var rt=ge&&ge.ctx?ge.ctx:ge||{},Xt=ge&&ge.onClose?ge.onClose:function(){},lt=ge&&ge.onPick?ge.onPick:function(){},mt=rt.workoutTitle||rt.title||"Workout",kt=rt.mins||rt.durationMin||"",Ft=rt.exCount||rt.exercisesCount||"",Rt=(rt.zone||"").toString().toUpperCase(),ea=Rt==="LOW"?"Your capacity is low \u2014 recovery work is the best add-on.":Rt==="HIGH"?"Capacity is high \u2014 an easy add-on can fit well if you want.":"Moderate capacity \u2014 choose a light add-on if you feel good.";return React.createElement("div",{className:"fixed inset-0 z-[9999] flex items-end justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{try{Xt()}catch(Gt){}}}),React.createElement("div",{className:"relative w-full max-w-[520px] rounded-t-3xl border border-white/10 bg-[#0b0f14] p-4 pb-5 shadow-[0_-18px_60px_rgba(0,0,0,0.55)]"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Optional \u2014 based on today\u2019s capacity"),React.createElement("div",{className:"mt-0.5 text-[16px] font-black text-white"},"Add-on suggestions")),React.createElement("button",{type:"button",onClick:Gt=>{try{Gt.preventDefault(),Gt.stopPropagation()}catch(fa){}try{Xt()}catch(fa){}},className:"rounded-2xl border border-white/15 bg-white/5 px-3 py-2 text-[12px] font-extrabold text-white hover:bg-white/10"},"Close")),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Saved workout"),React.createElement("div",{className:"mt-0.5 text-[14px] font-black text-white truncate"},mt),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},kt?`${kt} min`:"",Ft?` \u2022 ${Ft} exercises`:"",Rt?` \u2022 Capacity: ${Rt}`:"")),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Recommended next"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},ea),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement("button",{type:"button",onClick:Gt=>{try{Gt.preventDefault(),Gt.stopPropagation()}catch(fa){}try{lt("YOGA")}catch(fa){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-black text-white"},"Mobility / Yoga"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},"Best recovery add-on after strength.")),React.createElement("span",{className:"text-white/70"},"\u{1F9D8}"))),React.createElement("button",{type:"button",onClick:Gt=>{try{Gt.preventDefault(),Gt.stopPropagation()}catch(fa){}try{lt("SPORT")}catch(fa){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-black text-white"},"Light cardio"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},"Zone\u20112 / easy session (optional).")),React.createElement("span",{className:"text-white/70"},"\u{1F3C3}"))),React.createElement("button",{type:"button",onClick:Gt=>{try{Gt.preventDefault(),Gt.stopPropagation()}catch(fa){}try{lt("STRENGTH")}catch(fa){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-black text-white"},"Extra strength (lighter)"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},"Only if you feel great \u2014 keep it light.")),React.createElement("span",{className:"text-white/70"},"\u{1F3CB}\uFE0F"))))),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:Gt=>{try{Gt.preventDefault(),Gt.stopPropagation()}catch(fa){}try{Xt()}catch(fa){}},className:"w-full rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white hover:bg-white/10"},"Skip"))))}catch(bt){return null}}}catch(ee){}}();var ai=window.SecondaryActivityConflictScreen;(function(){try{if(window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function")return;window.__FOF_CLIENT=window.__FOF_CLIENT||{},window.__FOF_CLIENT.openOverlay=function(ee,ge){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:ee,props:ge||{}}}))}catch(bt){}},window.__FOF_CLIENT.navigate=function(ee){try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:String(ee||"").toUpperCase()}}))}catch(ge){}}}catch(ee){}})(),window.__SXEP_FLAGS=window.__SXEP_FLAGS||{A2_TRACK:!0};var qi=Object.freeze({TODAY:"TODAY",PLAN:"PLAN",TRACK:"TRACK",COACH:"COACH",COMMUNITY:"COMMUNITY",INSIGHTS:"INSIGHTS",LOG:"LOG"});(function(){try{if(window.__fofClickGuardInstalled)return;window.__fofClickGuardInstalled=!0,document.addEventListener("click",function(ee){var ge=ee.target&&ee.target.closest?ee.target.closest("a"):null;if(!ge)return;var bt=(ge.getAttribute("href")||"").trim();(bt===""||bt==="#"||bt.startsWith("#"))&&ee.preventDefault()},!0),document.addEventListener("click",function(ee){var ge=ee.target&&ee.target.closest?ee.target.closest("button"):null;ge&&(ge.getAttribute("type")||ge.setAttribute("type","button"))},!0),document.addEventListener("click",function(ee){if(!(ee.target&&ee.target.closest?ee.target.closest('button, [role="button"], a, input[type="button"], input[type="submit"]'):null))return;var bt=window.scrollY||document.documentElement.scrollTop||0;setTimeout(()=>{if((window.scrollY||document.documentElement.scrollTop||0)+12<bt)try{window.scrollTo(0,bt)}catch(Xt){}},0)},!0),document.addEventListener("submit",function(ee){ee.preventDefault()},!0)}catch(ee){}})();function co(ee){if(ee==null||ee===!1||ee===!0)return ee;try{if(React&&React.isValidElement&&React.isValidElement(ee))return ee}catch(bt){}if(Array.isArray(ee))return ee.map(co);var ge=typeof ee;return ge==="string"||ge==="number"?ee:""}(function(){try{if(!React||!React.createElement||React.__fofCreateElementPatched)return;var ee=React.createElement;React.createElement=function(ge,bt,...rt){var Xt=rt.map(co);return ee.apply(this,[ge,bt,...Xt])},React.__fofCreateElementPatched=!0}catch(ee){}})();var Ys=()=>window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"id_"+Math.random().toString(16).slice(2)+Date.now(),bi=()=>new Date().toISOString(),hs="fof_plan_db_v1",fo=()=>{try{return JSON.parse(localStorage.getItem(hs)||"{}")||{}}catch(ee){return{}}},go=ee=>{try{localStorage.setItem(hs,JSON.stringify(ee||{}))}catch(ge){}try{window.dispatchEvent(new CustomEvent("flowofit:planDBUpdated",{detail:{ts:Date.now()}}))}catch(ge){}},Ei=(ee,ge)=>{if(!ee||!ge)return!1;var bt=String(ee),rt=ge||{},Xt=String(rt.category||rt.kind||"").toUpperCase(),lt=Xt==="NUTRITION"?"NUTRITION":Xt==="YOGA"?"YOGA":"WORKOUT",mt=fo(),kt=Array.isArray(mt[bt])?mt[bt]:[],Ft={id:Ys(),ts:Date.now(),kind:lt,module:lt,title:rt.title||rt.name||"Planned item",refId:rt.id||rt.refId||null,refType:rt.type||rt.refType||null,category:rt.category||lt,duration:rt.duration||rt.mins||null,meta:{...rt.meta||{},from:rt.meta&&rt.meta.from?rt.meta.from:rt.source?String(rt.source):"LIBRARY"}};mt[bt]=[...kt,Ft],go(mt);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added to Plan",message:"Saved to this day in Plan."}}))}catch(Rt){}return!0};window.__fof_planRead=fo,window.__fof_planWrite=go,window.__fof_planAddItem=Ei;var As=ee=>{try{return new Date(Number(ee||Date.now())).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(ge){return""}};window.__fof_fmtTime=As;var yo=ee=>{try{var ge=ee instanceof Date?ee:new Date(ee);return isNaN(ge.getTime())?"\u2014":ge.toLocaleDateString(void 0,{day:"2-digit",month:"short"})}catch(ge){return"\u2014"}};window.fmtDay=yo;var Ks=(ee,ge)=>{try{var bt=localStorage.getItem(ee),rt=JSON.parse(bt==null?"null":bt);return rt==null?ge:rt}catch(bt){return ge}},Fs=(ee,ge)=>{try{localStorage.setItem(ee,JSON.stringify(ge))}catch(bt){}};window.__readLS=Ks,window.__writeLS=Fs;var Lo=(ee=new Date)=>{try{var ge=ee.getFullYear(),bt=String(ee.getMonth()+1).padStart(2,"0"),rt=String(ee.getDate()).padStart(2,"0");return`${ge}-${bt}-${rt}`}catch(ge){return String(Date.now())}},Hn="fof_client_logs_v1",es=()=>Ks(Hn,{}),Ai=ee=>Fs(Hn,ee||{}),no=ee=>{var ge=String(ee||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():Lo(new Date))),bt=es(),rt=bt&&bt[ge]?bt[ge]:{},Xt=["workout","nutrition","recovery","body","habits"],lt=[];return Xt.forEach(mt=>{(Array.isArray(rt[mt])?rt[mt]:[]).forEach(Ft=>lt.push({...Ft,__type:mt}))}),lt.sort((mt,kt)=>(kt.ts||0)-(mt.ts||0)),lt};var Co=(ee,ge,bt)=>{var rt=String(ee||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():Lo(new Date))),Xt=es(),lt=Xt[rt]||{},mt=Array.isArray(lt[ge])?lt[ge]:[],kt={id:Ys(),ts:Date.now(),dateKey:rt,type:ge,...bt||{}};mt.push(kt),lt[ge]=mt,Xt[rt]=lt,Ai(Xt);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:rt,type:ge,entry:kt}}))}catch(Ft){}return kt};var Mi=ee=>{try{return String(ee)<String(Lo(new Date))}catch(ge){return!1}};window.__fof_localDateKey=Lo,window.__fof_getLogsForDate=no,window.__fof_addLog=Co,window.__fof_isPastDay=Mi;var ts="fof_selected_day_v1",vs=()=>{try{var ee=localStorage.getItem(ts);if(ee&&String(ee).length>=8)return String(ee)}catch(ee){}try{return Lo(new Date)}catch(ee){return new Date().toISOString().slice(0,10)}},ko=ee=>{var ge=String(ee||"").slice(0,10);if(!ge)return vs();try{localStorage.setItem(ts,ge)}catch(bt){}try{window.dispatchEvent(new CustomEvent("flowofit:selectedDayChanged",{detail:{selectedDayKey:ge}}))}catch(bt){}return ge},$s=ee=>{var ge=String(ee||vs()),bt=String(Lo(new Date)),rt=ge===bt,Xt=ge<bt,lt=ge>bt;return{selectedDayKey:ge,todayKey:bt,isToday:rt,isPast:Xt,isFuture:lt}};window.__fof_getSelectedDayKey=vs,window.__fof_setSelectedDayKey=ko,window.__fof_dayFlags=$s;try{ko(vs())}catch(ee){}var is=1,xs=ee=>{try{return String(ee||"").trim().toUpperCase().replace(/\s+/g,"_")}catch(ge){return String(ee||"")}},ps=({dateKey:ee,kind:ge,data:bt,meta:rt,source:Xt})=>{var lt=String(ee||vs()||Lo(new Date)),mt=xs(ge);return{id:Ys(),ts:Date.now(),dateKey:lt,kind:mt,channel:"CLIENT",actor:"client",source:Xt||"ui",meta:{...rt||{},__schema:is},data:{...bt||{}}}},Ho=(ee,ge)=>{var bt=String(ge),rt=ee&&ee[bt]?ee[bt]:{};return{dk:bt,day:rt}},Bt=(ee,ge,bt)=>{ee[ge]=bt,Ai(ee)},ta=ee=>{var ge=es(),{dk:bt,day:rt}=Ho(ge,ee),Xt=Array.isArray(rt.__events)?rt.__events:[];return{db:ge,dk:bt,day:rt,events:Xt}},Ka=ee=>{var{db:ge,dk:bt,day:rt,events:Xt}=ta(ee);if(Xt&&Xt.length)return{db:ge,dk:bt,day:rt,events:Xt};var lt=no(bt)||[],mt=[];return lt.forEach(kt=>{var Ft=xs(kt&&kt.type?kt.type:kt&&kt.__type?kt.__type:"LOG"),{__type:Rt,...ea}=kt||{};mt.push({id:ea.id||Ys(),ts:ea.ts||Date.now(),dateKey:bt,kind:Ft,channel:"CLIENT",actor:"client",source:"legacy",meta:{__schema:is,legacy:!0},data:ea})}),rt.__events=mt,Bt(ge,bt,rt),{db:ge,dk:bt,day:rt,events:mt}},oi=(ee,ge,bt={},rt={},Xt="ui")=>{var lt=es(),{dk:mt,day:kt}=Ho(lt,ee),Ft=Array.isArray(kt.__events)?kt.__events:[],Rt=ps({dateKey:mt,kind:ge,data:bt,meta:rt,source:Xt});Ft.push(Rt),kt.__events=Ft,Bt(lt,mt,kt);try{window.dispatchEvent(new CustomEvent("flowofit:eventsUpdated",{detail:{dateKey:mt,event:Rt}}))}catch(ea){}return Rt},io=(ee,ge={})=>{var{kind:bt,kinds:rt}=ge||{},{events:Xt}=Ka(ee);var lt=Array.isArray(Xt)?[...Xt]:[];var mt=(Array.isArray(rt)?rt:bt?[bt]:[]).map(xs).filter(Boolean);return mt.length&&(lt=lt.filter(kt=>mt.includes(xs(kt.kind)))),lt.sort((kt,Ft)=>(Ft.ts||0)-(kt.ts||0)),lt};if(!window.__fof_addLog__cdep_p12_patched){window.__fof_addLog__cdep_p12_patched=!0;var ee=Co;Co=(ge,bt,rt)=>{var Xt=ee(ge,bt,rt);try{oi(ge,bt,rt||{},{legacyLogId:Xt&&Xt.id?Xt.id:void 0},"ui")}catch(lt){}return Xt},window.__fof_addLog=Co}var _=(ee,ge)=>{try{var bt=es(),rt=bt&&bt[ee]?bt[ee]:{};return Array.isArray(rt[ge])?rt[ge]:[]}catch(bt){return[]}},Zs=(ee,ge,bt,rt={})=>{try{var Xt=es(),lt=Xt&&Xt[ee]?Xt[ee]:{},mt=Array.isArray(lt[ge])?lt[ge]:[],kt=mt.findIndex(ea=>ea&&ea.id===bt);if(kt<0)return{ok:!1,error:"NOT_FOUND",id:bt};var Rt={...mt[kt],...rt||{},ts:Date.now()};mt[kt]=Rt,lt[ge]=mt,Xt[String(ee)]=lt,Ai(Xt);try{var ea=Ka(ee),Gt=Array.isArray(ea.events)?ea.events:[],fa=Gt.findIndex(pt=>pt&&pt.meta&&pt.meta.legacyLogId===bt);fa>=0?Gt[fa]={...Gt[fa],ts:Date.now(),kind:xs(ge),data:{...rt||{}}}:Gt.push(ps({dateKey:String(ee),kind:ge,data:{...rt||{}},meta:{legacyLogId:bt},source:"ui"})),ea.day.__events=Gt,Bt(ea.db,ea.dk,ea.day);try{window.dispatchEvent(new CustomEvent("flowofit:eventsUpdated",{detail:{dateKey:ee,kind:ge,legacyLogId:bt}}))}catch(pt){}}catch(ea){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:ee,type:ge,action:"update",entry:Rt}}))}catch(ea){}return{ok:!0,entry:Rt}}catch(Xt){return{ok:!1,error:"FAILED",message:String(Xt&&Xt.message||Xt)}}},Zo=(ee,ge,bt)=>{try{var rt=es(),Xt=rt&&rt[ee]?rt[ee]:{},mt=(Array.isArray(Xt[ge])?Xt[ge]:[]).filter(kt=>!(kt&&kt.id===bt));Xt[ge]=mt,rt[String(ee)]=Xt,Ai(rt);try{var kt=Ka(ee),Rt=(Array.isArray(kt.events)?kt.events:[]).filter(ea=>!(ea&&ea.meta&&ea.meta.legacyLogId===bt));kt.day.__events=Rt,Bt(kt.db,kt.dk,kt.day);try{window.dispatchEvent(new CustomEvent("flowofit:eventsUpdated",{detail:{dateKey:ee,kind:ge,action:"delete",legacyLogId:bt}}))}catch(ea){}}catch(kt){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:ee,type:ge,action:"delete",id:bt}}))}catch(kt){}return{ok:!0,id:bt}}catch(rt){return{ok:!1,error:"FAILED",message:String(rt&&rt.message||rt)}}};window.__fof_getLogBucket=_,window.__fof_updateLogEntry=Zs,window.__fof_deleteLogEntry=Zo;var nn="fof_cap_traininglog_v1",Bn=()=>Ks(nn,[]),yn=ee=>Fs(nn,Array.isArray(ee)?ee:[]),Os=(ee,ge)=>{try{window.dispatchEvent(new CustomEvent(ee,{detail:ge}))}catch(bt){}},vn=(ee={})=>{try{var ge=String(ee.dateKey||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):"unknown-day")).slice(0,10),bt={id:window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"cap_"+Math.random().toString(16).slice(2)+Date.now(),ts:Date.now(),dateKey:ge,didSession:ee.didSession!==!1,kind:String(ee.kind||"WORKOUT").toUpperCase(),intensity:String(ee.intensity||"MODERATE").toUpperCase(),durationMin:ee.durationMin!=null&&ee.durationMin!==""?Number(ee.durationMin):null,rpe:ee.rpe!=null&&ee.rpe!==""?Number(ee.rpe):null,source:String(ee.source||"ui"),meta:ee.meta&&typeof ee.meta=="object"?ee.meta:{}},rt=Bn();rt.unshift(bt);var Xt=Date.now()-180*24*60*60*1e3,lt=rt.filter(mt=>mt&&typeof mt.ts=="number"?mt.ts>=Xt:!0).slice(0,1500);yn(lt),Os("flowofit:capacityInputsUpdated",{dateKey:ge,entry:bt});try{window.__FOF&&typeof window.__FOF.recalcCapacity=="function"&&window.__FOF.recalcCapacity({dateKey:ge,reason:"training_ingest"}),window.__FOF&&typeof window.__FOF.recomputeCapacity=="function"&&window.__FOF.recomputeCapacity({dateKey:ge,reason:"training_ingest"}),typeof window.__fof_recalcCapacity=="function"&&window.__fof_recalcCapacity({dateKey:ge,reason:"training_ingest"})}catch(mt){}return Os("flowofit:capacityUpdated",{dateKey:ge,reason:"training_ingest"}),{ok:!0,entry:bt}}catch(ge){return{ok:!1,error:"CAPACITY_INGEST_FAILED",message:String(ge&&ge.message||ge)}}},ed=({dateKey:ee=null,kind:ge="STRENGTH",durationMin:bt=null,rpe:rt=null}={})=>{var Xt="MODERATE";var lt=rt!=null&&rt!==""?Number(rt):null,mt=bt!=null&&bt!==""?Number(bt):null;return lt!=null&&!Number.isNaN(lt)?lt<=4?Xt="LOW":lt>=8&&(Xt="HIGH"):mt!=null&&!Number.isNaN(mt)&&(mt<25?Xt="LOW":mt>=60&&(Xt="HIGH")),vn({dateKey:ee,didSession:!0,kind:ge,intensity:Xt,durationMin:mt,rpe:lt,source:"workout_log"})},Ur=({dateKey:ee=null,durationMin:ge=null,style:bt=null}={})=>{try{var rt=ee||(typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):null),Xt=Number(ge||0)||0,lt=String(bt||"").toUpperCase(),mt=lt==="VINYASA"?2:lt==="FOUNDATION"?1.5:1,kt=lt==="RESTORE"?3:lt==="STRETCH"?2.5:2,Ft=Math.min(10,Math.max(0,Xt/10*mt)),Rt=Math.min(10,Math.max(0,Xt/10*(kt/2)));return __fof_capacity_ingestTraining({dateKey:rt,entry:{kind:"YOGA",durationMin:Xt,style:lt,load:Ft,recovery:Rt}})}catch(rt){return{ok:!1,error:"CAPACITY_INGEST_YOGA_FAILED",message:String(rt&&rt.message||rt)}}};window.__fof_capacity_ingestTrainingEntry=vn,window.__fof_capacity_ingestWorkout=ed,window.__fof_cap_readTrainLog=Bn,window.__fof_addEvent=oi,window.__fof_getEventsForDate=io,window.__fof_eventSchemaVersion=is,(()=>{if(window.__fof_clientContext_v1_installed)return;window.__fof_clientContext_v1_installed=!0;var ee="fof_client_context_v1",ge=1,bt=["INDEPENDENT","LINKED"],rt=["FITNESS","YOGA","NUTRITION","HYBRID"],Xt=["FREE","TRIAL","PAID"],lt=["NONE","LIMITED","FULL"],mt=Aa=>{try{return JSON.parse(Aa||"")}catch(Ci){return null}},kt=Aa=>String(Aa||"").trim().toUpperCase(),Ft=(Aa,Ci,Ri)=>Ci.includes(Aa)?Aa:Ri,Rt=()=>{var Aa=kt(window.initialDashboardType||window.__FOF_INITIAL_DASHBOARD_TYPE||""),Ci=Aa==="LINKED"||Aa==="HYBRID"?"LINKED":"INDEPENDENT",Ri=Ft(kt(window.initialIndependentTier||window.__FOF_INITIAL_TIER||"FREE"),Xt,"FREE"),_i=Ft(kt(window.initialDashboardEmphasis||window.__FOF_INITIAL_EMPHASIS||""),rt,"FITNESS");var ns=kt(window.initialYogaAccess||window.__FOF_INITIAL_YOGA_ACCESS||"");return ns=Ft(ns,lt,_i==="YOGA"?"LIMITED":"NONE"),{schema:ge,relationship:Ci,emphasis:_i,tier:Ri,entitlements:{yogaAccess:ns}}},ea=Aa=>{var Ci=Ft(kt(Aa.relationship),bt,"INDEPENDENT"),Ri=Ft(kt(Aa.emphasis),rt,"FITNESS"),_i=Ft(kt(Aa.tier),Xt,"FREE");return{yogaAccess:Aa&&Aa.entitlements?Ft(kt(Aa.entitlements.yogaAccess),lt,Ri==="YOGA"?"LIMITED":"NONE"):Ri==="YOGA"?"LIMITED":"NONE",aiAccess:_i==="PAID"||_i==="TRIAL",canSeeLockedPreviews:!0,relationship:Ci,emphasis:Ri,tier:_i}},Gt=Aa=>{var Ci=Aa&&typeof Aa=="object"?Aa:{},Ri=Ft(kt(Ci.relationship),bt,"INDEPENDENT"),_i=Ft(kt(Ci.emphasis),rt,"FITNESS"),ns=Ft(kt(Ci.tier),Xt,"FREE"),Zi=Ci.entitlements&&typeof Ci.entitlements=="object"?Ci.entitlements:{},ci=Ft(kt(Zi.yogaAccess),lt,_i==="YOGA"?"LIMITED":"NONE"),Cs={schema:ge,relationship:Ri,emphasis:_i,tier:ns,entitlements:{yogaAccess:ci}},xt=ea(Cs);return{...Cs,entitlements:{...Cs.entitlements,...xt}}},fa=()=>{var Aa=mt(localStorage.getItem(ee));return Gt(Aa&&typeof Aa=="object"?Aa:Rt())},pt=Aa=>{try{localStorage.setItem(ee,JSON.stringify(Aa))}catch(Ci){}};var Qa=fa();pt(Qa);var Pi=Aa=>{try{window.dispatchEvent(new CustomEvent("flowofit:clientContextChanged",{detail:Aa}))}catch(Ci){}},Bs=()=>Qa,Ba=(Aa={},Ci="setClientContext")=>{var Ri=typeof Aa=="function"?Aa(Qa):{...Qa||{},...Aa||{}};return Qa=Gt(Ri),window.__FOF_CLIENT_CONTEXT=Qa,pt(Qa),Pi({reason:Ci,clientContext:Qa}),Qa},ja=(Aa,Ci)=>{var Ri=kt(Ci);return Aa==="relationship"?Ba({relationship:Ri},"setRelationship"):Aa==="emphasis"?Ba({emphasis:Ri},"setEmphasis"):Aa==="tier"?Ba({tier:Ri},"setTier"):Aa==="yogaAccess"?Ba({entitlements:{...Qa.entitlements||{},yogaAccess:Ri}},"setYogaAccess"):Ba({},"setAxisNoop")};window.__fof_clientContextKey=ee,window.__fof_getClientContext=Bs,window.__fof_setClientContext=Ba,window.__fof_setClientAxis=ja,window.__fof_validateClientContext=Gt,window.__fof_isLinked=()=>Bs().relationship==="LINKED",window.__fof_isPaid=()=>Bs().tier==="PAID",window.__fof_isTrial=()=>Bs().tier==="TRIAL";try{window.__fof_store&&typeof window.__fof_store.setState=="function"&&(window.__fof_store.setState(Aa=>({...Aa,clientContext:Bs()}),"clientContextInit"),window.addEventListener("flowofit:clientContextChanged",Aa=>{var Ci=Aa&&Aa.detail&&Aa.detail.clientContext?Aa.detail.clientContext:null;Ci&&window.__fof_store.setState(Ri=>({...Ri,clientContext:Ci}),"clientContextChanged")}))}catch(Aa){}window.__FOF_CLIENT_CONTEXT=Qa})();var Pn=(ee=>{var ge=ee||{};var bt=new Set;return{getState:()=>ge,setState:(mt,kt="setState")=>(ge=typeof mt=="function"?mt(ge):{...ge,...mt},bt.forEach(Rt=>{try{Rt(ge,kt)}catch(ea){}}),ge),subscribe:mt=>(bt.add(mt),()=>bt.delete(mt))}})({schema:1,selectedDayKey:typeof window.__fof_getSelectedDayKey=="function"?window.__fof_getSelectedDayKey():null,lastEventTsByDay:{}}),tn={schema:1,getEventsForDate:(ee,ge={})=>typeof window.__fof_getEventsForDate=="function"?window.__fof_getEventsForDate(ee,ge):[]},tr={schema:1,getPlanForDate:ee=>{try{return typeof window.__fof_getPlanForDate=="function"?window.__fof_getPlanForDate(ee):typeof window.getPlanForDate=="function"?window.getPlanForDate(ee):window.__fof_plan&&typeof window.__fof_plan=="object"&&window.__fof_plan[ee]||null}catch(ge){return null}}},tl={schema:1,daySummary:ee=>{var ge=ee||Pn.getState().selectedDayKey,bt=tn.getEventsForDate(ge)||[],rt={};var Xt=0;for(var lt of bt){var mt=lt&&lt.kind?String(lt.kind):"UNKNOWN";rt[mt]=(rt[mt]||0)+1,lt&&typeof lt.ts=="number"&&(Xt=Math.max(Xt,lt.ts))}return{dateKey:ge,totalEvents:bt.length,byKind:rt,lastEventTs:Xt||null}},adherence:ee=>({dateKey:ee||Pn.getState().selectedDayKey,status:"NOT_COMPUTED_YET",score:null,notes:"Adherence derived store is reserved for later slices (Phase 2) to keep parity with real app rules."})};window.addEventListener("flowofit:selectedDayChanged",ee=>{var ge=ee&&ee.detail&&ee.detail.selectedDayKey?ee.detail.selectedDayKey:null;ge&&Pn.setState(bt=>({...bt,selectedDayKey:ge}),"selectedDayChanged")}),window.addEventListener("flowofit:eventsUpdated",ee=>{var ge=ee&&ee.detail&&ee.detail.dateKey?ee.detail.dateKey:null,bt=ee&&ee.detail&&ee.detail.event&&typeof ee.detail.event.ts=="number"?ee.detail.event.ts:Date.now();ge&&Pn.setState(rt=>({...rt,lastEventTsByDay:{...rt.lastEventTsByDay||{},[ge]:bt}}),"eventsUpdated")}),window.__fof_store=Pn,window.__fof_planStore=tr,window.__fof_logStore=tn,window.__fof_derivedStore=tl,window.__fof_selectDayContext=ee=>typeof window.__fof_dayFlags=="function"?window.__fof_dayFlags(ee||Pn.getState().selectedDayKey):{selectedDayKey:ee||Pn.getState().selectedDayKey},window.__fof_selectEvents=(ee,ge={})=>tn.getEventsForDate(ee||Pn.getState().selectedDayKey,ge),window.__fof_selectDaySummary=ee=>tl.daySummary(ee),window.__fof_selectAdherence=ee=>tl.adherence(ee),(()=>{if(window.__fof_routingContracts__cdep_p14)return;window.__fof_routingContracts__cdep_p14=!0;var ee=1,ge="fof_route_intent_v1",bt=["TODAY","PLAN","LOG","COACH","INSIGHTS"],rt={TODAY:{tab:"TODAY"},PLAN:{tab:"PLAN"},LOG:{tab:"LOG"},COACH:{tab:"COACH"},INSIGHTS:{tab:"INSIGHTS"}},Xt=pt=>{try{return JSON.parse(pt||"")}catch(Qa){return null}},lt=()=>Xt(localStorage.getItem(ge))||null,mt=pt=>{try{localStorage.setItem(ge,JSON.stringify(pt))}catch(Qa){}};var kt=lt();(!kt||!kt.to||!bt.includes(kt.to))&&(kt={v:ee,ts:Date.now(),to:"TODAY"},mt(kt));var Ft=pt=>{try{window.dispatchEvent(new CustomEvent("flowofit:routeIntent",{detail:pt}))}catch(Qa){}},Rt=(pt={})=>{var Qa=(pt.to||"").toString().toUpperCase();if(!bt.includes(Qa))return{ok:!1,error:`Invalid route "to": ${pt.to}`};var Pi=pt.dateKey||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():void 0),Bs=pt.context&&typeof pt.context=="object"?pt.context:void 0;return{ok:!0,value:{v:ee,ts:Date.now(),to:Qa,dateKey:Pi,context:Bs,replace:!!pt.replace}}},ea=pt=>{var Qa=Rt(pt);return Qa.ok?(kt=Qa.value,mt(kt),Ft({intent:kt,route:rt[kt.to]}),{ok:!0,intent:kt,route:rt[kt.to]}):{ok:!1,error:Qa.error}},Gt=()=>kt,fa=()=>({to:kt&&kt.to?kt.to:"TODAY",route:rt[kt&&kt.to?kt.to:"TODAY"],dateKey:kt?kt.dateKey:void 0});window.__fof_routes=rt,window.__fof_navigate=ea,window.__fof_selectLastRouteIntent=Gt,window.__fof_selectCurrentRoute=fa,window.__fof_routeSchemaVersion=ee})(),(()=>{var ee=(lt,mt)=>{try{window.dispatchEvent(new CustomEvent(lt,{detail:mt}))}catch(kt){}},ge=(lt,mt={})=>{try{ee("flowofit:openOverlay",{key:lt,props:mt})}catch(kt){}return{ok:!0,key:lt,props:mt}};window.__fof_assertOverlayAllowed=window.__fof_assertOverlayAllowed||function(lt,mt){if(!(lt==="BOTTOM_SHEET"||lt==="FULLSCREEN_MODAL")){try{console.warn("[OverlayBlocked]",lt,mt)}catch(Ft){}return!1}return!0};var bt={openNutritionLogger:(lt=null)=>{try{ee("flowofit:navigateIntent",{to:"LOG"})}catch(mt){}try{ge("NUTRITION_LOGGER",{dateKey:lt})}catch(mt){}try{ee("flowofit:openLogSubtab",{subtab:"NUTRITION"})}catch(mt){}return{ok:!0}},openWorkoutLogger:(lt=null,mt={})=>{var kt="fof_entitlements_v1",Ft="fof_user_context_v1",Rt="fof_wk_precheck_done_v1::",Gt=((Bs,Ba={})=>{try{var ja=localStorage.getItem(Bs);return ja&&JSON.parse(ja)||Ba}catch(ja){return Ba}})(Ft,{}),pt=String(Gt.clientMode||Gt.relationship||Gt.mode||"").toUpperCase()==="LINKED",Qa=Rt+String(lt||"today"),Pi=!!localStorage.getItem(Qa);if(pt&&!Pi&&!mt.skipPrecheck){try{ge("WK_PRECHECK_EQUIP",{dateKey:lt})}catch(Bs){}return{ok:!0,precheck:!0}}try{ee("flowofit:navigateIntent",{to:"LOG"})}catch(Bs){}try{ge("WORKOUT_LOGGER",{dateKey:lt,__precheckBypass:!!(mt&&mt.skipPrecheck)})}catch(Bs){}try{ee("flowofit:openLogSubtab",{subtab:"WORKOUT"})}catch(Bs){}return{ok:!0}},openHabitsLogger:(lt=null)=>{try{ee("flowofit:navigateIntent",{to:"LOG"})}catch(mt){}try{ge("HABITS_LOGGER",{dateKey:lt})}catch(mt){}try{ee("flowofit:openLogSubtab",{subtab:"HABITS"})}catch(mt){}return{ok:!0}},openBodyMetricsLogger:(lt=null)=>{try{ee("flowofit:navigateIntent",{to:"LOG"})}catch(mt){}try{ge("BODY_LOGGER",{dateKey:lt})}catch(mt){}try{ee("flowofit:openLogSubtab",{subtab:"BODY"})}catch(mt){}return{ok:!0}},openRecoveryLogger:(lt=null)=>{try{ee("flowofit:navigateIntent",{to:"LOG"})}catch(mt){}try{ge("RECOVERY_LOGGER",{dateKey:lt})}catch(mt){}try{ee("flowofit:openLogSubtab",{subtab:"RECOVERY"})}catch(mt){}return{ok:!0}},openQuickLogSheet:(lt="WORKOUT",mt=null,kt=null)=>{try{ge("QUICK_LOG_SHEET_V1",{initialKind:lt,dateKey:mt,preset:kt})}catch(Ft){}return{ok:!0}},openFoodAddSheet:(lt=null,mt=null)=>{try{ge("FOOD_ADD_SHEET_V1",{dateKey:lt,preset:mt})}catch(kt){}return{ok:!0}},openFoodEntryDetailSheet:(lt=null,mt=null)=>{try{ge("FOOD_ENTRY_DETAIL_SHEET_V1",{dateKey:lt,entryId:mt})}catch(kt){}return{ok:!0}},openNutritionActionsSheet:(lt=null,mt=null)=>{var kt=mt&&mt.scope?mt.scope:"DAY",Ft=mt&&mt.mealKey?mt.mealKey:null;try{ge("NUTRITION_ACTIONS_SHEET_V1",{dateKey:lt,scope:kt,mealKey:Ft})}catch(Rt){}return{ok:!0}},openQuickAddMacrosSheet:(lt=null,mt=null)=>{try{ge("QUICK_ADD_MACROS_SHEET_V1",{dateKey:lt,preset:mt})}catch(kt){}return{ok:!0}},openSavedMealsSheet:(lt=null,mt=null)=>{try{ge("SAVED_MEALS_SHEET_V1",{dateKey:lt,preset:mt})}catch(kt){}return{ok:!0}},openCreateMealSheet:(lt=null,mt=null)=>{try{ge("CREATE_MEAL_SHEET_V1",{dateKey:lt,preset:mt})}catch(kt){}return{ok:!0}},openCreateRecipeSheet:(lt=null,mt=null)=>{try{ge("CREATE_RECIPE_SHEET_V1",{dateKey:lt,preset:mt})}catch(kt){}return{ok:!0}},openBarcodeStubSheet:()=>{try{ge("BARCODE_STUB_SHEET_V1",{})}catch(lt){}return{ok:!0}},openWorkoutViewer:(lt=null)=>{try{ge("WORKOUT_VIEWER_SHEET_V1",{item:lt})}catch(mt){}return{ok:!0}},openFilterSheet:(lt="GENERIC",mt={})=>{try{ge("FILTER_SHEET_V1",{context:lt,initial:mt})}catch(kt){}return{ok:!0}},goToday:()=>{try{window.__fof_navigate&&window.__fof_navigate({to:"TODAY"})}catch(lt){}ee("flowofit:navigateIntent",{to:"TODAY"})},goPlan:()=>{try{window.__fof_navigate&&window.__fof_navigate({to:"PLAN"})}catch(lt){}ee("flowofit:navigateIntent",{to:"PLAN"})},goLog:()=>{try{window.__fof_navigate&&window.__fof_navigate({to:"LOG"})}catch(lt){}ee("flowofit:navigateIntent",{to:"LOG"})},goCoach:()=>{try{window.__fof_navigate&&window.__fof_navigate({to:"COACH"})}catch(lt){}ee("flowofit:navigateIntent",{to:"COACH"})},goInsights:()=>{try{window.__fof_navigate&&window.__fof_navigate({to:"INSIGHTS"})}catch(lt){}ee("flowofit:navigateIntent",{to:"INSIGHTS"})},openLibrary:()=>ge("LIBRARY_HOME",{}),openProfile:()=>ge("PROFILE_HOME",{}),openReadinessModule:()=>ge("READINESS_MODULE",{}),openGoalManager:()=>ge("GOAL_MANAGER",{}),openBodyScan:()=>ge("BODY_SCAN_STUB_SHEET_V1",{})},rt={"Client_Nutrition_Logger_Module.CNL_Entry_IC":()=>bt.openNutritionLogger(null),"Client_Nutrition_Logger_Module.CNL_Entry_LC":()=>bt.openNutritionLogger(null),"Client_Workout_Logger_Module.CWL_Entry_IC":()=>bt.openWorkoutLogger(null),"Client_Workout_Logger_Module.CWL_Entry_LC":()=>bt.openWorkoutLogger(null),"Client_Recovery_Logger_Module.CRL_Entry_IC":()=>bt.openRecoveryLogger(null),"Client_Recovery_Logger_Module.CRL_Entry_LC":()=>bt.openRecoveryLogger(null),"Client_Readiness_Module.CRM_Entry_IC":()=>bt.openReadinessModule(),"Client_Readiness_Module.CRM_Entry_LC":()=>bt.openReadinessModule(),"Client_GoalManager_Module.CGM_Entry_IC":()=>bt.openGoalManager(),"Client_GoalManager_Module.CGM_Entry_LC":()=>bt.openGoalManager(),"Client_BodyScan_Module.CBS_Entry_IC":()=>bt.openBodyScan(),"Client_BodyScan_Module.CBS_Entry_LC":()=>bt.openBodyScan(),"IC_Free_Path.NutritionLog":()=>bt.openNutritionLogger(null),"IC_Free_Path.WorkoutLog":()=>bt.openWorkoutLogger(null),"IC_Free_Path.RecoveryLog":()=>bt.openRecoveryLogger(null)},Xt=(lt,mt)=>{try{var kt=rt[lt];return typeof kt=="function"?kt(mt):{ok:!1,error:"STUB_NOT_FOUND",id:lt}}catch(kt){return{ok:!1,error:"STUB_FAILED",id:lt,message:String(kt&&kt.message||kt)}}};window.__fof_openers=bt,window.__fof_stubs=rt,window.__fof_runStub=Xt,(()=>{if(window.__fof_2d_stub_register_v1)return;window.__fof_2d_stub_register_v1=!0;var lt={MicroTrainingModule_MT1:"Go to Micro-Training",GoToMicroTraining:"Trigger Micro-Training Suggestion",ProfessionalSearchHub_PSH_AI_Display_NEW:"Go to AI Recommendations",DunningFlow_DF_Client_Unlock_Triage:"Go to AI Unlock Triage",GlobalCommandBar_Module_Entry:"Open Command Bar","MetabolicEngine_Module.ME_Entry_IC":"Metabolic Engine & Macro Coaching",MentalHealthModule_MH1:"Go to Mindfulness",Referral_Program_RP1:"Go to Referral Program","Client_Readiness_Module.CRM_Entry_IC":"View Readiness Score","Client_GoalManager_Module.CGM_Entry_IC":"Manage Goals","Client_Nutrition_Logger_Module.CNL_Entry_IC":"Log Nutrition","Client_BodyScan_Module.CBS_Entry_IC":"Capture 3D Scan","Client_Nutrition_Logger_Module.CNL_Sync_to_IC":"Sync Data from Nutrition",IC_Choice:"Choose Training Path",IC_Paid_Dashboard:"IC Paid Dashboard",IC_Free_Dashboard:"Access Free Dashboard",IC_Start_Trial_NEW:"Start Trial of AI Tier",YC_Access_Check:"Yoga Access",YC_Session_Selection:"Yoga Session Selection",YC_Independent_Lib:"Access Full On-Demand Library",YC_Limited_Lib:"Browse Limited Free Library",YC_Upsell_Prompt:'"Upgrade to Full Yoga & Wellness Library?"',Payments_Module_PM_Entry:"Go to Checkout",YC_Filter_NEW:'"NEW: Apply Granular Filters"',YC_Perform:"Session Details",Discovery_Hub_DH_Entry:"Go to Discovery Hub",YC_Audio_Choice_NEW:'"NEW: Select Audio Experience"',YC_Do_Session:"Now Playing",YC_AR_Pose_Guide_NEW:"NEW: Activate AR Pose & Alignment Guide",AIHub_AIH_Form:"Trigger AI Form Check",YC_Log:"Log Session & Earn XP",YC_XP_Awarded:"XP Awarded!",YogaOnlyDashboard_YD1:"Go to Yoga Dashboard",IC_Connect_Devices_Prompt_NEW:'"Connect Wearables?"',IC_Voice_Mode:"NEW: Hands-Free Voice Logging 'Hey App, log 12 reps'",IC_Free_Options:"Select Action",IC_Wearable_Mgmt:"NEW: Manage Wearable Sync",IC_Upgrade_Options_Router:'"NEW: Check for Locked History"',IC_Free_Path:"Log workouts manually",IC_Check_Former_Sub_Scanner_NEW:'"NEW: Check User History"',IC_Scan_Doc_Free_Prompt_NEW:'"Start 14-Day Trial?"',IC_Unbundled_Offer_Scanner_NEW:"NEW: Unlock *just* the AI Scanner for $2.99/mo?",IC_Free_Engagement_Check_NEW:'"NEW: Check for High Engagement?"',IC_Free_Upsell_Nudge_NEW:"NEW: AI Nudge: 'Unlock your AI-driven TDEE... Start trial?'",IC_Unlock_History_Button:"Button: Unlock Your Full History",IC_Upgrade_Options:'"Upgrade Options Available"',IC_Check_Former_Sub_History_NEW:'"NEW: Check User History"',IC_Unbundled_Offer_History_NEW:"NEW: Unlock *just* History & Charts for $2.99/mo?",IC_Check_User_Status_NEW:'"NEW: Check Subscription Status"',IC_Reminder:"Gentle Pre-Expiration Reminders",IC_Dunning_Churn_Check_NEW:'"NEW: AI Dunning Check: Check Engagement"',IC_Payment_Nudge_Banner_NEW:"NEW: Show Non-Blocking Banner: 'Please update your payment info!'",IC_Ladder:"Upgrade Options",IC_Check_Loyalty_Status_NEW:'"NEW: Check User Loyalty (> 1 Year?)"',IC_Loyalty_Grace_Modal_NEW:"NEW: 'As a thank-you for 2 years, we've extended your access for 7 days!'",IC_Dashboard_Hub_NEW:'"NEW: Dashboard Hub"',IC_Churn_Risk_Check:'"NEW: Check for Disengagement Risk"',IC_Offline:"NEW: Offline Mode",IC_Wellness_Timeline:"View Wellness Trends?",IC_MH_Access:"Opt-In Mood/Mindfulness Logs",IC_TDEE_Display_NEW:"NEW: View AI-Driven TDEE & Body Comp Analysis",IC_BodyComp_AI_Report:"View: TDEE, AI Adjustments, Unlimited History Charts",IC_Paid_Options:"Select Action",IC_Churn_Alert:"NEW: AI Nudge: Churn Risk Detected",IC_Micro:"Small Micro Purchase ($X)",ProfessionalSearchHub_PSH_Entry:"Find a Professional",AIHub_AIH1:"Trigger AI Hub",IC_Discovery_Hub:"Access Discovery Hub",IC_PreviewEquip:"Preview Required Equipment",IC_Predict_Difficulty:'"NEW: AI Predicted Session Difficulty"',IC_Difficulty_Display:"NEW: Display: 'Forecast: Very Hard (9/10)'",IC_Select_Secondary_NEW:'"What do you want to add?"',IC_AI_Conflict_Check:"AI Conflict Check",IC_AI_Decision:'"Conflict?"',IC_Secondary_Router:'"NEW: Check Suggested Activity"',IC_AI_Warn_Alternative:"AI: 'Warning: Risk of injury.'",IC_AI_Suggestion:'"AI Suggests Alternative..."',IC_User_Override_NEW:"User Override Logged",IC_Check_Former_Sub_Scanner_PAID_NEW:'"NEW: Check User History"',IC_Scan_Doc_NEW:"Scan Document (AI-OCR)",IC_Scan_Doc_Confirm_NEW:"AI Digitizes & Creates Workout",IC_Redeem_Gift_Option_NEW:'"Option: Redeem a Gift / Promo Code"',ClientOnboardingDecisionFlow_C_Enter_Unique_Code:"Go to Gift Code Entry",IC_AR_Form_Coach_NEW:"NEW: Start Live AR Form Coach",IC_Sync:"All Data Syncs to AI Coach",IC_Exercise_Choice:'"Exercise: Log or Replace?"',IC_Log:"Log Sets/Reps/Weight",IC_Replace_Ex_NEW:"Select Alternative",IC_Plate_Calc_NEW:'"NEW: Use Plate Calculator?"',IC_Calc:"Enter Target Weight & Bar",IC_WorkoutTimer:"Access Built-in Interval Timer",IC_Custom:"NEW: In-Workout Customization",IC_Milestone_Check_NEW:'"NEW: Dynamic Milestone Achieved?"',IC_Milestone_Badge_NEW:"Award Badge & Prompt Social Share!",ReviewSubmissionFlow_RS_Start:"Leave a Review?",IC_Smart_Equip_Sync_NEW:"NEW: Sync Smart Equipment Data",IC_Readiness_Calc_NEW:"NEW: AI Calculates Daily Health & Readiness Score",IC_Wearable_Continuous:"NEW: Continuous Background Sync",IC_AI_Refer_Check:'"AI Detects High Risk?"',IC_AI_Smart_Cart_Gear_NEW:"NEW: AI suggests 'Injury Prevention' gear",IC_Curated_Match_NEW:"NEW: AI Generates 'Curated Match' of Top Coaches/Specialists",ProfessionalSearchHub_PSH_Search:"Go to Pre-Filtered Search",IC_OngoingOptions:"Ongoing Options: Get Help / Support",IC_Community_Link:"Access Community Hub",Community_Module_CM1:"Go to Community",IC_PhotoOverlay_Link_NEW:"NEW: Photo Progress Overlays",IC_Log_BodyComp_Manual_NEW:"NEW: Log Body Comp Manually",IC_Log_BodyComp_Form:"Enter: Body Fat %, Muscle Mass, Circumferences",IC10a:"View Achievements & Badges",IC_Share_Link_NEW:"NEW: Social Sharing of Achievements",IC_Generate_Timeline:"AI Renders Historical Graph + Forecasts",AIHub_AIH_Predict:"Trigger AI Prediction",IC_AI_Nudge:"AI Ndge for Mindfulness",IC_Public_Live:"Access Public Live Sessions",PublicLiveDiscovery_Module_PLD1_M:"Go to Live Discovery",IC_Solo_Challenge:"AI-Matched Peers for Solo Challenges",User_Trainer_Actions_CH3:"Go to Challenges",IC_Peer_Match:"Opt-In Anonymity Matching",IC_Earn_Bonus_XP:"Earn Bonus XP",Gamification_Module_C1:"Trigger Gamification",IC_Referral:"Share Code for Friend XP Bonus",IC_Referral_Share_NEW:"NEW: Trigger Client-Side Share Modal (Email, SMS)",IC_Badge:"Solo Warrior Badge",Gamification_Module_D1:"Go to Rewards",AIHub_AIH_Content:"Trigger AI Content Gen"},mt=(ea,Gt)=>{try{window.dispatchEvent(new CustomEvent(ea,{detail:Gt}))}catch(fa){}},kt=ea=>{var Gt=(ea||"").toString().toUpperCase();return Gt==="HOME"?"TODAY":Gt==="TRACK"?"LOG":Gt},Ft=(ea,Gt={})=>{var fa=(ea||"").toString(),pt=lt[fa]||fa||"Unknown",Qa=Gt&&Gt.to?kt(Gt.to):null;return Qa&&mt("flowofit:navigateIntent",{to:Qa}),mt("flowofit:openOverlay",{key:"NODE_STUB",props:{nodeId:fa,label:pt,ctx:Gt||{}}}),{ok:!0,nodeId:fa,label:pt}};window.__fof_2d_labels=lt,window.__fof_openNode=Ft;var Rt=window.__fof_stubs||(window.__fof_stubs={});Object.keys(lt).forEach(ea=>{Rt[ea]||(Rt[ea]=Gt=>Ft(ea,Gt||{}))}),window.__fof_findNodeIds=(ea="")=>{var Gt=(ea||"").toString().toLowerCase().trim();if(!Gt)return[];try{return Object.keys(lt).filter(fa=>{var pt=(lt[fa]||"").toString().toLowerCase();return fa.toLowerCase().includes(Gt)||pt.includes(Gt)}).slice(0,25)}catch(fa){return[]}}})()})();var vd=(()=>{var ee="fof_event_log_v1",bt=()=>{try{return JSON.parse(localStorage.getItem(ee)||"[]")}catch(mt){return[]}},rt=mt=>{try{localStorage.setItem(ee,JSON.stringify(mt.slice(-500)))}catch(kt){}};return{read:bt,push:mt=>{var kt=bt();return kt.push(mt),rt(kt),mt},clear:()=>rt([]),KEY:ee}})(),eo=(ee,ge={})=>{var bt={event_id:Ys(),event_name:ee,ts:bi(),tenant_id:window.__fofTenantId||"tenant_demo",actor_type:window.__fofActorType||"user",actor_id:window.__fofActorId||"demo_user",session_id:window.__fofSessionId||(window.__fofSessionId=Ys()),view:window.__fofView||null,payload:ge};return vd.push(bt),bt},Si=(ee,ge,bt={})=>{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:ee,body:ge,meta:bt}}))},{motion:Hl,AnimatePresence:Pd}=window.Motion?window.Motion:{motion:{div:"div"},AnimatePresence:({children:ee})=>ee},gi=({name:ee,size:ge=20,className:bt="",color:rt})=>{var Xt=Ta(null);return Ii(()=>{if(window.lucide&&window.lucide.icons&&window.lucide.icons[ee]&&Xt.current){var lt=window.lucide.createElement(window.lucide.icons[ee]);lt.setAttribute("width",ge),lt.setAttribute("height",ge),bt&&lt.setAttribute("class",bt),rt&&lt.setAttribute("stroke",rt),Xt.current.innerHTML="",Xt.current.appendChild(lt)}else!window.lucide&&Xt.current&&(Xt.current.innerHTML="<span>?</span>")},[ee,ge,bt,rt]),React.createElement("span",{ref:Xt,className:"inline-flex items-center justify-center "+bt,style:{width:ge,height:ge}})},qo=({open:ee,title:ge,kicker:bt="Details",headerRight:rt=null,children:Xt,footer:lt=null,onClose:mt,disableBackdropClose:kt=!1,ariaLabel:Ft,maxHeightVh:Rt=88})=>{if(!ee)return null;var ea=fa=>{kt||typeof mt=="function"&&mt(fa)};React.useEffect(()=>{var fa=document.documentElement.style.overflow,pt=document.body.style.overflow;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{document.documentElement.style.overflow=fa||"",document.body.style.overflow=pt||""}},[]);var Gt=fa=>{try{fa.stopPropagation()}catch(pt){}};return React.createElement("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-3 pt-[max(env(safe-area-inset-top),12px)]"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:ea,"aria-label":"Close sheet",role:"button"}),React.createElement("div",{className:"relative w-full max-w-xl rounded-[28px] border border-white/12 bg-[rgba(2,6,23,0.92)] backdrop-blur-2xl shadow-[0_30px_90px_rgba(0,0,0,0.7)] overflow-hidden modal-card flex flex-col",style:{maxHeight:`${Rt}dvh`,paddingBottom:"max(env(safe-area-inset-bottom), 0px)"},onClick:Gt,onMouseDown:Gt,onTouchStart:Gt,role:"dialog","aria-label":Ft||ge||"Bottom sheet"},React.createElement("div",{className:"sticky top-0 z-10 border-b border-white/10 bg-[rgba(2,6,23,0.92)] backdrop-blur-2xl"},React.createElement("div",{className:"flex items-center justify-center pt-2"},React.createElement("div",{className:"h-1 w-10 rounded-full bg-white/20"})),React.createElement("div",{className:"px-4 md:px-5 pb-3 pt-2"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},bt),React.createElement("div",{className:"text-white font-extrabold text-[16px] leading-snug"},ge)),React.createElement("div",{className:"flex items-center gap-2"},rt,React.createElement("button",{type:"button",onClick:fa=>typeof mt=="function"?mt(fa):null,className:"p-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 hover:text-white","aria-label":"Close"},React.createElement(gi,{name:"X",size:16})))))),React.createElement("div",{className:"px-4 md:px-5 py-4 space-y-2 overflow-y-auto scroll-area",style:{WebkitOverflowScrolling:"touch"}},Xt,React.createElement("div",{className:"h-28"})),lt?React.createElement("div",{className:"sticky bottom-0 z-10 border-t border-white/10 bg-[rgba(2,6,23,0.92)] backdrop-blur-2xl px-4 md:px-5 py-3"},lt):null))},al=({open:ee,title:ge,kicker:bt="Details",children:rt,onClose:Xt})=>React.createElement(qo,{open:ee,title:ge,kicker:bt,onClose:Xt},rt),wd=({open:ee,onClose:ge,title:bt="Filters",context:rt="GENERIC",children:Xt})=>!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET","FILTER_SHEET_V1")?null:React.createElement(qo,{open:ee,onClose:ge,title:bt},React.createElement("div",{className:"px-1"},Xt)),fd=({open:ee,title:ge="Discard changes?",message:bt="You have unsaved changes. If you discard, this entry will be lost.",keepLabel:rt="Keep editing",discardLabel:Xt="Discard",onKeep:lt,onDiscard:mt,onClose:kt})=>{if(!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET","CONFIRM_DISCARD"))return null;var Ft=()=>{try{lt&&lt()}catch(ea){}try{kt&&kt()}catch(ea){}};return React.createElement(qo,{open:ee,title:ge,kicker:"Confirm",onClose:Ft,footer:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white/85 hover:bg-white/8 active:scale-[0.99]",onClick:Ft},rt),React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-rose-400/25 bg-rose-500/20 px-4 py-3 text-[12px] font-extrabold text-rose-100 hover:bg-rose-500/25 active:scale-[0.99]",onClick:()=>{try{mt&&mt()}catch(ea){}try{kt&&kt()}catch(ea){}}},Xt)),maxHeightVh:60},React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"text-[13px] text-white/80 leading-relaxed"},bt)))},Md=({open:ee,title:ge="End workout?",message:bt="You have an active workout in progress. What would you like to do?",resumeLabel:rt="Resume",saveExitLabel:Xt="Save & exit",discardLabel:lt="Discard",onResume:mt,onSaveExit:kt,onDiscard:Ft,onClose:Rt})=>{if(!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET","ACTIVE_WORKOUT_EXIT"))return null;var ea=()=>{try{mt&&mt()}catch(pt){}try{Rt&&Rt()}catch(pt){}};return React.createElement(qo,{open:ee,title:ge,kicker:"Confirm",onClose:ea,footer:React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{type:"button",className:"w-full rounded-2xl bg-white text-black px-4 py-3 text-[12px] font-extrabold shadow-[0_18px_60px_rgba(0,0,0,0.25)] active:scale-[0.99]",onClick:()=>{try{kt&&kt()}catch(pt){}try{Rt&&Rt()}catch(pt){}}},Xt),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white/85 hover:bg-white/8 active:scale-[0.99]",onClick:ea},rt),React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-rose-400/25 bg-rose-500/20 px-4 py-3 text-[12px] font-extrabold text-rose-100 hover:bg-rose-500/25 active:scale-[0.99]",onClick:()=>{try{Ft&&Ft()}catch(pt){}try{Rt&&Rt()}catch(pt){}}},lt))),maxHeightVh:60},React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"text-[13px] text-white/80 leading-relaxed"},bt),React.createElement("div",{className:"text-[11px] text-white/50 font-bold"},"Tip: Save & exit keeps your workout draft so you can resume later.")))},td=({open:ee,featureKey:ge="Premium Feature",meta:bt={},onClose:rt})=>{if(!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET",ge))return null;var Xt=bt&&bt.ctx?bt.ctx:window.__FOF_CLIENT_CONTEXT||{},lt=String(Xt&&Xt.tier?Xt.tier:"FREE").toUpperCase(),mt={AI_PLANNING:{title:"AI Planning",bullets:["Adaptive plans using Capacity Score","Auto-adjust sessions to avoid burnout","Smarter progress week to week"],unlocks:["AI plan generation","Smart modifications","Plan history & insights"]},HISTORY:{title:"Full History & Charts",bullets:["See trends across weeks & months","Spot plateaus early","Track consistency and progress"],unlocks:["Unlimited history","Insights charts","Export-ready summaries"]},YOGA_FULL:{title:"Yoga & Wellness \u2014 Full Library",bullets:["Full on-demand library","Guided journeys & programs","Better recovery and mobility"],unlocks:["Full yoga library","Premium sessions","Advanced filters"]},COACH:{title:"Coach Features",bullets:["Message support & accountability","Coach-led check-ins","Faster progress with guidance"],unlocks:["Coach-led features","Assigned plans","Coach inbox tools"]},DEFAULT:{title:"Premium Access",bullets:["Unlock the full FlowOFit experience","AI-driven planning and insights","Premium modules and history"],unlocks:["Premium features","Full access","Member tools"]}},kt=String(ge||"DEFAULT").toUpperCase(),Ft=kt.includes("YOGA")?"YOGA_FULL":kt.includes("HISTORY")||kt.includes("CHART")?"HISTORY":kt.includes("PLAN")||kt.includes("AI")?"AI_PLANNING":kt.includes("COACH")?"COACH":"DEFAULT",Rt=mt[Ft]||mt.DEFAULT,ea=lt==="TRIAL",Gt=lt==="PAID",fa=Gt?"Manage Plan":ea?"Upgrade Now":"Start Free Trial",pt=Gt?"Membership":ea?"Trial":"Upgrade",Qa=["Cancel anytime","Secure checkout","No hidden fees"],Pi=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"Payments_Module_PM_Entry",props:{mode:Gt?"MANAGE":ea?"UPGRADE":"TRIAL",featureKey:ge}}}));try{eo("paywall.v1.cta",{featureKey:ge,tier:lt})}catch(Ba){}}catch(Ba){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"IC_Upgrade_Options_Router",props:{featureKey:ge,meta:bt}}}))}catch(ja){}}try{typeof rt=="function"&&rt()}catch(Ba){}},Bs=Ba=>{typeof rt=="function"&&rt(Ba)};return React.createElement("div",{className:"fixed inset-0 z-50 flex items-center md:items-center justify-center bg-black/70 p-3 pt-[max(env(safe-area-inset-top),12px)] modal-overlay",onMouseDown:Bs,onClick:Bs,onTouchStart:Bs,role:"presentation"},React.createElement("div",{className:"w-full max-w-xl rounded-[28px] border border-white/12 bg-[rgba(2,6,23,0.92)] backdrop-blur-2xl shadow-[0_30px_90px_rgba(0,0,0,0.7)] p-4 md:p-5 modal-card flex flex-col",style:{maxHeight:"88vh"},onMouseDown:Ba=>Ba.stopPropagation(),onClick:Ba=>Ba.stopPropagation(),onTouchStart:Ba=>Ba.stopPropagation(),role:"dialog","aria-label":Rt.title},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},pt),React.createElement("div",{className:"text-white font-extrabold text-[18px] tracking-tight"},Rt.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"This feature is locked for your current plan.")),React.createElement("button",{type:"button",onClick:Bs,className:"p-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 hover:text-white","aria-label":"Close"},React.createElement(gi,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 space-y-4 overflow-y-auto pr-1",style:{WebkitOverflowScrolling:"touch"}},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Benefits"),React.createElement("ul",{className:"mt-2 space-y-2"},Rt.bullets.map((Ba,ja)=>React.createElement("li",{key:ja,className:"flex items-start gap-2 text-[12px] text-white/75"},React.createElement("span",{className:"mt-[2px] inline-flex h-4 w-4 items-center justify-center rounded-full bg-brand/20 border border-brand/30 text-brand font-black"},"\u2713"),React.createElement("span",{className:"leading-snug"},Ba))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"What unlocks"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Rt.unlocks.map((Ba,ja)=>React.createElement("span",{key:ja,className:"px-2.5 py-1 rounded-full border border-white/10 bg-black/30 text-[11px] font-bold text-white/75"},Ba)))),React.createElement("div",{className:"flex flex-wrap gap-2"},Qa.map((Ba,ja)=>React.createElement("span",{key:ja,className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[11px] font-bold text-white/70"},Ba))),React.createElement("div",{className:"h-28"})),React.createElement("div",{className:"mt-3 pt-3 border-t border-white/10"},React.createElement("button",{type:"button",onClick:Pi,className:"w-full rounded-2xl bg-brand hover:bg-brand/90 text-black font-extrabold py-3 text-[13px]"},fa),React.createElement("button",{type:"button",onClick:Bs,className:"mt-2 w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 font-bold py-2.5 text-[12px]"},"Not now"))))},ar=({open:ee,title:ge="Menu",children:bt,onClose:rt})=>ee?React.createElement("div",{className:"fixed inset-0 z-50 bg-black/70",onClick:lt=>{typeof rt=="function"&&rt(lt)},role:"presentation"},React.createElement("div",{className:"absolute inset-y-0 left-0 w-[88vw] max-w-[360px] bg-midnight-950 border-r border-white/10 shadow-[0_30px_90px_rgba(0,0,0,0.7)] p-4 overflow-y-auto",onClick:lt=>lt.stopPropagation(),onMouseDown:lt=>lt.stopPropagation(),role:"dialog","aria-label":ge},React.createElement("div",{className:"flex items-center justify-between gap-3 mb-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Profile"),React.createElement("div",{className:"text-white font-extrabold text-[16px] leading-tight"},ge)),React.createElement("button",{type:"button",className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center",onClick:rt,"aria-label":"Close"},React.createElement(gi,{name:"X",size:16}))),bt,React.createElement("div",{className:"h-6"}))):null,Fd=({open:ee,modeLabel:ge="Train now",onClose:bt,onSubmit:rt})=>{var Xt=[{k:"STRENGTH",t:"Strength"},{k:"YOGA",t:"Yoga"},{k:"NUTRITION",t:"Nutrition"},{k:"MOBILITY",t:"Mobility / Recovery"},{k:"SPORT",t:"Sport"}],lt=[{k:15,t:"15 min"},{k:30,t:"30 min"},{k:45,t:"45 min"},{k:60,t:"60+ min"}],mt=[{k:"NONE",t:"None / Bodyweight"},{k:"DUMBBELLS",t:"Dumbbells"},{k:"BARBELL",t:"Barbell"},{k:"MACHINES",t:"Machines"},{k:"BANDS",t:"Bands"},{k:"YOGA_MAT",t:"Yoga mat"},{k:"CARDIO",t:"Cardio machine"}],kt=[{k:"SORENESS",t:"Soreness"},{k:"INJURY",t:"Injury / pain"},{k:"AT_HOME",t:"At home"},{k:"GYM",t:"Gym"},{k:"TRAVEL",t:"Travel"},{k:"LOW_ENERGY",t:"Low energy"}],Ft=[{k:"EASY",t:"Easy"},{k:"MODERATE",t:"Moderate"},{k:"HARD",t:"Hard"}],Rt={STRENGTH:["NONE","DUMBBELLS","BARBELL","MACHINES","BANDS"],YOGA:["NONE","YOGA_MAT","BANDS"],NUTRITION:["NONE"],MOBILITY:["NONE","YOGA_MAT","BANDS"],SPORT:["NONE","CARDIO","BANDS","DUMBBELLS","MACHINES"]},ea={STRENGTH:["SORENESS","INJURY","AT_HOME","GYM","TRAVEL","LOW_ENERGY"],YOGA:["SORENESS","INJURY","AT_HOME","GYM","TRAVEL","LOW_ENERGY"],NUTRITION:["AT_HOME","TRAVEL","LOW_ENERGY"],MOBILITY:["SORENESS","INJURY","AT_HOME","GYM","TRAVEL","LOW_ENERGY"],SPORT:["SORENESS","INJURY","AT_HOME","GYM","TRAVEL","LOW_ENERGY"]},[Gt,fa]=React.useState("STRENGTH"),[pt,Qa]=React.useState(30),[Pi,Bs]=React.useState(["NONE"]),[Ba,ja]=React.useState([]),[Aa,Ci]=React.useState("MODERATE"),Ri=React.useMemo(()=>{var xt=Rt[String(Gt||"").toUpperCase()]||mt.map(li=>li.k);return mt.filter(li=>xt.includes(li.k))},[Gt]),_i=React.useMemo(()=>{var xt=ea[String(Gt||"").toUpperCase()]||kt.map(li=>li.k);return kt.filter(li=>xt.includes(li.k))},[Gt]);React.useEffect(()=>{var xt=String(Gt||"").toUpperCase(),li=new Set(Rt[xt]||mt.map(Hi=>Hi.k)),us=new Set(ea[xt]||kt.map(Hi=>Hi.k));Bs(Hi=>{var Is=(Array.isArray(Hi)?Hi:[]).filter(Js=>li.has(Js));return Is.length?Is:["NONE"]}),ja(Hi=>(Array.isArray(Hi)?Hi:[]).filter(Is=>us.has(Is)))},[Gt]),React.useEffect(()=>{ee&&(fa("STRENGTH"),Qa(30),Bs(["NONE"]),ja([]),Ci("MODERATE"))},[ee]);var ns=(xt,li)=>xt.includes(li)?xt.filter(us=>us!==li):[...xt,li],Zi=({active:xt,children:li,onClick:us,title:Hi})=>React.createElement("button",{type:"button",onClick:us,title:Hi,className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition touch-manipulation "+(xt?"border-cyan-300/35 bg-cyan-400/12 text-white shadow-[0_0_0_1px_rgba(77,233,255,0.12)]":"border-white/12 bg-white/6 hover:bg-white/10 text-white/80")},li),ci=!!Gt&&!!pt&&!!Aa,Cs=()=>{if(!ci)return;var xt={intentType:"TRAIN_NOW",goal:Gt,timeMinutes:pt===60?60:Number(pt)||30,equipment:Array.isArray(Pi)?Pi:[],constraints:Array.isArray(Ba)?Ba:[],preference:Aa,ts:Date.now(),v:"A8.1"};try{localStorage.setItem("fof_gold_input_v1",JSON.stringify(xt))}catch(li){}try{window.dispatchEvent(new CustomEvent("flowofit:goldInputSubmitted",{detail:xt}))}catch(li){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Saved inputs. Next: build today's plan (A8.2+)."}}))}catch(li){}try{typeof rt=="function"&&rt(xt)}catch(li){}try{typeof bt=="function"&&bt()}catch(li){}};return React.createElement(qo,{open:ee,title:"Train Now \u2014 Inputs",kicker:String(ge||"Coach Gold").toUpperCase(),onClose:bt},React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Goal today ",React.createElement("span",{className:"text-white/40"},"(required)")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Xt.map(xt=>React.createElement(Zi,{key:xt.k,active:Gt===xt.k,onClick:()=>fa(xt.k)},xt.t)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Time available ",React.createElement("span",{className:"text-white/40"},"(required)")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},lt.map(xt=>React.createElement(Zi,{key:xt.k,active:pt===xt.k,onClick:()=>Qa(xt.k)},xt.t)))),String(Gt||"").toUpperCase()==="NUTRITION"?null:React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Equipment ",React.createElement("span",{className:"text-white/40"},"(optional)")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Ri.map(xt=>React.createElement(Zi,{key:xt.k,active:Pi.includes(xt.k),onClick:()=>{var li=ns(Pi,xt.k),us=li.includes("NONE")&&li.length>1?li.filter(Hi=>Hi!=="NONE"):li;Bs(us.length?us:["NONE"])}},xt.t)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Constraints ",React.createElement("span",{className:"text-white/40"},"(optional)")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},_i.map(xt=>React.createElement(Zi,{key:xt.k,active:Ba.includes(xt.k),onClick:()=>ja(ns(Ba,xt.k))},xt.t)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"How hard today? ",React.createElement("span",{className:"text-white/40"},"(required)")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Ft.map(xt=>React.createElement(Zi,{key:xt.k,active:Aa===xt.k,onClick:()=>Ci(xt.k)},xt.t))),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Preference only \u2014 Capacity Score remains the safety modifier.")),React.createElement("div",{className:"pt-1 flex gap-2"},React.createElement("button",{type:"button",onClick:Cs,disabled:!ci,className:"flex-1 px-4 py-3 rounded-2xl font-extrabold transition "+(ci?"bg-white text-black":"bg-white/15 text-white/40 border border-white/10 cursor-not-allowed")},"Apply to Plan"),React.createElement("button",{type:"button",onClick:bt,className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-white/85"},"Cancel"))))};(function(){var ge=(ea,Gt=null)=>{try{return JSON.parse(ea)}catch(fa){return Gt}},bt=(ea,Gt="")=>{try{return String(ea!=null?ea:Gt)}catch(fa){return Gt}},rt=ea=>{try{if(typeof window.__fof_localDateKey=="function")return window.__fof_localDateKey(ea)}catch(Gt){}try{var Gt=ea instanceof Date?ea:new Date(ea),fa=Gt.getFullYear(),pt=String(Gt.getMonth()+1).padStart(2,"0"),Qa=String(Gt.getDate()).padStart(2,"0");return`${fa}-${pt}-${Qa}`}catch(Gt){}return null},Xt=(ea,Gt)=>{try{var[fa,pt,Qa]=(ea||"").split("-").map(Number),Pi=new Date(fa,(pt||1)-1,Qa||1),Bs=new Date(Pi.getTime()-Gt*864e5);return rt(Bs)}catch(fa){}return null},lt=()=>{try{if(typeof window.__fof_getClientContext=="function")return window.__fof_getClientContext()||{}}catch(ea){}return{}},mt=ea=>{try{if(typeof window.__fof_selectDayContext=="function")return window.__fof_selectDayContext(ea)||{}}catch(Gt){}return{}},kt=ea=>{try{if(typeof window.__fof_selectEvents=="function")return window.__fof_selectEvents(ea)||[]}catch(Gt){}try{var Gt=localStorage.getItem(`fof_events_${ea}`),fa=ge(Gt,[]);return Array.isArray(fa)?fa:[]}catch(Gt){}return[]},Ft=(ea=[])=>{var Gt={counts:{WORKOUT:0,YOGA:0,NUTRITION:0,METRIC:0,RECOVERY:0,OTHER:0},calories:0,protein:0,carbs:0,fat:0,lastWorkout:null,lastYoga:null,lastNutrition:null},fa=pt=>bt((pt==null?void 0:pt.type)||(pt==null?void 0:pt.kind)||(pt==null?void 0:pt.eventType)||(pt==null?void 0:pt.segment)||(pt==null?void 0:pt.category)||"OTHER").toUpperCase();return(Array.isArray(ea)?ea:[]).forEach(pt=>{var _i,ns,Zi,ci,Cs,xt,li,us,Hi;var Qa=fa(pt),Pi=Qa.includes("WORK")||Qa.includes("STRENGTH")||Qa.includes("LIFT")||Qa==="SESSION",Bs=Qa.includes("YOGA")||Qa.includes("MIND")||Qa.includes("BREATH"),Ba=Qa.includes("NUT")||Qa.includes("FOOD")||Qa.includes("MEAL")||Qa.includes("CAL"),ja=Qa.includes("WEIGHT")||Qa.includes("METRIC")||Qa.includes("BODY"),Aa=Qa.includes("RECOV")||Qa.includes("SLEEP")||Qa.includes("STRESS")||Qa.includes("READINESS");Pi?Gt.counts.WORKOUT+=1:Bs?Gt.counts.YOGA+=1:Ba?Gt.counts.NUTRITION+=1:ja?Gt.counts.METRIC+=1:Aa?Gt.counts.RECOVERY+=1:Gt.counts.OTHER+=1;var Ci=(pt==null?void 0:pt.ts)||(pt==null?void 0:pt.time)||(pt==null?void 0:pt.at)||(pt==null?void 0:pt.createdAt)||null,Ri=typeof Ci=="number"?Ci:Ci?Date.parse(Ci):null;if(Ba){var wi=Number((Zi=(ns=(_i=pt==null?void 0:pt.calories)!=null?_i:pt==null?void 0:pt.kcal)!=null?ns:pt==null?void 0:pt.energy)!=null?Zi:0)||0;Gt.calories+=wi,Gt.protein+=Number((Cs=(ci=pt==null?void 0:pt.protein)!=null?ci:pt==null?void 0:pt.p)!=null?Cs:0)||0,Gt.carbs+=Number((li=(xt=pt==null?void 0:pt.carbs)!=null?xt:pt==null?void 0:pt.c)!=null?li:0)||0,Gt.fat+=Number((Hi=(us=pt==null?void 0:pt.fat)!=null?us:pt==null?void 0:pt.f)!=null?Hi:0)||0,(!Gt.lastNutrition||Ri&&Ri>Gt.lastNutrition.stamp)&&(Gt.lastNutrition={ev:pt,stamp:Ri||0})}Pi&&(!Gt.lastWorkout||Ri&&Ri>Gt.lastWorkout.stamp)&&(Gt.lastWorkout={ev:pt,stamp:Ri||0}),Bs&&(!Gt.lastYoga||Ri&&Ri>Gt.lastYoga.stamp)&&(Gt.lastYoga={ev:pt,stamp:Ri||0})}),Gt},Rt=({dateKey:ea=null,input:Gt=null}={})=>{var fa=ea||rt(new Date),pt=lt(),Qa=mt(fa),Pi=typeof Qa.capacityScore!="undefined"?Qa.capacityScore:typeof pt.capacityScore!="undefined"?pt.capacityScore:typeof pt.capacity!="undefined"?pt.capacity:null,Bs=bt(Qa.capacityZone||Qa.capacityBand||pt.capacityZone||pt.capacityBand||pt.capacityZoneNow||"").toUpperCase()||null,Ba={counts:{WORKOUT:0,YOGA:0,NUTRITION:0,METRIC:0,RECOVERY:0,OTHER:0},calories:0,protein:0,carbs:0,fat:0};var ja={workout:null,yoga:null,nutrition:null};for(var Ci=0;Ci<7;Ci++){var Ri=Ci===0?fa:Xt(fa,Ci);if(!Ri)continue;var _i=kt(Ri),ns=Ft(_i);Object.keys(Ba.counts).forEach(Zi=>Ba.counts[Zi]+=ns.counts[Zi]||0),Ba.calories+=ns.calories||0,Ba.protein+=ns.protein||0,Ba.carbs+=ns.carbs||0,Ba.fat+=ns.fat||0,ns.lastWorkout&&(!ja.workout||ns.lastWorkout.stamp>ja.workout.stamp)&&(ja.workout=ns.lastWorkout),ns.lastYoga&&(!ja.yoga||ns.lastYoga.stamp>ja.yoga.stamp)&&(ja.yoga=ns.lastYoga),ns.lastNutrition&&(!ja.nutrition||ns.lastNutrition.stamp>ja.nutrition.stamp)&&(ja.nutrition=ns.lastNutrition)}return{v:"A8.2",dateKey:fa,ts:Date.now(),client:{relationship:bt(pt.relationship||pt.clientMode||pt.mode||"").toUpperCase()||null,emphasis:bt(pt.emphasis||pt.primaryFocus||"").toUpperCase()||null,tier:bt(pt.tier||"FREE").toUpperCase()},capacity:{score:Pi,zone:Bs},recent7d:{counts:Ba.counts,nutritionTotals:{calories:Ba.calories,protein:Ba.protein,carbs:Ba.carbs,fat:Ba.fat},last:{workout:ja.workout?ja.workout.ev:null,yoga:ja.yoga?ja.yoga.ev:null,nutrition:ja.nutrition?ja.nutrition.ev:null}},today:{dayContext:Qa||{},events:kt(fa)},input:Gt||null}};window.__fof_gold_buildContext=Rt,window.addEventListener("flowofit:goldInputSubmitted",ea=>{try{var Gt=(ea==null?void 0:ea.detail)||null,fa=rt(new Date),pt=Rt({dateKey:fa,input:Gt});try{localStorage.setItem("fof_gold_context_v1",JSON.stringify(pt))}catch(Qa){}try{localStorage.setItem("fof_gold_request_v1",JSON.stringify({input:Gt,context:pt,ts:Date.now(),v:"A8.2"}))}catch(Qa){}try{window.dispatchEvent(new CustomEvent("flowofit:goldContextReady",{detail:pt}))}catch(Qa){}}catch(Gt){}})})(),(()=>{var ee=Ba=>Ba===null||typeof Ba=="undefined"?"":String(Ba),ge=(Ba,ja)=>Array.isArray(Ba)&&Ba.length?Ba[Math.max(0,ja%Ba.length)]:null,bt=Ba=>{var ja=ee(Ba);var Aa=2166136261;for(var Ci=0;Ci<ja.length;Ci++)Aa^=ja.charCodeAt(Ci),Aa=Math.imul(Aa,16777619);return Aa>>>0},rt=Ba=>{var ja=[],Aa=new Set;return(Ba||[]).forEach(Ci=>{var Ri=ee(Ci).toUpperCase();!Ri||Aa.has(Ri)||(Aa.add(Ri),ja.push(Ri))}),ja},Xt=Ba=>rt((Array.isArray(Ba)?Ba:[]).map(ja=>ee(ja).toUpperCase())),lt=(Ba,ja)=>{var Aa=new Set((Ba||[]).map(Ci=>ee(Ci).toUpperCase()));return(ja||[]).some(Ci=>Aa.has(ee(Ci).toUpperCase()))},mt=Ba=>{var ja=ee(Ba).toUpperCase();return ja.includes("LOW")?"LOW":ja.includes("HIGH")?"HIGH":ja.includes("MID")?"MID":null},kt=Ba=>{var ja=ee(Ba).toUpperCase();return ja.includes("EASY")?"EASY":ja.includes("HARD")?"HARD":ja.includes("MOD")?"MODERATE":null},Ft=({capacityZone:Ba,preference:ja})=>{var Aa=mt(Ba),Ci=kt(ja);return Aa==="LOW"?{label:"Easy",code:"EASY"}:Aa==="HIGH"&&Ci==="HARD"?{label:"Hard",code:"HARD"}:Ci==="EASY"?{label:"Easy",code:"EASY"}:Ci==="HARD"?{label:"Hard",code:"HARD"}:{label:"Moderate",code:"MODERATE"}},Rt={STRENGTH:{WARMUP:[{name:"Breathing + bracing",detail:"2 min \u2022 nasal breaths, brace practice",tags:["prep"]},{name:"Dynamic hips + t-spine",detail:"4\u20136 min \u2022 controlled range",tags:["mobility"]},{name:"RAMP warm-up",detail:"5 min \u2022 raise, activate, mobilize, potentiate",tags:["prep"]}],COMPOUND:[{name:"Squat pattern",detail:"Back squat / goblet squat variation",equip:["BARBELL","DUMBBELLS","MACHINES"],tags:["lower","compound"]},{name:"Hinge pattern",detail:"RDL / trap-bar / hip hinge variation",equip:["BARBELL","DUMBBELLS","MACHINES"],tags:["posterior","compound"]},{name:"Push pattern",detail:"Bench / DB press / push variation",equip:["BARBELL","DUMBBELLS","MACHINES"],tags:["upper","push"]},{name:"Pull pattern",detail:"Row / pulldown / pull variation",equip:["MACHINES","DUMBBELLS","BANDS"],tags:["upper","pull"]}],ACCESSORY:[{name:"Split squat / lunge",detail:"3 sets \u2022 controlled tempo",equip:["DUMBBELLS","BODYWEIGHT","MACHINES"],tags:["lower"]},{name:"Core: anti-rotation",detail:"2\u20133 sets \u2022 slow and strict",equip:["BANDS","CABLE","BODYWEIGHT"],tags:["core"]},{name:"Rear delts + posture",detail:"2\u20133 sets \u2022 squeeze at peak",equip:["BANDS","DUMBBELLS","MACHINES"],tags:["posture"]}],COOLDOWN:[{name:"Walk + nasal breathe",detail:"3\u20135 min \u2022 downshift",tags:["recovery"]},{name:"Stretch: hips/hamstrings",detail:"4\u20136 min \u2022 easy holds",tags:["mobility"]}]},YOGA:{FLOW:[{name:"Sun Salutation A",detail:"5\u20137 rounds \u2022 smooth pace",tags:["flow"]},{name:"Standing strength",detail:"Warrior series + balance",tags:["strength"]},{name:"Hip openers",detail:"Lizard \u2022 Pigeon prep \u2022 90/90",tags:["mobility"]},{name:"Back line release",detail:"Forward folds \u2022 hamstrings",tags:["mobility"]}],BREATH:[{name:"Box breathing",detail:"4-4-4-4 \u2022 3\u20135 min",tags:["breath"]},{name:"Coherent breathing",detail:"~5\u20136 breaths/min \u2022 5 min",tags:["breath"]}],REST:[{name:"Savasana",detail:"3\u20136 min \u2022 full rest",tags:["restore"]}]},NUTRITION:{TASKS:[{name:"Protein anchor",detail:"Pick a high-protein main meal today.",tags:["protein"]},{name:"Fiber add-on",detail:"Add 1\u20132 cups vegetables or 1 fruit serving.",tags:["fiber"]},{name:"Hydration",detail:"Aim for 2\u20133L water + electrolytes if training.",tags:["hydration"]},{name:"Meal timing",detail:"Plan your next meal time window.",tags:["planning"]}]},RECOVERY:{ROUTINE:[{name:"Mobility reset",detail:"8\u201312 min \u2022 full-body joints",tags:["mobility"]},{name:"Zone 2 walk",detail:"15\u201325 min \u2022 easy pace",tags:["cardio"]},{name:"Soft tissue",detail:"5\u201310 min \u2022 calves/hips/back",tags:["recovery"]},{name:"Breath downshift",detail:"3\u20135 min \u2022 slow exhales",tags:["breath"]}]},SPORT:{CONDITIONING:[{name:"Warm-up + drills",detail:"5\u20138 min \u2022 joints + footwork",tags:["prep"]},{name:"Intervals",detail:"6\u201312 rounds \u2022 work/rest",tags:["engine"]},{name:"Skill block",detail:"10 min \u2022 sport-specific focus",tags:["skill"]},{name:"Cooldown",detail:"4\u20136 min \u2022 easy breathe",tags:["recovery"]}]}},ea=({equip:Ba,seed:ja})=>{var Aa=Rt.STRENGTH.COMPOUND,Ci=Aa.filter(_i=>!_i.equip||lt(Ba,_i.equip)),Ri=Ci.length?Ci:Aa;return ge(Ri,ja)},Gt=({input:Ba,context:ja,seed:Aa})=>{var us,Hi,wi;var Ci=Xt(Ba==null?void 0:Ba.equipment),Ri=Number((Ba==null?void 0:Ba.timeMinutes)||30),_i=Ft({capacityZone:(us=ja==null?void 0:ja.capacity)==null?void 0:us.zone,preference:Ba==null?void 0:Ba.preference}),ns=ea({equip:Ci,seed:Aa}),Zi=_i.code==="EASY"?"3\xD75 (RPE 6)":_i.code==="HARD"?"5\xD75 (RPE 8)":"4\xD76 (RPE 7)",ci=ge(Rt.STRENGTH.ACCESSORY,Aa+1),Cs=ge(Rt.STRENGTH.ACCESSORY,Aa+11),xt=(Is,Js={})=>{var To=(Is==null?void 0:Is.name)||(Is==null?void 0:Is.title)||Js.name||"Exercise";return{name:To,detail:(Is==null?void 0:Is.detail)||Js.detail||"",target:Js.target||(Is==null?void 0:Is.target)||"",tags:((Is==null?void 0:Is.tags)||[]).concat(Js.tags||[]),howto:Js.howto||(Is==null?void 0:Is.howto)||`Focus on quality reps for ${To}. Control tempo, keep form strict.`,videoHint:(Is==null?void 0:Is.videoHint)||`${To} demo`}},li=[];return li.push({title:"Warm-up",meta:Ri<=20?"4\u20135 min":"6\u20138 min",items:[xt(ge(Rt.STRENGTH.WARMUP,Aa+2),{target:"2\u20133 min",tags:["prime"]})].filter(Boolean)}),li.push({title:"Main lift",meta:Ri<=20?"12\u201314 min":"18\u201322 min",note:(Hi=ja==null?void 0:ja.capacity)!=null&&Hi.zone?`Capacity: ${ee(ja.capacity.zone)} (auto-modified)`:"",items:[xt(ns,{target:Zi,tags:[_i.label]})]}),Ri>=30&&li.push({title:"Accessory 1",meta:"8\u201312 min",items:[xt(ci,{target:_i.code==="HARD"?"3\xD710":"2\u20133\xD710",tags:["quality"]})]}),Ri>=45&&(li.push({title:"Accessory 2",meta:"6\u201310 min",items:[xt(Cs,{target:_i.code==="HARD"?"3\xD712":"2\xD712",tags:["pump"]})]}),li.push({title:"Finisher",meta:"4\u20136 min",items:[xt(ge(Rt.STRENGTH.FINISHER||Rt.STRENGTH.COOLDOWN,Aa+21),{target:"AMRAP x 4 min",tags:["finish"]})]})),li.push({title:"Cooldown",meta:"3\u20136 min",items:[xt(ge(Rt.STRENGTH.COOLDOWN,Aa+3),{target:"3\u20136 min",tags:["reset"]})].filter(Boolean)}),{title:"Strength Session",subtitle:Ri<=20?"Short, focused, high quality":Ri>=45?"Full session: main + accessories + finisher":"Compound + accessory + cooldown",kicker:"Coach Gold \u2022 Preview",intensityLabel:_i.label,capacityZone:ee(((wi=ja==null?void 0:ja.capacity)==null?void 0:wi.zone)||"").toUpperCase()||null,tags:["Strength",`${Ri} min`].concat(Ci.length?["Equipment-aware"]:["Bodyweight-friendly"]),blocks:li}},fa=({input:Ba,context:ja,seed:Aa})=>{var li,us;var Ci=Number((Ba==null?void 0:Ba.timeMinutes)||30),Ri=Ft({capacityZone:(li=ja==null?void 0:ja.capacity)==null?void 0:li.zone,preference:Ba==null?void 0:Ba.preference}),_i=ge(Rt.YOGA.FLOW,Aa),ns=ge(Rt.YOGA.FLOW,Aa+1),Zi=ge(Rt.YOGA.BREATH,Aa+2),ci=ge(Rt.YOGA.REST,Aa+3),Cs=(Hi,wi={})=>({name:(Hi==null?void 0:Hi.name)||(Hi==null?void 0:Hi.title)||wi.name||"Practice",detail:(Hi==null?void 0:Hi.detail)||wi.detail||"",target:wi.target||(Hi==null?void 0:Hi.target)||"",tags:((Hi==null?void 0:Hi.tags)||[]).concat(wi.tags||[]),howto:wi.howto||(Hi==null?void 0:Hi.howto)||"Move with breath. Keep effort smooth.",videoHint:(Hi==null?void 0:Hi.videoHint)||"Yoga demo"}),xt=[];return xt.push({title:"Warm-up",meta:Ci<=20?"3\u20134 min":"5\u20136 min",items:[Cs(ge(Rt.YOGA.WARMUP||Rt.YOGA.FLOW,Aa+9),{target:"3\u20136 min",tags:["prime"]})].filter(Boolean)}),xt.push({title:"Flow",meta:Ci<=20?"10\u201312 min":Ci>=45?"24\u201328 min":"18\u201322 min",items:[Cs(_i,{target:Ci<=20?"10 min":Ci>=45?"14 min":"12 min",tags:[Ri.label]}),Ci>=30?Cs(ns,{target:Ci>=45?"10 min":"8 min",tags:["balance"]}):null].filter(Boolean)}),Ci>=45&&xt.push({title:"Strength holds",meta:"6\u20138 min",items:[Cs(ge(Rt.YOGA.STRENGTH||Rt.YOGA.FLOW,Aa+17),{target:"3\xD745s",tags:["hold"]})].filter(Boolean)}),xt.push({title:"Breath",meta:"3\u20135 min",items:[Cs(Zi,{target:"3\u20135 min",tags:["breath"]})].filter(Boolean)}),xt.push({title:"Rest",meta:"3\u20136 min",items:[Cs(ci,{target:"3\u20136 min",tags:["reset"]})].filter(Boolean)}),{title:"Yoga & Wellness",subtitle:Ri.code==="EASY"?"Restore + breathe":"Flow + strength + reset",kicker:"Coach Gold \u2022 Preview",intensityLabel:Ri.label,capacityZone:ee(((us=ja==null?void 0:ja.capacity)==null?void 0:us.zone)||"").toUpperCase()||null,tags:["Yoga",`${Ci} min`,"Breath-first"],blocks:xt}},pt=({input:Ba,context:ja,seed:Aa})=>{var us,Hi;var Ci=Number((Ba==null?void 0:Ba.timeMinutes)||30),Ri=((us=ja==null?void 0:ja.recent7d)==null?void 0:us.nutritionTotals)||{},_i=Math.round(Number(Ri.calories||0)/7),ns=Math.round(Number(Ri.protein||0)/7),Zi=(wi,Is={})=>({name:(wi==null?void 0:wi.name)||(wi==null?void 0:wi.title)||Is.name||"Task",detail:(wi==null?void 0:wi.detail)||Is.detail||"",target:Is.target||(wi==null?void 0:wi.target)||"",tags:((wi==null?void 0:wi.tags)||[]).concat(Is.tags||[]),howto:Is.howto||(wi==null?void 0:wi.howto)||"Keep it simple. One action at a time.",videoHint:(wi==null?void 0:wi.videoHint)||"Nutrition tip"}),ci=[],Cs=Rt.NUTRITION.TASKS,xt=Ci<=20?2:Ci>=45?5:3;for(var wi=0;wi<Math.min(6,xt);wi++)ci.push(Zi(ge(Cs,Aa+wi),{target:wi===0?"Do now":"Today",tags:wi===0?["priority"]:[]}));var li=[{title:"Today priorities",meta:Ci<=20?"2 tasks":Ci>=45?"5 tasks":"3 tasks",items:ci.filter(Boolean)}];return Ci>=45&&li.push({title:"Prep (optional)",meta:"10\u201312 min",items:[Zi(ge(Cs,Aa+21),{name:"Protein prep",detail:"Prep 1\u20132 protein portions for later.",target:"10 min",tags:["prep"]})]}),{title:"Nutrition Mini-Plan",subtitle:_i||ns?`7-day avg: ${_i||0} kcal \u2022 ${ns||0}g protein`:"Simple, high-impact actions for today",kicker:"Coach Gold \u2022 Preview",intensityLabel:"Guided",capacityZone:ee(((Hi=ja==null?void 0:ja.capacity)==null?void 0:Hi.zone)||"").toUpperCase()||null,tags:["Nutrition",`${Ci} min`,"Actionable"],blocks:li}},Qa=({input:Ba,context:ja,seed:Aa})=>{var Zi,ci;var Ci=Number((Ba==null?void 0:Ba.timeMinutes)||30),Ri=Ft({capacityZone:(Zi=ja==null?void 0:ja.capacity)==null?void 0:Zi.zone,preference:"EASY"}),_i=Rt.RECOVERY.ROUTINE,ns=[];for(var Cs=0;Cs<(Ci<=20?2:3);Cs++)ns.push(ge(_i,Aa+Cs));return{title:"Recovery Session",subtitle:"Downshift, mobilize, and recharge",kicker:"Coach Gold \u2022 Preview",intensityLabel:Ri.label,capacityZone:ee(((ci=ja==null?void 0:ja.capacity)==null?void 0:ci.zone)||"").toUpperCase()||null,tags:["Recovery",`${Ci} min`],blocks:[{title:"Routine",meta:`${Ci<=20?"12\u201315":"20\u201330"} min`,items:ns.filter(Boolean)}]}},Pi=({input:Ba,context:ja,seed:Aa})=>{var ns,Zi;var Ci=Number((Ba==null?void 0:Ba.timeMinutes)||30),Ri=Ft({capacityZone:(ns=ja==null?void 0:ja.capacity)==null?void 0:ns.zone,preference:Ba==null?void 0:Ba.preference}),_i=[{title:"Warm-up",meta:"5\u20138 min",items:[ge(Rt.SPORT.CONDITIONING,Aa)].filter(Boolean)},{title:"Main",meta:(Ci<=20?"10\u201312":"16\u201322")+" min",items:[ge(Rt.SPORT.CONDITIONING,Aa+1)].filter(Boolean)},{title:"Skill",meta:(Ci<=20?"4\u20136":"8\u201310")+" min",items:[ge(Rt.SPORT.CONDITIONING,Aa+2)].filter(Boolean)},{title:"Cooldown",meta:"4\u20136 min",items:[ge(Rt.SPORT.CONDITIONING,Aa+3)].filter(Boolean)}];return{title:"Sport Conditioning",subtitle:"Engine + footwork + quality",kicker:"Coach Gold \u2022 Preview",intensityLabel:Ri.label,capacityZone:ee(((Zi=ja==null?void 0:ja.capacity)==null?void 0:Zi.zone)||"").toUpperCase()||null,tags:["Sport",`${Ci} min`],blocks:_i}},Bs=Ba=>{var ci,Cs,xt;var ja=Ba&&Ba.input?Ba.input:null,Aa=Ba&&(Ba.context||Ba.ctx)?Ba.context||Ba.ctx:null,Ci=ee((ja==null?void 0:ja.goal)||(ja==null?void 0:ja.primaryGoal)||"STRENGTH").toUpperCase(),Ri=ee((Aa==null?void 0:Aa.dateKey)||""),_i=bt(`${Ri}|${Ci}|${ee((ja==null?void 0:ja.timeMinutes)||"")}`)%997;var ns=null;return Ci==="YOGA"?ns=fa({input:ja,context:Aa,seed:_i}):Ci==="NUTRITION"?ns=pt({input:ja,context:Aa,seed:_i}):Ci==="MOBILITY"||Ci==="RECOVERY"||Ci==="MOBILITY_RECOVERY"?ns=Qa({input:ja,context:Aa,seed:_i}):Ci==="SPORT"?ns=Pi({input:ja,context:Aa,seed:_i}):ns=Gt({input:ja,context:Aa,seed:_i}),{v:"A8.3",id:`gold_plan_${Date.now()}_${_i}`,ts:Date.now(),dateKey:ee((Aa==null?void 0:Aa.dateKey)||""),input:ja||null,contextSummary:{tier:ee(((ci=Aa==null?void 0:Aa.client)==null?void 0:ci.tier)||""),relationship:ee(((Cs=Aa==null?void 0:Aa.client)==null?void 0:Cs.relationship)||""),emphasis:ee(((xt=Aa==null?void 0:Aa.client)==null?void 0:xt.emphasis)||""),capacity:(Aa==null?void 0:Aa.capacity)||null,recent7d:Aa!=null&&Aa.recent7d?{counts:Aa.recent7d.counts||{},nutritionTotals:Aa.recent7d.nutritionTotals||{}}:null},...ns}};try{window.__fof_gold_synthesizePlan=Bs}catch(Ba){}try{typeof window.__fof_applyGoldProposal!="function"&&(window.__fof_applyGoldProposal=(Ba,ja={})=>{var Zi,ci,Cs;var Aa=Ba||null;if(!Aa)return null;var Ci=!!ja.startNow,Ri=Aa.dateKey&&String(Aa.dateKey)||(typeof window.__fof_dayKey=="function"?window.__fof_dayKey(new Date):null)||null,_i={kind:"COACH_GOLD",source:"COACH_GOLD",proposalId:Aa.id||null,title:Aa.title||"Coach Gold Plan",subtitle:Aa.subtitle||"",blocks:Array.isArray(Aa.blocks)?Aa.blocks:[],intensityLabel:Aa.intensityLabel||null,capacityZone:Aa.capacityZone||null,input:Aa.input||null,contextSummary:Aa.contextSummary||null,dateKey:Ri,ts:Date.now(),v:"A8.4"};try{var xt="fof_plan_queue_v1",li=localStorage.getItem(xt),us=li?JSON.parse(li)||[]:[],Hi=[{..._i},...us].slice(0,120);localStorage.setItem(xt,JSON.stringify(Hi))}catch(xt){}var ns={ok:!0,item:_i,ts:Date.now(),v:"A8.4"};try{localStorage.setItem("fof_gold_applied_v1",JSON.stringify(ns))}catch(xt){}try{window.dispatchEvent(new CustomEvent("flowofit:goldPlanApplied",{detail:ns}))}catch(xt){}if(Ci)try{var xt=String(((Zi=_i==null?void 0:_i.input)==null?void 0:Zi.goal)||((ci=_i==null?void 0:_i.input)==null?void 0:ci.intentGoal)||((Cs=_i==null?void 0:_i.input)==null?void 0:Cs.intent)||"").toUpperCase(),li=xt.includes("NUTRITION")||xt.includes("MACRO")||xt.includes("FOOD"),us=xt.includes("YOGA")||xt.includes("MOBILITY")||xt.includes("RECOVERY")||xt.includes("STRETCH"),Hi=li?"nutrition":us?"yoga":"workout",wi=li?"NUTRITION_LOGGER":us?"QUICK_LOG_SHEET_V1":"WORKOUT_LOGGER",Is=us?{dateKey:Ri,from:"COACH_GOLD",initialKind:"YOGA",preset:{title:_i.title,blocks:_i.blocks,source:"COACH_GOLD"}}:{dateKey:Ri,from:"COACH_GOLD",preset:{title:_i.title,blocks:_i.blocks,source:"COACH_GOLD"}};var Js=null;typeof window.__fof_addLog=="function"&&(Js=window.__fof_addLog(Ri||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):"unknown-day"),Hi,{title:_i.title,source:"coach_gold",status:"started",blocks:_i.blocks,proposalId:_i.proposalId,intensityLabel:_i.intensityLabel,ts:Date.now()}));try{var To=window.__fof_navigateTab;typeof To=="function"&&To("PLAN")}catch(To){}try{setTimeout(()=>{try{var To={...Is},pn=(Js==null?void 0:Js.id)||(Js==null?void 0:Js.sessionId)||null;pn&&(To.sessionId=pn),window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:wi,props:To}}))}catch(To){}},30)}catch(To){}try{window.__toast&&window.__toast(li?"Added to Plan. Logging now\u2026":us?"Added to Plan. Starting session\u2026":"Added to Plan. Starting workout\u2026")}catch(To){}}catch(xt){}else{try{window.__toast&&window.__toast("Added to Plan")}catch(xt){}try{var xt=window.__fof_navigateTab;typeof xt=="function"&&xt("PLAN")}catch(xt){}}return ns})}catch(Ba){}window.addEventListener("flowofit:goldContextReady",Ba=>{try{var ja=(Ba==null?void 0:Ba.detail)||null,Ci={input:(ja==null?void 0:ja.input)||null,context:ja,ts:Date.now()},Ri=Bs(Ci);try{localStorage.setItem("fof_gold_proposal_v1",JSON.stringify(Ri))}catch(_i){}try{window.dispatchEvent(new CustomEvent("flowofit:goldPlanProposed",{detail:Ri}))}catch(_i){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"GOLD_PLAN_PREVIEW_SHEET_V1",props:{proposal:Ri}}}))}catch(_i){}}catch(ja){}})})();var cl=ee=>React.createElement("input",{...ee,className:["w-full rounded-2xl border border-white/12 bg-white/5 px-3 py-2","text-[13px] text-white placeholder:text-white/35 outline-none","focus:border-white/25 focus:bg-white/8"].join(" ")}),Wl=ee=>React.createElement("textarea",{...ee,className:["w-full min-h-[84px] rounded-2xl border border-white/12 bg-white/5 px-3 py-2","text-[13px] text-white placeholder:text-white/35 outline-none resize-none","focus:border-white/25 focus:bg-white/8"].join(" ")}),Yl=({label:ee,hint:ge,children:bt})=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-baseline justify-between gap-2"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},ee),ge?React.createElement("div",{className:"text-[11px] text-white/35"},ge):null),React.createElement("div",{className:"mt-2"},bt)),md=({value:ee,setValue:ge,step:bt=1,min:rt=0,max:Xt=999,suffix:lt=""})=>{var mt=Number(ee||0);return React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ge(String(Math.max(rt,mt-bt))),className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 font-black text-white"},"\u2212"),React.createElement("div",{className:"flex-1"},React.createElement(cl,{inputMode:"decimal",value:String(ee),onChange:kt=>ge(kt.target.value)})),React.createElement("button",{type:"button",onClick:()=>ge(String(Math.min(Xt,mt+bt))),className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 font-black text-white"},"+"),lt?React.createElement("div",{className:"ml-1 text-[12px] text-white/55 font-extrabold"},lt):null)},ac=({open:ee,initialKind:ge="WORKOUT",dateKey:bt=null,onClose:rt})=>{if(!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET","QUICK_LOG"))return null;var Xt=()=>{try{return bt||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null)||null}catch(Gs){return bt||null}},[lt,mt]=React.useState(String(ge||"WORKOUT").toUpperCase()),[kt,Ft]=React.useState(""),[Rt,ea]=React.useState(""),[Gt,fa]=React.useState(""),[pt,Qa]=React.useState(!1),[Pi,Bs]=React.useState(!1),[Ba,ja]=React.useState(""),[Aa,Ci]=React.useState([]),[Ri,_i]=React.useState(!1),[ns,Zi]=React.useState(""),[ci,Cs]=React.useState(""),[xt,li]=React.useState(""),[us,Hi]=React.useState(""),[wi,Is]=React.useState(""),[Js,To]=React.useState(""),[pn,Bo]=React.useState(!1),[No,bn]=React.useState("EDIT"),[_n,gr]=React.useState(null),[Wn,nr]=React.useState(!1),[Br,Nn]=React.useState(null),[fl,ul]=React.useState(null),[yl,Nl]=React.useState(!1),il=React.useMemo(()=>{try{var Gs=localStorage.getItem("fof_user_context_v1");var Kn="demo_surface",jn="INDEPENDENT";if(Gs){var wn=JSON.parse(Gs);wn&&(wn.surfaceKey||wn.clientId||wn.id)&&(Kn=wn.surfaceKey||wn.clientId||wn.id),wn&&wn.clientMode&&(jn=String(wn.clientMode).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT")}var In=`fof_active_workout__${Kn}__${jn}`,Jn=localStorage.getItem(In);return Jn&&JSON.parse(Jn)||null}catch(Gs){return null}},[]);React.useEffect(()=>{try{mt(String(ge||"WORKOUT").toUpperCase())}catch(Gs){}},[ge]);var Cr=({k:Gs,label:Kn,icon:jn})=>{var In=lt===Gs;return React.createElement("button",{type:"button",onClick:()=>mt(Gs),className:["flex-1 min-w-[110px] rounded-2xl border px-3 py-2 text-[12px] font-extrabold","inline-flex items-center justify-center gap-2 transition",In?"border-white/20 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},React.createElement(gi,{name:jn,size:16,className:In?"text-white":"text-white/60"}),Kn)},Yn=Yl,ml=cl,vr=Wl,Sl=Gs=>{var Kn=Xt()||"unknown-day",jn="fof_quicklog_v1";try{var In=localStorage.getItem(jn),Jn=In?JSON.parse(In):{},wn=Array.isArray(Jn[Kn])?Jn[Kn]:[];Jn[Kn]=[Gs,...wn].slice(0,200),localStorage.setItem(jn,JSON.stringify(Jn))}catch(In){}},sl=()=>{try{Ft("")}catch(Gs){}try{ea("")}catch(Gs){}try{ja("")}catch(Gs){}try{Cs("")}catch(Gs){}try{li("")}catch(Gs){}try{Hi("")}catch(Gs){}try{Is("")}catch(Gs){}try{To("")}catch(Gs){}},_l=()=>{var Gs=Xt(),Kn=Date.now(),jn={id:`ql_${Kn}_${Math.random().toString(16).slice(2)}`,ts:Kn,dayKey:Gs,kind:lt};var In=jn;lt==="WORKOUT"?In={...jn,durationMin:Number(Rt||0)||null,rpe:Number(Ba||0)||null,note:kt||""}:lt==="YOGA"?In={...jn,durationMin:Number(Rt||0)||null,note:kt||""}:lt==="FOOD"?In={...jn,calories:Number(ci||0)||null,proteinG:Number(xt||0)||null,note:kt||""}:lt==="METRICS"?In={...jn,weightKg:Number(us||0)||null,note:kt||""}:lt==="RECOVERY"&&(In={...jn,sleepHrs:Number(wi||0)||null,soreness:Number(Js||0)||null,note:kt||""}),Sl(In);try{window.__toast&&window.__toast("Logged")}catch(Jn){}try{window.dispatchEvent(new CustomEvent("flowofit:quickLogSaved",{detail:In}))}catch(Jn){}sl();try{rt&&rt()}catch(Jn){}},kl=()=>{try{return!!(String(kt||"").trim()||String(Rt||"").trim()||String(Ba||"").trim()||String(ci||"").trim()||String(xt||"").trim()||String(us||"").trim()||String(wi||"").trim()||String(Js||"").trim())}catch(Gs){return!1}},jl=()=>{if(kl()){try{Bo(!0)}catch(Gs){}return}try{rt&&rt()}catch(Gs){}};return React.createElement(React.Fragment,null,React.createElement(qo,{open:ee,title:"Quick Log",kicker:"Log",onClose:jl,footer:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white/80 hover:bg-white/8 active:scale-[0.99]",onClick:()=>{try{jl()}catch(Gs){}}},"Cancel"),React.createElement("button",{type:"button",className:"flex-1 rounded-2xl border border-white/12 bg-gradient-to-r from-[#1f8cff] via-[#6b3cff] to-[#00ffd5] px-4 py-3 text-[12px] font-extrabold text-white active:scale-[0.99]",onClick:_l},"Save Log")),maxHeightVh:90},React.createElement("div",{className:"space-y-3"},il?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},(()=>{var Gs=0,Kn=0;return(il.exercises||[]).forEach(jn=>{(jn.sets||[]).forEach(In=>{if(In&&In.done){Gs+=1;var Jn=String(In.weight||"").match(/-?\d+(?:.\d+)?/),wn=String(In.reps||"").match(/-?\d+(?:.\d+)?/),fr=Jn?Number(Jn[0]):NaN,Vl=wn?Number(wn[0]):NaN;Number.isFinite(fr)&&Number.isFinite(Vl)&&(Kn+=fr*Vl)}})}),React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Elapsed"),React.createElement("div",{className:"text-[12px] font-black text-white"},fmtTime(activeWorkoutElapsed))),React.createElement("div",{className:"flex-1 text-center"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Sets logged"),React.createElement("div",{className:"text-[12px] font-black text-white"},Gs)),React.createElement("div",{className:"flex-1 text-right"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Volume"),React.createElement("div",{className:"text-[12px] font-black text-white"},Math.round(Kn))))})()):null,React.createElement("div",{className:"flex gap-2 overflow-x-auto pb-1"},React.createElement(Cr,{k:"WORKOUT",label:"Workout",icon:"Activity"}),React.createElement(Cr,{k:"YOGA",label:"Yoga",icon:"Sparkles"}),React.createElement(Cr,{k:"FOOD",label:"Food",icon:"Utensils"}),React.createElement(Cr,{k:"METRICS",label:"Metrics",icon:"Activity"}),React.createElement(Cr,{k:"RECOVERY",label:"Recovery",icon:"Moon"})),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Date: ",React.createElement("span",{className:"font-extrabold text-white/85"},Xt()||"Home"),React.createElement("span",{className:"mx-2 text-white/30"},"\u2022"),"Mode: ",React.createElement("span",{className:"font-extrabold text-white/85"},lt))),lt==="WORKOUT"?React.createElement("div",{className:"space-y-3"},React.createElement(Yn,{label:"Duration (minutes)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 45",value:Rt,onChange:Gs=>ea(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Intensity (RPE 1\u201310)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 7",value:Ba,onChange:Gs=>ja(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Notes (optional)"},React.createElement(vr,{placeholder:"Anything to remember? Pain, equipment, mood\u2026",value:kt,onChange:Gs=>Ft(Gs.target.value)}))):null,lt==="YOGA"?React.createElement("div",{className:"space-y-3"},React.createElement(Yn,{label:"Duration (minutes)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 20",value:Rt,onChange:Gs=>ea(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Notes (optional)"},React.createElement(vr,{placeholder:"Style, focus, how it felt\u2026",value:kt,onChange:Gs=>Ft(Gs.target.value)}))):null,lt==="FOOD"?React.createElement("div",{className:"space-y-3"},React.createElement(Yn,{label:"Calories (approx)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 650",value:ci,onChange:Gs=>Cs(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Protein (g)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 35",value:xt,onChange:Gs=>li(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Notes (optional)"},React.createElement(vr,{placeholder:"Meal name / quick notes\u2026",value:kt,onChange:Gs=>Ft(Gs.target.value)}))):null,lt==="METRICS"?React.createElement("div",{className:"space-y-3"},React.createElement(Yn,{label:"Weight (kg)"},React.createElement("input",{inputMode:"decimal",placeholder:"e.g. 82.4",value:us,onChange:Gs=>Hi(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Notes (optional)"},React.createElement(vr,{placeholder:"Waist, photos, hydration\u2026",value:kt,onChange:Gs=>Ft(Gs.target.value)}))):null,lt==="RECOVERY"?React.createElement("div",{className:"space-y-3"},React.createElement(Yn,{label:"Sleep (hours)"},React.createElement("input",{inputMode:"decimal",placeholder:"e.g. 7.5",value:wi,onChange:Gs=>Is(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Soreness (1\u201310)"},React.createElement("input",{inputMode:"numeric",placeholder:"e.g. 4",value:Js,onChange:Gs=>To(Gs.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement(Yn,{label:"Notes (optional)"},React.createElement(vr,{placeholder:"Stress, recovery, injuries\u2026",value:kt,onChange:Gs=>Ft(Gs.target.value)}))):null)),React.createElement(fd,{open:pn,title:"Discard log?",message:"You have unsaved input. Discard it and close?",onClose:()=>{try{Bo(!1)}catch(Gs){}},onKeep:()=>{try{Bo(!1)}catch(Gs){}},onDiscard:()=>{try{Bo(!1)}catch(Gs){}try{sl()}catch(Gs){}try{rt&&rt()}catch(Gs){}}}))},Ud=({open:ee,proposal:ge,onClose:bt,onEditInputs:rt})=>{var Cs;if(!ee)return null;var Xt=()=>{try{var xt=localStorage.getItem("fof_gold_proposal_v1");return xt&&JSON.parse(xt)||null}catch(xt){return null}},lt=ge||Xt(),[mt,kt]=React.useState(lt),[Ft,Rt]=React.useState(!1),[ea,Gt]=React.useState(Array.isArray(lt==null?void 0:lt.blocks)?lt.blocks:[]),[fa,pt]=React.useState(null),[Qa,Pi]=React.useState(null);React.useEffect(()=>{var xt=ge||Xt();kt(xt),Gt(Array.isArray(xt==null?void 0:xt.blocks)?xt.blocks:[]),Rt(!1)},[ee,ge]);var Bs=(xt,li)=>{Gt(us=>{var Hi=Array.isArray(us)?[...us]:[];if(xt<0||xt>=Hi.length||li<0||li>=Hi.length)return Hi;var[wi]=Hi.splice(xt,1);return Hi.splice(li,0,wi),Hi})},Ba=xt=>{Gt(li=>(Array.isArray(li)?[...li]:[]).filter((Hi,wi)=>wi!==xt))},ja=()=>{var xt=mt||null;if(!xt)return null;var li={...xt,blocks:Array.isArray(ea)?ea:[],v:xt.v||"A8.3"},us=(wi,Is,Js)=>{Gt(To=>{var pn=Array.isArray(To)?To.map(gr=>({...gr})):[],Bo=pn[wi];if(!Bo)return pn;var No=Array.isArray(Bo.items)?"items":Array.isArray(Bo.exercises)?"exercises":null;if(!No)return pn;var bn=Array.isArray(Bo[No])?[...Bo[No]]:[];if(Is<0||Is>=bn.length||Js<0||Js>=bn.length)return pn;var[_n]=bn.splice(Is,1);return bn.splice(Js,0,_n),Bo[No]=bn,pn[wi]=Bo,pn})},Hi=(wi,Is)=>{Gt(Js=>{var To=Array.isArray(Js)?Js.map(bn=>({...bn})):[],pn=To[wi];if(!pn)return To;var Bo=Array.isArray(pn.items)?"items":Array.isArray(pn.exercises)?"exercises":null;if(!Bo)return To;var No=Array.isArray(pn[Bo])?pn[Bo].filter((bn,_n)=>_n!==Is):[];return pn[Bo]=No,To[wi]=pn,To})};kt(li);try{localStorage.setItem("fof_gold_proposal_v1",JSON.stringify(li))}catch(wi){}return li},Aa=()=>{try{rt&&rt()}catch(xt){}try{setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openGoldInput"))}catch(xt){}},0)}catch(xt){}},Ci=String(((Cs=lt==null?void 0:lt.input)==null?void 0:Cs.goal)||(lt==null?void 0:lt.goal)||"").toUpperCase(),Ri=Ci.includes("NUTRITION")||Ci.includes("MACRO")||Ci.includes("FOOD")?"Apply & Log Nutrition":Ci.includes("YOGA")||Ci.includes("MOBILITY")||Ci.includes("RECOVERY")||Ci.includes("STRETCH")?"Apply & Start Session":"Apply & Start Workout",_i=()=>{var xt=ja()||mt;try{var li=window.__fof_applyGoldProposal;typeof li=="function"&&li(xt,{startNow:!0})}catch(li){}},ns=(xt,li,us)=>{Gt(Hi=>{var wi=Array.isArray(Hi)?[...Hi]:[],Is=wi[xt];if(!Is)return wi;var Js=Array.isArray(Is.items)?"items":Array.isArray(Is.exercises)?"exercises":null;if(!Js)return wi;var To=Array.isArray(Is[Js])?[...Is[Js]]:[];if(li<0||li>=To.length||us<0||us>=To.length)return wi;var[pn]=To.splice(li,1);return To.splice(us,0,pn),wi[xt]={...Is,[Js]:To},wi})},Zi=(xt,li)=>{Gt(us=>{var Hi=Array.isArray(us)?[...us]:[],wi=Hi[xt];if(!wi)return Hi;var Is=Array.isArray(wi.items)?"items":Array.isArray(wi.exercises)?"exercises":null;if(!Is)return Hi;var Js=Array.isArray(wi[Is])?[...wi[Is]]:[];return li<0||li>=Js.length||(Js.splice(li,1),Hi[xt]={...wi,[Is]:Js}),Hi})},ci=(xt,li)=>{try{var us=Array.isArray(xt==null?void 0:xt.items)?"items":Array.isArray(xt==null?void 0:xt.exercises)?"exercises":null,Hi=us?xt[us]||[]:[];return!Hi||!Hi.length?null:React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70 mb-2"},"Edit items in this block"),React.createElement("div",{className:"space-y-2"},Hi.map((wi,Is)=>{var Js=((wi==null?void 0:wi.name)||(wi==null?void 0:wi.title)||(wi==null?void 0:wi.label)||String(wi||"")).trim(),To=wi!=null&&wi.rx&&wi.rx.sets?`${wi.rx.sets}x${wi.rx.reps||""}`:"";return React.createElement("div",{key:Is,className:"flex items-center justify-between gap-2 rounded-2xl border border-white/10 bg-black/20 px-3 py-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"truncate font-extrabold text-white/90 text-[13px]"},Js||"Item"),To?React.createElement("div",{className:"text-[12px] text-white/60"},To):null),React.createElement("div",{className:"flex items-center gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:()=>ns(li,Is,Is-1),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-white/80 text-[12px] font-black"},"\u2191"),React.createElement("button",{type:"button",onClick:()=>ns(li,Is,Is+1),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-white/80 text-[12px] font-black"},"\u2193"),React.createElement("button",{type:"button",onClick:()=>Zi(li,Is),className:"px-2 py-1 rounded-xl border border-rose-500/20 bg-rose-500/10 text-rose-200 text-[12px] font-black"},"Remove")))})))}catch(us){return null}};return React.createElement(React.Fragment,null,React.createElement(qo,{open:!0,title:(mt==null?void 0:mt.title)||"Your Plan (Preview)",kicker:(mt==null?void 0:mt.kicker)||"Coach Gold \u2022 Proposal",onClose:bt,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:Aa,className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold"},"Edit inputs"),React.createElement("button",{type:"button",onClick:()=>{if(mt)if(Ft){ja(),Rt(!1);try{window.__toast&&window.__toast("Updated preview")}catch(xt){}}else{Gt(Array.isArray(mt.blocks)?mt.blocks:[]),Rt(!0);try{window.__toast&&window.__toast("Modify mode")}catch(xt){}}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold"},Ft?"Done":"Modify"),React.createElement("button",{type:"button",onClick:_i,className:"flex-1 px-4 py-3 rounded-2xl border border-emerald-400/20 bg-emerald-500/15 hover:bg-emerald-500/20 text-emerald-100 font-extrabold"},Ri))},mt?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},mt.title),React.createElement("div",{className:"text-[12px] text-white/65 mt-1"},mt.subtitle||"")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Intensity"),React.createElement("div",{className:"mt-1 inline-flex items-center gap-2 px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold"},React.createElement("span",{className:"text-white/80"},mt.intensityLabel||"Moderate"),mt.capacityZone?React.createElement("span",{className:"text-white/40"},"\u2022"):null,mt.capacityZone?React.createElement("span",{className:"text-white/70"},mt.capacityZone):null))),Array.isArray(mt.tags)&&mt.tags.length?React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},mt.tags.slice(0,12).map((xt,li)=>React.createElement("span",{key:li,className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/80"},xt))):null),Ft?React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-white font-extrabold"},"Modify plan"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Reorder or remove blocks before applying."),React.createElement("div",{className:"mt-3 space-y-2"},(Array.isArray(ea)?ea:[]).map((xt,li)=>React.createElement("div",{key:li,className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},xt.title||`Block ${li+1}`),xt.meta?React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},xt.meta):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Bs(li,li-1),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-white/80 text-[12px] font-black"},"\u2191"),React.createElement("button",{type:"button",onClick:()=>Bs(li,li+1),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-white/80 text-[12px] font-black"},"\u2193"),React.createElement("button",{type:"button",onClick:()=>Ba(li),className:"px-2 py-1 rounded-xl border border-rose-400/20 bg-rose-500/10 text-rose-200 text-[12px] font-black"},"Remove"))),ci(xt,li))))):null,Array.isArray(mt.blocks)?(Ft?ea:mt.blocks).map((xt,li)=>React.createElement("div",{key:li,className:"fof-card p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-white font-extrabold"},xt.title||`Block ${li+1}`),xt.meta?React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},xt.meta):null),xt.note?React.createElement("div",{className:"text-[12px] text-white/60 mt-2"},xt.note):null,Array.isArray(xt.items)&&xt.items.length?React.createElement("div",{className:"mt-3 space-y-2"},xt.items.map((us,Hi)=>React.createElement("div",{key:Hi,className:"rounded-2xl border border-white/10 bg-black/25 px-3 py-2"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},us.name||us.title||"Item"),us.detail?React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},us.detail):null),React.createElement("div",{className:"shrink-0 text-right"},us.target?React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},us.target):null,React.createElement("div",{className:"mt-1 flex items-center justify-end gap-1.5"},React.createElement("button",{type:"button",onClick:()=>pt(us),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-[11px] font-black text-white/75"},"Details"),React.createElement("button",{type:"button",onClick:()=>Pi(us),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 text-[11px] font-black text-white/75"},"Video")))),Array.isArray(us.tags)&&us.tags.length?React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},us.tags.slice(0,8).map((wi,Is)=>React.createElement("span",{key:Is,className:"px-2 py-1 rounded-xl border border-white/10 bg-white/5 text-[11px] font-bold text-white/65"},wi))):null))):React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"No items."))):null,React.createElement("div",{className:"text-[11px] text-white/45"},"Coach Gold: proposal preview \u2014 you can modify blocks, then apply & start.")):React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-sm font-extrabold text-white"},"No proposal found"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Run Coach Gold \u2192 Continue to generate a preview."))),React.createElement(qo,{open:!!fa,title:(fa==null?void 0:fa.name)||(fa==null?void 0:fa.title)||"Details",kicker:"Details",onClose:()=>pt(null)},(()=>{var xt=(fa==null?void 0:fa.name)||(fa==null?void 0:fa.title)||"",li=typeof window!="undefined"&&window.__FOF_RESOLVE_EXERCISE?window.__FOF_RESOLVE_EXERCISE(xt):null,us=typeof window!="undefined"&&window.__FOF_EXERCISE_SUBS?window.__FOF_EXERCISE_SUBS(li,4):[],Hi=typeof window!="undefined"&&window.__FOF_RESOLVE_LIBRARY_SESSION?window.__FOF_RESOLVE_LIBRARY_SESSION(xt):null;return Hi&&(Hi.type==="SESSION"||Hi.type==="PROGRAM"||Hi.type==="COLLECTION")?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},Hi.title),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},Hi.category," \u2022 ",Hi.level,Hi.coach?` \u2022 ${Hi.coach}`:"")),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Duration"),React.createElement("div",{className:"mt-1 text-white/80 font-extrabold"},Hi.duration?`${Hi.duration} min`:"\u2014"))),Array.isArray(Hi.tags)&&Hi.tags.length?React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},Hi.tags.slice(0,10).map((wi,Is)=>React.createElement("span",{key:Is,className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/80"},wi))):null),React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-[12px] text-white/60 font-bold"},"What you\u2019ll do"),React.createElement("div",{className:"text-white font-extrabold mt-1"},(fa==null?void 0:fa.detail)||"Follow along at a steady pace. Prioritize breathing and clean movement."),React.createElement("div",{className:"text-[12px] text-white/60 mt-2"},"Tip: stay 1\u20132 steps below strain. Smooth and consistent beats intense."))):React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},xt||"Exercise"),li?React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},li.group," \u2022 ",li.pattern," \u2022 ",li.equip):React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"General guidance")),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Difficulty"),React.createElement("div",{className:"mt-1 text-white/80 font-extrabold"},(li==null?void 0:li.difficulty)||"\u2014"))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Primary"),React.createElement("div",{className:"mt-1 text-white/85 font-extrabold"},(li==null?void 0:li.primary)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Secondary"),React.createElement("div",{className:"mt-1 text-white/75 font-extrabold"},Array.isArray(li==null?void 0:li.secondary)&&li.secondary.length?li.secondary.slice(0,3).join(", "):"\u2014"))),Array.isArray(li==null?void 0:li.tags)&&li.tags.length?React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},li.tags.slice(0,10).map((wi,Is)=>React.createElement("span",{key:Is,className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/80"},wi))):null),React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-[12px] text-white/60 font-bold"},"Coach cues"),React.createElement("div",{className:"text-white font-extrabold mt-1"},(fa==null?void 0:fa.howto)||"Control the tempo. Keep your brace. Stop 1\u20132 reps before failure."),fa!=null&&fa.detail?React.createElement("div",{className:"text-[12px] text-white/60 mt-2"},fa.detail):null,fa!=null&&fa.target?React.createElement("div",{className:"text-[12px] text-white/60 mt-2"},React.createElement("span",{className:"font-black text-white/70"},"Target:")," ",fa.target):null),us&&us.length?React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-[12px] text-white/60 font-bold"},"Substitutions"),React.createElement("div",{className:"mt-2 space-y-2"},us.map((wi,Is)=>React.createElement("div",{key:Is,className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},wi.name),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},wi.group," \u2022 ",wi.pattern," \u2022 ",wi.equip),React.createElement("div",{className:"mt-2 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:()=>{try{var Js=String((fa==null?void 0:fa.name)||(fa==null?void 0:fa.title)||"").trim(),To=String((wi==null?void 0:wi.name)||"").trim();if(!Js||!To)return;var Bo=(No=>{var bn=Array.isArray(No)?No.map(_n=>({..._n})):[];return bn.forEach(_n=>{var gr=Array.isArray(_n.items)?"items":Array.isArray(_n.exercises)?"exercises":null;gr&&(_n[gr]=(_n[gr]||[]).map(Wn=>{var nr=String((Wn==null?void 0:Wn.name)||(Wn==null?void 0:Wn.title)||"").trim().toLowerCase();return nr&&nr===Js.toLowerCase()?{...Wn,name:To,title:To,id:(wi==null?void 0:wi.id)||(Wn==null?void 0:Wn.id)||null,_replacedFrom:Js,rx:window.__FOF_PRESCRIBE_ITEM?window.__FOF_PRESCRIBE_ITEM(To):Wn.rx||null}:Wn}))}),bn})(ea);Gt(Bo),kt(No=>{var bn={...No||{}};bn.blocks=Bo;try{localStorage.setItem("fof_gold_proposal_v1",JSON.stringify(bn))}catch(_n){}try{window.dispatchEvent(new CustomEvent("flowofit:goldPlanEdited",{detail:bn}))}catch(_n){}return bn});try{pt({...fa||{},name:To,title:To})}catch(No){}try{window.__fof_toast&&window.__fof_toast("Replaced exercise.")}catch(No){}}catch(Js){}},className:"px-3 py-1.5 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-black text-white/85"},"Replace in plan")))))):null)})()),React.createElement(qo,{open:!!Qa,title:(Qa==null?void 0:Qa.name)||(Qa==null?void 0:Qa.title)||"Video",kicker:"Demo",onClose:()=>Pi(null)},(()=>{var xt=(Qa==null?void 0:Qa.name)||(Qa==null?void 0:Qa.title)||"",li=typeof window!="undefined"&&window.__FOF_RESOLVE_EXERCISE?window.__FOF_RESOLVE_EXERCISE(xt):null,us=typeof window!="undefined"&&window.__FOF_RESOLVE_LIBRARY_SESSION?window.__FOF_RESOLVE_LIBRARY_SESSION(xt):null,Hi=typeof window!="undefined"&&window.__FOF_MEDIA_FOR?window.__FOF_MEDIA_FOR((li==null?void 0:li.id)||(us==null?void 0:us.id)||xt):null,wi=(Hi==null?void 0:Hi.videoUrl)||null;return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},(us==null?void 0:us.title)||(li==null?void 0:li.name)||xt||"Demo"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},us?`${us.category} \u2022 ${us.level||""}`:li?`${li.group} \u2022 ${li.pattern} \u2022 ${li.equip}`:"Video demo")),Hi!=null&&Hi.durationSec?React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/45 font-black"},"Length"),React.createElement("div",{className:"mt-1 text-white/80 font-extrabold"},Math.round(Hi.durationSec),"s")):null)),React.createElement("div",{className:"fof-card p-3"},wi?React.createElement("video",{key:wi,controls:!0,playsInline:!0,preload:"metadata",className:"w-full rounded-2xl border border-white/10 bg-black/30",src:wi}):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-6 text-center"},React.createElement("div",{className:"text-white font-extrabold"},"Video not available yet"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Connect your real media CDN / library video URLs to enable playback."))),React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"text-[12px] text-white/60 font-bold"},"What to watch for"),React.createElement("div",{className:"text-white/85 font-extrabold mt-1"},"Setup \u2192 range of motion \u2192 control. Keep it clean, then add load.")))})()))},Bd=(()=>{var ee=Rt=>String(Rt||"").toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,80),ge=(Rt,ea)=>{var Gt=ea.id||ee(ea.name);Rt.push({id:Gt,name:ea.name,group:ea.group||"Other",equip:ea.equip||"Other",pattern:ea.pattern||"Other",primary:ea.primary||ea.group||"Other",secondary:Array.isArray(ea.secondary)?ea.secondary:[],difficulty:ea.difficulty||"Intermediate",tags:Array.isArray(ea.tags)?ea.tags:[],aliases:Array.isArray(ea.aliases)?ea.aliases:[]})},bt=[{name:"Barbell Bench Press",group:"Chest",equip:"Barbell",pattern:"Push",primary:"Pecs",secondary:["Triceps","Front Delts"],tags:["compound","strength"],aliases:["bench press","bench"]},{name:"Dumbbell Bench Press",group:"Chest",equip:"Dumbbell",pattern:"Push",primary:"Pecs",secondary:["Triceps","Front Delts"],tags:["compound","hypertrophy"],aliases:["db bench"]},{name:"Incline Bench Press",group:"Chest",equip:"Barbell",pattern:"Push",primary:"Upper Pecs",secondary:["Triceps","Front Delts"],tags:["compound"],aliases:["incline bench"]},{name:"Incline Dumbbell Press",group:"Chest",equip:"Dumbbell",pattern:"Push",primary:"Upper Pecs",secondary:["Triceps","Front Delts"],tags:["compound"],aliases:["incline db press"]},{name:"Cable Fly",group:"Chest",equip:"Cable",pattern:"Isolation",primary:"Pecs",secondary:[],tags:["hypertrophy"],aliases:["fly","cable chest fly"]},{name:"Push-Up",group:"Chest",equip:"Bodyweight",pattern:"Push",primary:"Pecs",secondary:["Triceps","Front Delts"],tags:["bodyweight"],aliases:["push up"]},{name:"Pull-Up",group:"Back",equip:"Bodyweight",pattern:"Pull",primary:"Lats",secondary:["Biceps","Mid Back"],tags:["compound","bodyweight"],aliases:["pull up"]},{name:"Chin-Up",group:"Back",equip:"Bodyweight",pattern:"Pull",primary:"Lats",secondary:["Biceps"],tags:["compound","bodyweight"],aliases:["chin up"]},{name:"Lat Pulldown",group:"Back",equip:"Machine",pattern:"Pull",primary:"Lats",secondary:["Biceps"],tags:["hypertrophy"],aliases:["pulldown"]},{name:"Barbell Row",group:"Back",equip:"Barbell",pattern:"Pull",primary:"Mid Back",secondary:["Biceps","Rear Delts"],tags:["compound"],aliases:["bent over row","row"]},{name:"Seated Cable Row",group:"Back",equip:"Cable",pattern:"Pull",primary:"Mid Back",secondary:["Biceps"],tags:["hypertrophy"],aliases:["cable row"]},{name:"Face Pull",group:"Back",equip:"Cable",pattern:"Isolation",primary:"Rear Delts",secondary:["Mid Back"],tags:["prehab"],aliases:["rope face pull"]},{name:"Back Squat",group:"Legs",equip:"Barbell",pattern:"Squat",primary:"Quads",secondary:["Glutes","Core"],tags:["compound","strength"],aliases:["squat"]},{name:"Front Squat",group:"Legs",equip:"Barbell",pattern:"Squat",primary:"Quads",secondary:["Core"],tags:["compound"],aliases:["front squat"]},{name:"Leg Press",group:"Legs",equip:"Machine",pattern:"Squat",primary:"Quads",secondary:["Glutes"],tags:["hypertrophy"],aliases:["press"]},{name:"Romanian Deadlift",group:"Legs",equip:"Barbell",pattern:"Hinge",primary:"Hamstrings",secondary:["Glutes","Back"],tags:["compound"],aliases:["rdl"]},{name:"Deadlift",group:"Legs",equip:"Barbell",pattern:"Hinge",primary:"Posterior Chain",secondary:["Back","Core"],tags:["compound","strength"],aliases:["conventional deadlift"]},{name:"Hip Thrust",group:"Legs",equip:"Barbell",pattern:"Hinge",primary:"Glutes",secondary:["Hamstrings"],tags:["hypertrophy"],aliases:["barbell hip thrust"]},{name:"Walking Lunge",group:"Legs",equip:"Dumbbell",pattern:"Lunge",primary:"Quads",secondary:["Glutes"],tags:["unilateral"],aliases:["lunge"]},{name:"Bulgarian Split Squat",group:"Legs",equip:"Dumbbell",pattern:"Lunge",primary:"Quads",secondary:["Glutes"],tags:["unilateral"],aliases:["bss"]},{name:"Leg Extension",group:"Legs",equip:"Machine",pattern:"Isolation",primary:"Quads",secondary:[],tags:["hypertrophy"],aliases:["extensions"]},{name:"Leg Curl",group:"Legs",equip:"Machine",pattern:"Isolation",primary:"Hamstrings",secondary:[],tags:["hypertrophy"],aliases:["ham curl"]},{name:"Calf Raise",group:"Legs",equip:"Machine",pattern:"Isolation",primary:"Calves",secondary:[],tags:["hypertrophy"],aliases:["standing calf raise"]},{name:"Overhead Press",group:"Shoulders",equip:"Barbell",pattern:"Push",primary:"Delts",secondary:["Triceps"],tags:["compound","strength"],aliases:["ohp","military press"]},{name:"Dumbbell Shoulder Press",group:"Shoulders",equip:"Dumbbell",pattern:"Push",primary:"Delts",secondary:["Triceps"],tags:["compound"],aliases:["db shoulder press"]},{name:"Arnold Press",group:"Shoulders",equip:"Dumbbell",pattern:"Push",primary:"Delts",secondary:["Triceps"],tags:["hypertrophy"],aliases:["arnold"]},{name:"Lateral Raise",group:"Shoulders",equip:"Dumbbell",pattern:"Isolation",primary:"Side Delts",secondary:[],tags:["hypertrophy"],aliases:["side raise"]},{name:"Rear Delt Fly",group:"Shoulders",equip:"Dumbbell",pattern:"Isolation",primary:"Rear Delts",secondary:[],tags:["hypertrophy"],aliases:["rear delt raise"]},{name:"Bicep Curl",group:"Arms",equip:"Dumbbell",pattern:"Isolation",primary:"Biceps",secondary:[],tags:["hypertrophy"],aliases:["curl"]},{name:"Hammer Curl",group:"Arms",equip:"Dumbbell",pattern:"Isolation",primary:"Biceps",secondary:["Forearms"],tags:["hypertrophy"],aliases:["hammer"]},{name:"Barbell Curl",group:"Arms",equip:"Barbell",pattern:"Isolation",primary:"Biceps",secondary:[],tags:["hypertrophy"],aliases:["bb curl"]},{name:"Triceps Pushdown",group:"Arms",equip:"Cable",pattern:"Isolation",primary:"Triceps",secondary:[],tags:["hypertrophy"],aliases:["pushdown"]},{name:"Skull Crusher",group:"Arms",equip:"Barbell",pattern:"Isolation",primary:"Triceps",secondary:[],tags:["hypertrophy"],aliases:["lying triceps extension"]},{name:"Dip",group:"Arms",equip:"Bodyweight",pattern:"Push",primary:"Triceps",secondary:["Chest"],tags:["compound","bodyweight"],aliases:["dips"]},{name:"Plank",group:"Core",equip:"Bodyweight",pattern:"Core",primary:"Core",secondary:[],tags:["stability"],aliases:["front plank"]},{name:"Side Plank",group:"Core",equip:"Bodyweight",pattern:"Core",primary:"Obliques",secondary:[],tags:["stability"],aliases:["side plank"]},{name:"Hanging Knee Raise",group:"Core",equip:"Bodyweight",pattern:"Core",primary:"Abs",secondary:["Hip Flexors"],tags:["bodyweight"],aliases:["knee raise"]},{name:"Cable Crunch",group:"Core",equip:"Cable",pattern:"Core",primary:"Abs",secondary:[],tags:["hypertrophy"],aliases:["rope crunch"]},{name:"Rowing (Erg)",group:"Conditioning",equip:"Machine",pattern:"Cardio",primary:"Full Body",secondary:[],tags:["cardio"],aliases:["rower"]},{name:"Bike (Stationary)",group:"Conditioning",equip:"Machine",pattern:"Cardio",primary:"Legs",secondary:[],tags:["cardio"],aliases:["cycle"]},{name:"Treadmill Run",group:"Conditioning",equip:"Machine",pattern:"Cardio",primary:"Legs",secondary:[],tags:["cardio"],aliases:["run"]}],rt=[{suf:"(Paused)",a:"paused",tag:"strength",diff:"Advanced"},{suf:"(Tempo)",a:"tempo",tag:"control",diff:"Intermediate"},{suf:"(Close Grip)",a:"close grip",tag:"triceps",diff:"Intermediate"},{suf:"(Wide Grip)",a:"wide grip",tag:"lats",diff:"Intermediate"},{suf:"(Neutral Grip)",a:"neutral grip",tag:"joint-friendly",diff:"Beginner"},{suf:"(Single-Arm)",a:"single arm",tag:"unilateral",diff:"Intermediate"}],Xt=[];bt.forEach(Rt=>ge(Xt,Rt));var lt=new Set(["barbell bench press","dumbbell bench press","incline bench press","incline dumbbell press","pull-up","chin-up","lat pulldown","barbell row","seated cable row","back squat","front squat","romanian deadlift","deadlift","hip thrust","overhead press","dumbbell shoulder press","bicep curl","hammer curl","triceps pushdown"]);Xt.slice(0).forEach(Rt=>{var ea=Rt.name.toLowerCase();lt.has(ea)&&rt.forEach(Gt=>{var pt;var fa=`${Rt.name} ${Gt.suf}`;ge(Xt,{name:fa,group:Rt.group,equip:Rt.equip,pattern:Rt.pattern,primary:Rt.primary,secondary:Rt.secondary,difficulty:Gt.diff,tags:Array.from(new Set([...Rt.tags||[],Gt.tag])),aliases:Array.from(new Set([...Rt.aliases||[],`${((pt=Rt.aliases)==null?void 0:pt[0])||Rt.name} ${Gt.a}`]))})})});var mt=[{from:"Barbell",to:"Smith Machine"},{from:"Dumbbell",to:"Cable"},{from:"Machine",to:"Cable"}];Xt.slice(0).forEach(Rt=>{mt.forEach(ea=>{if(Rt.equip!==ea.from)return;var Gt=Rt.name.replace(/\s+(.*)$/,"")+` (${ea.to})`;ge(Xt,{name:Gt,group:Rt.group,equip:ea.to,pattern:Rt.pattern,primary:Rt.primary,secondary:Rt.secondary,difficulty:Rt.difficulty,tags:Array.from(new Set([...Rt.tags||[],"variant"])),aliases:Array.from(new Set([...Rt.aliases||[],`${Rt.name} ${ea.to}`]))})})});var kt=new Set,Ft=[];return Xt.forEach(Rt=>{var ea=Rt.id||ee(Rt.name);kt.has(ea)||(kt.add(ea),Ft.push({...Rt,id:ea}))}),Ft.sort((Rt,ea)=>(Rt.group||"").localeCompare(ea.group||"")||(Rt.name||"").localeCompare(ea.name||"")),Ft})();window.__FOF_EXERCISE_DB=Bd,window.__FOF_RESOLVE_EXERCISE=ee=>{try{var ge=String(ee||"").trim();if(!ge)return null;var rt=(Rt=>{var ea=String(Rt||"").trim();return ea=ea.split("\u2014")[0].split("\u2013")[0].split("|")[0],ea=ea.replace(/([^)]*)\s*$/,""),ea=ea.replace(/\b\d+\s*(x|)\s*\d+\b.*$/i,"").trim(),ea=ea.replace(/\bRPE\s*\d+(.\d+)?\b.*$/i,"").trim(),ea})(ge);if(!rt||!rt)return null;var Xt=rt.toLowerCase(),lt=Array.isArray(window.__FOF_EXERCISE_DB)?window.__FOF_EXERCISE_DB:[],mt=Rt=>String(Rt||"").toLowerCase().replace(/[^a-z0-9]+/g," ").trim(),kt=mt(Xt);var Ft=lt.find(Rt=>mt(Rt.name)===kt);return Ft||(Ft=lt.find(Rt=>(Array.isArray(Rt.aliases)?Rt.aliases:[]).some(ea=>mt(ea)===kt)),Ft)?Ft:(Ft=lt.find(Rt=>mt(Rt.name).includes(kt)||kt.includes(mt(Rt.name))),Ft||null)}catch(ge){return null}},window.__FOF_EXERCISE_SUBS=(ee,ge=4)=>{try{if(!ee)return[];var bt=Array.isArray(window.__FOF_EXERCISE_DB)?window.__FOF_EXERCISE_DB:[],rt=Gt=>String(Gt||"").toLowerCase().replace(/[^a-z0-9]+/g," ").trim(),Xt=ee.group||"",lt=ee.pattern||"",mt=ee.equip||"",kt=ee.primary||"";var Ft=bt.filter(Gt=>Gt&&Gt.name&&Gt.name!==ee.name&&Xt&&Gt.group===Xt);if(!Ft.length&&lt&&(Ft=bt.filter(Gt=>Gt&&Gt.name&&Gt.name!==ee.name&&Gt.pattern===lt)),!Ft.length&&kt&&(Ft=bt.filter(Gt=>Gt&&Gt.name&&Gt.name!==ee.name&&Gt.primary===kt)),!Ft.length&&mt&&(Ft=bt.filter(Gt=>Gt&&Gt.name&&Gt.name!==ee.name&&Gt.equip===mt)),!Ft.length){var Gt=new Set(rt(ee.name).split(" ").filter(Boolean));Ft=bt.filter(fa=>fa&&fa.name&&fa.name!==ee.name).map(fa=>{var pt=rt(fa.name).split(" ").filter(Boolean);var Qa=0;return pt.forEach(Pi=>{Gt.has(Pi)&&(Qa+=1)}),{x:fa,score:Qa}}).filter(fa=>fa.score>0).sort((fa,pt)=>pt.score-fa.score).map(fa=>fa.x)}Ft=Ft.sort((Gt,fa)=>(Gt.equip===mt?-1:0)-(fa.equip===mt?-1:0));var Rt=new Set,ea=[];return Ft.forEach(Gt=>{var fa=rt(Gt.name);!fa||Rt.has(fa)||(Rt.add(fa),ea.push(Gt))}),ea.slice(0,ge)}catch(bt){return[]}},window.__FOF_RESOLVE_LIBRARY_SESSION=ee=>{try{var ge=String(ee||"").trim();if(!ge)return null;var bt=ge.toLowerCase(),rt=typeof LIBRARY_CATALOG!="undefined"&&Array.isArray(LIBRARY_CATALOG)?LIBRARY_CATALOG:[];return rt.find(lt=>String(lt.title||"").toLowerCase()===bt)||rt.find(lt=>String(lt.title||"").toLowerCase().includes(bt)||bt.includes(String(lt.title||"").toLowerCase()))||null}catch(ge){return null}},window.__FOF_PRESCRIBE_ITEM=(ee,ge={})=>{var bt;try{var rt=(()=>{try{return JSON.parse(localStorage.getItem("fof_gold_request_v1")||"null")}catch(Aa){return null}})(),Xt=ge.input||(rt==null?void 0:rt.input)||(()=>{try{return JSON.parse(localStorage.getItem("fof_gold_input_v1")||"null")}catch(Aa){return null}})(),lt=ge.context||(rt==null?void 0:rt.context)||(()=>{try{return JSON.parse(localStorage.getItem("fof_gold_context_v1")||"null")}catch(Aa){return null}})(),mt=String(ge.goal||(Xt==null?void 0:Xt.goal)||"").toUpperCase(),kt=Number(ge.timeMinutes||(Xt==null?void 0:Xt.timeMinutes)||30)||30,Ft=String(ge.capacityZone||((bt=lt==null?void 0:lt.capacity)==null?void 0:bt.zone)||"MID").toUpperCase(),Rt=typeof ee=="object"&&ee?ee:window.__FOF_RESOLVE_EXERCISE?window.__FOF_RESOLVE_EXERCISE(ee):null,ea=Ft==="LOW"?-1:Ft==="HIGH"?1:0,Gt=kt>=60?1:kt>=45?0:-1;var fa=3,pt="8\u201312",Qa=75;if(mt==="NUTRITION")return{kind:"NUTRITION",note:"Log targets / meal"};if(mt==="YOGA"||mt==="MOBILITY"||mt==="RECOVERY"||mt==="STRETCH")return{kind:"SESSION",minutes:Math.max(8,Math.min(45,kt>=60?35:kt>=45?25:15)),intensity:Ft==="LOW"?"EASY":Ft==="HIGH"?"MODERATE+":"MODERATE"};var Pi=ea+Gt>=1,Bs=ea+Gt<=-1;Bs?(fa=2,pt="10\u201315",Qa=60):Pi?(fa=4,pt="6\u201310",Qa=105):(fa=3,pt="8\u201312",Qa=75);var Ba=String((Rt==null?void 0:Rt.group)||"").toLowerCase();return/squat|hinge|press|deadlift|pull|row/.test(Ba)&&!Bs&&(pt=Pi?"5\u20138":"6\u201310",Qa=Pi?120:90),{kind:"WORKOUT",sets:fa,reps:pt,restSec:Qa,cue:Ft==="LOW"?"Keep it smooth.":Ft==="HIGH"?"Push with control.":"Steady effort."}}catch(rt){return{kind:"WORKOUT",sets:3,reps:"8\u201312",restSec:75}}},window.__FOF_MEDIA_FOR=ee=>{try{var bt=String(ee||"").trim().toLowerCase();if(!bt)return null;var rt=window.__FOF_MEDIA_MAP&&typeof window.__FOF_MEDIA_MAP=="object"?window.__FOF_MEDIA_MAP:{};if(rt[bt])return rt[bt];var Xt=[{videoUrl:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",poster:null,durationSec:18},{videoUrl:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/river.mp4",poster:null,durationSec:12},{videoUrl:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/bee.mp4",poster:null,durationSec:14},{videoUrl:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/forest.mp4",poster:null,durationSec:16}];var lt=2166136261;for(var kt=0;kt<bt.length;kt++)lt^=bt.charCodeAt(kt),lt=Math.imul(lt,16777619);var mt=Math.abs(lt>>>0)%Xt.length;return Xt[mt]}catch(ge){return{videoUrl:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",poster:null,durationSec:18}}},window.__FOF_WORKOUT_EXERCISE_NAMES=(Bd||[]).map(ee=>ee.name),window.__FOF_EX_SEARCH=(ee,ge={})=>{var bt=String(ee||"").trim().toLowerCase(),rt=ge.group&&ge.group!=="All"?String(ge.group):null,Xt=ge.equip&&ge.equip!=="All"?String(ge.equip):null,lt=ge.pattern&&ge.pattern!=="All"?String(ge.pattern):null;return(window.__FOF_EXERCISE_DB||[]).filter(kt=>rt&&kt.group!==rt||Xt&&kt.equip!==Xt||lt&&kt.pattern!==lt?!1:bt?[kt.name,...kt.aliases||[]].join(" ").toLowerCase().includes(bt):!0)};var ic=(window.__FOF_WORKOUT_EXERCISE_NAMES||[]).slice(0,400);function wl(ee="id"){try{return ee+"_"+Math.random().toString(16).slice(2)+"_"+Date.now().toString(16)}catch(ge){return ee+"_"+String(Date.now())}}var Gd=({row:ee,onChange:ge,onToggleDone:bt,onDelete:rt})=>React.createElement("div",{className:["rounded-3xl border border-white/10 bg-black/20 p-3","grid grid-cols-12 gap-2 items-center",ee.done?"ring-1 ring-emerald-400/25 bg-emerald-500/5":""].join(" ")},React.createElement("div",{className:"col-span-4"},React.createElement(cl,{inputMode:"decimal",placeholder:"kg",value:ee.weight,onChange:Xt=>ge({...ee,weight:Xt.target.value})})),React.createElement("div",{className:"col-span-3"},React.createElement(cl,{inputMode:"numeric",placeholder:"reps",value:ee.reps,onChange:Xt=>ge({...ee,reps:Xt.target.value})})),React.createElement("div",{className:"col-span-3"},React.createElement(cl,{inputMode:"numeric",placeholder:"RPE",value:ee.rpe,onChange:Xt=>ge({...ee,rpe:Xt.target.value})})),React.createElement("div",{className:"col-span-2 flex justify-end gap-2"},React.createElement("button",{type:"button",onClick:bt,className:["h-11 w-11 rounded-2xl border transition active:scale-[0.99]",ee.done?"border-emerald-400/35 bg-emerald-500/15":"border-white/10 bg-white/5 hover:bg-white/8"].join(" "),"aria-label":ee.done?"Set done":"Mark set done"},React.createElement(gi,{name:ee.done?"CheckCircle2":"Circle",size:18,className:ee.done?"text-emerald-200":"text-white/60"})),React.createElement("button",{type:"button",onClick:rt,className:"h-11 w-11 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 active:scale-[0.99]","aria-label":"Delete set"},React.createElement(gi,{name:"Trash2",size:16,className:"text-white/60"})))),yd=({sets:ee,onSetsChange:ge})=>{var bt=(kt,Ft)=>{try{var Rt=ee.slice();Rt[kt]=Ft,ge(Rt)}catch(Rt){}},rt=()=>{try{var kt=(ee||[]).slice();kt.push({id:wl("set"),weight:"",reps:"",rpe:"",done:!1}),ge(kt)}catch(kt){}},Xt=()=>{try{var kt=(ee||[])[(ee||[]).length-1],Ft=(ee||[]).slice();kt?Ft.push({...kt,id:wl("set"),done:!1}):Ft.push({id:wl("set"),weight:"",reps:"",rpe:"",done:!1}),ge(Ft)}catch(kt){}},lt=kt=>{try{var Ft=(ee||[]).slice();Ft.splice(kt,1),ge(Ft.length?Ft:[{id:wl("set"),weight:"",reps:"",rpe:"",done:!1}])}catch(Ft){}},mt=ee&&ee.length?ee:[{id:wl("set"),weight:"",reps:"",rpe:"",done:!1}];return React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] text-white/55 font-extrabold"},"Sets"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:Xt,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 text-[12px] text-white/80 font-extrabold inline-flex items-center gap-2 active:scale-[0.99]"},React.createElement(gi,{name:"Copy",size:14,className:"text-white/60"}),"Duplicate"),React.createElement("button",{type:"button",onClick:rt,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 text-[12px] text-white/80 font-extrabold inline-flex items-center gap-2 active:scale-[0.99]"},React.createElement(gi,{name:"Plus",size:14,className:"text-white/60"}),"Add"))),React.createElement("div",{className:"grid grid-cols-12 gap-2 text-[10px] text-white/40 font-bold px-1"},React.createElement("div",{className:"col-span-4"},"Weight"),React.createElement("div",{className:"col-span-3"},"Reps"),React.createElement("div",{className:"col-span-3"},"RPE"),React.createElement("div",{className:"col-span-2 text-right"},"Done")),React.createElement("div",{className:"space-y-2"},mt.map((kt,Ft)=>React.createElement(Gd,{key:kt.id||Ft,row:kt,onChange:Rt=>bt(Ft,Rt),onToggleDone:()=>bt(Ft,{...kt,done:!kt.done}),onDelete:()=>lt(Ft)}))))},pd=({ex:ee,onChange:ge,onRemove:bt,onMoveUp:rt,onMoveDown:Xt,canMoveUp:lt,canMoveDown:mt,prev:kt})=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4 space-y-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},ee.name||"Exercise"),React.createElement("div",{className:"text-[12px] text-white/45 font-bold"},"Log sets like a real gym app.")),React.createElement("div",{className:"inline-flex items-center gap-2"},React.createElement("button",{type:"button",disabled:!lt,onClick:rt,className:["h-10 w-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 inline-flex items-center justify-center",lt?"":"opacity-40 cursor-not-allowed"].join(" "),title:"Move up"},React.createElement(gi,{name:"ChevronUp",size:16,className:"text-white/70"})),React.createElement("button",{type:"button",disabled:!mt,onClick:Xt,className:["h-10 w-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 inline-flex items-center justify-center",mt?"":"opacity-40 cursor-not-allowed"].join(" "),title:"Move down"},React.createElement(gi,{name:"ChevronDown",size:16,className:"text-white/70"})),React.createElement("button",{type:"button",onClick:bt,className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 inline-flex items-center justify-center",title:"Remove exercise"},React.createElement(gi,{name:"X",size:16,className:"text-white/70"})))),kt&&Array.isArray(kt.sets)&&kt.sets.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Last time"),React.createElement("div",{className:"text-[11px] font-black text-white/55"},String(kt.dateKey||"").slice(0,10)||"")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},kt.sets.slice(0,8).map((Ft,Rt)=>{var ea,Gt;return React.createElement("span",{key:Rt,className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-[11px] font-extrabold text-white/80"},(ea=Ft.weight)!=null?ea:"\u2014","\xD7",(Gt=Ft.reps)!=null?Gt:"\u2014",Ft.rpe?` \u2022 RPE ${Ft.rpe}`:"")}))):null,React.createElement(yd,{sets:ee.sets,onSetsChange:Ft=>ge({...ee,sets:Ft})}),React.createElement(Yl,{label:"Exercise Notes (optional)"},React.createElement(Wl,{placeholder:"Form cues, machine settings, pain notes\u2026",value:ee.note||"",onChange:Ft=>ge({...ee,note:Ft.target.value})}))),Hd=ee=>{try{var ge=String(ee||"").trim().toLowerCase();if(!ge)return null;var bt=typeof es=="function"?es():{},rt=Object.keys(bt||{}),Xt=[];rt.forEach(lt=>{var mt=bt&&bt[lt]?bt[lt]:{};(Array.isArray(mt.workout)?mt.workout:[]).forEach(Ft=>Xt.push({dk:lt,ts:Ft.ts||0,ent:Ft}))}),Xt.sort((lt,mt)=>(mt.ts||0)-(lt.ts||0));for(var lt of Xt){var mt=lt.ent||{},kt=Array.isArray(mt.exercises)?mt.exercises:mt.session&&Array.isArray(mt.session.exercises)?mt.session.exercises:[];for(var Ft of kt||[])if(String(Ft.name||"").trim().toLowerCase()===ge){var Rt=Array.isArray(Ft.sets)?Ft.sets:[];return{dateKey:lt.dk,ts:lt.ts,sets:Rt.slice(0,12)}}}return null}catch(ge){return null}},sc=()=>{var ee=[60,90,120],[ge,bt]=React.useState(90),[rt,Xt]=React.useState(null),[lt,mt]=React.useState(!1);React.useEffect(()=>{if(!lt)return;var Gt=setInterval(()=>{Xt(fa=>{var pt=(fa==null?ge:fa)-1;if(pt<=0){try{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(20)}catch(Qa){}return mt(!1),0}return pt})},1e3);return()=>clearInterval(Gt)},[lt,ge]);var kt=Gt=>{try{var fa=Math.max(0,Number(Gt||0)),pt=Math.floor(fa/60),Qa=fa%60;return`${pt}:${String(Qa).padStart(2,"0")}`}catch(fa){return"0:00"}},Ft=()=>{Xt(Gt=>Gt==null?ge:Gt),mt(!0)},Rt=()=>mt(!1),ea=()=>{mt(!1),Xt(null)};return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},"Rest Timer"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Quick between-set timer (optional)")),React.createElement("div",{className:"text-white font-black text-[18px] tabular-nums"},kt(rt==null?ge:rt))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",{className:"flex gap-2"},ee.map(Gt=>React.createElement("button",{key:Gt,type:"button",onClick:()=>{bt(Gt),Xt(null),mt(!1)},className:["px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition",ge===Gt?"border-white/18 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/75 hover:bg-white/8"].join(" ")},Gt,"s"))),React.createElement("div",{className:"flex gap-2"},lt?React.createElement("button",{type:"button",onClick:Rt,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/8 text-[12px] font-extrabold text-white/90 hover:bg-white/10 inline-flex items-center gap-2"},React.createElement(gi,{name:"Pause",size:14,className:"text-white/80"})," Pause"):React.createElement("button",{type:"button",onClick:Ft,className:"px-4 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 text-[12px] font-extrabold text-emerald-100 hover:bg-emerald-500/15 inline-flex items-center gap-2"},React.createElement(gi,{name:"Play",size:14,className:"text-emerald-200"})," Start"),React.createElement("button",{type:"button",onClick:ea,className:"px-4 py-2 rounded-2xl border border-white/10 bg-white/5 text-[12px] font-extrabold text-white/80 hover:bg-white/8 inline-flex items-center gap-2"},React.createElement(gi,{name:"RotateCcw",size:14,className:"text-white/70"})," Reset"))))},Wd=({open:ee,query:ge,setQuery:bt,onPick:rt,onClose:Xt})=>{if(!ee)return null;var mt=String(ge||"").toLowerCase().trim();var kt=[];try{typeof window!="undefined"&&typeof window.__FOF_EX_SEARCH=="function"?kt=window.__FOF_EX_SEARCH(mt,{}):typeof window!="undefined"&&Array.isArray(window.__FOF_EXERCISE_DB)?kt=window.__FOF_EXERCISE_DB.slice():kt=[]}catch(Rt){kt=[]}var Ft=(Array.isArray(kt)?kt:Object.values(kt||{})).slice(0,160);return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4 space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-black"},"Add Exercise"),React.createElement("button",{type:"button",onClick:Xt,className:"h-9 w-9 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8"},React.createElement(gi,{name:"X",size:16,className:"text-white/70"}))),React.createElement(Yl,{label:"Search"},React.createElement(cl,{placeholder:"Search exercises (e.g. Squat, Row\u2026)",value:ge,onChange:Rt=>bt(Rt.target.value)})),React.createElement("div",{className:"max-h-64 overflow-auto pr-1"},Ft&&Ft.length?React.createElement("div",{className:"grid grid-cols-2 gap-2"},Ft.map(Rt=>React.createElement("button",{key:Rt.id||Rt.name,type:"button",onClick:()=>rt(Rt.name),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-3 py-3 text-left"},React.createElement("div",{className:"text-[12px] text-white/90 font-extrabold"},Rt.name),React.createElement("div",{className:"mt-1 text-[10px] text-white/55 font-bold"},[Rt.group,Rt.equip].filter(Boolean).join(" \u2022 ")),React.createElement("div",{className:"text-[10px] text-white/45 font-bold"},"Tap to add")))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/60 font-bold"},"No matches. Try a different search.")))},Nd=()=>{var[ee,ge]=React.useState([]);return React.useEffect(()=>{var bt=rt=>{var Xt,lt;try{var mt=((Xt=rt==null?void 0:rt.detail)==null?void 0:Xt.msg)||((lt=rt==null?void 0:rt.detail)==null?void 0:lt.message)||"Saved",kt="t_"+Math.random().toString(16).slice(2),Ft={id:kt,msg:String(mt),ts:Date.now()};ge(Rt=>[Ft,...Rt||[]].slice(0,3)),setTimeout(()=>{try{ge(Rt=>(Rt||[]).filter(ea=>ea.id!==kt))}catch(Rt){}},2200)}catch(mt){}};return window.addEventListener("flowofit:toast",bt),()=>window.removeEventListener("flowofit:toast",bt)},[]),!ee||!ee.length?null:React.createElement("div",{className:"fixed left-0 right-0 bottom-[84px] z-[9999] px-4 pointer-events-none"},React.createElement("div",{className:"mx-auto max-w-[520px] space-y-2"},ee.map(bt=>React.createElement("div",{key:bt.id,className:"pointer-events-none rounded-2xl border border-white/10 bg-black/70 backdrop-blur px-4 py-3 text-[13px] font-extrabold text-white shadow-[0_20px_80px_rgba(0,0,0,0.45)]"},bt.msg))))};function Yd({open:ee,onClose:ge,foodQuery:bt,setFoodQuery:rt,foodRecent:Xt,foodDB:lt,foodDraft:mt,setFoodDraft:kt,addFoodToMeal:Ft,meal:Rt}){if(!ee)return null;var ea=String(bt||"").trim().toLowerCase(),Gt=(ea.length===0?Xt:lt.filter(fa=>(fa.name+" "+(fa.brand||"")).toLowerCase().includes(ea))).slice(0,12);return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},"Add Food"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Search, scan, or pick from recents.")),React.createElement("button",{type:"button",onClick:ge,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 text-[12px] font-extrabold text-white/85 hover:bg-white/8"},"Done")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("div",{className:"flex-1"},React.createElement("input",{value:bt,onChange:fa=>rt(fa.target.value),placeholder:"Search foods (e.g., chicken, oats, apple)\u2026",className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}),React.createElement("div",{className:"mt-2 text-[11px] text-white/45 font-bold"},ea.length===0?"Recents":`Results for \u201C${bt}\u201D`)),React.createElement("button",{type:"button",onClick:()=>window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Barcode scan",message:"Stub (Phase later) \u2014 add by search for now."}})),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/10 bg-white/5 text-[12px] font-extrabold text-white/85 hover:bg-white/8 inline-flex items-center gap-2"},React.createElement(gi,{name:"ScanLine",size:16,className:"text-white/70"}),"Scan")),React.createElement("div",{className:"mt-3 space-y-2 max-h-[38vh] overflow-auto pr-1"},Gt.map((fa,pt)=>{var Qa=`${fa.id}-${pt}`;return React.createElement("div",{key:Qa,className:"rounded-2xl border border-white/10 bg-white/4 p-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},fa.name),React.createElement("div",{className:"text-[11px] text-white/45 font-bold truncate"},fa.brand||"Generic"," \u2022 ",fa.serving," \u2022 ",fa.cal," kcal"),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-bold"},"P ",fa.p,"g \u2022 C ",fa.c,"g \u2022 F ",fa.f,"g")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"hidden sm:flex items-center gap-1"},React.createElement("button",{type:"button",onClick:()=>kt(Pi=>({...Pi,qty:Math.max(.25,(Number(Pi.qty)||1)-.25)})),className:"w-9 h-9 rounded-2xl border border-white/10 bg-white/5 text-white/85 font-black hover:bg-white/8"},"-"),React.createElement("div",{className:"w-12 text-center text-white font-black"},Number(mt.qty||1)),React.createElement("button",{type:"button",onClick:()=>kt(Pi=>({...Pi,qty:(Number(Pi.qty)||1)+.25})),className:"w-9 h-9 rounded-2xl border border-white/10 bg-white/5 text-white/85 font-black hover:bg-white/8"},"+")),React.createElement("button",{type:"button",onClick:()=>Ft(fa,Rt),className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/6 text-[12px] font-extrabold text-white/90 hover:bg-white/10 inline-flex items-center gap-2"},React.createElement(gi,{name:"Plus",size:16,className:"text-white/70"}),"Add")))}),Gt.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-4 text-white/70 text-[12px] font-bold"},"No matches. Try a different search term."):null))}var ad=({open:ee,initialKind:ge="WORKOUT",dateKey:bt=null,preset:rt=null,onClose:Xt})=>{var ht,ba,et,At,ma,Je,Oa,He,Ca,ha;if(!ee||!__fof_assertOverlayAllowed("BOTTOM_SHEET","QUICK_LOG"))return null;var lt=(()=>{try{return bt||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null)||null}catch(K){return bt||null}})(),kt=(K=>String(K||"WORKOUT").toUpperCase())(ge),Ft=!0,[Rt,ea]=React.useState(kt),[Gt,fa]=React.useState(!1),[pt,Qa]=React.useState("EDIT"),[Pi,Bs]=React.useState(null),[Ba,ja]=React.useState(!1),[Aa,Ci]=React.useState(null),[Ri,_i]=React.useState(null),[ns,Zi]=React.useState(!1),Cs=React.useMemo(()=>{try{var K=localStorage.getItem("fof_user_context_v1");var aa="demo_surface",Mt="INDEPENDENT";if(K){var ei=JSON.parse(K);ei&&(ei.surfaceKey||ei.clientId||ei.id)&&(aa=ei.surfaceKey||ei.clientId||ei.id),ei&&ei.clientMode&&(Mt=String(ei.clientMode).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT")}var la=`fof_active_workout__${aa}__${Mt}`,xa=localStorage.getItem(la);return xa&&JSON.parse(xa)||null}catch(K){return null}},[]),[xt,li]=React.useState(""),[us,Hi]=React.useState(""),[wi,Is]=React.useState(""),[Js,To]=React.useState(!1),[pn,Bo]=React.useState(!1),[No,bn]=React.useState([]),[_n,gr]=React.useState(!1),[Wn,nr]=React.useState(""),Br=(()=>{try{var K=rt&&(rt.meal||rt.mealKey||rt.meal_type);if(!K)return null;var aa=String(K).toUpperCase();return["BREAKFAST","LUNCH","DINNER","SNACK"].includes(aa)?aa:aa==="SNACKS"?"SNACK":null}catch(K){return null}})(),[Nn,fl]=React.useState(Br||"BREAKFAST"),[ul,yl]=React.useState(rt&&rt.foodName?String(rt.foodName):""),[Nl,Ko]=React.useState(rt&&rt.foodName?String(rt.foodName):""),[il,Cr]=React.useState(rt&&rt.serving?String(rt.serving):""),[Yn,ml]=React.useState(rt&&rt.carbs!=null?String(rt.carbs):""),[vr,Sl]=React.useState(rt&&rt.fat!=null?String(rt.fat):""),[sl,_l]=React.useState(!1),[kl,jl]=React.useState(()=>[{id:"r1",name:"Greek Yogurt (Plain)",brand:"Generic",serving:"170g",cal:100,p:17,c:6,f:0},{id:"r2",name:"Banana",brand:"Whole food",serving:"1 medium",cal:105,p:1,c:27,f:0},{id:"r3",name:"Chicken Breast (Cooked)",brand:"Generic",serving:"100g",cal:165,p:31,c:0,f:4},{id:"r4",name:"Oats",brand:"Generic",serving:"40g",cal:150,p:5,c:27,f:3}]),[wr,Gs]=React.useState(()=>({BREAKFAST:[],LUNCH:[],DINNER:[],SNACK:[]})),[Kn,jn]=React.useState(()=>({qty:1,unit:"serving"})),In=React.useMemo(()=>[{id:"f1",name:"Eggs (whole)",brand:"Generic",serving:"1 large",cal:72,p:6,c:0,f:5},{id:"f2",name:"Whole Wheat Bread",brand:"Generic",serving:"1 slice",cal:110,p:4,c:20,f:1.5},{id:"f3",name:"Olive Oil",brand:"Generic",serving:"1 tbsp",cal:119,p:0,c:0,f:13.5},{id:"f4",name:"White Rice (cooked)",brand:"Generic",serving:"1 cup",cal:205,p:4,c:45,f:.4},{id:"f5",name:"Salmon",brand:"Generic",serving:"100g",cal:208,p:20,c:0,f:13},{id:"f6",name:"Apple",brand:"Whole food",serving:"1 medium",cal:95,p:.5,c:25,f:.3},...kl],[kl]),Jn=wr[Nn]||[],wn=React.useMemo(()=>{var K={cal:0,p:0,c:0,f:0};return Jn.forEach(aa=>{var Mt=Number(aa.qty||1);K.cal+=(Number(aa.cal)||0)*Mt,K.p+=(Number(aa.p)||0)*Mt,K.c+=(Number(aa.c)||0)*Mt,K.f+=(Number(aa.f)||0)*Mt}),K},[Jn]),fr=React.useMemo(()=>{var K={cal:0,p:0,c:0,f:0};return["BREAKFAST","LUNCH","DINNER","SNACK"].forEach(aa=>{(wr[aa]||[]).forEach(Mt=>{var la=Number(Mt.qty||1);K.cal+=(Number(Mt.cal)||0)*la,K.p+=(Number(Mt.p)||0)*la,K.c+=(Number(Mt.c)||0)*la,K.f+=(Number(Mt.f)||0)*la})}),K},[wr]),Vl=(K,aa)=>{var Mt=String(aa||Nn||"BREAKFAST").toUpperCase(),la={...K,qty:Number(Kn.qty||1)||1,unit:Kn.unit||"serving"};Gs(xa=>({...xa,[Mt]:[la,...xa[Mt]||[]]})),jl(xa=>{var ei=(xa||[]).filter(di=>di.id!==K.id);return[K,...ei].slice(0,12)})},sd=(K,aa)=>{var Mt=String(K||Nn||"BREAKFAST").toUpperCase();Gs(la=>({...la,[Mt]:(la[Mt]||[]).filter((xa,ei)=>`${xa.id||"x"}-${ei}`!==aa)}))},yr=K=>K==="SNACK"?"Snack":K.charAt(0)+K.slice(1).toLowerCase(),[Mn,Gr]=React.useState(""),[En,Ir]=React.useState(""),[Vn,od]=React.useState("WEIGHT"),[Rr,nd]=React.useState(""),[pl,rd]=React.useState(""),[bl,El]=React.useState(""),[Nr,Fn]=React.useState(""),[Sr,ol]=React.useState(4),[zr,Al]=React.useState(4);React.useEffect(()=>{try{ea(kt)}catch(K){}},[kt]),React.useEffect(()=>{try{if(!rt)return;Br&&fl(Br),rt.foodName&&(Ko(String(rt.foodName)),yl(String(rt.foodName))),rt.serving!=null&&Cr(String(rt.serving)),rt.carbs!=null&&ml(String(rt.carbs)),rt.fat!=null&&Sl(String(rt.fat)),rt.protein!=null&&Ir(String(rt.protein)),rt.calories!=null&&Gr(String(rt.calories))}catch(K){}},[rt]);var nl=()=>{try{li("")}catch(K){}try{To(!1)}catch(K){}try{Hi(""),Is("")}catch(K){}try{bn([]),gr(!1),nr("")}catch(K){}try{fl(Br||"BREAKFAST"),yl(""),Ko(""),Cr(""),Gr(""),Ir(""),ml(""),Sl(""),_l(!1),jn({qty:1,unit:"serving"}),Gs({BREAKFAST:[],LUNCH:[],DINNER:[],SNACK:[]})}catch(K){}try{od("WEIGHT"),nd(""),rd(""),El("")}catch(K){}try{Fn(""),ol(4),Al(4)}catch(K){}try{Qa("EDIT"),Bs(null)}catch(K){}},i=()=>{try{var K=Rt;return xt?!0:K==="WORKOUT"?!!(us||wi||No&&No.length):K==="FOOD"?!!(Nl||ul||Mn||En||Yn||vr):K==="BODY"?!!(Rr||pl||bl):K==="RECOVERY"?!!(Nr||Sr!==4||zr!==4):!1}catch(K){return!1}},s=()=>{try{if(i()){fa(!0);return}Xt&&Xt()}catch(K){try{Xt&&Xt()}catch(aa){}}},x=K=>{try{var aa={id:wl("ex"),name:String(K||"Exercise"),sets:[{weight:"",reps:""}]};bn(Mt=>(Mt||[]).concat([aa]));try{var Mt="__fof_recent_exercises_v1",la=localStorage.getItem(Mt),xa=la?JSON.parse(la):[],ei=[aa.name].concat(xa.filter(di=>di!==aa.name)).slice(0,12);localStorage.setItem(Mt,JSON.stringify(ei))}catch(Mt){}gr(!1),nr("")}catch(aa){}},S=(K,aa)=>{try{bn(Mt=>(Mt||[]).map(la=>la.id===K?aa:la))}catch(Mt){}},u=(K,aa,Mt,la)=>{try{bn(xa=>{var ei=Array.isArray(xa)?[...xa]:[],di=ei.findIndex(Ge=>Ge.id===K);if(di<0)return ei;var Ua={...ei[di]||{}},sa=Array.isArray(Ua.sets)?[...Ua.sets]:[{weight:"",reps:""}],vt={...sa[aa]||{weight:"",reps:""}};return vt[Mt]=la,sa[aa]=vt,Ua.sets=sa,ei[di]=Ua,ei})}catch(xa){}},$=K=>{try{bn(aa=>{var Mt=Array.isArray(aa)?[...aa]:[],la=Mt.findIndex(di=>di.id===K);if(la<0)return Mt;var xa={...Mt[la]||{}},ei=Array.isArray(xa.sets)?[...xa.sets]:[];return ei.push({weight:"",reps:""}),xa.sets=ei.length?ei:[{weight:"",reps:""}],Mt[la]=xa,Mt})}catch(aa){}},tt=(K,aa)=>{try{bn(Mt=>{var la=Array.isArray(Mt)?[...Mt]:[],xa=la.findIndex(Ua=>Ua.id===K);if(xa<0)return la;var ei={...la[xa]||{}};var di=Array.isArray(ei.sets)?[...ei.sets]:[];return di=di.filter((Ua,sa)=>sa!==aa),di.length||(di=[{weight:"",reps:""}]),ei.sets=di,la[xa]=ei,la})}catch(Mt){}},ue=K=>{try{bn(aa=>{var Mt=Array.isArray(aa)?[...aa]:[],la=Mt.findIndex(vt=>vt.id===K);if(la<0)return Mt;var xa={...Mt[la]||{}},ei=Array.isArray(xa.sets)?[...xa.sets]:[{weight:"",reps:""}],di=ei[ei.length-1]||{},Ua=String(di.weight||"").trim(),sa=String(di.reps||"").trim();return Ua!==""&&sa!==""&&ei.push({weight:"",reps:""}),xa.sets=ei,Mt[la]=xa,Mt})}catch(aa){}},Ie=K=>{try{bn(aa=>(aa||[]).filter(Mt=>Mt.id!==K))}catch(aa){}},fe=(K,aa)=>{try{bn(Mt=>{var la=Array.isArray(Mt)?[...Mt]:[],xa=la.findIndex(Ua=>Ua&&Ua.id===K);if(xa<0)return la;var ei=xa+(aa<0?-1:1);if(ei<0||ei>=la.length)return la;var di=la[xa];return la[xa]=la[ei],la[ei]=di,la})}catch(Mt){}},B=React.useMemo(()=>{try{var K=Array.isArray(No)?No:[];var aa=0,Mt=0,la=0;return K.forEach(xa=>{(Array.isArray(xa.sets)?xa.sets:[]).forEach(ei=>{aa+=1,ei&&ei.done&&(Mt+=1);var di=ei&&ei.weight!=null&&ei.weight!==""?Number(ei.weight):null,Ua=ei&&ei.reps!=null&&ei.reps!==""?Number(ei.reps):null;di!=null&&Ua!=null&&!Number.isNaN(di)&&!Number.isNaN(Ua)&&(la+=di*Ua)})}),{exercises:K.length,sets:aa,completed:Mt,volume:la}}catch(K){return{exercises:0,sets:0,completed:0,volume:0}}},[No]),X=React.useMemo(()=>{var K={};try{(Array.isArray(No)?No:[]).forEach(aa=>{K[aa.id]=Hd(aa.name)})}catch(aa){}return K},[No]),ne=(K,aa)=>{try{typeof window.__fof_addLog=="function"?window.__fof_addLog(lt||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):"unknown-day"),K,aa||{}):typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(lt||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):"unknown-day"),K,aa||{},{via:"QuickLogSheetV2"},"ui")}catch(Mt){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dayKey:lt||null,type:K,payload:aa||{}}}))}catch(Mt){}},W=(K=null)=>{var aa=Rt;if(aa==="WORKOUT"){var Mt={kind:"WORKOUT",sessionType:"STRENGTH",summaryOnly:!0,durationMin:us?Number(us):null,effort:wi?Number(wi):null,note:xt||"",exercises:(No||[]).map(la=>({id:la.id,name:la.name,sets:Array.isArray(la.sets)?la.sets:[]})),source:"quicklog_v2"};ne("workout",Mt);try{Bs({dayKey:lt,session:Mt,summary:B})}catch(la){}try{nl&&nl()}catch(la){}try{Xt&&Xt()}catch(la){}try{var la=lt||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):null);typeof window.__fof_capacity_ingestWorkout=="function"&&window.__fof_capacity_ingestWorkout({dateKey:la,kind:Mt.sessionType||"STRENGTH",durationMin:Mt.durationMin,rpe:null})}catch(la){}try{__toast("Saved","Workout saved to Track.")}catch(la){}}else if(aa==="FOOD"){var Mt=(()=>{var la=(Nl||ul||"").trim();return la?{kind:"MEAL_LOG",meal:Nn,foodName:la,calories:Mn?Number(Mn):0,protein:En?Number(En):null,carbs:Yn?Number(Yn):null,fat:vr?Number(vr):null,serving:(il||"").trim()||null,note:(xt||"").trim()||"",source:"quicklog_v2"}:null})();ne("nutrition",K||Mt||{kind:"FOOD",meal:Nn,itemsByMeal:typeof wr!="undefined"?wr||{}:{},totalsForDay:typeof fr!="undefined"?fr:null,totalsForMeal:typeof wn!="undefined"?wn:null,query:ul||"",calories:Mn?Number(Mn):null,protein:En?Number(En):null,note:xt||"",source:"quicklog_v2"});try{__toast("Saved","Food logged to Track.")}catch(la){}try{var la="__fof_nutrition_events_v1",xa="__fof_food_favorites_custom_v1",ei=localStorage.getItem(la),di=ei?JSON.parse(ei):[],Ua=Array.isArray(di)?di:[],sa=typeof window.__fof_nowIso=="function"?window.__fof_nowIso():new Date().toISOString(),vt=lt||(window.__fof_getSelectedDateKey?window.__fof_getSelectedDateKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):null),Ge=Nn==="BREAKFAST"?"Breakfast":Nn==="LUNCH"?"Lunch":Nn==="DINNER"?"Dinner":"Snack",$e=K&&K.kind==="MEAL_LOG"||Mt&&Mt.kind==="MEAL_LOG",Xa=$e?[]:(K&&K.itemsByMeal&&K.itemsByMeal[Nn]?K.itemsByMeal[Nn]:typeof wr!="undefined"&&wr&&wr[Nn]?wr[Nn]:[])||[],mi=$e?K&&K.foodName?String(K.foodName):Mt&&Mt.foodName?String(Mt.foodName):"":Xa[0]&&Xa[0].name?String(Xa[0].name):"",xi=$e?0:Math.max(0,(Xa.length||0)-1),rs=mi?xi>0?`${mi} +${xi} more`:mi:`${Ge} (Quick Log)`,ct=$e?{cal:Number(K&&K.calories||Mt&&Mt.calories||0),p:Number(K&&K.protein||Mt&&Mt.protein||0),c:Number(K&&K.carbs||Mt&&Mt.carbs||0),f:Number(K&&K.fat||Mt&&Mt.fat||0)}:K&&K.totalsForMeal?K.totalsForMeal:typeof wn!="undefined"?wn:{cal:0,p:0,c:0,f:0},zt={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"m_"+Math.random().toString(16).slice(2),dk:vt,type:Ge,name:rs,calories:Number(Math.round(Number(ct.cal||0))||0),p:Number(Math.round(Number(ct.p||0))||0),c:Number(Math.round(Number(ct.c||0))||0),f:Number(Math.round(Number(ct.f||0))||0),serving:$e&&(K&&K.serving||Mt&&Mt.serving)||"",notes:(xt||"").trim(),ts:Date.now(),src:"quicklog_v2"};Ua.push(zt),localStorage.setItem(la,JSON.stringify(Ua));try{window.__FOF&&window.__FOF.bump&&window.__FOF.bump("nutrition")}catch(Wi){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:vt,type:"NUTRITION",entry:zt}}))}catch(Wi){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dateKey:vt,type:"NUTRITION",entry:zt}}))}catch(Wi){}}catch(la){}}else if(aa==="BODY"){var Mt=Vn==="WEIGHT"?Rr?Number(Rr):null:Vn==="BODYFAT"?pl?Number(pl):null:bl?Number(bl):null;ne("body",{kind:"BODY",metricType:Vn,value:Mt,units:Vn==="WEIGHT"?"kg":Vn==="BODYFAT"?"%":"cm",note:xt||"",source:"quicklog_v2"});try{__toast("Saved","Metric saved.")}catch(la){}try{var la="__fof_body_events_v1",xa=localStorage.getItem(la),ei=xa?JSON.parse(xa):[],di=Array.isArray(ei)?ei:[],Ua=lt||(window.__fof_getSelectedDateKey?window.__fof_getSelectedDateKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):null),sa=Date.now(),vt={weightKg:Vn==="WEIGHT"?Mt:null,bodyfat:Vn==="BODYFAT"?Mt:null,waistCm:Vn==="WAIST"?Mt:null,note:xt||""},Ge={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"b_"+Math.random().toString(16).slice(2),dk:Ua,dateKey:Ua,ts:sa,type:"BODY",metricType:Vn,value:Mt,units:Vn==="WEIGHT"?"kg":Vn==="BODYFAT"?"%":"cm",note:(xt||"").trim(),payload:vt,src:"quicklog_v2"};di.push(Ge),localStorage.setItem(la,JSON.stringify(di));try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:Ua,type:"BODY",entry:Ge}}))}catch($e){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dateKey:Ua,type:"BODY",entry:Ge}}))}catch($e){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved",message:"Metric added to History."}}))}catch($e){}}catch(la){}}else if(aa==="RECOVERY"){ne("recovery",{kind:"RECOVERY",sleepHrs:Nr?Number(Nr):null,soreness:Number(Sr||0),stress:Number(zr||0),note:xt||"",source:"quicklog_v2"});try{__toast("Saved","Recovery logged.")}catch(Mt){}try{var Mt="__fof_recovery_events_v1",la=localStorage.getItem(Mt),xa=la?JSON.parse(la):[],ei=Array.isArray(xa)?xa:[],di=lt||(window.__fof_getSelectedDateKey?window.__fof_getSelectedDateKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):null),Ua=Date.now(),sa={sleepHrs:Nr?Number(Nr):null,soreness:Number(Sr||0),stress:Number(zr||0),note:xt||""},vt={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"r_"+Math.random().toString(16).slice(2),dk:di,dateKey:di,ts:Ua,type:"RECOVERY",payload:sa,note:(xt||"").trim(),src:"quicklog_v2"};ei.push(vt),localStorage.setItem(Mt,JSON.stringify(ei));try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:di,type:"RECOVERY",entry:vt}}))}catch(Ge){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dateKey:di,type:"RECOVERY",entry:vt}}))}catch(Ge){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved",message:"Recovery added to History."}}))}catch(Ge){}}catch(Mt){}}else try{__toast("Saved","Logged.")}catch(Mt){}if(aa!=="WORKOUT"){try{_i({kind:aa,...K||{}})}catch(Mt){}try{Zi(!1)}catch(Mt){}try{Qa("SUMMARY")}catch(Mt){}}},J=()=>{var K=Rt;try{return K==="FOOD"?{kind:"FOOD",meal:Nn,itemsByMeal:typeof wr!="undefined"?wr||{}:{},totalsForDay:typeof fr!="undefined"?fr:null,totalsForMeal:typeof wn!="undefined"?wn:null,note:xt||"",timestamp:Date.now()}:K==="BODY"?{kind:"BODY",metricType:Vn,weightKg:Rr,bodyfat:pl,waistCm:bl,note:xt||"",timestamp:Date.now()}:K==="RECOVERY"?{kind:"RECOVERY",sleepHrs:Nr,soreness:Sr,stress:zr,note:xt||"",timestamp:Date.now()}:{kind:K,note:xt||"",timestamp:Date.now()}}catch(aa){return{kind:K,note:xt||"",timestamp:Date.now()}}},z=()=>{if(Rt==="WORKOUT"){try{if(!(Array.isArray(No)?No:[]).length){__toast&&__toast("Add exercises","Please add at least one exercise.");return}}catch(Mt){}try{Bo(!0)}catch(Mt){}return}var aa=J();try{Ci(aa)}catch(Mt){}try{ja(!0)}catch(Mt){}},H=()=>{var K=Aa||J();try{ja(!1)}catch(aa){}try{Ci(null)}catch(aa){}try{W(K)}catch(aa){}},Ht=({k:K,label:aa,icon:Mt})=>{var la=Rt===K;return React.createElement("button",{type:"button",onClick:()=>{Ft||ea(K)},className:["min-w-[94px] px-3 py-2 rounded-2xl border text-[12px] font-extrabold","inline-flex items-center justify-center gap-2 transition",la?"border-white/18 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},React.createElement(gi,{name:Mt,size:16,className:la?"text-white":"text-white/60"}),aa)},Nt=cl,U=Wl,Q=Yl,w=md,L=Rt==="WORKOUT"?"Log Workout":Rt==="FOOD"?"Log Food":Rt==="BODY"?"Log Metrics":Rt==="RECOVERY"?"Log Recovery":"Quick Log",ut=(()=>{var K={WORKOUT:{icon:"Dumbbell",label:"Workout"},FOOD:{icon:"Utensils",label:"Food"},BODY:{icon:"Activity",label:"Metrics"},RECOVERY:{icon:"Moon",label:"Recovery"}};return K[String(Rt||"WORKOUT").toUpperCase()]||K.WORKOUT})(),ot=(()=>{try{var K=window.__fof_dayFlags?window.__fof_dayFlags(lt):null;return K&&K.isToday?"Today":K&&K.isPast?(lt||"").slice(5):lt||"Selected Day"}catch(K){return lt||"Selected Day"}})();return React.createElement(React.Fragment,null,React.createElement(qo,{open:!0,title:L,kicker:"Quick Log",onClose:s,footer:null},React.createElement("div",{className:"space-y-4"},Ba?React.createElement("div",{className:"fixed inset-0 z-[999]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>ja(!1)}),React.createElement("div",{className:"absolute left-1/2 top-1/2 w-[92vw] max-w-[520px] -translate-x-1/2 -translate-y-1/2 rounded-3xl border border-white/12 bg-[#0B0F1A]/95 p-5 shadow-2xl"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black text-[16px]"},"Confirm save"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},"Review summary before logging.")),React.createElement("button",{type:"button",onClick:()=>ja(!1),className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 inline-flex items-center justify-center"},React.createElement(gi,{name:"X",size:16,className:"text-white/75"}))),Aa&&Aa.kind==="FOOD"?React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-black"},typeof yr=="function"?yr(Aa.meal||Nn):Aa.meal||Nn),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},Math.round(((ht=Aa.totalsForMeal)==null?void 0:ht.cal)||0)," kcal \u2022 P ",Math.round(((ba=Aa.totalsForMeal)==null?void 0:ba.p)||0),"g \u2022 C ",Math.round(((et=Aa.totalsForMeal)==null?void 0:et.c)||0),"g \u2022 F ",Math.round(((At=Aa.totalsForMeal)==null?void 0:At.f)||0),"g"),React.createElement("div",{className:"mt-1 text-[11px] text-white/45 font-bold"},"Day total: ",Math.round(((ma=Aa.totalsForDay)==null?void 0:ma.cal)||0)," kcal")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3 max-h-[28vh] overflow-auto"},(Aa.itemsByMeal&&Aa.itemsByMeal[Aa.meal||Nn]||[]).slice(0,40).map((K,aa)=>React.createElement("div",{key:aa,className:"py-2 border-b border-white/5 last:border-b-0"},React.createElement("div",{className:"text-white/90 font-extrabold text-[12px]"},K.name||"Food item"),React.createElement("div",{className:"text-[11px] text-white/50 font-bold"},"Qty ",Number(K.qty||1)," \u2022 ",Math.round((Number(K.cal)||0)*Number(K.qty||1))," kcal"))),(Aa.itemsByMeal&&Aa.itemsByMeal[Aa.meal||Nn]||[]).length===0?React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"No items in this meal yet."):null)):React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-black"},(Aa==null?void 0:Aa.kind)||Rt),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},"Ready to log this entry.")),React.createElement("div",{className:"mt-4"},React.createElement("button",{type:"button",onClick:()=>{try{Qa("EDIT")}catch(K){}},className:"w-full rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 px-4 py-3 text-[12px] font-extrabold text-white/90"},"Edit")),React.createElement("button",{type:"button",onClick:()=>{try{nl()}catch(K){}try{Xt&&Xt()}catch(K){}},className:"mt-3 w-full rounded-2xl border border-white/12 bg-black/35 hover:bg-black/45 px-4 py-3 text-[12px] font-extrabold text-white/80"},"Done"))):null,pt==="SUMMARY"&&!Pi&&Ri?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-black text-[16px]"},Ri.kind==="FOOD"?"Food logged":Ri.kind==="BODY"?"Metrics logged":Ri.kind==="RECOVERY"?"Recovery logged":"Saved"),Ri.kind==="FOOD"?React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-bold leading-snug"},typeof yr=="function"?yr(Ri.meal||Nn):Ri.meal||Nn," \u2022 ",Math.round(((Je=Ri.totalsForMeal)==null?void 0:Je.cal)||0)," kcal \u2022 P ",Math.round(((Oa=Ri.totalsForMeal)==null?void 0:Oa.p)||0),"g \u2022 C ",Math.round(((He=Ri.totalsForMeal)==null?void 0:He.c)||0),"g \u2022 F ",Math.round(((Ca=Ri.totalsForMeal)==null?void 0:Ca.f)||0),"g",React.createElement("div",{className:"mt-1 text-[11px] text-white/45 font-bold"},"Day total: ",Math.round(((ha=Ri.totalsForDay)==null?void 0:ha.cal)||0)," kcal")):React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-bold leading-snug"},"Logged successfully.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] text-white/55 font-extrabold"},"DATE"),React.createElement("div",{className:"mt-1 text-white font-black text-[14px]"},ot))),Ri.kind==="FOOD"?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/25 p-3 max-h-[32vh] overflow-auto"},(Ri.itemsByMeal&&Ri.itemsByMeal[Ri.meal||Nn]||[]).length>0?(Ri.itemsByMeal&&Ri.itemsByMeal[Ri.meal||Nn]||[]).slice(0,60).map((K,aa)=>React.createElement("div",{key:aa,className:"py-2 border-b border-white/5 last:border-b-0"},React.createElement("div",{className:"text-white/90 font-extrabold text-[12px]"},K.name||"Food item"),React.createElement("div",{className:"text-[11px] text-white/50 font-bold"},"Qty ",Number(K.qty||1)," \u2022 ",Math.round((Number(K.cal)||0)*Number(K.qty||1))," kcal"))):React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"No foods were added.")):null,Ri.kind==="FOOD"?React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 bg-black/20 p-3"},React.createElement("button",{type:"button",onClick:()=>{try{Zi(K=>!K)}catch(K){}},className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-4 py-3"},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-white font-black text-[13px]"},"Full day breakdown"),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Breakfast \u2022 Lunch \u2022 Dinner \u2022 Snack")),React.createElement("div",{className:"inline-flex items-center gap-2 text-white/75 text-[12px] font-extrabold"},ns?"Hide":"Show",React.createElement(gi,{name:ns?"ChevronUp":"ChevronDown",size:16,className:"text-white/70"}))),ns?React.createElement("div",{className:"mt-3 space-y-3 max-h-[38vh] overflow-auto pr-1"},["BREAKFAST","LUNCH","DINNER","SNACK"].map(K=>{var aa=Ri.itemsByMeal&&Ri.itemsByMeal[K]||[],Mt=aa.reduce((la,xa)=>{var ei=Number(xa.qty||1);return la.cal+=(Number(xa.cal)||0)*ei,la.p+=(Number(xa.p)||0)*ei,la.c+=(Number(xa.c)||0)*ei,la.f+=(Number(xa.f)||0)*ei,la},{cal:0,p:0,c:0,f:0});return React.createElement("div",{key:K,className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black text-[13px]"},typeof yr=="function"?yr(K):K),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},Math.round(Mt.cal)," kcal \u2022 P ",Math.round(Mt.p),"g \u2022 C ",Math.round(Mt.c),"g \u2022 F ",Math.round(Mt.f),"g")),React.createElement("div",{className:"text-[11px] text-white/45 font-bold"},aa.length," item",aa.length===1?"":"s")),aa.length>0?React.createElement("div",{className:"mt-2 border-t border-white/8 pt-2 space-y-2"},aa.slice(0,12).map((la,xa)=>React.createElement("div",{key:xa,className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white/90 font-extrabold text-[12px] truncate"},la.name||"Food item"),React.createElement("div",{className:"text-[11px] text-white/50 font-bold"},"Qty ",Number(la.qty||1)," \u2022 ",Math.round((Number(la.cal)||0)*Number(la.qty||1))," kcal")),React.createElement("div",{className:"text-[11px] text-white/55 font-bold whitespace-nowrap"},"P ",Math.round((Number(la.p)||0)*Number(la.qty||1)),"g"))),aa.length>12?React.createElement("div",{className:"text-[11px] text-white/45 font-bold"},"+ ",aa.length-12," more\u2026"):null):React.createElement("div",{className:"mt-2 text-[12px] text-white/55 font-bold"},"No items logged."))})):null):null,React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Qa("EDIT"),_i(null)}catch(K){}},className:"flex-1 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-4 py-3 text-[12px] font-extrabold text-white/90"},"Log another"),React.createElement("button",{type:"button",onClick:()=>{try{nl()}catch(K){}try{Xt&&Xt()}catch(K){}},className:"flex-1 rounded-2xl border border-white/10 bg-white/10 hover:bg-white/14 px-4 py-3 text-[12px] font-extrabold text-white"},"Done")))):null,pt==="SUMMARY"?null:React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement(gi,{name:"CalendarDays",size:16,className:"text-white/70"}),React.createElement("div",{className:"text-[12px] text-white/80 font-extrabold"},ot)),React.createElement("button",{type:"button",onClick:s,className:"p-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8"},React.createElement(gi,{name:"X",size:16,className:"text-white/75"}))),Ft?React.createElement("div",{className:"flex gap-2 overflow-x-auto fof-hscroll pb-1"},React.createElement("div",{className:"min-w-[94px] px-3 py-2 rounded-2xl border text-[12px] font-extrabold inline-flex items-center justify-center gap-2 border-white/18 bg-white/12 text-white"},React.createElement(gi,{name:ut.icon,size:16,className:"text-white"}),ut.label)):React.createElement("div",{className:"flex gap-2 overflow-x-auto fof-hscroll pb-1"},React.createElement(Ht,{k:"WORKOUT",label:"Workout",icon:"Dumbbell"}),React.createElement(Ht,{k:"FOOD",label:"Food",icon:"Utensils"}),React.createElement(Ht,{k:"BODY",label:"Metrics",icon:"Activity"}),React.createElement(Ht,{k:"RECOVERY",label:"Recovery",icon:"Moon"})),Rt==="WORKOUT"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-black"},"Quick Log \u2014 Workout"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold leading-snug"},"For workouts you already completed. No live timer \u2014 just log what you did.")),React.createElement("button",{type:"button",onClick:()=>{try{nl()}catch(K){}try{Xt&&Xt()}catch(K){}setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"LOG"}}))}catch(K){}try{window.dispatchEvent(new CustomEvent("flowofit:openLogSubtab",{detail:{subtab:"WORKOUT"}}))}catch(K){}try{window.dispatchEvent(new CustomEvent("flowofit:openActiveWorkout",{detail:{source:"quicklog"}}))}catch(K){}},0)},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/8 text-[12px] text-white/90 font-extrabold inline-flex items-center gap-2",title:"Open the live workout tracker"},React.createElement(gi,{name:"Play",size:16,className:"text-white/80"}),Cs&&Cs.id?"Resume Live Tracker":"Start Live Tracker"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},"Exercises"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Add exercises and log sets (weight + reps).")),React.createElement("button",{type:"button",onClick:()=>gr(!0),className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 text-[12px] text-white/85 font-extrabold inline-flex items-center gap-2"},React.createElement(gi,{name:"Plus",size:16,className:"text-white/70"}),"Add")),!No||No.length===0?React.createElement("div",{className:"mt-3 text-[12px] text-amber-200/80 font-extrabold"},"Add at least one exercise to save this workout."):React.createElement("div",{className:"mt-3 space-y-3"},(No||[]).map(K=>{var aa=Array.isArray(K.sets)&&K.sets.length?K.sets:[{weight:"",reps:""}];return React.createElement("div",{key:K.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},K.name),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Log your sets (weight + reps)")),React.createElement("button",{type:"button",onClick:()=>Ie(K.id),className:"h-8 w-8 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-white/70 font-black",title:"Remove exercise"},"\xD7")),React.createElement("div",{className:"mt-3 space-y-2"},aa.map((Mt,la)=>React.createElement("div",{key:la,className:"grid grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"col-span-2 text-[11px] text-white/45 font-black"},"#",la+1),React.createElement("div",{className:"col-span-4"},React.createElement(Nt,{placeholder:"kg",value:Mt.weight,onChange:xa=>u(K.id,la,"weight",xa.target.value)})),React.createElement("div",{className:"col-span-4"},React.createElement(Nt,{placeholder:"reps",value:Mt.reps,onChange:xa=>u(K.id,la,"reps",xa.target.value),onKeyDown:xa=>{xa.key==="Enter"&&(xa.preventDefault(),ue(K.id))}})),React.createElement("div",{className:"col-span-2 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>tt(K.id,la),className:"h-8 w-8 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-white/70 font-black",title:"Remove set"},"\u2013")))),React.createElement("div",{className:"flex gap-2 pt-1"},React.createElement("button",{type:"button",onClick:()=>$(K.id),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/85"},"+ Set"))))}))),_n?React.createElement(Wd,{open:!0,query:Wn,setQuery:nr,onPick:K=>x(K),onClose:()=>{try{gr(!1)}catch(K){}}}):null,React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("button",{type:"button",onClick:()=>{try{To(K=>!K)}catch(K){}},className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/25 px-4 py-3"},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-white font-black text-[13px]"},"Notes ",React.createElement("span",{className:"text-white/50 font-extrabold"},"(optional)")),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Tap to ",Js?"hide":"add"," notes")),React.createElement("div",{className:"inline-flex items-center gap-2 text-white/75 text-[12px] font-extrabold"},Js?"Hide":"Add",React.createElement(gi,{name:Js?"ChevronUp":"ChevronDown",size:16,className:"text-white/70"}))),Js?React.createElement("div",{className:"mt-3"},React.createElement(Wl,{placeholder:"Anything notable: PRs, pain notes, cues, how it felt\u2026",value:xt,onChange:K=>li(K.target.value)})):null,React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"mb-2"},React.createElement("div",{className:"text-white font-black text-[13px]"},"Duration"),React.createElement("div",{className:"text-[10px] text-white/55 font-bold"},"Manual duration")),React.createElement(md,{value:us,setValue:Hi,step:5,min:0,max:240})),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"mb-2"},React.createElement("div",{className:"text-white font-black text-[13px]"},"Effort"),React.createElement("div",{className:"text-[10px] text-white/55 font-bold"},"How hard was it?")),React.createElement(md,{value:wi,setValue:Is,step:1,min:1,max:10}))))):null,Rt==="FOOD"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex gap-2 overflow-x-auto fof-hscroll pb-1"},["BREAKFAST","LUNCH","DINNER","SNACK"].map(K=>React.createElement("button",{key:K,type:"button",onClick:()=>fl(K),className:["px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition",Nn===K?"border-white/18 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},yr(K)))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},"Today\u2019s totals"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Calories + macros across all meals.")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-white font-black text-[18px] leading-none"},Math.round(fr.cal||0)),React.createElement("div",{className:"text-[11px] text-white/45 font-bold"},"kcal"))),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-bold"},"Protein"),React.createElement("div",{className:"text-white font-black text-[14px]"},Math.round(fr.p||0),"g")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-bold"},"Carbs"),React.createElement("div",{className:"text-white font-black text-[14px]"},Math.round(fr.c||0),"g")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-bold"},"Fat"),React.createElement("div",{className:"text-white font-black text-[14px]"},Math.round(fr.f||0),"g")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black"},yr(Nn)),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},Math.round(wn.cal||0)," kcal \u2022 P ",Math.round(wn.p||0),"g \u2022 C ",Math.round(wn.c||0),"g \u2022 F ",Math.round(wn.f||0),"g")),React.createElement("button",{type:"button",onClick:()=>_l(K=>!K),className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/6 text-[12px] font-extrabold text-white/90 hover:bg-white/10 inline-flex items-center gap-2"},React.createElement(gi,{name:"Plus",size:16,className:"text-white/70"}),"Add Food")),React.createElement("div",{className:"mt-3"},React.createElement(Yd,{open:sl,onClose:()=>_l(!1),foodQuery:ul,setFoodQuery:yl,foodRecent:kl,foodDB:In,foodDraft:Kn,setFoodDraft:jn,addFoodToMeal:Vl,meal:Nn})),sl?null:React.createElement("div",{className:"mt-3 space-y-2"},Jn&&Jn.length>0?Jn.map((K,aa)=>{var Mt=`${K.id||"x"}-${aa}`;return React.createElement("div",{key:Mt,className:"rounded-2xl border border-white/10 bg-white/4 p-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold truncate"},K.name||"Food item"),React.createElement("div",{className:"text-[11px] text-white/45 font-bold truncate"},K.brand||"Generic"," \u2022 ",K.serving||"serving"," \u2022 ",Math.round((Number(K.cal)||0)*Number(K.qty||1))," kcal"),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-bold"},"Qty ",Number(K.qty||1)," \u2022 P ",Math.round((Number(K.p)||0)*Number(K.qty||1)),"g \u2022 C ",Math.round((Number(K.c)||0)*Number(K.qty||1)),"g \u2022 F ",Math.round((Number(K.f)||0)*Number(K.qty||1)),"g")),React.createElement("button",{type:"button",onClick:()=>sd(Nn,Mt),className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 inline-flex items-center justify-center",title:"Remove"},React.createElement(gi,{name:"Trash2",size:16,className:"text-white/70"})))}):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-4"},React.createElement("div",{className:"text-white font-black"},"No foods yet"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Tap \u201CAdd Food\u201D to log this meal.")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-black"},"Quick Add Item"),React.createElement("div",{className:"text-[12px] text-white/55 font-bold"},"Fill this and press ",React.createElement("span",{className:"text-white/80"},"Save")," to log a single food entry into your diary."),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement("input",{placeholder:"Food name (e.g., Greek yogurt)",value:Nl,onChange:K=>Ko(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}),React.createElement("input",{placeholder:"Serving (optional)",value:il,onChange:K=>Cr(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("input",{inputMode:"numeric",placeholder:"Calories",value:Mn,onChange:K=>Gr(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}),React.createElement("input",{inputMode:"numeric",placeholder:"Protein (g)",value:En,onChange:K=>Ir(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}),React.createElement("input",{inputMode:"numeric",placeholder:"Carbs (g)",value:Yn,onChange:K=>ml(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}),React.createElement("input",{inputMode:"numeric",placeholder:"Fat (g)",value:vr,onChange:K=>Sl(K.target.value),className:"w-full px-3 py-3 rounded-2xl border border-white/10 bg-white/5 text-white placeholder:text-white/35 font-bold focus:outline-none focus:ring-2 focus:ring-white/10"}))),React.createElement(Yl,{label:"Notes (optional)"},React.createElement(Wl,{placeholder:"Hunger, digestion, cravings\u2026 notes\u2026",value:xt,onChange:K=>li(K.target.value)}))):null,Rt==="BODY"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex gap-2 overflow-x-auto fof-hscroll pb-1"},[{k:"WEIGHT",label:"Weight",icon:"Scale"},{k:"BODYFAT",label:"Body Fat",icon:"Percent"},{k:"WAIST",label:"Waist",icon:"Ruler"}].map(K=>React.createElement("button",{key:K.k,type:"button",onClick:()=>od(K.k),className:["px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition inline-flex items-center gap-2",Vn===K.k?"border-white/18 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},React.createElement(gi,{name:K.icon,size:16,className:Vn===K.k?"text-white":"text-white/60"}),K.label))),Vn==="WEIGHT"?React.createElement(Q,{label:"Weight",hint:"kg"},React.createElement(w,{value:Rr,setValue:nd,step:.5,min:0,max:400,suffix:"kg"})):null,Vn==="BODYFAT"?React.createElement(Q,{label:"Body Fat",hint:"%"},React.createElement(w,{value:pl,setValue:rd,step:.5,min:0,max:80,suffix:"%"})):null,Vn==="WAIST"?React.createElement(Q,{label:"Waist",hint:"cm"},React.createElement(w,{value:bl,setValue:El,step:.5,min:0,max:200,suffix:"cm"})):null,React.createElement(Q,{label:"Notes (optional)"},React.createElement(U,{placeholder:"Measurement context\u2026",value:xt,onChange:K=>li(K.target.value)}))):null,Rt==="RECOVERY"?React.createElement("div",{className:"space-y-3"},React.createElement(Q,{label:"Sleep",hint:"hours"},React.createElement(w,{value:Nr,setValue:Fn,step:.5,min:0,max:16,suffix:"hrs"})),React.createElement(Q,{label:"Soreness",hint:`${Sr}/10`},React.createElement("input",{type:"range",min:"1",max:"10",value:Sr,onChange:K=>ol(Number(K.target.value||0)),className:"w-full"}),React.createElement("div",{className:"mt-1 flex justify-between text-[10px] text-white/35 font-bold"},React.createElement("span",null,"Fresh"),React.createElement("span",null,"Very sore"))),React.createElement(Q,{label:"Stress",hint:`${zr}/10`},React.createElement("input",{type:"range",min:"1",max:"10",value:zr,onChange:K=>Al(Number(K.target.value||0)),className:"w-full"}),React.createElement("div",{className:"mt-1 flex justify-between text-[10px] text-white/35 font-bold"},React.createElement("span",null,"Calm"),React.createElement("span",null,"High"))),React.createElement(Q,{label:"Notes (optional)"},React.createElement(U,{placeholder:"Injuries, stressors, recovery plan\u2026",value:xt,onChange:K=>li(K.target.value)}))):null,React.createElement("div",{className:"mb-3 rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white/85 font-extrabold text-[12px]"},"Summary"),React.createElement("div",{className:"text-[9px] text-white/40 font-extrabold"},"AUTO")),React.createElement("div",{className:"mt-2 grid grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-2 py-2"},React.createElement("div",{className:"text-[9px] text-white/50 font-extrabold leading-none"},"EX"),React.createElement("div",{className:"mt-1 text-white font-black text-[13px] leading-none"},(No||[]).length)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-2 py-2"},React.createElement("div",{className:"text-[9px] text-white/50 font-extrabold leading-none"},"SETS"),React.createElement("div",{className:"mt-1 text-white font-black text-[13px] leading-none"},B.sets||0)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-2 py-2"},React.createElement("div",{className:"text-[9px] text-white/50 font-extrabold leading-none"},"DUR"),React.createElement("div",{className:"mt-1 text-white font-black text-[13px] leading-none"},us?`${us}m`:"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-2 py-2"},React.createElement("div",{className:"text-[9px] text-white/50 font-extrabold leading-none"},"EFF"),React.createElement("div",{className:"mt-1 text-white font-black text-[13px] leading-none"},Number(wi||0)?`${Number(wi||0)}/10`:"\u2014")))),React.createElement("div",{className:"pt-1"},React.createElement("button",{type:"button",onClick:save,className:"w-full rounded-3xl border border-emerald-400/25 bg-emerald-500/15 hover:bg-emerald-500/20 px-4 py-4 text-[14px] font-black text-emerald-100 shadow-[0_18px_45px_rgba(0,0,0,0.45)]"},"Save to Track",React.createElement("div",{className:"text-[11px] font-bold text-emerald-200/80"},"Instantly updates your history")),pn?React.createElement("div",{className:"fixed inset-0 z-[999] flex items-end justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{try{Bo(!1)}catch(K){}}}),React.createElement("div",{className:"relative mb-[max(12px,env(safe-area-inset-bottom))] w-[92vw] max-w-[560px] rounded-3xl border border-white/12 bg-[#0B0F1A]/95 p-4 shadow-2xl"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-black text-[16px]"},"Workout Summary"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},"Review before saving to Track.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{var K=typeof __fof_getClientContextSafe=="function"?__fof_getClientContextSafe():window.__FOF_CLIENT_CONTEXT||{},aa=String(K&&K.tier?K.tier:"FREE").toUpperCase(),Mt={pdf:aa==="FREE"},la=(No||[]).reduce((ei,di)=>ei+(Array.isArray(di.sets)?di.sets.length:0),0),xa={kind:"WORKOUT_SUMMARY",sheetTitle:"Share & Export",kicker:"Workout",title:workoutTitle||"Workout",subtitle:"Session summary",stats:[{label:"Exercises",value:String((No||[]).length)},{label:"Sets",value:String(la)},{label:"Duration",value:us?`${us}`:"\u2014"},{label:"Effort",value:wi?`${Number(wi||0)}`:"\u2014"}],lines:[totalVolume?`Volume: ${Math.round(Number(totalVolume)||0).toLocaleString()} kg`:null,noteText?`Note: ${String(noteText).slice(0,80)}`:null].filter(Boolean),metaChips:[aa==="PAID"?"Premium":aa==="TRIAL"?"Trial":"Free","No raw logs shared"],locks:Mt,paywallFeatureKey:"Share & Export",meta:{coachApproved:!1,source:"WORKOUT_SUMMARY"}};if(typeof window.__fof_openShareExport=="function")window.__fof_openShareExport(xa);else try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"SHARE_EXPORT_SHEET_V1",props:{payload:xa}}}))}catch(ei){}}catch(K){}},className:"h-9 px-3 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/85 hover:bg-white/10"},"Share"),React.createElement("button",{type:"button",onClick:()=>{try{Bo(!1)}catch(K){}},className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center"},React.createElement(gi,{name:"X",size:16,className:"text-white/75"})))),React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] text-white/55 font-black"},"Exercises"),React.createElement("div",{className:"text-[14px] text-white font-black"},(No||[]).length)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] text-white/55 font-black"},"Total sets"),React.createElement("div",{className:"text-[14px] text-white font-black"},(No||[]).reduce((K,aa)=>K+(Array.isArray(aa.sets)?aa.sets.length:0),0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] text-white/55 font-black"},"Duration"),React.createElement("div",{className:"text-[14px] text-white font-black"},us?`${us} min`:"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] text-white/55 font-black"},"Effort"),React.createElement("div",{className:"text-[14px] text-white font-black"},wi||"\u2014"))),xt?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] text-white/55 font-black"},"Notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80 font-semibold whitespace-pre-wrap"},xt)):null,React.createElement("div",{className:"mt-4 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Bo(!1)}catch(K){}},className:"flex-1 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-[13px] font-extrabold text-white/85"},"Keep editing"),React.createElement("button",{type:"button",onClick:()=>{try{Bo(!1)}catch(K){}try{W()}catch(K){}},className:"flex-1 rounded-2xl bg-emerald-400 hover:bg-emerald-300 px-4 py-3 text-[13px] font-extrabold text-black shadow-[0_18px_45px_rgba(0,0,0,0.45)]"},"Save workout")))):null,React.createElement("button",{type:"button",onClick:s,className:"mt-2 w-full rounded-3xl border border-white/10 bg-white/5 hover:bg-white/8 px-4 py-3 text-[13px] font-extrabold text-white/80"},"Cancel"))))),React.createElement(fd,{open:Gt,title:"Discard log?",message:"You have unsaved input. Discard it and close?",onClose:()=>{try{fa(!1)}catch(K){}},onKeep:()=>{try{fa(!1)}catch(K){}},onDiscard:()=>{try{fa(!1)}catch(K){}try{nl()}catch(K){}try{Xt&&Xt()}catch(K){}}}))},oc=({devMode:ee,emits:ge=[]})=>{if(!ee||!ge||ge.length===0)return null;var bt=ge.join(", ");return React.createElement("span",{className:"ml-2 inline-flex items-center gap-1 rounded-full border border-midnight-600 bg-midnight-900/70 px-2 py-[2px] text-[10px] font-mono text-slate-300"},React.createElement(gi,{name:"Bug",size:12}),"Emits: ",bt)},Sd=({devMode:ee,onToggle:ge})=>{var[bt,rt]=React.useState(()=>vd.read());if(React.useEffect(()=>{if(!ee)return;var lt=setInterval(()=>{try{var mt=vd.read();rt(mt)}catch(mt){}},500);return()=>clearInterval(lt)},[ee]),!ee)return null;var Xt=(bt||[]).slice(-8).reverse();return React.createElement("div",{className:"fixed bottom-4 right-4 z-[998] w-[360px] max-w-[calc(100vw-2rem)]"},React.createElement("div",{className:"glass-panel border border-midnight-700 rounded-3xl p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(gi,{name:"Bug",size:16,className:"text-emerald-300"}),React.createElement("div",{className:"text-sm font-bold text-white"},"Dev Mode"),React.createElement("span",{className:"text-[10px] font-mono text-slate-400"},"debug badges + live events")),React.createElement("button",{onClick:ge,className:"px-3 py-1.5 rounded-xl bg-midnight-900 border border-midnight-700 hover:border-emerald-500 text-xs text-slate-200 hover:text-white"},"Turn Off")),React.createElement("div",{className:"mt-3 max-h-[220px] overflow-auto space-y-2"},Xt.length===0?React.createElement("div",{className:"text-xs text-slate-400"},"No events yet. Perform any action to see events."):Xt.map((lt,mt)=>React.createElement("div",{key:mt,className:"rounded-2xl border border-midnight-800 bg-midnight-950/60 p-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono text-slate-100"},lt.event||lt.event_name||"event"),React.createElement("div",{className:"text-[10px] text-slate-500"},(lt.timestamp||"").toString().slice(11,19))),lt.payload&&React.createElement("div",{className:"mt-1 text-[10px] text-slate-400 line-clamp-2"},JSON.stringify(lt.payload))))),React.createElement("div",{className:"mt-3 text-[10px] text-slate-400"},"Tip: Use Admin \u2192 Advanced Analytics to verify funnels & audit events. Dev Mode never shows to real users.")))},_d=({data:ee,onClose:ge})=>ee?React.createElement("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/70 p-4 modal-overlay",onMouseDown:ge},React.createElement("div",{className:"w-full max-w-xl glass-panel rounded-3xl p-6 border border-midnight-700 bg-midnight-900 modal-card",onMouseDown:bt=>bt.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono text-slate-400 uppercase tracking-widest"},"Info"),React.createElement("h3",{className:"text-lg font-bold text-white"},Kl(ee.title))),React.createElement("button",{onClick:ge,className:"p-2 rounded-xl hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(gi,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 text-sm text-slate-200 whitespace-pre-wrap leading-relaxed"},Kl(ee.body)),ee.meta&&Object.keys(ee.meta).length>0&&React.createElement("div",{className:"mt-4 bg-midnight-950 border border-midnight-700 rounded-2xl p-3 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Metadata"),React.createElement("pre",{className:"whitespace-pre-wrap"},JSON.stringify(ee.meta,null,2))),React.createElement("div",{className:"mt-5 flex justify-end"},React.createElement("button",{onClick:ge,className:"px-4 py-2 rounded-xl bg-brand text-white text-sm font-semibold hover:bg-brand/90"},"Close")))):null,kd=({open:ee,onClose:ge})=>ee?React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4"},React.createElement("div",{className:"glass-panel max-w-lg w-full rounded-3xl p-6 border border-emerald-500/40 bg-midnight-900"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(gi,{name:"Watch",size:20,className:"text-emerald-400"}),React.createElement("h2",{className:"text-lg font-semibold text-white"},"Connect your wearables")),React.createElement("button",{type:"button",onClick:ge,className:"p-1 rounded-full hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(gi,{name:"X",size:16}))),React.createElement("p",{className:"text-xs text-slate-400 mb-4"},"This preview mirrors your WearableConnectionFlow: in production we would securely connect to Apple Health, Google Fit, Garmin and other providers, then stream steps, sleep, HRV and workout data into your daily tiles, Trainer dashboards and AI Hub."),React.createElement("div",{className:"grid grid-cols-2 gap-3 mb-4 text-xs"},React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(gi,{name:"Apple",size:14})," Apple Health"),React.createElement("span",{className:"text-[10px] text-slate-500"},"iPhone / Apple Watch")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(gi,{name:"Activity",size:14})," Google Fit"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Android & WearOS")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(gi,{name:"Watch",size:14})," Garmin / Polar"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Sports watches & head units")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(gi,{name:"CircleDot",size:14})," WHOOP / Oura"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Recovery & capacity wearables"))),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-3 mb-4 text-[11px] text-slate-400"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"font-semibold text-slate-200"},"Data used in:")),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Client dashboard tiles (Recovery / Strain / Calories)"),React.createElement("li",null,"Trainer panels such as Linked client capacity score and Daily Use views"),React.createElement("li",null,"Admin TSS scores, AI Hub risk models and Unified_AI_Triage signals"))),React.createElement("button",{type:"button",onClick:()=>{eo("wearable.connected",{provider:"demo_multi"}),Si("Wearables connected",`This is a functional UI step.

Behind the scenes (real build): OAuth/permissions per provider, provider health checks, and a wearable.sync.summary event (daily) that rolls up into capacity score, recovery tiles, trainer dashboards, and Admin Advanced Analytics.`),ge&&ge()},className:"w-full py-2.5 rounded-2xl bg-emerald-500 text-midnight-950 text-sm font-semibold hover:bg-emerald-400 transition-colors flex items-center justify-center gap-2"},React.createElement(gi,{name:"CheckCircle2",size:18})," Mark wearables as connected"),React.createElement("p",{className:"mt-1.5 text-[10px] text-slate-500 text-center"},"In a real build this is where OAuth / permissions, error states and per-tenant provider toggles would live."))):null,bd=({children:ee,onBack:ge,onHome:bt,canGoBack:rt,devMode:Xt,toggleDevMode:lt})=>React.createElement("div",{className:"min-h-screen w-full bg-midnight-950 bg-mesh text-slate-100 font-sans flex flex-col relative"},Xt&&React.createElement(Sd,{devMode:Xt,onToggle:lt}),React.createElement("div",{className:"fixed inset-0 bg-glow pointer-events-none z-0"}),React.createElement("div",{className:"fixed top-4 left-4 z-50 flex gap-2"},React.createElement("button",{onClick:bt,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Reset & Home"},React.createElement(gi,{name:"Home",size:20})),rt&&React.createElement("button",{onClick:ge,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Go Back"},React.createElement(gi,{name:"ArrowLeft",size:20}))),React.createElement("div",{className:"relative z-10 flex-1 flex flex-col"},ee));function Kl(ee,ge=""){return typeof ee=="string"||typeof ee=="number"?ee:ge}function id(ee,ge=""){try{if(typeof React!="undefined"&&React.isValidElement&&React.isValidElement(ee))return ee}catch(bt){}return Kl(ee,ge)}var Kd=({label:ee,subtext:ge,onComplete:bt})=>{var[rt,Xt]=si(!1);return Ii(()=>{var lt=setTimeout(bt,1500);return()=>clearTimeout(lt)},[bt]),React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-1 flex flex-col items-center justify-center min-h-screen bg-midnight-950"},React.createElement("div",{className:"relative mb-6"},React.createElement("div",{className:"w-16 h-16 border-4 border-midnight-700 border-t-brand rounded-full animate-spin"}),React.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},React.createElement(gi,{name:"Cpu",className:"text-brand"}))),React.createElement("h2",{className:"text-xl font-mono font-bold tracking-widest uppercase text-white animate-pulse"},id(ee)),ge&&React.createElement("p",{className:"text-slate-400 mt-2 text-sm"},id(ge))),React.createElement(kd,{open:rt,onClose:()=>Xt(!1)}))},jd=({title:ee,step:ge,total:bt,children:rt,onBack:Xt,onHome:lt,canGoBack:mt})=>React.createElement(bd,{onBack:Xt,onHome:lt,canGoBack:mt},React.createElement("div",{className:"relative z-10 flex-1 flex flex-col"},React.createElement("div",{className:"mx-auto w-full max-w-6xl px-4 pt-6 pb-6 space-y-4"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-2xl px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-midnight-950 border border-white/12 flex items-center justify-center shrink-0"},React.createElement("span",{className:"font-display font-extrabold text-white text-[14px]"},"F")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] truncate"},id(ee)),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},"Goal-centric client onboarding"))),React.createElement("div",{className:"flex items-center gap-2 shrink-0 flex-wrap justify-end"},bt>0&&React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/12 bg-white/5 px-3 py-1.5 text-[12px] font-semibold text-white/90"},"STEP ",ge,"/",bt),mt&&React.createElement("button",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-300/25 bg-emerald-400/10 px-3 py-1.5 text-[12px] font-semibold text-emerald-100 hover:bg-emerald-400/15 transition",onClick:Xt},"Back"))),bt>0&&React.createElement("div",{className:"h-1.5 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-emerald-400/90 transition-all duration-500",style:{width:ge/bt*100+"%"}})),React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5 md:p-7 overflow-hidden max-h-[82vh]"},React.createElement("div",{className:"max-h-[76vh] overflow-y-auto pr-1"},rt))))),Ed=({open:ee,presetQuery:ge="",actions:bt=[],onClose:rt,onSelect:Xt})=>{var[lt,mt]=React.useState(ge||""),[kt,Ft]=React.useState(0),Rt=React.useRef(null);React.useEffect(()=>{if(!ee)return;var pt=setTimeout(()=>{try{Rt.current&&Rt.current.focus&&Rt.current.focus()}catch(Qa){}},0);return()=>clearTimeout(pt)},[ee]);var ea=pt=>(pt||"").toLowerCase(),Gt=React.useMemo(()=>{var pt=ea(lt).trim();return pt?bt.map(Qa=>({a:Qa,score:(ea(Qa.title).includes(pt)?3:0)+(ea(Qa.keywords||"").includes(pt)?2:0)+(ea(Qa.group||"").includes(pt)?1:0)})).filter(Qa=>Qa.score>0).sort((Qa,Pi)=>Pi.score-Qa.score).map(Qa=>Qa.a):bt},[bt,lt]);if(React.useEffect(()=>{Ft(0)},[lt]),React.useEffect(()=>{if(!ee)return;var pt=Qa=>{if(Qa.key==="Escape"){Qa.preventDefault(),rt&&rt();return}if(Qa.key==="ArrowDown"){Qa.preventDefault(),Ft(Pi=>Math.min(Pi+1,Math.max(0,Gt.length-1)));return}if(Qa.key==="ArrowUp"){Qa.preventDefault(),Ft(Pi=>Math.max(0,Pi-1));return}if(Qa.key==="Enter"){var Pi=Gt[kt];if(Pi){Qa.preventDefault();try{Xt&&Xt(Pi)}catch(Bs){}}}};return window.addEventListener("keydown",pt),()=>window.removeEventListener("keydown",pt)},[ee,Gt,kt,rt,Xt]),!ee)return null;var fa=React.useMemo(()=>{var pt={};return(Gt||[]).forEach(Qa=>{var Pi=Qa.group||"General";pt[Pi]||(pt[Pi]=[]),pt[Pi].push(Qa)}),Object.entries(pt)},[Gt]);return React.createElement("div",{className:"fixed inset-0 z-[9999]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>rt&&rt(),"aria-label":"Close search",role:"button"}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-4 pb-[max(16px,env(safe-area-inset-bottom))]"},React.createElement("div",{className:"rounded-t-[28px] rounded-b-[24px] border border-white/12 bg-zinc-950/85 backdrop-blur-xl shadow-2xl overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-white font-extrabold tracking-tight"},"Search"),React.createElement("button",{type:"button",onClick:()=>rt&&rt(),className:"touch-manipulation h-9 px-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/80"},"Close")),React.createElement("div",{className:"mt-3 flex items-center gap-2 rounded-2xl border border-white/12 bg-black/30 px-3 py-2"},React.createElement("span",{className:"text-white/55"},"\u{1F50E}"),React.createElement("input",{ref:Rt,value:lt,onChange:pt=>mt(pt.target.value),placeholder:"Search actions\u2026 (e.g., Plan, Log, Coach)",className:"w-full bg-transparent text-white placeholder:text-white/35 outline-none text-[15px]","aria-label":"Search"}))),React.createElement("div",{className:"max-h-[70vh] overflow-auto"},Gt.length===0?React.createElement("div",{className:"p-6 text-white/60 text-[13px]"},"No matches. Try another keyword."):React.createElement("div",{className:"p-2"},fa.map(([pt,Qa])=>React.createElement("div",{key:pt,className:"mb-2"},React.createElement("div",{className:"px-3 py-2 text-[11px] uppercase tracking-wider text-white/35"},pt),React.createElement("div",{className:"space-y-1"},Qa.map(Pi=>{var Bs=Gt.findIndex(ja=>ja.id===Pi.id),Ba=Bs===kt;return React.createElement("button",{key:Pi.id,type:"button",className:"w-full text-left px-3 py-3 rounded-2xl border "+(Ba?"border-white/18 bg-white/8":"border-transparent hover:border-white/10 hover:bg-white/5"),onMouseEnter:()=>Ft(Bs),onClick:()=>{try{Xt&&Xt(Pi)}catch(ja){}}},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] text-white"},Pi.title),Pi.subtitle?React.createElement("div",{className:"text-[12px] text-white/45 mt-0.5"},Pi.subtitle):null),Pi.badge?React.createElement("div",{className:"text-[11px] text-white/65 border border-white/10 rounded-xl px-2 py-1"},Pi.badge):null))})))))))))};return{VitaminClientApp:({onLogout:ee,initialClientMode:ge="INDEPENDENT",initialDashboardType:bt="INDEPENDENT",initialEntryStep:rt="HOME",initialStartMode:Xt=null,initialIndependentTier:lt="TRIAL",coachContext:mt=null})=>{var kt=()=>ge==="LINKED"?"LINKED":ge==="INDEPENDENT"?"INDEPENDENT":bt==="LINKED"||bt==="HYBRID"?"LINKED":"INDEPENDENT",[Ft,Rt]=React.useState(kt()),[ea,Gt]=React.useState(rt==="PLAN"?"PLAN":"HOME"),fa=Gt,pt=(e,a={})=>{try{var r=String(e||""),c=String(a.trackSeg||"").toUpperCase(),h=["WORKOUT","NUTRITION","HEALTH","INSIGHTS"].includes(c)?c:null;r==="INSIGHTS"||r===xt.INSIGHTS?window.__fof_trackHubPage="INSIGHTS":r==="LOG"||r===xt.LOG?window.__fof_trackHubPage=h||"WORKOUT":(r==="TRACK"||r===xt.TRACK)&&h&&(window.__fof_trackHubPage=h)}catch(r){}fa(e)};try{window.__fof_navigateTab=(e,a={})=>{try{pt(e,a)}catch(r){try{fa(e)}catch(c){}}}}catch(e){}React.useEffect(()=>{try{window.__fof_openLibraryDeepLink=(e="FOR_YOU",a={})=>{try{var r=window.__FOF_CLIENT_CONTEXT||null,c=r&&r.entitlements?String(r.entitlements.yogaAccess||""):"";if(String(e||"FOR_YOU").toUpperCase()==="YOGA"&&String(c).toUpperCase()!=="FULL"){try{_n&&_n("YOGA_ADDON",{from:a&&a.source?String(a.source):"LIBRARY_DEEPLINK",yogaAccess:c||"NONE"})}catch(V){}return}}catch(r){}try{var r={filter:String(e||"FOR_YOU").toUpperCase(),query:a&&a.query?String(a.query):"",ts:Date.now(),source:a&&a.source?String(a.source):""};localStorage.setItem("fof_library_deeplink_v1",JSON.stringify(r))}catch(r){}try{window.dispatchEvent(new CustomEvent("fof:libraryDeeplink"))}catch(r){}try{pt(xt.LIBRARY)}catch(r){}}}catch(e){}return()=>{try{delete window.__fof_openLibraryDeepLink}catch(e){}}},[]);var[Qa,Pi]=React.useState(!1),[Bs,Ba]=React.useState(""),[ja,Aa]=React.useState(null),Ci=()=>{try{Aa(null)}catch(e){}try{setTimeout(()=>{var e=null;try{e=window.__fof_pendingOpenLiveWorkout||null}catch(a){}if(!e)try{var a=localStorage.getItem("fof_pending_open_live_workout_v1");e=a&&JSON.parse(a)||null}catch(a){e=null}if(e){try{window.__fof_pendingOpenLiveWorkout=null}catch(a){}try{localStorage.removeItem("fof_pending_open_live_workout_v1")}catch(a){}try{window.dispatchEvent(new CustomEvent("flowofit:openLiveWorkoutFromHistory",{detail:{item:e}}))}catch(a){}}},80)}catch(e){}},Ri=(e=null)=>{try{Aa({key:"NUTRITION_LOGGER",props:{dateKey:e}})}catch(a){}},_i=(e=null)=>{try{Aa({key:"WORKOUT_LOGGER",props:{dateKey:e}})}catch(a){}},[ns,Zi]=React.useState(null);React.useEffect(()=>{var e=a=>{try{var r=a&&a.detail?a.detail:{};if(!r)return;Zi({title:r.title||"Info",body:r.body||"",meta:r.meta||{}})}catch(r){}};try{window.addEventListener("flowofit:info",e)}catch(a){}return()=>{try{window.removeEventListener("flowofit:info",e)}catch(a){}}},[]);var ci=(e="")=>{try{Ba(e||"")}catch(a){}Pi(!0)},Cs=()=>{Pi(!1);try{Ba("")}catch(e){}};React.useEffect(()=>{var e=a=>{try{var r=a&&a.detail?a.detail:{};ci(r&&r.preset?String(r.preset):"")}catch(r){}};try{window.addEventListener("flowofit:openCommandBar",e)}catch(a){}return()=>{try{window.removeEventListener("flowofit:openCommandBar",e)}catch(a){}}},[]);var xt={TODAY:"TODAY",PLAN:"PLAN",TRACK:"TRACK",COACH:"COACH",COMMUNITY:"COMMUNITY",LOG:"LOG",INSIGHTS:"INSIGHTS",PROFILE:"PROFILE",LIBRARY:"LIBRARY"},li=e=>e==="HOME"?xt.TODAY:e===xt.LOG||e==="LOG"||e==="TRACK"||e===xt.INSIGHTS||e==="INSIGHTS"?xt.TRACK:e;React.useEffect(()=>{var e=a=>{var r=(a.key||"").toLowerCase()==="k",c=!!a.metaKey,h=!!a.ctrlKey;r&&(h||c)&&(a.preventDefault(),ci(""))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),React.useEffect(()=>{var e=c=>{var h=c&&c.detail?c.detail:{};if(!(!h||!h.key)){try{var V=String(h.key||""),de=h.props||{};if(V==="WORKOUT_LOGGER"&&!(de&&de.__precheckBypass)&&window.__fof_openers&&typeof window.__fof_openers.openWorkoutLogger=="function"){var M=de&&(de.dateKey||de.dk)?de.dateKey||de.dk:null;window.__fof_openers.openWorkoutLogger(M,{from:de&&de.from?de.from:"OPEN_OVERLAY"});return}}catch(V){}try{Aa({key:h.key,props:h.props||{}})}catch(V){}}},a=c=>{var h=c&&c.detail?c.detail:{},V=h&&h.to?String(h.to).toUpperCase():"";if(V&&(V==="TODAY"&&pt(xt.TODAY),V==="PLAN"&&pt(xt.PLAN),(V==="LOG"||V==="TRACK")&&pt(xt.TRACK),V==="COACH"&&pt(xt.COACH),V==="COMMUNITY"&&pt(xt.COMMUNITY),V==="INSIGHTS")){try{pt(xt.TRACK)}catch(de){}try{window.dispatchEvent(new CustomEvent("flowofit:openLogSubtab",{detail:{subtab:"INSIGHTS"}}))}catch(de){}}},r=()=>{try{wi()}catch(c){}};try{window.addEventListener("flowofit:openOverlay",e)}catch(c){}try{window.addEventListener("flowofit:navigateIntent",a)}catch(c){}try{window.addEventListener("flowofit:openProfile",r)}catch(c){}return()=>{try{window.removeEventListener("flowofit:openOverlay",e)}catch(c){}try{window.removeEventListener("flowofit:navigateIntent",a)}catch(c){}try{window.removeEventListener("flowofit:openProfile",r)}catch(c){}}},[]);var[us,Hi]=React.useState(null),wi=()=>{try{Hi(li(ea))}catch(e){Hi(xt.TODAY)}pt(xt.PROFILE)},Is=()=>{var e=us||xt.TODAY;Hi(null),pt(e)},Js=li(ea),[To,pn]=React.useState(()=>({PLAN:!1,TRACK:!1,COACH:kt()==="LINKED",COMMUNITY:!1}));React.useEffect(()=>{try{if(!Js)return;pn(e=>e&&e[Js]?{...e,[Js]:!1}:e)}catch(e){}},[Js]),Ii(()=>{try{window.__FOF=window.__FOF||{},window.__FOF.setClientTab=e=>pt(e),window.__FOF.getClientTab=()=>Js,window.__FOF.getPersona=()=>zo,window.__FOF._getGoalOverride=()=>js,window.__FOF.setPersona=(e={})=>{try{if(e.clientMode&&Rt(String(e.clientMode).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT"),e.tier&&dn(String(e.tier).toUpperCase()),e.goalCategory){var a=String(e.goalCategory).toUpperCase();Qo(a);try{So(a)}catch(r){}}}catch(a){}},window.__FOF.setGoal=e=>{try{var a=String(e).toUpperCase();Qo(a);try{So(a)}catch(r){}}catch(a){}},window.__FOF.setTier=e=>{try{dn(String(e).toUpperCase())}catch(a){}},window.__FOF.setMode=e=>{try{Rt(String(e).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT")}catch(a){}},window.__FOF.getEnt=()=>{try{if(typeof window!="undefined"&&window.__fof_entitlements)return window.__fof_entitlements}catch(e){}try{var e=localStorage.getItem("FOF_ENT_GLOBAL")||localStorage.getItem("FOF_ENT")||localStorage.getItem("ENT")||null;if(e)return JSON.parse(e)}catch(e){}return{subscriptionStatus:"ACTIVE",tier:typeof Di!="undefined"?Di:"FREE"}},window.__FOF.setEnt=(e={})=>{try{var r={...window.__FOF.getEnt?window.__FOF.getEnt():window.__fof_entitlements||{},...e};window.__fof_entitlements=r;try{localStorage.setItem("FOF_ENT_GLOBAL",JSON.stringify(r))}catch(c){}return r}catch(a){return e}};try{window._FOF=window.__FOF}catch(e){}window.__FOF._build="FOF-CDRS_v1_STEP5_CAPACITY_ENGINE_V1"}catch(e){}},[Js,zo,js]);var Bo=({title:e,note:a})=>React.createElement("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 mt-3"},React.createElement("div",{className:"text-white font-semibold text-lg"},e),React.createElement("div",{className:"text-white/70 text-sm mt-1"},a||"Placeholder (FOF-CDRS v1.0 Step 1). Implemented in later steps.")),No=({children:e})=>React.createElement("span",{className:"inline-flex items-center rounded-full border border-white/12 bg-white/5 px-3 py-1 text-[11px] font-bold text-white/70"},e),bn=(e,a={})=>{try{var r=window.__FOF_CLIENT_CONTEXT||null;window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"PAYWALL_SHEET_V1",props:{featureKey:e,meta:{...a,ctx:r}}}}));try{eo("paywall.v1.opened",{featureKey:e,...a||{},tier:r==null?void 0:r.tier,relationship:r==null?void 0:r.relationship,emphasis:r==null?void 0:r.emphasis})}catch(c){}return}catch(r){}try{alert(`Locked Feature: ${e}`)}catch(r){}},_n=bn;try{window.__fof_openPaywall=bn,window.__fof_openPaywallStub=_n}catch(e){}var gr=({children:e,className:a=""})=>React.createElement("div",{className:["space-y-2",a].join(" ")},e),Wn=({children:e,onClick:a,className:r=""})=>React.createElement("button",{type:"button",onClick:a,onPointerUp:a,onTouchEnd:a,className:["w-full text-left rounded-3xl border border-white/12 bg-white/6 backdrop-blur-xl","px-4 py-3 active:scale-[0.99] transition","hover:bg-white/8",r].join(" ")},e),nr=({icon:e,title:a,subtitle:r,right:c,onPress:h,onTap:V})=>React.createElement(Wn,{onClick:h||V},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},e?React.createElement("span",{className:"text-[18px]"},e):null,React.createElement("div",{className:"text-[14px] font-extrabold tracking-tight text-white"},a)),r?React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},r):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},c||React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")))),Br=({icon:e="\u{1F512}",title:a,preview:r,ctaLabel:c="Unlock",onUnlock:h})=>React.createElement(Wn,{onClick:h},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-[18px]"},e),React.createElement("div",{className:"text-[14px] font-extrabold tracking-tight text-white"},a),React.createElement("span",{className:"ml-1 px-2 py-0.5 rounded-full border border-white/14 bg-black/30 text-[10px] font-extrabold uppercase tracking-widest text-white/80"},"Locked")),r?React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},r):null),React.createElement("div",{className:"shrink-0"},React.createElement("span",{className:"px-3 py-1.5 rounded-full border border-brand/40 bg-brand/15 text-[11px] font-extrabold text-white"},c)))),Nn=({coachName:e="Coach",title:a,note:r,onPress:c})=>React.createElement(Wn,{onClick:c,className:"border-brand/35 bg-gradient-to-br from-brand/12 via-white/6 to-white/4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-[18px]"},"\u{1F9D1}\u200D\u{1F3EB}"),React.createElement("div",{className:"text-[14px] font-extrabold tracking-tight text-white"},a)),React.createElement("div",{className:"mt-1 flex flex-wrap items-center gap-2"},React.createElement("span",{className:"px-2 py-0.5 rounded-full border border-white/14 bg-black/30 text-[10px] font-extrabold uppercase tracking-widest text-white/80"},"Assigned by ",e),r?React.createElement("span",{className:"text-[12px] text-white/70"},r):null)),React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A"))),fl=({title:e,subtitle:a,right:r,onPress:c})=>React.createElement(Wn,{onClick:c,className:"py-4 border-white/18 bg-gradient-to-br from-white/10 via-white/6 to-black/10"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-widest text-white/70"},"Home"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold tracking-tight text-white"},e),a?React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},a):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},r||React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")))),ul=({tier:e,ent:a,isLinked:r})=>{var c=a&&a.subscriptionStatus?a.subscriptionStatus:"ACTIVE",h=c==="IN_GRACE",V=c==="DUNNING_LOCKED"||c==="EXPIRED",de=e==="TRIAL",M=e==="PAID"||e==="AI"||r;var De=null;try{if(de&&a&&a.trialEndAt){var N=new Date(a.trialEndAt).getTime();if(!Number.isNaN(N)){var Ne=N-Date.now();De=Math.max(0,Math.ceil(Ne/(1e3*60*60*24)))}}}catch(N){}var Ae=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"IC_Upgrade_Options_Router",props:{from:"today_banner"}}}))}catch(N){}},Oe=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"DunningFlow_DF_Client_Unlock_Triage",props:{from:"today_banner"}}}))}catch(N){Ae()}};if(V||h){var N=V?"rose":"amber",Ne=V?"Payment issue \u2014 access may be limited":"Payment issue detected",G=V?"Update your payment method to restore full access.":"Please update your payment method to avoid interruption.",we=V?"Fix payment":"Update payment";return React.createElement("div",{className:"rounded-3xl border px-4 py-4 "+(N==="rose"?"border-rose-400/25 bg-rose-400/10":"border-amber-400/25 bg-amber-400/10")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},Ne),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},G)),React.createElement("button",{onClick:Oe,className:"shrink-0 px-3 py-2 rounded-xl text-[12px] font-extrabold uppercase tracking-widest border "+(N==="rose"?"border-rose-400/30 bg-rose-400/15 text-rose-100 hover:bg-rose-400/20":"border-amber-400/30 bg-amber-400/15 text-amber-100 hover:bg-amber-400/20")},we)))}if(!M){var N=de?"Trial active":"Unlock premium planning",Ne=de?"Trial ends "+(De===null?"soon":"in "+De+" day"+(De===1?"":"s"))+" \u2022 Upgrade anytime.":"Start your free trial to unlock AI planning, history, and premium tools.";return React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},N),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},Ne)),React.createElement("div",{className:"shrink-0 flex flex-col sm:flex-row gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"FIND_COACH_SHEET_V1",props:{from:"PREMIUM_BANNER"}}}))}catch(we){}},className:"px-3 py-2 rounded-xl text-[12px] font-extrabold uppercase tracking-widest border border-white/14 bg-white/8 text-white/90 hover:bg-white/12"},"Find a Coach"),React.createElement("button",{onClick:Ae,className:"shrink-0 px-3 py-2 rounded-xl text-[12px] font-extrabold uppercase tracking-widest border border-cyan-400/25 bg-cyan-400/10 text-cyan-100 hover:bg-cyan-400/15"},de?"Upgrade":"Start trial"))))}return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Member"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"Manage your plan, billing, and access.")),React.createElement("button",{onClick:Ae,className:"shrink-0 px-3 py-2 rounded-xl text-[12px] font-extrabold uppercase tracking-widest border border-white/14 bg-white/5 text-white/85 hover:bg-white/10"},"Manage")))},yl=({persona:e,planSubTab:a,setPlanSubTab:r})=>{var $i;var c=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():{},h=String(c.relationship||(e==null?void 0:e.relationship)||"INDEPENDENT").toUpperCase(),V=String(c.emphasis||(e==null?void 0:e.goalCategory)||"FITNESS").toUpperCase(),de=String(c.tier||(e==null?void 0:e.tier)||"FREE").toUpperCase(),M=c&&c.entitlements?c.entitlements:{},De=String(M.yogaAccess||"NONE").toUpperCase(),Ae=h==="LINKED",Oe=de==="PAID",N=de==="TRIAL",Ne=(()=>{try{var Ya=typeof window.__fof_dayFlags=="function"?window.__fof_dayFlags():{};return String(Ya.selectedDayKey||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():window.__fof_localDateKey?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10)))}catch(Ya){return new Date().toISOString().slice(0,10)}})(),[G,we]=React.useState(Ne);React.useEffect(()=>{var Ya=Zt=>{try{var Ki=String(Zt&&Zt.detail&&Zt.detail.selectedDayKey?Zt.detail.selectedDayKey:window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():"");Ki&&Ki!==G&&we(Ki)}catch(Ki){}};try{window.addEventListener("flowofit:selectedDayChanged",Ya)}catch(Zt){}try{var Zt=String(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():G);Zt&&Zt!==G&&we(Zt)}catch(Zt){}return()=>{try{window.removeEventListener("flowofit:selectedDayChanged",Ya)}catch(Zt){}}},[G]);var $t="fof_plan_db_v1",gt=()=>{try{return JSON.parse(localStorage.getItem($t)||"{}")||{}}catch(Ya){return{}}},[_e,ve]=React.useState(0),me=()=>{try{ve(Ya=>Ya+1)}catch(Ya){}},j=Ya=>{try{localStorage.setItem($t,JSON.stringify(Ya||{}))}catch(Zt){}try{window.dispatchEvent(new CustomEvent("flowofit:planDBUpdated",{detail:{ts:Date.now()}}))}catch(Zt){}me()},je="fof_plan_done_v1",re=()=>{try{return JSON.parse(localStorage.getItem(je)||"{}")||{}}catch(Ya){return{}}},Z=Ya=>{try{localStorage.setItem(je,JSON.stringify(Ya||{}))}catch(Zt){}},Qe=(Ya,Zt)=>{var Ki=re(),Fa=Ki&&Ki[Ya]?Ki[Ya]:[];return Array.isArray(Fa)?Fa.includes(String(Zt||"")):!1},nt=(Ya,Zt)=>{if(!Ya||!Zt)return;var Ki=re(),Fa=Array.isArray(Ki[Ya])?Ki[Ya]:[],Ni=String(Zt||"");Fa.includes(Ni)||Fa.push(Ni),Ki[Ya]=Fa,Z(Ki);try{window.dispatchEvent(new CustomEvent("flowofit:planDoneUpdated",{detail:{dateKey:Ya}}))}catch(ys){}};React.useEffect(()=>{var Ya=()=>{try{me()}catch(Zt){}};try{window.addEventListener("flowofit:planDBUpdated",Ya)}catch(Zt){}try{window.addEventListener("flowofit:planDoneUpdated",Ya)}catch(Zt){}return()=>{try{window.removeEventListener("flowofit:planDBUpdated",Ya)}catch(Zt){}try{window.removeEventListener("flowofit:planDoneUpdated",Ya)}catch(Zt){}}},[]);var Lt=Ya=>{var Zt=gt(),Ki=Zt&&Zt[Ya]?Zt[Ya]:[];return Array.isArray(Ki)?Ki:[]},ze=(Ya,Zt)=>{var Ki=gt();Ki[Ya]=Array.isArray(Zt)?Zt:[],j(Ki);try{window.dispatchEvent(new CustomEvent("flowofit:planUpdated",{detail:{dateKey:Ya}}))}catch(Fa){}},Le=(Ya,Zt)=>{var Fa=[...Lt(Ya),{id:Ys(),ts:Date.now(),...Zt||{}}];ze(Ya,Fa);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added to Plan",message:"Saved to this day in Plan."}}))}catch(Ni){}};React.useEffect(()=>{var Ya=Zt=>{var Ki=Zt&&Zt.detail?Zt.detail:{},Fa=String(Ki.dateKey||G||"")||G,Ni=Ki.item||null;if(Ni)try{var ys=String(Ni.category||"").toUpperCase(),Ps=ys==="NUTRITION"?"NUTRITION":ys==="YOGA"?"YOGA":"WORKOUT";Le(Fa,{kind:Ps,module:Ps,title:Ni.title,refId:Ni.id,refType:Ni.type,category:Ni.category,duration:Ni.duration,meta:{from:"LIBRARYV2",source:Ni.source||"LIBRARYV2"}})}catch(ys){}};try{window.addEventListener("flowofit:addToPlan",Ya)}catch(Zt){}return()=>{try{window.removeEventListener("flowofit:addToPlan",Ya)}catch(Zt){}}},[G]);var se=Ya=>{try{var[Zt,Ki,Fa]=String(Ya).split("-").map(Number);return new Date(Zt,(Ki||1)-1,Fa||1)}catch(Zt){return new Date}},at=Ya=>{try{var Zt=Ya.getFullYear(),Ki=String(Ya.getMonth()+1).padStart(2,"0"),Fa=String(Ya.getDate()).padStart(2,"0");return`${Zt}-${Ki}-${Fa}`}catch(Zt){return G}},Pe=Ya=>{var Zt=new Date(Ya.getFullYear(),Ya.getMonth(),Ya.getDate()),Ki=Zt.getDay(),Fa=Ki===0?6:Ki-1;return Zt.setDate(Zt.getDate()-Fa),Zt},Wt=React.useMemo(()=>{var Ya=Pe(se(G)),Zt=[];for(var Ki=0;Ki<7;Ki++){var Fa=new Date(Ya.getFullYear(),Ya.getMonth(),Ya.getDate());Fa.setDate(Ya.getDate()+Ki);var Ni=at(Fa);Zt.push({key:Ni,label:Fa.toLocaleDateString(void 0,{weekday:"short"}),dayNum:Fa.getDate()})}return Zt},[G]),Ha=typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):at(new Date),qa=Ya=>{var Zt=Lt(Ya),Ki={WORKOUT:0,YOGA:0,NUTRITION:0,OTHER:0};return Zt.forEach(Fa=>{var Ni=String(Fa.kind||Fa.module||"OTHER").toUpperCase();Ni.includes("WORK")?Ki.WORKOUT+=1:Ni.includes("YOGA")?Ki.YOGA+=1:Ni.includes("NUTR")||Ni.includes("MEAL")||Ni.includes("FOOD")?Ki.NUTRITION+=1:Ki.OTHER+=1}),{total:Zt.length,...Ki}},[oa,Ra]=React.useState("HUB"),ri=Ya=>{if(String(Ya||"").toUpperCase()==="LIBRARY"){try{localStorage.setItem("fof_library_planDateKey_v1",String(G||""))}catch(Zt){}try{if(typeof window.__fof_openLibraryDeepLink=="function"){window.__fof_openLibraryDeepLink({source:"PLAN",dateKey:G,intent:"BROWSE_LIBRARY"});return}}catch(Zt){}}Ra(Ya);try{typeof r=="function"&&r(Ya==="HUB"?"PLAN_HUB":"PLAN_"+Ya)}catch(Zt){}},[Da,Va]=React.useState(!1),[Y,ft]=React.useState(!1),_a=Number(typeof xo!="undefined"?xo:($i=window.readiness)!=null?$i:0)||0,Ja=_a<=33?"Low":_a<=66?"Mid":"High",Ui=()=>{var Ya=Wt.reduce((Fa,Ni)=>Fa+(qa(Ni.key).total||0),0),Ki=Ya?Math.min(100,Math.round(0/Ya*100)):0;return React.createElement("div",{className:"fof-tile p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"fof-kicker"},"Plan"),React.createElement("div",{className:"fof-h1 mt-1 text-white"},"This Week\u2019s Plan"),React.createElement("div",{className:"fof-body mt-1"},Ya?`${Ya} planned item${Ya===1?"":"s"} \u2022 `:"Nothing planned yet \u2022 ",React.createElement("span",{className:"text-white/70"},"Strategic core \u2192 execute in Today"))),React.createElement("div",{className:"fof-chip border-white/12 bg-white/5"},Ae?"Coach-led":V==="HYBRID"?"Hybrid":V)),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"h-2 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-2 rounded-full bg-white/35",style:{width:`${Ki}%`}})),React.createElement("div",{className:"mt-2 flex items-center justify-between text-[11px] text-white/60"},React.createElement("div",null,Ki,"% on track (adherence phase later)"),React.createElement("div",{className:"text-white/55"},"Week view"))),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>Va(!0),className:"px-4 py-2 rounded-2xl bg-white/10 border border-white/10 hover:bg-white/15 text-white font-extrabold text-[12px]"},"Edit / Adjust"),React.createElement("button",{type:"button",onClick:()=>ri("LIBRARY"),className:"px-4 py-2 rounded-2xl bg-brand/15 border border-brand/30 hover:bg-brand/20 text-brand font-extrabold text-[12px]"},"Add to Plan"),React.createElement("button",{type:"button",onClick:()=>ri("LIBRARY"),className:"px-4 py-2 rounded-2xl border border-white/14 bg-white/5 hover:bg-white/10 text-white/85 font-extrabold text-[12px]"},"Library"),React.createElement("button",{type:"button",onClick:()=>ft(!0),className:"px-4 py-2 rounded-2xl bg-black/20 border border-white/10 hover:bg-black/30 text-white/80 font-extrabold text-[12px]"},"Quick Add"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:Ae?"LC_Add_Secondary_Activity_NEW":"IC_Add_Secondary_Activity_NEW",props:{from:"PLAN",via:"PlanHero"}}}))}catch(Fa){}},className:"px-4 py-2 rounded-2xl border border-white/14 bg-white/5 hover:bg-white/10 text-white/85 font-extrabold text-[12px]",title:"Add a second activity today (conflict-checked)"},"Add Secondary")))},qs=()=>{var Ya;return React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"fof-h2 text-white"},"My Plan"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 active:scale-[0.99] grid place-items-center",onClick:()=>{try{var Zt=se(G);Zt.setDate(Zt.getDate()-7),window.__fof_setSelectedDayKey(at(Zt))}catch(Zt){}},"aria-label":"Previous week",title:"Previous week"},React.createElement(gi,{name:"ChevronLeft",size:18,className:"text-white/70"})),React.createElement("div",{className:"fof-caption"},React.createElement("span",{className:"text-white/55"},"Week of "),React.createElement("span",{className:"text-white/80"},(Ya=Wt[0])==null?void 0:Ya.key)),React.createElement("button",{type:"button",className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 active:scale-[0.99] grid place-items-center",onClick:()=>{try{var Zt=se(G);Zt.setDate(Zt.getDate()+7),window.__fof_setSelectedDayKey(at(Zt))}catch(Zt){}},"aria-label":"Next week",title:"Next week"},React.createElement(gi,{name:"ChevronRight",size:18,className:"text-white/70"})))),React.createElement("div",{className:"mt-3 flex gap-2 overflow-x-auto pb-1 -mx-1 px-1"},Wt.map(Zt=>{var Ki=qa(Zt.key),Fa=Zt.key===G,Ni=Zt.key===Ha;return React.createElement("button",{key:Zt.key,type:"button",onClick:()=>{try{typeof window.__fof_setSelectedDayKey=="function"&&window.__fof_setSelectedDayKey(Zt.key)}catch(ys){}},className:"relative rounded-2xl border p-2 text-left transition active:scale-[0.99] flex-shrink-0 w-[64px] sm:w-auto "+(Fa?"border-brand/60 bg-brand/10":"border-white/10 bg-white/5 hover:bg-white/7")+(Ni?" shadow-[0_0_0_1px_rgba(77,233,255,0.22),0_0_18px_rgba(77,233,255,0.10)]":"")},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/85"},Zt.label)),Ni&&React.createElement("div",{className:"mt-1 inline-flex items-center rounded-full border border-neon-aqua/40 bg-neon-aqua/10 px-2 py-[2px] text-[9px] font-extrabold text-neon-aqua"},"Today"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},Zt.dayNum),React.createElement("div",{className:"mt-1 text-[10px] text-white/60"},Ki.total?`${Ki.total} planned`:"\u2014"),React.createElement("div",{className:"mt-2 flex items-center gap-1"},React.createElement("div",{className:"h-1.5 w-1.5 rounded-full "+(Ki.WORKOUT?"bg-neon-aqua":"bg-white/15")}),React.createElement("div",{className:"h-1.5 w-1.5 rounded-full "+(Ki.YOGA?"bg-neon-violet":"bg-white/15")}),React.createElement("div",{className:"h-1.5 w-1.5 rounded-full "+(Ki.NUTRITION?"bg-neon-lime":"bg-white/15")})))})),React.createElement("div",{className:"mt-3 fof-caption"},"Tap a day to set context. Home executes the selected day\u2019s plan. Logging stays in Log tab."))},_o=()=>{var Ya=Lt(G)||[],Zt=Ya.length>0,Ki=Fa=>{try{var Ni=Fa.refId||Fa.sessionId||Fa.yogaSessionId||"y1";typeof window.__fof_openNode=="function"?window.__fof_openNode("YC_Perform",{from:"PLAN",access:De,intent:"PLAN_START",planDateKey:G,planItemId:Fa.id,sessionId:Ni}):navTo("YC_Perform",{from:"PLAN",access:De,intent:"PLAN_START",planDateKey:G,planItemId:Fa.id,sessionId:Ni})}catch(Ni){}};return React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"fof-h2 text-white"},"Planned for ",G),React.createElement("div",{className:"fof-caption mt-1"},Zt?"Tap to start. Marked done on completion.":"Nothing planned for this day yet.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ft(!0),className:"px-3 py-2 rounded-2xl bg-brand/15 border border-brand/30 hover:bg-brand/20 text-brand font-extrabold text-[12px]"},"Add"),React.createElement("button",{type:"button",onClick:()=>Va(!0),className:"px-3 py-2 rounded-2xl bg-white/10 border border-white/10 hover:bg-white/15 text-white font-extrabold text-[12px]"},"Edit"))),Zt?React.createElement("div",{className:"mt-3 space-y-2"},Ya.map((Fa,Ni)=>{var ys=String(Fa.kind||Fa.module||"OTHER").toUpperCase(),Ps=Qe(G,Fa.id),Ms=ys.includes("YOGA"),o=ys.includes("WORK"),d=ys.includes("NUTR"),m=Ms&&De!=="NONE"&&!Ps;return React.createElement("button",{key:Fa.id||Ni,type:"button",onClick:()=>{m?Ki(Fa):Va(!0)},className:"w-full fof-tile p-4 text-left "+(Ps?"opacity-80":"")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"fof-h3 text-white truncate"},Fa.title||"Planned Item"),o?React.createElement("span",{className:"fof-chip border-neon-aqua/25 bg-neon-aqua/10 text-neon-aqua"},"Workout"):null,Ms?React.createElement("span",{className:"fof-chip border-neon-violet/25 bg-neon-violet/10 text-neon-violet"},"Yoga"):null,d?React.createElement("span",{className:"fof-chip border-neon-lime/25 bg-neon-lime/10 text-neon-lime"},"Nutrition"):null,Ps?React.createElement("span",{className:"fof-chip border-emerald-400/25 bg-emerald-400/10 text-emerald-200"},"Done"):null),React.createElement("div",{className:"fof-caption mt-1"},ys," \u2022 ",Fa.duration?`${Fa.duration} min`:"\u2014")),React.createElement("div",{className:"shrink-0"},m?React.createElement("span",{className:"fof-chip border-brand/30 bg-brand/15 text-brand"},"Start"):React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/65"},Ps?"Completed":"Details"))))})):React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>ft(!0),className:"fof-tile p-4 text-left"},React.createElement("div",{className:"fof-h3 text-white"},"Quick Add"),React.createElement("div",{className:"fof-caption mt-1"},"Add workout, yoga, or nutrition action to this day.")),React.createElement("button",{type:"button",onClick:()=>ri("LIBRARY"),className:"fof-tile p-4 text-left"},React.createElement("div",{className:"fof-h3 text-white"},"Browse Library"),React.createElement("div",{className:"fof-caption mt-1"},"Add sessions from Library to this day."))))},ki=()=>{var Ya=De==="NONE",Zt=De==="LIMITED",Ps=[{key:"FITNESS",title:"Fitness",desc:"Strength / cardio / mobility blocks",kicker:"Plan",locked:!1,onOpen:()=>ri("FITNESS")},{key:"YOGA",title:"Yoga",desc:Ya?"Add Yoga to access sessions":Zt?"Limited sessions available \u2022 upgrade for full library":"Flows \u2022 classes \u2022 programs",kicker:Ya?"Add Yoga":Zt?"Limited":"Plan",locked:!1,onOpen:()=>{try{De==="FULL"||De==="LIMITED"?window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"YC_Session_Selection",props:{yogaAccess:De,from:"PLAN"}}})):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"YC_Access_Check",props:{yogaAccess:De,from:"PLAN"}}}))}catch(o){ri("YOGA")}}},{key:"NUTRITION",title:"Nutrition",desc:"Meals \u2022 targets \u2022 weekly prep",kicker:"Plan",locked:!1,onOpen:()=>ri("NUTRITION")},{key:"SCHEDULE",title:"Schedule",desc:"Weekly structure & timing",kicker:"View",locked:!1,onOpen:()=>ri("SCHEDULE")},{key:"LIBRARY",title:"Library",desc:"Browse programs \u2022 templates \u2022 collections",kicker:"Browse",locked:!1,onOpen:()=>ri("LIBRARY")}],Ms=o=>o===V?0:V==="HYBRID"&&o==="SCHEDULE"?-1:1;return Ps.sort((o,d)=>Ms(o.key)-Ms(d.key)),React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3"},Ps.map(o=>React.createElement("button",{key:o.key,type:"button",onClick:()=>{if(o.locked)return _n("PLAN_"+o.key,{from:"PLAN_MODULE_PEERS",emphasis:V,tier:de,yogaAccess:De});o.onOpen()},className:"fof-tile p-4 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"fof-h2 text-white"},o.title),React.createElement("div",{className:"fof-body mt-1 text-white/70"},o.desc)),React.createElement("div",{className:"fof-chip "+(o.locked?"border-amber-400/25 bg-amber-400/10 text-amber-200":"border-white/12 bg-white/5 text-white/75")},o.locked?de==="FREE"?"Premium":"Upgrade":o.kicker)))))},Vs=()=>{var Ya=Lt(G),Zt=(Fa,Ni)=>{var ys=[...Ya],Ps=Fa+Ni;if(Ps<0||Ps>=ys.length)return;var Ms=ys[Fa];ys[Fa]=ys[Ps],ys[Ps]=Ms,ze(G,ys)},Ki=Fa=>{ze(G,Ya.filter(Ni=>Ni&&Ni.id!==Fa));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Removed",message:"Item removed from Plan."}}))}catch(Ni){}};return React.createElement(qo,{open:Da,title:"Edit / Adjust",kicker:"Plan",onClose:()=>Va(!1),footer:React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Context: Capacity ",Ja," (",Math.round(_a),") may adjust intensity (rules applied in Plan engine later)."),React.createElement("button",{type:"button",onClick:()=>Va(!1),className:"px-4 py-2 rounded-2xl bg-white/10 border border-white/10 hover:bg-white/15 text-white font-extrabold text-[12px]"},"Done"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"fof-h3 text-white"},"Day: ",G),React.createElement("div",{className:"fof-caption mt-1"},"Reorder, remove, or quickly add items. Full planner rules + deload/progression connect in later phases.")),Ya.length===0?React.createElement("div",{className:"fof-empty"},React.createElement("div",{className:"fof-h3 text-white"},"Nothing planned yet"),React.createElement("div",{className:"fof-caption mt-1"},"Use \u201CAdd to Plan\u201D to schedule a workout, yoga flow, or nutrition action."),React.createElement("button",{type:"button",onClick:()=>{Va(!1),ft(!0)},className:"mt-3 px-4 py-2 rounded-2xl bg-brand/15 border border-brand/30 hover:bg-brand/20 text-brand font-extrabold text-[12px]"},"Add to Plan")):Ya.map((Fa,Ni)=>{var E;var ys=String(Fa.kind||Fa.module||"OTHER").toUpperCase(),Ps=Qe(G,Fa.id),Ms=ys.includes("YOGA"),o=ys.includes("WORK"),d=Ms&&De!=="NONE",m=Fa.refId||Fa.sessionId||Fa.yogaSessionId||"y1";return React.createElement("div",{key:Fa.id||Ni,className:"fof-card p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"fof-h3 text-white truncate"},Fa.title||"Planned Item"),Ps?React.createElement("span",{className:"fof-chip border-emerald-400/25 bg-emerald-400/10 text-emerald-200"},"Done"):null,Ms&&Fa.refId?React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/70"},"Session"):null,Ms&&String(((E=Fa.meta)==null?void 0:E.source)||"").toUpperCase()==="COACH"?React.createElement("span",{className:"fof-chip border-brand/30 bg-brand/15 text-brand"},"Coach"):null),React.createElement("div",{className:"fof-caption mt-1"},ys," \u2022 ",G)),React.createElement("div",{className:"flex gap-2 shrink-0 flex-wrap justify-end"},d?React.createElement("button",{type:"button",onClick:()=>{try{Va(!1)}catch(g){}try{typeof window.__fof_openNode=="function"?window.__fof_openNode("YC_Perform",{from:"PLAN",access:De,intent:"PLAN_START",planDateKey:G,planItemId:Fa.id,sessionId:m}):navTo("YC_Perform",{from:"PLAN",access:De,intent:"PLAN_START",planDateKey:G,planItemId:Fa.id,sessionId:m})}catch(g){}},className:"px-3 py-2 rounded-2xl bg-brand/15 border border-brand/30 hover:bg-brand/20 text-brand font-extrabold text-[12px]"},"Start"):null,React.createElement("button",{type:"button",onClick:()=>Zt(Ni,-1),className:"px-3 py-2 rounded-2xl bg-white/8 border border-white/10 hover:bg-white/12 text-white/80 font-extrabold text-[12px]"},"\u2191"),React.createElement("button",{type:"button",onClick:()=>Zt(Ni,1),className:"px-3 py-2 rounded-2xl bg-white/8 border border-white/10 hover:bg-white/12 text-white/80 font-extrabold text-[12px]"},"\u2193"),React.createElement("button",{type:"button",onClick:()=>Ki(Fa.id),className:"px-3 py-2 rounded-2xl bg-red-500/10 border border-red-500/20 hover:bg-red-500/15 text-red-200 font-extrabold text-[12px]"},"Remove"))))})))},Ke=()=>React.createElement(qo,{open:Y,title:"Add to Plan",kicker:"Plan",onClose:()=>ft(!1),footer:React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{ft(!1),ri("LIBRARY")},className:"px-4 py-2 rounded-2xl bg-black/20 border border-white/10 hover:bg-black/30 text-white/80 font-extrabold text-[12px]"},"Browse Library"),React.createElement("button",{type:"button",onClick:()=>ft(!1),className:"px-4 py-2 rounded-2xl bg-white/10 border border-white/10 hover:bg-white/15 text-white font-extrabold text-[12px]"},"Done"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-4"},React.createElement("div",{className:"fof-h3 text-white"},"Day: ",G),React.createElement("div",{className:"fof-caption mt-1"},"Quick add placeholders (real library/program selection expands later).")),React.createElement("div",{className:"grid grid-cols-1 gap-3"},React.createElement("button",{type:"button",onClick:()=>Le(G,{kind:"WORKOUT",title:"Workout Session (Planned)",module:"FITNESS"}),className:"fof-tile p-4 text-left"},React.createElement("div",{className:"fof-h3 text-white"},"Add Workout"),React.createElement("div",{className:"fof-caption mt-1"},"Schedule a training session for this day.")),React.createElement("button",{type:"button",onClick:()=>{if(De==="NONE")return _n("YOGA",{from:"ADD_TO_PLAN",reason:"YOGA_ACCESS_NONE"});try{ft(!1)}catch(Ya){}try{if(typeof window.__fof_openNode=="function"){window.__fof_openNode("YC_Session_Selection",{from:"PLAN",intent:"PLAN_ADD",planDateKey:String(G||""),yogaAccessOverride:De,returnTo:"PLAN"});return}}catch(Ya){}Le(G,{kind:"YOGA",title:"Yoga Flow (Planned)",module:"YOGA"})},className:"fof-tile p-4 text-left"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"fof-h3 text-white"},"Add Yoga"),De==="NONE"&&React.createElement("div",{className:"fof-chip border-amber-400/25 bg-amber-400/10 text-amber-200"},"Locked")),React.createElement("div",{className:"fof-caption mt-1"},"Add a yoga session (requires Yoga access).")),React.createElement("button",{type:"button",onClick:()=>Le(G,{kind:"NUTRITION",title:"Nutrition Plan (Planned)",module:"NUTRITION"}),className:"fof-tile p-4 text-left"},React.createElement("div",{className:"fof-h3 text-white"},"Add Nutrition"),React.createElement("div",{className:"fof-caption mt-1"},"Schedule meal targets / prep actions."))))),ua=({title:Ya})=>React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("button",{type:"button",onClick:()=>ri("HUB"),className:"px-3 py-2 rounded-2xl bg-white/8 border border-white/10 hover:bg-white/12 text-white/80 font-extrabold text-[12px]"},"\u2190 Back"),React.createElement("div",{className:"text-white font-extrabold"},Ya),React.createElement("div",{className:"w-[64px]"})),ga=()=>!Oe&&!N?React.createElement("div",{className:"space-y-3"},React.createElement(ua,{title:"Library"}),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement(Br,{title:"Library",preview:"Premium programs, videos, and skills. Unlock to browse full categories.",ctaLabel:de==="FREE"?"Start Trial":"Upgrade",onUnlock:()=>_n("LIBRARY",{from:"PLAN_LIBRARY_PAGE"})}),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},["Fitness","Yoga","Nutrition","Recovery"].map(Ya=>React.createElement("div",{key:Ya,className:"rounded-2xl border border-white/10 bg-black/20 p-3 opacity-80"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},Ya),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},"Preview (locked)")))))):React.createElement("div",{className:"space-y-3"},React.createElement(ua,{title:"Library"}),React.createElement("div",{className:"fof-empty"},React.createElement("div",{className:"fof-h3 text-white"},"Library (Phase 8+)"),React.createElement("div",{className:"fof-caption mt-1"},"Full categories, videos, programs and skills expand in later slices. Use \u201CAdd to Plan\u201D quick actions for now."))),Vi=({title:Ya,desc:Zt})=>React.createElement("div",{className:"space-y-3"},React.createElement(ua,{title:Ya}),React.createElement("div",{className:"fof-empty"},React.createElement("div",{className:"fof-h3 text-white"},Ya," (Placeholder)"),React.createElement("div",{className:"fof-caption mt-1"},Zt),React.createElement("button",{type:"button",onClick:()=>ft(!0),className:"mt-3 px-4 py-2 rounded-2xl bg-brand/15 border border-brand/30 hover:bg-brand/20 text-brand font-extrabold text-[12px]"},"Add to Plan")));return oa==="FITNESS"?React.createElement("div",{className:"space-y-3"},React.createElement(Vi,{title:"Fitness Plan",desc:"Week-level workout planning expands in Phase 2+ (rulebook + progression/deload). UI stays strategic."}),React.createElement(Vs,null),React.createElement(Ke,null)):oa==="NUTRITION"?React.createElement("div",{className:"space-y-3"},React.createElement(Vi,{title:"Nutrition Plan",desc:"Nutrition planner expands in 2D slices. This is the strategic entry point (not an overlay dashboard)."}),React.createElement(Vs,null),React.createElement(Ke,null)):oa==="YOGA"?React.createElement("div",{className:"space-y-3"},React.createElement(Vi,{title:"Yoga Plan",desc:"Yoga planning expands in Stage 8 (Yoga Access Flow). This page stays within Plan as a peer module."}),React.createElement(Vs,null),React.createElement(Ke,null)):oa==="SCHEDULE"?React.createElement("div",{className:"space-y-3"},React.createElement(Vi,{title:"Schedule",desc:"Weekly structure view expands later. For now, Plan remains week-first with day context."}),React.createElement(Vs,null),React.createElement(Ke,null)):oa==="LIBRARY"?React.createElement("div",{className:"space-y-3"},React.createElement(ga,null),React.createElement(Vs,null),React.createElement(Ke,null)):React.createElement("div",{className:"space-y-3"},React.createElement(Ui,null),React.createElement(qs,null),React.createElement(_o,null),React.createElement(ki,null),React.createElement(Vs,null),React.createElement(Ke,null))},Nl=({open:e,dayKey:a=null,preset:r=null,onClose:c})=>{if(!e)return null;var h=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Y){return a||null}},[a]),V=r&&(r.meal||r.mealKey)?String(r.meal||r.mealKey):"BREAKFAST",[de,M]=React.useState(()=>String(V).toUpperCase());React.useEffect(()=>{try{M(String(V).toUpperCase())}catch(Y){}},[V,e]);var[De,Ae]=React.useState(""),Oe=React.useRef(null),N="__fof_food_recent_v1",Ne="__fof_food_freq_v1",G="__fof_food_favorites_v1",we=React.useMemo(()=>[{id:"f_chicken_breast",name:"Chicken breast",brand:"Generic",serving:"100 g",kcal:165,p:31,c:0,f:3.6},{id:"f_egg",name:"Egg",brand:"Generic",serving:"1 large",kcal:72,p:6.3,c:.4,f:4.8},{id:"f_oats",name:"Oats",brand:"Generic",serving:"40 g",kcal:150,p:5,c:27,f:3},{id:"f_rice_white",name:"White rice",brand:"Generic",serving:"1 cup cooked",kcal:205,p:4.3,c:45,f:.4},{id:"f_rice_brown",name:"Brown rice",brand:"Generic",serving:"1 cup cooked",kcal:216,p:5,c:45,f:1.8},{id:"f_banana",name:"Banana",brand:"Generic",serving:"1 medium",kcal:105,p:1.3,c:27,f:.4},{id:"f_apple",name:"Apple",brand:"Generic",serving:"1 medium",kcal:95,p:.5,c:25,f:.3},{id:"f_greek_yogurt",name:"Greek yogurt",brand:"Plain",serving:"170 g",kcal:100,p:17,c:6,f:0},{id:"f_whey",name:"Whey protein",brand:"Generic",serving:"1 scoop",kcal:120,p:24,c:3,f:2},{id:"f_salmon",name:"Salmon",brand:"Generic",serving:"100 g",kcal:208,p:20,c:0,f:13},{id:"f_tuna",name:"Tuna",brand:"Canned in water",serving:"1 can",kcal:120,p:26,c:0,f:1},{id:"f_peanut_butter",name:"Peanut butter",brand:"Generic",serving:"2 tbsp",kcal:190,p:8,c:7,f:16},{id:"f_bread",name:"Bread",brand:"Whole wheat",serving:"1 slice",kcal:100,p:4,c:19,f:1.5},{id:"f_pasta",name:"Pasta",brand:"Generic",serving:"1 cup cooked",kcal:220,p:8,c:43,f:1.3},{id:"f_olive_oil",name:"Olive oil",brand:"Generic",serving:"1 tbsp",kcal:119,p:0,c:0,f:13.5},{id:"f_avocado",name:"Avocado",brand:"Generic",serving:"1/2 avocado",kcal:120,p:1.5,c:6,f:10.5},{id:"f_almonds",name:"Almonds",brand:"Generic",serving:"28 g",kcal:164,p:6,c:6,f:14},{id:"f_potato",name:"Potato",brand:"Baked",serving:"1 medium",kcal:161,p:4.3,c:37,f:.2},{id:"f_sweet_potato",name:"Sweet potato",brand:"Baked",serving:"1 medium",kcal:103,p:2.3,c:24,f:.2},{id:"f_beef_lean",name:"Lean ground beef",brand:"90% lean",serving:"100 g",kcal:176,p:20,c:0,f:10},{id:"f_tofu",name:"Tofu",brand:"Firm",serving:"100 g",kcal:144,p:15,c:4,f:9},{id:"f_lentils",name:"Lentils",brand:"Cooked",serving:"1 cup",kcal:230,p:18,c:40,f:.8},{id:"f_black_beans",name:"Black beans",brand:"Cooked",serving:"1 cup",kcal:227,p:15,c:41,f:.9},{id:"f_milk",name:"Milk",brand:"2% milk",serving:"1 cup",kcal:122,p:8,c:12,f:5},{id:"f_cheddar",name:"Cheddar cheese",brand:"Generic",serving:"28 g",kcal:113,p:7,c:.4,f:9.3},{id:"f_spinach",name:"Spinach",brand:"Raw",serving:"100 g",kcal:23,p:2.9,c:3.6,f:.4},{id:"f_broccoli",name:"Broccoli",brand:"Cooked",serving:"1 cup",kcal:55,p:3.7,c:11,f:.6},{id:"f_blueberries",name:"Blueberries",brand:"Generic",serving:"1 cup",kcal:84,p:1.1,c:21,f:.5},{id:"f_protein_bar",name:"Protein bar",brand:"Generic",serving:"1 bar",kcal:200,p:20,c:22,f:7}],[]);React.useEffect(()=>{try{window.__fof_food_db_v1=we}catch(Y){}},[we]);var $t=(Y,ft)=>{try{var _a=localStorage.getItem(Y);if(!_a)return ft;var Ja=JSON.parse(_a);return Ja==null?ft:Ja}catch(_a){return ft}},gt=()=>{var Y=$t(N,[]);return Array.isArray(Y)?Y.slice(0,20):[]},_e=()=>{var Y=$t(Ne,{});return Y&&typeof Y=="object"?Y:{}},ve=()=>{var Y=$t(G,[]);return Array.isArray(Y)?Y:[]},me=Y=>{try{return ve().some(ft=>String(ft)===String(Y))}catch(ft){return!1}},j=Y=>{try{var ft=ve(),Ja=ft.some(Ui=>String(Ui)===String(Y))?ft.filter(Ui=>String(Ui)!==String(Y)):[Y,...ft];localStorage.setItem(G,JSON.stringify(Ja.slice(0,50)))}catch(ft){}},je=Y=>{try{var ft=gt(),_a=[Y,...ft.filter(Ui=>String(Ui)!==String(Y))].slice(0,20);localStorage.setItem(N,JSON.stringify(_a));var Ja=_e();Ja[Y]=Number(Ja[Y]||0)+1,localStorage.setItem(Ne,JSON.stringify(Ja))}catch(ft){}},re=Y=>{var ft,_a,Ja,Ui;Y&&(nt(String(Y.name||"")),ze(String(Y.serving||"")),se(String((ft=Y.kcal)!=null?ft:"")),Pe(String((_a=Y.p)!=null?_a:"")),Ha(String((Ja=Y.c)!=null?Ja:"")),oa(String((Ui=Y.f)!=null?Ui:"")))},Z=Y=>{if(!Y)return;var ft="__fof_nutrition_events_v1",_a="__fof_food_favorites_custom_v1",Ui={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"f_"+Math.random().toString(16).slice(2),dk:h,type:String(de||"SNACK"),name:String(Y.name||"").trim(),serving:String(Y.serving||"").trim(),calories:Number(Y.kcal||0),p:Number(Y.p||0),c:Number(Y.c||0),f:Number(Y.f||0),ts:Date.now(),src:"IC"};try{var qs=localStorage.getItem(ft),_o=qs?JSON.parse(qs):[],ki=Array.isArray(_o)?_o:[];ki.push(Ui),localStorage.setItem(ft,JSON.stringify(ki))}catch(qs){}je(Y.id);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:h,type:"NUTRITION"}}))}catch(qs){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:String(Y.name||"Food")+" added."}}))}catch(qs){}},[Qe,nt]=React.useState(""),[Lt,ze]=React.useState(""),[Le,se]=React.useState(""),[at,Pe]=React.useState(""),[Wt,Ha]=React.useState(""),[qa,oa]=React.useState("");React.useEffect(()=>{e&&(Ae(""),nt(""),ze(""),se(""),Pe(""),Ha(""),oa(""),setTimeout(()=>{try{Oe.current&&Oe.current.focus()}catch(Y){}},0))},[e,h]);var Ra=Y=>String(Y||"").replace(/[^\d.]/g,""),ri=(Qe||"").trim().length>0&&Number(Ra(Le)||0)>=0,Da=()=>{if(!ri)return;var Y="__fof_nutrition_events_v1",ft="__fof_food_favorites_custom_v1",Ja={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"f_"+Math.random().toString(16).slice(2),dk:h,type:String(de||"SNACK"),name:(Qe||"").trim(),serving:(Lt||"").trim(),calories:Number(Ra(Le)||0),p:Number(Ra(at)||0),c:Number(Ra(Wt)||0),f:Number(Ra(qa)||0),ts:Date.now(),src:"IC"};try{var Ui=localStorage.getItem(Y),qs=Ui?JSON.parse(Ui):[],_o=Array.isArray(qs)?qs:[];_o.push(Ja),localStorage.setItem(Y,JSON.stringify(_o))}catch(Ui){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:h,type:"NUTRITION"}}))}catch(Ui){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Food added",message:"Logged to your diary."}}))}catch(Ui){}try{typeof c=="function"&&c()}catch(Ui){}},Va=({k:Y,label:ft})=>React.createElement("button",{type:"button",onClick:()=>M(String(Y).toUpperCase()),className:["px-3 py-1.5 rounded-full border text-[12px] font-semibold transition",String(de).toUpperCase()===String(Y).toUpperCase()?"border-white/25 bg-white/10 text-white":"border-white/10 bg-transparent text-white/70 hover:text-white hover:bg-white/5"].join(" ")},ft);return React.createElement("div",{className:"fixed inset-0 z-[10050] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Log Food"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openBarcodeStubSheet)==null||ft.call(Y)}catch(_a){}},className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80","aria-label":"Scan",title:"Scan"},"\u2301"),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80","aria-label":"Close",title:"Close"},"\u2715"))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Va,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(Va,{k:"LUNCH",label:"Lunch"}),React.createElement(Va,{k:"DINNER",label:"Dinner"}),React.createElement(Va,{k:"SNACK",label:"Snacks"})),React.createElement("div",{className:"mt-3"},React.createElement("input",{ref:Oe,value:De,onChange:Y=>Ae(Y.target.value),placeholder:"Search foods",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"}))),React.createElement("div",{className:"flex-1 overflow-auto"},React.createElement("div",{className:"px-4 pt-4 pb-8 space-y-6"},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickAddMacrosSheet)==null||ft.call(Y,h,{mealKey:de||null})}catch(_a){}},className:"rounded-2xl border border-white/10 bg-white/[0.03] hover:bg-white/[0.06] transition p-4 text-left"},React.createElement("button",{type:"button",onClick:Y=>{Y.stopPropagation();try{pt(xt.PROFILE)}catch(ft){}},className:"absolute left-3 top-3 h-9 w-9 rounded-full border border-white/15 bg-white/5 hover:bg-white/10 flex items-center justify-center",title:"Profile"},React.createElement(gi,{name:"User",size:16,className:"text-white/85"})),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center text-white/85 text-[16px]"},"\uFF0B"),React.createElement("div",{className:"text-white/35 font-extrabold"},"\u203A")),React.createElement("div",{className:"mt-3 text-[13px] font-extrabold text-white"},"Quick Add"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/55"},"Calories + macros")),React.createElement("button",{type:"button",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openSavedMealsSheet)==null||ft.call(Y,h,{mealKey:de||null})}catch(_a){}},className:"rounded-2xl border border-white/10 bg-white/[0.03] hover:bg-white/[0.06] transition p-4 text-left"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center text-white/85 text-[16px]"},"\u2261"),React.createElement("div",{className:"text-white/35 font-extrabold"},"\u203A")),React.createElement("div",{className:"mt-3 text-[13px] font-extrabold text-white"},"Meals"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/55"},"Saved templates")),React.createElement("button",{type:"button",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openCreateMealSheet)==null||ft.call(Y,h,{mealKey:de||null})}catch(_a){}},className:"rounded-2xl border border-white/10 bg-white/[0.03] hover:bg-white/[0.06] transition p-4 text-left"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center text-white/85 text-[16px]"},"\uFF0B"),React.createElement("div",{className:"text-white/35 font-extrabold"},"\u203A")),React.createElement("div",{className:"mt-3 text-[13px] font-extrabold text-white"},"Create Meal"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/55"},"From foods")),React.createElement("button",{type:"button",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openCreateRecipeSheet)==null||ft.call(Y,h,{mealKey:de||null})}catch(_a){}},className:"rounded-2xl border border-white/10 bg-white/[0.03] hover:bg-white/[0.06] transition p-4 text-left"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center text-white/85 text-[16px]"},"\u{1F373}"),React.createElement("div",{className:"text-white/35 font-extrabold"},"\u203A")),React.createElement("div",{className:"mt-3 text-[13px] font-extrabold text-white"},"Create Recipe"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/55"},"With servings"))),React.createElement("div",null,(()=>{var Y=(De||"").trim().toLowerCase(),ft=gt(),_a=_e(),Ja=new Map(we.map(ga=>[String(ga.id),ga])),Ui=ft.map(ga=>Ja.get(String(ga))).filter(Boolean),qs=[...we].map(ga=>({it:ga,n:Number(_a[String(ga.id)]||0)})).filter(ga=>ga.n>0).sort((ga,Vi)=>Vi.n-ga.n).slice(0,10).map(ga=>ga.it),ki=ve().map(ga=>Ja.get(String(ga))).filter(Boolean).slice(0,10),Vs=Y?[...we].filter(ga=>(String(ga.name||"")+" "+String(ga.brand||"")).toLowerCase().includes(Y)).slice(0,30):[],Ke=({it:ga})=>React.createElement("div",{className:"flex items-center justify-between gap-3 px-4 py-3 border-t border-white/10 first:border-t-0"},React.createElement("button",{type:"button",onClick:()=>{re(ga),je(ga.id)},className:"flex-1 text-left min-w-0",title:"Select"},React.createElement("div",{className:"flex items-center gap-2 min-w-0"},React.createElement("div",{className:"truncate text-[14px] font-semibold text-white"},ga.name),ga.brand?React.createElement("div",{className:"shrink-0 text-[11px] text-white/45"},ga.brand):null),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/55 truncate"},ga.serving," \u2022 ",Math.round(Number(ga.kcal||0))," kcal \u2022 P ",Math.round(Number(ga.p||0))," C ",Math.round(Number(ga.c||0))," F ",Math.round(Number(ga.f||0)))),React.createElement("button",{type:"button",onClick:()=>{try{j(ga.id)}catch(Vi){}},className:["h-9 w-9 rounded-full border border-white/12 flex items-center justify-center font-extrabold",me(ga.id)?"bg-white/12 text-white":"bg-white/5 hover:bg-white/10 text-white/70"].join(" "),"aria-label":"Favorite",title:"Favorite"},me(ga.id)?"\u2605":"\u2606"),React.createElement("button",{type:"button",onClick:()=>Z(ga),className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white font-extrabold","aria-label":"Add",title:"Add"},"+")),ua=({title:ga,items:Vi,empty:$i})=>React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white/60 uppercase tracking-wide"},ga),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/[0.03] overflow-hidden"},Vi&&Vi.length?React.createElement("div",null,Vi.map(Ya=>React.createElement(Ke,{key:Ya.id,it:Ya}))):React.createElement("div",{className:"px-4 py-3 text-[13px] text-white/55"},$i)));return React.createElement("div",{className:"space-y-4"},Y?React.createElement(ua,{title:"Results",items:Vs,empty:"No matches. Try another search or quick add below."}):React.createElement("div",{className:"space-y-4"},React.createElement(ua,{title:"Recent",items:Ui.slice(0,8),empty:"No recent foods yet. Add something to build your list."}),React.createElement(ua,{title:"Frequent",items:qs.slice(0,8),empty:"Your frequent foods will appear as you log."}),React.createElement(ua,{title:"Favorites",items:ki.slice(0,8),empty:"Star foods to pin them here."}),React.createElement(ua,{title:"Common",items:we.slice(0,8),empty:"\u2014"})))})()),React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white/60 uppercase tracking-wide"},"Quick add"),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/[0.03] p-4"},React.createElement("div",{className:"grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Food name"),React.createElement("input",{value:Qe,onChange:Y=>nt(Y.target.value),placeholder:"e.g., Chicken breast",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"})),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Serving"),React.createElement("input",{value:Lt,onChange:Y=>ze(Y.target.value),placeholder:"e.g., 100g",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Calories"),React.createElement("input",{value:Le,inputMode:"decimal",onChange:Y=>se(Ra(Y.target.value)),placeholder:"0",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}))),React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Macros (optional)"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("input",{value:at,inputMode:"decimal",onChange:Y=>Pe(Ra(Y.target.value)),placeholder:"Protein",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}),React.createElement("input",{value:Wt,inputMode:"decimal",onChange:Y=>Ha(Ra(Y.target.value)),placeholder:"Carbs",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}),React.createElement("input",{value:qa,inputMode:"decimal",onChange:Y=>oa(Ra(Y.target.value)),placeholder:"Fat",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}))),React.createElement("div",{className:"text-[11px] text-white/45 font-semibold"},"A4.2: Tap a row to prefill. Tap + to add instantly. Use Quick add below for custom foods.")))),React.createElement("div",{className:"h-12"}))),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 bg-[#0b0b0f]"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:c,className:"px-4 py-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[13px] font-bold text-white/80"},"Cancel"),React.createElement("button",{type:"button",disabled:!ri,onClick:Da,className:["flex-1 px-4 py-3 rounded-2xl border text-[13px] font-bold",ri?"border-white/15 bg-white/10 hover:bg-white/15 text-white":"border-white/10 bg-white/5 text-white/35"].join(" ")},"Add")))))},Ko=({title:e="",onClose:a,children:r})=>React.createElement("div",{className:"fixed inset-0 z-[9999] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-white/10"},React.createElement("button",{type:"button",className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 text-white/80 hover:bg-white/10 active:scale-[0.99]",onClick:a},"Back"),React.createElement("div",{className:"text-[14px] font-semibold text-white/90 truncate"},e)),React.createElement("div",{className:"flex-1 overflow-auto p-4"},r))),il=({dateKey:e=null,onDone:a})=>{var r=React.useMemo(()=>{try{return e||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(oa){return e||null}},[e]),c="__fof_nutrition_events_v1",h="__fof_food_favorites_custom_v1",V=React.useCallback(()=>{try{var oa=localStorage.getItem(c),Ra=oa?JSON.parse(oa):[];return Array.isArray(Ra)?Ra:[]}catch(oa){return[]}},[]),de=React.useCallback(oa=>{try{localStorage.setItem(c,JSON.stringify(oa||[]))}catch(Ra){}},[]),[M,De]=React.useState(()=>V());React.useEffect(()=>{var oa=()=>{try{De(V())}catch(Ra){}};return window.addEventListener("flowofit:logUpdated",oa),window.addEventListener("flowofit:logsUpdated",oa),window.addEventListener("flowofit:workoutLogsUpdated",oa),window.addEventListener("storage",oa),()=>{window.removeEventListener("flowofit:logUpdated",oa),window.removeEventListener("flowofit:logsUpdated",oa),window.removeEventListener("flowofit:workoutLogsUpdated",oa),window.removeEventListener("storage",oa)}},[V]),React.useEffect(()=>{try{De(V())}catch(oa){}},[V]);var Ae=React.useMemo(()=>{var oa=(M||[]).filter(Ra=>(Ra&&Ra.dk)===r);return oa.sort((Ra,ri)=>String(ri.ts||"").localeCompare(String(Ra.ts||""))),oa},[M,r]),Oe=React.useMemo(()=>{var oa={cal:0,p:0,c:0,f:0};for(var Ra of Ae)oa.cal+=Number(Ra.calories||0),oa.p+=Number(Ra.p||0),oa.c+=Number(Ra.c||0),oa.f+=Number(Ra.f||0);return oa},[Ae]),[N,Ne]=React.useState(null),G=React.useMemo(()=>N?Ae.find(oa=>oa.id===N):null,[N,Ae]),[we,$t]=React.useState("Breakfast"),[gt,_e]=React.useState(""),[ve,me]=React.useState(""),[j,je]=React.useState(""),[re,Z]=React.useState(""),[Qe,nt]=React.useState(""),[Lt,ze]=React.useState(""),Le=React.useCallback(()=>{Ne(null),$t("Breakfast"),_e(""),me(""),je(""),Z(""),nt(""),ze("")},[]);React.useEffect(()=>{var oa,Ra,ri,Da,Va;if(G)try{$t(G.type||"Breakfast"),_e(G.name||""),me(String((oa=G.calories)!=null?oa:"")),je(String((Ra=G.p)!=null?Ra:"")),Z(String((ri=G.c)!=null?ri:"")),nt(String((Da=G.f)!=null?Da:"")),ze(String((Va=G.notes)!=null?Va:""))}catch(Y){}},[G]);var se=oa=>String(oa||"").replace(/[^\d.]/g,""),at=(gt||"").trim().length>0,Pe=()=>{if(!at)return;var oa=typeof window.__fof_nowIso=="function"?window.__fof_nowIso():new Date().toISOString(),Ra=N||(typeof window.__fof_uuid=="function"?window.__fof_uuid():"m_"+Math.random().toString(16).slice(2)),ri={id:Ra,dk:r,type:we,name:(gt||"").trim(),calories:Number(se(ve)||0),p:Number(se(j)||0),c:Number(se(re)||0),f:Number(se(Qe)||0),notes:(Lt||"").trim(),ts:Date.now(),src:"IC"},Da=(()=>{var Va=V(),Y=Va.findIndex(ft=>ft&&ft.id===Ra);return Y>=0?(Va[Y]={...Va[Y],...ri},Va):(Va.push(ri),Va)})();de(Da),De(Da);try{window.__FOF&&window.__FOF.bump&&window.__FOF.bump("nutrition")}catch(Va){}try{window.__fof_track&&window.__fof_track("nutrition_meal_saved",{dk:r,id:Ra,type:we,calories:ri.calories})}catch(Va){}Le();try{a&&a({ok:!0,id:Ra,dk:r})}catch(Va){}},Wt=oa=>{if(!oa||!(typeof window.confirm=="function"?window.confirm("Delete this meal?"):!0))return;var ri=V().filter(Da=>Da&&Da.id!==oa);de(ri),De(ri),N===oa&&Le();try{window.__fof_track&&window.__fof_track("nutrition_meal_deleted",{dk:r,id:oa})}catch(Da){}},Ha=oa=>{Ne(oa);try{window.scrollTo({top:0,behavior:"smooth"})}catch(Ra){}},qa=({label:oa,value:Ra})=>React.createElement("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-black/30 px-3 py-2"},React.createElement("div",{className:"text-[12px] text-white/70"},oa),React.createElement("div",{className:"text-[14px] font-extrabold text-white"},Ra));return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/35 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/60"},"Home"),React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Nutrition")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80"},r||"\u2014")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement(qa,{label:"Calories",value:Math.round(Oe.cal)}),React.createElement(qa,{label:"Protein (g)",value:Math.round(Oe.p)}),React.createElement(qa,{label:"Carbs (g)",value:Math.round(Oe.c)}),React.createElement(qa,{label:"Fat (g)",value:Math.round(Oe.f)})),React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Quick add meals and keep the day totals accurate. (Targets + adherence come next in the Metabolic Engine step.)")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},N?"Edit meal":"Add meal"),N?React.createElement("button",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80 hover:bg-white/10",onClick:Le},"Cancel edit"):null),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Meal"),React.createElement("select",{value:we,onChange:oa=>$t(oa.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 focus:outline-none focus:ring-2 focus:ring-white/20"},React.createElement("option",null,"Breakfast"),React.createElement("option",null,"Lunch"),React.createElement("option",null,"Dinner"),React.createElement("option",null,"Snack"),React.createElement("option",null,"Pre-workout"),React.createElement("option",null,"Post-workout"))),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Calories"),React.createElement("input",{value:ve,onChange:oa=>me(se(oa.target.value)),inputMode:"decimal",placeholder:"0",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}))),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Food / Meal name"),React.createElement("input",{value:gt,onChange:oa=>_e(oa.target.value),placeholder:"e.g., Chicken bowl, Oats + whey",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Protein (g)"),React.createElement("input",{value:j,onChange:oa=>je(se(oa.target.value)),inputMode:"decimal",placeholder:"0",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Carbs (g)"),React.createElement("input",{value:re,onChange:oa=>Z(se(oa.target.value)),inputMode:"decimal",placeholder:"0",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Fat (g)"),React.createElement("input",{value:Qe,onChange:oa=>nt(se(oa.target.value)),inputMode:"decimal",placeholder:"0",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}))),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Notes (optional)"),React.createElement("textarea",{value:Lt,onChange:oa=>ze(oa.target.value),placeholder:"Anything to remember?",className:"w-full min-h-[88px] rounded-2xl border border-white/10 bg-black/40 px-3 py-3 text-[14px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("button",{className:"mt-3 w-full rounded-2xl px-4 py-3 text-[14px] font-extrabold "+(at?"border border-white/10 bg-white/10 text-white hover:bg-white/15":"border border-white/8 bg-white/5 text-white/30"),onClick:Pe},N?"Save changes":"Add meal")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Today\u2019s meals"),React.createElement("div",{className:"text-[12px] text-white/60"},Ae.length," items")),Ae.length===0?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/30 p-3 text-[13px] text-white/70"},"No meals logged yet. Add your first meal above."):React.createElement("div",{className:"mt-3 space-y-2"},Ae.map(oa=>React.createElement("div",{key:oa.id,role:"button",tabIndex:0,onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("FOOD_ENTRY_DETAIL_SHEET_V1",{dateKey:r,entryId:oa.id}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"FOOD_ENTRY_DETAIL_SHEET_V1",props:{dateKey:r,entryId:oa.id}}}))}catch(Ra){}},onKeyDown:Ra=>{try{(Ra.key==="Enter"||Ra.key===" ")&&(Ra.preventDefault(),window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("FOOD_ENTRY_DETAIL_SHEET_V1",{dateKey:r,entryId:oa.id}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"FOOD_ENTRY_DETAIL_SHEET_V1",props:{dateKey:r,entryId:oa.id}}})))}catch(ri){}},className:"rounded-3xl border border-white/10 bg-black/35 p-3 cursor-pointer hover:bg-black/45"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[11px] text-white/80"},oa.type||"Meal"),React.createElement("div",{className:"truncate text-[14px] font-extrabold text-white"},oa.name||"\u2014")),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},Math.round(Number(oa.calories||0))," cal \u2022 P ",Math.round(Number(oa.p||0))," \u2022 C ",Math.round(Number(oa.c||0))," \u2022 F ",Math.round(Number(oa.f||0))),oa.notes?React.createElement("div",{className:"mt-1 text-[12px] text-white/55 line-clamp-2"},oa.notes):null),React.createElement("div",{className:"flex shrink-0 flex-col gap-2"},React.createElement("button",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80 hover:bg-white/10",onClick:()=>Ha(oa.id)},"Edit"),React.createElement("button",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80 hover:bg-white/10",onClick:()=>Wt(oa.id)},"Delete"))))))),React.createElement("button",{className:"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-[14px] font-extrabold text-white/90 hover:bg-white/10",onClick:()=>{try{a&&a({ok:!0,dk:r,count:Ae.length})}catch(oa){}}},"Done"))},Cr=({dateKey:e=null,onDone:a})=>{var r=React.useMemo(()=>{try{return e||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(re){return e||null}},[e]),[c,h]=React.useState(null),[V,de]=React.useState(""),[M,De]=React.useState("Strength"),[Ae,Oe]=React.useState(""),[N,Ne]=React.useState(""),[G,we]=React.useState(0);React.useEffect(()=>{var re=Z=>{try{var Qe=Z&&Z.detail?Z.detail:{};String(Qe.dateKey)===String(r)&&String(Qe.type||"").toLowerCase()==="workout"&&we(nt=>nt+1)}catch(Qe){}};try{window.addEventListener("flowofit:logsUpdated",re)}catch(Z){}return()=>{try{window.removeEventListener("flowofit:logsUpdated",re)}catch(Z){}}},[r]);var $t=React.useMemo(()=>{try{var re=window.__fof_getLogBucket?window.__fof_getLogBucket(r,"workout"):[];return(Array.isArray(re)?[...re]:[]).sort((Z,Qe)=>(Qe.ts||0)-(Z.ts||0))}catch(re){return[]}},[r,G]),gt=()=>{h(null),de(""),De("Strength"),Oe(""),Ne("")},_e=re=>{var Z=$t.find(Qe=>Qe&&Qe.id===re);if(Z){h(re),de(String(Z.title||"")),De(String(Z.meta&&Z.meta.kind?Z.meta.kind:Z.kind||"Strength")),Oe(String(Z.meta&&Z.meta.duration?Z.meta.duration:Z.duration||"")),Ne(String(Z.meta&&(Z.meta.note||Z.meta.notes)?Z.meta.note||Z.meta.notes:Z.notes||""));try{window.__toast&&window.__toast("Editing workout")}catch(Qe){}}},ve=re=>{try{window.__fof_deleteLogEntry&&window.__fof_deleteLogEntry(r,"workout",re),window.__toast&&window.__toast("Workout deleted")}catch(Z){window.__toast&&window.__toast("Could not delete. Try again.")}c===re&&gt()},me=(V||"").trim().length>0,j=()=>{if(!me)return;var re={title:V.trim(),meta:{kind:M,duration:(Ae||"").trim(),note:(N||"").trim()}};try{c?(window.__fof_updateLogEntry&&window.__fof_updateLogEntry(r,"workout",c,re),window.__toast&&window.__toast("Workout updated")):(window.__fof_addLog&&window.__fof_addLog(r,"workout",re),window.__toast&&window.__toast("Workout logged"))}catch(Qe){window.__toast&&window.__toast("Could not save. Try again.");return}var Z={ok:!0,dateKey:r,action:c?"update":"add"};gt();try{a&&a(Z)}catch(Qe){}},je=re=>{re==="Upper"&&(de("Upper Body"),De("Strength")),re==="Lower"&&(de("Lower Body"),De("Strength")),re==="Cardio"&&(de("Cardio"),De("Cardio")),re==="Yoga"&&(de("Yoga"),De("Yoga")),re==="Mobility"&&(de("Mobility"),De("Mobility"))};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"text-[12px] text-white/60"},"Workout logging \u2022 ",r||"Today"),React.createElement("div",{className:"flex flex-wrap gap-2"},["Upper","Lower","Cardio","Yoga","Mobility"].map(re=>React.createElement("button",{key:re,type:"button",onClick:()=>je(re),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-[12px] text-white/80 hover:bg-white/10 active:scale-[0.99]"},re)),c?React.createElement("button",{type:"button",onClick:gt,className:"ml-auto px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white/70 hover:bg-white/10"},"Cancel edit"):null),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4 space-y-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-extrabold text-white"},c?"Edit workout":"Add workout"),React.createElement("div",{className:"text-[12px] text-white/55"},"Log it fast. Keep it real.")),React.createElement("div",{className:"text-[11px] text-white/45"},c?"UPDATE":"NEW")),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Title"),React.createElement("input",{value:V,onChange:re=>de(re.target.value),placeholder:"e.g., Upper Body Strength",className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[14px] text-white/90 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/20"})),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Type"),React.createElement("select",{value:M,onChange:re=>De(re.target.value),className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[14px] text-white/90 focus:outline-none focus:ring-2 focus:ring-white/20"},React.createElement("option",null,"Strength"),React.createElement("option",null,"Cardio"),React.createElement("option",null,"Yoga"),React.createElement("option",null,"Mobility"),React.createElement("option",null,"Sport"))),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Duration (min)"),React.createElement("input",{value:Ae,onChange:re=>Oe(re.target.value),inputMode:"numeric",placeholder:"e.g., 45",className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[14px] text-white/90 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/20"}))),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70 mb-1"},"Notes (optional)"),React.createElement("textarea",{value:N,onChange:re=>Ne(re.target.value),rows:3,placeholder:"e.g., RPE 7, felt strong, no pain",className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[14px] text-white/90 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/20"})),React.createElement("button",{type:"button",className:"w-full rounded-2xl px-4 py-3 text-[14px] font-extrabold "+(me?"bg-white text-black":"bg-white/10 text-white/30"),onClick:j,disabled:!me},c?"Save changes":"Save workout"),React.createElement("div",{className:"text-[11px] text-white/40"},"Stored locally + reflected in Today/Log timelines via ",React.createElement("code",{className:"text-white/50"},"__fof_addLog"),".")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Today\u2019s workouts"),React.createElement("div",{className:"text-[12px] text-white/60"},$t.length," items")),$t.length===0?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/30 p-3 text-[13px] text-white/70"},"No workouts logged yet. Add one above."):React.createElement("div",{className:"mt-3 space-y-2"},$t.map(re=>React.createElement("div",{key:re.id,className:"rounded-3xl border border-white/10 bg-black/35 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[11px] text-white/80"},re.meta&&re.meta.kind?re.meta.kind:"Workout"),React.createElement("div",{className:"truncate text-[14px] font-extrabold text-white"},re.title||"\u2014")),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},(re.meta&&re.meta.duration?String(re.meta.duration):"").trim()?`${String(re.meta.duration).trim()} min \u2022 `:"",new Date(re.ts||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),re.meta&&re.meta.note&&re.meta.note?React.createElement("div",{className:"mt-1 text-[12px] text-white/55 line-clamp-2"},re.meta.note):null),React.createElement("div",{className:"flex shrink-0 flex-col gap-2"},React.createElement("button",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80 hover:bg-white/10",onClick:()=>_e(re.id)},"Edit"),React.createElement("button",{className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white/80 hover:bg-white/10",onClick:()=>ve(re.id)},"Delete"))))))),React.createElement("button",{className:"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-[14px] font-extrabold text-white/90 hover:bg-white/10",onClick:()=>{try{a&&a({ok:!0,dk:r,count:$t.length})}catch(re){}}},"Done"))},Yn=({dateKey:e=null,onDone:a})=>{var r=React.useMemo(()=>{try{return e||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Ra){return e||null}},[e]),c="__fof_recovery_events_v1",h=React.useCallback(()=>{try{var Ra=localStorage.getItem(c),ri=Ra?JSON.parse(Ra):[];return Array.isArray(ri)?ri:[]}catch(Ra){return[]}},[]),V=React.useCallback(Ra=>{try{localStorage.setItem(c,JSON.stringify(Ra||[]))}catch(ri){}},[]),[de,M]=React.useState(""),[De,Ae]=React.useState("3"),[Oe,N]=React.useState("3"),[Ne,G]=React.useState("Good"),[we,$t]=React.useState("3"),[gt,_e]=React.useState(""),[ve,me]=React.useState(""),[j,je]=React.useState(""),[re,Z]=React.useState(""),[Qe,nt]=React.useState(""),[Lt,ze]=React.useState(null),[Le,se]=React.useState(0),at=React.useMemo(()=>h().filter(ri=>ri&&ri.dateKey===r).sort((ri,Da)=>(Da.ts||0)-(ri.ts||0)),[r,Le,h]),Pe=()=>{ze(null),M(""),Ae("3"),N("3"),G("Good"),$t("3"),_e(""),me(""),je(""),Z(""),nt("")},Wt=Ra=>{var Da,Va,Y,ft,_a,Ja,Ui,qs,_o,ki;var ri=at.find(Vs=>Vs&&Vs.id===Ra);ri&&(ze(Ra),M((Da=ri.sleepHours)!=null?Da:""),Ae(String((Va=ri.sleepQuality)!=null?Va:"3")),N(String((Y=ri.soreness)!=null?Y:"3")),G((ft=ri.mood)!=null?ft:"Good"),$t(String((_a=ri.stress)!=null?_a:"3")),_e((Ja=ri.hrv)!=null?Ja:""),me((Ui=ri.restingHr)!=null?Ui:""),je((qs=ri.hydration)!=null?qs:""),Z((_o=ri.mobilityMin)!=null?_o:""),nt((ki=ri.notes)!=null?ki:""))},Ha=Ra=>{var ri=h().filter(Da=>Da&&Da.id!==Ra);V(ri),se(Da=>Da+1),Lt===Ra&&Pe();try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:r,type:"RECOVERY"}}))}catch(Da){}},qa=()=>{var Ra=h(),ri=Date.now(),Da={id:Lt||xi(),dateKey:r,dk:r,ts:ri,title:"Recovery",sleepHours:de,sleepQuality:De,soreness:Oe,mood:Ne,stress:we,hrv:gt,restingHr:ve,hydration:j,mobilityMin:re,notes:Qe,meta:{sleepHours:de?Number(de):null,sleepQuality:De?Number(De):null,soreness:Oe?Number(Oe):null,mood:Ne,stress:we?Number(we):null,hrv:gt?Number(gt):null,restingHr:ve?Number(ve):null,hydrationLiters:j?Number(j):null,mobilityMin:re?Number(re):null,notes:Qe}};if(Lt){var Va=Ra.findIndex(Y=>Y&&Y.id===Lt);Va>=0?Ra[Va]={...Ra[Va],...Da}:Ra.push(Da)}else Ra.push(Da);V(Ra),se(Va=>Va+1),ze(null);try{a&&a(Da)}catch(Va){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:r,type:"RECOVERY"}}))}catch(Va){}Pe()},oa=({label:Ra,children:ri})=>React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/60"},Ra),React.createElement("div",{className:"mt-1"},ri));return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},Lt?"Edit Recovery":"Log Recovery"),Lt?React.createElement("button",{type:"button",onClick:Pe,className:"rounded-2xl border border-white/12 bg-black/30 px-3 py-1.5 text-[12px] text-white/70"},"Cancel"):null),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement(oa,{label:"Sleep (hours)"},React.createElement("input",{value:de,onChange:Ra=>M(Ra.target.value),placeholder:"e.g., 7.5",inputMode:"decimal",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"})),React.createElement(oa,{label:"Sleep quality"},React.createElement("select",{value:De,onChange:Ra=>Ae(Ra.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white outline-none focus:border-white/20"},React.createElement("option",{value:"1"},"Poor"),React.createElement("option",{value:"2"},"Fair"),React.createElement("option",{value:"3"},"Okay"),React.createElement("option",{value:"4"},"Good"),React.createElement("option",{value:"5"},"Great"))),React.createElement(oa,{label:"Soreness"},React.createElement("select",{value:Oe,onChange:Ra=>N(Ra.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white outline-none focus:border-white/20"},React.createElement("option",{value:"1"},"Low"),React.createElement("option",{value:"2"},"Mild"),React.createElement("option",{value:"3"},"Moderate"),React.createElement("option",{value:"4"},"High"),React.createElement("option",{value:"5"},"Very high"))),React.createElement(oa,{label:"Stress"},React.createElement("select",{value:we,onChange:Ra=>$t(Ra.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white outline-none focus:border-white/20"},React.createElement("option",{value:"1"},"Low"),React.createElement("option",{value:"2"},"Mild"),React.createElement("option",{value:"3"},"Moderate"),React.createElement("option",{value:"4"},"High"),React.createElement("option",{value:"5"},"Very high"))),React.createElement(oa,{label:"Mood"},React.createElement("select",{value:Ne,onChange:Ra=>G(Ra.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white outline-none focus:border-white/20"},React.createElement("option",null,"Great"),React.createElement("option",null,"Good"),React.createElement("option",null,"Okay"),React.createElement("option",null,"Low"))),React.createElement(oa,{label:"HRV (ms)"},React.createElement("input",{value:gt,onChange:Ra=>_e(Ra.target.value),placeholder:"optional",inputMode:"decimal",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"})),React.createElement(oa,{label:"Resting HR"},React.createElement("input",{value:ve,onChange:Ra=>me(Ra.target.value),placeholder:"optional",inputMode:"decimal",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"})),React.createElement(oa,{label:"Hydration (L)"},React.createElement("input",{value:j,onChange:Ra=>je(Ra.target.value),placeholder:"optional",inputMode:"decimal",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"})),React.createElement("div",{className:"col-span-2"},React.createElement(oa,{label:"Mobility / Stretch (min)"},React.createElement("input",{value:re,onChange:Ra=>Z(Ra.target.value),placeholder:"optional",inputMode:"decimal",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"}))),React.createElement("div",{className:"col-span-2"},React.createElement(oa,{label:"Notes"},React.createElement("textarea",{value:Qe,onChange:Ra=>nt(Ra.target.value),rows:2,placeholder:"optional",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] text-white placeholder:text-white/30 outline-none focus:border-white/20"})))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement(Xo,{tone:"cyan",onClick:qa,className:"w-full justify-center"},Lt?"Save changes":"Save"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Today\u2019s recovery logs"),React.createElement("div",{className:"mt-3 space-y-2"},at.length===0?React.createElement("div",{className:"text-[12px] text-white/55"},"No recovery entries yet."):at.map(Ra=>React.createElement("div",{key:Ra.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-semibold text-white"},"Sleep ",Ra.sleepHours||"\u2014","h \u2022 Quality ",Ra.sleepQuality||"\u2014"," \u2022 Soreness ",Ra.soreness||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Mood ",Ra.mood||"\u2014"," \u2022 Stress ",Ra.stress||"\u2014",Ra.hrv?` \u2022 HRV ${Ra.hrv}`:"",Ra.restingHr?` \u2022 RHR ${Ra.restingHr}`:"",Ra.hydration?` \u2022 Hydration ${Ra.hydration}L`:"",Ra.mobilityMin?` \u2022 Mobility ${Ra.mobilityMin}m`:""),Ra.notes?React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Ra.notes):null),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Wt(Ra.id),className:"rounded-2xl border border-white/12 bg-black/30 px-2 py-1 text-[12px] text-white/75"},"Edit"),React.createElement("button",{type:"button",onClick:()=>Ha(Ra.id),className:"rounded-2xl border border-white/12 bg-black/30 px-2 py-1 text-[12px] text-white/75"},"Delete"))))))))},ml=({dateKey:e=null,onDone:a})=>{var r=React.useMemo(()=>{try{return e||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Lt){return e||null}},[e]),c="__fof_body_events_v1",h=React.useCallback(()=>{try{var Lt=localStorage.getItem(c),ze=Lt?JSON.parse(Lt):[];return Array.isArray(ze)?ze:[]}catch(Lt){return[]}},[]),V=React.useCallback(Lt=>{try{localStorage.setItem(c,JSON.stringify(Lt||[]))}catch(ze){}},[]),[de,M]=React.useState("WEIGHT"),[De,Ae]=React.useState("kg"),[Oe,N]=React.useState(""),[Ne,G]=React.useState(""),[we,$t]=React.useState(null),[gt,_e]=React.useState(0);React.useEffect(()=>{if(de==="BODY_FAT"){Ae("%");return}if(de==="WEIGHT"){De==="%"&&Ae("kg");return}if(de==="OTHER"){De==="%"&&Ae("");return}},[de]);var ve=Lt=>({WEIGHT:"Weight",BODY_FAT:"Body Fat %",WAIST:"Waist",HIP:"Hip",CHEST:"Chest",ARM:"Arm",THIGH:"Thigh",OTHER:"Other"})[Lt]||"Body Metric",me=React.useMemo(()=>de==="WEIGHT"?["kg","lb"]:de==="BODY_FAT"?["%"]:de==="OTHER"?["","kg","lb","cm","in","%"]:["cm","in"],[de]),j=React.useMemo(()=>h().filter(ze=>ze&&ze.dateKey===r).sort((ze,Le)=>(Le.ts||0)-(ze.ts||0)),[r,gt,h]),je=React.useMemo(()=>h().filter(ze=>ze&&ze.metric===de).sort((ze,Le)=>(Le.ts||0)-(ze.ts||0)).slice(0,7),[de,gt,h]),re=()=>{N(""),G(""),$t(null)},Z=()=>{var Lt=String(Oe||"").trim();if(!Lt)return;var ze=h(),Le=Date.now();if(we){var se=ze.findIndex(at=>at&&at.id===we);se>=0&&(ze[se]={...ze[se],dateKey:r,dk:r,metric:de,unit:De,value:Lt,note:Ne,title:ve(de),ts:Le})}else ze.push({id:Ys(),dateKey:r,dk:r,ts:Le,type:"BODY",metric:de,unit:De,value:Lt,note:Ne,title:ve(de)});V(ze);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:r,type:"BODY"}}))}catch(se){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dateKey:r,type:"BODY"}}))}catch(se){}_e(se=>se+1),re();try{a&&a({ok:!0})}catch(se){}},Qe=Lt=>{var se;var Le=h().find(at=>at&&at.id===Lt);Le&&($t(Lt),M(Le.metric||"WEIGHT"),Ae(Le.unit||"kg"),N(String((se=Le.value)!=null?se:"")),G(Le.note||""))},nt=Lt=>{var ze=h().filter(Le=>!(Le&&Le.id===Lt));V(ze);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:r,type:"BODY"}}))}catch(Le){}try{window.dispatchEvent(new CustomEvent("flowofit:logUpdated",{detail:{dateKey:r,type:"BODY"}}))}catch(Le){}_e(Le=>Le+1),we===Lt&&re()};return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"Metric"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("select",{value:de,onChange:Lt=>M(Lt.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"WEIGHT"},"Weight"),React.createElement("option",{value:"BODY_FAT"},"Body Fat %"),React.createElement("option",{value:"WAIST"},"Waist"),React.createElement("option",{value:"HIP"},"Hip"),React.createElement("option",{value:"CHEST"},"Chest"),React.createElement("option",{value:"ARM"},"Arm"),React.createElement("option",{value:"THIGH"},"Thigh"),React.createElement("option",{value:"OTHER"},"Other")),React.createElement("select",{value:De,onChange:Lt=>Ae(Lt.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25"},me.map(Lt=>React.createElement("option",{key:Lt||"none",value:Lt},Lt||"unit")))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("input",{value:Oe,onChange:Lt=>N(Lt.target.value),inputMode:"decimal",placeholder:"Value",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25"}),React.createElement("button",{type:"button",onClick:Z,className:"rounded-2xl bg-white/10 px-3 py-3 text-[14px] font-semibold text-white hover:bg-white/15 active:bg-white/20"},we?"Save":"Add")),React.createElement("textarea",{value:Ne,onChange:Lt=>G(Lt.target.value),placeholder:"Notes (optional)",className:"mt-3 w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25",rows:2})),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[13px] text-white/80"},"Trend (last 7)"),React.createElement("div",{className:"text-[12px] text-white/50"},ve(de))),React.createElement("div",{className:"mt-2 space-y-2"},je.length===0?React.createElement("div",{className:"text-[13px] text-white/45"},"No entries yet."):je.map(Lt=>React.createElement("div",{key:Lt.id,className:"flex items-center justify-between rounded-2xl border border-white/10 bg-black/20 px-3 py-2"},React.createElement("div",{className:"text-[13px] text-white/80"},Lt.value," ",Lt.unit),React.createElement("div",{className:"text-[12px] text-white/45"},new Date(Lt.ts||0).toLocaleDateString()))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"Today (",r,")"),React.createElement("div",{className:"mt-2 space-y-2"},j.length===0?React.createElement("div",{className:"text-[13px] text-white/45"},"No body metrics logged today."):j.map(Lt=>React.createElement("div",{key:Lt.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-semibold text-white"},ve(Lt.metric),": ",Lt.value," ",Lt.unit),Lt.note?React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Lt.note):null),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Qe(Lt.id),className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[12px] text-white/80 hover:bg-white/10"},"Edit"),React.createElement("button",{type:"button",onClick:()=>nt(Lt.id),className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[12px] text-white/80 hover:bg-white/10"},"Delete"))))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"Progress photos"),React.createElement("div",{className:"mt-2 text-[13px] text-white/45"},"Coming next (placeholder stub).")))},vr=({dateKey:e=null,onDone:a})=>{var r=React.useMemo(()=>{try{return e||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Le){return e||null}},[e]),c="__fof_habits_events_v1",h=React.useCallback(()=>{try{var Le=localStorage.getItem(c),se=Le?JSON.parse(Le):[];return Array.isArray(se)?se:[]}catch(Le){return[]}},[]),V=React.useCallback(Le=>{try{localStorage.setItem(c,JSON.stringify(Le||[]))}catch(se){}},[]),[de,M]=React.useState("WATER"),[De,Ae]=React.useState("DONE"),[Oe,N]=React.useState(""),[Ne,G]=React.useState(""),[we,$t]=React.useState(""),[gt,_e]=React.useState(""),[ve,me]=React.useState(null),[j,je]=React.useState(0),re=Le=>({WATER:"Hydration",STEPS:"Steps",STRETCH:"Stretching",MOBILITY:"Mobility",MEDITATION:"Meditation",SUPPLEMENTS:"Supplements",OTHER:"Other"})[Le]||"Habit",Z=React.useMemo(()=>h().filter(se=>se&&se.dateKey===r).sort((se,at)=>(at.ts||0)-(se.ts||0)),[r,j,h]),Qe=()=>{N(""),G(""),$t(""),_e(""),me(null)},nt=()=>{var Le=h(),se=Date.now();if(ve){var at=Le.findIndex(Pe=>Pe&&Pe.id===ve);at>=0&&(Le[at]={...Le[at],habit:de,status:De,note:Oe,qty:Ne,unit:we,durationMin:gt,meta:{qty:Ne?Number(Ne):null,unit:we,durationMin:gt?Number(gt):null},title:re(de),ts:se})}else Le.push({id:Ys(),dateKey:r,ts:se,type:"HABIT",habit:de,status:De,note:Oe,title:re(de)});V(Le),je(at=>at+1),Qe();try{a&&a({ok:!0})}catch(at){}},Lt=Le=>{var se=h().find(at=>at&&at.id===Le);se&&(me(Le),M(se.habit||"WATER"),Ae(se.status||"DONE"),N(se.note||""))},ze=Le=>{V(h().filter(se=>!(se&&se.id===Le))),je(se=>se+1),ve===Le&&Qe()};return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"Habit"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("select",{value:de,onChange:Le=>M(Le.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"WATER"},"Hydration"),React.createElement("option",{value:"STEPS"},"Steps"),React.createElement("option",{value:"STRETCH"},"Stretching"),React.createElement("option",{value:"MOBILITY"},"Mobility"),React.createElement("option",{value:"MEDITATION"},"Meditation"),React.createElement("option",{value:"SUPPLEMENTS"},"Supplements"),React.createElement("option",{value:"OTHER"},"Other")),React.createElement("select",{value:De,onChange:Le=>Ae(Le.target.value),className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"DONE"},"Done"),React.createElement("option",{value:"PARTIAL"},"Partial"),React.createElement("option",{value:"SKIPPED"},"Skipped"))),React.createElement("textarea",{value:Oe,onChange:Le=>N(Le.target.value),placeholder:"Notes (optional)",className:"mt-3 w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white outline-none focus:border-white/25",rows:2}),React.createElement("button",{type:"button",onClick:nt,className:"mt-3 w-full rounded-2xl bg-white/10 px-3 py-3 text-[14px] font-semibold text-white hover:bg-white/15 active:bg-white/20"},ve?"Save changes":"Add habit")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"Today (",r,")"),React.createElement("div",{className:"mt-2 space-y-2"},Z.length===0?React.createElement("div",{className:"text-[13px] text-white/45"},"No habits logged today."):Z.map(Le=>React.createElement("div",{key:Le.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-semibold text-white"},re(Le.habit)," \u2014 ",Le.status),Le.qty||Le.durationMin||Le.unit?React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Le.qty?`${Le.qty}${Le.unit?` ${Le.unit}`:""}`:"",Le.qty&&Le.durationMin?" \u2022 ":"",Le.durationMin?`${Le.durationMin} min`:""):null,Le.note?React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Le.note):null),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Lt(Le.id),className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[12px] text-white/80 hover:bg-white/10"},"Edit"),React.createElement("button",{type:"button",onClick:()=>ze(Le.id),className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[12px] text-white/80 hover:bg-white/10"},"Delete"))))))))},Sl=({onDone:e})=>{var a=React.useMemo(()=>{try{return window.__FOF&&window.__FOF.getCapacity?window.__FOF.getCapacity():{score:60,zone:"MID"}}catch(de){return{score:60,zone:"MID"}}},[]),r=Number(a&&a.score!=null?a.score:60),c=String(a&&a.zone||(r>=75?"HIGH":r>=45?"MID":"LOW")).toUpperCase(),h=c==="HIGH"?{title:"High Capacity",note:"You can push intensity if your plan calls for it."}:c==="MID"?{title:"Mid Capacity",note:"A moderate session works best."}:{title:"Low Capacity",note:"Prioritize recovery and keep training light."},V=()=>{try{var de=[`Capacity is your readiness score (0\u2013100). Today: ${Math.round(r)}/100 \u2192 ${c}.`,"It changes based on your recent training load, recovery inputs, and logged habits.","We are not changing the Capacity bar behavior anywhere \u2014 this is a detail view only."].join(`
`);window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"How Capacity works",body:de}}))}catch(de){}};return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Capacity"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold tracking-tight"},Math.round(r),"/100"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},h.title," \u2014 ",h.note)),React.createElement("div",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold "+(c==="HIGH"?"bg-emerald-500/10 border-emerald-400/25 text-emerald-200":c==="MID"?"bg-amber-500/10 border-amber-400/25 text-amber-200":"bg-rose-500/10 border-rose-400/25 text-rose-200")},c)),React.createElement("div",{className:"mt-3 h-2.5 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-white/60",style:{width:Math.max(0,Math.min(100,r))+"%"}})),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:V,className:"flex-1 rounded-2xl border border-white/12 bg-black/30 px-3 py-2.5 text-[13px] font-semibold text-white/90 hover:bg-white/10"},"Why this score?"),React.createElement("button",{type:"button",onClick:()=>{try{e&&e({action:"close"})}catch(de){}},className:"rounded-2xl border border-white/12 bg-white/10 px-4 py-2.5 text-[13px] font-semibold hover:bg-white/15 active:scale-[0.99]"},"Done"))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold"},"Suggested action"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold"},"Train \u2022 Modify \u2022 Recover"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Deterministic recommendation based on zone.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold"},"Risk flags"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold"},"None (demo)"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Escalations are stubbed until linked flows arrive."))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold"},"Quick actions"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openers&&window.__fof_openers.openRecoveryLogger&&window.__fof_openers.openRecoveryLogger(null)}catch(de){}},className:"rounded-3xl border border-white/12 bg-black/30 p-4 text-left hover:bg-white/10 active:scale-[0.99] transition"},React.createElement("div",{className:"text-[12px] text-white/60 font-semibold"},"Recovery"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold"},"Log sleep / soreness")),React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openers&&window.__fof_openers.openWorkoutLogger&&window.__fof_openers.openWorkoutLogger(null)}catch(de){}},className:"rounded-3xl border border-white/12 bg-black/30 p-4 text-left hover:bg-white/10 active:scale-[0.99] transition"},React.createElement("div",{className:"text-[12px] text-white/60 font-semibold"},"Training"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold"},"Log a workout")))))},sl=({onDone:e})=>{var a="fof_goal_focus_v1",r="fof_goal_priority_v1",c=(()=>{try{return typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():{}}catch(at){return{}}})(),h=String((c==null?void 0:c.relationship)||(c==null?void 0:c.clientRelationship)||(c==null?void 0:c.mode)||"").toUpperCase()==="LINKED",[V,de]=React.useState(()=>{try{return localStorage.getItem(a)||(c==null?void 0:c.emphasis)||"FITNESS"}catch(at){return(c==null?void 0:c.emphasis)||"FITNESS"}}),[M,De]=React.useState(()=>{try{return localStorage.getItem(r)||"PERFORMANCE"}catch(at){return"PERFORMANCE"}}),Ae="fof_goal_intent_v1",N=(()=>{try{return JSON.parse(localStorage.getItem(Ae)||"null")}catch(at){return null}})()||{},[Ne,G]=React.useState(!1),[we,$t]=React.useState(1),[gt,_e]=React.useState(!1),[ve,me]=React.useState(()=>String(N.primary||(c==null?void 0:c.primaryGoal)||(c==null?void 0:c.goal)||"GENERAL").toUpperCase()),[j,je]=React.useState(()=>String(N.horizon||"8W").toUpperCase()),[re,Z]=React.useState(()=>String(N.daysPerWeek||"4")),[Qe,nt]=React.useState(()=>String(N.note||"")),Lt=()=>{var at={primary:String(ve||"GENERAL").toUpperCase(),horizon:String(j||"8W").toUpperCase(),daysPerWeek:String(re||"4"),note:String(Qe||"").slice(0,160),updatedAt:Date.now()};try{localStorage.setItem(Ae,JSON.stringify(at))}catch(Pe){}try{typeof window.__fof_setClientContext=="function"&&window.__fof_setClientContext(Pe=>({...Pe||{},goals:{...(Pe==null?void 0:Pe.goals)||{},intent:at}}),"goalIntentSave")}catch(Pe){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:`Goal intent saved: ${at.primary} \u2022 ${at.horizon} \u2022 ${at.daysPerWeek}d/wk`}}))}catch(Pe){}G(!1),$t(1)},ze=()=>{var at=String(V||"FITNESS").toUpperCase(),Pe=String(M||"PERFORMANCE").toUpperCase();try{localStorage.setItem(a,at)}catch(Wt){}try{localStorage.setItem(r,Pe)}catch(Wt){}try{typeof window.__fof_setClientContext=="function"&&window.__fof_setClientContext(Wt=>({...Wt||{},emphasis:at,goalPriority:Pe,goals:{...(Wt==null?void 0:Wt.goals)||{},focus:at,priority:Pe,updatedAt:Date.now()}}),"goalManagerSave")}catch(Wt){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:`Goals updated: ${at} \u2022 ${Pe}`}}))}catch(Wt){}typeof e=="function"&&e()},Le=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"Request sent",body:"Your coach has been notified to review your goals (demo)."}}))}catch(at){}},se=({active:at,children:Pe,onClick:Wt})=>React.createElement("button",{type:"button",onClick:Wt,className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold tracking-wide "+(at?"border-emerald-400/40 bg-emerald-400/10 text-emerald-100":"border-white/12 bg-black/30 hover:bg-white/10 text-white/80")},Pe);return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[15px] font-extrabold"},"Goal Manager"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Set your focus and priorities. These drive defaults across Plan, Today, and Yoga gating.")),React.createElement("button",{type:"button",onClick:()=>{try{e&&e()}catch(at){}},className:"h-10 w-10 rounded-2xl bg-white/10 hover:bg-white/15","aria-label":"Close"},"\u2715")),React.createElement("div",{className:"mt-4"},React.createElement("button",{type:"button",onClick:()=>_e(!0),className:"w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"How goals relate to readiness"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 leading-snug"},"Goals choose the \u201Cwhat\u201D and \u201Cwhy\u201D. Capacity modifies \u201Chow hard\u201D today.")),React.createElement("div",{className:"shrink-0 inline-flex items-center gap-2 text-[11px] font-extrabold text-white/70"},React.createElement(gi,{name:"Info",size:16}))))),h?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Linked client"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 leading-snug"},"Your coach may enforce goal constraints. You can still set preferences and request updates.")):null,React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Focus"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["FITNESS","NUTRITION","YOGA","HYBRID"].map(at=>React.createElement(se,{key:at,active:String(V).toUpperCase()===at,onClick:()=>de(at)},at)))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Priority"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},[["PERFORMANCE","Performance"],["MUSCLE","Build Muscle"],["FAT_LOSS","Fat Loss"],["MOBILITY","Mobility"],["RECOVERY","Recovery"],["STRESS","Stress / Sleep"]].map(([at,Pe])=>React.createElement(se,{key:at,active:String(M).toUpperCase()===at,onClick:()=>De(at)},Pe)))),React.createElement("div",{className:"mt-5 rounded-3xl border border-white/12 bg-black/25 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Advanced"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold"},"Edit goal (preview)"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 leading-snug"},"Update your ",React.createElement("span",{className:"text-white/85 font-semibold"},"goal intent")," (what you\u2019re trying to achieve). This will not auto-change your plan yet.")),React.createElement("button",{type:"button",onClick:()=>{G(at=>!at),$t(1)},className:"px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-[12px] font-extrabold"},Ne?"Close":"Edit")),Ne?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",{className:"flex items-center gap-2"},[1,2,3].map(at=>React.createElement("button",{key:at,type:"button",onClick:()=>$t(at),className:"h-8 px-3 rounded-2xl border text-[12px] font-extrabold "+(we===at?"border-white/30 bg-white/10 text-white":"border-white/10 bg-black/20 text-white/55 hover:bg-white/5")},at===1?"Goal":at===2?"Cadence":"Preview"))),we===1?React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Primary goal"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},[["STRENGTH","Strength"],["FAT_LOSS","Fat loss"],["ENDURANCE","Endurance"],["MOBILITY","Mobility"],["GENERAL","General fitness"]].map(([at,Pe])=>React.createElement(se,{key:at,active:String(ve).toUpperCase()===at,onClick:()=>me(at)},Pe))),React.createElement("div",{className:"mt-4 text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Note (optional)"),React.createElement("input",{value:Qe,onChange:at=>nt(at.target.value),placeholder:"Example: knee-friendly, travel week, build habit\u2026",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[13px] text-white placeholder:text-white/35 outline-none focus:border-white/20"}),React.createElement("div",{className:"mt-4 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>$t(2),className:"px-4 py-3 rounded-2xl bg-white text-black font-extrabold text-[13px] hover:opacity-90"},"Next"))):null,we===2?React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Time horizon"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},[["4W","4 weeks"],["8W","8 weeks"],["12W","12 weeks"]].map(([at,Pe])=>React.createElement(se,{key:at,active:String(j).toUpperCase()===at,onClick:()=>je(at)},Pe))),React.createElement("div",{className:"mt-4 text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Days per week"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["3","4","5","6"].map(at=>React.createElement(se,{key:at,active:String(re)===at,onClick:()=>Z(at)},at," days"))),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>$t(1),className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-[13px]"},"Back"),React.createElement("button",{type:"button",onClick:()=>$t(3),className:"px-4 py-3 rounded-2xl bg-white text-black font-extrabold text-[13px] hover:opacity-90"},"Preview"))):null,we===3?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Preview"),React.createElement("div",{className:"mt-2 text-[13px] text-white/80 leading-snug"},"Next week suggestions will consider:",React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",null,React.createElement("span",{className:"text-white/60"},"Goal:")," ",React.createElement("span",{className:"text-white font-extrabold"},String(ve).toUpperCase())),React.createElement("div",{className:"mt-1"},React.createElement("span",{className:"text-white/60"},"Horizon:")," ",React.createElement("span",{className:"text-white font-semibold"},String(j).toUpperCase())),React.createElement("div",{className:"mt-1"},React.createElement("span",{className:"text-white/60"},"Cadence:")," ",React.createElement("span",{className:"text-white font-semibold"},String(re)," days/week")),Qe?React.createElement("div",{className:"mt-1"},React.createElement("span",{className:"text-white/60"},"Note:")," ",React.createElement("span",{className:"text-white/70"},Qe)):null),React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"This is ",React.createElement("span",{className:"text-white/70 font-semibold"},"intent-only")," \u2014 it won\u2019t change your plan automatically.")),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>$t(2),className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-[13px]"},"Back"),React.createElement("button",{type:"button",onClick:Lt,className:"px-4 py-3 rounded-2xl bg-white text-black font-extrabold text-[13px] hover:opacity-90"},"Save intent"))):null,React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"Preview-first goals",body:"This flow stores your goal intent and will be used by future adaptive logic. It will not auto-change your plan in this version."}}))}catch(at){}},className:"text-left text-[12px] text-white/60 hover:text-white/80"},"How this works")):React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Current intent: ",React.createElement("span",{className:"text-white font-extrabold"},String(ve||"GENERAL").toUpperCase()),React.createElement("span",{className:"text-white/40"}," \u2022 "),React.createElement("span",{className:"text-white/80 font-semibold"},String(j||"8W").toUpperCase()),React.createElement("span",{className:"text-white/40"}," \u2022 "),React.createElement("span",{className:"text-white/80 font-semibold"},String(re||"4")," days/week")),Qe?React.createElement("div",{className:"mt-1 text-[12px] text-white/55 line-clamp-2"},"Note: ",Qe):null)),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:ze,className:"px-4 py-3 rounded-2xl bg-white text-black font-extrabold text-[13px] hover:opacity-90"},"Save"),h?React.createElement("button",{type:"button",onClick:Le,className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-[13px]"},"Request coach review"):React.createElement("div",{className:"text-[12px] text-white/55"},"Tip: adjust anytime \u2014 your plan will adapt."))),React.createElement(al,{open:gt,title:"Goals \xD7 Capacity",kicker:"Phase 1c",onClose:()=>_e(!1)},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-black"},"Simple rule"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[16px] leading-snug"},"Goals decide ",React.createElement("span",{className:"text-white/90"},"what you\u2019re building"),". Capacity decides ",React.createElement("span",{className:"text-white/90"},"how hard to push today"),"."),React.createElement("div",{className:"mt-2 text-white/65 text-[12px] leading-relaxed"},"Your Capacity Score does ",React.createElement("span",{className:"text-white/85 font-semibold"},"not")," change when you change goals. Changing goals updates your ",React.createElement("span",{className:"text-white/85 font-semibold"},"defaults")," (what shows first, what we prioritize). Capacity then adjusts today\u2019s execution safely.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"What goals change (defaults)"),React.createElement("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-[12px]"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Plan emphasis"),React.createElement("div",{className:"mt-1 text-white/60"},"Which modules and sessions we surface first.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Weekly structure"),React.createElement("div",{className:"mt-1 text-white/60"},"Suggested cadence and recovery spacing.")))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"What capacity changes (today)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70 leading-relaxed"},"Capacity is the safety modifier across all goal types:"),React.createElement("div",{className:"mt-3 space-y-2 text-[12px]"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Fitness"),React.createElement("div",{className:"mt-1 text-white/60"},"Adjusts volume / intensity / rest (heavy vs light variants).")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Yoga"),React.createElement("div",{className:"mt-1 text-white/60"},"Suggests calmer vs stronger sessions based on recovery.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Nutrition"),React.createElement("div",{className:"mt-1 text-white/60"},"Nudges targets/timing (fueling vs recovery focus) without changing your goal.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Hybrid"),React.createElement("div",{className:"mt-1 text-white/60"},"Balances training stress across modules to keep you consistent.")))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Your current focus"),React.createElement("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full border border-white/12 bg-white/5 px-3 py-1 text-[11px] font-extrabold text-white/80"},React.createElement(gi,{name:"Target",size:14}),String(V||"FITNESS").toUpperCase()),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 leading-relaxed"},"We\u2019ll keep this focus as the default across Today + Plan, then apply Capacity to adjust the day.")),React.createElement("div",{className:"pt-1"},React.createElement("button",{type:"button",className:"w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-[13px] font-extrabold text-white",onClick:()=>_e(!1)},"Got it")))))},_l=[{id:"ys1",type:"SESSION",category:"YOGA",title:"Morning Mobility Flow",coach:"Aisha",duration:12,level:"BEGINNER",tags:["Mobility"],premium:!1},{id:"ys2",type:"SESSION",category:"YOGA",title:"Power Vinyasa \u2014 Strength",coach:"Ravi",duration:28,level:"INTERMEDIATE",tags:["Strength"],premium:!0},{id:"ys3",type:"SESSION",category:"YOGA",title:"Restore & Breathe",coach:"Maya",duration:18,level:"BEGINNER",tags:["Stress"],premium:!1},{id:"ys4",type:"SESSION",category:"YOGA",title:"Deep Hips & Hamstrings",coach:"Noor",duration:35,level:"ADVANCED",tags:["Flexibility"],premium:!0},{id:"fs1",type:"SESSION",category:"FITNESS",title:"Full Body Starter",coach:"Coach Jay",duration:20,level:"BEGINNER",tags:["Strength"],premium:!1},{id:"fs2",type:"SESSION",category:"FITNESS",title:"HIIT \u2014 Sweat & Burn",coach:"Coach Lina",duration:16,level:"INTERMEDIATE",tags:["Cardio"],premium:!0},{id:"fs3",type:"SESSION",category:"FITNESS",title:"Upper Body Pump",coach:"Coach Sam",duration:32,level:"INTERMEDIATE",tags:["Strength"],premium:!0},{id:"rs1",type:"SESSION",category:"RECOVERY",title:"Sleep Wind\u2011Down",coach:"Flow",duration:10,level:"BEGINNER",tags:["Sleep"],premium:!1},{id:"rs2",type:"SESSION",category:"RECOVERY",title:"Post\u2011Workout Stretch",coach:"Flow",duration:14,level:"BEGINNER",tags:["Mobility"],premium:!1},{id:"rs3",type:"SESSION",category:"RECOVERY",title:"Breathwork \u2014 Calm Focus",coach:"Flow",duration:8,level:"BEGINNER",tags:["Stress"],premium:!0},{id:"yp1",type:"PROGRAM",category:"YOGA",title:"14\u2011Day Flexibility Journey",coach:"Maya",duration:14,level:"BEGINNER",tags:["Flexibility"],premium:!0},{id:"fp1",type:"PROGRAM",category:"FITNESS",title:"4\u2011Week Strength Base",coach:"Coach Jay",duration:28,level:"INTERMEDIATE",tags:["Strength"],premium:!0},{id:"yc1",type:"COLLECTION",category:"YOGA",title:"Desk\u2011Break Minis",coach:"Flow",duration:0,level:"BEGINNER",tags:["Mobility"],premium:!1},{id:"rc1",type:"COLLECTION",category:"RECOVERY",title:"Sleep Better",coach:"Flow",duration:0,level:"BEGINNER",tags:["Sleep"],premium:!0}],kl=(e,a)=>{try{var r=localStorage.getItem(e);return r?JSON.parse(r):a}catch(r){return a}},jl=(e,a)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch(r){}},wr=({item:e,onOpen:a,onToggleSave:r,savedIds:c=[],isLocked:h})=>{var V=typeof h=="function"?!!h(e):!1,de=Array.isArray(c)?c.includes(e==null?void 0:e.id):!1,M=V?"border-rose-400/30 bg-rose-400/5":String((e==null?void 0:e.category)||"").toUpperCase()==="YOGA"?"border-[rgba(168,85,255,0.30)] bg-[rgba(168,85,255,0.10)]":String((e==null?void 0:e.category)||"").toUpperCase()==="NUTRITION"?"border-[rgba(77,233,255,0.30)] bg-[rgba(77,233,255,0.10)]":String((e==null?void 0:e.category)||"").toUpperCase()==="FITNESS"?"border-[rgba(16,255,97,0.30)] bg-[rgba(16,255,97,0.10)]":"border-white/12 bg-white/5",De=String((e==null?void 0:e.type)||"ITEM").replace("_"," "),Ae=[e!=null&&e.duration?`${e.duration} min`:null,e!=null&&e.level?String(e.level):null,e!=null&&e.coach?`Coach: ${e.coach}`:null].filter(Boolean).join(" \u2022 ");return React.createElement("div",{className:"rounded-3xl border p-4 backdrop-blur-xl shadow-[0_18px_60px_rgba(0,0,0,0.45)] "+M},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/55 font-bold"},De),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[14px] truncate"},(e==null?void 0:e.title)||"Untitled"),Ae?React.createElement("div",{className:"mt-1 text-[12px] text-white/70 truncate"},Ae):null,V?React.createElement("div",{className:"mt-2 inline-flex items-center gap-2 text-[11px] text-rose-200/90"},React.createElement("span",{className:"px-2 py-1 rounded-full border border-rose-400/30 bg-rose-400/10"},"Premium"),React.createElement("span",{className:"text-white/55"},"Upgrade to access")):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:Oe=>{try{Oe.preventDefault(),Oe.stopPropagation()}catch(N){}try{r&&r(e==null?void 0:e.id)}catch(N){}},className:"w-10 h-10 rounded-2xl border "+(de?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)]":"border-white/12 bg-white/5 hover:bg-white/10"),title:de?"Unsave":"Save","aria-label":de?"Unsave":"Save"},React.createElement(gi,{name:de?"BookmarkCheck":"Bookmark",size:18,className:"text-white"})),React.createElement("button",{type:"button",onClick:Oe=>{try{Oe.preventDefault()}catch(N){}try{a&&a(e)}catch(N){}},className:"h-10 px-4 rounded-2xl border border-white/12 bg-black/25 hover:bg-white/10 text-white font-extrabold text-[12px] active:scale-[0.99]"},"Open"))))},Gs=typeof window!="undefined"&&window.__fof_dayKey?window.__fof_dayKey:e=>{try{var a=e instanceof Date?e:new Date(e),r=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),h=String(a.getDate()).padStart(2,"0");return`${r}-${c}-${h}`}catch(a){return""}},Kn=({tier:e="FREE",onBack:a})=>{var D;var r=React.useMemo(()=>{try{return String(localStorage.getItem("fof_library_planDateKey_v1")||"")||Gs(new Date)}catch(k){return Gs(new Date)}},[]),[c,h]=React.useState(!1),[V,de]=React.useState(null),[M,De]=React.useState({open:!1,dateKey:null}),[Ae,Oe]=React.useState(r),[N,Ne]=React.useState(r),G=React.useMemo(()=>{var k=[],T=new Date;for(var he=0;he<14;he++){var oe=new Date(T);oe.setDate(T.getDate()+he);var ke=Gs(oe),Re=oe.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});k.push({key:ke,label:Re})}return k},[]),we=k=>{de(k||null),Oe(r),Ne(r);try{ft(null)}catch(T){}try{setTimeout(()=>{try{h(!0)}catch(T){}},60)}catch(T){h(!0)}},$t=k=>{if(!V)return;var T=String(k||Ae||r||Gs(new Date));try{localStorage.setItem("fof_library_lastPlanDate_v1",T)}catch(he){}try{localStorage.setItem("fof_library_planDateKey_v1",T)}catch(he){}try{localStorage.setItem("fof_selected_day_v1",T)}catch(he){}try{typeof window.__fof_setSelectedDayKey=="function"&&window.__fof_setSelectedDayKey(T)}catch(he){}try{window.dispatchEvent(new CustomEvent("flowofit:selectedDayChanged",{detail:{dateKey:T}}))}catch(he){}try{typeof window.__fof_planAddItem=="function"?window.__fof_planAddItem(T,V):window.dispatchEvent(new CustomEvent("flowofit:addToPlan",{detail:{dateKey:T,item:V}}))}catch(he){}try{window.dispatchEvent(new CustomEvent("flowofit:planDBUpdated",{detail:{dateKey:T}}))}catch(he){}try{window.__toast&&window.__toast("Added to Plan")}catch(he){}try{De({open:!0,dateKey:T})}catch(he){}h(!1),de(null)},gt=React.useMemo(()=>{try{return typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{}}catch(k){return window.__FOF_CLIENT_CONTEXT||{}}},[]),_e=String(gt.relationship||"INDEPENDENT").toUpperCase(),ve=String(((D=gt==null?void 0:gt.entitlements)==null?void 0:D.yogaAccess)||"NONE").toUpperCase(),me=React.useMemo(()=>{var ke;var k=String(e||"FREE").toUpperCase(),T=k==="PREMIUM"||k==="PRO"||k==="FULL",he=String(((ke=gt==null?void 0:gt.entitlements)==null?void 0:ke.yogaAccess)||"NONE").toUpperCase();return{tier:k,hasFull:T,yogaAllowed:T||he==="LIMITED"||he==="FULL",yogaAccess:he,yogaAccessState:ve,nutritionAllowed:!0,workoutsAllowed:!0}},[e,gt]),j=React.useMemo(()=>[{id:"w_s_001",category:"WORKOUT",type:"SESSIONS",title:"Strength Blast",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:20,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","MACHINE"],goal:["STRENGTH","ATHLETIC"],tags:["HYPERTROPHY","CORE","FULL BODY"],premium:!0},{id:"w_s_002",category:"WORKOUT",type:"SESSIONS",title:"Push Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:20,difficulty:"INTERMEDIATE",equipment:["MACHINE","BANDS"],goal:["FAT LOSS"],tags:["HYPERTROPHY","PULL","FULL BODY"],premium:!1},{id:"w_s_003",category:"WORKOUT",type:"SESSIONS",title:"Core Primer",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:40,difficulty:"BEGINNER",equipment:["BARBELL"],goal:["FAT LOSS","STRENGTH"],tags:["LEGS","RECOVERY","HYPERTROPHY"],premium:!1},{id:"w_s_004",category:"WORKOUT",type:"SESSIONS",title:"Conditioning Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:25,difficulty:"ADVANCED",equipment:["GYM","BODYWEIGHT"],goal:["ATHLETIC"],tags:["LEGS","HYPERTROPHY","PUSH"],premium:!1},{id:"w_s_005",category:"WORKOUT",type:"SESSIONS",title:"Strength Circuit",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:40,difficulty:"ADVANCED",equipment:["DUMBBELLS","BODYWEIGHT"],goal:["FAT LOSS"],tags:["COMPOUND","LEGS","LOWER"],premium:!1},{id:"w_s_006",category:"WORKOUT",type:"SESSIONS",title:"Strength Engine",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:25,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BANDS"],goal:["MUSCLE"],tags:["POWER","CORE","PULL"],premium:!1},{id:"w_s_007",category:"WORKOUT",type:"SESSIONS",title:"Power Circuit",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:45,difficulty:"ADVANCED",equipment:["BODYWEIGHT","DUMBBELLS"],goal:["ENDURANCE"],tags:["CORE","PULL","UPPER"],premium:!0},{id:"w_s_008",category:"WORKOUT",type:"SESSIONS",title:"Legs Circuit",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:60,difficulty:"INTERMEDIATE",equipment:["MACHINE","GYM"],goal:["MUSCLE","ATHLETIC"],tags:["MOBILITY","CONDITIONING","RECOVERY"],premium:!1},{id:"w_s_009",category:"WORKOUT",type:"SESSIONS",title:"Core Sprint",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:50,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BANDS"],goal:["STRENGTH"],tags:["UPPER","LOWER","COMPOUND"],premium:!0},{id:"w_s_010",category:"WORKOUT",type:"SESSIONS",title:"Core Sprint",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:25,difficulty:"INTERMEDIATE",equipment:["BANDS","GYM"],goal:["ATHLETIC"],tags:["FULL BODY","COMPOUND","UPPER"],premium:!1},{id:"w_s_011",category:"WORKOUT",type:"SESSIONS",title:"Pull Primer",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:25,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["ENDURANCE"],tags:["CONDITIONING","LOWER","RECOVERY"],premium:!1},{id:"w_s_012",category:"WORKOUT",type:"SESSIONS",title:"Pull Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:35,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["ATHLETIC"],tags:["FULL BODY","HYPERTROPHY","LEGS"],premium:!1},{id:"w_s_013",category:"WORKOUT",type:"SESSIONS",title:"Legs Engine",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:35,difficulty:"BEGINNER",equipment:["BANDS"],goal:["STRENGTH"],tags:["MOBILITY","POWER","UPPER"],premium:!1},{id:"w_s_014",category:"WORKOUT",type:"SESSIONS",title:"Full Body Session",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:60,difficulty:"ADVANCED",equipment:["DUMBBELLS","BARBELL"],goal:["ATHLETIC"],tags:["CORE","PUSH","CONDITIONING"],premium:!1},{id:"w_s_015",category:"WORKOUT",type:"SESSIONS",title:"Push Engine",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:50,difficulty:"ADVANCED",equipment:["MACHINE","BARBELL"],goal:["ATHLETIC"],tags:["POWER","UPPER","PUSH"],premium:!1},{id:"w_s_016",category:"WORKOUT",type:"SESSIONS",title:"Upper Body Sprint",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:35,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","MACHINE"],goal:["STRENGTH"],tags:["PUSH","UPPER","FULL BODY"],premium:!1},{id:"w_s_017",category:"WORKOUT",type:"SESSIONS",title:"Power Circuit",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:40,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BANDS"],goal:["ATHLETIC","FAT LOSS"],tags:["PUSH","POWER","CORE"],premium:!0},{id:"w_s_018",category:"WORKOUT",type:"SESSIONS",title:"Strength Complex",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:45,difficulty:"INTERMEDIATE",equipment:["GYM","BODYWEIGHT"],goal:["STRENGTH"],tags:["FULL BODY","CORE","LEGS"],premium:!1},{id:"w_s_019",category:"WORKOUT",type:"SESSIONS",title:"Push Circuit",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:35,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","GYM"],goal:["FAT LOSS","MUSCLE"],tags:["UPPER","POWER","CONDITIONING"],premium:!0},{id:"w_s_020",category:"WORKOUT",type:"SESSIONS",title:"Power Builder",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:25,difficulty:"ADVANCED",equipment:["DUMBBELLS","MACHINE"],goal:["FAT LOSS"],tags:["PUSH","CORE","FULL BODY"],premium:!0},{id:"w_s_021",category:"WORKOUT",type:"SESSIONS",title:"Core Engine",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:60,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["ATHLETIC"],tags:["COMPOUND","MOBILITY","POWER"],premium:!0},{id:"w_s_022",category:"WORKOUT",type:"SESSIONS",title:"Push Builder",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:20,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","MACHINE"],goal:["ATHLETIC"],tags:["CONDITIONING","LOWER","FULL BODY"],premium:!1},{id:"w_s_023",category:"WORKOUT",type:"SESSIONS",title:"Full Body Blast",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:25,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","GYM"],goal:["ATHLETIC","MUSCLE"],tags:["HYPERTROPHY","RECOVERY","FULL BODY"],premium:!1},{id:"w_s_024",category:"WORKOUT",type:"SESSIONS",title:"Strength Sprint",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:45,difficulty:"ADVANCED",equipment:["DUMBBELLS","BARBELL"],goal:["FAT LOSS","MUSCLE"],tags:["COMPOUND","RECOVERY","PULL"],premium:!1},{id:"w_s_025",category:"WORKOUT",type:"SESSIONS",title:"Upper Body Density",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:25,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["MUSCLE"],tags:["LEGS","UPPER","PUSH"],premium:!1},{id:"w_s_026",category:"WORKOUT",type:"SESSIONS",title:"Conditioning Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:40,difficulty:"INTERMEDIATE",equipment:["MACHINE","BANDS"],goal:["ATHLETIC","ENDURANCE"],tags:["COMPOUND","UPPER","LOWER"],premium:!1},{id:"w_s_027",category:"WORKOUT",type:"SESSIONS",title:"Power Session",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:40,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["MUSCLE"],tags:["COMPOUND","RECOVERY","PULL"],premium:!1},{id:"w_s_028",category:"WORKOUT",type:"SESSIONS",title:"Upper Body Blast",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:50,difficulty:"ADVANCED",equipment:["BODYWEIGHT","MACHINE"],goal:["MUSCLE","ENDURANCE"],tags:["LOWER","MOBILITY","POWER"],premium:!1},{id:"w_s_029",category:"WORKOUT",type:"SESSIONS",title:"Power Builder",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:25,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["ATHLETIC"],tags:["FULL BODY","LEGS","HYPERTROPHY"],premium:!1},{id:"w_s_030",category:"WORKOUT",type:"SESSIONS",title:"Full Body Builder",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:40,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","BARBELL"],goal:["MUSCLE","STRENGTH"],tags:["LEGS","CONDITIONING","CORE"],premium:!1},{id:"w_s_031",category:"WORKOUT",type:"SESSIONS",title:"Full Body Circuit",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:30,difficulty:"ADVANCED",equipment:["DUMBBELLS","GYM"],goal:["ENDURANCE","FAT LOSS"],tags:["RECOVERY","COMPOUND","PUSH"],premium:!1},{id:"w_s_032",category:"WORKOUT",type:"SESSIONS",title:"Lower Body Complex",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:20,difficulty:"ADVANCED",equipment:["DUMBBELLS","MACHINE"],goal:["FAT LOSS"],tags:["LEGS","PULL","PUSH"],premium:!1},{id:"w_s_033",category:"WORKOUT",type:"SESSIONS",title:"Push Complex",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:45,difficulty:"BEGINNER",equipment:["BODYWEIGHT"],goal:["ENDURANCE"],tags:["LEGS","COMPOUND","CONDITIONING"],premium:!1},{id:"w_s_034",category:"WORKOUT",type:"SESSIONS",title:"Legs Builder",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:25,difficulty:"ADVANCED",equipment:["BARBELL","DUMBBELLS"],goal:["ENDURANCE"],tags:["FULL BODY","UPPER","HYPERTROPHY"],premium:!1},{id:"w_s_035",category:"WORKOUT",type:"SESSIONS",title:"Legs Complex",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:25,difficulty:"INTERMEDIATE",equipment:["BANDS","DUMBBELLS"],goal:["FAT LOSS","STRENGTH"],tags:["CONDITIONING","RECOVERY","COMPOUND"],premium:!1},{id:"w_s_036",category:"WORKOUT",type:"SESSIONS",title:"Strength Circuit",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:45,difficulty:"INTERMEDIATE",equipment:["MACHINE","BARBELL"],goal:["STRENGTH"],tags:["MOBILITY","PULL","CONDITIONING"],premium:!1},{id:"w_s_037",category:"WORKOUT",type:"SESSIONS",title:"Legs Complex",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:40,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","GYM"],goal:["FAT LOSS"],tags:["COMPOUND","MOBILITY","LOWER"],premium:!1},{id:"w_s_038",category:"WORKOUT",type:"SESSIONS",title:"Core Power Hour",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:20,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","GYM"],goal:["ATHLETIC"],tags:["COMPOUND","LEGS","POWER"],premium:!1},{id:"w_s_039",category:"WORKOUT",type:"SESSIONS",title:"Push Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:60,difficulty:"INTERMEDIATE",equipment:["MACHINE","DUMBBELLS"],goal:["ENDURANCE"],tags:["CONDITIONING","COMPOUND","MOBILITY"],premium:!1},{id:"w_s_040",category:"WORKOUT",type:"SESSIONS",title:"Push Engine",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:35,difficulty:"ADVANCED",equipment:["DUMBBELLS","BODYWEIGHT"],goal:["FAT LOSS","STRENGTH"],tags:["POWER","CORE","COMPOUND"],premium:!1},{id:"w_s_041",category:"WORKOUT",type:"SESSIONS",title:"Core Density",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:50,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["STRENGTH"],tags:["RECOVERY","CORE","PUSH"],premium:!0},{id:"w_s_042",category:"WORKOUT",type:"SESSIONS",title:"Power Density",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:20,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","GYM"],goal:["FAT LOSS","ENDURANCE"],tags:["RECOVERY","POWER","HYPERTROPHY"],premium:!1},{id:"w_s_043",category:"WORKOUT",type:"SESSIONS",title:"Core Power Hour",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:60,difficulty:"ADVANCED",equipment:["MACHINE","GYM"],goal:["MUSCLE"],tags:["COMPOUND","PULL","CONDITIONING"],premium:!1},{id:"w_s_044",category:"WORKOUT",type:"SESSIONS",title:"Pull Density",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:25,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BARBELL"],goal:["ATHLETIC","STRENGTH"],tags:["LOWER","RECOVERY","PUSH"],premium:!1},{id:"w_s_045",category:"WORKOUT",type:"SESSIONS",title:"Push Blast",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:50,difficulty:"INTERMEDIATE",equipment:["BANDS","GYM"],goal:["MUSCLE"],tags:["CORE","RECOVERY","HYPERTROPHY"],premium:!1},{id:"w_s_046",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Complex",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:60,difficulty:"BEGINNER",equipment:["BARBELL"],goal:["FAT LOSS","ATHLETIC"],tags:["CONDITIONING","MOBILITY","RECOVERY"],premium:!1},{id:"w_s_047",category:"WORKOUT",type:"SESSIONS",title:"Conditioning Circuit",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:40,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","GYM"],goal:["FAT LOSS","MUSCLE"],tags:["POWER","LOWER","HYPERTROPHY"],premium:!1},{id:"w_s_048",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Sprint",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:20,difficulty:"BEGINNER",equipment:["GYM"],goal:["FAT LOSS","MUSCLE"],tags:["FULL BODY","PULL","CORE"],premium:!1},{id:"w_s_049",category:"WORKOUT",type:"SESSIONS",title:"Legs Primer",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:50,difficulty:"BEGINNER",equipment:["GYM"],goal:["STRENGTH","FAT LOSS"],tags:["FULL BODY","MOBILITY","CONDITIONING"],premium:!0},{id:"w_s_050",category:"WORKOUT",type:"SESSIONS",title:"Push Blast",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:20,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","MACHINE"],goal:["ATHLETIC"],tags:["LOWER","PUSH","RECOVERY"],premium:!1},{id:"w_s_051",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Circuit",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:60,difficulty:"INTERMEDIATE",equipment:["BARBELL","DUMBBELLS"],goal:["STRENGTH"],tags:["RECOVERY","LOWER","PULL"],premium:!0},{id:"w_s_052",category:"WORKOUT",type:"SESSIONS",title:"Pull Sprint",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:50,difficulty:"INTERMEDIATE",equipment:["MACHINE","DUMBBELLS"],goal:["MUSCLE","STRENGTH"],tags:["MOBILITY","PULL","COMPOUND"],premium:!1},{id:"w_s_053",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Builder",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:45,difficulty:"INTERMEDIATE",equipment:["MACHINE","BARBELL"],goal:["ENDURANCE","STRENGTH"],tags:["CORE","POWER","UPPER"],premium:!1},{id:"w_s_054",category:"WORKOUT",type:"SESSIONS",title:"Strength Density",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:30,difficulty:"INTERMEDIATE",equipment:["MACHINE","BANDS"],goal:["ENDURANCE"],tags:["HYPERTROPHY","CONDITIONING","POWER"],premium:!1},{id:"w_s_055",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Engine",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:45,difficulty:"ADVANCED",equipment:["BODYWEIGHT","BARBELL"],goal:["MUSCLE"],tags:["RECOVERY","POWER","HYPERTROPHY"],premium:!1},{id:"w_s_056",category:"WORKOUT",type:"SESSIONS",title:"Legs Builder",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:60,difficulty:"ADVANCED",equipment:["DUMBBELLS","GYM"],goal:["ENDURANCE","ATHLETIC"],tags:["PULL","HYPERTROPHY","RECOVERY"],premium:!1},{id:"w_s_057",category:"WORKOUT",type:"SESSIONS",title:"Push Blast",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:35,difficulty:"INTERMEDIATE",equipment:["GYM","BANDS"],goal:["FAT LOSS"],tags:["COMPOUND","MOBILITY","POWER"],premium:!1},{id:"w_s_058",category:"WORKOUT",type:"SESSIONS",title:"Lower Body Engine",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:35,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BARBELL"],goal:["ENDURANCE"],tags:["POWER","CONDITIONING","MOBILITY"],premium:!1},{id:"w_s_059",category:"WORKOUT",type:"SESSIONS",title:"Power Primer",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:45,difficulty:"INTERMEDIATE",equipment:["BARBELL","MACHINE"],goal:["STRENGTH","MUSCLE"],tags:["LEGS","UPPER","CONDITIONING"],premium:!1},{id:"w_s_060",category:"WORKOUT",type:"SESSIONS",title:"Full Body Circuit",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:35,difficulty:"INTERMEDIATE",equipment:["BARBELL","BANDS"],goal:["ATHLETIC"],tags:["HYPERTROPHY","PULL","UPPER"],premium:!1},{id:"w_s_061",category:"WORKOUT",type:"SESSIONS",title:"Push Primer",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:30,difficulty:"INTERMEDIATE",equipment:["MACHINE","BANDS"],goal:["STRENGTH","ATHLETIC"],tags:["CONDITIONING","PULL","LOWER"],premium:!1},{id:"w_s_062",category:"WORKOUT",type:"SESSIONS",title:"Lower Body Builder",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:40,difficulty:"INTERMEDIATE",equipment:["GYM","BARBELL"],goal:["STRENGTH","ENDURANCE"],tags:["POWER","UPPER","MOBILITY"],premium:!1},{id:"w_s_063",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Builder",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:30,difficulty:"BEGINNER",equipment:["BANDS"],goal:["STRENGTH"],tags:["PUSH","UPPER","CONDITIONING"],premium:!1},{id:"w_s_064",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Sprint",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:35,difficulty:"INTERMEDIATE",equipment:["GYM","MACHINE"],goal:["ENDURANCE"],tags:["HYPERTROPHY","CORE","PULL"],premium:!1},{id:"w_s_065",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Blast",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:35,difficulty:"INTERMEDIATE",equipment:["BARBELL","BODYWEIGHT"],goal:["MUSCLE","STRENGTH"],tags:["LOWER","FULL BODY","CORE"],premium:!1},{id:"w_s_066",category:"WORKOUT",type:"SESSIONS",title:"Conditioning Engine",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:20,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["FAT LOSS","STRENGTH"],tags:["COMPOUND","PUSH","PULL"],premium:!1},{id:"w_s_067",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Circuit",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:50,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["ENDURANCE"],tags:["LOWER","UPPER","FULL BODY"],premium:!0},{id:"w_s_068",category:"WORKOUT",type:"SESSIONS",title:"Hypertrophy Sprint",desc:"Built for real execution: warm-up \u2192 main work \u2192 finisher.",duration:40,difficulty:"INTERMEDIATE",equipment:["GYM","BARBELL"],goal:["ENDURANCE"],tags:["CONDITIONING","RECOVERY","POWER"],premium:!1},{id:"w_s_069",category:"WORKOUT",type:"SESSIONS",title:"Upper Body Complex",desc:"Performance-driven training with crisp pacing and progressive overload.",duration:45,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","MACHINE"],goal:["ATHLETIC","STRENGTH"],tags:["RECOVERY","COMPOUND","PULL"],premium:!1},{id:"w_s_070",category:"WORKOUT",type:"SESSIONS",title:"Conditioning Power Hour",desc:"Athletic strength + conditioning emphasis. Fast, focused, premium feel.",duration:60,difficulty:"ADVANCED",equipment:["DUMBBELLS","BANDS"],goal:["FAT LOSS"],tags:["UPPER","POWER","LEGS"],premium:!1},{id:"w_p_001",category:"WORKOUT",type:"PROGRAMS",title:"6-Week Lean Muscle Block",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["FAT LOSS","STRENGTH"],tags:["PROGRAM","POWER","UPPER"],premium:!0},{id:"w_p_002",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Full-Body Recomp",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"ADVANCED",equipment:["DUMBBELLS","BENCH"],goal:["ATHLETIC","FAT LOSS"],tags:["PROGRAM","CORE","FULL BODY"],premium:!0},{id:"w_p_003",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Full-Body Recomp",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"ADVANCED",equipment:["GYM"],goal:["ATHLETIC","MUSCLE"],tags:["PROGRAM","PULL","POWER"],premium:!0},{id:"w_p_004",category:"WORKOUT",type:"PROGRAMS",title:"6-Week Strength Foundation",desc:"Structured progression with weekly intent and deload-aware volume.",duration:42,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["FAT LOSS","STRENGTH"],tags:["PROGRAM","PUSH","UPPER"],premium:!0},{id:"w_p_005",category:"WORKOUT",type:"PROGRAMS",title:"6-Week Lean Muscle Block",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"ADVANCED",equipment:["GYM"],goal:["ENDURANCE","FAT LOSS"],tags:["PROGRAM","POWER","RECOVERY"],premium:!0},{id:"w_p_006",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Athletic Performance",desc:"Structured progression with weekly intent and deload-aware volume.",duration:42,difficulty:"ADVANCED",equipment:["GYM"],goal:["MUSCLE","STRENGTH"],tags:["PROGRAM","PULL","CORE"],premium:!0},{id:"w_p_007",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Power & Conditioning",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"ADVANCED",equipment:["BODYWEIGHT","BANDS"],goal:["FAT LOSS","MUSCLE"],tags:["PROGRAM","POWER","CONDITIONING"],premium:!0},{id:"w_p_008",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Full-Body Recomp",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"ADVANCED",equipment:["BODYWEIGHT","BANDS"],goal:["MUSCLE","FAT LOSS"],tags:["PROGRAM","PUSH","CORE"],premium:!0},{id:"w_p_009",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Dumbbell Only",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"ADVANCED",equipment:["BODYWEIGHT","BANDS"],goal:["MUSCLE","FAT LOSS"],tags:["PROGRAM","FULL BODY","LOWER"],premium:!0},{id:"w_p_010",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Full-Body Recomp",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"BEGINNER",equipment:["DUMBBELLS","BENCH"],goal:["MUSCLE","FAT LOSS"],tags:["PROGRAM","COMPOUND","LOWER"],premium:!0},{id:"w_p_011",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Power & Conditioning",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","BANDS"],goal:["ATHLETIC","FAT LOSS"],tags:["PROGRAM","LEGS","COMPOUND"],premium:!0},{id:"w_p_012",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Dumbbell Only",desc:"Structured progression with weekly intent and deload-aware volume.",duration:28,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BENCH"],goal:["MUSCLE","STRENGTH"],tags:["PROGRAM","CORE","UPPER"],premium:!0},{id:"w_p_013",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Lean Muscle Block",desc:"Structured progression with weekly intent and deload-aware volume.",duration:42,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BENCH"],goal:["STRENGTH","ENDURANCE"],tags:["PROGRAM","LEGS","RECOVERY"],premium:!0},{id:"w_p_014",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Hypertrophy Builder",desc:"Structured progression with weekly intent and deload-aware volume.",duration:42,difficulty:"BEGINNER",equipment:["GYM"],goal:["FAT LOSS","MUSCLE"],tags:["PROGRAM","POWER","HYPERTROPHY"],premium:!0},{id:"w_p_015",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Dumbbell Only",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["FAT LOSS","ENDURANCE"],tags:["PROGRAM","COMPOUND","CONDITIONING"],premium:!0},{id:"w_p_016",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Dumbbell Only",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["ENDURANCE","FAT LOSS"],tags:["PROGRAM","PULL","PUSH"],premium:!1},{id:"w_p_017",category:"WORKOUT",type:"PROGRAMS",title:"6-Week Lean Muscle Block",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["ENDURANCE","STRENGTH"],tags:["PROGRAM","COMPOUND","CORE"],premium:!0},{id:"w_p_018",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Strength Foundation",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"ADVANCED",equipment:["GYM"],goal:["ENDURANCE","MUSCLE"],tags:["PROGRAM","COMPOUND","PUSH"],premium:!0},{id:"w_p_019",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Athletic Performance",desc:"Structured progression with weekly intent and deload-aware volume.",duration:28,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["ATHLETIC","ENDURANCE"],tags:["PROGRAM","MOBILITY","LOWER"],premium:!0},{id:"w_p_020",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Power & Conditioning",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"BEGINNER",equipment:["GYM"],goal:["ATHLETIC","ENDURANCE"],tags:["PROGRAM","CONDITIONING","RECOVERY"],premium:!1},{id:"w_p_021",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Power & Conditioning",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"ADVANCED",equipment:["GYM"],goal:["STRENGTH","FAT LOSS"],tags:["PROGRAM","UPPER","LOWER"],premium:!0},{id:"w_p_022",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Hypertrophy Builder",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"BEGINNER",equipment:["GYM"],goal:["ENDURANCE","STRENGTH"],tags:["PROGRAM","POWER","LEGS"],premium:!0},{id:"w_p_023",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Power & Conditioning",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"BEGINNER",equipment:["GYM"],goal:["STRENGTH","ENDURANCE"],tags:["PROGRAM","HYPERTROPHY","PUSH"],premium:!0},{id:"w_p_024",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Dumbbell Only",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"BEGINNER",equipment:["GYM"],goal:["STRENGTH","ENDURANCE"],tags:["PROGRAM","POWER","UPPER"],premium:!0},{id:"w_p_025",category:"WORKOUT",type:"PROGRAMS",title:"12-Week Athletic Performance",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT","BANDS"],goal:["ATHLETIC","FAT LOSS"],tags:["PROGRAM","HYPERTROPHY","MOBILITY"],premium:!0},{id:"w_p_026",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Barbell Progression",desc:"Structured progression with weekly intent and deload-aware volume.",duration:84,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS","BENCH"],goal:["ENDURANCE","MUSCLE"],tags:["PROGRAM","POWER","RECOVERY"],premium:!1},{id:"w_p_027",category:"WORKOUT",type:"PROGRAMS",title:"8-Week Lean Muscle Block",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"BEGINNER",equipment:["GYM"],goal:["STRENGTH","FAT LOSS"],tags:["PROGRAM","UPPER","COMPOUND"],premium:!0},{id:"w_p_028",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Strength Foundation",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"INTERMEDIATE",equipment:["GYM"],goal:["ATHLETIC","MUSCLE"],tags:["PROGRAM","UPPER","CONDITIONING"],premium:!0},{id:"w_p_029",category:"WORKOUT",type:"PROGRAMS",title:"6-Week Hypertrophy Builder",desc:"Structured progression with weekly intent and deload-aware volume.",duration:56,difficulty:"ADVANCED",equipment:["BODYWEIGHT","BANDS"],goal:["ENDURANCE","MUSCLE"],tags:["PROGRAM","LOWER","CONDITIONING"],premium:!0},{id:"w_p_030",category:"WORKOUT",type:"PROGRAMS",title:"4-Week Athletic Performance",desc:"Structured progression with weekly intent and deload-aware volume.",duration:28,difficulty:"BEGINNER",equipment:["GYM"],goal:["MUSCLE","ENDURANCE"],tags:["PROGRAM","FULL BODY","LOWER"],premium:!0},{id:"w_c_001",category:"WORKOUT",type:"COLLECTIONS",title:"Core Finishers Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["ATHLETIC","STRENGTH"],tags:["PACK","MOBILITY","UPPER"],premium:!1},{id:"w_c_002",category:"WORKOUT",type:"COLLECTIONS",title:"Hotel Gym Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["DUMBBELLS"],goal:["FAT LOSS","MUSCLE"],tags:["PACK","HYPERTROPHY","FULL BODY"],premium:!1},{id:"w_c_003",category:"WORKOUT",type:"COLLECTIONS",title:"Mobility Reset Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["STRENGTH","ATHLETIC"],tags:["PACK","POWER","CORE"],premium:!1},{id:"w_c_004",category:"WORKOUT",type:"COLLECTIONS",title:"Barbell Classics Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["FAT LOSS","STRENGTH"],tags:["PACK","UPPER","LEGS"],premium:!1},{id:"w_c_005",category:"WORKOUT",type:"COLLECTIONS",title:"Barbell Classics Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["BARBELL"],goal:["ENDURANCE","ATHLETIC"],tags:["PACK","CORE","HYPERTROPHY"],premium:!1},{id:"w_c_006",category:"WORKOUT",type:"COLLECTIONS",title:"Leg Day Vault Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["STRENGTH","ATHLETIC"],tags:["PACK","COMPOUND","RECOVERY"],premium:!1},{id:"w_c_007",category:"WORKOUT",type:"COLLECTIONS",title:"Conditioning Finishers Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["FAT LOSS","MUSCLE"],tags:["PACK","CORE","LEGS"],premium:!1},{id:"w_c_008",category:"WORKOUT",type:"COLLECTIONS",title:"Home Strength Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["GYM"],goal:["STRENGTH","ENDURANCE"],tags:["PACK","CORE","LEGS"],premium:!1},{id:"w_c_009",category:"WORKOUT",type:"COLLECTIONS",title:"Hotel Gym Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["BARBELL"],goal:["FAT LOSS","STRENGTH"],tags:["PACK","UPPER","RECOVERY"],premium:!0},{id:"w_c_010",category:"WORKOUT",type:"COLLECTIONS",title:"Barbell Classics Pack",desc:"Curated set of sessions designed to slot into your week.",duration:0,difficulty:"ALL",equipment:["BODYWEIGHT"],goal:["MUSCLE","STRENGTH"],tags:["PACK","HYPERTROPHY","CONDITIONING"],premium:!1},{id:"w_e_001",category:"WORKOUT",type:"EXERCISES",title:"RDL",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["CABLE"],goal:["STRENGTH"],tags:["LEGS","HYPERTROPHY"],premium:!1},{id:"w_e_002",category:"WORKOUT",type:"EXERCISES",title:"Lunge",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS"],goal:["MUSCLE"],tags:["CORE","PREHAB"],premium:!1},{id:"w_e_003",category:"WORKOUT",type:"EXERCISES",title:"Row",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["ENDURANCE"],tags:["CHEST","HYPERTROPHY"],premium:!1},{id:"w_e_004",category:"WORKOUT",type:"EXERCISES",title:"Plank (Tempo)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["MACHINE"],goal:["ATHLETIC"],tags:["ARMS","TECHNIQUE"],premium:!1},{id:"w_e_005",category:"WORKOUT",type:"EXERCISES",title:"Plank (Dumbbell)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT"],goal:["STRENGTH"],tags:["BACK","HYPERTROPHY"],premium:!1},{id:"w_e_006",category:"WORKOUT",type:"EXERCISES",title:"Lat Pulldown (Paused)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"ADVANCED",equipment:["BODYWEIGHT"],goal:["STRENGTH"],tags:["BACK","STRENGTH"],premium:!1},{id:"w_e_007",category:"WORKOUT",type:"EXERCISES",title:"Plank (Dumbbell)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["STRENGTH"],tags:["CHEST","STRENGTH"],premium:!1},{id:"w_e_008",category:"WORKOUT",type:"EXERCISES",title:"Hip Thrust (Single-Arm)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["DUMBBELLS"],goal:["ENDURANCE"],tags:["LEGS","HYPERTROPHY"],premium:!1},{id:"w_e_009",category:"WORKOUT",type:"EXERCISES",title:"Leg Press (Kettlebell)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["BARBELL"],goal:["MUSCLE"],tags:["BACK","TECHNIQUE"],premium:!1},{id:"w_e_010",category:"WORKOUT",type:"EXERCISES",title:"RDL",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["CABLE"],goal:["FAT LOSS"],tags:["ARMS","PREHAB"],premium:!1},{id:"w_e_011",category:"WORKOUT",type:"EXERCISES",title:"Hip Thrust (Paused)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["STRENGTH"],tags:["LEGS","PREHAB"],premium:!1},{id:"w_e_012",category:"WORKOUT",type:"EXERCISES",title:"Squat (Paused)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["MACHINE"],goal:["FAT LOSS"],tags:["ARMS","HYPERTROPHY"],premium:!1},{id:"w_e_013",category:"WORKOUT",type:"EXERCISES",title:"Bench Press (Tempo)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["STRENGTH"],tags:["CHEST","STRENGTH"],premium:!1},{id:"w_e_014",category:"WORKOUT",type:"EXERCISES",title:"Overhead Press (Tempo)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT"],goal:["ENDURANCE"],tags:["LEGS","TECHNIQUE"],premium:!1},{id:"w_e_015",category:"WORKOUT",type:"EXERCISES",title:"Bench Press (Single-Arm)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS"],goal:["MUSCLE"],tags:["SHOULDERS","STRENGTH"],premium:!1},{id:"w_e_016",category:"WORKOUT",type:"EXERCISES",title:"Push-Up (Kettlebell)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["BODYWEIGHT"],goal:["STRENGTH"],tags:["SHOULDERS","TECHNIQUE"],premium:!1},{id:"w_e_017",category:"WORKOUT",type:"EXERCISES",title:"Hip Thrust",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["BARBELL"],goal:["ENDURANCE"],tags:["ARMS","PREHAB"],premium:!1},{id:"w_e_018",category:"WORKOUT",type:"EXERCISES",title:"Plank (Single-Arm)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["CABLE"],goal:["ENDURANCE"],tags:["CHEST","PREHAB"],premium:!1},{id:"w_e_019",category:"WORKOUT",type:"EXERCISES",title:"Bench Press (Paused)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"BEGINNER",equipment:["MACHINE"],goal:["FAT LOSS"],tags:["GLUTES","HYPERTROPHY"],premium:!1},{id:"w_e_020",category:"WORKOUT",type:"EXERCISES",title:"Squat (Single-Arm)",desc:"Exercise breakdown + cues + common form fixes.",duration:0,difficulty:"INTERMEDIATE",equipment:["DUMBBELLS"],goal:["FAT LOSS"],tags:["ARMS","PREHAB"],premium:!1},{id:"y_s_001",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 15 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:15,difficulty:"BEGINNER",equipment:["STRAP"],goal:["RECOVERY"],tags:["HIPS","MOBILITY","YIN"],premium:!1},{id:"y_s_002",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["STRAP"],goal:["RECOVERY","STRESS"],tags:["YIN","MOBILITY","BREATH"],premium:!0},{id:"y_s_003",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 45 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:45,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["STRESS"],tags:["EVENING","SPINE","HAMSTRINGS"],premium:!1},{id:"y_s_004",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 25 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:25,difficulty:"INTERMEDIATE",equipment:["STRAP","MAT"],goal:["FLEXIBILITY","STRESS"],tags:["RECOVERY","BREATH","MORNING"],premium:!1},{id:"y_s_005",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 15 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["BREATHWORK","STRESS"],tags:["YIN","RECOVERY","EVENING"],premium:!1},{id:"y_s_006",category:"YOGA",type:"SESSIONS",title:"Evening Unwind \u2022 30 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:30,difficulty:"BEGINNER",equipment:["MAT"],goal:["STRESS","RECOVERY"],tags:["HIPS","SPINE","HAMSTRINGS"],premium:!1},{id:"y_s_007",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 15 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:15,difficulty:"INTERMEDIATE",equipment:["STRAP","BOLSTER"],goal:["RECOVERY","MOBILITY"],tags:["FLOW","MORNING","HAMSTRINGS"],premium:!1},{id:"y_s_008",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["STRAP"],goal:["FLEXIBILITY"],tags:["BACK","HIPS","RECOVERY"],premium:!1},{id:"y_s_009",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 15 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["STRESS","RECOVERY"],tags:["HIPS","YIN","SPINE"],premium:!1},{id:"y_s_010",category:"YOGA",type:"SESSIONS",title:"Spine Reset \u2022 45 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:45,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["MOBILITY","BREATHWORK"],tags:["SHOULDERS","BACK","RECOVERY"],premium:!1},{id:"y_s_011",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 15 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["MOBILITY"],tags:["HIPS","BREATH","MOBILITY"],premium:!1},{id:"y_s_012",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 20 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:20,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["BREATHWORK","MOBILITY"],tags:["SHOULDERS","EVENING","MORNING"],premium:!0},{id:"y_s_013",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 20 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:20,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["STRESS","RECOVERY"],tags:["MORNING","HAMSTRINGS","VINYASA"],premium:!0},{id:"y_s_014",category:"YOGA",type:"SESSIONS",title:"Shoulder Opener \u2022 30 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:30,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["RECOVERY","BREATHWORK"],tags:["EVENING","HAMSTRINGS","FLOW"],premium:!0},{id:"y_s_015",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 30 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:30,difficulty:"INTERMEDIATE",equipment:["BOLSTER","STRAP"],goal:["RECOVERY"],tags:["FLOW","SPINE","MOBILITY"],premium:!1},{id:"y_s_016",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 25 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:25,difficulty:"BEGINNER",equipment:["MAT"],goal:["STRESS"],tags:["YIN","BREATH","EVENING"],premium:!1},{id:"y_s_017",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["RECOVERY","FLEXIBILITY"],tags:["HIPS","VINYASA","BACK"],premium:!0},{id:"y_s_018",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 20 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:20,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY","BREATHWORK"],tags:["YIN","MORNING","RECOVERY"],premium:!0},{id:"y_s_019",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 15 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["RECOVERY"],tags:["EVENING","MORNING","HAMSTRINGS"],premium:!0},{id:"y_s_020",category:"YOGA",type:"SESSIONS",title:"Back Release \u2022 15 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:15,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["STRESS"],tags:["SHOULDERS","BACK","YIN"],premium:!1},{id:"y_s_021",category:"YOGA",type:"SESSIONS",title:"Spine Reset \u2022 15 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["STRESS"],tags:["HAMSTRINGS","YIN","MORNING"],premium:!1},{id:"y_s_022",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["BREATHWORK"],tags:["BACK","VINYASA","SPINE"],premium:!0},{id:"y_s_023",category:"YOGA",type:"SESSIONS",title:"Evening Unwind \u2022 20 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:20,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK"],tags:["YIN","SHOULDERS","MORNING"],premium:!1},{id:"y_s_024",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 15 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:15,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["FLEXIBILITY","BREATHWORK"],tags:["BREATH","MORNING","VINYASA"],premium:!0},{id:"y_s_025",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 20 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:20,difficulty:"INTERMEDIATE",equipment:["MAT","STRAP"],goal:["BREATHWORK"],tags:["MOBILITY","VINYASA","HIPS"],premium:!1},{id:"y_s_026",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 45 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:45,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["RECOVERY"],tags:["YIN","MORNING","HAMSTRINGS"],premium:!0},{id:"y_s_027",category:"YOGA",type:"SESSIONS",title:"Hip Mobility \u2022 20 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:20,difficulty:"INTERMEDIATE",equipment:["STRAP","BLOCKS"],goal:["STRESS"],tags:["HAMSTRINGS","BREATH","VINYASA"],premium:!1},{id:"y_s_028",category:"YOGA",type:"SESSIONS",title:"Spine Reset \u2022 25 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:25,difficulty:"INTERMEDIATE",equipment:["MAT","STRAP"],goal:["MOBILITY","BREATHWORK"],tags:["BACK","EVENING","HAMSTRINGS"],premium:!1},{id:"y_s_029",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 20 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:20,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["STRESS","BREATHWORK"],tags:["EVENING","YIN","BACK"],premium:!0},{id:"y_s_030",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 35 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:35,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","STRESS"],tags:["HAMSTRINGS","SPINE","BACK"],premium:!0},{id:"y_s_031",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 30 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:30,difficulty:"BEGINNER",equipment:["STRAP"],goal:["FLEXIBILITY"],tags:["BREATH","RECOVERY","VINYASA"],premium:!0},{id:"y_s_032",category:"YOGA",type:"SESSIONS",title:"Evening Unwind \u2022 25 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:25,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["RECOVERY"],tags:["SPINE","RECOVERY","HAMSTRINGS"],premium:!0},{id:"y_s_033",category:"YOGA",type:"SESSIONS",title:"Shoulder Opener \u2022 45 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:45,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["MOBILITY"],tags:["SPINE","MOBILITY","RECOVERY"],premium:!0},{id:"y_s_034",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 30 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:30,difficulty:"INTERMEDIATE",equipment:["BLOCKS","STRAP"],goal:["BREATHWORK","STRESS"],tags:["FLOW","YIN","VINYASA"],premium:!1},{id:"y_s_035",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 30 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:30,difficulty:"INTERMEDIATE",equipment:["MAT","BLOCKS"],goal:["FLEXIBILITY"],tags:["FLOW","SPINE","BREATH"],premium:!1},{id:"y_s_036",category:"YOGA",type:"SESSIONS",title:"Shoulder Opener \u2022 15 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:15,difficulty:"BEGINNER",equipment:["MAT"],goal:["FLEXIBILITY"],tags:["YIN","RECOVERY","HIPS"],premium:!1},{id:"y_s_037",category:"YOGA",type:"SESSIONS",title:"Back Release \u2022 35 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:35,difficulty:"BEGINNER",equipment:["STRAP"],goal:["RECOVERY"],tags:["EVENING","HIPS","SHOULDERS"],premium:!0},{id:"y_s_038",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 20 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:20,difficulty:"INTERMEDIATE",equipment:["MAT","BLOCKS"],goal:["BREATHWORK"],tags:["HAMSTRINGS","SHOULDERS","MOBILITY"],premium:!1},{id:"y_s_039",category:"YOGA",type:"SESSIONS",title:"Back Release \u2022 25 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:25,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["FLEXIBILITY"],tags:["SPINE","YIN","MOBILITY"],premium:!1},{id:"y_s_040",category:"YOGA",type:"SESSIONS",title:"Back Release \u2022 30 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:30,difficulty:"BEGINNER",equipment:["STRAP"],goal:["STRESS","RECOVERY"],tags:["EVENING","MOBILITY","BACK"],premium:!1},{id:"y_s_041",category:"YOGA",type:"SESSIONS",title:"Back Release \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["RECOVERY","BREATHWORK"],tags:["SHOULDERS","BREATH","YIN"],premium:!0},{id:"y_s_042",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 25 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:25,difficulty:"BEGINNER",equipment:["STRAP"],goal:["MOBILITY"],tags:["SHOULDERS","RECOVERY","MOBILITY"],premium:!1},{id:"y_s_043",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 20 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:20,difficulty:"BEGINNER",equipment:["STRAP"],goal:["STRESS"],tags:["VINYASA","EVENING","YIN"],premium:!0},{id:"y_s_044",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 25 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:25,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["MOBILITY"],tags:["HAMSTRINGS","RECOVERY","SHOULDERS"],premium:!0},{id:"y_s_045",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 20 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:20,difficulty:"INTERMEDIATE",equipment:["BOLSTER","BLOCKS"],goal:["MOBILITY"],tags:["MOBILITY","HAMSTRINGS","BACK"],premium:!1},{id:"y_s_046",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 35 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:35,difficulty:"BEGINNER",equipment:["STRAP"],goal:["BREATHWORK"],tags:["BACK","MOBILITY","HIPS"],premium:!1},{id:"y_s_047",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 20 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:20,difficulty:"BEGINNER",equipment:["STRAP"],goal:["RECOVERY","MOBILITY"],tags:["VINYASA","BREATH","BACK"],premium:!1},{id:"y_s_048",category:"YOGA",type:"SESSIONS",title:"Shoulder Opener \u2022 20 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:20,difficulty:"INTERMEDIATE",equipment:["STRAP","MAT"],goal:["FLEXIBILITY"],tags:["SHOULDERS","HAMSTRINGS","MORNING"],premium:!1},{id:"y_s_049",category:"YOGA",type:"SESSIONS",title:"Hip Mobility \u2022 15 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:15,difficulty:"INTERMEDIATE",equipment:["BOLSTER","MAT"],goal:["BREATHWORK","MOBILITY"],tags:["VINYASA","BREATH","HAMSTRINGS"],premium:!1},{id:"y_s_050",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 25 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:25,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","STRESS"],tags:["EVENING","BACK","HIPS"],premium:!0},{id:"y_s_051",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 35 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:35,difficulty:"BEGINNER",equipment:["STRAP"],goal:["STRESS","FLEXIBILITY"],tags:["EVENING","SHOULDERS","BREATH"],premium:!1},{id:"y_s_052",category:"YOGA",type:"SESSIONS",title:"Power Vinyasa \u2022 15 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:15,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","STRESS"],tags:["EVENING","MOBILITY","FLOW"],premium:!1},{id:"y_s_053",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 15 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:15,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["FLEXIBILITY"],tags:["SHOULDERS","HAMSTRINGS","MOBILITY"],premium:!1},{id:"y_s_054",category:"YOGA",type:"SESSIONS",title:"Hamstring Length \u2022 25 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:25,difficulty:"INTERMEDIATE",equipment:["STRAP","MAT"],goal:["STRESS","BREATHWORK"],tags:["SPINE","HIPS","SHOULDERS"],premium:!1},{id:"y_s_055",category:"YOGA",type:"SESSIONS",title:"Breathwork Reset \u2022 45 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:45,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["BREATHWORK"],tags:["HIPS","RECOVERY","YIN"],premium:!1},{id:"y_s_056",category:"YOGA",type:"SESSIONS",title:"Spine Reset \u2022 45 min",desc:"Mobility-first flow designed to restore range and calm your system.",duration:45,difficulty:"INTERMEDIATE",equipment:["MAT","STRAP"],goal:["STRESS"],tags:["SPINE","FLOW","VINYASA"],premium:!1},{id:"y_s_057",category:"YOGA",type:"SESSIONS",title:"Recovery Flow \u2022 45 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:45,difficulty:"INTERMEDIATE",equipment:["BOLSTER","MAT"],goal:["RECOVERY"],tags:["VINYASA","SPINE","YIN"],premium:!0},{id:"y_s_058",category:"YOGA",type:"SESSIONS",title:"Morning Flow \u2022 30 min",desc:"Breath-led practice for focus, posture, and recovery.",duration:30,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["STRESS","FLEXIBILITY"],tags:["MORNING","EVENING","VINYASA"],premium:!1},{id:"y_s_059",category:"YOGA",type:"SESSIONS",title:"Shoulder Opener \u2022 35 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:35,difficulty:"BEGINNER",equipment:["BOLSTER"],goal:["BREATHWORK"],tags:["MOBILITY","HAMSTRINGS","SHOULDERS"],premium:!0},{id:"y_s_060",category:"YOGA",type:"SESSIONS",title:"Spine Reset \u2022 35 min",desc:"Athletic recovery session: open joints, downshift, move better tomorrow.",duration:35,difficulty:"BEGINNER",equipment:["BLOCKS"],goal:["BREATHWORK","RECOVERY"],tags:["BREATH","EVENING","FLOW"],premium:!1},{id:"y_p_001",category:"YOGA",type:"PROGRAMS",title:"28-Day Stress Downshift",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","STRESS"],tags:["PROGRAM","YIN","SPINE"],premium:!0},{id:"y_p_002",category:"YOGA",type:"PROGRAMS",title:"28-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PROGRAM","EVENING","MOBILITY"],premium:!0},{id:"y_p_003",category:"YOGA",type:"PROGRAMS",title:"7-Day Stress Downshift",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY","BREATHWORK"],tags:["PROGRAM","HAMSTRINGS","RECOVERY"],premium:!0},{id:"y_p_004",category:"YOGA",type:"PROGRAMS",title:"28-Day Stress Downshift",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["STRESS","BREATHWORK"],tags:["PROGRAM","SHOULDERS","MORNING"],premium:!0},{id:"y_p_005",category:"YOGA",type:"PROGRAMS",title:"14-Day Stress Downshift",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:14,difficulty:"BEGINNER",equipment:["MAT"],goal:["STRESS","RECOVERY"],tags:["PROGRAM","FLOW","VINYASA"],premium:!0},{id:"y_p_006",category:"YOGA",type:"PROGRAMS",title:"14-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:14,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["MOBILITY","STRESS"],tags:["PROGRAM","BACK","HIPS"],premium:!0},{id:"y_p_007",category:"YOGA",type:"PROGRAMS",title:"28-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["RECOVERY","MOBILITY"],tags:["PROGRAM","SHOULDERS","MOBILITY"],premium:!0},{id:"y_p_008",category:"YOGA",type:"PROGRAMS",title:"28-Day Morning Ritual",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["RECOVERY","BREATHWORK"],tags:["PROGRAM","HIPS","BREATH"],premium:!0},{id:"y_p_009",category:"YOGA",type:"PROGRAMS",title:"7-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["MOBILITY","RECOVERY"],tags:["PROGRAM","SHOULDERS","MORNING"],premium:!0},{id:"y_p_010",category:"YOGA",type:"PROGRAMS",title:"7-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["RECOVERY","FLEXIBILITY"],tags:["PROGRAM","MOBILITY","VINYASA"],premium:!0},{id:"y_p_011",category:"YOGA",type:"PROGRAMS",title:"28-Day Morning Ritual",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","MOBILITY"],tags:["PROGRAM","VINYASA","BREATH"],premium:!0},{id:"y_p_012",category:"YOGA",type:"PROGRAMS",title:"7-Day Recovery Series",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["BREATHWORK","STRESS"],tags:["PROGRAM","HAMSTRINGS","RECOVERY"],premium:!0},{id:"y_p_013",category:"YOGA",type:"PROGRAMS",title:"28-Day Recovery Series",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["RECOVERY","FLEXIBILITY"],tags:["PROGRAM","BREATH","FLOW"],premium:!0},{id:"y_p_014",category:"YOGA",type:"PROGRAMS",title:"21-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:21,difficulty:"BEGINNER",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PROGRAM","MORNING","MOBILITY"],premium:!0},{id:"y_p_015",category:"YOGA",type:"PROGRAMS",title:"21-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:21,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["STRESS","RECOVERY"],tags:["PROGRAM","MOBILITY","SPINE"],premium:!0},{id:"y_p_016",category:"YOGA",type:"PROGRAMS",title:"28-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["STRESS","BREATHWORK"],tags:["PROGRAM","YIN","BACK"],premium:!0},{id:"y_p_017",category:"YOGA",type:"PROGRAMS",title:"7-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"BEGINNER",equipment:["MAT"],goal:["RECOVERY","FLEXIBILITY"],tags:["PROGRAM","HIPS","FLOW"],premium:!0},{id:"y_p_018",category:"YOGA",type:"PROGRAMS",title:"21-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:21,difficulty:"BEGINNER",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PROGRAM","HIPS","BREATH"],premium:!0},{id:"y_p_019",category:"YOGA",type:"PROGRAMS",title:"7-Day Recovery Series",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:7,difficulty:"BEGINNER",equipment:["MAT"],goal:["BREATHWORK","RECOVERY"],tags:["PROGRAM","VINYASA","RECOVERY"],premium:!0},{id:"y_p_020",category:"YOGA",type:"PROGRAMS",title:"28-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"BEGINNER",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PROGRAM","MORNING","YIN"],premium:!0},{id:"y_p_021",category:"YOGA",type:"PROGRAMS",title:"21-Day Yin Deep Dive",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:21,difficulty:"BEGINNER",equipment:["MAT"],goal:["RECOVERY","STRESS"],tags:["PROGRAM","MOBILITY","HAMSTRINGS"],premium:!0},{id:"y_p_022",category:"YOGA",type:"PROGRAMS",title:"28-Day Flexibility Builder",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["STRESS","BREATHWORK"],tags:["PROGRAM","BACK","MORNING"],premium:!0},{id:"y_p_023",category:"YOGA",type:"PROGRAMS",title:"28-Day Recovery Series",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["RECOVERY","STRESS"],tags:["PROGRAM","RECOVERY","SPINE"],premium:!0},{id:"y_p_024",category:"YOGA",type:"PROGRAMS",title:"28-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:28,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["BREATHWORK","MOBILITY"],tags:["PROGRAM","SPINE","YIN"],premium:!0},{id:"y_p_025",category:"YOGA",type:"PROGRAMS",title:"14-Day Mobility Foundations",desc:"Progressive sequence of sessions with weekly focus and repeatable structure.",duration:14,difficulty:"INTERMEDIATE",equipment:["MAT"],goal:["RECOVERY","STRESS"],tags:["PROGRAM","HIPS","SHOULDERS"],premium:!0},{id:"y_c_001",category:"YOGA",type:"COLLECTIONS",title:"Post-Run Recovery Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["RECOVERY"],tags:["PACK","MORNING","SPINE"],premium:!0},{id:"y_c_002",category:"YOGA",type:"COLLECTIONS",title:"Breath + Calm Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY"],tags:["PACK","HAMSTRINGS","MOBILITY"],premium:!0},{id:"y_c_003",category:"YOGA",type:"COLLECTIONS",title:"Post-Run Recovery Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["STRESS","FLEXIBILITY"],tags:["PACK","RECOVERY","BREATH"],premium:!1},{id:"y_c_004",category:"YOGA",type:"COLLECTIONS",title:"Post-Run Recovery Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY"],tags:["PACK","MORNING","FLOW"],premium:!1},{id:"y_c_005",category:"YOGA",type:"COLLECTIONS",title:"Hips & Hamstrings Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY"],tags:["PACK","SHOULDERS","VINYASA"],premium:!1},{id:"y_c_006",category:"YOGA",type:"COLLECTIONS",title:"Hips & Hamstrings Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["FLEXIBILITY","MOBILITY"],tags:["PACK","BREATH","BACK"],premium:!0},{id:"y_c_007",category:"YOGA",type:"COLLECTIONS",title:"Back Care Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PACK","BACK","HAMSTRINGS"],premium:!1},{id:"y_c_008",category:"YOGA",type:"COLLECTIONS",title:"Post-Run Recovery Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["STRESS"],tags:["PACK","MOBILITY","RECOVERY"],premium:!1},{id:"y_c_009",category:"YOGA",type:"COLLECTIONS",title:"Hips & Hamstrings Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["STRESS"],tags:["PACK","BACK","SHOULDERS"],premium:!0},{id:"y_c_010",category:"YOGA",type:"COLLECTIONS",title:"Back Care Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY","BREATHWORK"],tags:["PACK","HAMSTRINGS","RECOVERY"],premium:!1},{id:"y_c_011",category:"YOGA",type:"COLLECTIONS",title:"Post-Run Recovery Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["RECOVERY","STRESS"],tags:["PACK","HAMSTRINGS","HIPS"],premium:!0},{id:"y_c_012",category:"YOGA",type:"COLLECTIONS",title:"Back Care Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY","STRESS"],tags:["PACK","EVENING","RECOVERY"],premium:!0},{id:"y_c_013",category:"YOGA",type:"COLLECTIONS",title:"Hips & Hamstrings Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY"],tags:["PACK","YIN","SPINE"],premium:!0},{id:"y_c_014",category:"YOGA",type:"COLLECTIONS",title:"Breath + Calm Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY","RECOVERY"],tags:["PACK","MORNING","VINYASA"],premium:!0},{id:"y_c_015",category:"YOGA",type:"COLLECTIONS",title:"Back Care Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["MOBILITY","RECOVERY"],tags:["PACK","SHOULDERS","BREATH"],premium:!0},{id:"y_c_016",category:"YOGA",type:"COLLECTIONS",title:"Mobility Minis Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["STRESS","BREATHWORK"],tags:["PACK","FLOW","BREATH"],premium:!1},{id:"y_c_017",category:"YOGA",type:"COLLECTIONS",title:"Mobility Minis Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PACK","BREATH","VINYASA"],premium:!1},{id:"y_c_018",category:"YOGA",type:"COLLECTIONS",title:"Breath + Calm Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["RECOVERY","FLEXIBILITY"],tags:["PACK","SHOULDERS","HAMSTRINGS"],premium:!0},{id:"y_c_019",category:"YOGA",type:"COLLECTIONS",title:"Desk Body Reset Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["FLEXIBILITY","BREATHWORK"],tags:["PACK","MORNING","BACK"],premium:!0},{id:"y_c_020",category:"YOGA",type:"COLLECTIONS",title:"Desk Body Reset Pack",desc:"A focused set of sessions for a specific area or outcome.",duration:0,difficulty:"ALL",equipment:["MAT"],goal:["STRESS"],tags:["PACK","HAMSTRINGS","FLOW"],premium:!1},{id:"y_e_001",category:"YOGA",type:"EXERCISES",title:"Low Lunge Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","BACK"],premium:!1},{id:"y_e_002",category:"YOGA",type:"EXERCISES",title:"Seated Twist Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","HIPS"],premium:!1},{id:"y_e_003",category:"YOGA",type:"EXERCISES",title:"Forward Fold Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","SHOULDERS"],premium:!1},{id:"y_e_004",category:"YOGA",type:"EXERCISES",title:"Bridge Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","SPINE"],premium:!1},{id:"y_e_005",category:"YOGA",type:"EXERCISES",title:"Forward Fold Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","BACK"],premium:!1},{id:"y_e_006",category:"YOGA",type:"EXERCISES",title:"Bridge Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","BACK"],premium:!1},{id:"y_e_007",category:"YOGA",type:"EXERCISES",title:"Low Lunge Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","BACK"],premium:!1},{id:"y_e_008",category:"YOGA",type:"EXERCISES",title:"Cobra Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","HIPS"],premium:!1},{id:"y_e_009",category:"YOGA",type:"EXERCISES",title:"Seated Twist Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","HAMSTRINGS"],premium:!1},{id:"y_e_010",category:"YOGA",type:"EXERCISES",title:"Pigeon Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","SPINE"],premium:!1},{id:"y_e_011",category:"YOGA",type:"EXERCISES",title:"Cat-Cow Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","HIPS"],premium:!1},{id:"y_e_012",category:"YOGA",type:"EXERCISES",title:"Low Lunge Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","SHOULDERS"],premium:!1},{id:"y_e_013",category:"YOGA",type:"EXERCISES",title:"Triangle Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","SPINE"],premium:!1},{id:"y_e_014",category:"YOGA",type:"EXERCISES",title:"Warrior II Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","HIPS"],premium:!1},{id:"y_e_015",category:"YOGA",type:"EXERCISES",title:"Pigeon Guide",desc:"Pose setup + alignment cues + regressions/progressions.",duration:0,difficulty:"BEGINNER",equipment:["MAT"],goal:["MOBILITY"],tags:["GUIDE","BACK"],premium:!1},{id:"n_s_001",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["VEGETARIAN"],tags:["QUICK","MEAL PREP","BREAKFAST"],premium:!0},{id:"n_s_002",category:"NUTRITION",type:"SESSIONS",title:"Greek Yogurt Power Parfait",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO","RECOVERY"],tags:["BALANCED","SNACK","LOW CARB"],premium:!1},{id:"n_s_003",category:"NUTRITION",type:"SESSIONS",title:"Tuna Rice Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO"],tags:["QUICK","MEAL PREP","CUT"],premium:!1},{id:"n_s_004",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["STOVE"],goal:["MAINTENANCE","FAT LOSS"],tags:["QUICK","BALANCED","LOW CARB"],premium:!0},{id:"n_s_005",category:"NUTRITION",type:"SESSIONS",title:"Greek Yogurt Power Parfait",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["RECOVERY"],tags:["BULK","LOW CARB","MEAL PREP"],premium:!0},{id:"n_s_006",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["KETO"],tags:["CUT","QUICK","MEAL PREP"],premium:!1},{id:"n_s_007",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO"],tags:["QUICK","DINNER","CUT"],premium:!1},{id:"n_s_008",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"INTERMEDIATE",equipment:["OVEN"],goal:["HIGH PROTEIN","RECOVERY"],tags:["BREAKFAST","LUNCH","BALANCED"],premium:!1},{id:"n_s_009",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"INTERMEDIATE",equipment:["NO-COOK"],goal:["FAT LOSS"],tags:["BREAKFAST","SNACK","POST-WORKOUT"],premium:!1},{id:"n_s_010",category:"NUTRITION",type:"SESSIONS",title:"High-Protein Chicken Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["OVEN"],goal:["KETO","LEAN MUSCLE"],tags:["BREAKFAST","BALANCED","POST-WORKOUT"],premium:!1},{id:"n_s_011",category:"NUTRITION",type:"SESSIONS",title:"High-Protein Chicken Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["MAINTENANCE"],tags:["BREAKFAST","POST-WORKOUT","LOW CARB"],premium:!1},{id:"n_s_012",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"INTERMEDIATE",equipment:["OVEN"],goal:["FAT LOSS"],tags:["BULK","POST-WORKOUT","MEAL PREP"],premium:!1},{id:"n_s_013",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["LEAN MUSCLE","RECOVERY"],tags:["SNACK","BALANCED","MEAL PREP"],premium:!1},{id:"n_s_014",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"INTERMEDIATE",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["LOW CARB","POST-WORKOUT","HIGH FIBER"],premium:!0},{id:"n_s_015",category:"NUTRITION",type:"SESSIONS",title:"High-Protein Chicken Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO","MAINTENANCE"],tags:["BULK","LUNCH","POST-WORKOUT"],premium:!1},{id:"n_s_016",category:"NUTRITION",type:"SESSIONS",title:"Greek Yogurt Power Parfait",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"INTERMEDIATE",equipment:["OVEN"],goal:["HIGH PROTEIN"],tags:["LUNCH","CUT","MEAL PREP"],premium:!1},{id:"n_s_017",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["FAT LOSS"],tags:["BULK","DINNER","LOW CARB"],premium:!1},{id:"n_s_018",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"BEGINNER",equipment:["OVEN"],goal:["LEAN MUSCLE","KETO"],tags:["POST-WORKOUT","QUICK","LOW CARB"],premium:!1},{id:"n_s_019",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"INTERMEDIATE",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["BREAKFAST","LUNCH","LOW CARB"],premium:!0},{id:"n_s_020",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["OVEN"],goal:["LEAN MUSCLE","MAINTENANCE"],tags:["BREAKFAST","CUT","MEAL PREP"],premium:!1},{id:"n_s_021",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["OVEN"],goal:["LEAN MUSCLE","FAT LOSS"],tags:["CUT","BULK","LOW CARB"],premium:!0},{id:"n_s_022",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["LOW CARB","CUT","DINNER"],premium:!1},{id:"n_s_023",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE","MAINTENANCE"],tags:["MEAL PREP","LUNCH","DINNER"],premium:!0},{id:"n_s_024",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["OVEN"],goal:["HIGH PROTEIN"],tags:["LUNCH","QUICK","POST-WORKOUT"],premium:!0},{id:"n_s_025",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"BEGINNER",equipment:["STOVE"],goal:["LEAN MUSCLE"],tags:["LOW CARB","LUNCH","POST-WORKOUT"],premium:!1},{id:"n_s_026",category:"NUTRITION",type:"SESSIONS",title:"Greek Yogurt Power Parfait",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["STOVE"],goal:["MAINTENANCE"],tags:["MEAL PREP","BALANCED","HIGH FIBER"],premium:!0},{id:"n_s_027",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["HIGH PROTEIN"],tags:["QUICK","MEAL PREP","SNACK"],premium:!1},{id:"n_s_028",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["STOVE"],goal:["MAINTENANCE"],tags:["BREAKFAST","LOW CARB","QUICK"],premium:!1},{id:"n_s_029",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"INTERMEDIATE",equipment:["STOVE"],goal:["VEGETARIAN"],tags:["CUT","BULK","DINNER"],premium:!1},{id:"n_s_030",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["LEAN MUSCLE"],tags:["QUICK","MEAL PREP","HIGH FIBER"],premium:!1},{id:"n_s_031",category:"NUTRITION",type:"SESSIONS",title:"Greek Yogurt Power Parfait",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["STOVE"],goal:["RECOVERY"],tags:["SNACK","BULK","POST-WORKOUT"],premium:!0},{id:"n_s_032",category:"NUTRITION",type:"SESSIONS",title:"Tuna Rice Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"INTERMEDIATE",equipment:["STOVE"],goal:["FAT LOSS","LEAN MUSCLE"],tags:["MEAL PREP","LUNCH","LOW CARB"],premium:!1},{id:"n_s_033",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["KETO","LEAN MUSCLE"],tags:["LOW CARB","LUNCH","HIGH FIBER"],premium:!1},{id:"n_s_034",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["OVEN"],goal:["VEGETARIAN","KETO"],tags:["LOW CARB","POST-WORKOUT","BREAKFAST"],premium:!1},{id:"n_s_035",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"INTERMEDIATE",equipment:["OVEN"],goal:["HIGH PROTEIN"],tags:["LUNCH","SNACK","QUICK"],premium:!0},{id:"n_s_036",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["STOVE"],goal:["MAINTENANCE","LEAN MUSCLE"],tags:["LUNCH","BREAKFAST","BALANCED"],premium:!0},{id:"n_s_037",category:"NUTRITION",type:"SESSIONS",title:"Tuna Rice Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["OVEN"],goal:["FAT LOSS","LEAN MUSCLE"],tags:["QUICK","LOW CARB","HIGH FIBER"],premium:!1},{id:"n_s_038",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["LEAN MUSCLE","HIGH PROTEIN"],tags:["MEAL PREP","LOW CARB","LUNCH"],premium:!0},{id:"n_s_039",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["STOVE"],goal:["RECOVERY","LEAN MUSCLE"],tags:["QUICK","HIGH FIBER","LUNCH"],premium:!1},{id:"n_s_040",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN","VEGETARIAN"],tags:["QUICK","CUT","LUNCH"],premium:!1},{id:"n_s_041",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["MAINTENANCE"],tags:["POST-WORKOUT","LOW CARB","HIGH FIBER"],premium:!0},{id:"n_s_042",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO"],tags:["BULK","SNACK","HIGH FIBER"],premium:!1},{id:"n_s_043",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["KETO"],tags:["LUNCH","BULK","BALANCED"],premium:!1},{id:"n_s_044",category:"NUTRITION",type:"SESSIONS",title:"Tuna Rice Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["MAINTENANCE"],tags:["CUT","HIGH FIBER","POST-WORKOUT"],premium:!1},{id:"n_s_045",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["STOVE"],goal:["MAINTENANCE"],tags:["QUICK","HIGH FIBER","BULK"],premium:!0},{id:"n_s_046",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["FAT LOSS"],tags:["MEAL PREP","LUNCH","DINNER"],premium:!1},{id:"n_s_047",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["OVEN"],goal:["LEAN MUSCLE"],tags:["LOW CARB","DINNER","HIGH FIBER"],premium:!1},{id:"n_s_048",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["MAINTENANCE"],tags:["HIGH FIBER","BULK","BREAKFAST"],premium:!1},{id:"n_s_049",category:"NUTRITION",type:"SESSIONS",title:"High-Protein Chicken Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["STOVE"],goal:["RECOVERY","KETO"],tags:["HIGH FIBER","LOW CARB","BALANCED"],premium:!1},{id:"n_s_050",category:"NUTRITION",type:"SESSIONS",title:"Protein Pancakes",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["OVEN"],goal:["VEGETARIAN"],tags:["SNACK","MEAL PREP","BREAKFAST"],premium:!0},{id:"n_s_051",category:"NUTRITION",type:"SESSIONS",title:"Tuna Rice Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["STOVE"],goal:["VEGETARIAN"],tags:["HIGH FIBER","POST-WORKOUT","CUT"],premium:!0},{id:"n_s_052",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:15,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["VEGETARIAN"],tags:["BREAKFAST","HIGH FIBER","POST-WORKOUT"],premium:!0},{id:"n_s_053",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["HIGH PROTEIN"],tags:["HIGH FIBER","MEAL PREP","QUICK"],premium:!1},{id:"n_s_054",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"INTERMEDIATE",equipment:["KITCHEN"],goal:["FAT LOSS","VEGETARIAN"],tags:["BALANCED","BULK","QUICK"],premium:!1},{id:"n_s_055",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["OVEN"],goal:["FAT LOSS"],tags:["SNACK","BREAKFAST","BULK"],premium:!1},{id:"n_s_056",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["MAINTENANCE","VEGETARIAN"],tags:["BULK","MEAL PREP","POST-WORKOUT"],premium:!1},{id:"n_s_057",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"INTERMEDIATE",equipment:["STOVE"],goal:["MAINTENANCE","KETO"],tags:["DINNER","BALANCED","SNACK"],premium:!0},{id:"n_s_058",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"BEGINNER",equipment:["STOVE"],goal:["RECOVERY"],tags:["CUT","MEAL PREP","LOW CARB"],premium:!1},{id:"n_s_059",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["KETO"],tags:["MEAL PREP","QUICK","HIGH FIBER"],premium:!1},{id:"n_s_060",category:"NUTRITION",type:"SESSIONS",title:"Turkey Wrap + Crunch",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:25,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE","KETO"],tags:["CUT","QUICK","LUNCH"],premium:!1},{id:"n_s_061",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"INTERMEDIATE",equipment:["NO-COOK"],goal:["MAINTENANCE"],tags:["MEAL PREP","QUICK","POST-WORKOUT"],premium:!1},{id:"n_s_062",category:"NUTRITION",type:"SESSIONS",title:"Egg White Scramble",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:40,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["VEGETARIAN","HIGH PROTEIN"],tags:["BREAKFAST","LUNCH","HIGH FIBER"],premium:!0},{id:"n_s_063",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["STOVE"],goal:["KETO"],tags:["DINNER","CUT","MEAL PREP"],premium:!0},{id:"n_s_064",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["AIR-FRYER"],goal:["KETO"],tags:["CUT","DINNER","BREAKFAST"],premium:!1},{id:"n_s_065",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["HIGH PROTEIN"],tags:["BALANCED","LUNCH","BREAKFAST"],premium:!0},{id:"n_s_066",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"BEGINNER",equipment:["OVEN"],goal:["HIGH PROTEIN","VEGETARIAN"],tags:["BALANCED","QUICK","LUNCH"],premium:!1},{id:"n_s_067",category:"NUTRITION",type:"SESSIONS",title:"Tofu Veggie Bowl",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:30,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["BALANCED","LUNCH","CUT"],premium:!1},{id:"n_s_068",category:"NUTRITION",type:"SESSIONS",title:"Overnight Oats Pro",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:10,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["KETO","FAT LOSS"],tags:["LUNCH","POST-WORKOUT","BULK"],premium:!0},{id:"n_s_069",category:"NUTRITION",type:"SESSIONS",title:"Lean Beef Stir-Fry",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:20,difficulty:"BEGINNER",equipment:["NO-COOK"],goal:["FAT LOSS","LEAN MUSCLE"],tags:["BULK","CUT","HIGH FIBER"],premium:!1},{id:"n_s_070",category:"NUTRITION",type:"SESSIONS",title:"Salmon Recovery Plate",desc:"Macro-aware recipe with athlete-friendly portions and fast prep.",duration:5,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["QUICK","LOW CARB","BALANCED"],premium:!1},{id:"n_p_001",category:"NUTRITION",type:"PROGRAMS",title:"Maintenance Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN","FAT LOSS"],tags:["TEMPLATE","POST-WORKOUT","BULK"],premium:!1},{id:"n_p_002",category:"NUTRITION",type:"PROGRAMS",title:"Recovery Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN","KETO"],tags:["TEMPLATE","MEAL PREP","SNACK"],premium:!0},{id:"n_p_003",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE","MAINTENANCE"],tags:["TEMPLATE","CUT","BREAKFAST"],premium:!1},{id:"n_p_004",category:"NUTRITION",type:"PROGRAMS",title:"Maintenance Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["TEMPLATE","SNACK","HIGH FIBER"],premium:!0},{id:"n_p_005",category:"NUTRITION",type:"PROGRAMS",title:"Cutting Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["TEMPLATE","DINNER","LOW CARB"],premium:!1},{id:"n_p_006",category:"NUTRITION",type:"PROGRAMS",title:"Lean Bulk Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["TEMPLATE","HIGH FIBER","LUNCH"],premium:!0},{id:"n_p_007",category:"NUTRITION",type:"PROGRAMS",title:"Cutting Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["FAT LOSS","HIGH PROTEIN"],tags:["TEMPLATE","BREAKFAST","LOW CARB"],premium:!0},{id:"n_p_008",category:"NUTRITION",type:"PROGRAMS",title:"Recovery Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","LOW CARB","BALANCED"],premium:!0},{id:"n_p_009",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["TEMPLATE","MEAL PREP","LUNCH"],premium:!0},{id:"n_p_010",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","DINNER","POST-WORKOUT"],premium:!0},{id:"n_p_011",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","CUT","BALANCED"],premium:!1},{id:"n_p_012",category:"NUTRITION",type:"PROGRAMS",title:"Vegetarian High-Protein Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","SNACK","BREAKFAST"],premium:!0},{id:"n_p_013",category:"NUTRITION",type:"PROGRAMS",title:"Vegetarian High-Protein Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["RECOVERY","VEGETARIAN"],tags:["TEMPLATE","BREAKFAST","MEAL PREP"],premium:!1},{id:"n_p_014",category:"NUTRITION",type:"PROGRAMS",title:"Maintenance Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["KETO","FAT LOSS"],tags:["TEMPLATE","BALANCED","BREAKFAST"],premium:!0},{id:"n_p_015",category:"NUTRITION",type:"PROGRAMS",title:"Lean Bulk Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","BALANCED","MEAL PREP"],premium:!0},{id:"n_p_016",category:"NUTRITION",type:"PROGRAMS",title:"Maintenance Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","MEAL PREP","LUNCH"],premium:!0},{id:"n_p_017",category:"NUTRITION",type:"PROGRAMS",title:"Vegetarian High-Protein Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN","MAINTENANCE"],tags:["TEMPLATE","BALANCED","BULK"],premium:!1},{id:"n_p_018",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["TEMPLATE","BULK","DINNER"],premium:!0},{id:"n_p_019",category:"NUTRITION",type:"PROGRAMS",title:"Lean Bulk Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["RECOVERY"],tags:["TEMPLATE","CUT","LUNCH"],premium:!0},{id:"n_p_020",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN","HIGH PROTEIN"],tags:["TEMPLATE","SNACK","BREAKFAST"],premium:!0},{id:"n_p_021",category:"NUTRITION",type:"PROGRAMS",title:"Vegetarian High-Protein Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["TEMPLATE","BREAKFAST","POST-WORKOUT"],premium:!1},{id:"n_p_022",category:"NUTRITION",type:"PROGRAMS",title:"Recovery Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["TEMPLATE","SNACK","LOW CARB"],premium:!1},{id:"n_p_023",category:"NUTRITION",type:"PROGRAMS",title:"Cutting Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["TEMPLATE","POST-WORKOUT","CUT"],premium:!0},{id:"n_p_024",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["TEMPLATE","LUNCH","HIGH FIBER"],premium:!1},{id:"n_p_025",category:"NUTRITION",type:"PROGRAMS",title:"Lean Bulk Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["RECOVERY","LEAN MUSCLE"],tags:["TEMPLATE","BREAKFAST","QUICK"],premium:!0},{id:"n_p_026",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["KETO"],tags:["TEMPLATE","BULK","SNACK"],premium:!0},{id:"n_p_027",category:"NUTRITION",type:"PROGRAMS",title:"Low-Carb Performance Day",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["TEMPLATE","SNACK","POST-WORKOUT"],premium:!1},{id:"n_p_028",category:"NUTRITION",type:"PROGRAMS",title:"Cutting Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["TEMPLATE","SNACK","POST-WORKOUT"],premium:!0},{id:"n_p_029",category:"NUTRITION",type:"PROGRAMS",title:"Recovery Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["TEMPLATE","BREAKFAST","CUT"],premium:!0},{id:"n_p_030",category:"NUTRITION",type:"PROGRAMS",title:"Recovery Day Template",desc:"A full-day structure: meal timing, macro targets, and swap options.",duration:1,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["TEMPLATE","SNACK","POST-WORKOUT"],premium:!1},{id:"n_c_001",category:"NUTRITION",type:"COLLECTIONS",title:"7-Day Meal Prep Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["FAT LOSS","KETO"],tags:["PACK","MEAL PREP","LUNCH"],premium:!0},{id:"n_c_002",category:"NUTRITION",type:"COLLECTIONS",title:"Athlete Recovery Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["RECOVERY","LEAN MUSCLE"],tags:["PACK","BALANCED","QUICK"],premium:!0},{id:"n_c_003",category:"NUTRITION",type:"COLLECTIONS",title:"High-Protein Snacks Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["HIGH PROTEIN"],tags:["PACK","POST-WORKOUT","DINNER"],premium:!1},{id:"n_c_004",category:"NUTRITION",type:"COLLECTIONS",title:"Quick & Clean Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["PACK","CUT","DINNER"],premium:!0},{id:"n_c_005",category:"NUTRITION",type:"COLLECTIONS",title:"Lean Muscle Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["VEGETARIAN","LEAN MUSCLE"],tags:["PACK","BALANCED","QUICK"],premium:!0},{id:"n_c_006",category:"NUTRITION",type:"COLLECTIONS",title:"Lean Muscle Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["PACK","DINNER","BULK"],premium:!0},{id:"n_c_007",category:"NUTRITION",type:"COLLECTIONS",title:"7-Day Meal Prep Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["PACK","QUICK","LOW CARB"],premium:!0},{id:"n_c_008",category:"NUTRITION",type:"COLLECTIONS",title:"Lean Muscle Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["FAT LOSS","LEAN MUSCLE"],tags:["PACK","MEAL PREP","HIGH FIBER"],premium:!0},{id:"n_c_009",category:"NUTRITION",type:"COLLECTIONS",title:"7-Day Meal Prep Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["PACK","CUT","MEAL PREP"],premium:!1},{id:"n_c_010",category:"NUTRITION",type:"COLLECTIONS",title:"7-Day Meal Prep Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["PACK","QUICK","DINNER"],premium:!0},{id:"n_c_011",category:"NUTRITION",type:"COLLECTIONS",title:"Athlete Recovery Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["LEAN MUSCLE","RECOVERY"],tags:["PACK","BREAKFAST","CUT"],premium:!0},{id:"n_c_012",category:"NUTRITION",type:"COLLECTIONS",title:"Athlete Recovery Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["LEAN MUSCLE"],tags:["PACK","HIGH FIBER","POST-WORKOUT"],premium:!1},{id:"n_c_013",category:"NUTRITION",type:"COLLECTIONS",title:"Fat-Loss Favorites Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["PACK","DINNER","LUNCH"],premium:!0},{id:"n_c_014",category:"NUTRITION",type:"COLLECTIONS",title:"Athlete Recovery Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["VEGETARIAN"],tags:["PACK","LOW CARB","QUICK"],premium:!1},{id:"n_c_015",category:"NUTRITION",type:"COLLECTIONS",title:"7-Day Meal Prep Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["PACK","LUNCH","BREAKFAST"],premium:!0},{id:"n_c_016",category:"NUTRITION",type:"COLLECTIONS",title:"High-Protein Snacks Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["FAT LOSS"],tags:["PACK","LUNCH","QUICK"],premium:!0},{id:"n_c_017",category:"NUTRITION",type:"COLLECTIONS",title:"Fat-Loss Favorites Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["RECOVERY"],tags:["PACK","LOW CARB","BALANCED"],premium:!0},{id:"n_c_018",category:"NUTRITION",type:"COLLECTIONS",title:"Fat-Loss Favorites Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["FAT LOSS","MAINTENANCE"],tags:["PACK","SNACK","DINNER"],premium:!0},{id:"n_c_019",category:"NUTRITION",type:"COLLECTIONS",title:"Fat-Loss Favorites Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["HIGH PROTEIN","RECOVERY"],tags:["PACK","BULK","BALANCED"],premium:!0},{id:"n_c_020",category:"NUTRITION",type:"COLLECTIONS",title:"Lean Muscle Pack",desc:"Curated recipes + templates built for a clear outcome.",duration:0,difficulty:"ALL",equipment:["KITCHEN"],goal:["RECOVERY"],tags:["PACK","HIGH FIBER","BREAKFAST"],premium:!0},{id:"n_e_001",category:"NUTRITION",type:"EXERCISES",title:"Hydration Checklist",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","MACROS"],premium:!1},{id:"n_e_002",category:"NUTRITION",type:"EXERCISES",title:"Hydration Checklist",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","MACROS"],premium:!1},{id:"n_e_003",category:"NUTRITION",type:"EXERCISES",title:"Pre-Workout Fuel Guide",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","FUELING"],premium:!1},{id:"n_e_004",category:"NUTRITION",type:"EXERCISES",title:"Macro Tracking 101",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","FUELING"],premium:!1},{id:"n_e_005",category:"NUTRITION",type:"EXERCISES",title:"Meal Prep Basics",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","GROCERY"],premium:!1},{id:"n_e_006",category:"NUTRITION",type:"EXERCISES",title:"Pre-Workout Fuel Guide",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","HYDRATION"],premium:!1},{id:"n_e_007",category:"NUTRITION",type:"EXERCISES",title:"Hydration Checklist",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","FUELING"],premium:!1},{id:"n_e_008",category:"NUTRITION",type:"EXERCISES",title:"Hydration Checklist",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","HYDRATION"],premium:!1},{id:"n_e_009",category:"NUTRITION",type:"EXERCISES",title:"Grocery List Builder",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","FUELING"],premium:!1},{id:"n_e_010",category:"NUTRITION",type:"EXERCISES",title:"Protein Portion Guide",desc:"Practical guide to make tracking and prep effortless.",duration:0,difficulty:"BEGINNER",equipment:["KITCHEN"],goal:["MAINTENANCE"],tags:["GUIDE","GROCERY"],premium:!1}],[e]),je=React.useMemo(()=>({category:"WORKOUT",type:"SESSIONS",goal:[],duration:[],difficulty:[],equipment:[],tags:[],premiumOnly:!1,search:"",sort:"RECOMMENDED"}),[]),re=React.useCallback(k=>{var T=oe=>{if(Array.isArray(oe))return oe;if(oe==null)return[];if(typeof oe=="string"||typeof oe=="number")return[oe];if(typeof oe=="object"){if(Array.isArray(oe.selected))return oe.selected;if(Array.isArray(oe.items))return oe.items;if(Array.isArray(oe.value))return oe.value}return[]},he={...je,...k||{}};return he.category=(he.category||"WORKOUT").toString().toUpperCase(),he.type=(he.type||"SESSIONS").toString().toUpperCase(),he.sort=(he.sort||"RECOMMENDED").toString().toUpperCase(),he.goal=T(he.goal),he.duration=T(he.duration),he.difficulty=T(he.difficulty),he.equipment=T(he.equipment),he.tags=T(he.tags),he.search=typeof he.search=="string"?he.search:"",he.premiumOnly=!!he.premiumOnly,he},[je]),[Z,Qe]=React.useState(()=>{try{var k=localStorage.getItem("fof_filters_library_v1");if(!k)return re(je);var T=JSON.parse(k);return re({...je,...T||{}})}catch(k){return re(je)}}),nt=React.useCallback(k=>{try{localStorage.setItem("fof_filters_library_v1",JSON.stringify(k))}catch(T){}},[]);React.useEffect(()=>{nt(Z)},[Z,nt]);var Lt=React.useMemo(()=>{var k=[],T=(he,oe,ke)=>k.push({k:he,v:oe,label:ke||String(oe)});return Z.type&&Z.type!==je.type&&T("type",Z.type,`Type: ${Z.type}`),(Z.goal||[]).forEach(he=>T("goal",he,he)),(Z.duration||[]).forEach(he=>T("duration",he,he)),(Z.difficulty||[]).forEach(he=>T("difficulty",he,he)),(Z.equipment||[]).forEach(he=>T("equipment",he,he)),(Z.tags||[]).forEach(he=>T("tags",he,he)),Z.premiumOnly&&T("premiumOnly",!0,"Premium only"),Z.sort&&Z.sort!==je.sort&&T("sort",Z.sort,`Sort: ${Z.sort}`),Z.search&&T("search",Z.search,`\u201C${Z.search}\u201D`),k},[Z,je]),ze=k=>{Qe(T=>{var he={...T};return k.k==="goal"||k.k==="duration"||k.k==="difficulty"||k.k==="equipment"||k.k==="tags"?he[k.k]=(he[k.k]||[]).filter(oe=>oe!==k.v):k.k==="premiumOnly"?he.premiumOnly=!1:k.k==="search"?he.search="":k.k==="sort"?he.sort=je.sort:k.k==="type"&&(he.type=je.type),he})},Le=React.useMemo(()=>{var k=["goal","duration","difficulty","equipment","tags"];return String(Z.search||"").trim()!==""||Z.premiumOnly||Z.type&&Z.type!==je.type||Z.sort&&Z.sort!==je.sort?!0:k.some(T=>(Z[T]||[]).length)},[Z,je]),se=()=>Qe(je),[at,Pe]=React.useState(!1),[Wt,Ha]=React.useState(()=>{try{return localStorage.getItem("fof_library_facets_beta_v1")==="1"}catch(k){return!1}});React.useEffect(()=>{try{localStorage.setItem("fof_library_facets_beta_v1",Wt?"1":"0")}catch(k){}},[Wt]);var[qa,oa]=React.useState(()=>{try{var k=localStorage.getItem("fof_library_minihubs_beta_v1");return k===null?!0:k==="1"}catch(k){return!0}});React.useEffect(()=>{try{localStorage.setItem("fof_library_minihubs_beta_v1",qa?"1":"0")}catch(k){}},[qa]);var[Ra,ri]=React.useState(()=>{try{var k=localStorage.getItem("fof_library_preview_v2_beta_v1");return k===null?!0:k==="1"}catch(k){return!0}});React.useEffect(()=>{try{localStorage.setItem("fof_library_preview_v2_beta_v1",Ra?"1":"0")}catch(k){}},[Ra]);var[Da,Va]=React.useState(!1),[Y,ft]=React.useState(null),[_a,Ja]=React.useState({open:!1,msg:""});React.useEffect(()=>{if(!_a.open)return;var k=setTimeout(()=>Ja({open:!1,msg:""}),2200);return()=>clearTimeout(k)},[_a.open]);var[Ui,qs]=React.useState(!1),[_o,ki]=React.useState({reason:"PREMIUM",item:null}),Vs=React.useCallback(k=>{if(!k)return!1;var T=String(me.yogaAccess||me.yogaAccessState||"").toUpperCase();return String(k.category||"").toUpperCase()==="YOGA"?T==="FULL"?!1:T==="LIMITED"?!!k.premium:!0:!!(k.premium&&!me.hasFull)},[me]),Ke=k=>{if(Vs(k)){ki({reason:k.category==="YOGA"?"YOGA_PREMIUM":"PREMIUM",item:k}),qs(!0);return}ft(k);try{var T="fof_library_recent_v1",he=localStorage.getItem(T),oe=he?JSON.parse(he):[],ke=[k.id,...oe.filter(Re=>Re!==k.id)].slice(0,12);localStorage.setItem(T,JSON.stringify(ke))}catch(T){}},ua=k=>{try{var T=String(k||""),he=T.split("-").map(Me=>parseInt(Me,10));if(he.length!==3||he.some(Me=>isNaN(Me)))return T||"today";var oe=new Date(he[0],he[1]-1,he[2]),ke=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][oe.getDay()],Re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][oe.getMonth()];return`${ke} ${he[2]} ${Re}`}catch(T){return String(k||"")}},ga=()=>{try{if(typeof window.__fof_getSelectedDayKey=="function")return String(window.__fof_getSelectedDayKey()||"")}catch(k){}try{return String(localStorage.getItem("fof_selected_day_v1")||"")}catch(k){}try{return String(r||Gs(new Date))}catch(k){}return""},Vi=k=>{try{var T=String(typeof window.__fof_getSelectedDayKey=="function"?window.__fof_getSelectedDayKey():r||Gs(new Date));try{ft(null)}catch(he){}typeof window.__fof_planAddItem=="function"?window.__fof_planAddItem(T,k):window.dispatchEvent(new CustomEvent("flowofit:addToPlan",{detail:{dateKey:T,item:k}}));try{window.dispatchEvent(new CustomEvent("flowofit:planDBUpdated",{detail:{dateKey:T}}))}catch(he){}try{window.__toast&&window.__toast("Added to Plan")}catch(he){}try{De({open:!0,dateKey:T})}catch(he){}try{localStorage.setItem("fof_selected_day_v1",T)}catch(he){}try{typeof window.__fof_setSelectedDayKey=="function"&&window.__fof_setSelectedDayKey(T)}catch(he){}try{window.dispatchEvent(new CustomEvent("flowofit:selectedDayChanged",{detail:{dateKey:T}}))}catch(he){}}catch(T){}},$i=k=>{try{we(k);return}catch(T){}try{var T=window&&window.__fof_openPlanPicker?window.__fof_openPlanPicker:null;if(typeof T=="function"){T(k);return}}catch(T){}try{var T="fof_plan_queue_v1",he=localStorage.getItem(T),oe=he?JSON.parse(he):[],ke=[{id:k.id,ts:Date.now()},...oe].slice(0,50);localStorage.setItem(T,JSON.stringify(ke))}catch(T){}Ja({open:!0,msg:"Added to Plan Queue"})},Ya=k=>{var T=(k==null?void 0:k.type)||"SESSIONS";return T==="PROGRAMS"?["Multi-week structure","Progression focus","Weekly schedule"]:T==="COLLECTIONS"?["Curated pack","Mix of sessions","Fast selection"]:T==="EXERCISES"?["Technique cues","Variations","Build into your plan"]:["Warm-up \u2192 main work \u2192 finisher","Coaching cues","Time-boxed session"]},Zt=k=>{var T=new Set(((k==null?void 0:k.goal)||[]).map(String)),he=new Set(((k==null?void 0:k.tags)||[]).map(String));return(k==null?void 0:k.type)==="PROGRAMS"?"Run 4\u20135x/week for best results.":T.has("STRENGTH")||T.has("MUSCLE")||he.has("POWER")?"3x/week fits most lifters (alternate A/B).":T.has("FAT LOSS")||he.has("CONDITIONING")?"3\u20134x/week + 1 recovery day.":T.has("MOBILITY")||T.has("RECOVERY")?"Daily 10\u201320 min works great.":"2\u20133x/week to build consistency."},Ki=k=>{var T=(k==null?void 0:k.equipment)||[];return T!=null&&T.length?T.slice(0,4).join(" \u2022 "):"No equipment required."},Fa=React.useMemo(()=>({goal:["STRENGTH","MUSCLE","FAT LOSS","MOBILITY","RECOVERY","POWER","HEALTH"],type:["SESSIONS","PROGRAMS","COLLECTIONS","EXERCISES"],duration:["0-10","10-20","20-30","30-45","45+"],difficulty:["BEGINNER","INTERMEDIATE","ADVANCED"],equipment:["BODYWEIGHT","DUMBBELLS","GYM","MAT"],tags:["FULL BODY","CORE","POWER","FLOW","STRETCH","PROGRAM","PACK","TEMPLATE","POSE","BEGINNER","COMPOUND","MEALS","SETUP","LEGS"]}),[]),Ni=React.useMemo(()=>{var k=String(Z.search||"").trim().toLowerCase(),T=Et=>{if(!(Z.duration||[]).length)return!0;var ya=Number(Et||0);return(Z.duration||[]).some(Ct=>Ct==="0-10"?ya>0&&ya<=10:Ct==="10-20"?ya>=10&&ya<=20:Ct==="20-30"?ya>=20&&ya<=30:Ct==="30-45"?ya>=30&&ya<=45:Ct==="45+"?ya>=45:!0)};var he=j.filter(Et=>{if(Z.category&&Et.category!==Z.category)return!1;if(Z.type==="SAVED"){if(!er.has(Et.id))return!1}else if(Z.type&&Et.type!==Z.type)return!1;if(Z.premiumOnly&&!Et.premium)return!1;if((Z.goal||[]).length){var ya=new Set((Et.goal||[]).map(String));if(!(Z.goal||[]).some(Ct=>ya.has(Ct)))return!1}if((Z.difficulty||[]).length&&!Z.difficulty.includes(String(Et.difficulty||"").toUpperCase()))return!1;if((Z.equipment||[]).length){var ya=new Set((Et.equipment||[]).map(String));if(!(Z.equipment||[]).some(Ct=>ya.has(Ct)))return!1}if((Z.tags||[]).length){var ya=new Set((Et.tags||[]).map(String));if(!(Z.tags||[]).some(Ct=>ya.has(Ct)))return!1}return!(!T(Et.duration||0)||k&&![Et.title,Et.desc,...Et.tags||[],...Et.goal||[],...Et.equipment||[]].join(" ").toLowerCase().includes(k))});var oe=String(Z.sort||"RECOMMENDED").toUpperCase(),ke=(Et,ya)=>String(Et.title).localeCompare(String(ya.title)),Re=(Et,ya)=>Number(Et.duration||0)-Number(ya.duration||0),Me=(Et,ya)=>{var Ct={BEGINNER:1,INTERMEDIATE:2,ADVANCED:3,ALL:0};return(Ct[String(Et.difficulty||"ALL").toUpperCase()]||0)-(Ct[String(ya.difficulty||"ALL").toUpperCase()]||0)};return oe==="NEW"?he=he.slice().reverse():oe==="POPULAR"?he=he.slice().sort((Et,ya)=>(ya.premium?1:0)-(Et.premium?1:0)||ke(Et,ya)):oe==="DURATION_ASC"?he=he.slice().sort(Re):oe==="DIFFICULTY_ASC"?he=he.slice().sort(Me):he=he.slice().sort((Et,ya)=>(Et.premium===ya.premium?0:Et.premium?1:-1)||ke(Et,ya)),he},[j,Z]),ys=React.useMemo(()=>!((Z.goal||[]).length||(Z.duration||[]).length||(Z.difficulty||[]).length||(Z.equipment||[]).length||(Z.tags||[]).length||Z.premiumOnly||(Z.search||"").trim()),[Z]),Ps=React.useMemo(()=>Ni.slice(0,6),[Ni]),Ms=React.useMemo(()=>{var k=T=>{var he=T.premium?3:0,oe=Math.min(Number(T.duration||0)/10,4),ke=new Set((T.tags||[]).map(String)),Re=ke.has("POWER")||ke.has("COMPOUND")||ke.has("FULL BODY")||ke.has("CORE")?2:0;return he+oe+Re};return Ni.slice().sort((T,he)=>k(he)-k(T)||String(T.title).localeCompare(String(he.title))).slice(0,6)},[Ni]),o=React.useMemo(()=>Ni.filter(k=>k&&k.premium).filter(k=>k.type==="PROGRAMS"||k.type==="COLLECTIONS").slice(0,6),[Ni]),d=React.useMemo(()=>{try{var k=localStorage.getItem("fof_library_recent_v1"),T=k?JSON.parse(k):[],he=new Map(j.map(oe=>[oe.id,oe]));return(T||[]).map(oe=>he.get(oe)).filter(Boolean).slice(0,6)}catch(k){return[]}},[j,Y]),m=({title:k,k:T,options:he})=>{var oe=Z[T]||[],ke=Re=>{Qe(Me=>{var Et=Me[T]||[],Ct=Et.includes(Re)?Et.filter(Jt=>Jt!==Re):[...Et,Re];return{...Me,[T]:Ct}})};return React.createElement("div",{className:"mb-4"},React.createElement("div",{className:"text-xs uppercase tracking-wider text-white/60 mb-2"},k),React.createElement("div",{className:"flex flex-wrap gap-2"},he.map(Re=>{var Me=oe.includes(Re);return React.createElement("button",{key:Re,onClick:()=>ke(Re),className:["px-3 py-1.5 rounded-full text-xs border transition",Me?"bg-white/15 border-white/20 text-white":"bg-black/20 border-white/10 text-white/80 hover:bg-white/10"].join(" ")},Re)})))},E=()=>Wt?React.createElement("div",{className:"hidden md:block md:w-72 md:shrink-0"},React.createElement("div",{className:"sticky top-20 rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",{className:"text-sm font-extrabold text-white"},"Filters"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-[10px] font-extrabold tracking-wider text-white/70"},"BETA"),React.createElement("button",{onClick:()=>Ha(!1),className:"text-xs text-white/60 hover:text-white"},"Hide")),React.createElement("button",{onClick:se,className:"text-xs text-white/70 hover:text-white"},"Reset")),React.createElement(m,{title:"Content Type",k:"type",options:Fa.type}),React.createElement(m,{title:"Goal",k:"goal",options:Fa.goal}),React.createElement(m,{title:"Duration",k:"duration",options:Fa.duration}),React.createElement(m,{title:"Difficulty",k:"difficulty",options:Fa.difficulty}),React.createElement(m,{title:"Equipment",k:"equipment",options:Fa.equipment}),React.createElement(m,{title:"Tags",k:"tags",options:Fa.tags}),React.createElement("div",{className:"mt-2 flex items-center justify-between gap-2"},React.createElement("label",{className:"flex items-center gap-2 text-xs text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Z.premiumOnly,onChange:k=>Qe(T=>({...T,premiumOnly:!!k.target.checked}))}),"Premium only")))):null,g=({it:k})=>{var T=Vs(k),he=Me=>React.createElement("span",{className:"px-2 py-0.5 rounded-full bg-white/10 text-[10px] text-white/80"},Me),oe=k.duration?`${k.duration}m`:null,ke=k.difficulty&&k.difficulty!=="ALL"?k.difficulty:null,Re=(k.equipment||[]).slice(0,1)[0];return React.createElement("button",{onClick:()=>Ke(k),className:"group text-left rounded-2xl transition overflow-hidden lib-card"},React.createElement("div",{className:"h-20 relative lib-card__media"},T&&React.createElement("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full bg-black/55 border border-white/10 text-[10px] text-white/90"},"Locked")),React.createElement("div",{className:"p-3"},React.createElement("div",{className:"text-sm font-extrabold text-white leading-snug line-clamp-2"},k.title),React.createElement("div",{className:"text-xs text-white/60 mt-1 line-clamp-2"},k.desc),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},oe?he(oe):null,ke?he(ke):null,Re?he(Re):null)))},f=({items:k})=>React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 lib-grid-tight"},k.map(T=>React.createElement(g,{key:T.id,it:T}))),F=()=>{if(!qa)return null;var k=Z.category||"WORKOUT",he=(ke=>ke==="WORKOUT"?[{key:"PROGRAMS",label:"Programs",type:"PROGRAMS"},{key:"WORKOUTS",label:"Workouts",type:"SESSIONS"},{key:"EXERCISES",label:"Exercises",type:"EXERCISES"},{key:"SAVED",label:"Saved",type:"SAVED"}]:ke==="YOGA"?[{key:"SESSIONS",label:"Sessions",type:"SESSIONS"},{key:"PROGRAMS",label:"Programs",type:"PROGRAMS"},{key:"STYLES",label:"Styles",type:"COLLECTIONS"},{key:"SAVED",label:"Saved",type:"SAVED"}]:[{key:"RECIPES",label:"Recipes",type:"SESSIONS"},{key:"TEMPLATES",label:"Meal Templates",type:"PROGRAMS"},{key:"COLLECTIONS",label:"Collections",type:"COLLECTIONS"},{key:"SAVED",label:"Saved",type:"SAVED"}])(k),oe=Z.type||"SESSIONS";return React.createElement("div",{className:"mt-3 w-full max-w-full overflow-x-hidden flex items-center justify-between gap-3"},React.createElement("div",{className:"flex-1 max-w-full flex items-center gap-2 overflow-x-auto no-scrollbar"},he.map(ke=>{var Re=oe===ke.type;return React.createElement("button",{key:ke.key,onClick:()=>Qe(Me=>({...Me,type:ke.type})),className:"shrink-0 rounded-2xl border px-3 py-2 text-xs font-extrabold transition "+(Re?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/20 text-white/65 hover:text-white hover:bg-white/10"),title:ke.label},ke.label)})),React.createElement("button",{onClick:()=>oa(!1),className:"hidden md:inline-flex shrink-0 items-center gap-2 rounded-2xl border border-white/10 bg-black/20 hover:bg-white/10 px-3 py-2 text-xs font-extrabold text-white/70 hover:text-white",title:"Hide Mini-Hub tabs (Beta)"},React.createElement("span",{className:"text-[10px] tracking-wider"},"BETA"),"Hide"))};return React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"lib-controls-surface"},React.createElement("div",{className:"sticky top-0 z-30 bg-black/70 backdrop-blur-xl border-b border-white/10"},React.createElement("div",{className:"px-4 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("button",{onClick:a,className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"Back"),React.createElement("div",{className:"text-base font-extrabold text-white"},"Library"),React.createElement("button",{onClick:()=>Va(!0),className:"rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-3 py-2 text-sm text-white font-extrabold"},"AI \u2728")))),React.createElement("div",{className:"px-4 pt-4 pb-4"},React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-lg font-extrabold text-white leading-tight"},"Find your next session"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Search, filter, preview, then add to plan.")),React.createElement("div",{className:"mt-3"},React.createElement("input",{value:Z.search,onChange:k=>Qe(T=>({...T,search:k.target.value})),placeholder:"Search workouts, yoga, nutrition\u2026",className:"w-full rounded-3xl border border-white/10 bg-black/25 px-4 py-3 text-base text-white placeholder:text-white/40 outline-none focus:border-white/20"})),React.createElement("div",{className:"mt-3 flex flex-col gap-3 w-full md:flex-row md:items-center md:gap-2"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"inline-flex w-full rounded-3xl border border-white/10 bg-black/25 p-1"},["WORKOUT","YOGA","NUTRITION"].map(k=>{var T=Z.category===k,he=k==="YOGA"&&!me.yogaAllowed;return React.createElement("button",{key:k,onClick:()=>{if(he){ki({reason:"YOGA_PREMIUM",item:{category:"YOGA"}}),qs(!0);return}Qe(oe=>({...oe,category:k}))},className:["flex-1 px-3 py-2 rounded-2xl text-xs font-extrabold transition",T?"bg-white/15 text-white":"text-white/75 hover:text-white hover:bg-white/10"].join(" ")},k==="YOGA"?React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",null,"YOGA"),React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full border "+(ve==="FULL"?"border-emerald-400/25 bg-emerald-400/10 text-emerald-100":ve==="LIMITED"?"border-neon-violet/25 bg-neon-violet/10 text-neon-violet":"border-amber-400/25 bg-amber-400/10 text-amber-200")},ve==="NONE"?"ADD":ve)):k)}))),React.createElement(F,null),React.createElement("button",{onClick:()=>Pe(!0),className:"rounded-3xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"Filters"),React.createElement("button",{onClick:()=>Ha(k=>!k),className:"hidden md:inline-flex items-center gap-2 rounded-3xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm "+(Wt?"text-white":"text-white/60"),title:"Facets Beta (desktop filter column)"},React.createElement("span",{className:"text-[10px] font-extrabold tracking-wider"},"BETA"),React.createElement("span",null,"Facets"),React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full "+(Wt?"bg-white/10 text-white":"bg-white/5 text-white/60")},Wt?"ON":"OFF")),React.createElement("select",{value:Z.sort,onChange:k=>Qe(T=>({...T,sort:k.target.value})),className:"hidden sm:block rounded-3xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/90 outline-none hover:bg-white/10"},React.createElement("option",{value:"RECOMMENDED"},"Recommended"),React.createElement("option",{value:"POPULAR"},"Popular"),React.createElement("option",{value:"NEW"},"New"),React.createElement("option",{value:"DURATION_ASC"},"Duration"),React.createElement("option",{value:"DIFFICULTY_ASC"},"Difficulty"))),Le?React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},Lt.slice(0,24).map((k,T)=>React.createElement("button",{key:k.k+":"+k.label+":"+T,onClick:()=>ze(k),className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] text-white/80"},k.label," ",React.createElement("span",{className:"text-white/50"},"\xD7"))),React.createElement("button",{onClick:se,className:"px-3 py-1.5 rounded-full border border-white/10 bg-black/25 hover:bg-white/10 text-[11px] text-white/70"},"Reset all")):null)),React.createElement("div",{className:"flex-1 w-full overflow-y-auto lib-content-surface"},React.createElement("div",{className:"px-4 py-4"},React.createElement("div",{className:"md:flex md:gap-4"},Wt?React.createElement(E,null):null,React.createElement("div",{className:"flex-1 min-w-0"},ys?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"lib-section p-4"},React.createElement("div",{className:"lib-section__head"},React.createElement("div",null,React.createElement("div",{className:"lib-h-hero"},"Recommended"),React.createElement("div",{className:"lib-sub"},"Start here \u2014 best match for your focus.")),React.createElement("button",{onClick:()=>Qe(k=>({...k,sort:"RECOMMENDED"})),className:"text-xs text-white/65 hover:text-white"},"View all")),React.createElement(f,{items:Ps})),d.length?React.createElement("div",{className:"lib-section p-4"},React.createElement("div",{className:"lib-section__head"},React.createElement("div",null,React.createElement("div",{className:"lib-h"},"Continue"),React.createElement("div",{className:"lib-sub"},"Recently viewed \u2014 pick up where you left off.")),React.createElement("button",{onClick:()=>{try{localStorage.removeItem("fof_library_recent_v1")}catch(k){}},className:"text-xs text-white/65 hover:text-white"},"Clear")),React.createElement(f,{items:d})):null,React.createElement("div",{className:"lib-section p-4"},React.createElement("div",{className:"lib-section__head"},React.createElement("div",null,React.createElement("div",{className:"lib-h"},"Popular"),React.createElement("div",{className:"lib-sub"},"What athletes are running this week.")),React.createElement("button",{onClick:()=>Qe(k=>({...k,sort:"POPULAR"})),className:"text-xs text-white/65 hover:text-white"},"View all")),React.createElement(f,{items:Ms})),React.createElement("div",{className:"lib-section p-4"},React.createElement("div",{className:"lib-section__head"},React.createElement("div",null,React.createElement("div",{className:"lib-h"},"Premium Packs"),React.createElement("div",{className:"lib-sub"},"Programs + collections designed for progression.")),React.createElement("button",{onClick:()=>Qe(k=>({...k,premiumOnly:!0})),className:"text-xs text-white/65 hover:text-white"},"Show premium")),React.createElement(f,{items:o})),React.createElement("div",{className:"lib-section p-4"},React.createElement("div",{className:"lib-section__head"},React.createElement("div",null,React.createElement("div",{className:"lib-h"},"Browse All"),React.createElement("div",{className:"lib-sub"},"All items in this category.")),React.createElement("div",{className:"lib-kpi"},Ni.length," items")),Ni.length?React.createElement(f,{items:Ni}):React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 text-center"},React.createElement("div",{className:"text-sm font-extrabold text-white"},"No matches"),React.createElement("div",{className:"mt-1 text-xs text-white/60"},"Try removing filters or switching tabs."),React.createElement("button",{onClick:()=>Qe(k=>({...k,goal:[],duration:[],difficulty:[],equipment:[],tags:[],premiumOnly:!1,search:""})),className:"mt-4 inline-flex rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-4 py-2 text-xs font-extrabold text-white"},"Reset filters")))):React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm text-white/80"},Ni.length," results"),React.createElement("div",{className:"md:hidden flex items-center gap-2"},React.createElement("select",{value:Z.sort,onChange:k=>Qe(T=>({...T,sort:k.target.value})),className:"rounded-2xl border border-white/10 bg-black/30 px-3 py-2 text-xs text-white/80"},React.createElement("option",{value:"RECOMMENDED"},"Recommended"),React.createElement("option",{value:"POPULAR"},"Popular"),React.createElement("option",{value:"NEW"},"New"),React.createElement("option",{value:"DURATION_ASC"},"Duration"),React.createElement("option",{value:"DIFFICULTY_ASC"},"Difficulty")),React.createElement("button",{onClick:()=>Pe(!0),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-3 py-2 text-xs text-white/90"},"Filters"))),Ni.length?React.createElement(f,{items:Ni}):React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 text-sm text-white/60"},"No results. Try removing a filter.")))))),React.createElement(wd,{open:at,onClose:()=>Pe(!1),title:"Filters",context:"LIBRARY"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"mb-3 flex items-center justify-between rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-extrabold text-white"},"Facets Beta"),React.createElement("div",{className:"text-xs text-white/60"},"Enables desktop facet column (reversible).")),React.createElement("button",{onClick:()=>Ha(k=>!k),className:"rounded-2xl border border-white/10 px-3 py-2 text-xs font-extrabold "+(Wt?"bg-white/10 text-white":"bg-black/30 text-white/70")},Wt?"ON":"OFF")),React.createElement("div",{className:"text-xs text-white/60"},"Applied: ",Lt.length),React.createElement("button",{onClick:se,className:"text-xs text-white/70 hover:text-white"},"Reset all")),React.createElement(m,{title:"Goal",k:"goal",options:Fa.goal}),React.createElement(m,{title:"Duration",k:"duration",options:Fa.duration}),React.createElement(m,{title:"Difficulty",k:"difficulty",options:Fa.difficulty}),React.createElement(m,{title:"Equipment",k:"equipment",options:Fa.equipment}),React.createElement(m,{title:"Tags",k:"tags",options:Fa.tags}),React.createElement("label",{className:"flex items-center gap-2 text-sm text-white/80"},React.createElement("input",{type:"checkbox",checked:!!Z.premiumOnly,onChange:k=>Qe(T=>({...T,premiumOnly:!!k.target.checked}))}),"Premium only"),React.createElement("div",{className:"pt-2 flex items-center justify-end gap-2"},React.createElement("button",{onClick:()=>Pe(!1),className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-4 py-2 text-sm text-white/80"},"Done")))),React.createElement(qo,{open:Da,onClose:()=>Va(!1),title:"AI Picks",kicker:"Library"},React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"text-sm font-extrabold text-white"},"Personalized picks (v1)"),React.createElement("div",{className:"text-xs text-white/60"},"This is a safe placeholder for the premium AI discovery experience. It will later show picks based on Capacity Score, goals, and history."),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{onClick:()=>{Qe(k=>({...k,sort:"RECOMMENDED"})),Va(!1)},className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"Best for you"),React.createElement("button",{onClick:()=>{Qe(k=>({...k,sort:"POPULAR"})),Va(!1)},className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"Popular now"),React.createElement("button",{onClick:()=>{Qe(k=>({...k,duration:["20-30"]})),Va(!1)},className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"20\u201330 min"),React.createElement("button",{onClick:()=>{Qe(k=>({...k,difficulty:["BEGINNER"]})),Va(!1)},className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-3 py-2 text-sm text-white/90"},"Beginner")),React.createElement("button",{onClick:()=>Va(!1),className:"w-full rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-4 py-2 text-sm font-extrabold text-white"},"Close"))),React.createElement(qo,{open:!!Y,onClose:()=>ft(null),title:Y?Y.title:""},Y?Ra?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-xs font-extrabold tracking-wider text-white/70"},"OVERVIEW"),React.createElement("div",{className:"mt-2 text-sm text-white/80"},Y.desc),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2 text-xs"},(Y.duration?[String(Y.duration)]:[]).map(k=>React.createElement("span",{key:"d"+k,className:"px-2 py-1 rounded-full bg-white/10 text-white/85"},k," min")),(Y.difficulty?[String(Y.difficulty)]:[]).map(k=>React.createElement("span",{key:"df"+k,className:"px-2 py-1 rounded-full bg-white/10 text-white/85"},k)),(Y.goal||[]).slice(0,3).map(k=>React.createElement("span",{key:k,className:"px-2 py-1 rounded-full bg-white/10 text-white/85"},k)))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-xs font-extrabold tracking-wider text-white/70"},"WHAT YOU GET"),React.createElement("ul",{className:"mt-2 space-y-2 text-sm text-white/80"},Ya(Y).map((k,T)=>React.createElement("li",{key:T,className:"flex gap-2"},React.createElement("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/40"}),React.createElement("span",null,k))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-xs font-extrabold tracking-wider text-white/70"},"EQUIPMENT"),React.createElement("div",{className:"mt-2 text-sm text-white/80"},Ki(Y)),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2 text-xs"},(Y.equipment||[]).slice(0,6).map(k=>React.createElement("span",{key:k,className:"px-2 py-1 rounded-full bg-white/5 text-white/70"},k)))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-xs font-extrabold tracking-wider text-white/70"},"SUGGESTED SCHEDULE"),React.createElement("div",{className:"mt-2 text-sm text-white/80"},Zt(Y))),React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Vi(Y),onTouchEnd:k=>{try{k.preventDefault(),k.stopPropagation()}catch(T){}Vi(Y)},className:"flex-1 rounded-2xl bg-white text-black font-extrabold px-4 py-3"},"Add to Plan"),React.createElement("button",{type:"button",onClick:()=>$i(Y),onTouchEnd:k=>{try{k.preventDefault(),k.stopPropagation()}catch(T){}$i(Y)},className:"flex-1 rounded-2xl bg-white/10 text-white font-extrabold px-4 py-3"},"Choose day")),React.createElement("button",{onClick:()=>ft(null),className:"w-full rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-4 py-3 text-white/80"},"Close")),React.createElement("div",{className:"mt-2 text-[11px] text-white/60 font-semibold"},"Adds to: ",React.createElement("span",{className:"text-white/80"},ua(ga()||Gs(new Date)))),React.createElement("div",{className:"pt-1 text-[11px] text-white/50"},"Tip: Add to Plan to schedule it on a specific day. You can edit later.")):React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm text-white/70"},Y.desc),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2 text-xs"},(Y.goal||[]).slice(0,4).map(k=>React.createElement("span",{key:k,className:"px-2 py-1 rounded-full bg-white/10 text-white/80"},k)),(Y.tags||[]).slice(0,4).map(k=>React.createElement("span",{key:k,className:"px-2 py-1 rounded-full bg-white/5 text-white/60"},k)))),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>$i(Y),onTouchEnd:k=>{try{k.preventDefault(),k.stopPropagation()}catch(T){}$i(Y)},className:"flex-1 rounded-2xl bg-white text-black font-extrabold px-4 py-3"},"Add to Plan"),React.createElement("button",{onClick:()=>ft(null),className:"rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-4 py-3 text-white/80"},"Close"))):null),React.createElement(qo,{open:c,onClose:()=>{h(!1),de(null)},title:"Choose day",kicker:"Add to Plan",footer:React.createElement("div",{className:"w-full"},React.createElement("button",{onClick:()=>$t(Ae),disabled:!V,className:"w-full rounded-2xl px-4 py-3 font-extrabold "+(V?"bg-white text-black":"bg-white/20 text-white/60")},"Add to Plan"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/70"},"Pick a day for this item. You can browse freely and decide later."),React.createElement("div",{className:"grid grid-cols-2 gap-2"},G.map(k=>React.createElement("button",{key:k.key,onClick:()=>{Oe(k.key),Ne(k.key)},className:"rounded-2xl border px-3 py-3 text-left "+(Ae===k.key?"border-white/30 bg-white/15":"border-white/10 bg-black/20 hover:bg-white/10")},React.createElement("div",{className:"text-xs text-white/60"},k.key),React.createElement("div",{className:"text-sm font-bold text-white"},k.label)))),React.createElement("div",{className:"pt-2"},React.createElement("div",{className:"text-xs text-white/60"},"Or choose a date"),React.createElement("input",{type:"date",value:N,onChange:k=>{var T=String(k.target.value||"");Ne(T),T&&Oe(T)},className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/25 px-3 py-2 text-white outline-none"})))),React.createElement(qo,{open:!!(M!=null&&M.open),onClose:()=>{try{De({open:!1,dateKey:null})}catch(k){}},title:"Added to Plan",kicker:M!=null&&M.dateKey?"Planned for "+M.dateKey:"Plan",footer:React.createElement("div",{className:"w-full space-y-2"},React.createElement("button",{onClick:()=>{var k=M==null?void 0:M.dateKey;try{De({open:!1,dateKey:null})}catch(T){}if(k){try{localStorage.setItem("fof_selected_day_v1",k)}catch(T){}try{typeof window.__fof_setSelectedDayKey=="function"&&window.__fof_setSelectedDayKey(k)}catch(T){}try{window.dispatchEvent(new CustomEvent("flowofit:selectedDayChanged",{detail:{dateKey:k}}))}catch(T){}}try{typeof window.__fof_navigateTab=="function"?window.__fof_navigateTab("PLAN"):typeof window.__fof_setActiveTab=="function"&&window.__fof_setActiveTab("PLAN")}catch(T){}},className:"w-full rounded-2xl bg-white text-black font-extrabold px-4 py-3"},"View in Plan"),React.createElement("button",{onClick:()=>{try{De({open:!1,dateKey:null})}catch(k){}},className:"w-full rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 px-4 py-3 text-white/80"},"Done"))},React.createElement("div",{className:"text-sm text-white/70"},"Your item is scheduled",M!=null&&M.dateKey?" for "+M.dateKey:"",".")),Ui?React.createElement(td,{open:Ui,onClose:()=>qs(!1),reason:_o.reason,relationship:_e,item:_o.item}):null)},jn=({open:e,onClose:a,onSave:r})=>{var[c,h]=React.useState("OK"),[V,de]=React.useState("NONE"),[M,De]=React.useState("OK"),[Ae,Oe]=React.useState(""),N=()=>{try{r&&r({energy:c,pain:V,sleep:M,note:String(Ae||"").slice(0,280)})}catch(G){}try{a&&a()}catch(G){}},Ne=({v:G,active:we,onClick:$t,label:gt})=>React.createElement("button",{type:"button",onClick:$t,className:"px-3 py-2 rounded-xl border text-[12px] font-extrabold "+(we?"border-white/20 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},gt||G);return React.createElement(qo,{open:!!e,title:"Daily check-in",kicker:"Coach-led",onClose:a,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:a,className:"flex-1 rounded-xl bg-white/5 px-3 py-3 text-[13px] font-extrabold text-white/80 hover:bg-white/10"},"Cancel"),React.createElement("button",{onClick:N,className:"flex-1 rounded-xl bg-white/12 px-3 py-3 text-[13px] font-extrabold text-white hover:bg-white/18"},"Save check-in"))},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Energy"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["LOW","OK","HIGH"].map(G=>React.createElement(Ne,{key:G,v:G,active:c===G,onClick:()=>h(G),label:G})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Pain / soreness"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["NONE","MILD","MOD","HIGH"].map(G=>React.createElement(Ne,{key:G,v:G,active:V===G,onClick:()=>de(G),label:G==="MOD"?"MODERATE":G})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Sleep quality"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["POOR","OK","GREAT"].map(G=>React.createElement(Ne,{key:G,v:G,active:M===G,onClick:()=>De(G),label:G})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Note (optional)"),React.createElement("textarea",{value:Ae,onChange:G=>Oe(G.target.value),rows:3,className:"mt-2 w-full rounded-xl border border-white/10 bg-black/35 p-3 text-[13px] text-white/90 outline-none focus:border-white/20",placeholder:"Anything your coach should know?"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"Saved check-ins appear in your coach thread.")))},In=({open:e,onClose:a,onMessageCoach:r})=>React.createElement(qo,{open:!!e,title:"Ask AI Coach",kicker:"Coach-aware",onClose:a,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:a,className:"flex-1 rounded-xl bg-white/5 px-3 py-3 text-[13px] font-extrabold text-white/80 hover:bg-white/10"},"Close"),React.createElement("button",{onClick:()=>{try{r&&r()}catch(c){}},className:"flex-1 rounded-xl bg-brand/20 border border-brand/35 px-3 py-3 text-[13px] font-extrabold text-white hover:bg-brand/25"},"Message coach"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[13px] text-white/80"},"Use AI to explain today\u2019s plan, suggest safe swaps, or draft a message to your coach with context."),React.createElement("div",{className:"grid grid-cols-1 gap-2"},[{t:"Explain today\u2019s plan",s:"Goal + effort targets"},{t:"Swap an exercise",s:"Joint-friendly alternatives"},{t:"Adjust volume",s:"Based on capacity + soreness"},{t:"Nutrition suggestion",s:"Simple meals around training"}].map((c,h)=>React.createElement("button",{key:h,onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Demo",message:"Full AI chat will be wired in later stages."}}))}catch(V){}},className:"text-left rounded-2xl border border-white/10 bg-white/5 p-3 hover:bg-white/8 transition"},React.createElement("div",{className:"font-extrabold text-white"},c.t),React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},c.s)))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"This is the Stage 5.3 UI surface. AI context wiring comes later."))),Jn=e=>{try{var a=Number(e||0);return Number.isFinite(a)?a%1===0?"$"+a.toFixed(0):"$"+a.toFixed(2):"$0"}catch(a){return"$0"}},wn=({open:e,onClose:a,ent:r,onResolved:c})=>{var h=String(r&&r.subscriptionStatus?r.subscriptionStatus:"ACTIVE").toUpperCase(),V=h==="DUNNING_LOCKED"||h==="EXPIRED"?"rose":"amber",de=h==="DUNNING_LOCKED"||h==="EXPIRED"?"Fix payment to restore access":"Update payment method",M=h==="DUNNING_LOCKED"||h==="EXPIRED"?"Your membership is temporarily limited. Update your payment method to unlock premium features.":"We detected a billing issue. Update payment to avoid interruption.",[De,Ae]=React.useState("CARD"),[Oe,N]=React.useState(""),[Ne,G]=React.useState(""),[we,$t]=React.useState(!1);return React.createElement(qo,{open:!!e,title:de,kicker:"Billing",onClose:a,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:a,className:"flex-1 rounded-xl bg-white/5 px-3 py-3 text-[13px] font-extrabold text-white/80 hover:bg-white/10"},"Not now"),React.createElement("button",{onClick:()=>{if(!we){$t(!0);try{var _e={...r||{},subscriptionStatus:"ACTIVE",billingLast4:String(Oe||"").replace(/\D/g,"").slice(-4)||"4242",billingZip:String(Ne||"").slice(0,10),billingUpdatedAt:Date.now()};try{window.__fof_entitlements=_e}catch(ve){}try{var ve=window.__FOF_CLIENT_CONTEXT||{},me={...ve||{},entitlements:{...ve&&ve.entitlements||{},..._e}};window.__FOF_CLIENT_CONTEXT=me}catch(ve){}try{window.dispatchEvent(new CustomEvent("flowofit:entitlementsUpdated",{detail:{entitlements:_e}}))}catch(ve){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Payment updated (demo). Access restored."}}))}catch(ve){}try{c&&c(_e)}catch(ve){}try{a&&a()}catch(ve){}}finally{try{$t(!1)}catch(_e){}}}},className:"flex-1 rounded-xl px-3 py-3 text-[13px] font-extrabold text-white "+(V==="rose"?"bg-rose-400/20 border border-rose-300/30 hover:bg-rose-400/25":"bg-amber-400/20 border border-amber-300/30 hover:bg-amber-400/25")},we?"Saving\u2026":"Update payment"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border p-3 "+(V==="rose"?"border-rose-300/20 bg-rose-400/10":"border-amber-300/20 bg-amber-400/10")},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},M),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"This is a safe demo flow for Stage 9.3: it restores ",React.createElement("span",{className:"font-extrabold text-white/85"},"subscriptionStatus = ACTIVE"),".")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Payment method"),React.createElement("div",{className:"mt-2 flex gap-2"},["CARD","APPLE_PAY"].map(_e=>React.createElement("button",{key:_e,type:"button",onClick:()=>Ae(_e),className:"px-3 py-2 rounded-xl border text-[12px] font-extrabold "+(De===_e?"border-white/20 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},_e==="APPLE_PAY"?"Apple Pay":"Card"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-2"},React.createElement("div",{className:"text-[11px] text-white/60 font-extrabold"},"Last 4 digits"),React.createElement("input",{value:Oe,onChange:_e=>N(_e.target.value),inputMode:"numeric",className:"mt-1 w-full rounded-lg border border-white/10 bg-black/35 px-3 py-2 text-[13px] text-white/90 outline-none focus:border-white/20",placeholder:"4242"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-2"},React.createElement("div",{className:"text-[11px] text-white/60 font-extrabold"},"Billing ZIP (optional)"),React.createElement("input",{value:Ne,onChange:_e=>G(_e.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/35 px-3 py-2 text-[13px] text-white/90 outline-none focus:border-white/20",placeholder:"00000"})))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"Next: in later stages, this will connect to real Payments / Checkout. For now, it guarantees the flowchart branch is executable.")))},fr=({open:e,onClose:a,onUpgrade:r,onContinueFree:c,ent:h})=>{var[V,de]=React.useState("UPGRADE"),M=(()=>{try{return h&&h.trialEndAt?new Date(h.trialEndAt).toLocaleDateString():null}catch(De){return null}})();return React.createElement(qo,{open:!!e,title:"Trial ended",kicker:"Access",onClose:a,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:a,className:"flex-1 rounded-xl bg-white/5 px-3 py-3 text-[13px] font-extrabold text-white/80 hover:bg-white/10"},"Later"),React.createElement("button",{onClick:()=>{try{V==="UPGRADE"?r&&r():c&&c()}catch(De){}},className:"flex-1 rounded-xl bg-brand/20 border border-brand/35 px-3 py-3 text-[13px] font-extrabold text-white hover:bg-brand/25"},V==="UPGRADE"?"Upgrade":"Continue free"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Your premium trial has ended",M?" ("+M+")":"","."),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"Choose what to do next. This sheet is Stage 9.3\u2019s \u201Ctrial ladder\u201D contract.")),React.createElement("div",{className:"grid grid-cols-1 gap-2"},React.createElement("button",{type:"button",onClick:()=>de("UPGRADE"),className:"text-left rounded-2xl border p-3 "+(V==="UPGRADE"?"border-brand/40 bg-brand/12":"border-white/10 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"font-extrabold text-white"},"Upgrade to Premium"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},"Keep AI planning, full history, and premium library access.")),React.createElement("button",{type:"button",onClick:()=>de("FREE"),className:"text-left rounded-2xl border p-3 "+(V==="FREE"?"border-white/16 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"font-extrabold text-white"},"Continue on Free"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},"Basic logging + free content only (no AI tier).")))))},Vl=({open:e,onClose:a,from:r})=>React.createElement(qo,{open:!!e,title:"Discovery",kicker:"Hub",onClose:a,footer:React.createElement("button",{onClick:a,className:"w-full rounded-xl bg-white/8 border border-white/12 px-3 py-3 text-[13px] font-extrabold text-white hover:bg-white/10"},"Close")},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/70"},"Entry hub for discovery content. (Stage 9.3: real, non-dead flow node) ",r?React.createElement("span",{className:"text-white/50"},"\u2022 from ",r):null),React.createElement("div",{className:"grid grid-cols-2 gap-2"},[{k:"PROGRAMS",t:"Programs",s:"Goal-based plans & series",icon:"\u{1F4DA}"},{k:"CHALLENGES",t:"Challenges",s:"Streaks + accountability",icon:"\u{1F3C1}"},{k:"EDU",t:"Education",s:"Technique + recovery guides",icon:"\u{1F393}"},{k:"LIVE",t:"Live",s:"Public sessions (later)",icon:"\u{1F534}"}].map(h=>React.createElement("button",{key:h.k,type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:h.t+" will be wired in later stages."}}))}catch(V){}},className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-3 text-left"},React.createElement("div",{className:"text-xl"},h.icon),React.createElement("div",{className:"mt-2 font-extrabold text-white"},h.t),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},h.s)))))),sd=({open:e,onClose:a,onSendToCoach:r})=>{var[c,h]=React.useState("KNEE"),[V,de]=React.useState(3),[M,De]=React.useState("");return React.createElement(qo,{open:!!e,title:"Rehab & PROMs",kicker:"Coach-led",onClose:a,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:a,className:"flex-1 rounded-xl bg-white/5 px-3 py-3 text-[13px] font-extrabold text-white/80 hover:bg-white/10"},"Cancel"),React.createElement("button",{onClick:()=>{try{var N={id:xi(),ts:Date.now(),area:c,score:Number(V)||0,note:String(M||"").slice(0,280)},Ne="__fof_rehab_proms_v1";var G=[];try{G=JSON.parse(localStorage.getItem(Ne)||"[]")}catch(we){G=[]}Array.isArray(G)||(G=[]),G.unshift(N),localStorage.setItem(Ne,JSON.stringify(G.slice(0,200)));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Saved rehab check (demo)."}}))}catch(we){}try{r&&r(N)}catch(we){}try{a&&a()}catch(we){}}catch(N){try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Could not save."}}))}catch(Ne){}}},className:"flex-1 rounded-xl bg-white/12 px-3 py-3 text-[13px] font-extrabold text-white hover:bg-white/18"},"Save"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/70"},"Quick rehab / PROMs capture. Stage 9.3 MVP hub so the flowchart node is executable."),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Pain area"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["NECK","SHOULDER","BACK","HIP","KNEE","ANKLE","WRIST","OTHER"].map(N=>React.createElement("button",{key:N,type:"button",onClick:()=>h(N),className:"px-3 py-2 rounded-xl border text-[12px] font-extrabold "+(c===N?"border-white/20 bg-white/12 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},N)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Pain score (0\u201310)"),React.createElement("input",{type:"range",min:"0",max:"10",value:V,onChange:N=>de(N.target.value),className:"mt-2 w-full"}),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 font-extrabold"},V,"/10")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Notes"),React.createElement("textarea",{value:M,onChange:N=>De(N.target.value),rows:3,className:"mt-2 w-full rounded-xl border border-white/10 bg-black/35 p-3 text-[13px] text-white/90 outline-none focus:border-white/20",placeholder:"What changed since yesterday?"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"Saved locally to ",React.createElement("span",{className:"font-mono text-white/60"},"__fof_rehab_proms_v1"),". Later stages will sync to coach.")))},yr=({open:e,onClose:a,tier:r,onGoLibrary:c,onGoCoach:h,onGoInsights:V,onOpenPaywall:de})=>{var M=String(r||"FREE").toUpperCase();return React.createElement(qo,{open:!!e,title:"More",kicker:"Modules",onClose:a},React.createElement("div",{className:"space-y-2"},React.createElement("button",{onClick:()=>{try{c&&c()}catch(Ae){}try{a&&a()}catch(Ae){}},className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 p-3 hover:bg-white/8 transition"},React.createElement("div",{className:"font-extrabold text-white"},"Library"),React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},"Programs \u2022 exercises \u2022 collections")),React.createElement("button",{onClick:()=>{try{h&&h()}catch(Ae){}try{a&&a()}catch(Ae){}},className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 p-3 hover:bg-white/8 transition"},React.createElement("div",{className:"font-extrabold text-white"},"Coach"),React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},"Inbox \u2022 check-ins \u2022 notes")),React.createElement("button",{onClick:()=>{try{V&&V()}catch(Ae){}try{a&&a()}catch(Ae){}},className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 p-3 hover:bg-white/8 transition"},React.createElement("div",{className:"font-extrabold text-white"},"Insights"),React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},"Trends \u2022 recap")),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},"AI Search"),React.createElement("div",{className:"text-[12px] text-white/60 mt-0.5"},"Programs \u2022 swaps \u2022 guidance")),M==="PAID"||M==="TRIAL"?React.createElement("button",{onClick:()=>{try{ci("")}catch(Ae){}try{a&&a()}catch(Ae){}},className:"px-3 py-2 rounded-xl bg-white/10 border border-white/10 text-[12px] font-extrabold text-white hover:bg-white/15"},"Open"):React.createElement("button",{onClick:()=>{try{de&&de("COMMAND_BAR")}catch(Ae){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-[12px] font-extrabold text-white/80 hover:bg-white/10"},"Locked")))))},Mn=({from:e="UNKNOWN",onDone:a})=>{var[r,c]=React.useState("Today"),[h,V]=React.useState("18:00"),[de,M]=React.useState(""),De=(window.__fof_getClientContext?window.__fof_getClientContext():{tier:"FREE"})||{tier:"FREE"},Ae=String(De.tier||"FREE").toUpperCase(),Oe=Ae==="TRIAL",N=Ae==="PAID",[Ne,G]=React.useState("Check-in"),we=["Check-in","Program Review","Technique / Form"],$t=["07:00","08:00","12:30","16:30","18:00","19:30"],gt=["Today","Tomorrow","This weekend"];React.useEffect(()=>{try{oi&&oi(__fof_event("BOOK_SESSION_OPENED",{from:e,tier:Ae},{module:"COACH"},"ui"))}catch(ve){}},[]);var _e=()=>{var ve={id:"bk_"+Date.now(),day:r,slot:h,type:Ne,note:String(de||"").trim(),from:e,tier:Ae,ts:mi()};try{var me="fof_booking_requests_v1",j=localStorage.getItem(me),je=JSON.parse(j||"[]");je.unshift(ve),localStorage.setItem(me,JSON.stringify(je.slice(0,50)))}catch(me){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Booking request sent"}}))}catch(me){}try{oi&&oi(__fof_event("BOOK_SESSION_REQUEST",ve,{module:"COACH"},"ui"))}catch(me){}try{a&&a(ve)}catch(me){}};return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold tracking-widest"},"WHEN"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},gt.map(ve=>React.createElement("button",{key:ve,type:"button",onClick:()=>c(ve),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(r===ve?"border-cyan-300/30 bg-cyan-400/15 text-cyan-100":"border-white/12 bg-black/30 text-white/75 hover:bg-white/10")},ve)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold tracking-widest"},"TIME"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},$t.map(ve=>React.createElement("button",{key:ve,type:"button",onClick:()=>V(ve),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(h===ve?"border-emerald-300/30 bg-emerald-400/15 text-emerald-100":"border-white/12 bg-black/30 text-white/75 hover:bg-white/10")},ve)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold tracking-widest"},"SESSION TYPE"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},we.map(ve=>React.createElement("button",{key:ve,type:"button",onClick:()=>G(ve),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition "+(Ne===ve?"border-cyan-300/60 bg-cyan-400/15 text-white":"border-white/12 bg-black/30 text-white/75 hover:bg-white/10")},ve))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},N?"Included in your plan. Your coach will confirm the time.":Oe?"Trial: you won\u2019t be charged until your trial ends. Coach will confirm the time.":"Your coach will confirm the time. Pricing may apply based on coach package.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold tracking-widest"},"NOTE"),React.createElement("textarea",{value:de,onChange:ve=>M(ve.target.value),rows:3,placeholder:"Any preference? (e.g., focus area, injury notes)",className:"mt-2 w-full rounded-2xl border border-white/12 bg-black/30 px-3 py-2 text-[13px] text-white placeholder:text-white/40 focus:outline-none"})),React.createElement("button",{type:"button",onClick:_e,className:"w-full rounded-3xl bg-gradient-to-br from-[#1f8cff] via-[#6b3cff] to-[#00ffd5] px-4 py-3 text-[14px] font-black text-white active:scale-[0.99]"},"Request session"),React.createElement("div",{className:"text-[11px] text-white/55"},"Demo behavior: stores a request locally. In production this routes to coach calendar + payment rules."))},Gr=({from:e="UNKNOWN",onPick:a})=>{var r=(window.__fof_getClientContext?window.__fof_getClientContext():{tier:"FREE"})||{tier:"FREE"},c=String(r.tier||"FREE").toUpperCase(),h=c==="TRIAL",V=c==="PAID",de=r.goal||r.primaryGoal||r.goalType||"General Fitness",M=String(r.capacityZone||r.capacityBand||r.capacity||"MID").toUpperCase(),[De,Ae]=React.useState("BROWSE"),[Oe,N]=React.useState(""),[Ne,G]=React.useState(!1),[we,$t]=React.useState(!0),[gt,_e]=React.useState(79),[ve,me]=React.useState("ANY"),[j,je]=React.useState(null),[re,Z]=React.useState(!1),[Qe,nt]=React.useState([]),Lt=(Da,Va)=>{try{__fof_toast&&__fof_toast(Da,Va);return}catch(Y){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:Da,body:Va}}))}catch(Y){}};React.useEffect(()=>{try{oi&&oi(__fof_event("COACH_MARKETPLACE_OPENED",{from:e,tier:c,goal:de,cap:M},{module:"COACH"},"ui"))}catch(Da){}},[]);var ze=React.useMemo(()=>[{id:"maya",name:"Coach Maya",badge:"Strength \u2022 Form",rating:4.9,reviews:214,years:8,specialties:["Strength","Mobility","Form"],verified:!0,accepting:!0,price:49,avatar:"\u{1F9D1}\u200D\u{1F3EB}",resp:"<24h",focus:"Technique & sustainable strength."},{id:"alex",name:"Coach Alex",badge:"Hypertrophy",rating:4.7,reviews:172,years:6,specialties:["Hypertrophy","Strength"],verified:!0,accepting:!0,price:59,avatar:"\u{1F3CB}\uFE0F",resp:"<24h",focus:"Muscle gain + progressive overload."},{id:"sara",name:"Coach Sara",badge:"Rehab \u2022 Mobility",rating:4.8,reviews:98,years:10,specialties:["Rehab","Mobility","Yoga"],verified:!0,accepting:!0,price:69,avatar:"\u{1F9D8}",resp:"<48h",focus:"Pain-free movement + rehab-first training."},{id:"omar",name:"Coach Omar",badge:"Nutrition \u2022 Body Comp",rating:4.6,reviews:141,years:7,specialties:["Nutrition","Fat Loss"],verified:!1,accepting:!0,price:55,avatar:"\u{1F957}",resp:"<24h",focus:"Body recomposition with food-first habits."},{id:"lina",name:"Coach Lina",badge:"Yoga \u2022 Recovery",rating:4.9,reviews:77,years:9,specialties:["Yoga","Mobility","Recovery"],verified:!0,accepting:!1,price:45,avatar:"\u{1F33F}",resp:"<72h",focus:"Flexibility + recovery routines."}],[]),Le=["ANY","Strength","Hypertrophy","Rehab","Mobility","Yoga","Nutrition","Fat Loss","Recovery"],se=React.useCallback(Da=>Da.filter(Va=>!(Ne&&!Va.verified||we&&!Va.accepting||Va.price>gt||ve!=="ANY"&&!(Va.specialties||[]).includes(ve)||Oe&&!(String(Va.name||"")+" "+String(Va.badge||"")+" "+(Va.specialties||[]).join(" ")).toLowerCase().includes(Oe.toLowerCase()))),[Ne,we,gt,ve,Oe]),at=React.useMemo(()=>se(ze),[ze,se]),Pe=Da=>{var Va=[];return Va.push(`Goal match: ${de}.`),(Da.specialties||[]).includes("Strength")&&/strength|muscle|hypertrophy/i.test(de)&&Va.push("Strong strength programming fit."),((Da.specialties||[]).includes("Rehab")||(Da.specialties||[]).includes("Mobility"))&&Va.push("Mobility-aware coaching to reduce injury risk."),(Da.specialties||[]).includes("Nutrition")&&Va.push("Nutrition support aligned to body composition goals."),M==="LOW"&&Va.push("Low-capacity friendly adjustments & recovery emphasis."),M==="HIGH"&&Va.push("High-capacity progression + intensity control."),Va.push(`Response time: ${Da.resp}.`),Va.join(" ")},Wt="fof_link_coach_request_v2",[Ha,qa]=React.useState(()=>{try{return JSON.parse(localStorage.getItem(Wt)||"null")}catch(Da){return null}}),oa=(Da,Va="")=>{var Y={id:"req_"+Math.random().toString(16).slice(2),ts:Date.now(),tier:c,from:e,coachId:Da.id,coachName:Da.name,goal:de,cap:M,price:Da.price,note:Va||"",status:"PENDING"};try{localStorage.setItem(Wt,JSON.stringify(Y))}catch(ft){}qa(Y);try{oi&&oi(__fof_event("COACH_REQUEST_SENT",Y,{module:"COACH"},"ui"))}catch(ft){}Lt("Request sent",`We sent your request to ${Da.name}.`)},Ra=()=>{var Da=String(de||"").toLowerCase(),Va=_a=>{var Ja=0;return _a.accepting&&(Ja+=3),_a.verified&&(Ja+=2),(_a.specialties||[]).some(Ui=>Da.includes(String(Ui).toLowerCase()))&&(Ja+=3),(_a.specialties||[]).includes("Rehab")&&M==="LOW"&&(Ja+=2),(_a.specialties||[]).includes("Hypertrophy")&&/muscle|hypertrophy|strength/.test(Da)&&(Ja+=2),(_a.specialties||[]).includes("Yoga")&&/yoga|mobility|recovery/.test(Da)&&(Ja+=2),Ja},Y=[...ze].map(_a=>({c:_a,s:Va(_a)})).sort((_a,Ja)=>Ja.s-_a.s).map(_a=>_a.c),ft=se(Y).slice(0,4);nt(ft),Z(!0);try{oi&&oi(__fof_event("COACH_AI_MATCH_RUN",{from:e,tier:c,goal:de,cap:M,count:ft.length},{module:"COACH"},"ui"))}catch(_a){}Lt("AI Match ready","Here are coaches curated for your profile.")},ri=({c:Da})=>React.createElement("button",{type:"button",onClick:()=>je(Da),className:"w-full text-left rounded-3xl border border-white/10 bg-black/30 p-3 hover:bg-white/5 transition flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-white/10 border border-white/12 flex items-center justify-center text-2xl"},Da.avatar),React.createElement("div",null,React.createElement("div",{className:"text-white font-black flex items-center gap-2"},Da.name,Da.verified&&React.createElement("span",{className:"px-2 py-[2px] rounded-full bg-emerald-500/15 border border-emerald-400/20 text-[10px] text-emerald-200 font-extrabold"},"Verified"),!Da.accepting&&React.createElement("span",{className:"px-2 py-[2px] rounded-full bg-white/5 border border-white/10 text-[10px] text-white/60 font-bold"},"Waitlist"),Da.accepting&&React.createElement("span",{className:"px-2 py-[2px] rounded-full bg-emerald-500/10 border border-emerald-400/15 text-[10px] text-emerald-200 font-bold"},"Accepting")),React.createElement("div",{className:"text-[12px] text-white/65"},Da.badge),React.createElement("div",{className:"mt-1 flex items-center gap-2 text-[11px] text-white/65"},React.createElement("span",null,"\u2B50 ",Da.rating.toFixed(1)," (",Da.reviews,")"),React.createElement("span",{className:"opacity-50"},"\u2022"),React.createElement("span",null,"\u{1F9E0} ",Da.years," yrs"),React.createElement("span",{className:"opacity-50"},"\u2022"),React.createElement("span",null,"\u23F1 ",Da.resp)),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},(Da.specialties||[]).slice(0,3).map(Va=>React.createElement("span",{key:Va,className:"px-2 py-1 rounded-full border border-white/10 bg-black/30 text-[10px] text-white/70"},Va))))),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/80"},"$",Da.price,"/session"),React.createElement("div",{className:"text-[10px] text-white/50"},V?"Priority matching":h?"Trial pricing applies after trial":"Pricing varies by coach")));return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Ae("BROWSE"),className:`px-4 py-2 rounded-2xl border ${De==="BROWSE"?"border-white/25 bg-white/10":"border-white/10 bg-black/30"} font-extrabold`},"Browse"),React.createElement("button",{type:"button",onClick:()=>Ae("AI"),className:`px-4 py-2 rounded-2xl border ${De==="AI"?"border-white/25 bg-white/10":"border-white/10 bg-black/30"} font-extrabold`},"AI Match")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold"},"Filters"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>$t(Da=>!Da),className:`px-3 py-2 rounded-2xl border ${we?"border-emerald-400/25 bg-emerald-500/10":"border-white/10 bg-black/20"} text-[12px] font-bold`},"Accepting"),React.createElement("button",{type:"button",onClick:()=>G(Da=>!Da),className:`px-3 py-2 rounded-2xl border ${Ne?"border-emerald-400/25 bg-emerald-500/10":"border-white/10 bg-black/20"} text-[12px] font-bold`},"Verified"),React.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-2xl border border-white/10 bg-black/20"},React.createElement("span",{className:"text-[12px] text-white/70 font-bold"},"Max"),React.createElement("span",{className:"text-[12px] text-white font-extrabold"},"$",gt),React.createElement("input",{type:"range",min:"39",max:"99",value:gt,onChange:Da=>_e(parseInt(Da.target.value||"79",10))})),React.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-2xl border border-white/10 bg-black/20"},React.createElement("span",{className:"text-[12px] text-white/70 font-bold"},"Specialty"),React.createElement("select",{value:ve,onChange:Da=>me(Da.target.value),className:"bg-transparent text-[12px] text-white font-extrabold outline-none"},Le.map(Da=>React.createElement("option",{key:Da,value:Da,className:"bg-zinc-900"},Da))))),React.createElement("input",{value:Oe,onChange:Da=>N(Da.target.value),placeholder:"Search: strength, mobility, nutrition...",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[13px] text-white placeholder:text-white/40 focus:outline-none"}),Ha&&React.createElement("div",{className:"mt-3 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 p-3 text-[12px] text-emerald-100"},React.createElement("div",{className:"font-extrabold"},"Request pending"),React.createElement("div",{className:"opacity-90"},"Coach: ",React.createElement("span",{className:"font-bold"},Ha.coachName)," \u2022 Status: ",Ha.status))),De==="AI"&&React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-white font-black text-[14px]"},"AI Coach Matching"),React.createElement("div",{className:"text-[12px] text-white/65 mt-1"},"Based on your profile: ",React.createElement("span",{className:"font-bold text-white/85"},de)," \u2022 Capacity: ",React.createElement("span",{className:"font-bold text-white/85"},M)),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:Ra,className:"w-full px-4 py-3 rounded-2xl border border-white/15 bg-white/10 hover:bg-white/15 font-extrabold"},"Find me a coach")),re&&React.createElement("div",{className:"mt-3 space-y-2"},(Qe&&Qe.length?Qe:[]).map(Da=>React.createElement(ri,{key:Da.id,c:Da})),!Qe.length&&React.createElement("div",{className:"text-[12px] text-white/65"},"No matches under current filters. Try widening filters."))),De==="BROWSE"&&React.createElement("div",{className:"space-y-2"},at.map(Da=>React.createElement(ri,{key:Da.id,c:Da})),!at.length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4 text-[13px] text-white/70"},"No coaches found.")),j&&React.createElement("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/60 p-3"},React.createElement("div",{className:"w-full max-w-md rounded-[28px] border border-white/12 bg-zinc-950 p-4 shadow-2xl"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-white/10 border border-white/12 flex items-center justify-center text-2xl"},j.avatar),React.createElement("div",null,React.createElement("div",{className:"text-white font-black flex items-center gap-2"},j.name,j.verified&&React.createElement("span",{className:"px-2 py-[2px] rounded-full bg-emerald-500/15 border border-emerald-400/20 text-[10px] text-emerald-200 font-extrabold"},"Verified")),React.createElement("div",{className:"text-[12px] text-white/65"},j.badge),React.createElement("div",{className:"text-[11px] text-white/65 mt-1"},"\u2B50 ",j.rating.toFixed(1)," (",j.reviews,") \u2022 \u{1F9E0} ",j.years," yrs \u2022 \u{1F7E2} ",j.accepting?"Accepting new clients":"Waitlist"))),React.createElement("button",{type:"button",onClick:()=>je(null),className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 font-extrabold"},"Close")),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[11px] text-white/60 font-extrabold tracking-wide"},"WHY THIS COACH FITS YOU"),React.createElement("div",{className:"mt-2 text-[13px] text-white/80 leading-relaxed"},Pe(j)),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},j.focus)),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold"},"Message (optional)"),React.createElement("textarea",{id:"fof_req_note",rows:"3",placeholder:"Tell the coach your goal, constraints, injuries, schedule...",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[13px] text-white placeholder:text-white/40 focus:outline-none"})),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{var Da=(document.getElementById("fof_req_note")||{}).value||"";oa(j,Da),je(null)},className:"flex-1 px-4 py-3 rounded-2xl border border-emerald-400/20 bg-emerald-500/15 hover:bg-emerald-500/20 text-emerald-100 font-extrabold"},"Request Coach"),React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openers&&window.__fof_openers.openProfile&&window.__fof_openers.openProfile()}catch(Da){}},className:"px-4 py-3 rounded-2xl border border-white/10 bg-white/5 font-extrabold"},"View Profile")))),React.createElement("div",{className:"text-[11px] text-white/55"},"Demo behavior: requests are stored locally. In production: matching + onboarding + payment + scheduling."))},En=()=>{try{return new Date().toISOString()}catch(e){return""}},Ir=(e,a)=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:e,message:a}}))}catch(r){}},Vn=async e=>{try{if(navigator&&navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(String(e||"")),!0}catch(a){}try{var a=document.createElement("textarea");return a.value=String(e||""),a.setAttribute("readonly",""),a.style.position="fixed",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),!0}catch(a){}return!1},od=(e,a)=>{try{var r=document.createElement("a");return r.href=String(e||""),r.download=String(a||"flowofit-share.png"),document.body.appendChild(r),r.click(),r.remove(),!0}catch(r){}return!1},Rr=()=>{var e;try{var a=window.__FOF_CLIENT_CONTEXT||((e=window.__FOF_CLIENT)==null?void 0:e.context)||window.__FOF_CONTEXT||null;if(a&&typeof a=="object")return a}catch(a){}return{relationship:window.__FOF_RELATIONSHIP||"INDEPENDENT",tier:window.__FOF_TIER||"FREE",emphasis:window.__FOF_EMPHASIS||"FITNESS",coach:window.__FOF_COACH||null}},nd=()=>{var e=Rr(),a=String(e.relationship||"INDEPENDENT").toUpperCase(),r=e.coach||{};return{relationship:a,coachName:r&&(r.name||r.displayName)?String(r.name||r.displayName):null,coachBrand:r&&(r.brand||r.businessName)?String(r.brand||r.businessName):null}},pl=async({kind:e,title:a,subtitle:r,lines:c=[],stats:h=[],badges:V=[],footerNote:de,meta:M})=>{var Wt,Ha;var Oe=document.createElement("canvas");Oe.width=1080,Oe.height=1920;var N=Oe.getContext("2d");if(!N)throw new Error("canvas_unavailable");N.fillStyle="#070A12",N.fillRect(0,0,1080,1920);var Ne=N.createLinearGradient(0,0,1080,1920);Ne.addColorStop(0,"rgba(20, 255, 190, 0.14)"),Ne.addColorStop(.45,"rgba(60, 120, 255, 0.10)"),Ne.addColorStop(1,"rgba(255, 255, 255, 0.00)"),N.fillStyle=Ne,N.fillRect(0,0,1080,1920),N.strokeStyle="rgba(255,255,255,0.10)",N.lineWidth=6;var G=56,we=48,$t=we,gt=we,_e=1080-we*2,ve=1920-we*2,me=(qa,oa,Ra,ri,Da)=>{N.beginPath(),N.moveTo(qa+Da,oa),N.arcTo(qa+Ra,oa,qa+Ra,oa+ri,Da),N.arcTo(qa+Ra,oa+ri,qa,oa+ri,Da),N.arcTo(qa,oa+ri,qa,oa,Da),N.arcTo(qa,oa,qa+Ra,oa,Da),N.closePath()};me($t,gt,_e,ve,G),N.stroke();var j=nd(),je=j.relationship;N.font="800 44px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",N.fillStyle="rgba(255,255,255,0.92)",N.fillText(String(a||"FlowOFit"),$t+56,gt+120),N.font="700 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",N.fillStyle="rgba(255,255,255,0.62)",N.fillText(String(r||""),$t+56,gt+168);var re=[];re.push(je==="LINKED"?"Coach\u2011Led":"Independent"),je==="LINKED"&&(j.coachBrand||j.coachName)&&re.push(j.coachBrand||j.coachName),M&&M.coachApproved&&re.push("Coach\u2011Approved"),e&&re.push(String(e).replace(/_/g," "));var Z=$t+56,Qe=gt+210;N.font="800 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",re.slice(0,4).forEach(qa=>{var oa=String(qa),Ra=N.measureText(oa),ri=18,Da=10,Va=Ra.width+ri*2,Y=44;N.fillStyle="rgba(255,255,255,0.06)",N.strokeStyle="rgba(255,255,255,0.10)",N.lineWidth=2,((Ja,Ui,qs,_o,ki)=>{N.beginPath(),N.moveTo(Ja+ki,Ui),N.arcTo(Ja+qs,Ui,Ja+qs,Ui+_o,ki),N.arcTo(Ja+qs,Ui+_o,Ja,Ui+_o,ki),N.arcTo(Ja,Ui+_o,Ja,Ui,ki),N.arcTo(Ja,Ui,Ja+qs,Ui,ki),N.closePath()})(Z,Qe,Va,Y,18),N.fill(),N.stroke(),N.fillStyle="rgba(255,255,255,0.80)",N.fillText(oa,Z+ri,Qe+30),Z+=Va+14,Z>$t+_e-80&&(Z=$t+56,Qe+=58)});var nt=Qe+84;var Lt=(_e-56*2-18*3)/4,ze=120;N.font="900 42px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto";for(var qa=0;qa<4;qa++){var oa=h[qa],Ra=$t+56+qa*(Lt+18),ri=nt;if(N.fillStyle="rgba(255,255,255,0.05)",N.strokeStyle="rgba(255,255,255,0.10)",N.lineWidth=2,me(Ra,ri,Lt,ze,26),N.fill(),N.stroke(),oa){var Da=String((Wt=oa.value)!=null?Wt:"\u2014"),Va=String((Ha=oa.label)!=null?Ha:"");N.fillStyle="rgba(255,255,255,0.92)",N.fillText(Da,Ra+20,ri+58),N.font="800 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",N.fillStyle="rgba(255,255,255,0.55)",N.fillText(Va,Ra+20,ri+92),N.font="900 42px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"}}var Le=nt+ze+48;if(N.font="800 30px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",N.fillStyle="rgba(255,255,255,0.88)",(c||[]).slice(0,10).forEach(qa=>{var oa=String(qa);N.fillText("\u2022 "+oa,$t+70,Le),Le+=44}),Array.isArray(V)&&V.length){Le+=20,N.font="900 34px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto",N.fillStyle="rgba(255,255,255,0.90)",N.fillText("Badges",$t+56,Le),Le+=56,N.font="900 44px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto";var qa=$t+56,oa=Le;V.slice(0,12).forEach((Ra,ri)=>{var Da=String(Ra.icon||"\u{1F3C5}");N.fillText(Da,qa,oa),qa+=72,qa>$t+_e-120&&(qa=$t+56,oa+=72)}),Le=oa+90}var at=gt+ve-110;N.fillStyle="rgba(255,255,255,0.55)",N.font="800 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto";var Pe=de?String(de):je==="LINKED"?"Coach\u2011led progress \u2022 FlowOFit":"Personal progress \u2022 FlowOFit";return N.fillText(Pe,$t+56,at),N.fillStyle="rgba(255,255,255,0.35)",N.fillText(En().slice(0,10),$t+_e-220,at),Oe.toDataURL("image/png")},rd=(e={})=>{try{if(!(typeof window.__fof_assertOverlayAllowed=="function"?window.__fof_assertOverlayAllowed("BOTTOM_SHEET","SHARE_EXPORT_SHEET_V1"):!0))return{ok:!1}}catch(a){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"SHARE_EXPORT_SHEET_V1",props:{payload:e}}}))}catch(a){}return{ok:!0}};try{window.__fof_openShareExport=rd}catch(e){}var bl=({open:e,payload:a,onClose:r})=>{if(!e)return null;var c=a||{},h=c.meta||{},V=String(c.kind||"SHARE").toUpperCase(),[de,M]=React.useState(!1),De=async()=>{var ve=c.title||(V==="ACHIEVEMENTS"?"Achievements":V==="WORKOUT_SUMMARY"?"Workout Summary":"Report"),me=c.subtitle||h&&h.subtitle||"",j=Array.isArray(c.lines)?c.lines:[],je=Array.isArray(c.stats)?c.stats:[],re=Array.isArray(c.badges)?c.badges:[],Z=c.footerNote||null;return pl({kind:V,title:ve,subtitle:me,lines:j,stats:je,badges:re,footerNote:Z,meta:h})},Ae=async()=>{if(!de){M(!0);try{var ve=await De(),me=(c.filename||`flowofit-${V.toLowerCase()}-${Date.now()}.png`).replace(/[^a-z0-9\-\._]/gi,"_");try{if(navigator&&navigator.share){var je=await(await fetch(ve)).blob(),re=new File([je],me,{type:"image/png"});await navigator.share({title:c.title||"FlowOFit",text:c.shareText||"",files:[re]}),Ir("Shared","Image shared successfully."),M(!1);return}}catch(j){}od(ve,me),Ir("Saved","Share image downloaded.")}catch(ve){try{console.warn("[ShareImageError]",ve)}catch(me){}Ir("Could not share","Please try again.")}finally{M(!1)}}},Oe=async()=>{if(!de){M(!0);try{var ve=await De(),me=String(c.title||"FlowOFit Export"),j=window.open("","_blank");if(!j){Ir("Popup blocked","Allow popups to export PDF."),M(!1);return}var je=String(c.subtitle||""),re=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>${me.replace(/</g,"&lt;")}</title>
  <style>
    body{ margin:0; padding:24px; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; background:#0b0f1a; color:#fff; }
    .card{ max-width:760px; margin:0 auto; border:1px solid rgba(255,255,255,0.12); border-radius:24px; padding:18px; background: rgba(255,255,255,0.04); }
    h1{ font-size:20px; margin:0; }
    p{ margin:6px 0 0; opacity:.75; font-weight:600; font-size:12px; }
    img{ width:100%; border-radius:18px; margin-top:14px; border:1px solid rgba(255,255,255,0.10); }
    .foot{ margin-top:14px; font-size:11px; opacity:.6; font-weight:700; }
    @media print{
      body{ background:#fff; color:#000; padding:0; }
      .card{ border:none; background:#fff; border-radius:0; padding:0; }
      img{ border:none; border-radius:0; }
    }
  </style>
</head>
<body onload="try{window.print();}catch(e){}">
  <div class="card">
    <h1>${me.replace(/</g,"&lt;")}</h1>
    <p>${je.replace(/</g,"&lt;")}</p>
    <img src="${ve}" alt="FlowOFit export"/>
    <div class="foot">Generated by FlowOFit \u2022 ${En().slice(0,10)}</div>
  </div>
</body>
</html>`;j.document.open(),j.document.write(re),j.document.close(),Ir("Export ready","Use \u201CSave as PDF\u201D in the print dialog.")}catch(ve){Ir("Could not export","Please try again.")}finally{M(!1)}}},N=async()=>{var ve=`fof_${Math.random().toString(36).slice(2,10)}_${Date.now().toString(36)}`,me=(c.shareLinkBase?String(c.shareLinkBase):"https://flowofit.app/share/")+ve;await Vn(me)?Ir("Copied","Share link copied to clipboard."):Ir("Could not copy","Please copy manually.")},Ne=c&&c.locks&&typeof c.locks=="object"?c.locks:{},G=!!Ne.image,we=!!Ne.pdf,$t=!!c.locked,gt=$t||G||we,_e=c.lockReason||(we&&!G?"Upgrade to export PDF.":G&&!we?"Upgrade to share image.":"Upgrade to export this format.");return React.createElement(qo,{open:!0,title:c.sheetTitle||"Share & Export",kicker:c.kicker||"Share",onClose:r,footer:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",disabled:de||$t||G,onClick:Ae,className:["flex-1 h-12 rounded-2xl border font-extrabold",$t?"border-white/10 bg-white/5 text-white/40":"border-emerald-400/30 bg-emerald-500/15 text-emerald-100 hover:bg-emerald-500/20"].join(" ")},de?"Preparing...":"Share Image"),React.createElement("button",{type:"button",disabled:de||$t||we,onClick:Oe,className:["flex-1 h-12 rounded-2xl border font-extrabold",$t?"border-white/10 bg-white/5 text-white/40":"border-white/12 bg-white/6 text-white/85 hover:bg-white/10"].join(" ")},"Export PDF"))},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] truncate"},c.title||"Export"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},c.subtitle||"Preview what you will share.")),React.createElement("button",{type:"button",onClick:N,className:"h-9 px-3 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/80 hover:bg-white/10"},"Copy link")),gt?React.createElement("div",{className:"mt-3 rounded-2xl border border-amber-300/20 bg-amber-500/10 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-amber-200"},"Locked"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/70"},_e),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openPaywallStub&&window.__fof_openPaywallStub(c.paywallFeatureKey||"Share & Export",{source:"A10.4_SHARE_EXPORT",kind:V})}catch(ve){}},className:"w-full h-11 rounded-2xl border border-amber-300/25 bg-amber-500/15 text-amber-100 font-extrabold hover:bg-amber-500/20"},"Upgrade to unlock"))):null,React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2"},(Array.isArray(c.metaChips)?c.metaChips:[]).slice(0,6).map((ve,me)=>React.createElement("div",{key:me,className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] font-extrabold text-white/75"},String(ve)))),React.createElement("div",{className:"mt-4 text-[12px] text-white/55 font-semibold leading-relaxed"},"Privacy: your share never includes raw logs, private coach notes, or sensitive health metrics unless shown in this preview.")))},El=({open:e,code:a="FOF-TRIAL",onClose:r})=>{var c=`Join me on FlowOFit \u2014 use code ${a} for a bonus!`,h=async()=>{try{await navigator.clipboard.writeText(c);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Copied referral message."}}))}catch(de){}}catch(de){try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Copy not available here."}}))}catch(M){}}};return React.createElement(qo,{open:!!e,title:"Referral",onClose:r},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Invite a friend"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},"Share your code. When they join, you both get a bonus (demo stub)."),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/60"},"Your code"),React.createElement("div",{className:"mt-0.5 font-mono text-[14px] font-extrabold text-white truncate"},a)),React.createElement("button",{onClick:h,className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Copy"))),React.createElement("button",{onClick:async()=>{try{if(navigator.share){await navigator.share({text:c});try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Share opened."}}))}catch(de){}return}}catch(de){}await h()},className:"w-full px-4 py-3 rounded-3xl bg-white text-black font-extrabold text-[13px]"},"Share"),React.createElement("button",{onClick:r,className:"w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/85 text-[13px]"},"Done")))},Nr=({open:e,reason:a="UPGRADE",onClose:r})=>{var c=(h,V={})=>{try{r&&r()}catch(de){}setTimeout(()=>{try{window.__fof_openNode&&window.__fof_openNode(h,V)}catch(de){}},0)};return React.createElement(qo,{open:!!e,title:"Upgrade",onClose:r},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Unlock more"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},"Choose an option below. This is a real sheet (no dead-end stubs).")),React.createElement("button",{onClick:()=>c("IC_Start_Trial_NEW",{from:"UPGRADE_PROMPT",reason:a}),className:"w-full px-4 py-3 rounded-3xl bg-white text-black font-extrabold text-[13px]"},"Start Trial"),React.createElement("button",{onClick:()=>c("IC_Upgrade_Options_Router",{from:"UPGRADE_PROMPT",reason:a}),className:"w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/85 text-[13px]"},"See Upgrade Options"),React.createElement("button",{onClick:()=>c("Payments_Module_PM_Entry",{from:"UPGRADE_PROMPT",reason:a}),className:"w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/85 text-[13px]"},"Checkout"),React.createElement("button",{onClick:r,className:"w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/70 text-[13px]"},"Not now")))},Fn=e=>{try{return new Date(String(e)+"T00:00:00")}catch(a){return new Date}},Sr=e=>{try{return window.__fof_localDateKey?window.__fof_localDateKey(e):e.toISOString().slice(0,10)}catch(a){return new Date().toISOString().slice(0,10)}},ol=(e,a)=>{try{var r=Fn(e);return r.setDate(r.getDate()+(Number(a)||0)),Sr(r)}catch(r){return e}},zr=(e=null)=>{try{var a=e||Sr(new Date),r=Fn(a),h=(r.getDay()+6)%7;return r.setDate(r.getDate()-h),Sr(r)}catch(a){return Sr(new Date)}},Al=(e,a=[])=>{var r=String(e||"").toUpperCase();return(a||[]).some(c=>r===c||r.includes(c))},nl=e=>{var a=typeof window.__fof_getEventsForDate=="function"?window.__fof_getEventsForDate(e,{includeLegacy:!0})||[]:[],r=a.map(Ae=>String(Ae&&Ae.kind?Ae.kind:"").toUpperCase()),c=r.some(Ae=>Al(Ae,["WORKOUT","WORKOUT_LOG","WORKOUT_SUMMARY"])),h=r.some(Ae=>Al(Ae,["YOGA","MOBILITY"])),V=r.some(Ae=>Al(Ae,["MEAL","FOOD","NUTRITION"])),de=r.some(Ae=>Al(Ae,["RECOVERY","SLEEP","STRESS","SORENESS"])),M=r.filter(Ae=>Ae==="SECONDARY_ACTIVITY_ADD").length,De=c||h||V||de||M>0;return{hasWorkout:c,hasYoga:h,hasNutrition:V,hasRecovery:de,secondaryAdds:M,any:De,evCount:a.length}},i=({open:e,onClose:a,anchorKey:r=null})=>{if(!e)return null;var c=React.useMemo(()=>{try{return window.__fof_localDateKey?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10)}catch(we){return new Date().toISOString().slice(0,10)}},[]),[h,V]=React.useState(()=>r||c),de=React.useMemo(()=>zr(h),[h]),M=React.useMemo(()=>Array.from({length:7}).map((we,$t)=>ol(de,$t)),[de]),De=React.useMemo(()=>{var we=M.map(re=>({k:re,...nl(re)})),$t=we.filter(re=>re.hasWorkout).length,gt=we.filter(re=>re.hasYoga).length,_e=we.filter(re=>re.hasNutrition).length,ve=we.filter(re=>re.hasRecovery).length,me=we.filter(re=>re.any).length,j=we.reduce((re,Z)=>re+(Z.secondaryAdds||0),0);var je=0;for(var re=we.length-1;re>=0;re--){var Z=we[re].k;if(!(String(Z)>String(c)))if(we[re].any)je+=1;else break}return{days:we,workouts:$t,yoga:gt,nutrition:_e,recovery:ve,activeDays:me,secondary:j,streak:je}},[M,c]),Ae=React.useMemo(()=>{try{var we=Fn(de),$t=Fn(ol(de,6)),gt=we.toLocaleDateString(void 0,{month:"short",day:"numeric"}),_e=$t.toLocaleDateString(void 0,{month:"short",day:"numeric"});return`${gt} \u2013 ${_e}`}catch(we){return""}},[de]),Oe=typeof window!="undefined"&&window.CDEPOverlayShell?window.CDEPOverlayShell:null,N=({children:we})=>Oe?React.createElement(Oe,{title:"Weekly Review",onClose:a},we):React.createElement("div",{className:"fixed inset-0 z-[999] flex items-end justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:a}),React.createElement("div",{className:"relative mb-[max(12px,env(safe-area-inset-bottom))] w-[92vw] max-w-[680px] rounded-3xl border border-white/12 bg-[#0B0F1A]/95 p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-black text-[16px]"},"Weekly Review"),React.createElement("button",{onClick:a,className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center"},React.createElement("i",{"data-lucide":"x",className:"w-4 h-4 text-white/75"}))),we)),Ne=({label:we,value:$t,sub:gt})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[10px] text-white/55 font-black uppercase tracking-wide"},we),React.createElement("div",{className:"mt-1 text-[18px] text-white font-black tabular-nums"},$t),gt?React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-semibold"},gt):null),G=({on:we})=>React.createElement("span",{className:`inline-block h-2.5 w-2.5 rounded-full ${we?"bg-emerald-400":"bg-white/15"}`});return React.createElement(N,null,React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/55 font-extrabold uppercase tracking-[0.22em]"},"This week"),React.createElement("div",{className:"mt-1 text-white font-black text-[18px] tracking-tight"},Ae),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Active days: ",React.createElement("span",{className:"text-white/85 font-black tabular-nums"},De.activeDays,"/7")," \u2022 Current streak: ",React.createElement("span",{className:"text-white/85 font-black tabular-nums"},De.streak))),React.createElement("button",{type:"button",onClick:()=>{try{V(c)}catch(we){}},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/80 font-extrabold"},"This week")),React.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3"},React.createElement(Ne,{label:"Workouts",value:De.workouts,sub:"Days logged"}),React.createElement(Ne,{label:"Yoga / Mobility",value:De.yoga,sub:"Days logged"}),React.createElement(Ne,{label:"Nutrition",value:De.nutrition,sub:"Days logged"}),React.createElement(Ne,{label:"Recovery",value:De.recovery,sub:"Days logged"})),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55 font-extrabold uppercase tracking-[0.22em]"},"Day-by-day"),React.createElement("div",{className:"mt-2 space-y-2"},De.days.map(we=>{var gt=Fn(we.k).toLocaleDateString(void 0,{weekday:"short"}),_e=String(we.k)===String(c);return React.createElement("div",{key:we.k,className:`flex items-center justify-between gap-3 rounded-2xl border ${_e?"border-white/18 bg-white/10":"border-white/10 bg-black/15"} px-3 py-2`},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},gt,_e?" \u2022 Today":""),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold tabular-nums"},we.k)),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex items-center gap-1",title:"Workout"},React.createElement(G,{on:we.hasWorkout})),React.createElement("div",{className:"flex items-center gap-1",title:"Yoga"},React.createElement(G,{on:we.hasYoga})),React.createElement("div",{className:"flex items-center gap-1",title:"Nutrition"},React.createElement(G,{on:we.hasNutrition})),React.createElement("div",{className:"flex items-center gap-1",title:"Recovery"},React.createElement(G,{on:we.hasRecovery})),we.secondaryAdds?React.createElement("span",{className:"ml-1 text-[10px] font-black text-white/70 border border-white/12 bg-white/5 rounded-full px-2 py-1"},"+",we.secondaryAdds," add\u2011on"):null))})),React.createElement("div",{className:"mt-3 text-[11px] text-white/50 font-semibold"},"Dots indicate whether you logged that category on the day. This is read\u2011only in v1."))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay("WEEKLY_SUMMARY_V1",{from:"WEEKLY_REVIEW_V1",anchorKey:de}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WEEKLY_SUMMARY_V1",props:{from:"WEEKLY_REVIEW_V1",anchorKey:de}}}))}catch(we){}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"View Summary"),React.createElement("button",{type:"button",onClick:()=>{try{a&&a()}catch(we){}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"Close"))))},s=()=>{try{var e=window.__FOF&&typeof window.__FOF.getClientContext=="function"?window.__FOF.getClientContext():window.__FOF_CTX||null,a=e&&(e.relationship||e.rel||e.mode);return String(a||"").toUpperCase()==="LINKED"}catch(e){return!1}},x=()=>{try{var e=window.__FOF&&typeof window.__FOF.getClientContext=="function"?window.__FOF.getClientContext():window.__FOF_CTX||null;return e&&(e.coachName||e.coach||e.coachProfile&&e.coachProfile.name)||""}catch(e){return""}},S=(e,a=!1)=>{var r=[];try{r.push(`You logged **${e.activeDays}/7** active days this week.`),e.workouts>0&&r.push(`Strength/Workout days: **${e.workouts}**.`),e.yoga>0&&r.push(`Mobility/Yoga days: **${e.yoga}**.`),e.nutrition>0&&r.push(`Nutrition logging days: **${e.nutrition}**.`),e.recovery>0&&r.push(`Recovery check-ins: **${e.recovery}**.`),e.secondary>0&&r.push(`You added **${e.secondary}** secondary activities.`),e.streak>=3&&r.push(`Nice streak: **${e.streak}** days in a row (within this week).`),e.activeDays<=2?r.push("Next week suggestion: aim for **3\u20134** active days to build consistency."):r.push("Next week suggestion: keep the same cadence and add **1** quality recovery day."),a&&r.push("Coach-aware: if you add extra sessions, keep them light so they don\u2019t conflict with your assigned plan.")}catch(c){}return r},u="__fof_weekly_suggestions_dismiss_v1",$=()=>{try{var e=localStorage.getItem(u),a=e?JSON.parse(e):{};return a&&typeof a=="object"?a:{}}catch(e){return{}}},tt=e=>{try{localStorage.setItem(u,JSON.stringify(e||{}))}catch(a){}},ue=(e,a)=>{try{var r=$();return!!(r&&r[e]&&r[e][a])}catch(r){return!1}},Ie=(e,a)=>{try{var r=$();r[e]=r[e]||{},r[e][a]=!0,tt(r)}catch(r){}},fe=e=>{var a={LOW:0,MID:0,HIGH:0,UNKNOWN:0};try{(e||[]).forEach(r=>{var c=String(r.zone||r.capacityZone||r.readinessZone||"").toUpperCase();c==="LOW"||c==="MID"||c==="HIGH"?a[c]+=1:a.UNKNOWN+=1})}catch(r){}return a},B=(e,a={})=>{var r=[];try{var c=e&&e.days?e.days:[],h=Number((e==null?void 0:e.workouts)||0),V=Number((e==null?void 0:e.yoga)||0),de=Number((e==null?void 0:e.nutrition)||0),M=Number((e==null?void 0:e.recovery)||0),De=Number((e==null?void 0:e.activeDays)||0),Ae=Number((e==null?void 0:e.secondary)||0),Oe=c.reduce((gt,_e)=>gt+Number(_e.secondaryOverrides||0),0),N=fe(c),Ne=N.LOW>=3,G=N.HIGH>=3,we=N.UNKNOWN>=4;if(De===0)return[];De>=5&&(Ne||Oe>=1)||h>=4&&Ne?r.push({type:"RECOVERY",confidence:we?"MEDIUM":"HIGH",title:"Recovery recommended",message:"Your week had high load with low-capacity signals. Next week, add 1 recovery day or reduce volume slightly.",rationale:[Ne?"Several low-capacity days this week":null,h>=4?"High strength frequency":null,Oe>=1?"You pushed through a conflict/override":null].filter(Boolean)}):De>=6&&!G&&r.push({type:"DELOAD",confidence:we?"LOW":"MEDIUM",title:"Consider a light deload",message:"You stayed very active this week. A lighter week can help you recover and progress.",rationale:["Very high activity frequency",Ne?"Low-capacity days appeared":null].filter(Boolean)}),De>=4&&G&&!Ne&&r.push({type:"VOLUME_UP",confidence:we?"MEDIUM":"HIGH",title:"Small progression available",message:"You were consistent and had high-capacity days. You can increase volume slightly next week (e.g., +1 set on main lifts or +5\u201310% time).",rationale:["Several high-capacity days","Consistent weekly execution"]}),V>=4&&h<=1?r.push({type:"FOCUS_SHIFT",confidence:"MEDIUM",title:"Balance strength & mobility",message:"You logged a lot of mobility/yoga. If strength is a goal, add 1\u20132 strength sessions next week.",rationale:["Mobility volume is high","Strength volume is low"]}):h>=4&&V===0&&r.push({type:"FOCUS_SHIFT",confidence:"LOW",title:"Add mobility support",message:"You trained strength frequently. Consider adding 1 short mobility session to support recovery.",rationale:["High strength frequency","No mobility logged"]});var $t={HIGH:3,MEDIUM:2,LOW:1};return r.sort((gt,_e)=>($t[_e.confidence]||0)-($t[gt.confidence]||0)),r.slice(0,2)}catch(c){return r.slice(0,2)}},X=({open:e,onClose:a,anchorKey:r=null})=>{if(!e)return null;var c=React.useMemo(()=>{try{return window.__fof_localDateKey?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10)}catch(re){return new Date().toISOString().slice(0,10)}},[]),h=React.useMemo(()=>zr(r||c),[r,c]),V=React.useMemo(()=>Array.from({length:7}).map((re,Z)=>ol(h,Z)),[h]),de=React.useMemo(()=>{var re=V.map(at=>({k:at,...nl(at)})),Z=re.filter(at=>at.hasWorkout).length,Qe=re.filter(at=>at.hasYoga).length,nt=re.filter(at=>at.hasNutrition).length,Lt=re.filter(at=>at.hasRecovery).length,ze=re.filter(at=>at.any).length,Le=re.reduce((at,Pe)=>at+(Pe.secondaryAdds||0),0);var se=0;for(var at=re.length-1;at>=0;at--){var Pe=re[at].k;if(!(String(Pe)>String(c)))if(re[at].any)se+=1;else break}return{days:re,workouts:Z,yoga:Qe,nutrition:nt,recovery:Lt,activeDays:ze,secondary:Le,streak:se}},[V,c]),M=React.useMemo(()=>s(),[]),De=React.useMemo(()=>x(),[]),Ae=React.useMemo(()=>S(de,M),[de,M]),[Oe,N]=React.useState(0),[Ne,G]=React.useState(null),we=React.useMemo(()=>{try{return B(de,{})}catch(re){return[]}},[de]),$t=React.useMemo(()=>{try{return(we||[]).filter(re=>re&&!ue(h,re.type))}catch(re){return we||[]}},[we,h,Oe]),gt=re=>{try{Ie(h,re)}catch(Z){}try{N(Z=>Z+1)}catch(Z){}},_e=()=>{try{window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay("ADAPTIVE_SUGGESTIONS_INFO_SHEET_V1",{from:"WEEKLY_SUMMARY_V1"}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"ADAPTIVE_SUGGESTIONS_INFO_SHEET_V1",props:{from:"WEEKLY_SUMMARY_V1"}}}))}catch(re){}},ve=typeof window!="undefined"&&window.CDEPOverlayShell?window.CDEPOverlayShell:null,me=({children:re})=>ve?React.createElement(ve,{title:"Weekly Summary",onClose:a},re):React.createElement("div",{className:"fixed inset-0 z-[999] flex items-end justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:a}),React.createElement("div",{className:"relative mb-[max(12px,env(safe-area-inset-bottom))] w-[92vw] max-w-[680px] rounded-3xl border border-white/12 bg-[#0B0F1A]/95 p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-black text-[16px]"},"Weekly Summary"),React.createElement("button",{onClick:a,className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center"},React.createElement("i",{"data-lucide":"x",className:"w-4 h-4 text-white/75"}))),re)),j=React.useMemo(()=>{try{var re=Fn(h),Z=Fn(ol(h,6)),Qe=re.toLocaleDateString(void 0,{month:"short",day:"numeric"}),nt=Z.toLocaleDateString(void 0,{month:"short",day:"numeric"});return`${Qe} \u2013 ${nt}`}catch(re){return""}},[h]),je=()=>{try{window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay("WEEKLY_REVIEW_V1",{from:"WEEKLY_SUMMARY_V1",anchorKey:h}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WEEKLY_REVIEW_V1",props:{from:"WEEKLY_SUMMARY_V1",anchorKey:h}}}))}catch(re){}};return React.createElement(me,null,$t&&$t.length>0?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 font-extrabold uppercase tracking-[0.22em]"},"Suggestions for next week"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 font-semibold"},"Suggest-only. We won\u2019t change your plan.")),React.createElement("button",{type:"button",onClick:_e,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[11px] text-white/80 font-extrabold"},"How it works")),React.createElement("div",{className:"mt-3 space-y-3"},($t||[]).map(re=>{var Z=String(re.confidence||"LOW").toUpperCase(),Qe=Ne===re.type;return React.createElement("div",{key:re.type,className:"rounded-3xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[13px] text-white/90 font-black"},re.title||"Suggestion"),React.createElement("div",{className:"px-2 py-0.5 rounded-xl border border-white/12 bg-white/5 text-[10px] text-white/70 font-black"},Z)),React.createElement("div",{className:"mt-1 text-[12px] text-white/75 font-semibold leading-snug"},re.message)),React.createElement("button",{type:"button",onClick:()=>gt(re.type),className:"shrink-0 h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center",title:"Dismiss"},React.createElement("i",{"data-lucide":"x",className:"w-4 h-4 text-white/70"}))),Array.isArray(re.rationale)&&re.rationale.length>0?React.createElement("div",{className:"mt-2"},React.createElement("button",{type:"button",onClick:()=>G(Qe?null:re.type),className:"text-[11px] text-white/70 font-extrabold underline underline-offset-4"},Qe?"Hide why":"Why this?"),Qe?React.createElement("ul",{className:"mt-2 space-y-1 text-[11px] text-white/65 font-semibold"},re.rationale.map((nt,Lt)=>React.createElement("li",{key:Lt},"\u2022 ",nt))):null):null)}))):null,React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 font-extrabold uppercase tracking-[0.22em]"},"This week"),React.createElement("div",{className:"mt-1 text-white font-black text-[18px] tracking-tight"},j),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 font-semibold"},"A structured recap based on your logs. Not chat. No guesswork.")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] text-white/70 font-black uppercase tracking-[0.22em]"},"Summary"),React.createElement("ul",{className:"mt-3 space-y-2 text-[13px] text-white/85 leading-relaxed"},Ae.map((re,Z)=>React.createElement("li",{key:Z,className:"flex gap-2"},React.createElement("span",{className:"mt-[6px] inline-block h-1.5 w-1.5 rounded-full bg-white/60"}),React.createElement("span",{dangerouslySetInnerHTML:{__html:String(re).replace(/\*\*(.+?)\*\*/g,"<b>$1</b>")}}))))),M?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 font-extrabold uppercase tracking-[0.22em]"},"Coach note"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80 font-extrabold"},De?`Coach: ${De}`:"Coach: linked"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 font-semibold leading-snug"},"This is a stub slot for coach feedback. Next stage can add real messaging integration."),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Coach message stub."}}))}catch(re){}},className:"mt-3 w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"Message coach")):null,React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:je,className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"Back to Review"),React.createElement("button",{type:"button",onClick:()=>{try{a&&a()}catch(re){}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"Close"))))};try{window.WeeklySummarySheetV1=X}catch(e){}var ne=({open:e,onClose:a})=>{if(!e)return null;var r=typeof window!="undefined"&&window.CDEPOverlayShell?window.CDEPOverlayShell:null;return React.createElement(({children:h})=>r?React.createElement(r,{title:"How suggestions work",onClose:a},h):React.createElement("div",{className:"fixed inset-0 z-[999] flex items-end justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:a}),React.createElement("div",{className:"relative mb-[max(12px,env(safe-area-inset-bottom))] w-[92vw] max-w-[680px] rounded-3xl border border-white/12 bg-[#0B0F1A]/95 p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-black text-[16px]"},"How suggestions work"),React.createElement("button",{onClick:a,className:"h-9 w-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center"},React.createElement("i",{"data-lucide":"x",className:"w-4 h-4 text-white/75"}))),h)),null,React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/75 font-semibold leading-snug"},"These suggestions are ",React.createElement("b",null,"deterministic")," and based on your weekly logs (workouts, mobility, nutrition, recovery) and capacity trends when available. They ",React.createElement("b",null,"do not")," auto-change your plan."),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-black"},"Signals we use"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/70 font-semibold"},React.createElement("li",null,"\u2022 Active days and streak"),React.createElement("li",null,"\u2022 Strength vs mobility balance"),React.createElement("li",null,"\u2022 Secondary activity conflicts/overrides"),React.createElement("li",null,"\u2022 Capacity zone distribution (Low/Mid/High) when present"))),React.createElement("button",{type:"button",onClick:a,className:"w-full px-4 py-3 rounded-3xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85 font-extrabold"},"Got it")))};try{window.AdaptiveSuggestionsInfoSheetV1=ne}catch(e){}try{window.WeeklyReviewSheetV1=i}catch(e){}var W=({overlay:e,onClose:a,onAfterAction:r})=>{var Ae,Oe;if(!e)return null;var c=e.key,h=e.props||{},de=String(c||"").toUpperCase();if(de.includes("WEEKLY_REVIEW")){var N=typeof window!="undefined"&&window.WeeklyReviewSheetV1?window.WeeklyReviewSheetV1:typeof i!="undefined"?i:null;if(N)return React.createElement(N,{open:!0,anchorKey:h&&(h.anchorKey||h.dateKey)?h.anchorKey||h.dateKey:null,onClose:a})}if(de.includes("WEEKLY_SUMMARY")){var N=typeof window!="undefined"&&window.WeeklySummarySheetV1?window.WeeklySummarySheetV1:typeof X!="undefined"?X:null;if(N)return React.createElement(N,{open:!0,anchorKey:h&&(h.anchorKey||h.dateKey)?h.anchorKey||h.dateKey:null,onClose:a})}if(c==="RECOVERY_ACTIONS_V1"){var N=typeof window!="undefined"&&window.RecoveryActionsSheetV1?window.RecoveryActionsSheetV1:null;if(N)return React.createElement(N,{open:!0,from:h&&h.from?h.from:"OVERLAY",onClose:a})}if(c==="NUTRITION_WEEKLY_SUMMARY_V1"){var N=typeof window!="undefined"&&window.NutritionWeeklySummarySheetV1?window.NutritionWeeklySummarySheetV1:null;if(N)return React.createElement(N,{open:!0,from:h&&h.from?h.from:"OVERLAY",onClose:a})}if(c==="PAYWALL_SHEET_V1")return React.createElement(td,{open:!0,featureKey:h.featureKey||"Premium Feature",meta:h.meta||{},onClose:a});if(c==="SHARE_EXPORT_SHEET_V1")return React.createElement(bl,{open:!0,payload:h&&h.payload?h.payload:h||{},onClose:a});if(c==="ADAPTIVE_SUGGESTIONS_INFO_SHEET_V1")return React.createElement(ne,{open:!0,onClose:a});if(c==="REFERRAL_SHEET_V1")return React.createElement(El,{open:!0,code:h.code||"FOF-TRIAL",onClose:a});if(c==="UPGRADE_PROMPT_SHEET_V1")return React.createElement(Nr,{open:!0,reason:h.reason||h.from||"UPGRADE",onClose:a});if(c==="DunningFlow_DF_Client_Unlock_Triage"||c==="DF_Client_Unlock_Triage"||c==="DUNNING_UNLOCK_TRIAGE"||c==="IC_Payment_Nudge_Banner_NEW"){var N=typeof window!="undefined"&&window.__fof_entitlements?window.__fof_entitlements:h.ent||h.entitlements||{};return React.createElement(wn,{open:!0,ent:N,onClose:a,onResolved:Ne=>{try{r&&r({key:"DUNNING_RESOLVED",meta:{entitlements:Ne}})}catch(G){}}})}if(c==="TRIAL_EXPIRED_LADDER_SHEET_V1"||c==="IC_Trial_Expired_Ladder"||c==="IC_Ladder"){var N=typeof window!="undefined"&&window.__fof_entitlements?window.__fof_entitlements:h.ent||h.entitlements||{};return React.createElement(fr,{open:!0,ent:N,onClose:a,onUpgrade:()=>{try{a&&a()}catch(Ne){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"IC_Upgrade_Options_Router",props:{from:"TRIAL_EXPIRED_LADDER"}}}))}catch(Ne){}},onContinueFree:()=>{try{var G={...window.__FOF_CLIENT_CONTEXT||{}||{},tier:"FREE"};window.__FOF_CLIENT_CONTEXT=G}catch(Ne){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Continuing on Free (demo)."}}))}catch(Ne){}try{a&&a()}catch(Ne){}}})}if(c==="Discovery_Hub_DH_Entry"||c==="IC_Discovery_Hub")return React.createElement(Vl,{open:!0,from:h.from||h.source||"APP",onClose:a});if(c==="RehabHome_Module"||c==="LC_RehabHome_Module"||c==="REHAB_PROMs_HUB_SHEET_V1")return React.createElement(sd,{open:!0,onClose:a,onSendToCoach:N=>{try{var Ne=`Rehab/PROMs: ${N.area} pain ${N.score}/10. ${N.note?"Note: "+N.note:""}`;if(typeof window.__fof_writeCoachChat=="function"){var G=typeof Xa=="function"?Xa()||[]:[],we=[...Array.isArray(G)?G:[],{id:xi(),role:"user",text:Ne,ts:Date.now()}];window.__fof_writeCoachChat(we);try{window.dispatchEvent(new CustomEvent("flowofit:coachChatUpdated"))}catch($t){}}}catch(Ne){}}});if(c==="PROFILE_HOME")return React.createElement(mo,{open:!0,onClose:a});if(c==="GOLD_PLAN_PREVIEW_SHEET_V1")return React.createElement(Ud,{open:!0,proposal:h.proposal||null,onClose:a,onEditInputs:()=>{try{a&&a()}catch(N){}try{var N=window.__fof_openGoldInput;if(typeof N=="function")return setTimeout(()=>{try{N()}catch(Ne){}},0)}catch(N){}try{setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openGoldInput"))}catch(N){}},0)}catch(N){}}});if(c==="QUICK_LOG_SHEET_V1")return React.createElement(ad,{open:!0,initialKind:h.initialKind||"WORKOUT",dateKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="FOOD_ADD_SHEET_V1")return React.createElement(Nl,{open:!0,dayKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="FOOD_ENTRY_DETAIL_SHEET_V1")return React.createElement(ot,{open:!0,dayKey:h.dateKey||null,entryId:h.entryId||null,onClose:a});if(c==="NUTRITION_ACTIONS_SHEET_V1")return React.createElement(Nt,{open:!0,scope:h.scope||"DAY",dayKey:h.dateKey||null,mealKey:h.mealKey||null,onClose:a});if(c==="QUICK_ADD_MACROS_SHEET_V1")return React.createElement(U,{open:!0,dayKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="SAVED_MEALS_SHEET_V1")return React.createElement(Q,{open:!0,dayKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="CREATE_MEAL_SHEET_V1")return React.createElement(w,{open:!0,dayKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="CREATE_RECIPE_SHEET_V1")return React.createElement(L,{open:!0,dayKey:h.dateKey||null,preset:h.preset||null,onClose:a});if(c==="BARCODE_STUB_SHEET_V1")return React.createElement(ut,{open:!0,onClose:a});if(c==="WORKOUT_VIEWER_SHEET_V1")return React.createElement(ht,{open:!0,item:h.item||null,onClose:a});if(c==="FILTER_SHEET_V1")return React.createElement(wd,{open:!0,context:h.context||"GENERIC",initial:h.initial||{},onClose:a});if(c==="NUTRITION_DAY_HISTORY_SHEET_V1"){var N=h&&(h.dayKey||h.dateKey)?String(h.dayKey||h.dateKey):"",Ne="__fof_nutrition_events_v1";var G=[];try{var we=localStorage.getItem(Ne),$t=we?JSON.parse(we):[];G=(Array.isArray($t)?$t:[]).filter(_e=>_e&&String(_e.dk)===String(N)).sort((_e,ve)=>Number(ve.ts||0)-Number(_e.ts||0))}catch(we){G=[]}return React.createElement(Ko,{title:"Nutrition \u2022 "+(N||"History"),onClose:a},React.createElement("div",{className:"space-y-2"},G.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/70 font-bold"},"No entries found for this day."):G.map(we=>{var ve,me,j,je,re,Z,Qe;var $t=Number((je=(j=(ve=we.calories)!=null?ve:we.kcal)!=null?j:(me=we==null?void 0:we.payload)==null?void 0:me.calories)!=null?je:0)||0,gt=Number((Qe=(Z=we.p)!=null?Z:(re=we==null?void 0:we.payload)==null?void 0:re.protein)!=null?Qe:0)||0,_e=String(we.name||we.title||we.type||"Meal");return React.createElement("button",{key:we.id,type:"button",onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("FOOD_ENTRY_DETAIL_SHEET_V1",{dateKey:N,entryId:we.id}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"FOOD_ENTRY_DETAIL_SHEET_V1",props:{dateKey:N,entryId:we.id}}}))}catch(nt){}},className:"w-full text-left rounded-2xl border border-white/10 bg-black/25 hover:bg-black/30 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-black text-white/90 truncate"},_e),React.createElement("div",{className:"mt-1 text-[11px] text-white/60 font-semibold"},Math.round($t)," kcal \u2022 ",Math.round(gt),"g protein")),React.createElement("div",{className:"text-[10px] text-white/50 font-black"},new Date(Number(we.ts||0)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))))})))}if(c==="WK_PRECHECK_EQUIP"){var N=h.dateKey||null,Ne="fof_wk_precheck_done_v1::",G="fof_wk_precheck_equip_v1",we=(me,j)=>{try{localStorage.setItem(me,JSON.stringify(j))}catch(je){}},$t=(me,j=null)=>{try{var je=localStorage.getItem(me);return je?JSON.parse(je):j}catch(je){return j}},[gt,_e]=React.useState($t(G,{gym:!0,dumbbells:!0,barbell:!1,machines:!0,bands:!1})),ve=me=>_e(j=>({...j||{},[me]:!(j||{})[me]}));return React.createElement(Ko,{title:"Equipment Check",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"What equipment do you have access to today?"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"This helps your coach plan sessions that fit your setup.")),React.createElement("div",{className:"grid grid-cols-2 gap-2"},[{k:"gym",t:"Full gym",i:"Dumbbell"},{k:"dumbbells",t:"Dumbbells",i:"Dumbbell"},{k:"barbell",t:"Barbell",i:"Minus"},{k:"machines",t:"Machines",i:"Activity"},{k:"bands",t:"Bands",i:"Link"}].map(me=>React.createElement("button",{key:me.k,onClick:()=>ve(me.k),className:"rounded-3xl border px-4 py-4 text-left active:scale-[0.99] transition "+((gt||{})[me.k]?"border-white/25 bg-white/10":"border-white/10 bg-white/5")},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(gi,{name:me.i,size:16,className:"text-white/80"}),React.createElement("div",{className:"text-[12px] font-semibold text-white"},me.t))))),React.createElement("div",{className:"pt-2 space-y-2"},React.createElement("button",{className:"w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-black active:scale-[0.99]",onClick:()=>{we(G,gt||{});try{a&&a()}catch(me){}setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WK_PRECHECK_DIFFICULTY",props:{dateKey:N}}}))}catch(me){}},0)}},"Continue"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>{try{localStorage.setItem(Ne+String(N||"today"),"1")}catch(me){}try{a&&a()}catch(me){}setTimeout(()=>{try{window.__fof_openers&&window.__fof_openers.openWorkoutLogger&&window.__fof_openers.openWorkoutLogger(N,{skipPrecheck:!0})}catch(me){}},0)}},"Skip (just start)"))))}if(c==="WK_PRECHECK_DIFFICULTY"){var N=h.dateKey||null,we=((je,re=null)=>{try{var Z=localStorage.getItem(je);return Z?JSON.parse(Z):re}catch(Z){return re}})("fof_wk_precheck_equip_v1",{}),$t=String(N||"today")+"|"+JSON.stringify(we||{});var gt=0;for(var je=0;je<$t.length;je++)gt=(gt<<5)-gt+$t.charCodeAt(je),gt|=0;var _e=6+Math.abs(gt)%4,ve=we&&we.gym?-1:0,me=Math.max(1,Math.min(10,_e+ve)),j=me>=9?"Very hard":me>=7?"Hard":me>=5?"Moderate":"Light";return React.createElement(Ko,{title:"Difficulty Forecast",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Forecast for today"),React.createElement("div",{className:"mt-1 text-[16px] font-black text-white"},j," ",React.createElement("span",{className:"text-white/50 font-semibold"},"(",me,"/10)")),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Based on your setup + today\u2019s plan volume. You can still modify before starting.")),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4 text-left active:scale-[0.99]",onClick:()=>{try{a&&a()}catch(je){}setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WK_PRECHECK_DECISION",props:{dateKey:N,score:me,label:j}}}))}catch(je){}},0)}},React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Continue"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Proceed to options")),React.createElement("button",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4 text-left active:scale-[0.99]",onClick:()=>{try{a&&a()}catch(je){}setTimeout(()=>{try{window.__fof_openers&&window.__fof_openers.openWorkoutLogger&&window.__fof_openers.openWorkoutLogger(N,{skipPrecheck:!0})}catch(je){}},0)}},React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Start now"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Skip modifications")))))}if(c==="WK_PRECHECK_DECISION"){var N=h.dateKey||null,Ne="fof_wk_precheck_done_v1::",G=Number(h.score||0),we=h.label||"";return React.createElement(Ko,{title:"Before you start",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Forecast"),React.createElement("div",{className:"mt-1 text-[14px] font-black text-white"},we," ",React.createElement("span",{className:"text-white/50 font-semibold"},"(",G,"/10)"))),React.createElement("button",{className:"w-full rounded-3xl border border-white/10 bg-white/5 px-4 py-4 text-left active:scale-[0.99]",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Modify (stub)",message:"Workout modification tools will be wired next (substitutions / volume adjust)."}}))}catch($t){}}},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Modify workout"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Swap exercises / adjust volume before starting")),React.createElement("button",{className:"w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-black active:scale-[0.99]",onClick:()=>{try{localStorage.setItem(Ne+String(N||"today"),"1")}catch($t){}try{a&&a()}catch($t){}setTimeout(()=>{try{window.__fof_openers&&window.__fof_openers.openWorkoutLogger&&window.__fof_openers.openWorkoutLogger(N,{skipPrecheck:!0})}catch($t){}},0)}},"Proceed & Start")))}if(c==="CHECKIN_SHEET")return React.createElement(jn,{open:!0,onClose:a,onSave:N=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Check-in saved",message:"Sent to your coach."}}))}catch(Ne){}try{r&&r("CHECKIN_SAVED",N)}catch(Ne){}}});if(c==="AI_COACH_SHEET_V1"){var N=String(h.tier||(window.__fof_entitlements&&window.__fof_entitlements.tier?window.__fof_entitlements.tier:"FREE")||"FREE").toUpperCase();return N==="PAID"||N==="TRIAL"||N==="AI"||N==="PREMIUM"||N==="PRO"?React.createElement(In,{open:!0,onClose:a,onMessageCoach:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"COACH"}}))}catch(G){}try{a&&a()}catch(G){}}}):React.createElement(td,{open:!0,featureKey:"AI_COACH",onClose:a})}if(c==="MODULE_MORE_SHEET_V1")return React.createElement(yr,{open:!0,tier:h.tier||(window.__fof_entitlements&&window.__fof_entitlements.tier?window.__fof_entitlements.tier:"FREE"),onClose:a,onGoLibrary:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"LIBRARY"}}))}catch(N){}},onGoCoach:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"COACH"}}))}catch(N){}},onGoInsights:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"INSIGHTS"}}))}catch(N){}},onOpenPaywall:N=>{try{_n&&_n(N||"COMMAND_BAR")}catch(Ne){}}});if(new Set(["NODE_STUB","IC_Upgrade_Options_Router","IC_Upgrade_Options","Upgrade_Options","UpgradeOptions","DunningFlow_DF_Client_Unlock_Triage","DF_Client_Unlock_Triage","DUNNING_UNLOCK_TRIAGE","YC_Access_Check","YC_Session_Selection","YC_Limited_Lib","YC_Independent_Lib","YC_Filter_NEW","YC_Perform","YC_Audio_Choice_NEW","YC_Do_Session","YC_AR_Pose_Guide_NEW","YC_Log","YC_XP_Awarded","YC_Exit_Router","YC_Upsell_Prompt","Payments_Module_PM_Entry"]).has(c)){var De=function({nodeId:Ke,from:ua,isLinked:ga,persona:Vi,onClose:$i,navTo:Ya}){var Zt=typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10),Ki=Number(typeof xo!="undefined"?xo:typeof capacityScore!="undefined"?capacityScore:0)||0,Fa=Ki<=33?"LOW":Ki<=66?"MID":"HIGH",Ni=React.useMemo(()=>_o(Zt),[Zt]),[ys,Ps]=React.useState(null),[Ms,o]=React.useState(null),d=()=>{try{Ps(null),o(null)}catch(F){}},m=F=>{var D=String(F||"").toUpperCase();Ps(D),o(ki({primaryType:Ni,secondaryType:D,zone:Fa}));try{typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Zt,"SECONDARY_CONFLICT_CHECKED",{primaryType:Ni,secondaryType:D,zone:Fa},{module:"SECONDARY_CONFLICT",from:ua||Ke},"ui")}catch(k){}},E=(F={})=>{var k;var D=!!F.override;try{typeof window.__fof_addEvent=="function"&&window.__fof_addEvent(Zt,"SECONDARY_ACTIVITY_ADD",{primaryType:Ni,secondaryType:ys,zone:Fa,decisionLevel:(Ms==null?void 0:Ms.level)||"SAFE",override:D,suggested:((k=Ms==null?void 0:Ms.suggestion)==null?void 0:k.type)||null},{module:"SECONDARY_CONFLICT",from:ua||Ke},"ui")}catch(T){}try{typeof __fof_toast=="function"&&__fof_toast(D?"Added (override logged).":"Secondary activity added.")}catch(T){}try{$i&&$i()}catch(T){}},g=()=>{var D;var F=(D=Ms==null?void 0:Ms.suggestion)==null?void 0:D.type;F&&m(String(F).toUpperCase())},f=F=>{var D=String(F||"SAFE").toUpperCase();return React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-black "+(D==="SAFE"?"border-emerald-400/25 bg-emerald-400/10 text-emerald-200":D==="RISK"?"border-rose-400/25 bg-rose-400/10 text-rose-200":"border-amber-400/25 bg-amber-400/10 text-amber-200")},D)};return React.createElement(Ko,{title:"Add Secondary Activity",onClose:$i},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Secondary Activity Conflict Check"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},Ni?`Primary today: ${qs(Ni)} \u2022 Capacity: ${Fa}`:`No primary detected yet \u2022 Capacity: ${Fa}`)),React.createElement("span",{className:"shrink-0 text-[10px] font-black px-2 py-1 rounded-full bg-white/8 border border-white/10 text-white/70"},ga?"LINKED":"INDEPENDENT")),ys?React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/30 px-4 py-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Result"),f(Ms==null?void 0:Ms.level)),React.createElement("div",{className:"mt-2 text-[14px] font-extrabold text-white"},(Ms==null?void 0:Ms.title)||"Check complete"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},(Ms==null?void 0:Ms.message)||"Review and proceed."),Ms!=null&&Ms.suggestion?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-3"},React.createElement("div",{className:"text-[11px] font-black text-white/65"},"Suggested alternative"),React.createElement("div",{className:"mt-1 text-[12px] text-white"},Ms.suggestion.label),React.createElement("button",{type:"button",onClick:g,className:"mt-2 w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-2 text-[12px] font-extrabold text-white active:scale-[0.99]"},"Use suggestion")):null),React.createElement("div",{className:"grid grid-cols-1 gap-2"},React.createElement("button",{type:"button",onClick:()=>E({override:!1}),className:"w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold active:scale-[0.99]"},"Proceed"),String((Ms==null?void 0:Ms.level)||"SAFE").toUpperCase()==="RISK"&&React.createElement("button",{type:"button",onClick:()=>E({override:!0}),className:"w-full rounded-2xl border border-rose-300/25 bg-rose-400/10 px-4 py-3 text-[13px] font-extrabold text-rose-200 active:scale-[0.99]"},"Proceed anyway (log override)"),React.createElement("button",{type:"button",onClick:d,className:"w-full rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-bold text-white/85 active:scale-[0.99]"},"Choose different activity"),React.createElement("button",{type:"button",onClick:()=>{try{$i&&$i()}catch(F){}},className:"w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/70 active:scale-[0.99]"},"Cancel")),ga?React.createElement("div",{className:"text-[11px] text-white/55"},"Linked mode: this does not change your coach plan automatically. If you proceed, it is logged in your timeline."):React.createElement("div",{className:"text-[11px] text-white/55"},"Independent mode: this is advisory. Proceeding logs the choice in your timeline.")):React.createElement("div",{className:"mt-4 grid grid-cols-1 gap-2"},[{t:"STRENGTH",icon:"Dumbbell",label:"Strength"},{t:"YOGA",icon:"Lotus",label:"Yoga / Mobility"},{t:"SPORT",icon:"Activity",label:"Sport / Cardio"}].map(F=>React.createElement("button",{key:F.t,type:"button",onClick:()=>m(F.t),className:"touch-manipulation rounded-2xl border border-white/12 bg-black/30 hover:bg-white/8 px-4 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center"},React.createElement(gi,{name:F.icon,size:18})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},F.label),React.createElement("div",{className:"text-[11px] text-white/60"},"Tap to run conflict check")))))))))};var N=c==="NODE_STUB"?h.nodeId||"":c,Ne=h.label||N||"Flow",G=h.ctx||{},we=(G.primaryLabel||"Continue").toString(),$t=G.nextNodeId||null,gt="fof_entitlements_v1",_e=()=>{try{var Ke=localStorage.getItem(gt);if(!Ke)return{tier:"FREE",subscriptionStatus:"ACTIVE"};var ua=JSON.parse(Ke);return{tier:ua.tier||"FREE",subscriptionStatus:ua.subscriptionStatus||"ACTIVE",trialStartAt:ua.trialStartAt||null,trialEndAt:ua.trialEndAt||null}}catch(Ke){return{tier:"FREE",subscriptionStatus:"ACTIVE"}}},[ve,me]=React.useState(_e);React.useEffect(()=>{try{localStorage.setItem(gt,JSON.stringify(ve))}catch(Ke){}try{window.__fof_entitlements=ve}catch(Ke){}},[ve]),React.useEffect(()=>{var Ke=()=>{try{me(_e())}catch(ua){}};try{window.addEventListener("flowofit:entitlementsUpdated",Ke)}catch(ua){}return()=>{try{window.removeEventListener("flowofit:entitlementsUpdated",Ke)}catch(ua){}}},[]);var j=(Ke,ua={})=>{try{a&&a()}catch(ga){}setTimeout(()=>{try{window.__fof_openNode&&window.__fof_openNode(Ke,ua)}catch(ga){}},0)},je=({title:Ke,subtitle:ua,onTap:ga,right:Vi,disabled:$i,icon:Ya="Zap",tone:Zt="default"})=>React.createElement("button",{type:"button",onClick:()=>{if(!$i)try{ga&&ga()}catch(Ki){}},className:["w-full text-left rounded-3xl border border-white/10 bg-white/5 px-4 py-4","active:scale-[0.99] transition",$i?"opacity-60":""].join(" ")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 h-10 w-10 shrink-0 rounded-2xl border border-white/10 bg-white/6 flex items-center justify-center"},React.createElement(gi,{name:Ya,size:18,className:"text-white/85"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white truncate"},Ke),ua?React.createElement("div",{className:"mt-1 text-[12px] text-white/60 leading-snug"},ua):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},Vi||React.createElement(gi,{name:"ChevronRight",size:18,className:"text-white/35"})))))),re=({children:Ke})=>React.createElement("span",{className:"inline-flex items-center rounded-full border border-white/12 bg-black/30 px-2.5 py-1 text-[11px] font-semibold text-white/80"},Ke),Z=()=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 px-4 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white/70"},"Account"),React.createElement("div",{className:"mt-0.5 text-[13px] font-semibold text-white truncate"},ve.tier," ",ve.tier==="TRIAL"?"Trial":ve.tier==="PAID"?"Member":"Free")),React.createElement(re,null,ve.subscriptionStatus||"ACTIVE")),ve.tier==="TRIAL"&&ve.trialEndAt?React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Trial ends: ",new Date(ve.trialEndAt).toLocaleDateString()):null);if(N==="GlobalCommandBar_Module_Entry"){try{a&&a()}catch(Ke){}try{window.dispatchEvent(new CustomEvent("flowofit:openCommandBar",{detail:{preset:""}}))}catch(Ke){}return null}if(N==="Referral_Program_RP1"||N==="IC_Referral"||N==="IC_Referral_Share_NEW")return React.createElement(El,{open:!0,code:(window.__FOF_CLIENT_CONTEXT||{}).referralCode||"FOF-TRIAL",onClose:a});if(N==="IC_Free_Upsell_Nudge_NEW"||N==="IC_Upgrade_Options"||N==="IC_Unlock_History_Button")return React.createElement(Nr,{open:!0,reason:String(N||"UPGRADE"),onClose:a});if(N==="IC_Choice")return React.createElement(Ko,{title:"Choose Your Mode",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Z,null),React.createElement(je,{title:"Continue Free",subtitle:"Access the free dashboard with limited features and upgrade options.",onTap:()=>{me({tier:"FREE",subscriptionStatus:"ACTIVE",trialStartAt:null,trialEndAt:null}),j("IC_Free_Dashboard",{from:"IC_Choice"})},right:React.createElement(re,null,"FREE")}),React.createElement(je,{title:"Start Trial",subtitle:"Unlock premium tiles for 14 days. Cancel anytime.",onTap:()=>j("IC_Start_Trial_NEW",{from:"IC_Choice"}),right:React.createElement(re,null,"TRIAL")}),React.createElement(je,{title:"I\u2019m Paid",subtitle:"Go to the paid dashboard (status checks apply).",onTap:()=>{me({...ve,tier:"PAID",subscriptionStatus:ve.subscriptionStatus||"ACTIVE"}),j("IC_Paid_Dashboard",{from:"IC_Choice"})},right:React.createElement(re,null,"PAID")}),React.createElement("div",{className:"pt-2"},React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>{try{a&&a()}catch(Ke){}}},"Close"))));if(N==="IC_Start_Trial_NEW")return React.createElement(Ko,{title:"Start Trial",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"14-day Premium Trial"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},"You\u2019ll unlock premium tiles (yoga full library, discovery, advanced insights) for 14 days."),React.createElement("ul",{className:"mt-3 space-y-1 text-[12px] text-white/65 list-disc pl-5"},React.createElement("li",null,"No dead ends \u2014 all premium tiles open real destinations"),React.createElement("li",null,"Manage your plan anytime in Upgrade Options"))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>{var ua=Date.now(),ga=ua+14*24*60*60*1e3;me({tier:"TRIAL",subscriptionStatus:"ACTIVE",trialStartAt:ua,trialEndAt:ga}),j("IC_Paid_Dashboard",{from:"IC_Start_Trial_NEW"})}},"Start Trial"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("IC_Choice",{from:"IC_Start_Trial_NEW"})},"Back to Choice")));var Qe=React.useMemo(()=>ve&&ve.yogaAddon?ve.yogaAddon:ve&&(ve.tier==="TRIAL"||ve.tier==="PAID")?"FULL":"LIMITED",[ve]),nt="fof_yoga_filters_v1",Lt=()=>{try{var Ke=localStorage.getItem(nt),ua=Ke?JSON.parse(Ke):null;return ua&&typeof ua=="object"?ua:{q:"",level:"ALL",duration:"ALL",style:"ALL"}}catch(Ke){return{q:"",level:"ALL",duration:"ALL",style:"ALL"}}},[ze,Le]=React.useState(Lt);React.useEffect(()=>{try{localStorage.setItem(nt,JSON.stringify(ze))}catch(Ke){}},[ze]);var se=React.useMemo(()=>[{id:"y1",title:"Morning Mobility Flow",mins:12,level:"BEGINNER",style:"MOBILITY",tags:["hips","spine"],premium:!1},{id:"y2",title:"Breath + Reset (Nervous System)",mins:10,level:"ALL",style:"RESTORE",tags:["breath","reset"],premium:!1},{id:"y7",title:"Desk Break \u2014 Neck & Shoulders",mins:8,level:"BEGINNER",style:"MOBILITY",tags:["posture","shoulders"],premium:!1},{id:"y8",title:"Recovery Stretch \u2014 Hips & Hamstrings",mins:14,level:"BEGINNER",style:"STRETCH",tags:["hips","hamstrings"],premium:!1},{id:"y9",title:"Box Breathing + Calm",mins:6,level:"ALL",style:"BREATH",tags:["calm","focus"],premium:!1},{id:"y10",title:"Foundation Flow \u2014 Core & Balance",mins:15,level:"INTERMEDIATE",style:"FOUNDATION",tags:["balance","core"],premium:!1},{id:"y11",title:"Evening Wind Down",mins:18,level:"ALL",style:"RESTORE",tags:["sleep","relax"],premium:!1},{id:"y12",title:"Spine Reset \u2014 Mobility",mins:16,level:"BEGINNER",style:"MOBILITY",tags:["spine","twists"],premium:!1},{id:"y3",title:"Power Vinyasa \u2014 Strength",mins:28,level:"INTERMEDIATE",style:"VINYASA",tags:["strength","sweat"],premium:!0},{id:"y4",title:"Deep Stretch \u2014 Hamstrings",mins:18,level:"BEGINNER",style:"STRETCH",tags:["legs"],premium:!0},{id:"y5",title:"Evening Restore (Sleep)",mins:20,level:"ALL",style:"RESTORE",tags:["sleep"],premium:!0},{id:"y6",title:"Core Stability + Balance",mins:16,level:"INTERMEDIATE",style:"FOUNDATION",tags:["core"],premium:!0},{id:"y13",title:"Power Flow \u2014 Athletic Conditioning",mins:32,level:"ADVANCED",style:"POWER",tags:["conditioning","full body"],premium:!0},{id:"y14",title:"Vinyasa Flow \u2014 Lower Body",mins:25,level:"INTERMEDIATE",style:"VINYASA",tags:["legs","mobility"],premium:!0},{id:"y15",title:"Mobility Deep Dive \u2014 Ankles & Hips",mins:22,level:"INTERMEDIATE",style:"MOBILITY",tags:["ankles","hips"],premium:!0},{id:"y16",title:"Restore \u2014 Parasympathetic Reset",mins:24,level:"ALL",style:"RESTORE",tags:["recovery","breath"],premium:!0}],[]);React.useEffect(()=>{try{window.__FOF_YOGA_CATALOG_V1=se}catch(Ke){}},[se]);var at=Number(typeof xo!="undefined"?xo:(Ae=window.readiness)!=null?Ae:0)||0,Pe=at<=33?"LOW":at<=66?"MID":"HIGH",Wt=React.useCallback(Ke=>{if(!Ke)return!1;var ua=String(Ke.style||"").toUpperCase(),ga=Number(Ke.mins||0)||0;return Pe==="LOW"?["RESTORE","STRETCH","MOBILITY"].includes(ua)&&ga<=20:Pe==="MID"?ga<=25&&!["VINYASA"].includes(ua):["VINYASA","FOUNDATION"].includes(ua)||ga>=18},[Pe]),oa=React.useCallback(Ke=>{var ua=(ze.q||"").trim().toLowerCase();return(Ke||[]).filter(ga=>{if(ze.level&&ze.level!=="ALL"&&ga.level!==ze.level||ze.style&&ze.style!=="ALL"&&ga.style!==ze.style)return!1;if(ze.duration&&ze.duration!=="ALL"){var Vi=ze.duration;if(Vi==="SHORT"&&!(ga.mins<15)||Vi==="MED"&&!(ga.mins>=15&&ga.mins<=25)||Vi==="LONG"&&!(ga.mins>25))return!1}return!(ua&&!(ga.title+" "+(ga.tags||[]).join(" ")+" "+ga.style+" "+ga.level).toLowerCase().includes(ua))})},[ze])(se).filter(Ke=>!Ke.premium).slice(0,8),Ra="fof_xp_v1",ri=()=>{try{return JSON.parse(localStorage.getItem(Ra)||'{"xp":0,"streak":0,"lastDateKey":null}')}catch(Ke){return{xp:0,streak:0,lastDateKey:null}}},[Da,Va]=React.useState(ri);React.useEffect(()=>{try{localStorage.setItem(Ra,JSON.stringify(Da))}catch(Ke){}},[Da]);var Y=(Ke,ua=null)=>{var ga=ua||new Date().toISOString().slice(0,10);Va(Vi=>{var $i=Vi||{xp:0,streak:0,lastDateKey:null};var Ya=$i.streak||0;return $i.lastDateKey!==ga&&(Ya=Math.max(1,Ya+1)),{xp:($i.xp||0)+(Ke||0),streak:Ya,lastDateKey:ga}})},ft=(Ke,ua)=>{try{var ga="fof_event_log_v1",Vi=JSON.parse(localStorage.getItem(ga)||"[]"),$i={id:"ev_"+Math.random().toString(36).slice(2)+"_"+Date.now(),dateKey:ua&&ua.dateKey?ua.dateKey:new Date().toISOString().slice(0,10),type:Ke,payload:ua||{},createdAt:Date.now(),source:"2D.4_YOGA"},Ya=[$i,...Vi].slice(0,500);return localStorage.setItem(ga,JSON.stringify(Ya)),$i}catch(ga){return null}},_a=(Ke={})=>{var ua=(Ke.from||Ke.returnTo||"").toString();return ua.includes("IC_Paid_Dashboard")?"IC_Paid_Dashboard":ua.includes("IC_Free_Dashboard")?"IC_Free_Dashboard":(Ke.dashboardType||"").toString().toUpperCase()==="YOGA"||Ke.yogaOnly?"YogaOnlyDashboard_YD1":null},Ja=({title:Ke,subtitle:ua,right:ga})=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},Ke),ua?React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},ua):null),ga?React.createElement("div",{className:"shrink-0"},ga):null)),Ui=({active:Ke,children:ua,onClick:ga})=>React.createElement("button",{type:"button",onClick:ga,className:["px-3 py-2 rounded-full border text-[12px] font-semibold",Ke?"bg-white/10 border-white/20 text-white":"bg-black/25 border-white/10 text-white/70"].join(" ")},ua);if(N==="YC_Access_Check"){var Ke=h.ctx||{},ga=(()=>{var Zt,Ki;try{var Fa=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext()||{}:window.__CLIENT_CONTEXT__||{},Ni=((Zt=Fa==null?void 0:Fa.entitlements)==null?void 0:Zt.yogaAccess)||((Ki=Fa==null?void 0:Fa.entitlements)==null?void 0:Ki.yogaAddon)||(Fa==null?void 0:Fa.yogaAccess)||(Fa==null?void 0:Fa.yogaAddon);if(Ni)return String(Ni).toUpperCase()}catch(Fa){}try{var Fa=localStorage.getItem("fof_yoga_access");if(Fa)return String(Fa).toUpperCase()}catch(Fa){}try{var Fa=localStorage.getItem("fof_entitlements_v1");if(Fa){var Ni=JSON.parse(Fa),ys=(Ni==null?void 0:Ni.yogaAccess)||(Ni==null?void 0:Ni.yogaAddon);if(ys)return String(ys).toUpperCase()}}catch(Fa){}try{var Fa=Ke&&(Ke.yogaAccess||Ke.yogaAddon)||Qe;if(Fa)return String(Fa).toUpperCase()}catch(Fa){}return"NONE"})(),Vi=ga==="FULL"?"FULL":ga==="LIMITED"?"LIMITED":"NONE",$i=ga==="FULL"?"Full access: on-demand library, filters, and logging.":ga==="LIMITED"?"Limited access: a small set of sessions. Upgrade for the full library.":"No yoga access yet. Add Yoga to unlock sessions.",Ya=()=>{try{typeof window.__fof_openPaywallStub=="function"&&window.__fof_openPaywallStub("YOGA_FULL",{from:"YC_Access_Check",yogaAccess:ga,tier:Di})}catch(Zt){}};return React.createElement(Ko,{title:"Yoga & Wellness",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Z,null),React.createElement(Ja,{title:"Yoga Access",subtitle:$i,right:React.createElement(re,null,Vi)}),ga==="FULL"?React.createElement(React.Fragment,null,React.createElement(je,{title:"Start a Yoga Session",subtitle:"Pick a session for today (smart defaults based on Capacity).",icon:"Sparkles",onTap:()=>{var Zt;return j("YC_Session_Selection",{...Ke,from:Ke.from||((Zt=h.ctx)==null?void 0:Zt.from)||"",access:"FULL"})},right:React.createElement(re,null,"START")}),React.createElement(je,{title:"Browse Full On\u2011Demand Library",subtitle:"Explore the complete catalog with filters and add to plan.",icon:"Library",onTap:()=>{var Zt;return j("YC_Independent_Lib",{...Ke,from:Ke.from||((Zt=h.ctx)==null?void 0:Zt.from)||""})},right:React.createElement(re,null,"FULL")})):null,ga==="LIMITED"?React.createElement(React.Fragment,null,React.createElement(je,{title:"Start a Yoga Session",subtitle:"Pick from the limited starter set. Upgrade for the full library.",icon:"Sparkles",onTap:()=>{var Zt;return j("YC_Session_Selection",{...Ke,from:Ke.from||((Zt=h.ctx)==null?void 0:Zt.from)||"",access:"LIMITED"})},right:React.createElement(re,null,"START")}),React.createElement(je,{title:"Browse Limited Yoga",subtitle:"See the full list of free sessions.",icon:"Library",onTap:()=>{var Zt;return j("YC_Limited_Lib",{...Ke,from:Ke.from||((Zt=h.ctx)==null?void 0:Zt.from)||""})},right:React.createElement(re,null,"LIMITED")}),React.createElement(je,{title:"Upgrade to Full Yoga & Wellness",subtitle:"Unlock the complete library, journeys, and premium sessions (demo checkout).",icon:"LockOpen",onTap:()=>{var Zt;return j("YC_Upsell_Prompt",{...Ke,from:Ke.from||((Zt=h.ctx)==null?void 0:Zt.from)||""})},right:React.createElement(re,null,"UPGRADE")})):null,ga==="NONE"?React.createElement(je,{title:"Add Yoga",subtitle:"Unlock Yoga & Wellness sessions and recovery programs.",icon:"LockOpen",onTap:()=>{Ya()},right:React.createElement(re,null,"ADD")}):null,React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>{var Zt=_a(Ke);if(Zt)j(Zt,{from:"YC_Access_Check"});else try{a&&a()}catch(Ki){}}},"Back")))}if(N==="YC_Upsell_Prompt"){var Ke=h.ctx||{};return React.createElement(Ko,{title:"Upgrade Yoga",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:"Upgrade to Full Yoga & Wellness Library?",subtitle:"Unlock all sessions, journeys, advanced filters, and pose-correction support.",right:React.createElement(re,null,"FULL")}),React.createElement(je,{title:"Yes \u2014 Upgrade Now",subtitle:"Proceed to demo checkout.",icon:"CreditCard",onTap:()=>j("Payments_Module_PM_Entry",{...Ke,offer:"YOGA_ADDON_FULL",from:Ke.from||""}),right:React.createElement(gi,{name:"ChevronRight",size:18,className:"text-white/35"})}),React.createElement(je,{title:"No Thanks",subtitle:"Continue with free access.",icon:"ArrowLeft",onTap:()=>j("YC_Library",{...Ke,from:Ke.from||""}),right:React.createElement(re,null,"FREE")})))}if(N==="DunningFlow_DF_Client_Unlock_Triage"||N==="DF_Client_Unlock_Triage"||N==="DUNNING_UNLOCK_TRIAGE"){var Ke=h.ctx||{},[ua,ga]=React.useState("");return React.createElement(Ko,{title:"Fix Payment",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-rose-400/25 bg-rose-400/10 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Payment required"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},"This is a demo-safe unlock flow. Enter last 4 digits to restore access.")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Card last 4"),React.createElement("input",{value:ua,onChange:$i=>ga(String($i.target.value||"").replace(/\D/g,"").slice(0,4)),inputMode:"numeric",placeholder:"1234",className:"mt-2 w-full rounded-2xl bg-black/30 border border-white/10 px-4 py-3 text-[14px] text-white outline-none"})),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>{try{var $i="fof_entitlements_v1",Ya=JSON.parse(localStorage.getItem($i)||"{}"),Zt={subscriptionStatus:"ACTIVE",...Ya,subscriptionStatus:"ACTIVE",last4:String(ua||"").slice(-4)||Ya.last4||null};localStorage.setItem($i,JSON.stringify(Zt)),window.__fof_entitlements=Zt}catch($i){}try{window.dispatchEvent(new CustomEvent("flowofit:entitlementsUpdated"))}catch($i){}try{eo&&eo("client.billing.unlock",{from:Ke.from||"DUNNING",reason:Ke.reason||"DUNNING_LOCKED"})}catch($i){}j("IC_Paid_Dashboard",{from:"DunningFlow_DF_Client_Unlock_Triage"})}},"Save & Restore Access")))}if(N==="Payments_Module_PM_Entry"){var Ke=h.ctx||{},ua=(Ke.offer||"YOGA_ADDON_FULL").toString();return React.createElement(Ko,{title:"Checkout",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Selected"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},"Full Yoga & Wellness Add\u2011On"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},"Includes full library access, journeys, and pose correction tooling (demo)."),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement(re,null,"Monthly"),React.createElement("div",{className:"text-[13px] font-extrabold text-white"},ua==="YOGA_ADDON_FULL"?"USD 9.99 / mo":"USD 0.00"))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>{try{var $i="fof_entitlements_v1",Ya=JSON.parse(localStorage.getItem($i)||"{}"),Zt={...Ya||{},yogaAddon:"FULL"},Ki=String(Ke&&Ke.reason?Ke.reason:"").toUpperCase();Ki==="IN_GRACE"||Ki==="DUNNING_LOCKED"||Ki==="UPDATE_PAYMENT"||Ki==="PAYMENT_FIX"?Zt.subscriptionStatus="ACTIVE":Zt.subscriptionStatus=Ya&&Ya.subscriptionStatus?Ya.subscriptionStatus:"ACTIVE",Zt.tier=Zt.tier||Ya&&Ya.tier||"PAID",localStorage.setItem($i,JSON.stringify(Zt)),window.__fof_entitlements=Zt;try{localStorage.setItem("FOF_ENT_GLOBAL",JSON.stringify(Zt))}catch(Fa){}try{localStorage.setItem("FOF_ENTITLEMENTS_V1",JSON.stringify(Zt))}catch(Fa){}try{window.__FOF&&window.__FOF.setEnt&&window.__FOF.setEnt(Zt)}catch(Fa){}}catch($i){}try{window.dispatchEvent(new CustomEvent("flowofit:entitlementsUpdated"))}catch($i){}try{eo&&eo("client.yoga.upgrade_complete",{offer:ua,reason:Ke&&Ke.reason?String(Ke.reason):null})}catch($i){}j("YC_Library",{...Ke,from:Ke.from||""})}},"Confirm & Unlock"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Library",{...Ke,from:Ke.from||""})},"Not now")))}if(N==="YC_Library"){try{if(window.__fof_openLibraryDeepLink){window.__fof_openLibraryDeepLink("YOGA",{source:h&&h.ctx&&h.ctx.from?String(h.ctx.from):"YC_Library"});try{a&&a()}catch(Ke){}return null}}catch(Ke){}return React.createElement(Ko,{title:"Opening Library\u2026",onClose:a},React.createElement("div",{className:"p-4 text-white/80 text-[13px]"},"Redirecting to Universal Library (Yoga)\u2026"))}if(N==="YC_Session_Selection"){var Ke=h.ctx||{},ua=String(Ke.access||Ke.yogaAccess||Ke.yogaAddon||Qe||"NONE").toUpperCase(),ga=ua==="FULL"||ua==="LIMITED"||ua==="NONE"?ua:"NONE";var Vi=null;try{var D=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext()||{}:window.__CLIENT_CONTEXT__||{};Vi=String(Ke.capacityZone||D.capacityZone||D.capacityBand||D.capacityZoneNow||"").toUpperCase()||null}catch(D){Vi=null}var Ya=(Array.isArray(se)?se:[]).filter(D=>D?ga==="FULL"||ga==="LIMITED":!1),[Zt,Ki]=React.useState(""),[Fa,Ni]=React.useState("ALL"),[ys,Ps]=React.useState("ALL"),[Ms,o]=React.useState("ALL"),d=D=>{var k=Number(D||0);return ys==="ALL"?!0:ys==="0-15"?k>0&&k<=15:ys==="16-30"?k>=16&&k<=30:ys==="31+"?k>=31:!0},m=D=>String(D||"").toLowerCase(),E=Ya.filter(D=>{var k=m(Zt).trim(),T=[D.title,D.style,D.level,...D.tags||[]].map(m).join(" ");return!(k&&!T.includes(k)||Fa!=="ALL"&&m(D.style)!==m(Fa)||Ms!=="ALL"&&m(D.level)!==m(Ms)||!d(D.mins))}),g=E.length?Vi==="LOW"?E.find(D=>/restore|mobility|breath/i.test(String(D.style||"")+" "+(D.tags||[]).join(" ")))||E[0]:Vi==="HIGH"&&E.find(D=>/power|flow/i.test(String(D.style||"")))||E[0]:null,f=Vi==="LOW"?"Capacity is LOW \u2014 choose Restore / Mobility or shorter sessions.":Vi==="HIGH"?"Capacity is HIGH \u2014 power flows are fine today.":"Pick a session. Capacity will still act as your safety modifier.",F=D=>j("YC_Perform",{...Ke,from:Ke.from||"",sessionId:D});return React.createElement(Ko,{title:"Yoga",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:"Yoga Session Selection",subtitle:f,right:React.createElement(re,null,ga==="FULL"?"FULL":ga==="LIMITED"?"LIMITED":"LOCKED")}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4 space-y-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Search"),React.createElement("input",{value:Zt,onChange:D=>Ki(D.target.value),placeholder:"Search: restore, mobility, flow\u2026",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[13px] text-white placeholder:text-white/35 outline-none"}),React.createElement("div",{className:"text-[12px] font-semibold text-white/80 pt-1"},"Filters"),React.createElement("div",{className:"flex flex-wrap gap-2"},["ALL","Flow","Power","Restore","Mobility","Breath"].map(D=>React.createElement(Ui,{key:D,active:Fa===D,onClick:()=>Ni(D)},D))),React.createElement("div",{className:"flex flex-wrap gap-2"},["ALL","0-15","16-30","31+"].map(D=>React.createElement(Ui,{key:D,active:ys===D,onClick:()=>Ps(D)},D,"m")),["ALL","Beginner","Intermediate","Advanced"].map(D=>React.createElement(Ui,{key:D,active:Ms===D,onClick:()=>o(D)},D)))),g?React.createElement("div",{className:"rounded-3xl border border-emerald-300/20 bg-emerald-300/10 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-emerald-100/80"},"Recommended for today"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white truncate"},g.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},g.mins," min \u2022 ",g.level," \u2022 ",g.style)),React.createElement("button",{className:"shrink-0 rounded-2xl bg-white/10 border border-white/15 px-3 py-2 text-[12px] font-semibold text-white active:scale-[0.99]",onClick:()=>F(g.id)},"View"))):null,React.createElement("div",{className:"space-y-2"},E.length?E.map(D=>{var k=!!(D.premium&&ga==="LIMITED");return React.createElement("div",{key:D.id,className:"rounded-3xl border border-white/10 bg-black/25 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white truncate"},D.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},D.mins," min \u2022 ",D.level," \u2022 ",D.style),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(D.tags||[]).slice(0,3).map(T=>React.createElement(re,{key:T},T)))),React.createElement("div",{className:"shrink-0 flex flex-col items-end gap-2"},k?React.createElement(re,null,"LOCKED"):D.premium?React.createElement(re,null,"PREMIUM"):React.createElement(re,null,"FREE"),React.createElement("button",{className:"rounded-2xl bg-white/10 border border-white/15 px-3 py-2 text-[12px] font-semibold text-white active:scale-[0.99]",onClick:()=>k?j("YC_Upsell_Prompt",{...Ke,from:Ke.from||""}):F(D.id)},k?"Upgrade":"Details"))))}):React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 px-4 py-4 text-[12px] text-white/65"},"No sessions match your filters.")),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Access_Check",{...Ke,from:Ke.from||""})},"Back")))}if(N==="YC_Limited_Lib"||N==="YC_Independent_Lib"){var Ke=h.ctx||{},ua=N==="YC_Independent_Lib"?"FULL":"LIMITED",[ga,Vi]=React.useState(!1);return React.useEffect(()=>{if(!ga){Vi(!0);try{if(window.__fof_openLibraryDeepLink){window.__fof_openLibraryDeepLink("YOGA",{source:N,access:ua});try{a&&a()}catch($i){}return}}catch($i){}}},[ga]),React.createElement(Ko,{title:N==="YC_Independent_Lib"?"Yoga Library":"Limited Yoga",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:N==="YC_Independent_Lib"?"Full Yoga Library":"Limited Yoga Library",subtitle:N==="YC_Independent_Lib"?"Browse sessions and open details.":"Free starter sessions only.",right:React.createElement(re,null,ua)}),React.createElement(je,{title:"Open Session Picker",subtitle:"Fast in-app selection (recommended).",icon:"Sparkles",onTap:()=>j("YC_Session_Selection",{...Ke,from:Ke.from||"",access:ua}),right:React.createElement(gi,{name:"ChevronRight",size:18,className:"text-white/35"})}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 px-4 py-4 text-[12px] text-white/65"},"If the Universal Library module is available in this build, we will handoff automatically. Otherwise, the in-app picker is used.")))}if(N==="YC_Perform"){var Ke=h.ctx||{},ua=Ke.sessionId||"y1",ga=(se||[]).find(Zt=>Zt.id===ua)||(se||[])[0],Vi=String(Ke.access||Ke.entitlements&&Ke.entitlements.yogaAccess||Ke.yogaAccess||Ke.yogaAddon||Qe||"NONE").toUpperCase(),$i=Vi==="FULL"||Vi==="LIMITED"||Vi==="NONE"?Vi:"NONE";return ga&&ga.premium&&$i==="LIMITED"?React.createElement(Ko,{title:"Session Locked",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:ga.title,subtitle:"This session is part of the full library.",right:React.createElement(re,null,"LOCKED")}),React.createElement(je,{title:"Upgrade to Unlock",subtitle:"Proceed to demo checkout.",icon:"LockOpen",onTap:()=>j("YC_Upsell_Prompt",{...Ke,from:Ke.from||""})}),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j($i==="FULL"?"YC_Independent_Lib":"YC_Limited_Lib",{...Ke,from:Ke.from||""})},"Back to Library"))):React.createElement(Ko,{title:"Session",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:ga.title,subtitle:`${ga.mins} min \u2022 ${ga.level} \u2022 ${ga.style}`,right:React.createElement(re,null,ga.mins,"m")}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Today\u2019s recommendation"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 leading-snug"},"If Capacity is low, prefer ",React.createElement("span",{className:"font-semibold text-white"},"Restore")," or ",React.createElement("span",{className:"font-semibold text-white"},"Mobility"),". If high, power flows are ok."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},(ga.tags||[]).map(Zt=>React.createElement(re,{key:Zt},Zt)))),Ke.intent==="PLAN_ADD"?React.createElement("div",{className:"space-y-2"},React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>{try{var Zt=String(Ke.planDateKey||Ke.dateKey||localStorage.getItem("fof_library_planDateKey_v1")||"").trim()||new Date().toISOString().slice(0,10);typeof window.__fof_planAddItem=="function"?window.__fof_planAddItem(Zt,{id:ga.id,title:ga.title,type:"YOGA_SESSION",category:"YOGA",duration:ga.mins,source:"YOGA",meta:{from:"YOGA_FLOW",intent:"PLAN_ADD"}}):window.dispatchEvent(new CustomEvent("flowofit:addToPlan",{detail:{dateKey:Zt,item:{id:ga.id,title:ga.title,type:"YOGA_SESSION",category:"YOGA",duration:ga.mins,source:"YOGA",meta:{from:"YOGA_FLOW",intent:"PLAN_ADD"}}}})),window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added to Plan",message:"Yoga session scheduled."}}))}catch(Zt){}try{a&&a()}catch(Zt){}}},"Add to Plan"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Audio_Choice_NEW",{...Ke,from:Ke.from||"",sessionId:ga.id,intent:"START_NOW"})},"Start now")):React.createElement(React.Fragment,null,React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>j("YC_Audio_Choice_NEW",{...Ke,from:Ke.from||"",sessionId:ga.id})},"Start"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j($i==="FULL"?"YC_Independent_Lib":"YC_Limited_Lib",{...Ke,from:Ke.from||""})},"Back to Library"))))}if(N==="YC_Audio_Choice_NEW"){var Ke=h.ctx||{},ua=Ke.sessionId||"y1",ga=(se||[]).find(Fa=>Fa.id===ua)||(se||[])[0],[Vi,$i]=React.useState(Ke.audio||"GUIDED"),[Ya,Zt]=React.useState(Ke.music||"NONE"),Ki=()=>j("YC_Do_Session",{...Ke,from:Ke.from||"",sessionId:ga.id,audio:Vi,music:Ya});return React.createElement(Ko,{title:"Audio",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:"Select Audio Experience",subtitle:ga.title,right:React.createElement(re,null,ga.mins,"m")}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4 space-y-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Guidance"),React.createElement("div",{className:"flex flex-wrap gap-2"},["GUIDED","MUSIC","SILENT"].map(Fa=>React.createElement(Ui,{key:Fa,active:Vi===Fa,onClick:()=>$i(Fa)},Fa))),React.createElement("div",{className:"text-[12px] font-semibold text-white/80 pt-2"},"Music"),React.createElement("div",{className:"flex flex-wrap gap-2"},["NONE","AMBIENT","BEATS"].map(Fa=>React.createElement(Ui,{key:Fa,active:Ya===Fa,onClick:()=>Zt(Fa)},Fa)))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:Ki},"Continue"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Perform",{...Ke,from:Ke.from||"",sessionId:ga.id})},"Back")))}if(N==="YC_Do_Session"){var Ke=h.ctx||{},ua=Ke.sessionId||"y1",ga=(se||[]).find(Ps=>Ps.id===ua)||(se||[])[0],[Vi,$i]=React.useState(!0),[Ya,Zt]=React.useState(0);React.useEffect(()=>{if(!Vi)return;var Ps=setInterval(()=>Zt(Ms=>Ms+1),1e3);return()=>clearInterval(Ps)},[Vi]);var Ki=Math.floor(Ya/60).toString().padStart(2,"0"),Fa=Math.floor(Ya%60).toString().padStart(2,"0"),Ni=()=>j("YC_Log",{...Ke,from:Ke.from||"",sessionId:ga.id,elapsedSec:Ya}),ys=()=>{j("YC_AR_Pose_Guide_NEW",{...Ke,from:Ke.from||"",sessionId:ga.id,elapsedSec:Ya})};return React.createElement(Ko,{title:"In Session",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:ga.title,subtitle:`${Ke.audio||"GUIDED"} \u2022 ${Ke.music||"NONE"}`,right:React.createElement(re,null,Ki,":",Fa)}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Session controls"),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{className:"flex-1 rounded-2xl border border-white/12 bg-white/5 px-4 py-3 text-[12px] font-semibold text-white/85 active:scale-[0.99]",onClick:()=>$i(Ps=>!Ps)},Vi?"Pause":"Resume"),React.createElement("button",{className:"flex-1 rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[12px] font-semibold text-white active:scale-[0.99]",onClick:Ni},"End")),React.createElement("button",{className:"mt-3 w-full rounded-2xl border border-white/12 bg-black/25 px-4 py-3 text-[12px] font-semibold text-white/85 active:scale-[0.99]",onClick:ys},"Use AI Pose Correction"),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Demo: pose correction opens an AR guidance screen, then triggers \u201CAI Form Check\u201D."))))}if(N==="YC_AR_Pose_Guide_NEW"){var Ke=h.ctx||{},ua=Ke.sessionId||"y1",ga=(se||[]).find($i=>$i.id===ua)||(se||[])[0],Vi=()=>j("AIHub_AIH_Form",{...Ke,from:Ke.from||""});return React.createElement(Ko,{title:"Pose Guide",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:"AR Pose & Alignment Guide",subtitle:ga.title,right:React.createElement(re,null,"AR")}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Camera + alignment overlay (demo)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 leading-snug"},"In production this will show live joint angles, alignment cues, and rep/hold detection."),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/70"},"Knee tracking"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/70"},"Hip hinge"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/70"},"Spine neutral"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/70"},"Breath pacing"))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:Vi},"Run AI Form Check"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Do_Session",{...Ke,from:Ke.from||"",sessionId:ua})},"Back to Session")))}if(N==="YC_Log"){var Ke=h.ctx||{},ua=Ke.sessionId||"y1",ga=(se||[]).find(Fa=>Fa.id===ua)||(se||[])[0],[Vi,$i]=React.useState(4),[Ya,Zt]=React.useState(""),Ki=()=>{var Fa=new Date().toISOString().slice(0,10);try{typeof window.__fof_capacity_ingestYoga=="function"&&window.__fof_capacity_ingestYoga({dateKey:Fa,durationMin:ga.mins,style:ga.style,level:ga.level,premium:!!ga.premium})}catch(Ni){}try{if(Ke.planItemId&&Ke.planDateKey){var Ni="fof_plan_done_v1",ys=(()=>{try{return JSON.parse(localStorage.getItem(Ni)||"{}")||{}}catch(Ms){return{}}})(),Ps=Array.isArray(ys[Ke.planDateKey])?ys[Ke.planDateKey]:[];Ps.includes(Ke.planItemId)||Ps.push(Ke.planItemId),ys[Ke.planDateKey]=Ps,localStorage.setItem(Ni,JSON.stringify(ys)),window.dispatchEvent(new CustomEvent("flowofit:planUpdated",{detail:{dateKey:Ke.planDateKey}}))}}catch(Ni){}ft("YOGA_SESSION",{dateKey:Fa,sessionId:ua,title:ga.title,minsPlanned:ga.mins,elapsedSec:Ke.elapsedSec||null,audio:Ke.audio||"GUIDED",music:Ke.music||"NONE",rating:Vi,notes:Ya}),Y(25,Fa),j("YC_XP_Awarded",{...Ke,from:Ke.from||"",sessionId:ua,xpDelta:25,dateKey:Fa})};return React.createElement(Ko,{title:"Log Session",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Ja,{title:ga.title,subtitle:"Log your session to update insights and streaks.",right:React.createElement(re,null,"LOG")}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4 space-y-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between text-[12px] text-white/70"},React.createElement("span",null,"How did it feel?"),React.createElement("span",{className:"font-extrabold text-white"},Vi,"/5")),React.createElement("input",{type:"range",min:"1",max:"5",step:"1",value:Vi,onChange:Fa=>$i(parseInt(Fa.target.value,10)),className:"w-full mt-2"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/70"},"Notes"),React.createElement("textarea",{value:Ya,onChange:Fa=>Zt(Fa.target.value),rows:4,placeholder:"Anything to remember?",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[13px] text-white placeholder:text-white/35 outline-none"}))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:Ki},"Save & Earn XP")))}if(N==="YC_XP_Awarded"){var Ke=h.ctx||{},ua=Number(Ke.xpDelta||25);return React.createElement(Ko,{title:"Completed",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-emerald-300/20 bg-emerald-300/10 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-emerald-100"},"XP Awarded!"),React.createElement("div",{className:"mt-1 text-[12px] text-emerald-100/80"},"+",ua," XP \u2022 Streak: ",Da.streak||1),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Total XP"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},Da.xp||0)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Streak"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},Da.streak||1)))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>{var ga=_a(Ke);if(ga)j(ga,{from:"YC_XP_Awarded"});else try{a&&a()}catch(Vi){}}},"Return to Dashboard"),React.createElement("button",{className:"w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>j("YC_Library",{...Ke,from:Ke.from||""})},"Back to Yoga")))}var qs=Ke=>{var ua=String(Ke||"").toUpperCase();return ua==="YOGA"?"Yoga / Mobility":ua==="SPORT"?"Sport / Cardio":"Strength"},_o=Ke=>{try{var ua=typeof window.__fof_getEventsForDate=="function"?window.__fof_getEventsForDate(Ke,{includeLegacy:!0})||[]:[],ga=(Array.isArray(ua)?ua:[]).map(Zt=>String((Zt==null?void 0:Zt.kind)||(Zt==null?void 0:Zt.type)||"").toUpperCase()),Vi=ga.some(Zt=>Zt.includes("WORKOUT")||Zt.includes("STRENGTH")),$i=ga.some(Zt=>Zt.includes("YOGA")||Zt.includes("MOBILITY")),Ya=ga.some(Zt=>Zt.includes("RUN")||Zt.includes("CARDIO")||Zt.includes("SPORT")||Zt.includes("BADMINTON")||Zt.includes("CYCLE")||Zt.includes("SWIM"));return Vi?"STRENGTH":Ya?"SPORT":$i?"YOGA":null}catch(ua){return null}},ki=({primaryType:Ke,secondaryType:ua,zone:ga})=>{var Vi=Ke?String(Ke).toUpperCase():null,$i=String(ua||"").toUpperCase(),Ya=String(ga||"MID").toUpperCase(),Zt=(Ms,o,d,m)=>({level:Ms,title:o,message:d,suggestion:m||null}),Ki=()=>({type:"YOGA",label:"Yoga / Mobility (recovery)"}),Fa=()=>({type:"SPORT",label:"Easy Zone-2 cardio"}),Ni=()=>({type:"STRENGTH",label:"Strength (lighter volume)"}),ys=Ya==="LOW",Ps=Ya==="HIGH";return Vi?Vi==="STRENGTH"&&$i==="YOGA"?Zt("SAFE","Great pairing","Yoga/mobility complements a strength day and supports recovery.",null):Vi==="STRENGTH"&&$i==="STRENGTH"?ys?Zt("RISK","High risk of overreaching","Two strength sessions on a low-capacity day raises injury and recovery risk.",Ki()):Zt("CAUTION","Caution: two hard sessions","A second strength session may reduce recovery. Consider lighter volume or mobility.",Ni()):Vi==="STRENGTH"&&$i==="SPORT"?ys?Zt("RISK","Higher injury risk","Adding sport/cardio after strength on a low-capacity day can increase injury risk.",Ki()):Zt("CAUTION","Caution: stack load","Consider lowering intensity or choosing mobility if you feel tight/fatigued.",Fa()):Vi==="SPORT"&&$i==="STRENGTH"?ys?Zt("RISK","High load on low capacity","Stacking strength after sport on a low-capacity day is high load.",Ki()):Zt("CAUTION","Caution: total load","If you proceed, keep the strength session lighter and focus on technique.",Ni()):Vi==="SPORT"&&$i==="SPORT"?ys?Zt("RISK","Too much intensity today","Two sport/cardio sessions on a low-capacity day is high strain.",Ki()):Zt("CAUTION","Caution: double cardio","Consider making the second session easy (Zone 2) or swap to mobility.",Fa()):Vi==="YOGA"&&($i==="STRENGTH"||$i==="SPORT")?ys?Zt("CAUTION","Caution on a low-capacity day","Capacity is low. If you proceed, keep intensity conservative.",Ki()):Zt("SAFE","Looks good","Yoga + a second session is usually fine. Keep it aligned with your capacity.",null):Vi==="YOGA"&&$i==="YOGA"?Zt("SAFE","Recovery-friendly","A second mobility session is usually safe and supports recovery.",null):Zt("CAUTION","Caution","This combination may impact recovery. Consider an easier alternative if needed.",Ki()):ys&&($i==="STRENGTH"||$i==="SPORT")?Zt("CAUTION","Caution on a low-capacity day","Your capacity is low today. Consider a lighter session or recovery work.",$i==="STRENGTH"?Ni():Ki()):Zt("SAFE","Looks good","This should fit well with today. Keep intensity appropriate for your capacity.",null)};if(N==="IC_Add_Secondary_Activity_NEW"||N==="IC_Select_Secondary_NEW"||N==="IC_Secondary_Activity"||N==="LC_Select_Secondary_NEW"||N==="LC_Add_Secondary_Activity_NEW"||N==="LC_Secondary_Activity")return React.createElement(ai,{nodeId:N,from:G&&(G.from||G.entry||G.source)?G.from||G.entry||G.source:"",isLinked:String(G&&G.clientMode?G.clientMode:((Oe=window.__FOF_CLIENT_CONTEXT)==null?void 0:Oe.relationship)||"").toUpperCase()==="LINKED",persona:zo,onClose:a,navTo:j});if(N==="IC_Check_User_Status_NEW"){var Ke=ua=>me({...ve,subscriptionStatus:ua,tier:ve.tier==="FREE"?"PAID":ve.tier});return React.createElement(Ko,{title:"Subscription Status",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Z,null),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 px-4 py-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Set status (for testing real flows)"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},["ACTIVE","IN_GRACE","EXPIRED","DUNNING_LOCKED","RECOVERED"].map(ua=>React.createElement("button",{key:ua,onClick:()=>Ke(ua),className:"rounded-2xl border border-white/12 bg-black/30 px-3 py-2 text-[11px] font-semibold text-white/80 active:scale-[0.99]"},ua.replace("_"," "))))),React.createElement("button",{className:"w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>j("IC_Paid_Dashboard",{from:"IC_Check_User_Status_NEW"})},"Continue to Paid Dashboard")))}if(N==="IC_Upgrade_Options_Router"||N==="IC_Upgrade_Options"||N==="Upgrade_Options"||N==="UpgradeOptions"){var Ke=()=>{me({tier:"PAID",subscriptionStatus:"ACTIVE",trialStartAt:null,trialEndAt:null}),j("IC_Paid_Dashboard",{from:"IC_Upgrade_Options_Router"})};return React.createElement(Ko,{title:"Upgrade Options",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement(Z,null),React.createElement(je,{title:ve.tier==="FREE"?"Start Trial":"Restart Trial (dev)",subtitle:"Unlock premium tiles instantly.",onTap:()=>j("IC_Start_Trial_NEW",{from:"IC_Upgrade_Options_Router"}),right:React.createElement(re,null,"TRIAL")}),React.createElement(je,{title:"Upgrade to Paid",subtitle:"Activate premium membership (Phase 2.3 will add payment validation).",onTap:Ke,right:React.createElement(re,null,"PAID")}),React.createElement(je,{title:"Checkout",subtitle:"Go to Payments module.",onTap:()=>j("Payments_Module_PM_Entry",{from:"IC_Upgrade_Options_Router"})}),React.createElement(je,{title:"Enter Gift / Promo Code",subtitle:"Redeem a code to unlock access.",onTap:()=>j("ClientOnboardingDecisionFlow_C_Enter_Unique_Code",{from:"IC_Upgrade_Options_Router"})}),React.createElement(je,{title:"Unlock Help (Dunning Triage)",subtitle:"If your account is locked, resolve it here.",onTap:()=>j("DunningFlow_DF_Client_Unlock_Triage",{from:"IC_Upgrade_Options_Router"})})))}if(N==="IC_Free_Dashboard"){var[Ke,ua]=React.useState(()=>{try{return localStorage.getItem("fof_ic_wearables_dismissed")==="1"}catch(Zt){return!1}}),ga=()=>{try{localStorage.setItem("fof_ic_wearables_dismissed","1")}catch(Zt){}ua(!0)},Vi=typeof window!="undefined"&&window.__FOF_CLIENT_CONTEXT?window.__FOF_CLIENT_CONTEXT:{},$i=String(Vi&&Vi.entitlements&&Vi.entitlements.yogaAccess?Vi.entitlements.yogaAccess:"NONE").toUpperCase(),Ya=$i==="FULL";return React.createElement(Ko,{title:"Free Dashboard",onClose:a},React.createElement("div",{className:"space-y-4"},React.createElement(Z,null),!Ke&&React.createElement("div",{className:"rounded-3xl border border-emerald-400/25 bg-emerald-400/10 px-4 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Connect your wearables"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},"Faster readiness updates and smarter daily recommendations.")),React.createElement("button",{type:"button",onClick:ga,className:"shrink-0 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[11px] font-semibold text-white/80 active:scale-[0.99]"},"Dismiss")),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>j("IC_Connect_Devices_Prompt_NEW",{from:"IC_Free_Dashboard"}),className:"w-full rounded-2xl bg-white/10 border border-white/10 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]"},"Connect Devices"))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Home"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Activity",title:"Log a Workout",subtitle:"Start your session and track sets, timer, and sync.",onTap:()=>j("IC_DoWorkout",{from:"IC_Free_Dashboard"})}),React.createElement(je,{icon:"Sparkles",title:"Yoga & Wellness",subtitle:$i==="FULL"?"Full library unlocked \u2014 browse, filter, and log sessions.":$i==="LIMITED"?"Limited access \u2014 some sessions available. Upgrade for the full library.":"Locked \u2014 add Yoga to unlock sessions.",onTap:()=>j("YC_Access_Check",{from:"IC_Free_Dashboard",yogaAccess:$i}),right:React.createElement(re,null,$i==="NONE"?"ADD":$i)}),React.createElement(je,{icon:"Gauge",title:"Capacity Score",subtitle:"View your readiness / capacity score card.",onTap:()=>j("Client_Readiness_Module.CRM_Entry_IC",{from:"IC_Free_Dashboard"})}),React.createElement(je,{icon:"Target",title:"Goals",subtitle:"Manage goals, emphasis, and defaults.",onTap:()=>j("Client_GoalManager_Module.CGM_Entry_IC",{from:"IC_Free_Dashboard"})}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Unlock"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"ScanLine",title:"Scan Paper Workout",subtitle:"Paid feature \u2014 scan and import a workout plan.",onTap:()=>j("IC_Upgrade_Options_Router",{from:"IC_Free_Dashboard",reason:"SCAN_PAPER"}),right:React.createElement(re,null,"LOCKED")}),React.createElement(je,{icon:"Crown",title:"Upgrade",subtitle:"Unlock premium dashboard tiles, full yoga library, discovery and advanced insights.",onTap:()=>j("IC_Upgrade_Options_Router",{from:"IC_Free_Dashboard"}),right:React.createElement(re,null,"UPGRADE")}),React.createElement(je,{icon:"Gift",title:"Enter Gift / Promo Code",subtitle:"Redeem a code to unlock access.",onTap:()=>j("ClientOnboardingDecisionFlow_C_Enter_Unique_Code",{from:"IC_Free_Dashboard"})}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Community"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Users",title:"Refer a Friend",subtitle:"Invite friends and earn rewards.",onTap:()=>j("Referral_Program_RP1",{from:"IC_Free_Dashboard"})}),React.createElement(je,{icon:"Compass",title:"Discovery",subtitle:"Explore workouts, challenges and content.",onTap:()=>j("Discovery_Hub_DH_Entry",{from:"IC_Free_Dashboard"})}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Tools"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Watch",title:"Wearable Management",subtitle:"Manage connected devices and sync settings.",onTap:()=>j("IC_Wearable_Mgmt",{from:"IC_Free_Dashboard"})}),React.createElement(je,{icon:"Mic",title:"Voice Mode",subtitle:"Hands-free commands during training.",onTap:()=>j("IC_Voice_Mode",{from:"IC_Free_Dashboard"})})))))}if(N==="IC_Paid_Dashboard"){var Ke=ve.subscriptionStatus==="DUNNING_LOCKED"||ve.subscriptionStatus==="EXPIRED",ua=ve.subscriptionStatus==="IN_GRACE",ga=ve.subscriptionStatus==="RECOVERED";return React.createElement(Ko,{title:Ke?"Account Locked":"Premium Dashboard",onClose:a},React.createElement("div",{className:"space-y-4"},React.createElement(Z,null),React.createElement(()=>Ke?React.createElement("div",{className:"rounded-3xl border border-rose-400/25 bg-rose-400/10 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Your account is locked"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},"Premium features are temporarily paused. Resolve payment to restore access."),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>j("DunningFlow_DF_Client_Unlock_Triage",{from:"IC_Paid_Dashboard"}),className:"w-full rounded-2xl bg-white/10 border border-white/10 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]"},"Resolve & Unlock"))):ua?React.createElement("div",{className:"rounded-3xl border border-amber-300/25 bg-amber-300/10 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Grace period active"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},"You still have access. Please update your payment method to avoid interruption."),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>j("Payments_Module_PM_Entry",{from:"IC_Paid_Dashboard",reason:"UPDATE_PAYMENT"}),className:"w-full rounded-2xl bg-white/10 border border-white/10 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]"},"Update Payment"))):ga?React.createElement("div",{className:"rounded-3xl border border-emerald-300/25 bg-emerald-300/10 px-4 py-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Welcome back \u{1F389}"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},"Your membership is active again. Keep the streak going today.")):null,null),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Home"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Activity",title:"Recommended Workout",subtitle:"Start today\u2019s session with timer + sync.",onTap:()=>j("IC_DoWorkout",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Sparkles",title:"Yoga Daily",subtitle:"Quick flow tailored to your day.",onTap:()=>j("YC_Library",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Utensils",title:"Log Nutrition",subtitle:"Track meals and sync macros.",onTap:()=>j("Client_Nutrition_Logger_Module.CNL_Entry_IC",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Gauge",title:"Capacity Score",subtitle:"View readiness / capacity score card.",onTap:()=>j("Client_Readiness_Module.CRM_Entry_IC",{from:"IC_Paid_Dashboard"})}),React.createElement(je,{icon:"PlusCircle",title:"Add Secondary Activity",subtitle:"Add a run, sport, or extra session \u2014 with conflict checks.",onTap:()=>j("IC_Add_Secondary_Activity_NEW",{from:"IC_Paid_Dashboard",via:"HOME_SECTION"}),disabled:Ke}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Plan & Progress"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"PlusCircle",title:"Add Secondary Activity",subtitle:"Add a run, sport, or extra session \u2014 with conflict checks.",onTap:()=>j("IC_Add_Secondary_Activity_NEW",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Target",title:"Goals",subtitle:"Update goals and training focus.",onTap:()=>j("Client_GoalManager_Module.CGM_Entry_IC",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"ScanLine",title:"Scan Paper Workout",subtitle:"Import a written program into your plan.",onTap:()=>j("IC_Scan_Paper_Workout",{from:"IC_Paid_Dashboard"}),disabled:Ke}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Explore"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Compass",title:"Discovery",subtitle:"Find workouts, challenges and programs.",onTap:()=>j("Discovery_Hub_DH_Entry",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Users",title:"Community",subtitle:"Join groups and share progress.",onTap:()=>j("Community_Module_CM1",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Play",title:"Live Sessions",subtitle:"Browse live classes and events.",onTap:()=>j("PublicLiveDiscovery_Module_PLD1_M",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Bolt",title:"Micro\u2011Training",subtitle:"Quick sessions when you\u2019re short on time.",onTap:()=>j("MicroTrainingModule_MT1",{from:"IC_Paid_Dashboard"}),disabled:Ke}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Tools"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement(je,{icon:"Watch",title:"Wearable Management",subtitle:"Manage devices and sync settings.",onTap:()=>j("IC_Wearable_Mgmt",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Mic",title:"Voice Mode",subtitle:"Hands-free commands during training.",onTap:()=>j("IC_Voice_Mode",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"WifiOff",title:"Offline Mode",subtitle:"Train without internet and sync later.",onTap:()=>j("IC_Offline",{from:"IC_Paid_Dashboard"}),disabled:Ke}),React.createElement(je,{icon:"Gift",title:"Enter Gift / Promo Code",subtitle:"Redeem access or perks.",onTap:()=>j("ClientOnboardingDecisionFlow_C_Enter_Unique_Code",{from:"IC_Paid_Dashboard"}),disabled:Ke}))),Ke&&React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 px-4 py-3"},React.createElement("div",{className:"text-[12px] text-white/65"},"Need help? Open the unlock triage to restore premium access."))))}return React.createElement(Ko,{title:Ne,onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-semibold"},"Node"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-300 break-all"},N),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"This screen is now safely stubbed (Phase 2 \u2014 2D.1.2). Full behavior will be implemented in the next Phase 2 steps.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"What you can do now:"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-zinc-300 list-disc pl-5"},React.createElement("li",null,"Return safely to where you came from"),React.createElement("li",null,"Proceed to the next node when wired (Phase 2.2+)"),React.createElement("li",null,"Use the console helper: ",React.createElement("span",{className:"font-mono text-white/80"},'__fof_openNode("',N,'")'))),$t?React.createElement("button",{className:"mt-3 w-full rounded-2xl bg-white/10 border border-white/15 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]",onClick:()=>j($t,{from:N})},we):React.createElement("button",{className:"mt-3 w-full rounded-2xl border border-white/12 bg-black/30 px-4 py-3 text-[12px] font-semibold text-white/80 active:scale-[0.99]",onClick:()=>{try{a&&a()}catch(Ke){}}},"Close"))))}if(c==="NUTRITION_LOGGER")return React.createElement(Ko,{title:"Log Nutrition",onClose:a},React.createElement(il,{dateKey:h.dateKey||null,onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="WORKOUT_LOGGER")return React.createElement(Ko,{title:"Log Workout",onClose:a},React.createElement(Cr,{dateKey:h.dateKey||null,onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="BOOK_SESSION_SHEET_V1")return React.createElement(Ko,{title:"Book session",onClose:a},React.createElement(Mn,{from:h.from||"OVERLAY",onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}try{a&&a()}catch(Ne){}}}));if(c==="FIND_COACH_SHEET_V1")return React.createElement(Ko,{title:"Find a Coach",onClose:a},React.createElement(Gr,{from:h.from||"OVERLAY",onPick:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}try{a&&a()}catch(Ne){}}}));if(c==="RECOVERY_LOGGER")return React.createElement(Ko,{title:"Log Recovery",onClose:a},React.createElement(Yn,{dateKey:h.dateKey||null,onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="BODY_LOGGER")return React.createElement(Ko,{title:"Body Metrics",onClose:a},React.createElement(ml,{dateKey:h.dateKey||null,onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="HABITS_STREAK_SHEET_V1"||c==="HABITS_STREAK_SHEET"||c==="HABITS_STREAK")return React.createElement(HabitStreakSheetV1,{open:!0,onClose:a,surfaceKeyOverride:h&&h.surfaceKey?h.surfaceKey:null});if(c==="HABITS_LOGGER")return React.createElement(Ko,{title:"Habits",onClose:a},React.createElement(vr,{dateKey:h.dateKey||null,onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="READINESS_MODULE")return React.createElement(Ko,{title:"Capacity details",onClose:a},React.createElement(Sl,{onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="GOAL_MANAGER")return React.createElement(Ko,{title:"Goals & Adherence",onClose:a},React.createElement(sl,{onDone:N=>{try{r&&r({key:c,meta:N})}catch(Ne){}a&&a()}}));if(c==="BODY_SCAN_STUB_SHEET_V1")return React.createElement(Ko,{title:"Body scan",onClose:a},React.createElement("div",{className:"text-[13px] text-white/80 font-semibold"},"Capture a 3D scan (coming soon)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 leading-relaxed"},"This build focuses on daily execution. Body scan capture will plug in here as a guided camera flow with progress tracking."),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{a&&a()}catch(N){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-[12px] text-white/85"},"Close")));if(c==="WEEKLY_REVIEW_V1"||c==="WEEKLY_REVIEW")return React.createElement(i,{open:!0,anchorKey:h&&(h.anchorKey||h.dateKey)?h.anchorKey||h.dateKey:null,onClose:a});if(c==="POST_WORKOUT_ADDON_SHEET_V1"||c==="POST_WORKOUT_ADDON_SUGGESTIONS"){var N=typeof window!="undefined"&&window.PostWorkoutAddonSheetV1?window.PostWorkoutAddonSheetV1:null;return N?React.createElement(N,{open:!0,ctx:h||{},onClose:a,onPick:Ne=>{try{var G=(window.__fof_getClientContext?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{})||{},gt=String(G.relationship||G.clientMode||"").toUpperCase()==="LINKED"?"LC_Add_Secondary_Activity_NEW":"IC_Add_Secondary_Activity_NEW",_e={from:"POST_WORKOUT_ADDON",preselect:String(Ne||"").toUpperCase()};window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay(gt,_e):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:gt,props:_e}}))}catch(G){}}}):null}if(c==="IC_Add_Secondary_Activity_NEW"||c==="IC_Select_Secondary_NEW"||c==="IC_Secondary_Activity"||c==="LC_Add_Secondary_Activity_NEW"||c==="LC_Select_Secondary_NEW"||c==="LC_Secondary_Activity"){var N=String(h&&(h.clientMode||h.relationship)||window.__FOF_CLIENT_CONTEXT&&window.__FOF_CLIENT_CONTEXT.relationship||"").toUpperCase()==="LINKED";return React.createElement(ai,{nodeId:c,from:h&&(h.from||h.entry||h.source)?h.from||h.entry||h.source:"OVERLAY",isLinked:N,persona:null,onClose:a,navTo:()=>{}})}return React.createElement(Ko,{title:"Screen",onClose:a},React.createElement("div",{className:"text-[13px] text-white/70"},"This screen is not available yet."))},J=({initialDayKey:e=null,onAddFood:a,onDeleteEntry:r,onOpenEntry:c,onOpenActions:h})=>{var V=()=>{try{return window.__fof_localDateKey?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10)}catch(Le){return new Date().toISOString().slice(0,10)}},de=(Le,se)=>{try{var at=new Date(String(Le||V())+"T00:00:00");return at.setDate(at.getDate()+(Number(se)||0)),window.__fof_localDateKey?window.__fof_localDateKey(at):at.toISOString().slice(0,10)}catch(at){return Le}},[M,De]=React.useState(()=>e||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null)||V()),[Ae,Oe]=React.useState("DAY");React.useEffect(()=>{try{var Le=e||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null);Le&&De(Le)}catch(Le){}},[e]);var N=React.useMemo(()=>{try{var Le=V();return String(M)>String(Le)}catch(Le){return!1}},[M]),Ne="__fof_nutrition_events_v1",G="__fof_food_favorites_custom_v1",[we,$t]=React.useState(0);React.useEffect(()=>{var Le=()=>{try{$t(se=>se+1)}catch(se){}};try{window.addEventListener("flowofit:logsUpdated",Le)}catch(se){}try{window.addEventListener("flowofit:logUpdated",Le)}catch(se){}try{window.addEventListener("storage",Le)}catch(se){}return()=>{try{window.removeEventListener("flowofit:logsUpdated",Le)}catch(se){}try{window.removeEventListener("flowofit:logUpdated",Le)}catch(se){}try{window.removeEventListener("storage",Le)}catch(se){}}},[]);var gt=React.useMemo(()=>{try{var Le=localStorage.getItem(Ne),se=Le?JSON.parse(Le):[];return(Array.isArray(se)?se:[]).filter(Pe=>Pe&&String(Pe.dk)===String(M)).sort((Pe,Wt)=>Number(Wt.ts||0)-Number(Pe.ts||0))}catch(Le){return[]}},[M,we]),_e=React.useMemo(()=>{var Le={BREAKFAST:[],LUNCH:[],DINNER:[],SNACK:[]};return(gt||[]).forEach(se=>{var at=String(se.type||se.meal||"").toUpperCase(),Pe=at.includes("BREAKFAST")||at==="B"?"BREAKFAST":at.includes("LUNCH")?"LUNCH":at.includes("DINNER")?"DINNER":at.includes("SNACK")?"SNACK":se.payload&&se.payload.meal?String(se.payload.meal).toUpperCase():"",Wt=["BREAKFAST","LUNCH","DINNER","SNACK"].includes(Pe)?Pe:"SNACK";Le[Wt].push(se)}),Le},[gt]),ve=React.useMemo(()=>{var Le={kcal:0,p:0,c:0,f:0};return(gt||[]).forEach(se=>{var qa,oa,Ra,ri,Da,Va,Y,ft,_a,Ja,Ui,qs,_o,ki,Vs,Ke,ua,ga,Vi,$i,Ya;var at=Number((Va=(Da=(Ra=(qa=se.calories)!=null?qa:se.kcal)!=null?Ra:(oa=se==null?void 0:se.payload)==null?void 0:oa.calories)!=null?Da:(ri=se==null?void 0:se.payload)==null?void 0:ri.kcal)!=null?Va:0)||0,Pe=Number((Ui=(Ja=(ft=se.p)!=null?ft:(Y=se==null?void 0:se.payload)==null?void 0:Y.protein)!=null?Ja:(_a=se==null?void 0:se.payload)==null?void 0:_a.p)!=null?Ui:0)||0,Wt=Number((Ke=(Vs=(_o=se.c)!=null?_o:(qs=se==null?void 0:se.payload)==null?void 0:qs.carbs)!=null?Vs:(ki=se==null?void 0:se.payload)==null?void 0:ki.c)!=null?Ke:0)||0,Ha=Number((Ya=($i=(ga=se.f)!=null?ga:(ua=se==null?void 0:se.payload)==null?void 0:ua.fat)!=null?$i:(Vi=se==null?void 0:se.payload)==null?void 0:Vi.f)!=null?Ya:0)||0;Le.kcal+=at,Le.p+=Pe,Le.c+=Wt,Le.f+=Ha}),Le},[gt]),me=Le=>Math.round(Number(Le||0)),j=Le=>Math.round(Number(Le||0)*10)/10,je=({label:Le,value:se,max:at})=>{var Pe=at>0?Math.min(100,Math.round(Number(se||0)/at*100)):0;return React.createElement("div",{className:"space-y-1"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-semibold text-white/65"},Le),React.createElement("div",{className:"text-[11px] font-semibold text-white/75 tabular-nums"},j(se),"g")),React.createElement("div",{className:"h-1.5 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/35",style:{width:Pe+"%"}})))},re=()=>{var se=(()=>{try{return new Date(String(M)+"T00:00:00")}catch(Pe){return new Date}})().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),at=Math.max(1,ve.p,ve.c,ve.f);return React.createElement("div",{className:"px-4 pt-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/55 uppercase tracking-wide"},"Nutrition"),React.createElement("div",{className:"text-[12px] font-semibold text-white/55"},"Diary")),React.createElement("button",{type:"button",onClick:()=>{try{h&&h({scope:"DAY",dayKey:M})}catch(Pe){}},className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80","aria-label":"More",title:"More"},"\u22EF")),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>De(Pe=>de(Pe,-1)),className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 flex items-center justify-center","aria-label":"Previous day"},"\u2039"),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-[12px] font-semibold text-white/65"},se),React.createElement("div",{className:"text-[18px] font-extrabold text-white tabular-nums"},me(ve.kcal)," kcal")),React.createElement("button",{type:"button",onClick:()=>De(Pe=>de(Pe,1)),className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 flex items-center justify-center","aria-label":"Next day"},"\u203A"),React.createElement("div",{className:"mt-3 flex items-center justify-center"},React.createElement("div",{className:"inline-flex rounded-2xl border border-white/10 bg-white/5 p-1"},React.createElement("button",{type:"button",onClick:()=>{try{Oe("DAY")}catch(Pe){}},className:["px-4 py-2 rounded-xl text-[12px] font-extrabold transition",Ae==="DAY"?"bg-white text-black shadow":"text-white/70 hover:text-white"].join(" ")},"Day"),React.createElement("button",{type:"button",onClick:()=>{try{Oe("WEEK")}catch(Pe){}},className:["px-4 py-2 rounded-xl text-[12px] font-extrabold transition",Ae==="WEEK"?"bg-white text-black shadow":"text-white/70 hover:text-white"].join(" ")},"Week")))),N?React.createElement("div",{className:"mt-2 text-[12px] font-semibold text-white/45"},"Future day \u2014 logging disabled."):null,React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-3"},React.createElement(je,{label:"Protein",value:ve.p,max:at}),React.createElement(je,{label:"Carbs",value:ve.c,max:at}),React.createElement(je,{label:"Fat",value:ve.f,max:at})),React.createElement("div",{className:"mt-4 h-px bg-white/10"}))},Z=({mealKey:Le,title:se})=>{var at=_e[Le]||[],Pe=at.reduce((Wt,Ha)=>{var qa,oa,Ra,ri,Da,Va;return Wt+(Number((Va=(Da=(Ra=(qa=Ha.calories)!=null?qa:Ha.kcal)!=null?Ra:(oa=Ha==null?void 0:Ha.payload)==null?void 0:oa.calories)!=null?Da:(ri=Ha==null?void 0:Ha.payload)==null?void 0:ri.kcal)!=null?Va:0)||0)},0);return React.createElement("div",{className:"px-4"},React.createElement("div",{className:"py-3 flex items-center justify-between"},React.createElement("div",{className:"flex items-baseline gap-2"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},se),React.createElement("div",{className:"text-[12px] font-semibold text-white/55 tabular-nums"},"\u2014 ",me(Pe)," kcal")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{h&&h({scope:"MEAL",dayKey:M,mealKey:Le})}catch(Wt){}},className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/75","aria-label":"Meal actions for "+se,title:"Meal actions"},"\u22EF"),React.createElement("button",{type:"button",disabled:N,onClick:()=>{try{a&&a({dayKey:M,mealKey:Le})}catch(Wt){}},className:["h-9 w-9 rounded-full border flex items-center justify-center text-[16px] font-bold transition",N?"border-white/10 bg-white/5 text-white/35":"border-white/15 bg-white/8 hover:bg-white/12 text-white"].join(" "),"aria-label":"Add food to "+se,title:"Add food"},"+"))),React.createElement("div",{className:"rounded-2xl border border-white/10 overflow-hidden"},(at||[]).length===0?React.createElement("div",{className:"px-4 py-3 text-[13px] font-semibold text-white/55"},"No entries"):(at||[]).map((Wt,Ha)=>{var ri,Da,Va,Y,ft,_a;var qa=Wt.name||Wt.foodName||Wt.payload&&(Wt.payload.foodName||Wt.payload.name)||"Food item",oa=Wt.serving||Wt.payload&&Wt.payload.serving||"",Ra=Number((_a=(ft=(Va=(ri=Wt.calories)!=null?ri:Wt.kcal)!=null?Va:(Da=Wt==null?void 0:Wt.payload)==null?void 0:Da.calories)!=null?ft:(Y=Wt==null?void 0:Wt.payload)==null?void 0:Y.kcal)!=null?_a:0)||0;return React.createElement("div",{key:(Wt.id||"row")+"-"+Ha,className:["px-4 py-3 bg-white/[0.02]",Ha!==0?"border-t border-white/10":""].join(" "),onClick:()=>{try{c&&c({dayKey:M,entryId:Wt.id})}catch(Ja){}}},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[13px] font-semibold text-white/90 truncate"},String(qa)),oa?React.createElement("div",{className:"mt-0.5 text-[12px] font-semibold text-white/50 truncate"},String(oa)):null),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[12px] font-semibold text-white/75 tabular-nums"},me(Ra)," kcal"),React.createElement("button",{type:"button",onClick:Ja=>{try{Ja&&Ja.stopPropagation&&Ja.stopPropagation()}catch(Ui){}try{r&&r({dayKey:M,id:Wt.id})}catch(Ui){}},className:"mt-1 text-[11px] font-semibold text-white/40 hover:text-white/70"},"Delete"))))})),React.createElement("div",{className:"mt-4 h-px bg-white/10"}))},Qe="__fof_nutrition_targets_v1",nt=()=>{try{var Le=localStorage.getItem(Qe),se=Le?JSON.parse(Le):null;return{...{kcal:2e3,p:150,c:200,f:70},...se||{}}}catch(Le){return{kcal:2e3,p:150,c:200,f:70}}},Lt=({values:Le=[],height:se=34})=>{var at=(()=>{var Pe=(Le||[]).map(ri=>Number(ri||0)),Wt=Math.max(1,...Pe),Ha=Math.min(...Pe,0),qa=Math.max(1,Wt-Ha),oa=120,Ra=se;return Pe.map((ri,Da)=>{var Va=Pe.length<=1?0:Da*(oa/(Pe.length-1)),Y=Ra-(ri-Ha)/qa*(Ra-4)-2;return`${Va.toFixed(1)},${Y.toFixed(1)}`}).join(" ")})();return React.createElement("svg",{width:"120",height:se,viewBox:`0 0 120 ${se}`,className:"opacity-90"},React.createElement("polyline",{points:at,fill:"none",stroke:"rgba(255,255,255,0.45)",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}))};return React.createElement("div",{className:"w-full"},React.createElement(re,null),Ae==="WEEK"?React.createElement(()=>{var[Le,se]=React.useState(!1),[at,Pe]=React.useState(()=>nt());React.useEffect(()=>{try{Pe(nt())}catch(ft){}},[we,M]);var Wt=React.useMemo(()=>{var ft=[];for(var _a=6;_a>=0;_a--)ft.push(de(M,-_a));return ft},[M]),Ha=React.useMemo(()=>{var ft=localStorage.getItem(Ne),_a=ft?JSON.parse(ft):[],Ja=Array.isArray(_a)?_a:[],Ui={};Wt.forEach(Ke=>{Ui[Ke]={dk:Ke,kcal:0,p:0,c:0,f:0,meals:{BREAKFAST:0,LUNCH:0,DINNER:0,SNACK:0}}}),Ja.forEach(Ke=>{var Ni,ys,Ps,Ms,o,d,m,E,g,f,F,D,k,T,he,oe,ke,Re,Me,Et,ya;if(!Ke||!Ke.dk)return;var ua=String(Ke.dk);if(!Ui[ua])return;var ga=Number((d=(o=(Ps=(Ni=Ke.calories)!=null?Ni:Ke.kcal)!=null?Ps:(ys=Ke==null?void 0:Ke.payload)==null?void 0:ys.calories)!=null?o:(Ms=Ke==null?void 0:Ke.payload)==null?void 0:Ms.kcal)!=null?d:0)||0,Vi=Number((F=(f=(E=Ke.p)!=null?E:(m=Ke==null?void 0:Ke.payload)==null?void 0:m.protein)!=null?f:(g=Ke==null?void 0:Ke.payload)==null?void 0:g.p)!=null?F:0)||0,$i=Number((oe=(he=(k=Ke.c)!=null?k:(D=Ke==null?void 0:Ke.payload)==null?void 0:D.carbs)!=null?he:(T=Ke==null?void 0:Ke.payload)==null?void 0:T.c)!=null?oe:0)||0,Ya=Number((ya=(Et=(Re=Ke.f)!=null?Re:(ke=Ke==null?void 0:Ke.payload)==null?void 0:ke.fat)!=null?Et:(Me=Ke==null?void 0:Ke.payload)==null?void 0:Me.f)!=null?ya:0)||0;Ui[ua].kcal+=ga,Ui[ua].p+=Vi,Ui[ua].c+=$i,Ui[ua].f+=Ya;var Zt=String(Ke.type||Ke.meal||"").toUpperCase(),Ki=Zt.includes("BREAKFAST")||Zt==="B"?"BREAKFAST":Zt.includes("LUNCH")?"LUNCH":Zt.includes("DINNER")?"DINNER":Zt.includes("SNACK")?"SNACK":Ke.payload&&Ke.payload.meal?String(Ke.payload.meal).toUpperCase():"",Fa=["BREAKFAST","LUNCH","DINNER","SNACK"].includes(Ki)?Ki:"SNACK";Ui[ua].meals[Fa]=(Ui[ua].meals[Fa]||0)+1});var qs=Wt.map(Ke=>Ui[Ke]),_o=qs.reduce((Ke,ua)=>({kcal:Ke.kcal+ua.kcal,p:Ke.p+ua.p,c:Ke.c+ua.c,f:Ke.f+ua.f}),{kcal:0,p:0,c:0,f:0}),ki={kcal:_o.kcal/7,p:_o.p/7,c:_o.c/7,f:_o.f/7},Vs={BREAKFAST:qs.filter(Ke=>(Ke.meals.BREAKFAST||0)>0).length,LUNCH:qs.filter(Ke=>(Ke.meals.LUNCH||0)>0).length,DINNER:qs.filter(Ke=>(Ke.meals.DINNER||0)>0).length,SNACK:qs.filter(Ke=>(Ke.meals.SNACK||0)>0).length};return{arr:qs,sum:_o,avg:ki,mealConsistency:Vs}},[Wt,we,M]),qa=(Ha.arr||[]).map(ft=>ft.kcal),oa=(Ha.arr||[]).map(ft=>ft.p),Ra=(Ha.arr||[]).map(ft=>ft.c),ri=(Ha.arr||[]).map(ft=>ft.f),Da=Math.max(1,...qa),Va=ft=>{try{return new Date(String(ft)+"T00:00:00").toLocaleDateString(void 0,{weekday:"short"}).slice(0,2)}catch(_a){return String(ft).slice(5)}},Y=ft=>{try{var _a={kcal:Number(ft.kcal||0),p:Number(ft.p||0),c:Number(ft.c||0),f:Number(ft.f||0)};localStorage.setItem(Qe,JSON.stringify(_a)),Pe(_a);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{type:"NUTRITION_TARGETS"}}))}catch(Ja){}}catch(_a){}};return React.createElement("div",{className:"px-4 pt-3 pb-6"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/55 uppercase tracking-wide"},"Weekly summary"),React.createElement("div",{className:"text-[12px] font-semibold text-white/55"},"Last 7 days")),React.createElement("button",{type:"button",onClick:()=>{try{De(V())}catch(ft){}},className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-2 text-[11px] font-extrabold text-white/75"},"Jump to today")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Calories"),React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Avg ",me(Ha.avg.kcal)," kcal/day")),React.createElement("div",{className:"text-[11px] font-extrabold text-white/70 tabular-nums"},me(Ha.sum.kcal)," kcal")),React.createElement("div",{className:"mt-3 flex items-end gap-1"},(Ha.arr||[]).map((ft,_a)=>{var Ja=Math.max(6,Math.round(ft.kcal/Da*44)),Ui=at.kcal>0?ft.kcal>=at.kcal*.9&&ft.kcal<=at.kcal*1.1:!1;return React.createElement("div",{key:_a,role:"button",tabIndex:0,onClick:()=>{try{De(ft.dk),Oe("DAY")}catch(qs){}},onKeyDown:qs=>{if(qs.key==="Enter"||qs.key===" ")try{De(ft.dk),Oe("DAY")}catch(_o){}},className:"flex-1 cursor-pointer"},React.createElement("div",{className:"w-full rounded-md "+(ft.kcal>0?Ui?"bg-white/35":"bg-white/25":"bg-white/10"),style:{height:Ja}}),React.createElement("div",{className:"mt-1 text-[10px] font-bold text-white/45 text-center"},Va(ft.dk)))})),React.createElement("div",{className:"mt-2 text-[11px] font-semibold text-white/45"},"Bars reflect daily calories (7d).")),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Macros"),React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Avg/day")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-semibold text-white/65"},"Protein"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement(Lt,{values:oa}),React.createElement("div",{className:"text-[11px] font-extrabold text-white/75 tabular-nums w-14 text-right"},me(Ha.avg.p),"g"))),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-semibold text-white/65"},"Carbs"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement(Lt,{values:Ra}),React.createElement("div",{className:"text-[11px] font-extrabold text-white/75 tabular-nums w-14 text-right"},me(Ha.avg.c),"g"))),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-semibold text-white/65"},"Fat"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement(Lt,{values:ri}),React.createElement("div",{className:"text-[11px] font-extrabold text-white/75 tabular-nums w-14 text-right"},me(Ha.avg.f),"g")))),React.createElement("div",{className:"mt-2 text-[11px] font-semibold text-white/45"},"Lightweight 7d trend preview (A4.4).")),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Meal consistency"),React.createElement("div",{className:"mt-1 text-[11px] font-semibold text-white/55"},"Days with at least one entry"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},[["Breakfast","BREAKFAST"],["Lunch","LUNCH"],["Dinner","DINNER"],["Snacks","SNACK"]].map(([ft,_a])=>React.createElement("div",{key:_a,className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},ft),React.createElement("div",{className:"text-[12px] font-black text-white tabular-nums"},Ha.mealConsistency[_a],React.createElement("span",{className:"text-white/45"},"/7")))))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Targets"),React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Simplistic initial targets (editable)")),React.createElement("button",{type:"button",onClick:()=>se(!0),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-2 text-[11px] font-extrabold text-white/75"},"Edit")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},"Calories"),React.createElement("div",{className:"mt-1 text-[14px] font-black text-white tabular-nums"},me(at.kcal)," ",React.createElement("span",{className:"text-white/55 text-[12px]"},"kcal"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},"Protein"),React.createElement("div",{className:"mt-1 text-[14px] font-black text-white tabular-nums"},me(at.p)," ",React.createElement("span",{className:"text-white/55 text-[12px]"},"g"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},"Carbs"),React.createElement("div",{className:"mt-1 text-[14px] font-black text-white tabular-nums"},me(at.c)," ",React.createElement("span",{className:"text-white/55 text-[12px]"},"g"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},"Fat"),React.createElement("div",{className:"mt-1 text-[14px] font-black text-white tabular-nums"},me(at.f)," ",React.createElement("span",{className:"text-white/55 text-[12px]"},"g"))))),Le?React.createElement("div",{className:"fixed inset-0 z-[9999] bg-black/70 flex items-end justify-center"},React.createElement("div",{className:"w-full max-w-[520px] rounded-t-3xl border border-white/10 bg-[#0b0b0f] p-4 pb-6"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Edit targets"),React.createElement("button",{type:"button",onClick:()=>se(!1),className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-white/80"},"\u2715")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},[["Calories","kcal","kcal"],["Protein","p","g"],["Carbs","c","g"],["Fat","f","g"]].map(([ft,_a,Ja])=>{var Ui;return React.createElement("label",{key:_a,className:"rounded-2xl border border-white/10 bg-white/5 p-3 block"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},ft),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("input",{value:String((Ui=at[_a])!=null?Ui:""),onChange:qs=>{var _o=qs.target.value;Pe(ki=>({...ki,[_a]:_o}))},className:"w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] font-semibold text-white outline-none",inputMode:"numeric"}),React.createElement("div",{className:"text-[11px] font-bold text-white/45"},Ja)))})),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Y(at),se(!1)}catch(ft){}},className:"flex-1 rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold"},"Save"),React.createElement("button",{type:"button",onClick:()=>{try{var ft=nt();Pe(ft)}catch(ft){}},className:"rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white/80 hover:bg-white/10"},"Reset")))):null)},null):React.createElement(React.Fragment,null,React.createElement(Z,{mealKey:"BREAKFAST",title:"Breakfast"}),React.createElement(Z,{mealKey:"LUNCH",title:"Lunch"}),React.createElement(Z,{mealKey:"DINNER",title:"Dinner"}),React.createElement(Z,{mealKey:"SNACK",title:"Snacks"}),React.createElement("div",{className:"h-6"})))},z=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),H=(e,a)=>{try{var r=localStorage.getItem(e);if(!r)return a;var c=JSON.parse(r);return c==null?a:c}catch(r){return a}},Ht=(e,a)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch(r){}},Nt=({open:e,scope:a="DAY",dayKey:r=null,mealKey:c=null,onClose:h})=>{if(!e)return null;var V=React.useMemo(()=>{try{return r||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(j){return r||null}},[r]),de=(j,je)=>{try{var re=new Date(String(j)+"T00:00:00");return re.setDate(re.getDate()+(Number(je)||0)),window.__fof_localDateKey?window.__fof_localDateKey(re):re.toISOString().slice(0,10)}catch(re){return j}},M="__fof_nutrition_events_v1",De="__fof_food_favorites_custom_v1",Ae="__fof_saved_meals_v1",Oe=(j,je)=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:j,message:je}}))}catch(re){}},N=()=>{var j=H(M,[]);return Array.isArray(j)?j:[]},Ne=j=>{Ht(M,Array.isArray(j)?j:[]);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:V,type:"NUTRITION"}}))}catch(je){}},G=()=>{var j=de(V,-1),je=N(),re=je.filter(Lt=>Lt&&String(Lt.dk)===String(j)),Z=a==="MEAL"&&c?re.filter(Lt=>String(Lt.type||"").toUpperCase()===String(c).toUpperCase()):re;if(!Z.length){Oe("Nothing to copy","No entries found for yesterday.");return}var Qe=Date.now(),nt=Z.map((Lt,ze)=>({...Lt,id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"c_"+Math.random().toString(16).slice(2),dk:V,ts:Qe+ze,src:"copy_yesterday"}));Ne([...je,...nt]),Oe("Copied",a==="MEAL"?"Meal copied from yesterday.":"Day copied from yesterday.");try{h&&h()}catch(Lt){}},we=()=>{if(a!=="MEAL"||!c){Oe("Select a meal","Open actions from a meal header to save a meal.");return}var je=N().filter(Le=>Le&&String(Le.dk)===String(V)&&String(Le.type||"").toUpperCase()===String(c).toUpperCase());if(!je.length){Oe("Empty meal","Add foods to this meal first.");return}var Z=`${String(c).toUpperCase()==="BREAKFAST"?"Breakfast":String(c).toUpperCase()==="LUNCH"?"Lunch":String(c).toUpperCase()==="DINNER"?"Dinner":"Snacks"} \u2022 ${V}`,Qe=typeof window.prompt=="function"&&window.prompt("Name this meal",Z)||Z,nt={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"sm_"+Math.random().toString(16).slice(2),name:String(Qe||Z),createdAt:Date.now(),items:je.map(Le=>({name:String(Le.name||"Food").trim(),serving:String(Le.serving||"").trim(),kcal:Number(Le.calories||0),p:Number(Le.p||0),c:Number(Le.c||0),f:Number(Le.f||0)}))},Lt=H(Ae,[]),ze=Array.isArray(Lt)?Lt:[];ze.unshift(nt),Ht(Ae,ze.slice(0,50)),Oe("Saved meal","Added to Saved Meals.")},$t=()=>{var j,je;try{(je=(j=window.__fof_openers)==null?void 0:j.openSavedMealsSheet)==null||je.call(j,V,{mealKey:c||null})}catch(re){}try{h&&h()}catch(re){}},gt=()=>{var j,je;try{(je=(j=window.__fof_openers)==null?void 0:j.openQuickAddMacrosSheet)==null||je.call(j,V,{mealKey:c||null})}catch(re){}try{h&&h()}catch(re){}},_e=()=>{var j,je;try{(je=(j=window.__fof_openers)==null?void 0:j.openBarcodeStubSheet)==null||je.call(j)}catch(re){}try{h&&h()}catch(re){}},ve=({title:j,subtitle:je,onClick:re,danger:Z=!1})=>React.createElement("button",{type:"button",onClick:re,className:["w-full text-left rounded-2xl border px-4 py-3 transition",Z?"border-red-400/20 bg-red-500/10 hover:bg-red-500/15":"border-white/10 bg-white/5 hover:bg-white/10"].join(" ")},React.createElement("div",{className:["text-[13px] font-extrabold",Z?"text-red-100":"text-white"].join(" ")},j),je?React.createElement("div",{className:["mt-1 text-[12px] font-semibold",Z?"text-red-100/70":"text-white/60"].join(" ")},je):null);return React.createElement("div",{className:"fixed inset-0 z-[10060]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:h}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-[#0b0b0f] overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-extrabold text-white"},a==="MEAL"?"Meal actions":"Day actions"),React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},V,a==="MEAL"&&c?` \u2022 ${String(c).toUpperCase()}`:"")),React.createElement("button",{type:"button",onClick:h,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"p-4 space-y-2"},React.createElement(ve,{title:"Quick add macros",subtitle:"Log calories + macros without searching.",onClick:gt}),React.createElement(ve,{title:"Add from Saved Meals",subtitle:"Reuse a saved meal template.",onClick:$t}),a==="MEAL"?React.createElement(ve,{title:"Save this meal",subtitle:"Create a reusable meal template from this meal.",onClick:we}):null,React.createElement(ve,{title:"Copy from yesterday",subtitle:a==="MEAL"?"Copy yesterday\u2019s same meal.":"Copy yesterday\u2019s whole day.",onClick:G}),React.createElement(ve,{title:"Barcode scanner",subtitle:"Preview (A4.4 stub) \u2014 wired later.",onClick:_e})),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 text-[11px] text-white/45 font-semibold"},"A4.4 adds utility actions without changing the locked navigation or Capacity system."))))},U=({open:e,dayKey:a=null,preset:r=null,onClose:c})=>{if(!e)return null;var h=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Qe){return a||null}},[a]),V=r&&r.mealKey?String(r.mealKey):"SNACK",[de,M]=React.useState(()=>String(V).toUpperCase());React.useEffect(()=>{try{M(String(V).toUpperCase())}catch(Qe){}},[V,e]);var[De,Ae]=React.useState("MEALS"),[Oe,N]=React.useState("Quick Add"),[Ne,G]=React.useState(""),[we,$t]=React.useState(""),[gt,_e]=React.useState(""),[ve,me]=React.useState(""),j=Qe=>String(Qe||"").replace(/[^\d.]/g,""),je=j(Ne)||j(we)||j(gt)||j(ve),re=()=>{if(!je)return;var Qe="__fof_nutrition_events_v1",nt="__fof_food_favorites_custom_v1",ze={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"qa_"+Math.random().toString(16).slice(2),dk:h,type:String(de||"SNACK").toUpperCase(),name:String(Oe||"Quick Add").trim()||"Quick Add",serving:"",calories:Number(j(Ne)||0),p:Number(j(we)||0),c:Number(j(gt)||0),f:Number(j(ve)||0),ts:Date.now(),src:"quick_add"};try{var Le=H(Qe,[]),se=Array.isArray(Le)?Le:[];se.push(ze),Ht(Qe,se)}catch(Le){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:h,type:"NUTRITION"}}))}catch(Le){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:"Quick add saved."}}))}catch(Le){}try{c&&c()}catch(Le){}},Z=({k:Qe,label:nt})=>React.createElement("button",{type:"button",onClick:()=>M(Qe),className:["px-3 py-2 rounded-2xl border text-[12px] font-black",de===Qe?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},nt);return React.createElement("div",{className:"fixed inset-0 z-[10070] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Quick Add"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},h)),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Z,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(Z,{k:"LUNCH",label:"Lunch"}),React.createElement(Z,{k:"DINNER",label:"Dinner"}),React.createElement(Z,{k:"SNACK",label:"Snacks"}))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Ae("MEALS"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",De==="MEALS"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Meals"),React.createElement("button",{type:"button",onClick:()=>Ae("RECIPES"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",De==="RECIPES"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Recipes")),React.createElement("div",{className:"flex-1 overflow-auto px-4 pt-4 pb-6 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Label"),React.createElement("input",{value:Oe,onChange:Qe=>N(Qe.target.value),className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Calories"),React.createElement("input",{value:Ne,inputMode:"decimal",onChange:Qe=>G(j(Qe.target.value)),placeholder:"0",className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"})),React.createElement("div",{className:"text-[11px] text-white/45 font-semibold flex items-end"},"Optional if you only track macros \u2014 fill what you have.")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Macros (g)"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("input",{value:we,inputMode:"decimal",onChange:Qe=>$t(j(Qe.target.value)),placeholder:"Protein",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}),React.createElement("input",{value:gt,inputMode:"decimal",onChange:Qe=>_e(j(Qe.target.value)),placeholder:"Carbs",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}),React.createElement("input",{value:ve,inputMode:"decimal",onChange:Qe=>me(j(Qe.target.value)),placeholder:"Fat",className:"w-full rounded-2xl border border-white/10 bg-black/30 px-3 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none tabular-nums"}))))),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 bg-[#0b0b0f]"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:c,className:"px-4 py-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[13px] font-bold text-white/80"},"Cancel"),React.createElement("button",{type:"button",disabled:!je,onClick:re,className:["flex-1 px-4 py-3 rounded-2xl border text-[13px] font-bold",je?"border-white/15 bg-white/10 hover:bg-white/15 text-white":"border-white/10 bg-white/5 text-white/35"].join(" ")},"Add")))))},Q=({open:e,dayKey:a=null,preset:r=null,onClose:c})=>{if(!e)return null;var h=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(Z){return a||null}},[a]),V=r&&r.mealKey?String(r.mealKey):"SNACK",[de,M]=React.useState(()=>String(V).toUpperCase());React.useEffect(()=>{try{M(String(V).toUpperCase())}catch(Z){}},[V,e]);var De="__fof_saved_meals_v1",[Ae,Oe]=React.useState(()=>{var Z=H(De,[]);return Array.isArray(Z)?Z:[]}),N="__fof_saved_recipes_v1",[Ne,G]=React.useState("MEALS"),[we,$t]=React.useState(()=>{var Z=H(N,[]);return Array.isArray(Z)?Z:[]});React.useEffect(()=>{var Z=()=>{try{var Qe=H(De,[]);Oe(Array.isArray(Qe)?Qe:[])}catch(Qe){}try{var Qe=H(N,[]);$t(Array.isArray(Qe)?Qe:[])}catch(Qe){}};return window.addEventListener("storage",Z),()=>window.removeEventListener("storage",Z)},[]);var gt=({k:Z,label:Qe})=>React.createElement("button",{type:"button",onClick:()=>M(Z),className:["px-3 py-2 rounded-2xl border text-[12px] font-black",de===Z?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},Qe),_e=Z=>{if(!Z)return;var Qe="__fof_nutrition_events_v1",nt="__fof_food_favorites_custom_v1",Lt=H(Qe,[]),ze=Array.isArray(Lt)?Lt:[],Le=Date.now(),se=Array.isArray(Z.items)?Z.items:[],at=[...ze];se.forEach((Pe,Wt)=>{at.push({id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"smadd_"+Math.random().toString(16).slice(2),dk:h,type:String(de||"SNACK").toUpperCase(),name:String(Pe.name||"Food").trim(),serving:String(Pe.serving||"").trim(),calories:Number(Pe.kcal||0),p:Number(Pe.p||0),c:Number(Pe.c||0),f:Number(Pe.f||0),ts:Le+Wt,src:"saved_meal"})}),Ht(Qe,at);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:h,type:"NUTRITION"}}))}catch(Pe){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:"Saved meal added."}}))}catch(Pe){}try{c&&c()}catch(Pe){}},ve=Z=>{if(!(typeof window.confirm=="function"?window.confirm("Delete this saved meal?"):!0))return;var nt=(Ae||[]).filter(Lt=>Lt&&String(Lt.id)!==String(Z));Ht(De,nt),Oe(nt)},me=Z=>(Array.isArray(Z.items)?Z.items:[]).reduce((Lt,ze)=>(Lt.k+=Number(ze.kcal||0),Lt.p+=Number(ze.p||0),Lt.c+=Number(ze.c||0),Lt.f+=Number(ze.f||0),Lt),{k:0,p:0,c:0,f:0}),j=Z=>{var Qe=Z&&Z.totals?Z.totals:{k:0,p:0,c:0,f:0},nt=Math.max(1,Number(Z&&Z.servings?Z.servings:1));return{k:Number(Qe.k||0)/nt,p:Number(Qe.p||0)/nt,c:Number(Qe.c||0)/nt,f:Number(Qe.f||0)/nt,sv:nt}},je=Z=>{if(!Z)return;var Qe="__fof_nutrition_events_v1",nt=H(Qe,[]),Lt=Array.isArray(nt)?nt:[],ze=Date.now(),Le=j(Z),se=[...Lt];se.push({id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"rcadd_"+Math.random().toString(16).slice(2),dk:h,type:String(de||"SNACK").toUpperCase(),name:String(Z.name||"Recipe").trim(),serving:"1 serving",calories:Number(Le.k||0),p:Number(Le.p||0),c:Number(Le.c||0),f:Number(Le.f||0),ts:ze,src:"saved_recipe"}),Ht(Qe,se);try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:h,type:"NUTRITION"}}))}catch(at){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:"Recipe added."}}))}catch(at){}try{c&&c()}catch(at){}},re=Z=>{if(!(typeof window.confirm=="function"?window.confirm("Delete this saved recipe?"):!0))return;var nt=(we||[]).filter(Lt=>Lt&&String(Lt.id)!==String(Z));Ht(N,nt),$t(nt)};return React.createElement("div",{className:"fixed inset-0 z-[10075] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Saved Meals"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Add to ",h)),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(gt,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(gt,{k:"LUNCH",label:"Lunch"}),React.createElement(gt,{k:"DINNER",label:"Dinner"}),React.createElement(gt,{k:"SNACK",label:"Snacks"}))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>G("MEALS"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",Ne==="MEALS"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Meals"),React.createElement("button",{type:"button",onClick:()=>G("RECIPES"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",Ne==="RECIPES"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Recipes")),React.createElement("div",{className:"flex-1 overflow-auto px-4 pt-4 pb-6"},Ne==="MEALS"?React.createElement(React.Fragment,null,(Ae||[]).length?React.createElement("div",{className:"space-y-2"},(Ae||[]).slice(0,40).map(Z=>{var Qe=me(Z);return React.createElement("div",{key:Z.id,className:"rounded-2xl border border-white/10 bg-white/[0.03] overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>_e(Z),className:"w-full text-left px-4 py-3 hover:bg-white/5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},Z.name||"Saved meal"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55 font-semibold tabular-nums"},Math.round(Qe.k)," kcal \u2022 P ",Math.round(Qe.p)," C ",Math.round(Qe.c)," F ",Math.round(Qe.f))),React.createElement("div",{className:"text-[11px] text-white/45 font-semibold"},(Z.items||[]).length," items"))),React.createElement("div",{className:"px-4 pb-3 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>ve(Z.id),className:"text-[11px] font-semibold text-white/40 hover:text-white/70"},"Delete")))})):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4 text-[13px] text-white/60 font-semibold"},"No saved meals yet. Use \u201CCreate Meal\u201D in Log Food or \u201CSave this meal\u201D in meal actions.")):React.createElement(React.Fragment,null,(we||[]).length?React.createElement("div",{className:"space-y-2"},(we||[]).slice(0,40).map(Z=>{var Qe=j(Z);return React.createElement("div",{key:Z.id,className:"rounded-2xl border border-white/10 bg-white/[0.03] overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>je(Z),className:"w-full text-left px-4 py-3 hover:bg-white/5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},Z.name||"Saved recipe"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55 font-semibold tabular-nums"},Math.round(Qe.k)," kcal \u2022 P ",Math.round(Qe.p)," C ",Math.round(Qe.c)," F ",Math.round(Qe.f))),React.createElement("div",{className:"text-[11px] text-white/45 font-semibold"},Math.max(1,Number(Z.servings||1))," servings"))),React.createElement("div",{className:"px-4 pb-3 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>re(Z.id),className:"text-[11px] font-semibold text-white/40 hover:text-white/70"},"Delete")))})):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4 text-[13px] text-white/60 font-semibold"},"No saved recipes yet. Use \u201CCreate Recipe\u201D in Log Food.")))))},w=({open:e,dayKey:a=null,preset:r=null,onClose:c})=>{if(!e)return null;var h=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(ze){return a||null}},[a]),V=r&&r.mealKey?String(r.mealKey):"SNACK",[de,M]=React.useState(()=>String(V).toUpperCase());React.useEffect(()=>{try{M(String(V).toUpperCase())}catch(ze){}},[V,e]);var De="__fof_saved_meals_v1",Ae="__fof_nutrition_events_v1",[Oe,N]=React.useState(""),[Ne,G]=React.useState(()=>({})),[we,$t]=React.useState([]),[gt,_e]=React.useState(""),ve=React.useMemo(()=>{var ze=H(Ae,[]);return(Array.isArray(ze)?ze:[]).filter(se=>se&&String(se.dk)===String(h)&&String(se.type||"").toUpperCase()===String(de).toUpperCase())},[h,de]);React.useEffect(()=>{var ze={};(ve||[]).forEach(se=>{ze[String(se.id)]=!0}),G(ze);var Le=String(de).toUpperCase()==="BREAKFAST"?"Breakfast":String(de).toUpperCase()==="LUNCH"?"Lunch":String(de).toUpperCase()==="DINNER"?"Dinner":"Snacks";N(`${Le}`),$t([]),_e("")},[e,h,de]);var me=ze=>G(Le=>({...Le||{},[String(ze)]:!(Le!=null&&Le[String(ze)])})),j=React.useMemo(()=>{var ze=Ne||{};return(ve||[]).filter(Le=>ze[String(Le.id)])},[ve,Ne]),je=ze=>{if(ze){$t(Le=>[...Le||[],{name:String(ze.name||"Food").trim(),serving:String(ze.serving||"").trim(),kcal:Number(ze.kcal||0),p:Number(ze.p||0),c:Number(ze.c||0),f:Number(ze.f||0)}]);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:"Added to meal draft."}}))}catch(Le){}}},re=React.useMemo(()=>{var ze=(gt||"").trim().toLowerCase();if(!ze)return[];try{return(window.__fof_food_db_v1||[]).filter(Le=>(String(Le.name||"")+" "+String(Le.brand||"")).toLowerCase().includes(ze)).slice(0,12)}catch(Le){return[]}},[gt]),Z=(Oe||"").trim().length>0&&j.length+(we||[]).length>0,Qe=()=>{if(!Z)return;var ze=[...j.map(Pe=>({name:String(Pe.name||"Food").trim(),serving:String(Pe.serving||"").trim(),kcal:Number(Pe.calories||0),p:Number(Pe.p||0),c:Number(Pe.c||0),f:Number(Pe.f||0)})),...we||[]],Le={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"sm_"+Math.random().toString(16).slice(2),name:String((Oe||"Meal").trim()),createdAt:Date.now(),items:ze},se=H(De,[]),at=Array.isArray(se)?se:[];at.unshift(Le),Ht(De,at.slice(0,50));try{window.dispatchEvent(new CustomEvent("storage",{detail:{key:De}}))}catch(Pe){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved meal",message:"Available under Meals."}}))}catch(Pe){}try{c&&c()}catch(Pe){}},nt=({k:ze,label:Le})=>React.createElement("button",{type:"button",onClick:()=>M(ze),className:["px-3 py-2 rounded-2xl border text-[12px] font-black",de===ze?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},Le),Lt=({it:ze,right:Le})=>React.createElement("div",{className:"flex items-center justify-between gap-3 px-3 py-2 border border-white/10 bg-white/[0.03] rounded-2xl"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},ze.title),React.createElement("div",{className:"text-[12px] font-semibold text-white/55 truncate"},ze.sub)),Le);return React.createElement("div",{className:"fixed inset-0 z-[10078] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Create Meal"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Save a reusable meal template")),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(nt,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(nt,{k:"LUNCH",label:"Lunch"}),React.createElement(nt,{k:"DINNER",label:"Dinner"}),React.createElement(nt,{k:"SNACK",label:"Snacks"})),React.createElement("div",{className:"mt-3"},React.createElement("input",{value:Oe,onChange:ze=>N(ze.target.value),placeholder:"Meal name",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"}))),React.createElement("div",{className:"flex-1 overflow-auto px-4 pt-4 pb-28 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/70 mb-2"},"Included foods"),(ve||[]).length?React.createElement("div",{className:"space-y-2"},(ve||[]).map(ze=>React.createElement(Lt,{key:ze.id,it:{title:String(ze.name||"Food"),sub:`${String(ze.serving||"")} \u2022 ${Math.round(Number(ze.calories||0))} kcal`},right:React.createElement("button",{type:"button",onClick:()=>me(ze.id),className:["h-9 px-3 rounded-2xl border text-[12px] font-black",Ne!=null&&Ne[String(ze.id)]?"border-white/20 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"].join(" ")},Ne!=null&&Ne[String(ze.id)]?"Included":"Include")}))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4 text-[13px] text-white/60 font-semibold"},"No foods in this meal yet. Use search below to add items."),(we||[]).length?React.createElement("div",{className:"mt-3 space-y-2"},(we||[]).map((ze,Le)=>React.createElement(Lt,{key:"x_"+Le,it:{title:ze.name,sub:`${ze.serving} \u2022 ${Math.round(Number(ze.kcal||0))} kcal`},right:React.createElement("button",{type:"button",onClick:()=>$t(se=>(se||[]).filter((at,Pe)=>Pe!==Le)),className:"h-9 px-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-black text-white/70"},"Remove")}))):null),React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/70 mb-2"},"Add more (optional)"),React.createElement("input",{value:gt,onChange:ze=>_e(ze.target.value),placeholder:"Search foods to add",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"}),(re||[]).length?React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/[0.03] overflow-hidden"},(re||[]).map(ze=>React.createElement("div",{key:ze.id,className:"flex items-center justify-between gap-3 px-4 py-3 border-t border-white/10 first:border-t-0"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},ze.name),React.createElement("div",{className:"text-[12px] font-semibold text-white/55 truncate"},ze.serving," \u2022 ",Math.round(Number(ze.kcal||0))," kcal")),React.createElement("button",{type:"button",onClick:()=>je(ze),className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 font-extrabold"},"\uFF0B")))):null)),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-3 bg-gradient-to-t from-black/60 to-transparent"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-[#0b0b0f] overflow-hidden"},React.createElement("div",{className:"p-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/55 font-semibold truncate"},Z?"Ready to save":"Select at least 1 food + name the meal"),React.createElement("button",{type:"button",onClick:Qe,disabled:!Z,className:["px-5 py-3 rounded-2xl text-[13px] font-extrabold",Z?"bg-white text-black":"bg-white/10 text-white/35"].join(" ")},"Save Meal"))))))},L=({open:e,dayKey:a=null,preset:r=null,onClose:c})=>{if(!e)return null;var h=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(ze){return a||null}},[a]),V=r&&r.mealKey?String(r.mealKey):"SNACK",[de,M]=React.useState(()=>String(V).toUpperCase());React.useEffect(()=>{try{M(String(V).toUpperCase())}catch(ze){}},[V,e]);var De="__fof_nutrition_events_v1",Ae="__fof_saved_recipes_v1",[Oe,N]=React.useState(""),[Ne,G]=React.useState("1"),[we,$t]=React.useState([]),[gt,_e]=React.useState(""),ve=React.useMemo(()=>{var ze=H(De,[]);return(Array.isArray(ze)?ze:[]).filter(se=>se&&String(se.dk)===String(h)&&String(se.type||"").toUpperCase()===String(de).toUpperCase())},[h,de]);React.useEffect(()=>{var ze=String(de).toUpperCase()==="BREAKFAST"?"Breakfast":String(de).toUpperCase()==="LUNCH"?"Lunch":String(de).toUpperCase()==="DINNER"?"Dinner":"Snacks";N(`${ze} Recipe`),G("1"),$t((ve||[]).map(Le=>({name:String(Le.name||"Food").trim(),serving:String(Le.serving||"").trim(),kcal:Number(Le.calories||0),p:Number(Le.p||0),c:Number(Le.c||0),f:Number(Le.f||0)}))),_e("")},[e,h,de]);var me=ze=>{if(ze){$t(Le=>[...Le||[],{name:String(ze.name||"Food").trim(),serving:String(ze.serving||"").trim(),kcal:Number(ze.kcal||0),p:Number(ze.p||0),c:Number(ze.c||0),f:Number(ze.f||0)}]);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added",message:"Ingredient added."}}))}catch(Le){}}},j=React.useMemo(()=>{var ze=(gt||"").trim().toLowerCase();if(!ze)return[];try{return(window.__fof_food_db_v1||[]).filter(Le=>(String(Le.name||"")+" "+String(Le.brand||"")).toLowerCase().includes(ze)).slice(0,12)}catch(Le){return[]}},[gt]),je=React.useMemo(()=>(we||[]).reduce((Le,se)=>(Le.k+=Number(se.kcal||0),Le.p+=Number(se.p||0),Le.c+=Number(se.c||0),Le.f+=Number(se.f||0),Le),{k:0,p:0,c:0,f:0}),[we]),re=Math.max(1,Number(String(Ne||"1").replace(/[^\d.]/g,"")||1)),Z={k:je.k/re,p:je.p/re,c:je.c/re,f:je.f/re},Qe=(Oe||"").trim().length>0&&(we||[]).length>0&&re>0,nt=()=>{if(!Qe)return;var ze={id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"rc_"+Math.random().toString(16).slice(2),name:String((Oe||"Recipe").trim()),createdAt:Date.now(),servings:re,ingredients:we||[],totals:{k:je.k,p:je.p,c:je.c,f:je.f}},Le=H(Ae,[]),se=Array.isArray(Le)?Le:[];se.unshift(ze),Ht(Ae,se.slice(0,50));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved recipe",message:"Available under Recipes."}}))}catch(at){}try{c&&c()}catch(at){}},Lt=({k:ze,label:Le})=>React.createElement("button",{type:"button",onClick:()=>M(ze),className:["px-3 py-2 rounded-2xl border text-[12px] font-black",de===ze?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},Le);return React.createElement("div",{className:"fixed inset-0 z-[10079] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Create Recipe"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Ingredients + servings (MFP-style)")),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Lt,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(Lt,{k:"LUNCH",label:"Lunch"}),React.createElement(Lt,{k:"DINNER",label:"Dinner"}),React.createElement(Lt,{k:"SNACK",label:"Snacks"})),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("input",{value:Oe,onChange:ze=>N(ze.target.value),placeholder:"Recipe name",className:"col-span-2 w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"}),React.createElement("input",{value:Ne,onChange:ze=>G(ze.target.value),placeholder:"Servings",className:"col-span-1 w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"})),React.createElement("div",{className:"mt-2 text-[12px] text-white/55 font-semibold tabular-nums"},"Total ",Math.round(je.k)," kcal \u2022 Per serving ",Math.round(Z.k)," kcal \u2022 P ",Math.round(Z.p)," C ",Math.round(Z.c)," F ",Math.round(Z.f))),React.createElement("div",{className:"flex-1 overflow-auto px-4 pt-4 pb-28 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/70 mb-2"},"Ingredients"),(we||[]).length?React.createElement("div",{className:"space-y-2"},(we||[]).map((ze,Le)=>React.createElement("div",{key:"ing_"+Le,className:"flex items-center justify-between gap-3 px-3 py-2 border border-white/10 bg-white/[0.03] rounded-2xl"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},ze.name),React.createElement("div",{className:"text-[12px] font-semibold text-white/55 truncate"},ze.serving," \u2022 ",Math.round(Number(ze.kcal||0))," kcal")),React.createElement("button",{type:"button",onClick:()=>$t(se=>(se||[]).filter((at,Pe)=>Pe!==Le)),className:"h-9 px-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-black text-white/70"},"Remove")))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4 text-[13px] text-white/60 font-semibold"},"No ingredients yet. Add foods below.")),React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/70 mb-2"},"Add ingredient"),React.createElement("input",{value:gt,onChange:ze=>_e(ze.target.value),placeholder:"Search foods to add",className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-[14px] text-white placeholder:text-white/35 focus:outline-none"}),(j||[]).length?React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/[0.03] overflow-hidden"},(j||[]).map(ze=>React.createElement("div",{key:ze.id,className:"flex items-center justify-between gap-3 px-4 py-3 border-t border-white/10 first:border-t-0"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},ze.name),React.createElement("div",{className:"text-[12px] font-semibold text-white/55 truncate"},ze.serving," \u2022 ",Math.round(Number(ze.kcal||0))," kcal")),React.createElement("button",{type:"button",onClick:()=>me(ze),className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 font-extrabold"},"\uFF0B")))):null)),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-3 bg-gradient-to-t from-black/60 to-transparent"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-[#0b0b0f] overflow-hidden"},React.createElement("div",{className:"p-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/55 font-semibold truncate"},Qe?"Ready to save":"Add ingredients + set name"),React.createElement("button",{type:"button",onClick:nt,disabled:!Qe,className:["px-5 py-3 rounded-2xl text-[13px] font-extrabold",Qe?"bg-white text-black":"bg-white/10 text-white/35"].join(" ")},"Save Recipe"))))))},ut=({open:e,onClose:a})=>e?React.createElement("div",{className:"fixed inset-0 z-[10080] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Barcode Scanner"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Preview stub (wired later)")),React.createElement("button",{type:"button",onClick:a,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80"},"\u2715")),React.createElement("div",{className:"flex-1 overflow-auto p-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/[0.03] p-4"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Not wired yet"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"A4.4 keeps this as a safe, non-blocking stub. Next slice will wire camera permission, scanning, and a food match resolver."),React.createElement("div",{className:"mt-3 text-[12px] text-white/55 font-semibold"},"For now: use Search, Recent/Frequent, or Quick Add."))))):null,ot=({open:e,dayKey:a=null,entryId:r=null,onClose:c})=>{var Va,Y,ft,_a,Ja,Ui,qs,_o,ki,Vs,Ke,ua,ga,Vi,$i,Ya,Zt,Ki,Fa,Ni,ys,Ps,Ms,o;if(!e)return null;var h="__fof_nutrition_events_v1",V="__fof_food_favorites_custom_v1",de=React.useMemo(()=>{try{return a||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):null)}catch(d){return a||null}},[a]),[M,De]=React.useState(null),[Ae,Oe]=React.useState("MEALS"),N=React.useCallback(()=>{try{var d=localStorage.getItem(h),m=d?JSON.parse(d):[],g=(Array.isArray(m)?m:[]).find(f=>f&&String(f.id)===String(r)&&String(f.dk)===String(de));De(g||null)}catch(d){De(null)}},[r,de]);React.useEffect(()=>{e&&N()},[e,N]);var Ne=String((M==null?void 0:M.type)||(M==null?void 0:M.meal)||((Va=M==null?void 0:M.payload)==null?void 0:Va.meal)||"SNACK").toUpperCase(),[G,we]=React.useState(Ne),[$t,gt]=React.useState(String((M==null?void 0:M.name)||((Y=M==null?void 0:M.payload)==null?void 0:Y.name)||"")),[_e,ve]=React.useState(String((M==null?void 0:M.serving)||((ft=M==null?void 0:M.payload)==null?void 0:ft.serving)||"")),[me,j]=React.useState(String((ki=(_o=(Ui=(_a=M==null?void 0:M.calories)!=null?_a:M==null?void 0:M.kcal)!=null?Ui:(Ja=M==null?void 0:M.payload)==null?void 0:Ja.calories)!=null?_o:(qs=M==null?void 0:M.payload)==null?void 0:qs.kcal)!=null?ki:"")),[je,re]=React.useState(String((Vi=(ga=(Ke=M==null?void 0:M.p)!=null?Ke:(Vs=M==null?void 0:M.payload)==null?void 0:Vs.protein)!=null?ga:(ua=M==null?void 0:M.payload)==null?void 0:ua.p)!=null?Vi:"")),[Z,Qe]=React.useState(String((Fa=(Ki=(Ya=M==null?void 0:M.c)!=null?Ya:($i=M==null?void 0:M.payload)==null?void 0:$i.carbs)!=null?Ki:(Zt=M==null?void 0:M.payload)==null?void 0:Zt.c)!=null?Fa:"")),[nt,Lt]=React.useState(String((o=(Ms=(ys=M==null?void 0:M.f)!=null?ys:(Ni=M==null?void 0:M.payload)==null?void 0:Ni.fat)!=null?Ms:(Ps=M==null?void 0:M.payload)==null?void 0:Ps.f)!=null?o:"")),ze=React.useMemo(()=>"name:"+z($t),[$t]),[Le,se]=React.useState(()=>{try{var d=H(V,[]);return Array.isArray(d)?d.includes(ze):!1}catch(d){return!1}});React.useEffect(()=>{try{var d=H(V,[]);se(Array.isArray(d)?d.includes(ze):!1)}catch(d){}},[ze]);var at=()=>{try{var d=H(V,[]),m=Array.isArray(d)?d:[],E=m.includes(ze),g=E?m.filter(f=>f!==ze):[ze,...m];Ht(V,g.slice(0,100)),se(!E);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:E?"Removed":"Favorited",message:E?"Removed from favorites.":"Added to favorites."}}))}catch(f){}}catch(d){}},Pe=()=>{try{var m=`${String(G).toUpperCase()==="BREAKFAST"?"Breakfast":String(G).toUpperCase()==="LUNCH"?"Lunch":String(G).toUpperCase()==="DINNER"?"Dinner":"Snacks"} \u2022 ${String($t||"Meal").slice(0,28)}`,E=typeof window.prompt=="function"&&window.prompt("Name this meal",m)||m,g="__fof_saved_meals_v1",f=H(g,[]),F=Array.isArray(f)?f:[];F.unshift({id:typeof window.__fof_uuid=="function"?window.__fof_uuid():"sm_"+Math.random().toString(16).slice(2),name:String(E||m),createdAt:Date.now(),items:[{name:String($t||"Food").trim(),serving:String(_e||"").trim(),kcal:Number(me||0),p:Number(je||0),c:Number(Z||0),f:Number(nt||0)}]}),Ht(g,F.slice(0,50));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved meal",message:"Added to Saved Meals."}}))}catch(D){}}catch(d){}};React.useEffect(()=>{var m,E,g,f,F,D,k,T,he,oe,ke,Re,Me,Et,ya,Ct,Jt,Ye,Tt,_t,P,I,te,Ce;var d=String((M==null?void 0:M.type)||(M==null?void 0:M.meal)||((m=M==null?void 0:M.payload)==null?void 0:m.meal)||"SNACK").toUpperCase();we(d),gt(String((M==null?void 0:M.name)||((E=M==null?void 0:M.payload)==null?void 0:E.name)||"")),ve(String((M==null?void 0:M.serving)||((g=M==null?void 0:M.payload)==null?void 0:g.serving)||"")),j(String((he=(T=(D=(f=M==null?void 0:M.calories)!=null?f:M==null?void 0:M.kcal)!=null?D:(F=M==null?void 0:M.payload)==null?void 0:F.calories)!=null?T:(k=M==null?void 0:M.payload)==null?void 0:k.kcal)!=null?he:"")),re(String((Et=(Me=(ke=M==null?void 0:M.p)!=null?ke:(oe=M==null?void 0:M.payload)==null?void 0:oe.protein)!=null?Me:(Re=M==null?void 0:M.payload)==null?void 0:Re.p)!=null?Et:"")),Qe(String((Tt=(Ye=(Ct=M==null?void 0:M.c)!=null?Ct:(ya=M==null?void 0:M.payload)==null?void 0:ya.carbs)!=null?Ye:(Jt=M==null?void 0:M.payload)==null?void 0:Jt.c)!=null?Tt:"")),Lt(String((Ce=(te=(P=M==null?void 0:M.f)!=null?P:(_t=M==null?void 0:M.payload)==null?void 0:_t.fat)!=null?te:(I=M==null?void 0:M.payload)==null?void 0:I.f)!=null?Ce:""))},[r,M==null?void 0:M.ts]);var Wt=d=>String(d||"").replace(/[^\d.]/g,""),Ha=($t||"").trim().length>0,qa=d=>{try{var m=localStorage.getItem(h),E=m?JSON.parse(m):[],g=Array.isArray(E)?E:[],f=g.findIndex(F=>F&&String(F.id)===String(r)&&String(F.dk)===String(de));if(f>=0){g[f]=d,localStorage.setItem(h,JSON.stringify(g));try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:de,type:"NUTRITION"}}))}catch(F){}}}catch(m){}},oa=()=>{if(!Ha||!M)return;var d={...M,dk:de,type:String(G||"SNACK").toUpperCase(),name:($t||"").trim(),serving:(_e||"").trim(),calories:Number(Wt(me)||0),p:Number(Wt(je)||0),c:Number(Wt(Z)||0),f:Number(Wt(nt)||0),ts:M.ts||Date.now()};qa(d);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved",message:"Food entry updated."}}))}catch(m){}try{c&&c()}catch(m){}},Ra=()=>{if(!M){try{c&&c()}catch(m){}return}if(typeof window.confirm!="function"||window.confirm("Delete this food entry?")){try{var m=localStorage.getItem(h),E=m?JSON.parse(m):[],f=(Array.isArray(E)?E:[]).filter(F=>!(F&&String(F.id)===String(r)&&String(F.dk)===String(de)));localStorage.setItem(h,JSON.stringify(f))}catch(m){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:de,type:"NUTRITION"}}))}catch(m){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Deleted",message:"Entry removed."}}))}catch(m){}try{c&&c()}catch(m){}}},ri=()=>{if(!M)return;var d=typeof window.__fof_uuid=="function"?window.__fof_uuid():"f_"+Math.random().toString(16).slice(2),m={...M,id:d,dk:de,type:String(G||M.type||"SNACK").toUpperCase(),name:($t||M.name||"").trim(),serving:(_e||M.serving||"").trim(),calories:Number(Wt(me)||M.calories||0),p:Number(Wt(je)||M.p||0),c:Number(Wt(Z)||M.c||0),f:Number(Wt(nt)||M.f||0),ts:Date.now()};try{var E=localStorage.getItem(h),g=E?JSON.parse(E):[],f=Array.isArray(g)?g:[];f.push(m),localStorage.setItem(h,JSON.stringify(f))}catch(E){}try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:de,type:"NUTRITION"}}))}catch(E){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Copied",message:"Entry duplicated."}}))}catch(E){}},Da=({k:d,label:m})=>React.createElement("button",{type:"button",onClick:()=>we(String(d).toUpperCase()),className:["px-3 py-1.5 rounded-full border text-[12px] font-semibold transition",String(G).toUpperCase()===String(d).toUpperCase()?"border-white/25 bg-white/10 text-white":"border-white/10 bg-transparent text-white/70 hover:text-white hover:bg-white/5"].join(" ")},m);return M?key==="WEEKLY_SUMMARY_V1"||key==="WEEKLY_SUMMARY"?React.createElement(X,{open:!0,anchorKey:props.anchorKey||null,onClose:c}):React.createElement("div",{className:"fixed inset-0 z-[10060] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Edit Food"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Adjust serving, macros, or meal.")),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80","aria-label":"Close"},React.createElement(gi,{name:"X",size:18}))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Da,{k:"BREAKFAST",label:"Breakfast"}),React.createElement(Da,{k:"LUNCH",label:"Lunch"}),React.createElement(Da,{k:"DINNER",label:"Dinner"}),React.createElement(Da,{k:"SNACK",label:"Snacks"}))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Oe("MEALS"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",Ae==="MEALS"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Meals"),React.createElement("button",{type:"button",onClick:()=>Oe("RECIPES"),className:["flex-1 px-3 py-2 rounded-2xl border text-[12px] font-black",Ae==="RECIPES"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-black/30 text-white/70 hover:bg-white/5"].join(" ")},"Recipes")),React.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Food"),React.createElement("input",{value:$t,onChange:d=>gt(d.target.value),placeholder:"Food name",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[14px] font-semibold text-white placeholder:text-white/35"}),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Serving"),React.createElement("input",{value:_e,onChange:d=>ve(d.target.value),placeholder:"e.g. 100 g",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] font-semibold text-white placeholder:text-white/35"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Calories"),React.createElement("input",{value:me,onChange:d=>j(Wt(d.target.value)),inputMode:"decimal",placeholder:"0",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] font-semibold text-white placeholder:text-white/35"})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Macros (g)"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Protein"),React.createElement("input",{value:je,onChange:d=>re(Wt(d.target.value)),inputMode:"decimal",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[13px] font-semibold text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Carbs"),React.createElement("input",{value:Z,onChange:d=>Qe(Wt(d.target.value)),inputMode:"decimal",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[13px] font-semibold text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-semibold text-white/55"},"Fat"),React.createElement("input",{value:nt,onChange:d=>Lt(Wt(d.target.value)),inputMode:"decimal",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[13px] font-semibold text-white"})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Actions"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Copy duplicates this entry into the same day.")),React.createElement("button",{type:"button",onClick:ri,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-black text-white/80"},"Copy"))),React.createElement("div",{className:"h-24"})),React.createElement("div",{className:"px-4 pb-4 pt-3 border-t border-white/10 bg-[#0b0b0f]"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:Ra,className:"px-4 py-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[13px] font-extrabold text-white/85"},"Delete"),React.createElement("button",{type:"button",onClick:oa,disabled:!Ha,className:["flex-1 px-4 py-3 rounded-2xl text-[13px] font-extrabold transition",Ha?"bg-white text-black hover:bg-white/90":"bg-white/10 text-white/40"].join(" ")},"Save"))))):React.createElement("div",{className:"fixed inset-0 z-[10060] bg-[#0b0b0f]"},React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement("div",{className:"px-4 pt-4 pb-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[18px] font-extrabold text-white"},"Edit Food"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Pe()}catch(d){}},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/80",title:"Save as meal"},"Save"),React.createElement("button",{type:"button",onClick:()=>{try{at()}catch(d){}},className:["h-9 w-9 rounded-full border border-white/10 flex items-center justify-center font-extrabold",Le?"bg-white/12 text-white":"bg-white/5 hover:bg-white/10 text-white/70"].join(" "),"aria-label":"Favorite",title:"Favorite"},Le?"\u2605":"\u2606"),React.createElement("button",{type:"button",onClick:c,className:"h-9 w-9 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/80","aria-label":"Close"},React.createElement(gi,{name:"X",size:18}))))),React.createElement("div",{className:"flex-1 px-4 py-6 text-[13px] text-white/70"},"Entry not found.")))},ht=({open:e,item:a,onClose:r})=>{if(!e||!__fof_assertOverlayAllowed("BOTTOM_SHEET","WORKOUT_VIEWER"))return null;var c=a&&a.payload?a.payload:a&&a.session?a.session:a||{},h=Array.isArray(c.exercises)?c.exercises:[],[V,de]=React.useState(!1),[M,De]=React.useState(String((a==null?void 0:a.type)||(c==null?void 0:c.title)||"Workout")),[Ae,Oe]=React.useState(String((a==null?void 0:a.note)||(c==null?void 0:c.notes)||(c==null?void 0:c.note)||"")),[N,Ne]=React.useState(()=>h.map(_e=>({..._e,sets:(Array.isArray(_e.sets)?_e.sets:[]).map(ve=>({...ve}))})));React.useEffect(()=>{de(!1),De(String((a==null?void 0:a.type)||(c==null?void 0:c.title)||"Workout")),Oe(String((a==null?void 0:a.note)||(c==null?void 0:c.notes)||(c==null?void 0:c.note)||"")),Ne(h.map(_e=>({..._e,sets:(Array.isArray(_e.sets)?_e.sets:[]).map(ve=>({...ve}))})))},[a==null?void 0:a.id]);var G=a&&a.dayKey?String(a.dayKey):"Workout",we=(a==null?void 0:a.minutes)||(c==null?void 0:c.durationMin)||(c==null?void 0:c.minutes)||null,$t=(_e,ve,me)=>{Ne(j=>j.map((je,re)=>{if(re!==_e)return je;var Z=(je.sets||[]).map((Qe,nt)=>nt===ve?{...Qe,...me}:Qe);return{...je,sets:Z}}))},gt=()=>{try{var _e=a==null?void 0:a._workoutKey;if(!_e){de(!1);return}var ve=localStorage.getItem(_e),me=ve?JSON.parse(ve)||[]:[],j=me.findIndex(Z=>Z&&Z.id===a.id);if(j<0){de(!1);return}var je={...me[j].payload||me[j].details||{},title:M,notes:Ae,exercises:N},re={...me[j],type:M,note:Ae,payload:je,details:je};me[j]=re,localStorage.setItem(_e,JSON.stringify(me));try{window.dispatchEvent(new CustomEvent("flowofit:workoutLogsUpdated"))}catch(Z){}try{window.__fof_updateLogEntry&&re.logId&&G&&window.__fof_updateLogEntry(String(G),"workout",String(re.logId),{title:M,note:Ae,payload:je})}catch(Z){}de(!1);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved",message:"Workout updated."}}))}catch(Z){}}catch(_e){try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Could not save",message:"Try again."}}))}catch(ve){}}};return React.createElement(qo,{open:!0,title:G,kicker:"Workout",onClose:()=>{try{de(!1)}catch(_e){}r&&r()},footer:null},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0 flex-1"},V?React.createElement(React.Fragment,null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Title"),React.createElement("input",{value:M,onChange:_e=>De(_e.target.value),className:"mt-1 w-full rounded-2xl border border-white/10 bg-black/25 px-3 py-2 text-[14px] font-extrabold text-white"})):React.createElement("div",{className:"text-white font-black text-[16px] truncate"},M||"Session"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-bold"},N.length?`${N.length} exercises`:"Logged workout",we?` \u2022 ${we} min`:"")),React.createElement("div",{className:"shrink-0 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{var _e=a==null?void 0:a._openInLiveTracker;if(typeof _e=="function")_e(a);else try{window.dispatchEvent(new CustomEvent("flowofit:openLiveWorkoutFromHistory",{detail:{item:a}}))}catch(ve){}}catch(_e){}try{window.__fof_pendingOpenLiveWorkout=a}catch(_e){}try{localStorage.setItem("fof_pending_open_live_workout_v1",JSON.stringify(a||{}))}catch(_e){}try{r&&r()}catch(_e){}},className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 text-[12px] font-extrabold text-white/90",title:"Edit this session in the Active Workout Logger"},"Edit"),React.createElement("button",{type:"button",onClick:()=>de(_e=>!_e),className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-white/10 text-[12px] font-extrabold text-white/80"},V?"Cancel":"Quick edit"),V?React.createElement("button",{type:"button",onClick:gt,className:"px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/15 hover:bg-emerald-500/20 text-[12px] font-extrabold text-emerald-100"},"Save"):null)),V?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Notes"),React.createElement("textarea",{value:Ae,onChange:_e=>Oe(_e.target.value),rows:3,className:"mt-1 w-full rounded-2xl border border-white/10 bg-black/25 px-3 py-2 text-[13px] font-semibold text-white placeholder:text-white/40",placeholder:"How did it go?"})):Ae?React.createElement("div",{className:"mt-3 text-[12px] text-white/70 font-semibold"},Ae):null),N.length?React.createElement("div",{className:"space-y-2"},N.map((_e,ve)=>React.createElement("div",{key:_e.id||_e.name||ve,className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},_e.name||"Exercise"),_e.note?React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},_e.note):null)),React.createElement("div",{className:"mt-3 space-y-2"},(Array.isArray(_e.sets)?_e.sets:[]).map((me,j)=>{var je,re,Z;return React.createElement("div",{key:j,className:"flex items-center justify-between rounded-2xl border border-white/10 bg-black/25 px-3 py-2 gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85 shrink-0"},"Set ",j+1),V?React.createElement("div",{className:"flex items-center gap-2 flex-1 justify-end"},React.createElement("input",{value:(je=me.weight)!=null?je:"",onChange:Qe=>$t(ve,j,{weight:Qe.target.value}),placeholder:"kg",className:"w-20 rounded-xl border border-white/10 bg-black/30 px-2 py-1 text-[12px] font-bold text-white"}),React.createElement("input",{value:(re=me.reps)!=null?re:"",onChange:Qe=>$t(ve,j,{reps:Qe.target.value}),placeholder:"reps",className:"w-20 rounded-xl border border-white/10 bg-black/30 px-2 py-1 text-[12px] font-bold text-white"}),React.createElement("input",{value:(Z=me.rpe)!=null?Z:"",onChange:Qe=>$t(ve,j,{rpe:Qe.target.value}),placeholder:"RPE",className:"w-16 rounded-xl border border-white/10 bg-black/30 px-2 py-1 text-[12px] font-bold text-white"}),React.createElement("button",{type:"button",onClick:()=>$t(ve,j,{done:!me.done}),className:["px-2 py-1 rounded-xl border text-[11px] font-extrabold",me.done?"border-emerald-400/30 bg-emerald-500/15 text-emerald-100":"border-white/10 bg-black/30 text-white/60"].join(" ")},me.done?"Done":"\u2014")):React.createElement(React.Fragment,null,React.createElement("div",{className:"text-[12px] text-white/70 font-bold"},me.weight!=null&&String(me.weight).length?`${me.weight} kg`:"\u2014"," \u2022 ",me.reps!=null&&String(me.reps).length?`${me.reps} reps`:"\u2014",me.rpe!=null&&String(me.rpe).length?` \u2022 RPE ${me.rpe}`:""),React.createElement("div",{className:["text-[11px] font-extrabold shrink-0",me.done?"text-emerald-200/90":"text-white/35"].join(" ")},me.done?"Done":"\u2014")))}))))):null,React.createElement("button",{type:"button",onClick:r,className:"w-full rounded-3xl border border-white/12 bg-white/6 hover:bg-white/10 px-4 py-3 text-[13px] font-extrabold text-white/85"},"Close")))},ba="fof_ex_favs_v1",et="fof_ex_recent_v1",At=e=>{try{var a=JSON.parse(localStorage.getItem(e)||"[]");return Array.isArray(a)?a:[]}catch(a){return[]}},ma=(e,a)=>{try{localStorage.setItem(e,JSON.stringify(Array.isArray(a)?a:[]))}catch(r){}},Je=window.__FOF_EXERCISE_DB||[],Oa=["All",...Array.from(new Set((window.__FOF_EXERCISE_DB||[]).map(e=>e.group))).filter(Boolean).sort()],He=["All",...Array.from(new Set((window.__FOF_EXERCISE_DB||[]).map(e=>e.equip))).filter(Boolean).sort()],Ca=({open:e,onClose:a,onPick:r})=>{var[c,h]=React.useState(""),[V,de]=React.useState("All"),[M,De]=React.useState("All"),[Ae,Oe]=React.useState("BROWSE"),[N,Ne]=React.useState([]),[G,we]=React.useState([]);React.useEffect(()=>{if(e){try{Ne(At(ba))}catch(ve){}try{we(At(et))}catch(ve){}}},[e]);var $t=ve=>{Ne(me=>{var j=me.includes(ve)?me.filter(je=>je!==ve):[...me,ve];try{ma(ba,j)}catch(je){}return j})},gt=ve=>{try{var me=At(et),j=[ve,...me.filter(je=>je!==ve)].slice(0,20);ma(et,j),we(j)}catch(me){}},_e=React.useMemo(()=>{var ve=String(c||"").toLowerCase().trim(),me=Je;var j=me;return Ae==="FAVORITES"&&(j=me.filter(je=>N.includes(je.id))),Ae==="RECENT"&&(j=G.map(je=>me.find(re=>re.id===je)).filter(Boolean)),V!=="All"&&(j=j.filter(je=>je.group===V)),M!=="All"&&(j=j.filter(je=>je.equip===M)),ve&&(j=j.filter(je=>(je.name||"").toLowerCase().includes(ve)||(je.group||"").toLowerCase().includes(ve)||(je.equip||"").toLowerCase().includes(ve))),j},[c,V,M,Ae,N,G]);return React.createElement(qo,{open:e,title:"Exercise Library",onClose:a},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"inline-flex rounded-2xl border border-white/10 bg-black/20 p-1"},["BROWSE","FAVORITES","RECENT"].map(ve=>React.createElement("button",{key:ve,type:"button",onClick:()=>Oe(ve),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold transition",Ae===ve?"bg-white/10 text-white":"bg-transparent text-white/70 hover:bg-white/8"].join(" ")},ve==="BROWSE"?"Browse":ve==="FAVORITES"?"Favorites":"Recent"))),React.createElement("div",{className:"ml-auto text-[11px] font-extrabold text-white/50"},_e.length," items")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Search"),React.createElement("input",{value:c,onChange:ve=>h(ve.target.value),placeholder:"Bench press, squat, pull-up...",className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] font-semibold text-white placeholder:text-white/35"}))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Muscle group"),React.createElement("select",{value:V,onChange:ve=>de(ve.target.value),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] font-semibold text-white"},Oa.map(ve=>React.createElement("option",{key:ve,value:ve},ve)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-extrabold text-white/60"},"Equipment"),React.createElement("select",{value:M,onChange:ve=>De(ve.target.value),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] font-semibold text-white"},He.map(ve=>React.createElement("option",{key:ve,value:ve},ve)))))),React.createElement("div",{className:"space-y-2"},_e.length?_e.map(ve=>{var me=N.includes(ve.id);return React.createElement("div",{key:ve.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3 hover:bg-white/5 transition"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},ve.name),React.createElement("div",{className:"text-[10px] font-extrabold px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-white/70"},ve.group),React.createElement("div",{className:"text-[10px] font-extrabold px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-white/70"},ve.equip)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},ve.pattern,ve.tags&&ve.tags.length?` \u2022 ${ve.tags.slice(0,3).join(" \u2022 ")}`:"")),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{type:"button",onClick:()=>$t(ve.id),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold border transition",me?"bg-white/10 border-white/20 text-white":"bg-black/20 border-white/10 text-white/70 hover:bg-white/5"].join(" "),title:me?"Remove favorite":"Add favorite"},me?"\u2605":"\u2606"),React.createElement("button",{type:"button",onClick:()=>{try{gt(ve.id)}catch(j){}try{r&&r(ve)}catch(j){}},className:"px-3 py-2 rounded-xl text-[12px] font-extrabold bg-white text-black hover:bg-white/90 transition"},"Add"))))}):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[13px] text-white/70"},"No exercises match your filters. Try clearing search or switching tabs.")),React.createElement("div",{className:"pt-2 text-[11px] text-white/45"},"UI-only: this is a starter catalog. A3.2+ will add full exercise taxonomy, custom exercises, and set/rep logging.")))},ha=e=>{try{var a=String(e||"");var r=2166136261;for(var c=0;c<a.length;c++)r^=a.charCodeAt(c),r=Math.imul(r,16777619);return r>>>0}catch(a){return 1}},K=e=>{var a=e>>>0||1;return()=>(a^=a<<13,a>>>=0,a^=a>>>17,a>>>=0,a^=a<<5,a>>>=0,(a>>>0)/4294967296)},aa=e=>Math.max(0,Math.min(1,Number(e)||0)),Mt=(e,a=0)=>{var r=Number(e);return Number.isFinite(r)?r.toLocaleString(void 0,{maximumFractionDigits:a,minimumFractionDigits:a}):"\u2014"},la=({value:e=0,max:a=100,size:r=86,stroke:c=10,label:h="",sub:V="",tone:de="default"})=>{var M=Math.max(0,Number(e)||0),De=Math.max(1,Number(a)||1),Ae=Math.max(0,Math.min(1,M/De)),Oe=(r-c)/2,N=2*Math.PI*Oe,Ne=N*Ae,G=Math.max(0,N-Ne),we=r/2;return React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"relative",style:{width:r,height:r}},React.createElement("svg",{width:r,height:r,className:"block"},React.createElement("circle",{cx:we,cy:we,r:Oe,className:"stroke-white/10",strokeWidth:c,fill:"none"}),React.createElement("circle",{cx:we,cy:we,r:Oe,className:de==="good"?"stroke-emerald-400":de==="warn"?"stroke-amber-400":de==="bad"?"stroke-rose-400":"stroke-white",strokeWidth:c,fill:"none",strokeLinecap:"round",strokeDasharray:`${Ne} ${G}`,transform:`rotate(-90 ${we} ${we})`,style:{filter:"drop-shadow(0px 10px 18px rgba(0,0,0,0.35))"}})),React.createElement("div",{className:"absolute inset-0 flex flex-col items-center justify-center"},React.createElement("div",{className:"text-[14px] font-black text-white"},Math.round(Ae*100),"%"),React.createElement("div",{className:"text-[10px] font-bold text-white/55"},Mt(M,0),"/",Mt(De,0)))),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},h),V?React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60 font-semibold"},V):null))},xa=({values:e=[],height:a=44,maxBars:r=28})=>{var c=Array.isArray(e)?e.slice():[],h=c.length>r?(()=>{var de=c.length/r,M=[];for(var De=0;De<r;De++){var Ae=Math.floor(De*de),Oe=Math.floor((De+1)*de);var N=0,Ne=0;for(var G=Ae;G<Math.max(Oe,Ae+1);G++)N+=Number(c[G]||0),Ne++;M.push(Ne?N/Ne:0)}return M})():c,V=Math.max(1,...h.map(de=>Number(de)||0));return React.createElement("div",{className:"flex items-end gap-[2px]",style:{height:a}},h.map((de,M)=>React.createElement("div",{key:M,className:"flex-1 rounded-[3px] bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/55",style:{height:`${Math.round(100*(Number(de)||0)/V)}%`}}))))},ei=({values:e=[],height:a=48})=>{var r=(Array.isArray(e)?e:[]).map(Oe=>Number(Oe)||0),c=180,h=a,V=Math.max(1,...r),de=Math.min(0,...r),M=Math.max(1e-6,V-de),Ae=r.map((Oe,N)=>{var Ne=r.length<=1?0:N*(c/(r.length-1)),G=h-(Oe-de)/M*h;return[Ne,G]}).map((Oe,N)=>N===0?`M ${Oe[0].toFixed(1)} ${Oe[1].toFixed(1)}`:`L ${Oe[0].toFixed(1)} ${Oe[1].toFixed(1)}`).join(" ");return React.createElement("svg",{width:c,height:h,className:"block"},React.createElement("path",{d:Ae,fill:"none",stroke:"rgba(255,255,255,0.8)",strokeWidth:"2"}),React.createElement("path",{d:Ae+` L ${c} ${h} L 0 ${h} Z`,fill:"rgba(255,255,255,0.10)",stroke:"none"}))},di=({a:e=0,b:a=0,c:r=0,labels:c=["A","B","C"]})=>{var h=Math.max(0,Number(e)||0),V=Math.max(0,Number(a)||0),de=Math.max(0,Number(r)||0),M=Math.max(1e-6,h+V+de),De=h/M*100,Ae=V/M*100,Oe=de/M*100;return React.createElement("div",null,React.createElement("div",{className:"h-3 w-full rounded-full bg-white/10 overflow-hidden border border-white/10"},React.createElement("div",{className:"h-full bg-white/55",style:{width:`${De}%`}}),React.createElement("div",{className:"h-full bg-white/35",style:{width:`${Ae}%`,marginTop:"-12px",marginLeft:`${De}%`}}),React.createElement("div",{className:"h-full bg-white/20",style:{width:`${Oe}%`,marginTop:"-12px",marginLeft:`${De+Ae}%`}})),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[10px] font-bold text-white/70"},React.createElement("div",null,c[0]," \u2022 ",Math.round(De),"%"),React.createElement("div",{className:"text-center"},c[1]," \u2022 ",Math.round(Ae),"%"),React.createElement("div",{className:"text-right"},c[2]," \u2022 ",Math.round(Oe),"%")))},Ua=({values:e=[],cols:a=14})=>{var r=Array.isArray(e)?e:[],c=Math.max(1,...r.map(h=>Number(h)||0));return React.createElement("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`}},r.map((h,V)=>{var de=aa((Number(h)||0)/c);return React.createElement("div",{key:V,className:"rounded-[6px] border border-white/10",style:{height:10,background:`rgba(255,255,255,${.08+.42*de})`}})}))},sa=({open:e,onClose:a,tier:r="FREE",mode:c="WEEKLY",defaultTab:h="OVERVIEW",insights:V=null,targets:de=null})=>{var[M,De]=React.useState(h||"OVERVIEW");React.useEffect(()=>{e&&De(h||"OVERVIEW")},[e,h]);var Ae=String(r||"FREE").toUpperCase()==="PAID"||String(r||"").toUpperCase()==="AI",Oe=c==="MONTHLY"?"Monthly Report":c==="QUARTERLY"?"Quarterly Report":"Weekly Report",N=c==="MONTHLY"?30:c==="QUARTERLY"?90:7,Ne=React.useMemo(()=>{var we=V&&typeof V=="object"?V:{},$t=we.dk30||we.dk7||[],gt=ha($t&&$t[0]?$t[0]:"seed"),_e=K(gt),ve=de||we.targets||{kcal:2e3,p:150,c:200,f:70},me=we.nutritionDaily7&&we.nutritionDaily7.length?we.nutritionDaily7.slice(-7):[],j=me.map(Wt=>Number(Wt.cal||0)),je=me.map(Wt=>Number(Wt.p||0)),re=me.map(Wt=>Number(Wt.c||0)),Z=me.map(Wt=>Number(Wt.f||0)),Qe=j.length?j.reduce((Wt,Ha)=>Wt+Ha,0)/j.length:0,nt={kcal:ve.kcal?Math.round(100*Math.min(1,Qe/ve.kcal)):0,p:ve.p?Math.round(100*Math.min(1,je.reduce((Wt,Ha)=>Wt+Ha,0)/Math.max(1,je.length)/ve.p)):0,c:ve.c?Math.round(100*Math.min(1,re.reduce((Wt,Ha)=>Wt+Ha,0)/Math.max(1,re.length)/ve.c)):0,f:ve.f?Math.round(100*Math.min(1,Z.reduce((Wt,Ha)=>Wt+Ha,0)/Math.max(1,Z.length)/ve.f)):0},Lt={p:je.reduce((Wt,Ha)=>Wt+Ha,0)*4,c:re.reduce((Wt,Ha)=>Wt+Ha,0)*4,f:Z.reduce((Wt,Ha)=>Wt+Ha,0)*9},ze={sessions:Number(we.workout7||0),sessions30:Number(we.workout30||0),volIdx:Math.round(1e3+_e()*1800),prCount:Math.round(1+_e()*6),workoutsPerWeek:Math.max(0,Number(we.workout7||0)),zone2Min:Math.round(35+_e()*120),strengthMin:Math.round(45+_e()*140),intensity:Math.round(55+_e()*40)},Le={weightLast:we.lastWeight!=null?Number(we.lastWeight):68+_e()*18,weightChange7:(_e()*2-1)*.9,bodyFat:12+_e()*18,leanMass:45+_e()*25,rhr:48+Math.round(_e()*22),hrv:35+Math.round(_e()*55),vo2:32+Math.round(_e()*25),sleep:6+_e()*2.3,steps:4500+Math.round(_e()*8500),stress:18+Math.round(_e()*60)},se=Array.from({length:7},(Wt,Ha)=>Math.max(0,Math.round(Qe+(_e()*2-1)*140+Ha*(_e()*8-4)))),at=Array.from({length:7},(Wt,Ha)=>Number((Le.weightLast+(Ha+1)*Le.weightChange7/7).toFixed(1))),Pe=[];return nt.p<80&&Pe.push({key:"protein",title:"Protein consistency",impact:"High",msg:"Increase protein distribution across meals to support recovery and lean mass."}),Le.sleep<7&&Pe.push({key:"sleep",title:"Sleep duration",impact:"High",msg:"Add a wind-down routine and align caffeine cutoff to improve sleep depth."}),ze.sessions<3&&Pe.push({key:"freq",title:"Training frequency",impact:"Medium",msg:"Aim for 3 sessions/week for steady progress; use shorter sessions on LOW capacity days."}),Le.steps<7e3&&Pe.push({key:"steps",title:"Daily activity",impact:"Medium",msg:"Increase NEAT (walks) for cardiovascular and metabolic support."}),Pe.length||Pe.push({key:"maintain",title:"Maintain momentum",impact:"Medium",msg:"Your inputs are consistent \u2014 focus on progressive overload + recovery."}),{t:ve,nutr:{cal:j,p:je,c:re,f:Z,calAvg:Qe,compliance:nt,macroCals:Lt},workout:ze,health:Le,forecast:{cal:se,wt:at},opportunity:Pe}},[V,de,c]),G=[{k:"OVERVIEW",label:"Overview"},{k:"NUTRITION",label:"Nutrition"},{k:"WORKOUT",label:"Workout"},{k:"HEALTH",label:"Health"},{k:"FORECAST",label:"Forecast"},{k:"RECO",label:"Suggestions"}];return e?React.createElement("div",{className:"fixed inset-0 z-[120] bg-black/60 backdrop-blur"},React.createElement("div",{className:"absolute inset-0 flex flex-col"},React.createElement("div",{className:"px-4 py-4 border-b border-white/10 bg-black/55 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("button",{type:"button",onClick:a,className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-[12px] font-extrabold text-white/85"},"\u2190 Back"),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},Oe),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Track \u2192 Insights \u2022 ",N,"d coverage \u2022 Premium")),React.createElement("button",{type:"button",onClick:()=>{try{var we=typeof Rr=="function"?Rr():window.__FOF_CLIENT_CONTEXT||{},$t=String(we&&we.tier?we.tier:Ae?"PAID":"FREE").toUpperCase(),gt={pdf:$t==="FREE"},_e=(()=>{try{var me=(G||[]).find(j=>j&&j.k===M);return me?me.label:String(M||"Report")}catch(me){return String(M||"Report")}})(),ve={kind:"INSIGHTS_REPORT",sheetTitle:"Share & Export",kicker:"Insights",title:"Progress Report",subtitle:`${_e} \u2022 Snapshot`,stats:[{label:"Workouts",value:String(typeof summary!="undefined"&&summary&&summary.workouts?summary.workouts:typeof workoutsPerWeek!="undefined"?workoutsPerWeek:0)},{label:"Streak",value:String(typeof summary!="undefined"&&summary&&summary.streak?summary.streak:typeof streakDays!="undefined"?streakDays:0)},{label:"Calories",value:String(typeof summary!="undefined"&&summary&&summary.avgCalories?summary.avgCalories:"\u2014")},{label:"Weight",value:String(typeof summary!="undefined"&&summary&&summary.weight?summary.weight:"\u2014")}],lines:["High-level trends only","No raw logs included",$t==="FREE"?"PDF export is Premium":"PDF export enabled"].filter(Boolean),metaChips:[$t==="PAID"?"Premium":$t==="TRIAL"?"Trial":"Free",_e],locks:gt,paywallFeatureKey:"Reports Export",meta:{coachApproved:!1,source:"INSIGHTS_EXPORT"}};if(typeof window.__fof_openShareExport=="function")window.__fof_openShareExport(ve);else try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"SHARE_EXPORT_SHEET_V1",props:{payload:ve}}}))}catch(me){}}catch(we){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-[12px] font-extrabold text-white/85"},"Export")),React.createElement("div",{className:"mt-3 flex gap-2 overflow-x-auto no-scrollbar"},G.map(we=>React.createElement("button",{key:we.k,type:"button",onClick:()=>De(we.k),className:["shrink-0 px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition",M===we.k?"border-white/20 bg-white/15 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"].join(" ")},we.label)))),React.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4 pb-28 scroll-area"},Ae?React.createElement(React.Fragment,null,M==="OVERVIEW"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Nutrition Compliance"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Avg vs targets (last 7 days)")),React.createElement("span",{className:"text-[10px] font-black text-white/60 border border-white/10 bg-white/5 rounded-full px-2 py-1"},"A5.2")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement(la,{value:Ne.nutr.compliance.kcal,max:100,label:"Calories",sub:`${Mt(Ne.nutr.calAvg,0)} kcal/day`,tone:Ne.nutr.compliance.kcal>=90?"good":Ne.nutr.compliance.kcal>=75?"warn":"bad"}),React.createElement(la,{value:Ne.nutr.compliance.p,max:100,label:"Protein",sub:`${Mt(Ne.nutr.p.reduce((we,$t)=>we+$t,0)/Math.max(1,Ne.nutr.p.length),0)} g/day`,tone:Ne.nutr.compliance.p>=90?"good":Ne.nutr.compliance.p>=75?"warn":"bad"})),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Macro calories split"),React.createElement("div",{className:"mt-2"},React.createElement(di,{a:Ne.nutr.macroCals.p,b:Ne.nutr.macroCals.c,c:Ne.nutr.macroCals.f,labels:["Protein","Carbs","Fat"]})))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Training Load"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Frequency + volume proxy"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement(la,{value:Math.min(7,Ne.workout.workoutsPerWeek),max:7,label:"Workouts",sub:`${Ne.workout.workoutsPerWeek}/week`,tone:Ne.workout.workoutsPerWeek>=3?"good":Ne.workout.workoutsPerWeek>=2?"warn":"bad"}),React.createElement(la,{value:Ne.workout.intensity,max:100,label:"Intensity",sub:"Effort proxy",tone:Ne.workout.intensity>=70?"good":Ne.workout.intensity>=55?"warn":"bad"})),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"7d activity heatmap"),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement(Ua,{values:((V==null?void 0:V.dayCounts)||[]).map(we=>we.all||0),cols:7}))))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Health Snapshot"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Weight"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.health.weightLast,1)," kg"),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},Ne.health.weightChange7>=0?"+":"",Mt(Ne.health.weightChange7,1)," kg / 7d")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Body fat"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.health.bodyFat,1),"%"),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Lean mass ",Mt(Ne.health.leanMass,1)," kg")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"RHR / HRV"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.health.rhr,0)," bpm"),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"HRV ",Mt(Ne.health.hrv,0)," ms")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"VO\u2082 Max"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.health.vo2,0)),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Sleep ",Mt(Ne.health.sleep,1),"h")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Forecast"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Next 7 days (v1)"),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Calories"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},"avg ",Mt(Ne.nutr.calAvg,0))),React.createElement("div",{className:"mt-2"},React.createElement(ei,{values:Ne.forecast.cal,height:52}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Weight"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},"last ",Mt(Ne.health.weightLast,1))),React.createElement("div",{className:"mt-2"},React.createElement(ei,{values:Ne.forecast.wt,height:52})))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Top improvement opportunities"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"What moves the needle fastest")),React.createElement("span",{className:"text-[10px] font-black text-white/60 border border-white/10 bg-white/5 rounded-full px-2 py-1"},"Actionable")),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2"},Ne.opportunity.map(we=>React.createElement("div",{key:we.key,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},we.title),React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full border border-white/10 bg-black/30 text-white/70"},we.impact)),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-semibold"},we.msg)))))):null,M==="NUTRITION"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Calories trend"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Daily calories (last 7 days)"),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3 overflow-x-auto"},React.createElement(xa,{values:Ne.nutr.cal,height:56})),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Average"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.nutr.calAvg,0)," kcal")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Target"),React.createElement("div",{className:"text-[16px] font-black text-white"},Mt(Ne.t.kcal,0)," kcal")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Macros"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Daily grams (protein/carbs/fat)"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Protein"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},"target ",Mt(Ne.t.p,0),"g")),React.createElement("div",{className:"mt-2"},React.createElement(xa,{values:Ne.nutr.p,height:54}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Carbs"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},"target ",Mt(Ne.t.c,0),"g")),React.createElement("div",{className:"mt-2"},React.createElement(xa,{values:Ne.nutr.c,height:54}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Fat"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},"target ",Mt(Ne.t.f,0),"g")),React.createElement("div",{className:"mt-2"},React.createElement(xa,{values:Ne.nutr.f,height:54}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Macro calorie split"),React.createElement("div",{className:"mt-2"},React.createElement(di,{a:Ne.nutr.macroCals.p,b:Ne.nutr.macroCals.c,c:Ne.nutr.macroCals.f,labels:["Protein","Carbs","Fat"]}))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Micronutrients (preview)"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Prototype uses estimated values unless food DB is connected"),React.createElement("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2"},[{k:"fiber",v:18+Math.round(K(ha(Oe))()*16),u:"g",tgt:30,tone:"warn"},{k:"sodium",v:1700+Math.round(K(ha(Oe+"s"))()*1400),u:"mg",tgt:2300,tone:"good"},{k:"water",v:1.6+K(ha(Oe+"w"))()*1.6,u:"L",tgt:2.5,tone:"warn"},{k:"added sugar",v:20+Math.round(K(ha(Oe+"a"))()*35),u:"g",tgt:36,tone:"warn"}].map(we=>React.createElement("div",{key:we.k,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},we.k),React.createElement("div",{className:"mt-1 text-[16px] font-black text-white"},Mt(we.v,we.u==="L"?1:0)," ",we.u),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"target ",we.tgt,we.u)))))):null,M==="WORKOUT"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Workouts & volume"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Sessions, PRs, and load proxy"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Sessions (7d)"),React.createElement("div",{className:"text-[18px] font-black text-white"},Mt(Ne.workout.sessions,0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"PRs"),React.createElement("div",{className:"text-[18px] font-black text-white"},Mt(Ne.workout.prCount,0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Volume index"),React.createElement("div",{className:"text-[18px] font-black text-white"},Mt(Ne.workout.volIdx,0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},"Intensity"),React.createElement("div",{className:"text-[18px] font-black text-white"},Mt(Ne.workout.intensity,0),"/100"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Training mix"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[12px] font-bold text-white/75"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},"Strength \u2022 ",Mt(Ne.workout.strengthMin,0)," min"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},"Zone 2 \u2022 ",Mt(Ne.workout.zone2Min,0)," min")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Muscle balance (preview)"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Estimated distribution unless full exercise metadata is present"),React.createElement("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-2"},["Push","Pull","Legs","Core","Conditioning","Mobility"].map(we=>React.createElement("div",{key:we,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55 uppercase tracking-widest"},we),React.createElement("div",{className:"mt-1"},React.createElement(la,{value:25+Math.round(K(ha(Oe+we))()*65),max:100,label:"",sub:"",tone:"default"}))))))):null,M==="HEALTH"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Biometrics"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Wearables-ready (v1 uses estimated values)"),React.createElement("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2"},[{k:"Resting HR",v:Ne.health.rhr,u:"bpm"},{k:"HRV",v:Ne.health.hrv,u:"ms"},{k:"VO\u2082 Max",v:Ne.health.vo2,u:""},{k:"Sleep",v:Ne.health.sleep,u:"h",d:1},{k:"Steps",v:Ne.health.steps,u:""},{k:"Stress",v:Ne.health.stress,u:"/100"},{k:"Body fat",v:Ne.health.bodyFat,u:"%",d:1},{k:"Lean mass",v:Ne.health.leanMass,u:"kg",d:1}].map(we=>React.createElement("div",{key:we.k,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-black text-white/55"},we.k),React.createElement("div",{className:"mt-1 text-[16px] font-black text-white"},Mt(we.v,we.d||0),we.u?` ${we.u}`:""))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Body composition analysis"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Trend proxy & notes"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Weight (7d forecast)"),React.createElement("div",{className:"text-[11px] font-black text-white/60"},Mt(Ne.health.weightLast,1)," kg")),React.createElement("div",{className:"mt-2"},React.createElement(ei,{values:Ne.forecast.wt,height:60}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Notes"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 font-semibold"},"\u2022 Body fat estimate trends down when protein + sleep are consistent.",React.createElement("br",null),"\u2022 Lean mass improves with progressive overload + adequate energy intake.",React.createElement("br",null),"\u2022 Sync wearables for HRV/RHR accuracy."))))):null,M==="FORECAST"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"7-day forecasts"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Uses last-input momentum (upgrade: multi-signal model)"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Calories"),React.createElement("div",{className:"mt-2"},React.createElement(ei,{values:Ne.forecast.cal,height:70})),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 font-semibold"},"Forecast range: ",Math.min(...Ne.forecast.cal),"\u2013",Math.max(...Ne.forecast.cal)," kcal")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Weight"),React.createElement("div",{className:"mt-2"},React.createElement(ei,{values:Ne.forecast.wt,height:70})),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 font-semibold"},"Projected change: ",Mt(Ne.forecast.wt[6]-Ne.health.weightLast,1)," kg"))))):null,M==="RECO"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Personalized suggestions"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Next best actions + improvement scope"),React.createElement("div",{className:"mt-3 space-y-2"},Ne.opportunity.map(we=>React.createElement("div",{key:we.key,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},we.title),React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full border border-white/10 bg-black/30 text-white/70"},we.impact)),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-semibold"},we.msg),React.createElement("div",{className:"mt-2 text-[11px] text-white/55 font-bold"},"Why it matters:"),React.createElement("div",{className:"text-[12px] text-white/65 font-semibold"},we.key==="protein"?"Protein supports satiety, recovery, and lean mass maintenance.":we.key==="sleep"?"Sleep improves performance, appetite regulation, and recovery.":we.key==="freq"?"Frequency builds skill + total volume with lower per-session fatigue.":we.key==="steps"?"NEAT increases calorie expenditure and cardiovascular health.":"Consistency is the foundation for long-term progress."))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Improvement scope"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Where the product will get even better"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2 text-[12px] text-white/70 font-semibold"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},"\u2022 Wearables sync (Apple Health / Oura / Whoop) \u2192 real HRV/RHR/sleep"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},"\u2022 Food DB + micronutrients \u2192 accurate fiber/sodium/sugar"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},"\u2022 Training load model (TRIMP/RPE) + periodization insights"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},"\u2022 Forecast engine uses Capacity Score + adherence + goals")))):null):React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/30 p-5"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Premium Reports"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Weekly/Monthly reports include advanced analytics, biometrics, forecasts, and improvement recommendations."),React.createElement("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"What you get"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/70 font-semibold"},React.createElement("li",null,"\u2022 Nutrition macro split + compliance rings"),React.createElement("li",null,"\u2022 Training load + muscle balance + PR analytics"),React.createElement("li",null,"\u2022 Health biometrics (RHR/HRV/VO2/etc) + trends"),React.createElement("li",null,"\u2022 Forecasts + next-best actions"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Unlock"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70 font-semibold"},"Upgrade to Premium to access the full report."),React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openPaywallStub&&window.__fof_openPaywallStub("INSIGHTS_REPORTS",{from:"A5.2_OVERLAY",mode:c})}catch(we){}},className:"mt-3 w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold"},"Upgrade"))))))):null},vt=({persona:e})=>{var a=React.useMemo(()=>{try{var n=typeof window!="undefined"?window.__fof_trackHubPage:null,y=typeof localStorage!="undefined"?localStorage.getItem("fof_trackhub_last_seg"):null,be=String(n||y||"WORKOUT").toUpperCase();return["WORKOUT","NUTRITION","HEALTH","INSIGHTS"].includes(be)?be:"WORKOUT"}catch(n){return"WORKOUT"}},[]),[r,c]=React.useState(a);React.useEffect(()=>{try{localStorage.setItem("fof_trackhub_last_seg",String(r||"WORKOUT"))}catch(n){}},[r]),React.useEffect(()=>{try{window.__fof_trackHubPage=null}catch(n){}},[]);var[h,V]=React.useState("ALL"),[de,M]=React.useState("7D"),De=String(e&&e.tier?e.tier:"FREE").toUpperCase(),Ae=De==="PAID"||De==="AI",[Oe,N]=React.useState(!1),[Ne,G]=React.useState("WEEKLY"),[we,$t]=React.useState("OVERVIEW"),gt=(n="WEEKLY",y="OVERVIEW")=>{if(!Ae){try{window.__fof_openPaywallStub&&window.__fof_openPaywallStub("INSIGHTS_REPORTS",{from:"A5.2_CARD",mode:n})}catch(be){}return}G(String(n||"WEEKLY").toUpperCase()),$t(String(y||"OVERVIEW").toUpperCase()),N(!0)},_e=React.useMemo(()=>{var n=Kt=>{try{return(j?j(Kt):[]).slice().reverse()}catch(Na){return[]}},y=n(7),be=n(30),ie=y.map(Kt=>{var Na=0,ra=0,Ti=0,Ee=0;return(Array.isArray(P)?P:[]).forEach(ae=>{try{if(String((ae==null?void 0:ae.dk)||"")!==String(Kt))return;Na+=Number((ae==null?void 0:ae.calories)||(ae==null?void 0:ae.cal)||0)||0,ra+=Number((ae==null?void 0:ae.p)||0)||0,Ti+=Number((ae==null?void 0:ae.c)||0)||0,Ee+=Number((ae==null?void 0:ae.f)||0)||0}catch(Ot){}}),{dk:Kt,cal:Na,p:ra,c:Ti,f:Ee}}),b=n(28).map(Kt=>{var Na=0,ra=0,Ti=0;return(Array.isArray(Ce)?Ce:[]).forEach(Ee=>{try{String((Ee==null?void 0:Ee.dk)||(Ee==null?void 0:Ee.dayKey)||(Ee==null?void 0:Ee.dateKey)||"")===String(Kt)&&Na++}catch(ae){}}),(Array.isArray(P)?P:[]).forEach(Ee=>{try{String((Ee==null?void 0:Ee.dk)||"")===String(Kt)&&ra++}catch(ae){}}),(Array.isArray(Jt)?Jt:[]).forEach(Ee=>{try{String((Ee==null?void 0:Ee.dk)||(Ee==null?void 0:Ee.dayKey)||"")===String(Kt)&&Ti++}catch(ae){}}),(Array.isArray(Tt)?Tt:[]).forEach(Ee=>{try{String((Ee==null?void 0:Ee.dk)||(Ee==null?void 0:Ee.dayKey)||"")===String(Kt)&&Ti++}catch(ae){}}),{dk:Kt,workout:Na,nutrition:ra,health:Ti,all:Na+ra+Ti}});var We=null;try{var Kt=(Array.isArray(Jt)?Jt:[]).slice().sort((Na,ra)=>Number(ra.ts||0)-Number(Na.ts||0));for(var Na of Kt){var ra=(Na==null?void 0:Na.payload)||{},Ti=ra.weightKg!=null?Number(ra.weightKg):ra.weight!=null?Number(ra.weight):null;if(Ti!=null&&Number.isFinite(Ti)){We=Ti;break}}}catch(Kt){}var da=b.slice(-7).reduce((Kt,Na)=>Kt+(Na.workout?1:0),0),ii=b.slice(-30).reduce((Kt,Na)=>Kt+(Na.workout?1:0),0);var jt={kcal:2e3,p:150,c:200,f:70};try{var Kt=localStorage.getItem("__fof_nutrition_targets_v1");if(Kt){var Na=JSON.parse(Kt);Na&&typeof Na=="object"&&(jt={kcal:Na.kcal!=null?Number(Na.kcal):jt.kcal,p:Na.p!=null?Number(Na.p):jt.p,c:Na.c!=null?Number(Na.c):jt.c,f:Na.f!=null?Number(Na.f):jt.f})}}catch(Kt){}return{dk7:y,dk30:be,nutritionDaily7:ie,dayCounts:b,lastWeight:We,workout7:da,workout30:ii,targets:jt}},[P,Ce,Jt,Tt]),[ve,me]=React.useState(0);React.useEffect(()=>{var n=()=>me(y=>y+1);try{window.addEventListener("flowofit:logsUpdated",n)}catch(y){}try{window.addEventListener("flowofit:eventsUpdated",n)}catch(y){}return()=>{try{window.removeEventListener("flowofit:logsUpdated",n)}catch(y){}try{window.removeEventListener("flowofit:eventsUpdated",n)}catch(y){}}},[]);var j=(n=7)=>{var y=[];try{for(var be=0;be<n;be++){var ie=new Date;ie.setDate(ie.getDate()-be),y.push(window.__fof_localDateKey?window.__fof_localDateKey(ie):ie.toISOString().slice(0,10))}}catch(be){}return y},je=n=>{var y=String(n||"7D").toUpperCase();return y==="90D"?90:y==="30D"?30:7},re=(n,y=18)=>{try{var be=Array.isArray(n)?n.slice():[];if(be.length>y){var ie=be.length/y,Dt=[];for(var b=0;b<y;b++){var We=Math.floor(b*ie),da=Math.floor((b+1)*ie);var ii=0,jt=0;for(var Kt=We;Kt<Math.max(da,We+1);Kt++)ii+=Number(be[Kt]||0),jt++;Dt.push(jt?ii/jt:0)}return Dt}return be}catch(be){return[]}},Z=(n,y)=>{try{return(n||[]).reduce((be,ie)=>{var Dt=y(ie);return be+(Number.isFinite(Dt)?Dt:0)},0)}catch(be){return 0}},Qe=React.useMemo(()=>{var n=j(7),y=j(30),be=(R,Ve)=>{try{return(window.__fof_getLogBucket?window.__fof_getLogBucket(R,Ve):[])||[]}catch(pa){return[]}},ie={workout:n.flatMap(R=>be(R,"workout")),nutrition:n.flatMap(R=>be(R,"nutrition")),body:n.flatMap(R=>be(R,"body")),recovery:n.flatMap(R=>be(R,"recovery")),habits:n.flatMap(R=>be(R,"habits"))},Dt={workout:y.flatMap(R=>be(R,"workout")),nutrition:y.flatMap(R=>be(R,"nutrition")),body:y.flatMap(R=>be(R,"body")),recovery:y.flatMap(R=>be(R,"recovery")),habits:y.flatMap(R=>be(R,"habits"))},b=Z(ie.nutrition,R=>{var Ve,pa,qt;return R&&((qt=(pa=(Ve=R.kcal)!=null?Ve:R.calories)!=null?pa:R.cals)!=null?qt:R.energy)}),We=Z(Dt.nutrition,R=>{var Ve,pa,qt;return R&&((qt=(pa=(Ve=R.kcal)!=null?Ve:R.calories)!=null?pa:R.cals)!=null?qt:R.energy)}),da=(Dt.body||[]).map(R=>{var Ve,pa;return R&&((pa=(Ve=R.weight)!=null?Ve:R.value)!=null?pa:R.kg)}).filter(R=>Number.isFinite(Number(R))).map(R=>Number(R)),ii=da&&da.length?da[da.length-1]:null,jt=Dt.workout.length+Dt.nutrition.length+Dt.body.length+Dt.recovery.length+Dt.habits.length,Kt=n.map(R=>({dk:R,w:be(R,"workout").length,n:be(R,"nutrition").length,h:be(R,"body").length+be(R,"recovery").length,all:be(R,"workout").length+be(R,"nutrition").length+be(R,"body").length+be(R,"recovery").length})),ra=(()=>{try{var R=typeof localStorage!="undefined"?localStorage.getItem("__fof_nutrition_targets_v1"):null,Ve=R?JSON.parse(R):null;return{...{kcal:2e3,p:150,c:200,f:70},...Ve||{}}}catch(R){return{kcal:2e3,p:150,c:200,f:70}}})(),Ti=R=>{try{return R&&(R.payload||R.details||R.data)?R.payload||R.details||R.data:R||{}}catch(Ve){return{}}},Ee=(R,Ve)=>{try{var pa=R==null?void 0:R[Ve];return Number.isFinite(Number(pa))?Number(pa):null}catch(pa){return null}},ae=R=>{var Ve=(R==null?void 0:R.totalsForDay)||(R==null?void 0:R.dayTotals)||null;return Ve&&typeof Ve=="object"?Ve:null},Ot=n.slice().reverse().map(R=>{var Ve=be(R,"nutrition")||[];var pa=0,qt=0,ka=0,pi=0;var cs=new Set;Ve.forEach(pe=>{var Qr,Zr,Pl,Ml,Fl,l,A,Ze,Ue,It,va,ji;var Sa=Ti(pe),Ji=ae(Sa),wo=(Pl=(Zr=(Qr=Ee(Ji||Sa,"cal"))!=null?Qr:Ee(Ji||Sa,"calories"))!=null?Zr:Ee(Ji||Sa,"kcal"))!=null?Pl:Ee(Sa,"energy"),Ns=(l=(Fl=(Ml=Ee(Ji||Sa,"p"))!=null?Ml:Ee(Ji||Sa,"protein"))!=null?Fl:Ee(Ji||Sa,"proteinG"))!=null?l:Ee(Sa,"protein_g"),Us=(Ue=(Ze=(A=Ee(Ji||Sa,"c"))!=null?A:Ee(Ji||Sa,"carbs"))!=null?Ze:Ee(Ji||Sa,"carbsG"))!=null?Ue:Ee(Sa,"carbs_g"),Uo=(ji=(va=(It=Ee(Ji||Sa,"f"))!=null?It:Ee(Ji||Sa,"fat"))!=null?va:Ee(Ji||Sa,"fatG"))!=null?ji:Ee(Sa,"fat_g");Number.isFinite(Number(wo))&&(pa+=Number(wo)),Number.isFinite(Number(Ns))&&(qt+=Number(Ns)),Number.isFinite(Number(Us))&&(ka+=Number(Us)),Number.isFinite(Number(Uo))&&(pi+=Number(Uo));var hr=((Sa==null?void 0:Sa.meal)||(Sa==null?void 0:Sa.mealKey)||(Sa==null?void 0:Sa.mealType)||"").toString().toUpperCase();hr&&cs.add(hr);var Xr=Sa==null?void 0:Sa.itemsByMeal;Xr&&typeof Xr=="object"&&Object.keys(Xr).forEach(ao=>{try{(Xr[ao]||[]).length&&cs.add(String(ao).toUpperCase())}catch(Qs){}})});var Gi=cs.size;return{dk:R,cal:Math.round(pa),p:Math.round(qt),c:Math.round(ka),f:Math.round(pi),mealCount:Gi}}),xe=(()=>{var R=Ot.length||1,Ve=Ot.reduce((pa,qt)=>({cal:pa.cal+(qt.cal||0),p:pa.p+(qt.p||0),c:pa.c+(qt.c||0),f:pa.f+(qt.f||0)}),{cal:0,p:0,c:0,f:0});return{cal:Math.round(Ve.cal/R),p:Math.round(Ve.p/R),c:Math.round(Ve.c/R),f:Math.round(Ve.f/R)}})(),p=(()=>{var R=Ot.filter(pa=>(pa.mealCount||0)>=3).length,Ve=Ot.filter(pa=>(pa.cal||0)>0).length;return{daysWith3Meals:R,daysLogged:Ve,totalDays:Ot.length}})();return{dk7:n,dk30:y,total30:jt,workout7:ie.workout.length,workout30:Dt.workout.length,nutrition7:ie.nutrition.length,nutrition30:Dt.nutrition.length,health7:ie.body.length+ie.recovery.length,health30:Dt.body.length+Dt.recovery.length,calories7:b,calories30:We,lastWeight:ii,dayCounts:Kt,targets:ra,nutritionDaily7:Ot,nutritionAverages7:xe,mealConsistency7:p}},[ve]),nt=(()=>{try{return typeof window!="undefined"&&window.__fof_trackHubPage?window.__fof_trackHubPage:null}catch(n){return null}})(),[Lt,ze]=React.useState(nt),[Le,se]=React.useState("TODAY"),[at,Pe]=React.useState("TODAY"),[Wt,Ha]=React.useState("TODAY"),[qa,oa]=React.useState(!1),[Ra,ri]=React.useState(!1),[Da,Va]=React.useState("2200"),[Y,ft]=React.useState("150"),[_a,Ja]=React.useState("250"),[Ui,qs]=React.useState("70");React.useEffect(()=>{if(Ra)try{var n=localStorage.getItem("fof_nutrition_targets_v1"),y=n?JSON.parse(n):null;y&&typeof y=="object"&&(y.calories!=null&&Va(String(y.calories)),y.protein!=null&&ft(String(y.protein)),y.carbs!=null&&Ja(String(y.carbs)),y.fat!=null&&qs(String(y.fat)))}catch(n){}},[Ra]);var _o=()=>{try{var n={calories:Number(Da)||0,protein:Number(Y)||0,carbs:Number(_a)||0,fat:Number(Ui)||0,updatedAt:Date.now()};localStorage.setItem("fof_nutrition_targets_v1",JSON.stringify(n));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Targets saved",message:"Nutrition targets updated."}}))}catch(y){}ri(!1)}catch(n){try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Could not save",message:"Please try again."}}))}catch(y){}}},ki=React.useMemo(()=>{try{var n=e&&(e.surfaceKey||e.clientId||e.id)||"demo_surface";var y="INDEPENDENT";try{var be=localStorage.getItem("fof_user_context_v1");if(be){var ie=JSON.parse(be);ie&&ie.clientMode&&(y=String(ie.clientMode).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT")}}catch(be){}return"fof_active_workout__"+n+"__"+y}catch(n){return"fof_active_workout__demo_surface__INDEPENDENT"}},[e]),[Vs,Ke]=React.useState(!1),[ua,ga]=React.useState(()=>{try{var n=localStorage.getItem(ki);return n&&JSON.parse(n)||null}catch(n){}return null}),[Vi,$i]=React.useState("WORKOUT"),[Ya,Zt]=React.useState(0),Ki=React.useCallback(n=>{if(!n)return 0;var y=Number(n.elapsedSec||0)||0;if(n.timerRunning&&n.startedAt){var be=Math.max(0,Math.floor((Date.now()-Number(n.startedAt||Date.now()))/1e3));return y+be}return y},[]),[Fa,Ni]=React.useState(0),[ys,Ps]=React.useState(!1),[Ms,o]=React.useState(!1),[d,m]=React.useState(!1),[E,g]=React.useState(null),[f,F]=React.useState("LOG");React.useEffect(()=>{try{typeof window!="undefined"&&(window.__fof_trackHubPage=Lt)}catch(n){}},[Lt]),React.useEffect(()=>{try{ua?localStorage.setItem(ki,JSON.stringify(ua)):localStorage.removeItem(ki)}catch(n){}},[ua,ki]),React.useEffect(()=>{try{var n=localStorage.getItem(ki);ga(n&&JSON.parse(n)||null)}catch(n){try{ga(null)}catch(y){}}},[ki]),React.useEffect(()=>{try{if(!ua){Zt(0);return}Zt(Ki(ua))}catch(n){}},[ua==null?void 0:ua.id]),React.useEffect(()=>{try{if(!ua){Zt(0);return}if(Vs){ua.timerRunning||ga(n=>n&&{...n,timerRunning:!0,startedAt:Date.now()});return}if(ua.timerRunning){var n=Ki(ua);ga(y=>y&&{...y,timerRunning:!1,elapsedSec:n,startedAt:null}),Zt(n)}else Zt(Number(ua.elapsedSec||0)||0)}catch(n){}},[Vs,ua==null?void 0:ua.id]),React.useEffect(()=>{if(!Vs||!ua||!ua.timerRunning)return;var n=setInterval(()=>{try{Zt(Ki(ua))}catch(y){}},1e3);return()=>clearInterval(n)},[Vs,ua==null?void 0:ua.id,ua==null?void 0:ua.timerRunning,ua==null?void 0:ua.startedAt]),React.useEffect(()=>{var n=()=>{try{document.visibilityState==="hidden"&&Vs&&Ke(!1)}catch(y){}};try{document.addEventListener("visibilitychange",n)}catch(y){}return()=>{try{document.removeEventListener("visibilitychange",n)}catch(y){}}},[Vs]),React.useEffect(()=>{if(!Fa||Fa<=0||ys)return;var n=setInterval(()=>{try{Ni(y=>{var be=(Number(y)||0)-1;if(be<=0){try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Rest complete",message:"Ready for your next set."}}))}catch(ie){}try{Ps(!1)}catch(ie){}return 0}return be})}catch(y){}},1e3);return()=>clearInterval(n)},[Fa,ys]),React.useEffect(()=>{var n=y=>{var be=y&&y.detail?y.detail:{},ie=be&&be.subtab?String(be.subtab).toUpperCase():"";if(ie){if(ie==="INSIGHTS"){try{ze("INSIGHTS")}catch(Dt){}return}if(ie==="WORKOUT"||ie==="WORKOUTS"){try{ze("WORKOUT")}catch(Dt){}return}if(ie==="NUTRITION"||ie==="FOOD"||ie==="MEALS"){try{ze("NUTRITION")}catch(Dt){}return}if(ie==="HEALTH"||ie==="BODY"||ie==="METRICS"||ie==="HABITS"||ie==="RECOVERY"){try{ze("HEALTH")}catch(Dt){}return}}};try{window.addEventListener("flowofit:openLogSubtab",n)}catch(y){}return()=>{try{window.removeEventListener("flowofit:openLogSubtab",n)}catch(y){}}},[]);var D="__fof_body_events_v1",k="__fof_recovery_events_v1",T="__fof_nutrition_events_v1",he=(n=Date.now())=>{try{var y=new Date(n),be=y.getFullYear(),ie=String(y.getMonth()+1).padStart(2,"0"),Dt=String(y.getDate()).padStart(2,"0");return`${be}-${ie}-${Dt}`}catch(y){return""}},oe=n=>{try{var y=new Date(n),be=String(y.getHours()).padStart(2,"0"),ie=String(y.getMinutes()).padStart(2,"0");return`${be}:${ie}`}catch(y){return""}},ke=React.useCallback(n=>{try{return JSON.parse(localStorage.getItem(n)||"[]")||[]}catch(y){return[]}},[]),Re=React.useCallback(n=>{try{var y=localStorage.getItem("fof_client_logs_v1");if(!y)return[];var be=JSON.parse(y)||{},ie=[];return Object.keys(be||{}).forEach(Dt=>{var b=be[Dt]||{};(Array.isArray(b[n])?b[n]:[]).forEach(da=>{da&&ie.push({...da,dk:da.dk||da.dateKey||Dt,dateKey:da.dateKey||Dt,ts:da.ts||Date.now()})})}),ie}catch(y){return[]}},[]),Me=(n,y)=>{var be=[],ie=new Set;return(Array.isArray(n)?n:[]).concat(Array.isArray(y)?y:[]).forEach(Dt=>{try{var b=Dt&&(Dt.id||String(Dt.dateKey||Dt.dk||"")+"::"+String(Dt.ts||""));if(!b||ie.has(b))return;ie.add(b),be.push(Dt)}catch(b){}}),be},Et=React.useCallback(()=>Me(ke(D),Re("body")),[ke,Re]),ya=React.useCallback(()=>Me(ke(k),Re("recovery")),[ke,Re]),Ct=React.useCallback(()=>Me(ke(T),Re("nutrition")),[ke,Re]),[Jt,Ye]=React.useState(()=>Et()),[Tt,_t]=React.useState(()=>ya()),[P,I]=React.useState(()=>Ct()),te=React.useMemo(()=>{try{var n=e&&(e.surfaceKey||e.clientId||e.id)||"demo_surface";var y="INDEPENDENT";try{var be=localStorage.getItem("fof_user_context_v1");if(be){var ie=JSON.parse(be);ie&&ie.clientMode&&(y=String(ie.clientMode).toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT")}}catch(be){}return"fof_workout_log__"+n+"__"+y}catch(n){return"fof_workout_log__demo_surface__INDEPENDENT"}},[e]),[Ce,C]=React.useState(()=>{try{var n=localStorage.getItem(te);if(n)return JSON.parse(n)||[]}catch(n){}return[]});React.useEffect(()=>{var n=()=>{try{Ye(Et())}catch(y){}try{_t(ya())}catch(y){}try{I(Ct())}catch(y){}try{var y=localStorage.getItem(te);C(y?JSON.parse(y)||[]:[])}catch(y){try{C([])}catch(be){}}};return window.addEventListener("flowofit:logUpdated",n),window.addEventListener("flowofit:logsUpdated",n),window.addEventListener("flowofit:workoutLogsUpdated",n),window.addEventListener("storage",n),()=>{window.removeEventListener("flowofit:logUpdated",n),window.removeEventListener("flowofit:logsUpdated",n),window.removeEventListener("storage",n)}},[ke]);var ye=he(Date.now()),le=n=>{var y=Math.max(0,Number(n)||0),be=String(Math.floor(y/60)).padStart(2,"0"),ie=String(y%60).padStart(2,"0");return be+":"+ie},O=React.useCallback(()=>{try{var y=localStorage.getItem(ki);if(y){var be=JSON.parse(y);if(be&&be.id){var ie=be.elapsedSec!==void 0&&be.elapsedSec!==null,Dt=be.timerRunning!==void 0&&be.timerRunning!==null,b={...be,elapsedSec:ie&&Number(be.elapsedSec)||0,timerRunning:Dt?be.timerRunning===!0:!1,startedAt:Dt&&be.timerRunning===!0?be.startedAt||Date.now():null};return ga(b),b}}}catch(y){}var n={id:"aw_"+Math.random().toString(16).slice(2),startedAt:Date.now(),timerRunning:!0,elapsedSec:0,title:"Workout",exercises:[],notes:""};try{localStorage.setItem(ki,JSON.stringify(n))}catch(y){}return ga(n),n},[ki]);React.useEffect(()=>{var n=()=>{try{ze("WORKOUT")}catch(y){}try{se("TODAY")}catch(y){}try{F("SESSION");var y=O();$i("WORKOUT"),Ke(!0),(!(y!=null&&y.exercises)||y.exercises.length===0)&&setTimeout(()=>{try{oa(!0)}catch(be){}},50)}catch(y){}};try{window.addEventListener("flowofit:openActiveWorkout",n)}catch(y){}return()=>{try{window.removeEventListener("flowofit:openActiveWorkout",n)}catch(y){}}},[O]);var qe=React.useCallback(n=>{ga(y=>{var be=y&&y.id?y:O(),ie={uid:"ex_"+Math.random().toString(16).slice(2),id:(n==null?void 0:n.id)||(n==null?void 0:n.slug)||(n==null?void 0:n.name),name:(n==null?void 0:n.name)||"Exercise",group:(n==null?void 0:n.group)||(n==null?void 0:n.muscle)||(n==null?void 0:n.primaryMuscle)||"",equipment:(n==null?void 0:n.equipment)||"",sets:[{reps:"",weight:"",done:!1,rpe:""}],note:""},Dt={...be,exercises:[...be.exercises||[],ie]};try{localStorage.setItem(ki,JSON.stringify(Dt))}catch(b){}return Dt});try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Added to workout",message:(n==null?void 0:n.name)||"Exercise"}}))}catch(y){}},[ki,O]),Pt=React.useCallback((n,y,be)=>{ga(ie=>{if(!ie)return ie;var Dt=(ie.exercises||[]).map(We=>{if(We.uid!==n)return We;var da=(We.sets||[]).map((ii,jt)=>jt===y?{...ii,...be}:ii);return{...We,sets:da}}),b={...ie,exercises:Dt};try{localStorage.setItem(ki,JSON.stringify(b))}catch(We){}return b})},[ki]),Za=React.useCallback(n=>{ga(y=>{if(!y)return y;var be=(y.exercises||[]).map(Dt=>{if(Dt.uid!==n)return Dt;var b=[...Dt.sets||[],{reps:"",weight:"",done:!1,rpe:""}];return{...Dt,sets:b}}),ie={...y,exercises:be};try{localStorage.setItem(ki,JSON.stringify(ie))}catch(Dt){}return ie})},[ki]),Ma=React.useCallback(n=>{ga(y=>{if(!y)return y;var be=(y.exercises||[]).map(Dt=>{if(Dt.uid!==n)return Dt;var b=Dt.sets||[],We=b[b.length-1]||{reps:"",weight:"",done:!1,rpe:""};return{...Dt,sets:[...b,{...We,done:!1}]}}),ie={...y,exercises:be};try{localStorage.setItem(ki,JSON.stringify(ie))}catch(Dt){}return ie})},[ki]),$a=React.useCallback((n,y)=>{ga(be=>{if(!be)return be;var ie=(be.exercises||[]).map(b=>{if(b.uid!==n)return b;var We=(b.sets||[]).filter((da,ii)=>ii!==y);return{...b,sets:We.length?We:[{reps:"",weight:"",done:!1,rpe:""}]}}),Dt={...be,exercises:ie};try{localStorage.setItem(ki,JSON.stringify(Dt))}catch(b){}return Dt})},[ki]),Yt=React.useCallback(()=>{try{var n=ua;if(!n||!n.id){Ke(!1);return}var y=Number(n.startedAt||Date.now()),be=Date.now(),ie=Math.max(1,Math.round((be-y)/1e3/60)),Dt=(n.exercises||[]).length,b=(n.exercises||[]).reduce((Ti,Ee)=>Ti+(Ee.sets||[]).length,0),We=window.__fof_localDateKey?window.__fof_localDateKey(new Date(y)):new Date(y).toISOString().slice(0,10),da={title:n.title||"Workout",durationMin:ie,startedAt:y,finishedAt:be,exercises:n.exercises||[],notes:n.notes||""};var ii=null;try{if(typeof window.__fof_addLog=="function"){var Ti=window.__fof_addLog(We,"workout",{title:da.title,meta:{kind:"SESSION",duration:String(ie)},payload:da});ii=Ti&&Ti.id?Ti.id:null}}catch(Ti){}var jt={id:"sess_"+Math.random().toString(16).slice(2),ts:be,dateKey:We,type:da.title,minutes:String(ie),rpe:"",note:`${da.title} \u2022 ${Dt} exercises \u2022 ${b} sets`,payload:da,details:da,logId:ii},Kt=localStorage.getItem(te),Na=Kt?JSON.parse(Kt)||[]:[],ra=[jt,...Na].slice(0,200);localStorage.setItem(te,JSON.stringify(ra));try{C(ra)}catch(Ti){}try{window.dispatchEvent(new CustomEvent("flowofit:workoutLogsUpdated"))}catch(Ti){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Workout saved",message:`${ie} min \u2022 ${Dt} exercises`}}))}catch(Ti){}}catch(n){}try{localStorage.removeItem(ki)}catch(n){}ga(null),Ke(!1)},[ua,te,ki]),it=React.useCallback(n=>{try{var y=n;if(!y)return;var be=Number(y.startedAt||Date.now()),ie=Number(y.finishedAt||Date.now()),Dt=Math.max(1,Number(y.mins||Math.round((ie-be)/1e3/60))||1),b=(y.exercises||[]).length,We=(y.exercises||[]).reduce((Ee,ae)=>Ee+(ae.sets||[]).length,0),da=window.__fof_localDateKey?window.__fof_localDateKey(new Date(be)):new Date(be).toISOString().slice(0,10),ii={title:y.title||"Workout",durationMin:Dt,startedAt:be,finishedAt:ie,exercises:y.exercises||[],notes:y.notes||""};var jt=null;try{if(typeof window.__fof_addLog=="function"){var Ee=window.__fof_addLog(da,"workout",{title:ii.title,meta:{kind:"SESSION",duration:String(Dt)},payload:ii});jt=Ee&&Ee.id?Ee.id:null}}catch(Ee){}var Kt={id:"sess_"+Math.random().toString(16).slice(2),ts:ie,dateKey:da,type:ii.title,minutes:String(Dt),rpe:"",note:`${ii.title} \u2022 ${b} exercises \u2022 ${We} sets`,payload:ii,details:ii,logId:jt},Na=localStorage.getItem(te),ra=Na?JSON.parse(Na)||[]:[],Ti=[Kt,...ra].slice(0,200);localStorage.setItem(te,JSON.stringify(Ti));try{C(Ti)}catch(Ee){}try{window.dispatchEvent(new CustomEvent("flowofit:workoutLogsUpdated"))}catch(Ee){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Workout saved",message:`${Dt} min \u2022 ${b} exercises`}}))}catch(Ee){}}catch(y){}try{localStorage.removeItem(ki)}catch(y){}ga(null),Ke(!1),m(!1),g(null);try{var y=window.__FOF&&typeof window.__FOF.getCapacity=="function"?window.__FOF.getCapacity()||{}:{},be=String(y&&y.zone||"").toUpperCase()||"MID",ie={workoutTitle:n&&(n.title||n.name)?n.title||n.name:"Workout",mins:n&&n.mins?n.mins:null,exCount:n&&n.exercises&&Array.isArray(n.exercises)?n.exercises.length:null,zone:be};setTimeout(()=>{try{window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay("POST_WORKOUT_ADDON_SHEET_V1",ie):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"POST_WORKOUT_ADDON_SHEET_V1",props:ie}}))}catch(Dt){}},0)}catch(y){}},[te,ki]),Ut=(Jt||[]).filter(n=>he(n.ts||Date.now())===ye).sort((n,y)=>(y.ts||0)-(n.ts||0)),ce=(Tt||[]).filter(n=>he(n.ts||Date.now())===ye).sort((n,y)=>(y.ts||0)-(n.ts||0)),Vt=(P||[]).filter(n=>he(n.ts||Date.now())===ye).sort((n,y)=>(y.ts||0)-(n.ts||0)),Fe=typeof Ce!="undefined"&&Array.isArray(Ce)?Ce:[],v=n=>{try{if(n==null)return null;var y=String(n).trim();if(!y)return null;var be=y.match(/-?\d+(?:.\d+)?/);if(!be)return null;var ie=Number(be[0]);return Number.isFinite(ie)?ie:null}catch(y){return null}},Te=React.useCallback(n=>{try{var y=(n==null?void 0:n.payload)||(n==null?void 0:n.details)||{},be=Array.isArray(y.exercises)?y.exercises:[];var ie=0,Dt=0,b=null;return be.forEach(We=>{(Array.isArray(We==null?void 0:We.sets)?We.sets:[]).forEach(ii=>{ie+=1;var jt=v(ii==null?void 0:ii.weight),Kt=v(ii==null?void 0:ii.reps);jt!==null&&(b=b===null?jt:Math.max(b,jt)),jt!==null&&Kt!==null&&(Dt+=jt*Kt)})}),{sets:ie,volume:Dt,maxWeight:b}}catch(y){return{sets:0,volume:0,maxWeight:null}}},[]),Se=React.useMemo(()=>{try{var n=(window.__fof_getClientContext?window.__fof_getClientContext():{tier:"FREE"})||{tier:"FREE"},y=String(n.tier||"FREE").toUpperCase(),be=7,ie=Date.now()-be*24*60*60*1e3,Dt=(Fe||[]).slice().sort((We,da)=>((da==null?void 0:da.ts)||0)-((We==null?void 0:We.ts)||0));var b=null;return Dt.map(We=>{var da=Te(We),ii=da.maxWeight!==null&&(b===null||da.maxWeight>b);da.maxWeight!==null&&(b=b===null?da.maxWeight:Math.max(b,da.maxWeight));var jt=y==="FREE"&&((We==null?void 0:We.ts)||0)<ie;return{...We,__stats:da,__isPR:ii,__locked:jt,__lockDays:be}})}catch(n){return[]}},[Fe,Te]),yt=React.useCallback(n=>{try{if(!n)return;var y=(n==null?void 0:n.payload)||(n==null?void 0:n.details)||{},be=String(y.title||(n==null?void 0:n.type)||"Workout"),ie=Array.isArray(y.exercises)?y.exercises:[],Dt={id:(n==null?void 0:n.id)||"aw_"+Math.random().toString(16).slice(2),startedAt:Number(y.startedAt||(n==null?void 0:n.ts)||Date.now()),timerRunning:!1,elapsedSec:0,title:be,exercises:ie.map(b=>({uid:(b==null?void 0:b.uid)||"ex_"+Math.random().toString(16).slice(2),id:(b==null?void 0:b.id)||(b==null?void 0:b.slug)||(b==null?void 0:b.name),name:(b==null?void 0:b.name)||"Exercise",group:(b==null?void 0:b.group)||(b==null?void 0:b.muscle)||(b==null?void 0:b.primaryMuscle)||"",equipment:(b==null?void 0:b.equipment)||"",sets:(Array.isArray(b==null?void 0:b.sets)?b.sets:[{reps:"",weight:"",done:!1,rpe:""}]).map(We=>{var da,ii,jt;return{reps:(da=We==null?void 0:We.reps)!=null?da:"",weight:(ii=We==null?void 0:We.weight)!=null?ii:"",done:(We==null?void 0:We.done)===!0,rpe:(jt=We==null?void 0:We.rpe)!=null?jt:""}}),note:(b==null?void 0:b.note)||""})),notes:String(y.notes||y.note||(n==null?void 0:n.note)||"")};try{localStorage.setItem(ki,JSON.stringify(Dt))}catch(b){}try{ga(Dt)}catch(b){}try{ze("WORKOUT")}catch(b){}try{se("TODAY")}catch(b){}try{$i("WORKOUT")}catch(b){}try{Ke(!0)}catch(b){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Loaded workout",message:"Editing in live tracker."}}))}catch(b){}}catch(y){}},[ki]);React.useEffect(()=>{var n=y=>{try{var be=y&&y.detail&&y.detail.item;be&&yt(be)}catch(be){}};try{window.addEventListener("flowofit:openLiveWorkoutFromHistory",n)}catch(y){}return()=>{try{window.removeEventListener("flowofit:openLiveWorkoutFromHistory",n)}catch(y){}}},[yt]);var St=n=>{try{var y=he((n==null?void 0:n.ts)||Date.now()),be=(n==null?void 0:n.payload)||(n==null?void 0:n.details)||n||{},ie={...n,dayKey:y,payload:be,_workoutKey:te,_activeWorkoutKey:ki,_openInLiveTracker:yt};window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay&&window.__FOF_CLIENT.openOverlay("WORKOUT_VIEWER_SHEET_V1",{item:ie})}catch(y){}},za=n=>{var y={};return(n||[]).forEach(be=>{var ie=he(be.ts||Date.now());y[ie]||(y[ie]={dayKey:ie,entries:0,tsLatest:0}),y[ie].entries+=1,y[ie].tsLatest=Math.max(y[ie].tsLatest,be.ts||0)}),Object.values(y).sort((be,ie)=>(ie.tsLatest||0)-(be.tsLatest||0))},dt=(n=>{var y={};return(n||[]).forEach(be=>{var ie=he(be.ts||Date.now());y[ie]||(y[ie]=[]),y[ie].push(be)}),Object.keys(y).forEach(be=>{y[be]=(y[be]||[]).slice().sort((ie,Dt)=>(Dt.ts||0)-(ie.ts||0))}),y})(Fe),Qt=za(Jt),yi=za(Tt),zi=za(P),os=({icon:n,title:y,subtitle:be,onClick:ie})=>React.createElement("button",{type:"button",onClick:ie,className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"shrink-0 w-10 h-10 rounded-2xl bg-black/25 border border-white/10 flex items-center justify-center"},React.createElement("i",{"data-lucide":n,className:"w-5 h-5 text-white/90"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},y),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold leading-snug"},be)))),as=({id:n,icon:y,title:be,sub:ie})=>{var Dt=r===n;return React.createElement("button",{type:"button",onClick:()=>{try{if(n==="WEEKLY_REVIEW"){window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay("WEEKLY_REVIEW_V1",{from:"TRACK_MINIHUB"}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WEEKLY_REVIEW_V1",props:{from:"TRACK_MINIHUB"}}}));return}}catch(b){}try{c(n)}catch(b){}try{ze(n)}catch(b){}try{n==="WORKOUT"&&se("TODAY"),n==="NUTRITION"&&Pe("TODAY"),n==="HEALTH"&&Ha("TODAY")}catch(b){}},className:["rounded-3xl border p-4 text-left transition shadow-[0_18px_60px_rgba(0,0,0,0.30)]",Dt?"border-white/18 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/8"].join(" "),"aria-pressed":Dt},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"shrink-0 w-11 h-11 rounded-2xl bg-black/25 border border-white/10 flex items-center justify-center"},React.createElement("i",{"data-lucide":y,className:"w-5 h-5 text-white/90"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[14px] font-extrabold text-white leading-tight"},be),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-bold leading-snug"},ie))))},ro=n=>{try{c(n)}catch(y){}try{n==="WORKOUT"&&se("HISTORY"),n==="NUTRITION"&&Pe("HISTORY"),n==="HEALTH"&&Ha("HISTORY")}catch(y){}};return React.createElement("div",{className:"px-4 pt-3 pb-28"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[20px] font-black text-white tracking-tight"},"Track"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 leading-snug"},"Mini-hubs on top. Quick Log below. Full history lives in Log.")),React.createElement(sa,{open:Oe,onClose:()=>N(!1),tier:De,mode:Ne,defaultTab:we,insights:_e,targets:_e==null?void 0:_e.targets})),!Lt&&React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement(as,{id:"WORKOUT",icon:"dumbbell",title:"Workout",sub:"Start, log, review."}),React.createElement(as,{id:"NUTRITION",icon:"utensils",title:"Nutrition",sub:"Meals + totals."}),React.createElement(as,{id:"HEALTH",icon:"heart-pulse",title:"Health",sub:"Metrics + recovery."}),React.createElement(as,{id:"INSIGHTS",icon:"bar-chart-3",title:"Insights",sub:"Generated from tracking."}),React.createElement(as,{id:"WEEKLY_REVIEW",icon:"calendar-check",title:"Weekly Review",sub:"Recap & progress."})),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Quick Log"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigate",{detail:{to:"LOG"}}))}catch(n){}},className:"text-[12px] font-extrabold text-white/70 hover:text-white"},"View history \u2192")),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement(os,{icon:"plus",title:"Log Workout (Today)",subtitle:"Start or log a session.",onClick:()=>{var n,y;try{var be=ye;(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"WORKOUT",be)}catch(be){}}}),React.createElement(os,{icon:"utensils",title:"Add Food (Today)",subtitle:"Quick add a meal.",onClick:()=>{var n,y;try{var be=ye;ze("NUTRITION"),Pe("TODAY"),(y=(n=window.__fof_openers)==null?void 0:n.openFoodAddSheet)==null||y.call(n,be,{meal:"BREAKFAST"})}catch(be){}}}),React.createElement(os,{icon:"activity",title:"Add Metric (Today)",subtitle:"Weight and body metrics.",onClick:()=>{var n,y;try{var be=ye;(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"BODY",be)}catch(be){}}}),React.createElement(os,{icon:"moon",title:"Log Recovery (Today)",subtitle:"Sleep, soreness, stress notes.",onClick:()=>{var n,y;try{var be=ye;(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"RECOVERY",be)}catch(be){}}})))),Lt?React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>ze(null),className:"rounded-2xl border border-white/10 bg-black/25 px-3 py-2 text-[12px] font-extrabold text-white/80 hover:bg-white/10"},"\u2190 Back"),React.createElement("div",{className:"text-[11px] font-extrabold text-white/50"},"Track")),Lt==="WORKOUT"?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Workout"),React.createElement("div",{className:"inline-flex gap-1 rounded-2xl bg-black/25 border border-white/10 p-1"},React.createElement("button",{type:"button",onClick:()=>se("TODAY"),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold transition",Le==="TODAY"?"bg-white/10 text-white":"bg-transparent text-white/70 hover:bg-white/8"].join(" ")},"Today"),React.createElement("button",{type:"button",onClick:()=>se("HISTORY"),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold transition",Le==="HISTORY"?"bg-white/10 text-white":"bg-transparent text-white/70 hover:bg-white/8"].join(" ")},"History"))),ua&&ua.id?React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Active workout in progress"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60 font-bold"},ua.title||"Workout"," \u2022 ",le(Ya))),React.createElement("button",{type:"button",onClick:()=>{try{$i("WORKOUT"),Ke(!0)}catch(n){}},className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] font-extrabold text-white/85 hover:bg-white/10"},"Resume"))):React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/25 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"No active workout"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60 font-bold"},"Start Live Tracker to begin a session.")),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>{try{F("SESSION");var n=(()=>{try{return localStorage.getItem(ki)}catch(ie){return null}})(),y=n?(()=>{try{return JSON.parse(n)}catch(ie){return null}})():null;if(y&&y.id){ga(y),$i("WORKOUT"),Ke(!0);return}var be=O();$i("WORKOUT"),Ke(!0),(!(be!=null&&be.exercises)||be.exercises.length===0)&&setTimeout(()=>{try{oa(!0)}catch(ie){}},50)}catch(n){}},className:"w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold shadow-[0_18px_60px_rgba(0,0,0,0.25)] active:scale-[0.99]"},ua&&ua.id?"Resume Live Tracker":"Start Live Tracker")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>oa(!0),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-3 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Exercise Library"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Search \u2022 filters \u2022 favorites")),React.createElement("button",{type:"button",onClick:()=>{var n,y;try{(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"WORKOUT",typeof ye!="undefined"?ye:null)}catch(be){}},className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-3 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Quick Log"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Add sets fast"))),Le==="TODAY"?React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Recent Sessions"),Se&&Se.length?React.createElement("div",{className:"space-y-2"},Se.slice(0,3).map(n=>{var da,ii;var be=new Date(n.ts||Date.now()).toLocaleDateString(void 0,{month:"short",day:"numeric"}),ie=n.minutes?`${n.minutes} min`:(da=n==null?void 0:n.payload)!=null&&da.durationMin?`${n.payload.durationMin} min`:null,Dt=n.__stats&&Number.isFinite(n.__stats.volume)?Math.round(n.__stats.volume):null,b=n.__stats&&Number.isFinite(n.__stats.sets)?n.__stats.sets:null,We=[ie,b?`${b} sets`:null,Dt?`${Dt} kg\xB7reps`:null].filter(Boolean).join(" \u2022 ");return React.createElement("button",{key:n.id||String(n.ts),type:"button",onClick:()=>{try{if(n.__locked){try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay&&window.__FOF_CLIENT.openOverlay("PAYWALL_SHEET_V1",{feature:"WORKOUT_HISTORY",from:"WORKOUT_HISTORY",meta:{lockDays:n.__lockDays||7}})}catch(jt){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Locked",message:`Unlock full history to view workouts older than ${n.__lockDays||7} days.`}}))}catch(jt){}return}St(n)}catch(jt){}},className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},n.type||((ii=n==null?void 0:n.payload)==null?void 0:ii.title)||"Workout"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold truncate"},We||(n.note?String(n.note).slice(0,64):"Logged session"))),React.createElement("div",{className:"text-[11px] font-extrabold text-white/45 whitespace-nowrap"},be)))})):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/60 font-bold"},"No sessions yet. Tap ",React.createElement("span",{className:"text-white"},"Start Live Tracker")," to log your first one."),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"Locked",message:"Templates / Programs unlock in A3."}}))}catch(n){}try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay&&window.__FOF_CLIENT.openOverlay("PAYWALL_SHEET_V1",{feature:"TEMPLATES_PROGRAMS",from:"WORKOUT_MINIHUB"})}catch(n){}},className:"w-full text-left rounded-3xl border border-white/10 bg-gradient-to-r from-white/8 to-white/5 p-4 hover:bg-white/8 transition"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Templates & Programs"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold leading-snug"},"Build or reuse structured workouts (locked preview)")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2 py-1 text-[11px] font-extrabold text-white/70"},"Locked"))),React.createElement("div",{className:"pt-1"},React.createElement("button",{type:"button",onClick:()=>{try{se("HISTORY")}catch(n){}},className:"text-[12px] font-extrabold text-white/80 hover:text-white"},"View all workouts \u2192"))):null,Le==="HISTORY"?React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Workout History"),React.createElement("button",{type:"button",onClick:()=>se("TODAY"),className:"text-[12px] font-extrabold text-white/70 hover:text-white"},"Back to Today")),Se&&Se.length?React.createElement("div",{className:"space-y-2"},Se.slice(0,60).map(n=>{var ii,jt;var y=new Date(n.ts||Date.now()),be=y.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),ie=y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Dt=n.minutes?`${n.minutes} min`:(ii=n==null?void 0:n.payload)!=null&&ii.durationMin?`${n.payload.durationMin} min`:null,b=n.__stats&&Number.isFinite(n.__stats.volume)?Math.round(n.__stats.volume):null,We=n.__stats&&Number.isFinite(n.__stats.sets)?n.__stats.sets:null,da=[Dt,We?`${We} sets`:null,b?`${b} kg\xB7reps`:null].filter(Boolean).join(" \u2022 ");return React.createElement("button",{key:n.id||String(n.ts),type:"button",onClick:()=>{try{if(n.__locked){try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay&&window.__FOF_CLIENT.openOverlay("PAYWALL_SHEET_V1",{feature:"WORKOUT_HISTORY",from:"WORKOUT_HISTORY",meta:{lockDays:n.__lockDays||7}})}catch(Kt){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Locked",message:`Unlock full history to view workouts older than ${n.__lockDays||7} days.`}}))}catch(Kt){}return}St(n)}catch(Kt){}},className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-center gap-2 min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},n.type||((jt=n==null?void 0:n.payload)==null?void 0:jt.title)||"Workout"),n.__locked?React.createElement("span",{className:"shrink-0 px-2 py-[2px] rounded-full border border-amber-300/25 bg-amber-500/15 text-[10px] font-extrabold text-amber-100"},"Locked"):null,!n.__locked&&n.__isPR?React.createElement("span",{className:"shrink-0 px-2 py-[2px] rounded-full border border-emerald-400/25 bg-emerald-500/15 text-[10px] font-extrabold text-emerald-100"},"PR"):null),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold truncate"},da||(n.note?String(n.note).slice(0,80):"Logged session"))),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70 whitespace-nowrap"},be),React.createElement("div",{className:"mt-0.5 text-[10px] font-extrabold text-white/45 whitespace-nowrap"},ie))))}),React.createElement("div",{className:"text-[11px] text-white/55 font-bold"},"Tip: Tap a session to view details. Use ",React.createElement("span",{className:"text-white/80"},"Edit")," to change sets/notes, or open it in the live tracker.")):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/60 font-bold"},"No workout history yet.")):null):null,Lt==="NUTRITION"?React.createElement("div",{className:"-mx-4 -my-4 flex flex-col min-h-[calc(100vh-180px)]"},React.createElement("div",{className:"px-4 pt-4 pb-3 sticky top-0 z-20 border-b border-white/10 bg-black/35 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[15px] font-extrabold text-white"},"Nutrition"),React.createElement("div",{className:"text-[12px] text-white/55 font-semibold"},"Diary \u2022 meals \u2022 day totals")),React.createElement("div",{className:"inline-flex gap-1 rounded-2xl bg-black/25 border border-white/10 p-1"},React.createElement("button",{type:"button",onClick:()=>Pe("TODAY"),className:["px-3 py-2 rounded-xl text-[12px] font-black transition",at==="TODAY"?"bg-white/15 text-white":"bg-transparent text-white/70 hover:bg-white/10"].join(" ")},"Today"),React.createElement("button",{type:"button",onClick:()=>Pe("HISTORY"),className:["px-3 py-2 rounded-xl text-[12px] font-black transition",at==="HISTORY"?"bg-white/15 text-white":"bg-transparent text-white/70 hover:bg-white/10"].join(" ")},"History")))),React.createElement("div",{className:"flex-1 overflow-y-auto px-4 pt-3 pb-28 scroll-area"},at==="TODAY"?React.createElement("div",{className:"space-y-3"},React.createElement(J,{initialDayKey:ye,onAddFood:({dayKey:n,mealKey:y})=>{var be,ie;try{(ie=(be=window.__fof_openers)==null?void 0:be.openFoodAddSheet)==null||ie.call(be,n,{meal:y})}catch(Dt){}},onDeleteEntry:({dayKey:n,id:y})=>{try{if(!y||!(typeof window.confirm=="function"?window.confirm("Delete this food entry?"):!0))return;var ie="__fof_nutrition_events_v1",Dt="__fof_food_favorites_custom_v1",b=localStorage.getItem(ie),We=b?JSON.parse(b):[],ii=(Array.isArray(We)?We:[]).filter(jt=>!(jt&&String(jt.id)===String(y)&&String(jt.dk)===String(n)));localStorage.setItem(ie,JSON.stringify(ii));try{window.dispatchEvent(new CustomEvent("flowofit:logsUpdated",{detail:{dateKey:n,type:"NUTRITION"}}))}catch(jt){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Deleted",message:"Entry removed."}}))}catch(jt){}}catch(be){}},onOpenEntry:({dayKey:n,entryId:y})=>{var be,ie;try{(ie=(be=window.__fof_openers)==null?void 0:be.openFoodEntryDetailSheet)==null||ie.call(be,n,y)}catch(Dt){}},onOpenActions:({scope:n,dayKey:y,mealKey:be})=>{var ie,Dt;try{(Dt=(ie=window.__fof_openers)==null?void 0:ie.openNutritionActionsSheet)==null||Dt.call(ie,y,{scope:n,mealKey:be})}catch(b){}}}),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Scanner / advanced search"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},"Locked (A4) \u2014 preview only")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"Locked",message:"Scanner / advanced search is locked (A4).",kind:"info"}}))}catch(n){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-black text-white/80"},"Locked")))):React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Nutrition history"),(zi||[]).slice(0,12).map((n,y)=>React.createElement("button",{key:n.dayKey+"-"+y,type:"button",onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("NUTRITION_DAY_HISTORY_SHEET_V1",{dayKey:n.dayKey}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"NUTRITION_DAY_HISTORY_SHEET_V1",props:{dayKey:n.dayKey}}}))}catch(be){}},className:"w-full text-left rounded-2xl border border-white/10 bg-black/25 hover:bg-black/30 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] font-black text-white/85"},n.dayKey),React.createElement("div",{className:"text-[11px] font-black text-white/70"},n.entries," entries")))),!zi||zi.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/70 font-bold"},"No nutrition history yet."):null))):null,Lt==="HEALTH"?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Health"),React.createElement("div",{className:"inline-flex gap-1 rounded-2xl bg-black/25 border border-white/10 p-1"},React.createElement("button",{type:"button",onClick:()=>Ha("TODAY"),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold border transition",Wt==="TODAY"?"border-white/15 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},"Today"),React.createElement("button",{type:"button",onClick:()=>Ha("HISTORY"),className:["px-3 py-2 rounded-xl text-[12px] font-extrabold border transition",Wt==="HISTORY"?"border-white/15 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8"].join(" ")},"History"))),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 font-bold"},"Health insights are built from what you track."),Wt==="TODAY"?React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement(os,{icon:"activity",title:"Add Metric",subtitle:"Weight and body metrics.",onClick:()=>{var n,y;try{var be=ye;(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"BODY",be)}catch(be){}}}),React.createElement(os,{icon:"moon",title:"Recovery / Notes",subtitle:"Sleep, soreness, stress notes.",onClick:()=>{var n,y;try{var be=ye;(y=(n=window.__fof_openers)==null?void 0:n.openQuickLogSheet)==null||y.call(n,"RECOVERY",be)}catch(be){}}}),React.createElement(os,{icon:"watch",title:"Wearables",subtitle:"Connect & sync (safe stub).",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{message:"Wearables: stub (A2).",kind:"info"}}))}catch(n){}}})),React.createElement("div",{className:"mt-4 space-y-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Today preview"),(Ut||[]).slice(0,2).map((n,y)=>{var be=n.payload||{},ie=be.weightKg!=null?`${be.weightKg} kg`:be.weight!=null?`${be.weight}`:"Metric entry";return React.createElement("div",{key:(n.ts||0)+"-b-"+y,className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/85 font-extrabold"},ie),React.createElement("div",{className:"text-[10px] text-white/55 font-black"},oe(n.ts||Date.now()))))}),(Ut||[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/60 font-bold"},"No metrics logged today."):null,(ce||[]).slice(0,2).map((n,y)=>{var be=n.payload||{},ie=be.note||be.notes||be.summary||"";return React.createElement("div",{key:(n.ts||0)+"-r-"+y,className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/85 font-extrabold"},"Recovery"),React.createElement("div",{className:"text-[10px] text-white/55 font-black"},oe(n.ts||Date.now()))),ie?React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},String(ie).slice(0,120)):null)}),(ce||[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/60 font-bold"},"No recovery logged today."):null,React.createElement("button",{type:"button",onClick:()=>ro("HEALTH"),className:"w-full rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 transition p-3 text-[12px] font-extrabold text-white/80"},"View all health history \u2192"))):React.createElement("div",{className:"mt-3 space-y-2"},(Qt||[]).slice(0,10).map((n,y)=>React.createElement("div",{key:"b-"+n.dayKey+"-"+y,className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},n.dayKey),React.createElement("div",{className:"text-[12px] font-black text-white/70"},n.entries," metric entr",n.entries===1?"y":"ies"))),(yi||[]).slice(0,10).map((n,y)=>React.createElement("div",{key:"r-"+n.dayKey+"-"+y,className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},n.dayKey),React.createElement("div",{className:"text-[12px] font-black text-white/70"},n.entries," recovery entr",n.entries===1?"y":"ies"))),(Qt||[]).length===0&&(yi||[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3 text-[12px] text-white/60 font-bold"},"No health history yet."):null)):null,Lt==="INSIGHTS"?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-extrabold text-white"},"Insights"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-bold"},"Insights are generated from what you track.")),React.createElement("span",{className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[10px] font-extrabold uppercase tracking-widest text-white/70"},"Read-only")),React.createElement("div",{className:"mt-3 grid grid-cols-4 gap-2"},[{k:"ALL",label:"All"},{k:"WORKOUT",label:"Workout"},{k:"NUTRITION",label:"Nutrition"},{k:"HEALTH",label:"Health"}].map(n=>React.createElement("button",{key:n.k,type:"button",onClick:()=>V(n.k),className:"rounded-2xl px-3 py-2 text-[12px] font-extrabold border "+(h===n.k?"border-white/20 bg-white/15 text-white":"border-white/10 bg-white/5 text-white/75 hover:bg-white/10")},n.label))),(()=>{var n=je(de),y=j(n).reverse(),be=new Set(y);var ie={kcal:null,p:null,c:null,f:null};try{var qt=localStorage.getItem("__fof_nutrition_targets_v1");if(qt){var ka=JSON.parse(qt);ka&&typeof ka=="object"&&(ie={kcal:ka.kcal!=null?Number(ka.kcal):null,p:ka.p!=null?Number(ka.p):null,c:ka.c!=null?Number(ka.c):null,f:ka.f!=null?Number(ka.f):null})}}catch(qt){}var Dt={};(Array.isArray(P)?P:[]).forEach(qt=>{try{var ka=String((qt==null?void 0:qt.dk)||"");if(!be.has(ka))return;var pi=Number((qt==null?void 0:qt.calories)||(qt==null?void 0:qt.cal)||0)||0,cs=Number((qt==null?void 0:qt.p)||0)||0,Gi=Number((qt==null?void 0:qt.c)||0)||0,pe=Number((qt==null?void 0:qt.f)||0)||0;Dt[ka]||(Dt[ka]={cal:0,p:0,c:0,f:0}),Dt[ka].cal+=pi,Dt[ka].p+=cs,Dt[ka].c+=Gi,Dt[ka].f+=pe}catch(ka){}});var b=y.map(qt=>{var ka;return Number(((ka=Dt[qt])==null?void 0:ka.cal)||0)}),We=y.map(qt=>{var ka;return Number(((ka=Dt[qt])==null?void 0:ka.p)||0)}),da=y.map(qt=>{var ka;return Number(((ka=Dt[qt])==null?void 0:ka.c)||0)}),ii=y.map(qt=>{var ka;return Number(((ka=Dt[qt])==null?void 0:ka.f)||0)}),jt=qt=>{var ka=Array.isArray(qt)?qt:[];var pi=0,cs=0;return ka.forEach(Gi=>{var pe=Number(Gi||0);Number.isFinite(pe)&&(pi+=pe,cs++)}),cs?pi/cs:0},Kt=(qt,ka=0)=>{try{var pi=Number(qt||0);return Number.isFinite(pi)?pi.toFixed(ka):"0"}catch(pi){return"0"}},Na={},ra=(Array.isArray(Fe)?Fe:[]).slice();ra.forEach(qt=>{try{var ka=String((qt==null?void 0:qt.dk)||(qt!=null&&qt.ts?he(qt.ts):""));if(!be.has(ka))return;var pi=Te?Te(qt):{volume:0,maxWeight:null};Na[ka]||(Na[ka]={vol:0,sess:0}),Na[ka].vol+=Number((pi==null?void 0:pi.volume)||0),Na[ka].sess+=1}catch(ka){}});var Ti=y.map(qt=>{var ka;return Number(((ka=Na[qt])==null?void 0:ka.vol)||0)}),Ee=y.map(qt=>{var ka;return Number(((ka=Na[qt])==null?void 0:ka.sess)||0)});var ae=0;try{var qt=ra.slice().sort((pi,cs)=>Number((pi==null?void 0:pi.ts)||0)-Number((cs==null?void 0:cs.ts)||0));var ka=null;qt.forEach(pi=>{var cs=String((pi==null?void 0:pi.dk)||(pi!=null&&pi.ts?he(pi.ts):"")),Gi=Te?Te(pi):{maxWeight:null},pe=Gi&&Gi.maxWeight!=null?Number(Gi.maxWeight):null;if(pe==null)return;var Sa=ka==null?!0:pe>ka;Sa&&(ka=pe),Sa&&be.has(cs)&&(ae+=1)})}catch(qt){}var Ot=(()=>{var qt=Ee.reduce((pi,cs)=>pi+Number(cs||0),0),ka=Math.max(1,n/7);return qt/ka})(),xe={};(Array.isArray(Jt)?Jt:[]).forEach(qt=>{try{var ka=String((qt==null?void 0:qt.dk)||(qt!=null&&qt.ts?he(qt.ts):""));if(!be.has(ka)||String((qt==null?void 0:qt.metricType)||"").toUpperCase()!=="WEIGHT")return;var pi=Number((qt==null?void 0:qt.value)||(qt==null?void 0:qt.val)||0);if(!Number.isFinite(pi)||pi<=0)return;var cs=Number((qt==null?void 0:qt.ts)||0);(!xe[ka]||Number(xe[ka].ts||0)<cs)&&(xe[ka]={v:pi,ts:cs})}catch(ka){}});var p=y.map(qt=>{var ka;return Number(((ka=xe[qt])==null?void 0:ka.v)||0)}),R=(()=>{var qt=new Set;return(Array.isArray(Jt)?Jt:[]).forEach(ka=>{try{var pi=String((ka==null?void 0:ka.dk)||"");be.has(pi)&&qt.add(pi)}catch(pi){}}),(Array.isArray(Tt)?Tt:[]).forEach(ka=>{try{var pi=String((ka==null?void 0:ka.dk)||"");be.has(pi)&&qt.add(pi)}catch(pi){}}),qt.size})(),Ve=({series:qt})=>{var ka=re(qt,18),pi=Math.max(1,...ka.map(cs=>Number(cs||0)));return React.createElement("div",{className:"mt-3 flex items-end gap-[3px] h-12"},ka.map((cs,Gi)=>{var pe=Math.max(2,Math.round(Number(cs||0)/pi*48));return React.createElement("div",{key:Gi,className:"flex-1 rounded-md bg-white/20",style:{height:pe}})}))},pa=({title:qt,meta:ka,series:pi,right:cs})=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},qt),React.createElement("div",{className:"mt-1 text-[13px] text-white font-extrabold"},ka)),cs?React.createElement("div",{className:"text-right"},cs):null),React.createElement(Ve,{series:pi}));return React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"grid grid-cols-3 gap-2"},[{k:"7D",label:"7d"},{k:"30D",label:"30d"},{k:"90D",label:"90d"}].map(qt=>React.createElement("button",{key:qt.k,type:"button",onClick:()=>M(qt.k),className:"rounded-2xl border px-3 py-2 text-[12px] font-extrabold "+(de===qt.k?"border-white/20 bg-white/15 text-white":"border-white/10 bg-white/5 text-white/75 hover:bg-white/10")},qt.label))),h==="ALL"||h==="WORKOUT"?React.createElement("div",{className:"space-y-3"},React.createElement(pa,{title:"Strength \u2022 Total volume",meta:`${Kt(Ti.reduce((qt,ka)=>qt+Number(ka||0),0),0)} volume (\u03A3 weight\xD7reps)`,series:Ti,right:React.createElement("div",{className:"text-[12px] text-white/60 font-extrabold"},Kt(Ot,1),"/wk")}),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"PRs count"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white"},ae),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"New all\u2011time best sets (simple).")),React.createElement(pa,{title:"Workouts / day",meta:`${Kt(Ee.reduce((qt,ka)=>qt+Number(ka||0),0),0)} sessions`,series:Ee}))):null,h==="ALL"||h==="NUTRITION"?React.createElement("div",{className:"space-y-3"},(()=>{var Gi;var qt=(()=>{try{var pe=[];for(var Sa=0;Sa<7;Sa++){var Ji=new Date;Ji.setDate(Ji.getDate()-Sa);var wo=typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(Ji):Ji.toISOString().slice(0,10);pe.push(wo)}return pe.reverse()}catch(pe){return[]}})();var ka=0;try{qt.forEach(pe=>{var Sa=typeof window.__fof_getLogBucket=="function"?window.__fof_getLogBucket(pe,"nutrition")||[]:[];Array.isArray(Sa)&&Sa.length&&(ka+=1)})}catch(pe){}var pi="FITNESS";try{var pe=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{};pi=String(((Gi=pe==null?void 0:pe.goals)==null?void 0:Gi.focus)||(pe==null?void 0:pe.emphasis)||localStorage.getItem("fof_goal_focus_v1")||"FITNESS").toUpperCase()}catch(pe){}var cs=null;return pi==="NUTRITION"&&ka<3&&(cs="Not enough logs to guide your nutrition goal."),pi==="FITNESS"&&ka===0&&(cs="No nutrition logs \u2014 fueling can affect training."),pi==="HYBRID"&&ka<2&&(cs="Hybrid works best with some nutrition consistency."),React.createElement("button",{type:"button",onClick:()=>{try{var pe=window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay:null;pe?pe("NUTRITION_WEEKLY_SUMMARY_V1",{from:"TRACK_INSIGHTS_NUTRITION_CARD"}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"NUTRITION_WEEKLY_SUMMARY_V1",props:{from:"TRACK_INSIGHTS_NUTRITION_CARD"}}}))}catch(pe){}},className:"w-full text-left rounded-3xl border border-white/10 bg-white/5 hover:bg-white/8 p-4 transition"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"This week"),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},"Nutrition summary"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 font-bold"},"Logged days: ",ka,"/7"),cs?React.createElement("div",{className:"mt-2 text-[12px] text-amber-200/90 font-extrabold"},"\u26A0 ",cs):null),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full border border-white/10 bg-black/25 text-[10px] font-extrabold uppercase tracking-widest text-white/70"},"View"))))})(),React.createElement(pa,{title:"Nutrition \u2022 Calories trend",meta:`Avg ${Kt(jt(b),0)} kcal/day${ie.kcal?` \u2022 Target ${Kt(ie.kcal,0)}`:""}`,series:b}),React.createElement("div",{className:"grid grid-cols-3 gap-3"},React.createElement(pa,{title:"Protein",meta:`Avg ${Kt(jt(We),0)}g${ie.p?` \u2022 ${Kt(ie.p,0)}g`:""}`,series:We}),React.createElement(pa,{title:"Carbs",meta:`Avg ${Kt(jt(da),0)}g${ie.c?` \u2022 ${Kt(ie.c,0)}g`:""}`,series:da}),React.createElement(pa,{title:"Fat",meta:`Avg ${Kt(jt(ii),0)}g${ie.f?` \u2022 ${Kt(ie.f,0)}g`:""}`,series:ii})),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Meal consistency"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-extrabold"},y.filter(qt=>Dt[qt]&&Dt[qt].cal>0).length," / ",y.length," days logged"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Insights come from what you track."))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{c("NUTRITION"),ze("NUTRITION"),Pe("TODAY")}catch(qt){}},className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-3 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Log food"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Add meals to improve insights.")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openTargets"))}catch(qt){}},className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-3 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"View Targets"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Edit kcal + macros goals."))),React.createElement("button",{type:"button",onClick:()=>{try{c("NUTRITION"),ze("NUTRITION"),Pe("WEEKLY")}catch(qt){}},className:"mt-3 w-full rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 px-3 py-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Open Weekly Summary"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Trends + top drivers.")))):null,h==="ALL"||h==="HEALTH"?React.createElement("div",{className:"space-y-3"},React.createElement(pa,{title:"Health \u2022 Weight trend",meta:p.some(qt=>qt>0)?`Latest ${Kt([...p].reverse().find(qt=>qt>0)||0,1)} kg`:"No weight logs yet",series:p}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Check-in consistency"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white"},R," / ",y.length),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 font-semibold"},"Days with any body/recovery log."))):null)})(),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Reports"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55 font-semibold"},"Weekly / Monthly deep-dive reports with biometrics, forecasts, and recommendations.")),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/10 bg-white/5 text-[10px] font-extrabold uppercase tracking-widest text-white/70"},"Premium")),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2"},React.createElement("button",{type:"button",onClick:()=>gt("WEEKLY","OVERVIEW"),className:"rounded-3xl border border-white/10 bg-white/5 hover:bg-white/10 transition p-3 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Weekly report"),Ae?null:React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full border border-white/10 bg-black/30 text-white/70"},"Locked")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-semibold"},"7d summary \u2022 compliance \u2022 training load \u2022 trends")),React.createElement("button",{type:"button",onClick:()=>gt("MONTHLY","OVERVIEW"),className:"rounded-3xl border border-white/10 bg-white/5 hover:bg-white/10 transition p-3 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Monthly report"),Ae?null:React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full border border-white/10 bg-black/30 text-white/70"},"Locked")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-semibold"},"30d trends \u2022 PRs \u2022 biometrics \u2022 projections")),React.createElement("button",{type:"button",onClick:()=>gt("QUARTERLY","OVERVIEW"),className:"rounded-3xl border border-white/10 bg-white/5 hover:bg-white/10 transition p-3 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Quarterly report"),Ae?null:React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full border border-white/10 bg-black/30 text-white/70"},"Locked")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 font-semibold"},"90d progress \u2022 adherence \u2022 goal trajectory"))),Ae?null:React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Preview"),React.createElement("div",{className:"mt-1 text-[11px] text-white/60 font-semibold"},"Unlock Premium to view the full report with detailed nutrition/workout/health analytics, forecasts, and AI suggestions."),React.createElement("button",{type:"button",onClick:()=>{try{window.__fof_openPaywallStub&&window.__fof_openPaywallStub("INSIGHTS_REPORTS",{from:"A5.2_PREVIEW",mode:"WEEKLY"})}catch(n){}},className:"mt-3 w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold"},"Upgrade to Premium"))),(Qe.total30||0)===0?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"No insights yet"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55 font-bold"},"Start logging workouts, food, or health metrics to generate insights."),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{c("WORKOUT"),ze("WORKOUT")}catch(n){}},className:"rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-3 py-2 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Log workout"),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},"Add a session")),React.createElement("button",{type:"button",onClick:()=>{try{c("NUTRITION"),ze("NUTRITION")}catch(n){}},className:"rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-3 py-2 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Add food"),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},"Log a meal")),React.createElement("button",{type:"button",onClick:()=>{try{c("HEALTH"),ze("HEALTH")}catch(n){}},className:"rounded-2xl border border-white/10 bg-white/10 hover:bg-white/15 px-3 py-2 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Add metric"),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},"Weight, etc.")))):React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-4 grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest font-black text-white/55"},"7 days"),React.createElement("div",{className:"mt-1 text-[18px] font-black text-white"},h==="WORKOUT"?Qe.workout7:h==="NUTRITION"?Qe.nutrition7:h==="HEALTH"?Qe.health7:Qe.workout7+Qe.nutrition7+Qe.health7),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},"Logs")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest font-black text-white/55"},"30 days"),React.createElement("div",{className:"mt-1 text-[18px] font-black text-white"},h==="WORKOUT"?Qe.workout30:h==="NUTRITION"?Qe.nutrition30:h==="HEALTH"?Qe.health30:Qe.workout30+Qe.nutrition30+Qe.health30),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},"Logs")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest font-black text-white/55"},h==="NUTRITION"?"Calories (7d)":h==="HEALTH"?"Latest weight":"Consistency"),React.createElement("div",{className:"mt-1 text-[18px] font-black text-white"},h==="NUTRITION"?Math.round(Qe.calories7||0):h==="HEALTH"?Qe.lastWeight!=null?Qe.lastWeight:"\u2014":Math.min(7,(Qe.dayCounts||[]).filter(n=>(h==="WORKOUT"?n.w:h==="NUTRITION"?n.n:n.all)>0).length)),React.createElement("div",{className:"text-[11px] font-bold text-white/55"},h==="NUTRITION"?"kcal":h==="HEALTH"?"kg":"days logged"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/70 font-extrabold"},"Last 7 days"),React.createElement("div",{className:"text-[11px] text-white/50 font-bold"},"Most recent \u2192")),React.createElement("div",{className:"mt-3 flex items-end gap-1"},(Qe.dayCounts||[]).slice().reverse().map((n,y)=>{var be=h==="WORKOUT"?n.w:h==="NUTRITION"?n.n:h==="HEALTH"?n.h:n.all,ie=Math.max(6,Math.min(44,8+be*10));return React.createElement("div",{key:y,role:"button",tabIndex:0,onClick:()=>{try{setDayKey(n.dk),setViewMode("DAY")}catch(Dt){}},onKeyDown:Dt=>{if(Dt.key==="Enter"||Dt.key===" ")try{setDayKey(n.dk),setViewMode("DAY")}catch(b){}},className:"flex-1 cursor-pointer"},React.createElement("div",{style:{height:ie},className:"w-full rounded-md "+(be>0?"bg-white/30":"bg-white/10")}))})),React.createElement("div",{className:"mt-2 text-[11px] text-white/45 font-bold"},"This is a lightweight preview. Full charts + filters unlock in later slices (A5+).")),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement(Br,{icon:"\u{1F4C8}",title:"Workout Volume Trends",preview:"PR consistency, volume, and key signals \u2014 generated from your logs.",ctaLabel:"Preview",onUnlock:()=>{try{Si&&Si("Locked","Full Insights charts unlock in a later slice (A5).")}catch(n){}}}),React.createElement(Br,{icon:"\u{1F37D}\uFE0F",title:"Nutrition Trend Cards",preview:"Calories + macros trend lines (7\u201314 days).",ctaLabel:"Preview",onUnlock:()=>{try{Si&&Si("Locked","Nutrition charts unlock in a later slice (A5).")}catch(n){}}}),React.createElement(Br,{icon:"\u{1F6CC}",title:"Recovery Signals",preview:"Sleep/recovery notes \u2192 readiness-friendly insights.",ctaLabel:"Preview",onUnlock:()=>{try{Si&&Si("Locked","Recovery insights unlock in a later slice (A5).")}catch(n){}}})))):null):null,React.createElement(qo,{open:Vs,title:(ua==null?void 0:ua.title)||"Workout",kicker:"Active session",onClose:()=>{try{var n=((ua==null?void 0:ua.exercises)||[]).some(ie=>(ie.sets||[]).some(Dt=>String(Dt.weight||"").trim()!==""||String(Dt.reps||"").trim()!==""||Dt.done)),y=((ua==null?void 0:ua.exercises)||[]).length>0,be=String((ua==null?void 0:ua.notes)||"").trim().length>0;if(y||n||be){o(!0);return}Ke(!1),ga(null),Ni(0),Ps(!1)}catch(n){try{Ke(!1)}catch(y){}}},footer:React.createElement("div",{className:"w-full flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Ni(0);var n=ua;if(!n)return;var y=Number(n.startedAt||Date.now()),be=Date.now();var ie=0,Dt=0;(n.exercises||[]).forEach(We=>{(We.sets||[]).forEach(da=>{if(da&&da.done){ie+=1;var ii=String(da.weight||"").match(/-?\d+(?:.\d+)?/),jt=String(da.reps||"").match(/-?\d+(?:.\d+)?/),Kt=ii?Number(ii[0]):NaN,Na=jt?Number(jt[0]):NaN;Number.isFinite(Kt)&&Number.isFinite(Na)&&(Dt+=Kt*Na)}})});var b=Math.max(1,Math.round((be-y)/1e3/60));g({startedAt:y,finishedAt:be,mins:b,title:n.title||"Workout",exercises:n.exercises||[],notes:n.notes||"",doneSets:ie,volume:Dt}),m(!0)}catch(n){}},className:"flex-1 rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold shadow-[0_18px_60px_rgba(0,0,0,0.25)] active:scale-[0.99]"},"Finish Workout"),React.createElement("button",{type:"button",onClick:()=>{try{F("SESSION"),oa(!0)}catch(n){}},className:"rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white hover:bg-white/10"},"+ Add Exercise"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Time"),React.createElement("div",{className:"text-[12px] text-white/70"},le(Ya))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-2 text-[11px] text-white/80"},((ua==null?void 0:ua.exercises)||[]).length," exercises"),React.createElement("div",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-2 text-[11px] text-white/80"},((ua==null?void 0:ua.exercises)||[]).reduce((n,y)=>n+(y.sets||[]).length,0)," sets"))),Fa>0?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Rest"),React.createElement("div",{className:"text-[12px] text-white/70"},le(Fa))),React.createElement("button",{type:"button",onClick:()=>Ni(0),className:"rounded-2xl border border-white/15 bg-white/5 px-3 py-2 text-[12px] font-extrabold text-white hover:bg-white/10"},"Skip")):null,Fa>0?React.createElement("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-[104px] z-[80]"},React.createElement("div",{className:"flex items-center gap-2 rounded-full border border-white/15 bg-black/55 backdrop-blur px-3 py-2 shadow-[0_20px_70px_rgba(0,0,0,0.45)]"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/90"},"Rest"),React.createElement("div",{className:"text-[11px] font-black text-white"},le(Fa)),React.createElement("button",{type:"button",onClick:()=>{try{Ps(n=>!n)}catch(n){}},className:"rounded-full border border-white/15 bg-white/5 px-2 py-1 text-[10px] font-extrabold text-white/85 hover:bg-white/10",title:ys?"Resume":"Pause"},ys?"Resume":"Pause"),React.createElement("button",{type:"button",onClick:()=>{try{Ni(n=>(Number(n)||0)+15)}catch(n){}},className:"rounded-full border border-white/15 bg-white/5 px-2 py-1 text-[10px] font-extrabold text-white/85 hover:bg-white/10",title:"+15s"},"+15s"),React.createElement("button",{type:"button",onClick:()=>{try{Ni(0),Ps(!1)}catch(n){}},className:"rounded-full border border-white/15 bg-white/5 px-2 py-1 text-[10px] font-extrabold text-white/85 hover:bg-white/10",title:"Skip"},"Skip"))):null,((ua==null?void 0:ua.exercises)||[]).length===0?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Add your first exercise"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Search the library and start logging sets."),React.createElement("button",{type:"button",onClick:()=>{try{F("SESSION"),oa(!0)}catch(n){}},className:"mt-3 w-full rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold shadow-[0_18px_60px_rgba(0,0,0,0.25)] active:scale-[0.99]"},"Add Exercise")):React.createElement("div",{className:"space-y-3"},((ua==null?void 0:ua.exercises)||[]).map(n=>React.createElement("div",{key:n.uid,className:"rounded-3xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},n.name),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55"},(n.group||"").toString()," ",n.equipment?`\u2022 ${n.equipment}`:"")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Ma(n.uid)}catch(y){}},className:"rounded-2xl border border-white/12 bg-white/5 px-3 py-2 text-[11px] font-extrabold text-white/90 hover:bg-white/10",title:"Copy last set"},"Copy"),React.createElement("button",{type:"button",onClick:()=>{try{Za(n.uid)}catch(y){}},className:"rounded-2xl border border-white/12 bg-white/5 px-3 py-2 text-[11px] font-extrabold text-white/90 hover:bg-white/10"},"+ Set"))),React.createElement("div",{className:"mt-3 space-y-2"},(n.sets||[]).map((y,be)=>{var ie,Dt;return React.createElement("div",{key:be,className:"grid grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"col-span-1 text-[11px] text-white/55 font-bold"},be+1),React.createElement("input",{value:(ie=y.weight)!=null?ie:"",onChange:b=>Pt(n.uid,be,{weight:b.target.value}),placeholder:"kg",className:"col-span-4 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white placeholder:text-white/35 outline-none focus:border-white/25"}),React.createElement("input",{value:(Dt=y.reps)!=null?Dt:"",onChange:b=>Pt(n.uid,be,{reps:b.target.value}),placeholder:"reps",className:"col-span-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[12px] text-white placeholder:text-white/35 outline-none focus:border-white/25"}),React.createElement("button",{type:"button",onClick:()=>{try{var b=!y.done;if(Pt(n.uid,be,{done:b}),b){try{Ps(!1)}catch(We){}Ni(We=>(Number(We)||0)>0?Number(We)||0:90)}}catch(b){}},className:"col-span-3 rounded-2xl px-3 py-2 text-[12px] font-extrabold "+(y.done?"bg-white text-black":"border border-white/12 bg-white/5 text-white hover:bg-white/10")},y.done?"Done":"Mark"),React.createElement("button",{type:"button",onClick:()=>{try{$a(n.uid,be)}catch(b){}},className:"col-span-1 rounded-2xl border border-white/12 bg-white/5 px-2 py-2 text-[11px] font-extrabold text-white/80 hover:bg-white/10",title:"Remove set"},"\xD7"))}))))))),React.createElement(qo,{open:d,title:"Workout Summary",kicker:"Review before saving",headerRight:React.createElement("button",{type:"button",onClick:()=>{try{var n=E||ua||null,y=n&&Array.isArray(n.exercises)?n.exercises:[],be=y.length,ie=y.reduce((b,We)=>b+(Array.isArray(We.sets)?We.sets.length:0),0),Dt={kind:"WORKOUT_SUMMARY",sheetTitle:"Share & Export",kicker:"Workout",title:"Workout Summary",subtitle:`${be} exercises \u2022 ${ie} sets`,lines:[n&&n.name?n.name:"Workout Session",n&&n.dateLabel?n.dateLabel:"Today","No raw logs shared"],locks:[],paywallFeatureKey:"Share & Export",meta:{coachApproved:!1,source:"WORKOUT_SUMMARY"}};if(typeof window.__fof_openShareExport=="function")window.__fof_openShareExport(Dt);else try{window.dispatchEvent(new CustomEvent("fof:overlay",{detail:{type:"OPEN",key:"SHARE_EXPORT_SHEET_V1",props:{payload:Dt}}}))}catch(b){}}catch(n){}},className:"rounded-2xl border border-white/15 bg-white/5 px-3 py-2 text-[12px] font-extrabold text-white hover:bg-white/10",title:"Share"},"Share"),onClose:()=>{try{m(!1)}catch(n){}},footer:React.createElement("div",{className:"w-full flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{m(!1)}catch(n){}},className:"rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white hover:bg-white/10",title:"Return to live tracker to edit"},"Edit"),React.createElement("button",{type:"button",onClick:()=>{try{m(!1),g(null);try{localStorage.removeItem(ki)}catch(n){}Ni(0),Ps(!1),ga(null),Ke(!1);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Workout discarded",message:"Session cleared."}}))}catch(n){}}catch(n){}},className:"rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white hover:bg-white/10"},"Discard"),React.createElement("button",{type:"button",onClick:()=>{try{var n=E||null;if(!n){m(!1);return}it({startedAt:n.startedAt,finishedAt:n.finishedAt,mins:n.mins,title:n.title,exercises:n.exercises,notes:n.notes})}catch(n){}},className:"flex-1 rounded-2xl bg-white text-black px-4 py-3 text-[13px] font-extrabold shadow-[0_18px_60px_rgba(0,0,0,0.25)] active:scale-[0.99]"},"Save Workout"))},React.createElement("div",{className:"space-y-3"},E?React.createElement(React.Fragment,null,React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Workout"),React.createElement("div",{className:"text-[14px] font-black text-white truncate"},E.title||"Workout")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},"Duration"),React.createElement("div",{className:"text-[14px] font-black text-white"},E.mins," min"))),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Exercises"),React.createElement("div",{className:"text-[12px] font-black text-white"},(E.exercises||[]).length)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Sets logged"),React.createElement("div",{className:"text-[12px] font-black text-white"},Number(E.doneSets||0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-extrabold text-white/70"},"Volume"),React.createElement("div",{className:"text-[12px] font-black text-white"},Math.round(Number(E.volume||0)))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Details"),React.createElement("div",{className:"mt-2 space-y-2"},(E.exercises||[]).map((n,y)=>React.createElement("div",{key:(n.uid||n.id||n.name||"ex")+"_"+y,className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[12px] font-black text-white"},n.name||"Exercise"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},(n.sets||[]).map((be,ie)=>{var da,ii;var Dt=!!be.done,b=String((da=be.weight)!=null?da:"").trim(),We=String((ii=be.reps)!=null?ii:"").trim();return Dt?React.createElement("span",{key:ie,className:"rounded-full border border-white/10 bg-white/5 px-2 py-1 text-[10px] font-extrabold text-white/85"},b||"\u2014","\xD7",We||"\u2014"):null})))))),String(E.notes||"").trim().length?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/75 whitespace-pre-wrap"},String(E.notes||""))):null):React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/70"},"No summary available."))),React.createElement(Md,{open:Ms,title:"End workout?",message:"You have an active workout in progress.",onClose:()=>{try{o(!1)}catch(n){}},onResume:()=>{try{o(!1),Ke(!0)}catch(n){}},onSaveExit:()=>{try{o(!1),Ke(!1);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Saved",message:"Workout draft saved. You can resume later."}}))}catch(n){}}catch(n){}},onDiscard:()=>{try{o(!1),Ke(!1),ga(null),Ni(0),Ps(!1);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{title:"Discarded",message:"Workout discarded."}}))}catch(n){}}catch(n){}}}),React.createElement(Ca,{open:qa,onClose:()=>oa(!1),onPick:n=>{try{if(f==="SESSION"){try{qe(n)}catch(be){}try{oa(!1)}catch(be){}return}var y={id:"w_"+Math.random().toString(16).slice(2),type:"Workout",minutes:"",rpe:"",note:`Exercise: ${(n==null?void 0:n.name)||"Exercise"}`,ts:Date.now()};try{var be=localStorage.getItem(te),ie=be?JSON.parse(be)||[]:[],Dt=[y,...ie].slice(0,200);localStorage.setItem(te,JSON.stringify(Dt));try{C(Dt)}catch(b){}}catch(be){}try{var be="__fof_recent_exercises_v1",ie=localStorage.getItem(be),Dt=ie?JSON.parse(ie):[],b=[String((n==null?void 0:n.name)||"Exercise")].concat(Dt.filter(We=>We!==String((n==null?void 0:n.name)||"Exercise"))).slice(0,12);localStorage.setItem(be,JSON.stringify(b))}catch(be){}try{window.dispatchEvent(new CustomEvent("flowofit:workoutLogsUpdated",{detail:{key:te}}))}catch(be){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{msg:`Added: ${(n==null?void 0:n.name)||"Exercise"}`}}))}catch(be){}}catch(y){}try{oa(!1)}catch(y){}}}),React.createElement(qo,{open:Ra,title:"Nutrition Targets",kicker:"Edit kcal + macros",onClose:()=>{try{ri(!1)}catch(n){}},footer:React.createElement("div",{className:"w-full flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{ri(!1)}catch(n){}},className:"rounded-2xl border border-white/15 bg-white/5 px-4 py-3 text-[12px] font-extrabold text-white hover:bg-white/10"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{try{_o()}catch(n){}},className:"flex-1 rounded-2xl bg-white px-4 py-3 text-[12px] font-extrabold text-black hover:bg-white/90"},"Save targets"))},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/60 font-bold"},"Calories"),React.createElement("input",{value:Da,onChange:n=>Va(n.target.value),placeholder:"kcal",className:"mt-2 w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white outline-none focus:border-white/25"})),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/60 font-bold"},"Protein"),React.createElement("input",{value:Y,onChange:n=>ft(n.target.value),placeholder:"g",className:"mt-2 w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white outline-none focus:border-white/25"})),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/60 font-bold"},"Carbs"),React.createElement("input",{value:_a,onChange:n=>Ja(n.target.value),placeholder:"g",className:"mt-2 w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white outline-none focus:border-white/25"})),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/60 font-bold"},"Fat"),React.createElement("input",{value:Ui,onChange:n=>qs(n.target.value),placeholder:"g",className:"mt-2 w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white outline-none focus:border-white/25"}))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/4 p-3 text-[12px] text-white/70"},"These targets feed the Weekly Nutrition Summary and Insights guidance (A5).")))},Ge=({persona:e,logSubTab:a,setLogSubTab:r})=>{var[c,h]=React.useState(()=>a||"HOME");React.useEffect(()=>{a&&a!==c&&h(a)},[a]),React.useEffect(()=>{try{r&&r(c==="HOME"?null:c)}catch(M){}},[c]);var V=({title:M,sub:De,icon:Ae,onClick:Oe})=>React.createElement(nr,{icon:Ae,title:M,subtitle:De,onPress:Oe}),de=({title:M,children:De})=>React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>h("HOME"),className:"rounded-2xl border border-white/12 bg-black/30 px-3 py-2 text-[12px] text-white/80"},"\u2190 Back"),React.createElement("div",{className:"text-[13px] font-semibold text-white"},M),React.createElement("div",{className:"w-[64px]"})),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-3"},De));return c==="WORKOUT"?React.createElement(de,{title:"Workout Log"},React.createElement(Cr,null)):c==="NUTRITION"?React.createElement(de,{title:"Nutrition Log"},React.createElement(il,null)):c==="BODY"?React.createElement(de,{title:"Body Metrics"},React.createElement(ml,null)):c==="RECOVERY"?React.createElement(de,{title:"Recovery"},React.createElement(Yn,null)):c==="HABITS"?React.createElement(de,{title:"Habits"},React.createElement(vr,null)):React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Log"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement(V,{title:"Workout",sub:"Strength, cardio, sessions",icon:"\u{1F3CB}\uFE0F",onClick:()=>h("WORKOUT")}),React.createElement(V,{title:"Nutrition",sub:"Meals, macros, calories",icon:"\u{1F37D}\uFE0F",onClick:()=>h("NUTRITION")}),React.createElement(V,{title:"Body",sub:"Weight, measurements, photos",icon:"\u{1F4CF}",onClick:()=>h("BODY")}),React.createElement(V,{title:"Recovery",sub:"Sleep, soreness, readiness",icon:"\u{1F634}",onClick:()=>h("RECOVERY")}),React.createElement(V,{title:"Habits",sub:"Water, steps, routines",icon:"\u2705",onClick:()=>h("HABITS")}))))},$e=e=>{Fs(wt,Array.isArray(e)?e:[]);try{window.dispatchEvent(new CustomEvent("flowofit:coachChatUpdated"))}catch(a){}},Xa=()=>{var e=Ks(wt,[]);return Array.isArray(e)?e:[]},mi=()=>{try{return new Date().toISOString()}catch(e){return String(Date.now())}},xi=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,10),rs=e=>{try{var a=no(e)||{};return Object.values(a).reduce((r,c)=>r+(Array.isArray(c)?c.length:0),0)}catch(a){return 0}},ct="fof_habit_showedup_v1",zt=e=>{try{return new Date(e).toISOString().slice(0,10)}catch(a){return String(e||"")}},Wi=(e,a)=>`${ct}::day::${String(e||"demo_surface")}::${String(a||"")}`,Wa=e=>`${ct}::streak::${String(e||"demo_surface")}`,Hs=(e="demo_surface")=>{try{var a=localStorage.getItem(Wa(e));if(!a)return{count:0,lastDayKey:null,updatedAt:0};var r=JSON.parse(a);return{count:Math.max(0,Number(r.count||0)||0),lastDayKey:r.lastDayKey||null,updatedAt:Number(r.updatedAt||0)||0}}catch(a){return{count:0,lastDayKey:null,updatedAt:0}}},ks=(e,a)=>{try{return localStorage.getItem(Wi(e,a))==="1"}catch(r){return!1}},so=(e,a,r={})=>{var c=String(e||"demo_surface"),h=String(a||"");if(!h)return{ok:!1,reason:"missing_dateKey"};try{if(ks(c,h))return{ok:!0,already:!0};localStorage.setItem(Wi(c,h),"1");var V=Hs(c),de={count:(Number(V.count||0)||0)+1,lastDayKey:h,updatedAt:Date.now(),lastMeta:r||{}};localStorage.setItem(Wa(c),JSON.stringify(de));try{window.dispatchEvent(new CustomEvent("flowofit:habitsUpdated",{detail:{surfaceKey:c,dateKey:h,streak:de}}))}catch(M){}return{ok:!0,streak:de}}catch(V){return{ok:!1,error:String(V&&V.message?V.message:V)}}},uo=(e,a,r=7)=>{try{var c=new Date(String(a||Qi())+"T00:00:00");var h=0;for(var V=0;V<r;V++){var de=new Date(c.getTime()-V*864e5),M=zt(de);ks(e,M)&&h++}return h}catch(c){return 0}},an=(e,a)=>{try{var r=String(a||"");if(!r)return;var c=typeof rs=="function"?rs(r):0,V=((typeof window.__fof_getEventsForDate=="function"?window.__fof_getEventsForDate(r,{includeLegacy:!0})||[]:[])||[]).some(de=>{var M=String(de&&(de.type||de.k||de.kind)||"").toUpperCase();return M.includes("WORKOUT")||M.includes("NUTRITION")||M.includes("MEAL")||M==="RECOVERY_ACTION_DONE"||M==="HABITS_DONE"||M==="CHECKIN_DONE"});(c>0||V)&&so(e,r,{source:"AUTO_DERIVED",logs:c,hasQualEvt:V})}catch(r){}};(()=>{try{if(typeof window.__fof_addEvent!="function"||window.__fof_addEvent.__habitsWrapped)return;var e=window.__fof_addEvent,a=function(r,c,h,V,de){var M=e.apply(this,arguments);try{var De=(window.__fof_getClientContext?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{})||{},Ae=String(De.surfaceKey||De.clientId||De.id||"demo_surface"),Oe=String(c||"").toUpperCase();(Oe.includes("WORKOUT")||Oe.includes("NUTRITION")||Oe.includes("MEAL")||Oe==="RECOVERY_ACTION_DONE"||Oe==="HABITS_DONE"||Oe==="CHECKIN_DONE")&&so(Ae,String(r||Qi()),{source:"EVENT",type:Oe})}catch(De){}return M};a.__habitsWrapped=!0,window.__fof_addEvent=a}catch(e){}})(),window.__fof_habits_getStreak=Hs,window.__fof_habits_markShowedUp=so,window.__fof_habits_weekCount=uo,window.__fof_habits_tryTickFromActivity=an;var Qi=()=>{try{var e=new Date,a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${a}-${r}-${c}`}catch(e){return"TODAY"}},ui=()=>{try{var e=Ks("fof_profile_v1",{}),r=(e&&Array.isArray(e.healthEntries)?e.healthEntries:[]).filter(h=>h&&String(h.metric||"").toLowerCase().includes("weight"));return r.length?r[r.length-1]:null}catch(e){return null}},vi=({intent:e,capNow:a,zone:r})=>{var c=Qi(),h=rs(c),V=ui(),de=r==="LOW"?"Your Capacity is LOW today \u2014 keep intensity light and focus on recovery.":r==="MID"?"Your Capacity is MID today \u2014 a moderate session works best.":"Your Capacity is HIGH today \u2014 you can push intensity if your plan calls for it.",M=[];if(M.push(de),M.push(`You logged ${h} item${h===1?"":"s"} today.`),e==="OPTIMIZE"){var De=[];return r==="LOW"?(De.push("Pick a short, low-impact session (Zone 1\u20132), 20\u201335 min."),De.push("Add 10 min mobility or breathwork."),De.push("Hydrate + prioritize an early bedtime.")):r==="MID"?(De.push("Do a moderate workout (Zone 2\u20133), 30\u201345 min."),De.push("Add a short finisher only if you feel good after warm-up."),De.push("Log recovery (stress/soreness) post-session.")):(De.push("Do your planned hard session or strength + intervals (Zone 3\u20135)."),De.push("Fuel well: carbs pre-workout + protein after."),De.push("Track effort (notes) so tomorrow\u2019s plan can adapt.")),[...M,"","Next best actions:",`\u2022 ${De.join(`
\u2022 `)}`].join(`
`)}if(e==="ADJUST_PLAN")return r==="LOW"?[...M,"","Suggested plan adjustment (v1):","\u2022 Swap hard session \u2192 Recovery / Mobility","\u2022 Keep total load \u2264 60% of normal","\u2022 Re-check tomorrow"].join(`
`):r==="MID"?[...M,"","Suggested plan adjustment (v1):","\u2022 Keep the session but reduce volume by ~10\u201320%","\u2022 Keep intensity moderate","\u2022 Add longer cool-down"].join(`
`):[...M,"","Suggested plan adjustment (v1):","\u2022 Keep plan as scheduled","\u2022 Optional: add a small progression (only if form/energy are great)","\u2022 Prioritize nutrition + sleep"].join(`
`);if(e==="EXPLAIN_CAPACITY")return[...[`Capacity is your \u201Creadiness\u201D score (0\u2013100). Today: ${a}/100 \u2192 ${r}.`,"It\u2019s used to recommend LOW/MID/HIGH effort days across Fitness/Yoga/Nutrition emphasis.","If it trends down for 2\u20133 days, it\u2019s a sign to deload or improve recovery inputs."],"",...M].join(`
`);if(e==="RECOMMEND_CONTENT"){var De=[r==="LOW"?"Mobility: 10\u201315 min hips + shoulders":"Warm-up: 8\u201310 min full-body primer","Breathwork: 5 min downshift",r==="HIGH"?"Strength: compound focus (30\u201345 min)":"Cardio: Zone 2 steady (20\u201340 min)"],Ae=V?`Latest weight log: ${V.value||V.val||""} (${V.date||V.day||"date"})`:"No recent weight entry found (optional).";return["Recommended content (v1):",`\u2022 ${De.join(`
\u2022 `)}`,"",Ae,"Tap Library to browse more."].join(`
`)}return[...M,"","Try one:","\u2022 Optimize my day","\u2022 Adjust plan","\u2022 Explain capacity","\u2022 Recommend content"].join(`
`)},hi=({title:e,subtitle:a,icon:r,onClick:c,locked:h=!1,tag:V=null})=>React.createElement("button",{type:"button",onClick:c,disabled:h,className:"touch-manipulation text-left rounded-3xl border border-white/12 bg-white/5 p-4 hover:bg-white/8 transition "+(h?"opacity-60":"")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center"},React.createElement(gi,{name:r,size:18})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-white"},e),V&&React.createElement("span",{className:"text-[10px] font-bold px-2 py-1 rounded-full bg-white/10 border border-white/10 text-white/70"},V),h&&React.createElement("span",{className:"text-[10px] font-bold px-2 py-1 rounded-full bg-white/10 border border-white/10 text-white/70"},"LOCKED")),React.createElement("div",{className:"text-[12px] text-white/70 mt-1"},a)))),ls=({role:e,text:a})=>React.createElement("div",{className:"flex "+(e==="assistant"?"justify-start":"justify-end")},React.createElement("div",{className:(e==="assistant"?"max-w-[85%] rounded-3xl rounded-tl-xl bg-white/8 border border-white/12":"max-w-[85%] rounded-3xl rounded-tr-xl bg-gradient-to-br from-[#1f8cff] via-[#6b3cff] to-[#00ffd5]")+" px-4 py-3"},React.createElement("div",{className:"text-[13px] leading-relaxed whitespace-pre-line text-white"},a))),Bi=({persona:e,tier:a,clientMode:r,capNow:c,zone:h,openLibrary:V})=>{var de=r==="LINKED",M=String(a||"FREE").toUpperCase(),De=M==="TRIAL"||M==="AI"||M==="PAID"||M==="PREMIUM"||M==="PRO",Ae=React.useMemo(()=>de?{name:"Coach Maya",org:"FlowOFit Coaching",badge:"Coach-led",avatar:"\u{1F9D1}\u200D\u{1F3EB}"}:null,[de]),[Oe,N]=React.useState("HOME");React.useEffect(()=>{var E=g=>{try{var f=g&&g.detail?g.detail:{};if(f&&f.view&&N(String(f.view||"HOME").toUpperCase()),f&&f.openPlanUpdate)try{at(!0)}catch(F){}if(f&&f.openCheckin)try{N("CHECKINS")}catch(F){}if(f&&f.openInbox)try{N("INBOX")}catch(F){}}catch(f){}};try{window.addEventListener("flowofit:coach:open",E)}catch(g){}try{window.__fof_openCoach=g=>{try{window.dispatchEvent(new CustomEvent("flowofit:coach:open",{detail:g&&typeof g=="object"?g:{view:g}}))}catch(f){}}}catch(g){}try{var g="fof_coach_pending_open_v1",f=window.__fof_pendingCoachOpen&&typeof window.__fof_pendingCoachOpen=="object"?window.__fof_pendingCoachOpen:(()=>{try{return JSON.parse(localStorage.getItem(g)||"null")}catch(F){return null}})();if(f&&typeof f=="object"){try{f.view&&N(String(f.view||"HOME").toUpperCase()),f.openPlanUpdate&&at(!0),f.openInbox&&N("INBOX"),f.openCheckin&&N("CHECKINS")}catch(F){}try{delete window.__fof_pendingCoachOpen}catch(F){}try{localStorage.removeItem(g)}catch(F){}}}catch(g){}return()=>{try{window.removeEventListener("flowofit:coach:open",E)}catch(g){}try{window.__fof_openCoach&&delete window.__fof_openCoach}catch(g){}}},[]);var[Ne,G]=React.useState(!1),we=(E="COACH")=>{try{if(!De){try{var g=window.__fof_openPaywallStub||window.__fof_openPaywall;if(typeof g=="function")return g("COACH_GOLD",{from:E,feature:"A8.1_INPUT_SHEET"})}catch(g){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Upgrade to use Coach Gold."}}))}catch(g){}return}}catch(g){}try{G(!0)}catch(g){}};React.useEffect(()=>{var E=()=>{try{we("GOLD_PLAN_PREVIEW")}catch(g){}};try{window.addEventListener("flowofit:openGoldInput",E)}catch(g){}try{window.__fof_openGoldInput=E}catch(g){}return()=>{try{window.removeEventListener("flowofit:openGoldInput",E)}catch(g){}try{window.__fof_openGoldInput===E&&delete window.__fof_openGoldInput}catch(g){}}},[De,de]);var $t=(E="AI_COACH")=>{try{var g=window.__fof_openPaywallStub||window.__fof_openPaywall;if(typeof g=="function")return g("AI_COACH",{from:E,feature:"AI_COACH_SURFACE"})}catch(g){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Upgrade to use AI Coach."}}))}catch(g){}},gt=E=>{try{G(!1)}catch(g){}try{window.__FOF_GOLD_INPUT_LAST=E}catch(g){}},_e="fof_linked_coach_surfaces_v1",ve=()=>{try{var E=localStorage.getItem(_e),g=JSON.parse(E||"null");if(g&&typeof g=="object")return g}catch(E){}return{inbox:[{id:xi(),from:"coach",text:"Today: keep it easy. Focus on form + breath.",ts:mi()},{id:xi(),from:"coach",text:"Send me your session summary after you finish.",ts:mi()}],checkins:[{id:xi(),title:"Daily Check-in",status:"PENDING",note:"Sleep \u2022 soreness \u2022 mood",ts:mi()}],notes:[{id:xi(),title:"Coach Notes",body:"We\u2019ll progress volume next week if your Capacity stays MID/HIGH.",ts:mi()}],approvals:[{id:xi(),title:"Plan adjustment request",status:"NONE",body:"No pending approvals.",ts:mi()}]}},[me,j]=React.useState(()=>ve());React.useEffect(()=>{try{localStorage.setItem(_e,JSON.stringify(me))}catch(E){}},[me]);var[je,re]=React.useState(null),[Z,Qe]=React.useState({mood:3,energy:3,soreness:2,sleep:7,stress:2,notes:"",tags:[]}),[nt,Lt]=React.useState(null),[ze,Le]=React.useState(null),[se,at]=React.useState(!1),[Pe,Wt]=React.useState(()=>({reason:"Adjust intensity",detail:"",when:"Today"})),Ha=(E,g)=>{j(f=>({...f||{},[E]:g(f&&f[E]?f[E]:[])}))},qa=E=>{var F,D,k,T,he,oe;var g=E||null,f=g&&g.response?g.response:null;Qe({mood:(F=f==null?void 0:f.mood)!=null?F:3,energy:(D=f==null?void 0:f.energy)!=null?D:3,soreness:(k=f==null?void 0:f.soreness)!=null?k:2,sleep:(T=f==null?void 0:f.sleep)!=null?T:7,stress:(he=f==null?void 0:f.stress)!=null?he:2,notes:(oe=f==null?void 0:f.notes)!=null?oe:"",tags:Array.isArray(f==null?void 0:f.tags)?f.tags:[]}),re({mode:g&&g.status==="DONE"?"EDIT":"NEW",item:g})},oa=()=>{var E=je;if(!E||!E.item)return;var g=E.item.id,f={...Z,ts:mi()};Ha("checkins",F=>F.map(D=>D.id===g?{...D,status:"DONE",response:f,ts:f.ts}:D));try{oi&&oi(__fof_event("CHECKIN_SAVED",{id:g,status:"DONE"},{module:"COACH"},"ui"))}catch(F){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Check-in saved"}}))}catch(F){}re(null)},Ra=(E,g)=>{Ha("approvals",f=>f.map(F=>F.id===E?{...F,status:g,decidedTs:mi()}:F));try{oi&&oi(__fof_event("APPROVAL_DECISION",{id:E,status:g},{module:"COACH"},"ui"))}catch(f){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:g==="APPROVED"?"Approved":"Declined"}}))}catch(f){}},ri=(E,g="like")=>{Ha("notes",f=>f.map(F=>{if(F.id!==E)return F;var D=F.reactions||{},k=!!D[g];return{...F,reactions:{...D,[g]:!k}}}))},Da=()=>{var E=ze;if(!E||!E.note)return;var g=String(E.reply||"").trim();if(g){Ha("notes",f=>f.map(F=>F.id===E.note.id?{...F,replies:[...F.replies||[],{id:xi(),from:"you",text:g,ts:mi()}]}:F));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Reply sent"}}))}catch(f){}Le(null)}},[Va,Y]=React.useState(()=>Xa()),[ft,_a]=React.useState(""),[Ja,Ui]=React.useState(null),[qs,_o]=React.useState(!1),[ki,Vs]=React.useState(!1),[Ke,ua]=React.useState(()=>({day:"Today",slot:"18:00",note:""})),ga="fof_link_coach_request_v1",[Vi,$i]=React.useState(()=>{try{return JSON.parse(localStorage.getItem(ga)||"null")}catch(E){return null}});React.useEffect(()=>{try{localStorage.setItem(ga,JSON.stringify(Vi))}catch(E){}},[Vi]);var[Ya,Zt]=React.useState(null),[Ki,Fa]=React.useState("");React.useEffect(()=>{$e(Va)},[Va]);var Ni=(E,g)=>{var f={id:xi(),role:E,text:String(g||""),ts:mi()};return Y(F=>[...F||[],f]),f},ys=(E,g)=>{Ni("user",g||E);var F=vi({intent:E,capNow:c,zone:h});!De&&(E==="ADJUST_PLAN"||E==="RECOMMEND_CONTENT"||E==="OPTIMIZE")?Ni("assistant",F+`

(Preview) Upgrade to unlock deeper guidance + apply actions.`):de&&E==="ADJUST_PLAN"?Ni("assistant",F+`

Linked mode: you can share this adjustment to your coach.`):Ni("assistant",F),Ui(null)};React.useEffect(()=>{try{window.__FOF=window.__FOF||{},window.__FOF._coachPushPrompt=(E,g=null)=>{var f=String(E||"").trim();if(!f)return;if(!De){try{$t("AI_COACH_FLOATING")}catch(D){}return}var F=g||(f.toLowerCase().includes("optimize")?"OPTIMIZE":f.toLowerCase().includes("adjust")||f.toLowerCase().includes("plan")?"ADJUST_PLAN":f.toLowerCase().includes("recommend")?"RECOMMEND_CONTENT":"CHAT");F==="CHAT"?(Ni("user",f),Ni("assistant",vi({intent:"CHAT",capNow:c,zone:h}))):ys(F,f)}}catch(E){}return()=>{try{window.__FOF&&(window.__FOF._coachPushPrompt=null)}catch(E){}}},[c,h,M,r]);var Ps=[{t:"Optimize my week",i:"OPTIMIZE"},{t:"Adjust today\u2019s plan",i:"ADJUST_PLAN"},{t:"Recommend a workout",i:"RECOMMEND_CONTENT"}],Ms=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"FIND_COACH_SHEET_V1",props:{from:"COACH_INDEPENDENT"}}}));return}catch(E){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{kind:"info",msg:"Find a Coach is not available yet."}}))}catch(E){}},o=(E="PRIMARY")=>De?React.createElement("div",{className:["glass-panel p-4",E==="SECONDARY"?"opacity-95":""].join(" ")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"AI COACH"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Ask \u2022 Plan \u2022 Adapt"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Capacity zone: ",React.createElement("span",{className:"font-extrabold"},h)," \u2022 ",Math.round(Number(c)||0),"/100")),React.createElement("button",{type:"button",onClick:()=>{try{V&&V()}catch(g){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold text-sm"},"Library")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},Ps.map(g=>React.createElement("button",{key:g.i,type:"button",onClick:()=>ys(g.i,g.t),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 text-sm font-extrabold"},g.t))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-3 max-h-[52vh] overflow-auto scroll-area"},!Va||!Va.length?React.createElement("div",{className:"fof-empty text-white/70"},"Ask something to get started. Example: ",React.createElement("span",{className:"font-extrabold"},"\u201CAdjust my plan for low capacity.\u201D")):React.createElement("div",{className:"space-y-3"},Va.map(g=>React.createElement("div",{key:g.id,className:g.role==="user"?"text-right":"text-left"},React.createElement("div",{className:["inline-block max-w-[92%] px-3 py-2 rounded-2xl",g.role==="user"?"bg-white/15 border border-white/12":"bg-emerald-400/10 border border-emerald-300/20"].join(" ")},React.createElement("div",{className:"text-xs text-white/60 font-extrabold"},g.role==="user"?"YOU":"AI"),React.createElement("div",{className:"mt-1 whitespace-pre-line text-white text-sm"},g.text)))))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("input",{value:ft,onChange:g=>_a(g.target.value),placeholder:de?"Ask AI or write a note to share\u2026":"Ask your AI Coach\u2026",className:"flex-1 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white placeholder:text-white/40"}),React.createElement("button",{type:"button",onClick:()=>{var g=String(ft||"").trim();if(!g)return;_a(""),Ni("user",g);var f=vi({intent:"CHAT",capNow:c,zone:h});Ni("assistant",f)},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold"},"Send")),de&&React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Linked: share summaries to coach (v1 placeholder).")):React.createElement("div",{className:["glass-panel p-4",E==="SECONDARY"?"opacity-95":""].join(" ")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"AI COACH"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Ask \u2022 Plan \u2022 Adapt"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Premium feature \u2022 Upgrade to unlock personalized guidance")),React.createElement("button",{type:"button",onClick:()=>{try{V&&V()}catch(g){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold text-sm"},"Library")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},Ps.map(g=>React.createElement("button",{key:g.i,type:"button",onClick:()=>$t("AI_COACH_QUICK_CHIP"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 text-sm font-extrabold text-white/85"},g.t)),React.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-full bg-white/10 border border-white/10 text-white/70"},"LOCKED")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[13px] text-white/80"},"Upgrade to unlock AI Coach: explanations, safe swaps, plan adjustments, and nutrition suggestions."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>$t("AI_COACH_PRIMARY_CTA"),className:"flex-1 px-4 py-3 rounded-2xl bg-white/12 hover:bg-white/18 border border-white/10 font-extrabold"},"Unlock AI Coach"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Preview: upgrade to unlock AI Coach."}}))}catch(g){}},className:"px-4 py-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 font-extrabold text-white/80"},"Not now"))));return React.createElement(React.Fragment,null,React.createElement("div",null,de?(()=>{var D,k,T,he;var E=[{k:"INBOX",t:"Inbox"},{k:"CHECKINS",t:"Check-ins"},{k:"NOTES",t:"Coach Notes"},{k:"APPROVALS",t:"Approvals"},{k:"AI",t:"AI Assist"}],g=oe=>{N(oe)},f=()=>{try{N("HOME")}catch(oe){}};if(Oe==="HOME"){var oe=(me.checkins||[]).filter(Me=>String(Me.status||"").toUpperCase()==="PENDING").length,ke=(me.approvals||[]).some(Me=>String(Me.status||"").toUpperCase()==="PENDING"),Re=(me.inbox||[]).slice(-1)[0];return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-white/10 border border-white/12 flex items-center justify-center text-2xl"},Ae?Ae.avatar:"\u{1F9D1}\u200D\u{1F3EB}"),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"COACH"),React.createElement("div",{className:"text-lg font-black text-white"},Ae?Ae.name:"Coach"),React.createElement("div",{className:"text-sm text-white/70"},Ae?Ae.org:"\u2014"," \u2022 ",React.createElement("span",{className:"fof-chip"},Ae?Ae.badge:"Coach-led")))),React.createElement("div",{className:"flex flex-wrap gap-2 justify-end"},React.createElement("button",{type:"button",onClick:()=>g("INBOX"),className:"px-4 py-2 rounded-2xl border border-cyan-300/25 bg-cyan-400/10 hover:bg-cyan-400/15 font-extrabold shadow-[0_0_0_1px_rgba(77,233,255,0.14),0_16px_40px_rgba(0,0,0,0.35)]"},"Message coach"),React.createElement("button",{type:"button",onClick:()=>{try{if(typeof window.__fof_openBookSession=="function"){window.__fof_openBookSession();return}}catch(Me){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Booking sheet is not available in this build."}}))}catch(Me){}},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold"},"Book next session"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-gradient-to-br from-white/10 via-white/6 to-transparent p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"GOLD FEATURE"),React.createElement("div",{className:"mt-1 text-xl font-black text-white"},"Train now \u2192 Make a plan"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"One flow to generate today\u2019s session + confirm plan queue (A8 wiring).")),React.createElement("span",{className:"fof-chip border-amber-300/30 bg-amber-400/10 text-amber-100"},"Preview")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>we("LINKED_HOME"),className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black font-extrabold"},"Open"),React.createElement("button",{type:"button",onClick:()=>g("AI"),className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold text-white"},"Ask AI first"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"ASSIGNED & ACCOUNTABILITY"),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},"Assigned session"),React.createElement("div",{className:"text-sm text-white/70 mt-0.5"},"Today \u2022 Coach-led focus based on Capacity")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Assigned session viewer will be wired as a session detail sheet in A7.2+"}}))}catch(Me){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-sm text-white/85"},"View"))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},"Check-in"),React.createElement("div",{className:"text-sm text-white/70 mt-0.5"},oe?`${oe} due`:"No check-ins due")),React.createElement("button",{type:"button",onClick:()=>g("CHECKINS"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-sm text-white/85"},"Open"))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},"Plan approvals"),React.createElement("div",{className:"text-sm text-white/70 mt-0.5"},ke?"Pending approval":"None pending")),React.createElement("button",{type:"button",onClick:()=>g("APPROVALS"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-sm text-white/85"},"Review")))))),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement(hi,{title:"Messages",subtitle:(Re==null?void 0:Re.text)||"Open coach thread",icon:"message-circle",onClick:()=>g("INBOX"),tag:(me.inbox||[]).length?String((me.inbox||[]).length):"0"}),React.createElement(hi,{title:"Coach Notes",subtitle:"Feedback & next steps",icon:"sticky-note",onClick:()=>g("NOTES"),tag:(me.notes||[]).length?"NEW":null}),React.createElement(hi,{title:"Request plan update",subtitle:"Send a structured request",icon:"sliders",onClick:()=>{try{at(!0)}catch(Me){}},tag:ke?"PENDING":"REQUEST"}),React.createElement(hi,{title:"AI Assist",subtitle:"Draft questions & summaries",icon:"sparkles",onClick:()=>g("AI"),tag:De?"OK":"PREVIEW"})),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"REQUESTS & TASKS"),React.createElement("div",{className:"mt-1 text-sm text-white/75"},"Send a clear request to your coach without needing to type into chat.")),React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/70"},"A7.2")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},"Plan update"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Intensity, swaps, or schedule changes."),React.createElement("button",{type:"button",onClick:()=>{try{at(!0)}catch(Me){}},className:"mt-3 w-full px-4 py-3 rounded-2xl border border-cyan-300/25 bg-cyan-400/10 hover:bg-cyan-400/15 font-extrabold text-white"},"Request")),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},"Check-in"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Complete today\u2019s check-in (if due)."),React.createElement("button",{type:"button",onClick:()=>g("CHECKINS"),className:"mt-3 w-full px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-white"},"Open")),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},"Send session summary"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Quickly message your coach after training."),React.createElement("button",{type:"button",onClick:()=>{try{var Me=`Session summary: Capacity ${h} (${Math.round(Number(c)||0)}/100). Completed: ________. Notes: ________.`;j(Et=>({...Et||{},inbox:[...Et&&Et.inbox||[],{id:xi(),from:"you",text:Me,ts:mi()}]}));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Draft sent to coach inbox."}}))}catch(Et){}}catch(Me){}try{g("INBOX")}catch(Me){}},className:"mt-3 w-full px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-white"},"Send draft")))),React.createElement("div",{className:"mt-3 fof-card p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"CONTEXT"),React.createElement("div",{className:"mt-1 text-sm text-white/80"},"Capacity zone: ",React.createElement("span",{className:"font-extrabold text-white"},h)," \u2022 ",Math.round(Number(c)||0),"/100"))),React.createElement("div",{className:"text-[11px] text-white/55 px-1"},"A7.1: Coach Home layout. Detailed sub-surfaces (Inbox/Check-ins/Notes/Approvals/AI) remain intact and open via tiles."))}var F=oe=>{var ke=String(oe||"").trim();if(!ke)return;var Re=xi();j(Me=>({...Me||{},inbox:[...Me&&Me.inbox?Me.inbox:[],{id:Re,from:"you",text:ke,ts:mi()}]}));try{var Me=typeof Xa=="function"?Xa()||[]:[],Et=[...Array.isArray(Me)?Me:[],{id:Re,role:"user",text:ke,ts:Date.now()}];typeof $e=="function"&&$e(Et)}catch(Me){}};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-white/10 border border-white/12 flex items-center justify-center text-2xl"},Ae?Ae.avatar:"\u{1F9D1}\u200D\u{1F3EB}"),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"COACH"),React.createElement("div",{className:"text-lg font-black text-white"},Ae?Ae.name:"Coach"),React.createElement("div",{className:"text-sm text-white/70"},Ae?Ae.org:"\u2014"," \u2022 ",React.createElement("span",{className:"fof-chip"},Ae?Ae.badge:"Coach-led")))),React.createElement("div",{className:"flex flex-col gap-2 items-stretch md:items-center"},React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("span",{className:"fof-chip border-white/12 bg-emerald-400/10 text-emerald-200"},React.createElement("span",{className:"inline-block w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),(Ae==null?void 0:Ae.status)||"Online"),React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/70"},"Response: ",(Ae==null?void 0:Ae.responseSLA)||"\u226424h")),React.createElement("div",{className:"flex flex-wrap gap-2 justify-end"},React.createElement("button",{type:"button",onClick:()=>g("INBOX"),className:"px-4 py-2 rounded-2xl border border-cyan-300/25 bg-cyan-400/10 hover:bg-cyan-400/15 font-extrabold shadow-[0_0_0_1px_rgba(77,233,255,0.14),0_16px_40px_rgba(0,0,0,0.35)]"},"Message Coach"),React.createElement("button",{type:"button",onClick:()=>{try{if(typeof window.__fof_openBookSession=="function"){window.__fof_openBookSession();return}}catch(oe){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Booking sheet is not available in this build."}}))}catch(oe){}},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold"},"Book Session"),React.createElement("button",{type:"button",onClick:()=>{try{at(!0)}catch(oe){}},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold"},"Plan Changes")))),React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement(hi,{title:"Inbox",subtitle:(me.inbox||[]).length?((D=(me.inbox||[]).slice(-1)[0])==null?void 0:D.text)||"Open messages":"No messages yet",icon:"message-circle",onClick:()=>g("INBOX"),tag:(me.inbox||[]).length?String((me.inbox||[]).length):"0"}),React.createElement(hi,{title:"Check-ins",subtitle:"Daily accountability",icon:"check-square",onClick:()=>g("CHECKINS"),tag:(me.checkins||[]).filter(oe=>String(oe.status||"").toUpperCase()==="PENDING").length?"DUE":"OK"}),React.createElement(hi,{title:"Coach Notes",subtitle:"Feedback & next steps",icon:"sticky-note",onClick:()=>g("NOTES"),tag:(me.notes||[]).length?"NEW":null}),React.createElement(hi,{title:"Approvals",subtitle:"Plan adjustments",icon:"shield-check",onClick:()=>g("APPROVALS"),tag:(me.approvals||[]).some(oe=>String(oe.status||"").toUpperCase()==="PENDING")?"PENDING":"NONE"})),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"CONTEXT"),React.createElement("div",{className:"mt-1 text-sm text-white/80"},"Capacity zone: ",React.createElement("span",{className:"font-extrabold text-white"},h)," \u2022 ",Math.round(Number(c)||0),"/100")),React.createElement("button",{type:"button",onClick:()=>g("AI"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-sm"},"AI Assist")))),Oe!=="HOME"&&React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>f(),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-sm text-white/80"},"\u2190 Coach Home"),React.createElement("div",{className:"text-[11px] text-white/55"},"Linked \u2022 Coach-led")),React.createElement("div",{className:"flex flex-wrap gap-2"},E.map(oe=>React.createElement("button",{key:oe.k,type:"button",onClick:()=>g(oe.k),className:["px-3 py-2 rounded-2xl border text-sm font-extrabold",Oe===oe.k?"border-cyan-300/40 bg-cyan-400/10":"border-white/12 bg-white/5 hover:bg-white/10"].join(" ")},oe.t))),Oe==="INBOX"&&React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"INBOX"),React.createElement("div",{className:"text-lg font-black text-white"},"Coach conversation"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3 max-h-[44vh] overflow-auto scroll-area"},(me.inbox||[]).length?React.createElement("div",{className:"space-y-3"},(me.inbox||[]).map(oe=>React.createElement("div",{key:oe.id,className:oe.from==="you"?"text-right":"text-left"},React.createElement("div",{className:["inline-block max-w-[92%] px-3 py-2 rounded-2xl border text-sm",oe.from==="you"?"bg-white/15 border-white/12":"bg-indigo-400/10 border-indigo-300/20"].join(" ")},React.createElement("div",{className:"text-xs text-white/60 font-extrabold"},oe.from==="you"?"YOU":"COACH"),React.createElement("div",{className:"mt-1 whitespace-pre-line text-white"},oe.text))))):React.createElement("div",{className:"fof-empty text-white/70"},"No messages yet.")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("input",{placeholder:"Write to your coach\u2026",value:ft,onChange:oe=>_a(oe.target.value),className:"flex-1 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white placeholder:text-white/40"}),React.createElement("button",{type:"button",onClick:()=>{var oe=String(ft||"").trim();oe&&(_a(""),F(oe))},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold"},"Send")),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Coach replies are stubbed (Phase 2 wiring). This is the identity-defining surface for Linked clients.")),Oe==="CHECKINS"&&React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"CHECK-INS"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Accountability"),React.createElement("div",{className:"mt-3 space-y-2"},(me.checkins||[]).map(oe=>React.createElement("div",{key:oe.id,className:"fof-card p-3 flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},oe.title),React.createElement("div",{className:"text-sm text-white/70"},oe.note),React.createElement("div",{className:"text-xs text-white/50 mt-1"},String(oe.status||"").toUpperCase())),React.createElement("button",{type:"button",onClick:()=>{qa(oe)},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold text-sm"},String(oe.status||"").toUpperCase()==="DONE"?"Edit":"Complete"))))),Oe==="NOTES"&&React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"COACH NOTES"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"What your coach wants you to focus on"),React.createElement("div",{className:"mt-3 space-y-2"},(me.notes||[]).map(oe=>React.createElement("div",{key:oe.id,className:"fof-card p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},oe.title),React.createElement("div",{className:"mt-1 text-sm text-white/75 whitespace-pre-line"},oe.body),Array.isArray(oe.replies)&&oe.replies.length>0&&React.createElement("div",{className:"mt-3 space-y-2"},oe.replies.slice(-2).map(ke=>React.createElement("div",{key:ke.id,className:"rounded-2xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold"},ke.from==="you"?"You":"Coach"," \u2022 ",As&&As(ke.ts)),React.createElement("div",{className:"text-sm text-white/80 mt-0.5 whitespace-pre-line"},ke.text))))),React.createElement("div",{className:"flex flex-col gap-2 items-center"},React.createElement("button",{type:"button",onClick:()=>{ri(oe.id,"like")},className:["px-3 py-2 rounded-2xl border text-sm font-extrabold",oe.reactions&&oe.reactions.like?"border-emerald-300/40 bg-emerald-400/10 text-emerald-100":"border-white/12 bg-white/5 hover:bg-white/10 text-white/80"].join(" ")},"\u{1F44D}"),React.createElement("button",{type:"button",onClick:()=>{Le({note:oe,reply:""})},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 text-sm font-extrabold text-white"},"Reply"))))))),Oe==="APPROVALS"&&React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"APPROVALS"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Plan changes & approvals"),React.createElement("div",{className:"mt-3 space-y-2"},(me.approvals||[]).map(oe=>{var ke=String(oe.status||"NONE").toUpperCase(),Re=ke==="PENDING",Me=Re?"border-amber-300/40 bg-amber-400/10 text-amber-100":ke==="APPROVED"?"border-emerald-300/40 bg-emerald-400/10 text-emerald-100":ke==="DECLINED"?"border-rose-300/40 bg-rose-400/10 text-rose-100":"border-white/12 bg-white/5 text-white/70";return React.createElement("div",{key:oe.id,className:"fof-card p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},oe.title),React.createElement("div",{className:"mt-1 text-sm text-white/75 whitespace-pre-line"},oe.body),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("span",{className:["fof-chip",Me].join(" ")},ke),oe.decidedTs&&React.createElement("span",{className:"text-xs text-white/50"},"\u2022 ",As&&As(oe.decidedTs)))),Re?React.createElement("div",{className:"flex flex-col gap-2 items-center"},React.createElement("button",{type:"button",onClick:()=>Ra(oe.id,"APPROVED"),className:"px-3 py-2 rounded-2xl border border-emerald-300/25 bg-emerald-400/10 hover:bg-emerald-400/15 text-sm font-extrabold text-emerald-100"},"Approve"),React.createElement("button",{type:"button",onClick:()=>Ra(oe.id,"DECLINED"),className:"px-3 py-2 rounded-2xl border border-rose-300/25 bg-rose-400/10 hover:bg-rose-400/15 text-sm font-extrabold text-rose-100"},"Decline")):React.createElement("button",{type:"button",onClick:()=>Lt(oe),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-sm font-extrabold text-white/80"},"Details")))})),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{Ha("approvals",oe=>[{id:xi(),title:"Request: swap today session",status:"PENDING",body:"Swap today\u2019s session to low-impact because Capacity is LOW.",ts:mi()},...oe]);try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Request sent to coach"}}))}catch(oe){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold text-sm text-white"},"Request change"),React.createElement("button",{type:"button",onClick:()=>g("AI"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-sm text-white/80"},"Ask AI first")),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"In Phase 2 wiring, coach decisions sync back from the coach system. For now, this is a realistic local stub.")),Oe==="AI"&&React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"AI ASSIST"),React.createElement("div",{className:"mt-1 text-sm text-white/75"},"AI is helpful, but in Linked mode your coach is primary. Use AI to draft questions and summaries.")),o("SECONDARY")),je&&React.createElement("div",{className:"fixed inset-0 z-[120] bg-black/70 backdrop-blur-sm flex items-center md:items-center justify-center p-2"},React.createElement("div",{className:"w-full md:max-w-xl rounded-3xl border border-white/12 bg-zinc-950 shadow-2xl max-h-[92vh] overflow-auto"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"CHECK-IN"),React.createElement("div",{className:"text-lg font-black text-white"},je.mode==="EDIT"?"Edit check-in":"Complete check-in"),React.createElement("div",{className:"text-sm text-white/60 mt-0.5"},(k=je.item)==null?void 0:k.title)),React.createElement("button",{type:"button",onClick:()=>re(null),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Close")),React.createElement("div",{className:"p-4 space-y-4"},[{k:"mood",label:"Mood",min:1,max:5},{k:"energy",label:"Energy",min:1,max:5},{k:"soreness",label:"Soreness",min:0,max:5},{k:"stress",label:"Stress",min:0,max:5}].map(oe=>React.createElement("div",{key:oe.k,className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-extrabold text-white"},oe.label),React.createElement("div",{className:"text-sm text-white/70 font-extrabold"},Z[oe.k])),React.createElement("input",{type:"range",min:oe.min,max:oe.max,value:Number(Z[oe.k]||0),onChange:ke=>Qe(Re=>({...Re,[oe.k]:Number(ke.target.value)})),className:"w-full mt-2"}))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-extrabold text-white"},"Sleep (hours)"),React.createElement("div",{className:"text-sm text-white/70 font-extrabold"},Z.sleep)),React.createElement("input",{type:"range",min:0,max:12,value:Number(Z.sleep||0),onChange:oe=>Qe(ke=>({...ke,sleep:Number(oe.target.value)})),className:"w-full mt-2"})),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},"Tags"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["Sleep","Stress","Soreness","Motivation","Nutrition"].map(oe=>{var ke=(Z.tags||[]).includes(oe);return React.createElement("button",{key:oe,type:"button",onClick:()=>Qe(Re=>{var Me=Array.isArray(Re.tags)?Re.tags:[];return ke?{...Re,tags:Me.filter(Et=>Et!==oe)}:{...Re,tags:[...Me,oe]}}),className:["px-3 py-2 rounded-2xl border text-sm font-extrabold",ke?"border-cyan-300/40 bg-cyan-400/10 text-cyan-100":"border-white/12 bg-white/5 hover:bg-white/10 text-white/80"].join(" ")},oe)}))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},"Notes"),React.createElement("textarea",{value:Z.notes||"",onChange:oe=>Qe(ke=>({...ke,notes:oe.target.value})),rows:4,className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 p-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-cyan-400/30",placeholder:"How did you feel today? Any constraints, wins, or pain points?"}))),React.createElement("div",{className:"p-4 border-t border-white/10 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>re(null),className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Cancel"),React.createElement("button",{type:"button",onClick:oa,className:"flex-1 px-4 py-3 rounded-2xl border border-cyan-300/30 bg-cyan-400/15 hover:bg-cyan-400/20 font-extrabold text-white"},"Save check-in")))),ze&&React.createElement("div",{className:"fixed inset-0 z-[120] bg-black/70 backdrop-blur-sm flex items-center md:items-center justify-center p-2"},React.createElement("div",{className:"w-full md:max-w-xl rounded-3xl border border-white/12 bg-zinc-950 shadow-2xl max-h-[88vh] overflow-auto"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"REPLY"),React.createElement("div",{className:"text-lg font-black text-white"},"Message your coach")),React.createElement("button",{type:"button",onClick:()=>Le(null),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Close")),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"font-extrabold text-white"},(T=ze.note)==null?void 0:T.title),React.createElement("div",{className:"mt-1 text-sm text-white/70 whitespace-pre-line"},(he=ze.note)==null?void 0:he.body)),React.createElement("textarea",{value:ze.reply||"",onChange:oe=>Le(ke=>({...ke||{},reply:oe.target.value})),rows:4,className:"w-full rounded-2xl border border-white/10 bg-black/30 p-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-cyan-400/30",placeholder:"Write a quick reply\u2026"})),React.createElement("div",{className:"p-4 border-t border-white/10 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Le(null),className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Cancel"),React.createElement("button",{type:"button",onClick:Da,className:"flex-1 px-4 py-3 rounded-2xl border border-cyan-300/30 bg-cyan-400/15 hover:bg-cyan-400/20 font-extrabold text-white"},"Send")))),nt&&React.createElement("div",{className:"fixed inset-0 z-[120] bg-black/70 backdrop-blur-sm flex items-center md:items-center justify-center p-2"},React.createElement("div",{className:"w-full md:max-w-xl rounded-3xl border border-white/12 bg-zinc-950 shadow-2xl max-h-[86vh] overflow-auto"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"APPROVAL"),React.createElement("div",{className:"text-lg font-black text-white"},nt.title),React.createElement("div",{className:"text-sm text-white/60 mt-0.5"},String(nt.status||"NONE").toUpperCase())),React.createElement("button",{type:"button",onClick:()=>Lt(null),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Close")),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-sm text-white/80 whitespace-pre-line"},nt.body)),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"NEXT"),React.createElement("div",{className:"mt-1 text-sm text-white/80"},"In production: this decision syncs from your coach. For now, use the Approve/Decline actions on pending requests."))))))})():(()=>{if(Oe==="HOME"){var E=(Va||[]).slice(-1)[0];return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"glass-panel p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"COACH"),React.createElement("div",{className:"mt-1 text-xl font-black text-white"},"Coaching home"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"AI guidance is available now. Link a real coach anytime for assignments + accountability.")),React.createElement("button",{type:"button",onClick:Ms,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 font-extrabold"},"Find a Coach")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-gradient-to-br from-white/10 via-white/6 to-transparent p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"AI COACH"),React.createElement("div",{className:"mt-1 text-xl font-black text-white"},"Ask \u2022 Plan \u2022 Adapt"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Capacity zone: ",React.createElement("span",{className:"font-extrabold"},h)," \u2022 ",Math.round(Number(c)||0),"/100"),React.createElement("div",{className:"mt-2 text-sm text-white/70 line-clamp-2"},"Last: ",E?E.text:"No messages yet. Tap to start.")),React.createElement("span",{className:"fof-chip border-white/12 bg-white/8 text-white/80"},De?"OK":"PREVIEW")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>N("AI"),className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black font-extrabold"},"Open AI Coach"),React.createElement("button",{type:"button",onClick:()=>{try{V&&V()}catch(g){}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold text-white"},"Library"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"LINKED MODE PREVIEW"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Assigned sessions + check-ins")),React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/70"},"LOCKED")),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"When linked, this tab becomes coach-led: inbox, check-ins, notes, approvals."),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"fof-card p-3 opacity-70"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold"},"Assignments"),React.createElement("div",{className:"mt-1 font-black text-white"},"Coach-built"),React.createElement("div",{className:"text-xs text-white/60"},"Weekly plan")),React.createElement("div",{className:"fof-card p-3 opacity-70"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold"},"Check-ins"),React.createElement("div",{className:"mt-1 font-black text-white"},"Accountability"),React.createElement("div",{className:"text-xs text-white/60"},"Daily/weekly"))),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:Ms,className:"flex-1 px-4 py-3 rounded-2xl border border-cyan-300/25 bg-cyan-400/10 hover:bg-cyan-400/15 font-extrabold text-white"},"Link a coach"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Preview only. Link a coach to activate assignments + check-ins."}}))}catch(g){}},className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 font-extrabold text-white/80"},"Preview")))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-gradient-to-br from-amber-400/10 via-white/6 to-transparent p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"GOLD FEATURE"),React.createElement("div",{className:"mt-1 text-lg font-black text-white"},"Make a plan (fast)"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Tell us your goal, time, and equipment. We\u2019ll build today\u2019s plan next (A8.2+).")),React.createElement("span",{className:"fof-chip border-amber-300/30 bg-amber-400/10 text-amber-100"},De?"OK":"LOCKED")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>we("INDEPENDENT_HOME"),className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black font-extrabold"},"Open"),React.createElement("button",{type:"button",onClick:()=>N("AI"),className:"px-4 py-3 rounded-2xl border border-white/12 bg-white/8 hover:bg-white/12 font-extrabold text-white"},"Ask AI first"))),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement(hi,{title:"AI Coach",subtitle:"Open guidance",icon:"sparkles",onClick:()=>N("AI"),tag:De?"OK":"PREVIEW"}),React.createElement(hi,{title:"Find a Coach",subtitle:"Browse marketplace",icon:"search",onClick:Ms,tag:"NEW"}),React.createElement(hi,{title:"Coach Features",subtitle:"Assigned plans preview",icon:"shield-check",onClick:Ms,tag:"LOCKED"}),React.createElement(hi,{title:"Messages",subtitle:"AI chat thread",icon:"message-circle",onClick:()=>N("AI"),tag:(Va||[]).length?String((Va||[]).length):"0"}))),React.createElement("div",{className:"text-[11px] text-white/55 px-1"},"A7.1: Coach Home layout. AI chat opens as a secondary surface (tap \u201COpen AI Coach\u201D)."))}return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>N("HOME"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-sm text-white/80"},"\u2190 Coach Home"),React.createElement("div",{className:"text-[11px] text-white/55"},"Independent \u2022 AI-first")),o("PRIMARY"))})()),de&&se&&React.createElement(qo,{open:!0,title:"Request a Plan Update",kicker:"Coach Requests",onClose:()=>at(!1),footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>at(!1),className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{try{var E=`When: ${Pe.when}. Reason: ${Pe.reason}. ${String(Pe.detail||"").trim()}`.trim(),g=mi(),f={id:xi(),title:"Plan update request",status:"PENDING",body:E,ts:g},F={id:xi(),from:"you",text:`Request: ${E}`,ts:g};j(D=>({...D||{},approvals:[f,...D&&D.approvals||[]],inbox:[...D&&D.inbox||[],F]}));try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Request sent to coach."}}))}catch(D){}}catch(E){}try{at(!1)}catch(E){}try{N("INBOX")}catch(E){}},className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black rounded-2xl font-extrabold"},"Send"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"When"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["Today","This week","Next week"].map(E=>React.createElement("button",{key:E,type:"button",onClick:()=>Wt(g=>({...g||{},when:E})),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(Pe.when===E?"border-white/30 bg-white/12":"border-white/12 bg-white/5 hover:bg-white/10")},E)))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Reason"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["Adjust intensity","Swap exercises","Schedule change","Add yoga/recovery"].map(E=>React.createElement("button",{key:E,type:"button",onClick:()=>Wt(g=>({...g||{},reason:E})),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(Pe.reason===E?"border-white/30 bg-white/12":"border-white/12 bg-white/5 hover:bg-white/10")},E)))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Details (optional)"),React.createElement("textarea",{value:Pe.detail||"",onChange:E=>Wt(g=>({...g||{},detail:E.target.value})),rows:4,className:"mt-2 w-full rounded-2xl bg-black/30 border border-white/12 px-3 py-2 text-sm outline-none focus:border-white/25",placeholder:"Add any context for your coach\u2026"})),React.createElement("div",{className:"text-[12px] text-white/55"},"This creates a PENDING request and adds a copy to your coach inbox thread."))),React.createElement(Fd,{open:Ne,modeLabel:de?"I Want to Train Now":"Make a Plan",onClose:()=>G(!1),onSubmit:E=>{try{gt&&gt(E)}catch(g){}}}))},Pa=({activeTab:e,onPrompt:a})=>{var Ne;var[r,c]=React.useState(!1),[h,V]=React.useState(!1),[de,M]=React.useState(!1),[De,Ae]=React.useState(()=>({day:"Today",slot:"18:00",note:""}));React.useEffect(()=>{try{window.__fof_openBookSession=()=>M(!0),window.__fof_openLinkCoach=()=>V(!0)}catch(G){}return()=>{try{window.__fof_openBookSession&&delete window.__fof_openBookSession}catch(G){}try{window.__fof_openLinkCoach&&delete window.__fof_openLinkCoach}catch(G){}}},[]);var N=(G=>{switch(G){case xt.TODAY:return[{t:"Optimize my day",i:"OPTIMIZE"},{t:"Explain capacity",i:"EXPLAIN_CAPACITY"},{t:"Adjust plan",i:"ADJUST_PLAN"}];case xt.PLAN:return[{t:"Adjust plan for today",i:"ADJUST_PLAN"},{t:"Explain capacity impact",i:"EXPLAIN_CAPACITY"},{t:"Optimize my day",i:"OPTIMIZE"}];case xt.LOG:return[{t:"What should I log now?",i:"CHAT"},{t:"Explain capacity",i:"EXPLAIN_CAPACITY"},{t:"Optimize my day",i:"OPTIMIZE"}];case xt.INSIGHTS:return[{t:"Explain this trend",i:"CHAT"},{t:"Optimize my day",i:"OPTIMIZE"},{t:"Adjust plan",i:"ADJUST_PLAN"}];default:return[{t:"Optimize my day",i:"OPTIMIZE"},{t:"Explain capacity",i:"EXPLAIN_CAPACITY"}]}})(e);return React.createElement(React.Fragment,null,React.createElement("button",{type:"button","aria-label":"AI Coach",onClick:()=>c(!0),className:"touch-manipulation fixed z-[60] right-4 w-14 h-14 rounded-2xl shadow-lg border border-white/12 bg-gradient-to-br from-[#1f8cff] via-[#6b3cff] to-[#00ffd5] flex items-center justify-center",style:{bottom:"calc(var(--fof-bottomnav-h, 96px) + env(safe-area-inset-bottom) + 16px)"}},React.createElement(gi,{name:"Sparkles",size:20})),r&&React.createElement("div",{className:"fixed inset-0 z-[70]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>c(!1)}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-4 pb-[calc(84px+env(safe-area-inset-bottom)+18px)]"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-[#0b1220] overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10"},React.createElement("div",{className:"text-white font-extrabold"},"AI Coach"),React.createElement("div",{className:"text-[12px] text-white/70 mt-1"},"Context: ",String(e||"").toLowerCase())),React.createElement("div",{className:"p-3 grid grid-cols-1 gap-2"},N.map(G=>React.createElement("button",{key:G.t,type:"button",onClick:()=>{c(!1);try{a(G.t,G.i)}catch(we){}},className:"touch-manipulation text-left px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/8"},React.createElement("div",{className:"text-[13px] font-bold text-white"},G.t),React.createElement("div",{className:"text-[11px] text-white/60 mt-0.5"},"Tap to continue in Coach")))),React.createElement("div",{className:"p-3 border-t border-white/10 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>c(!1),className:"touch-manipulation px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/8 text-[12px] font-bold"},"Close"))))),de&&React.createElement(qo,{open:!0,title:"Book a Session",kicker:"Scheduling",onClose:()=>M(!1),footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>M(!1),className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{try{var G={...De,ts:Date.now()};window.__FOF=window.__FOF||{},window.__FOF._bookings=window.__FOF._bookings||[],window.__FOF._bookings.push(G),__fof_toast&&__fof_toast("Session request sent to coach.")}catch(G){}M(!1)},className:"flex-1 px-4 py-3 rounded-2xl bg-white text-black rounded-2xl font-extrabold"},"Request"))},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Preferred day"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["Today","Tomorrow","This Weekend","Next Week"].map(G=>React.createElement("button",{key:G,type:"button",onClick:()=>Ae(we=>({...we,day:G})),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(De.day===G?"border-white/30 bg-white/12":"border-white/12 bg-white/5 hover:bg-white/10")},G)))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Time slot"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},["07:00","12:00","18:00","20:00"].map(G=>React.createElement("button",{key:G,type:"button",onClick:()=>Ae(we=>({...we,slot:G})),className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold "+(De.slot===G?"border-white/30 bg-white/12":"border-white/12 bg-white/5 hover:bg-white/10")},G)))),React.createElement("div",{className:"fof-card p-3"},React.createElement("div",{className:"text-[12px] font-black text-white/70"},"Note (optional)"),React.createElement("textarea",{value:De.note||"",onChange:G=>Ae(we=>({...we,note:G.target.value})),rows:3,className:"mt-2 w-full rounded-2xl bg-black/30 border border-white/12 px-3 py-2 text-sm outline-none focus:border-white/25",placeholder:"Anything your coach should know?"})),React.createElement("div",{className:"text-[12px] text-white/55"},"This is a request. Your coach will confirm time in Inbox."))),h&&React.createElement(qo,{open:!0,title:"Find a Coach",kicker:"Marketplace",onClose:()=>V(!1),footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>V(!1),className:"flex-1 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-white/80"},"Not now"),React.createElement("button",{type:"button",onClick:()=>{var G=coachPick||{name:"Coach Maya",org:"FlowOFit Coaching",badge:"Coach-led"},we=String(coachRequestText||"").trim()||"Hi coach \u2014 I\u2019d like to link and get a weekly plan + check-ins.";setLinkCoachReq({id:xi(),coach:G,message:we,status:"PENDING",ts:mi()});try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{text:"Request sent"}}))}catch($t){}V(!1)},className:"flex-1 px-4 py-3 rounded-2xl border border-cyan-300/30 bg-cyan-400/15 hover:bg-cyan-400/20 font-extrabold text-white"},"Send request"))},React.createElement("div",{className:"space-y-3"},linkCoachReq&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"STATUS"),React.createElement("div",{className:"mt-1 text-sm text-white/80"},"Request to ",React.createElement("span",{className:"font-extrabold text-white"},(Ne=linkCoachReq.coach)==null?void 0:Ne.name)," \u2022 ",String(linkCoachReq.status||"PENDING").toUpperCase())),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"PICK A COACH"),React.createElement("div",{className:"mt-2 grid grid-cols-1 gap-2"},[{name:"Coach Maya",org:"FlowOFit Coaching",badge:"Strength \u2022 Mobility",avatar:"\u{1F9D1}\u200D\u{1F3EB}"},{name:"Coach Sam",org:"Hybrid Lab",badge:"Hybrid \u2022 Run",avatar:"\u{1F3C3}\u200D\u2642\uFE0F"},{name:"Coach Aisha",org:"Yoga Studio",badge:"Yoga \u2022 Recovery",avatar:"\u{1F9D8}\u200D\u2640\uFE0F"}].map(G=>{var we=coachPick&&coachPick.name===G.name;return React.createElement("button",{key:G.name,type:"button",onClick:()=>setCoachPick(G),className:["text-left fof-card p-3 flex items-center justify-between gap-3 border",we?"border-cyan-300/35 bg-cyan-400/10":"border-white/10 bg-white/5 hover:bg-white/8"].join(" ")},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-white/10 border border-white/12 flex items-center justify-center text-xl"},G.avatar),React.createElement("div",null,React.createElement("div",{className:"font-extrabold text-white"},G.name),React.createElement("div",{className:"text-xs text-white/60"},G.org," \u2022 ",G.badge))),React.createElement("span",{className:"fof-chip border-white/12 bg-white/5 text-white/70"},"View"))}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-xs text-white/60 font-extrabold tracking-widest"},"REQUEST MESSAGE"),React.createElement("textarea",{value:coachRequestText,onChange:G=>setCoachRequestText(G.target.value),rows:4,className:"mt-2 w-full rounded-2xl border border-white/10 bg-black/30 p-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-cyan-400/30",placeholder:"Tell your coach your goal + constraints (time, injuries, equipment)\u2026"}),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"This is a production-style local stub (Phase 2 wiring will sync to real coach systems).")))))},Ga=({persona:e})=>{var a=Ft==="LINKED",r=String(Di||"").toUpperCase()==="FREE",c=a||!r,h=React.useMemo(()=>new Date,[]),V=React.useCallback(se=>{try{return window.__fof_localDateKey?window.__fof_localDateKey(se):se.toISOString().slice(0,10)}catch(at){return""}},[]),[de,M]=React.useState("LAST_7_DAYS"),[De,Ae]=React.useState(null),Oe=()=>Ae(null),N=React.useMemo(()=>{var se=[];for(var at=6;at>=0;at--){var Pe=new Date;Pe.setDate(Pe.getDate()-at),se.push({d:Pe,k:V(Pe)})}return se},[V,de]),Ne=React.useCallback(se=>{try{return window.__fof_getLogsForDate?window.__fof_getLogsForDate(se):[]}catch(at){return[]}},[]),G=React.useMemo(()=>{var se=N.map(Pe=>{var Wt=Ne(Pe.k)||[];return{...Pe,logs:Wt}}),at=se.flatMap(Pe=>Pe.logs||[]);return{byDay:se,all:at}},[N,Ne]),we=React.useMemo(()=>{var se={WORKOUT:0,NUTRITION:0,RECOVERY:0,METRICS:0,HABITS:0,OTHER:0};return(G.all||[]).forEach(at=>{var Pe=String(at.__type||at.type||"").toUpperCase();Pe.includes("WORK")?se.WORKOUT++:Pe.includes("NUTR")?se.NUTRITION++:Pe.includes("REC")?se.RECOVERY++:Pe.includes("MET")?se.METRICS++:Pe.includes("HAB")?se.HABITS++:se.OTHER++}),se},[G]),$t=React.useMemo(()=>{var se=G.byDay.reduce((Pe,Wt)=>Pe+(Wt.logs&&Wt.logs.length?1:0),0),at=Math.round(se/7*100);return{daysWith:se,pct:at}},[G]),gt=React.useMemo(()=>{var se=qa=>{var oa=Number(qa);return Number.isFinite(oa)?oa:0},at=qa=>{var oa=String(qa.status||qa.state||"").toUpperCase();return qa.done===!0||qa.completed===!0||qa.checked===!0||oa==="DONE"||oa==="COMPLETED"||oa==="YES"||oa==="TRUE"},Pe={nutrition:{meals:0,calories:0,protein:0,carbs:0,fat:0},workout:{sessions:0,minutes:0,strength:0,cardio:0,other:0},recovery:{entries:0,sleepHours:0,sleepQuality:0,soreness:0,stress:0,mood:0,hrv:0,rhr:0},body:{entries:0,latestWeight:null,weight7dAgo:null},habits:{entries:0,done:0,qtyTotal:0,durationMin:0}},Wt=[];(G.all||[]).forEach(qa=>{var Ra,ri,Da,Va,Y,ft,_a,Ja,Ui,qs,_o,ki,Vs,Ke,ua;var oa=String(qa.__type||qa.type||"").toLowerCase();if(oa.includes("nutri"))Pe.nutrition.meals+=1,Pe.nutrition.calories+=se((ri=(Ra=qa.calories)!=null?Ra:qa.kcal)!=null?ri:qa.energy),Pe.nutrition.protein+=se((Da=qa.protein)!=null?Da:qa.p),Pe.nutrition.carbs+=se((Va=qa.carbs)!=null?Va:qa.c),Pe.nutrition.fat+=se((Y=qa.fat)!=null?Y:qa.f);else if(oa.includes("work")){Pe.workout.sessions+=1,Pe.workout.minutes+=se((_a=(ft=qa.durationMin)!=null?ft:qa.minutes)!=null?_a:qa.duration);var ga=String(qa.workoutType||qa.subtype||qa.category||qa.kind||"").toUpperCase();ga.includes("STRENGTH")||ga.includes("LIFT")?Pe.workout.strength+=1:ga.includes("CARDIO")||ga.includes("RUN")||ga.includes("BIKE")||ga.includes("ROW")?Pe.workout.cardio+=1:Pe.workout.other+=1}else if(oa.includes("recov"))Pe.recovery.entries+=1,Pe.recovery.sleepHours+=se((Ui=(Ja=qa.sleepHours)!=null?Ja:qa.sleep)!=null?Ui:qa.hours),Pe.recovery.sleepQuality+=se((qs=qa.sleepQuality)!=null?qs:qa.quality),Pe.recovery.soreness+=se(qa.soreness),Pe.recovery.stress+=se(qa.stress),Pe.recovery.mood+=se(qa.mood),Pe.recovery.hrv+=se(qa.hrv),Pe.recovery.rhr+=se((_o=qa.restingHr)!=null?_o:qa.rhr);else if(oa.includes("body")||oa.includes("metric")){Pe.body.entries+=1;var ga=String(qa.metric||qa.metricType||"").toUpperCase(),Vi=se((Vs=(ki=qa.weight)!=null?ki:qa.value)!=null?Vs:qa.measurement);(ga.includes("WEIGHT")||qa.weight!=null)&&Number.isFinite(Vi)&&Vi>0&&Wt.push({ts:qa.ts||0,v:Vi})}else oa.includes("habit")&&(Pe.habits.entries+=1,at(qa)&&(Pe.habits.done+=1),Pe.habits.qtyTotal+=se((Ke=qa.qty)!=null?Ke:qa.quantity),Pe.habits.durationMin+=se((ua=qa.durationMin)!=null?ua:qa.duration))}),Wt.sort((qa,oa)=>(qa.ts||0)-(oa.ts||0)),Wt.length&&(Pe.body.latestWeight=Wt[Wt.length-1].v,Pe.body.weight7dAgo=Wt[0].v);var Ha=(qa,oa)=>oa>0?qa/oa:0;return{...Pe,nutrition:{...Pe.nutrition,avgCalories:Ha(Pe.nutrition.calories,Math.max(1,7)),avgMealsPerDay:Pe.nutrition.meals/7},workout:{...Pe.workout,avgMinutesPerDay:Pe.workout.minutes/7},recovery:{...Pe.recovery,avgSleepHours:Ha(Pe.recovery.sleepHours,Math.max(1,Pe.recovery.entries)),avgSleepQuality:Ha(Pe.recovery.sleepQuality,Math.max(1,Pe.recovery.entries)),avgSoreness:Ha(Pe.recovery.soreness,Math.max(1,Pe.recovery.entries)),avgStress:Ha(Pe.recovery.stress,Math.max(1,Pe.recovery.entries))},body:{...Pe.body,weightDelta7d:Pe.body.latestWeight!=null&&Pe.body.weight7dAgo!=null?Pe.body.latestWeight-Pe.body.weight7dAgo:null},habits:{...Pe.habits,completionPct:Pe.habits.entries?Math.round(Pe.habits.done/Pe.habits.entries*100):0}}},[G]),_e=React.useMemo(()=>{var se=Math.max(5,Math.min(100,Math.round(Number(xo)||60))),at=Number(String(V(new Date)).replace(/-/g,""))||20250101;return N.map((Wt,Ha)=>{var qa=Math.round(Math.sin((at+Ha)*.21)*6+Math.cos((at+Ha)*.11)*3);return Math.max(5,Math.min(100,se+qa-2))})},[xo,N,V]),ve=React.useMemo(()=>{var se=_e.slice(0,7),at=se.reduce((qa,oa)=>qa+(Number(oa)||0),0),Pe=se.length?Math.round(at/se.length):0;var Wt={v:-1,i:0},Ha={v:999,i:0};return se.forEach((qa,oa)=>{var Ra=Number(qa)||0;Ra>Wt.v&&(Wt={v:Ra,i:oa}),Ra<Ha.v&&(Ha={v:Ra,i:oa})}),{avg:Pe,hi:Wt,lo:Ha,arr:se}},[_e]),me=React.useMemo(()=>{var se={LOW:{n:0,logged:0},MID:{n:0,logged:0},HIGH:{n:0,logged:0}};G.byDay.forEach((Pe,Wt)=>{var Ha=Number(_e[Wt]||0),qa=Ha<=33?"LOW":Ha<=66?"MID":"HIGH";se[qa].n+=1,Pe.logs&&Pe.logs.length&&(se[qa].logged+=1)});var at=Pe=>se[Pe].n?Math.round(se[Pe].logged/se[Pe].n*100):0;return{LOW:{...se.LOW,pct:at("LOW")},MID:{...se.MID,pct:at("MID")},HIGH:{...se.HIGH,pct:at("HIGH")}}},[G,_e]),j=React.useMemo(()=>{try{var se=JSON.parse(localStorage.getItem("fof_profile_v1")||"{}")||{},at=Array.isArray(se.health)?se.health:[],Pe={};return at.forEach(Wt=>{var Ha=String(Wt.metric||Wt.type||"").toLowerCase();if(!Ha)return;var qa=String(Wt.date||Wt.day||"").slice(0,10);if(!qa)return;var oa=Number(Wt.value);Number.isFinite(oa)&&(Pe[Ha]=Pe[Ha]||[],Pe[Ha].push({k:qa,v:oa,note:Wt.note||""}))}),Object.keys(Pe).forEach(Wt=>Pe[Wt].sort((Ha,qa)=>Ha.k<qa.k?-1:1)),Pe}catch(se){return{}}},[De]),je=({title:se,subtitle:at,icon:Pe,value:Wt,meta:Ha,onClick:qa})=>React.createElement("button",{type:"button",onClick:qa,className:"text-left rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 active:scale-[0.99] p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] leading-tight"},se),at?React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},at):null),React.createElement("div",{className:"h-10 w-10 rounded-2xl bg-white/6 border border-white/10 inline-flex items-center justify-center shrink-0"},React.createElement(gi,{name:Pe,size:18,className:"text-white/85"}))),Wt?React.createElement("div",{className:"mt-3 text-[22px] font-extrabold text-white tabular-nums"},Wt):null,Ha?React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},Ha):null),re=({title:se,subtitle:at,children:Pe})=>React.createElement("div",{className:"fixed inset-0 z-[90] bg-black/70 backdrop-blur-sm flex items-center md:items-center justify-center p-3"},React.createElement("div",{className:"w-full max-w-[760px] rounded-t-3xl md:rounded-3xl border border-white/12 bg-black/85 shadow-2xl overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[15px] truncate"},se),at?React.createElement("div",{className:"text-white/55 text-[12px] mt-0.5"},at):null),React.createElement("button",{type:"button",onClick:Oe,className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center","aria-label":"Close",title:"Close"},React.createElement(gi,{name:"X",size:18}))),React.createElement("div",{className:"p-4 max-h-[78vh] overflow-y-auto"},Pe))),Z=()=>React.createElement(re,{title:"Adherence",subtitle:"Last 7 days \u2022 based on logged activity (v1)"},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Days logged"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},$t.daysWith,React.createElement("span",{className:"text-[12px] text-white/55 font-semibold"},"/7")),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Any log counts (workout, nutrition, recovery, metrics, habits)")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Consistency"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},$t.pct,React.createElement("span",{className:"text-[12px] text-white/55 font-semibold"},"%")),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Weekly adherence score"))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Habits completion"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.habits.completionPct,"%"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},gt.habits.done,"/",gt.habits.entries||0," completed")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Training volume"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},Math.round(gt.workout.minutes)," min"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},gt.workout.sessions," sessions logged"))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Daily view"),React.createElement("div",{className:"mt-3 flex gap-2 overflow-x-auto pb-1 -mx-1 px-1"},G.byDay.map((se,at)=>React.createElement("div",{key:se.k,className:"rounded-2xl border px-2 py-2 text-center "+(se.logs&&se.logs.length?"border-emerald-400/25 bg-emerald-400/10":"border-white/10 bg-white/5")},React.createElement("div",{className:"text-[10px] text-white/65 font-bold"},["M","T","W","T","F","S","S"][at]||"\u2022"),React.createElement("div",{className:"mt-1 text-[11px] text-white font-extrabold tabular-nums"},se.logs&&se.logs.length?se.logs.length:0)))),c?React.createElement("div",{className:"mt-3 text-[12px] text-white/70"},$t.pct>=70?"Nice\u2014your habit loop is stable. Keep the same timeslots for your top 2 log types.":$t.pct>=40?"You\u2019re building consistency. Pick a single \u201Canchor\u201D (e.g., recovery check) for low-energy days.":"Start small: log one quick item (recovery or habits) on low-capacity days to keep momentum."):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Tip: log 1 thing/day to unlock more trend detail (paid tiers show \u201Cwhy + next actions\u201D).")),a?React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement(Xo,{tone:"cyan",onClick:()=>Si("Share to coach","Linked-only action placeholder. In production this shares your weekly recap + adherence signals."),className:"w-full justify-center"},"Share to coach"),React.createElement(Xo,{tone:"slate",onClick:()=>Si("Export","Linked-only action placeholder. Export weekly adherence summary (v1)."),className:"w-full justify-center"},"Export summary")):null),Qe=()=>{var se=(G.all&&G.all.length)>0,at=Object.keys(j||{}).some(Pe=>Pe.includes("weight"));return React.createElement(re,{title:"Trends",subtitle:"Last 7 days \u2022 shows only what you\u2019ve logged (v1)"},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Training"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.workout.sessions),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Math.round(gt.workout.minutes)," min total")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Nutrition"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},Math.round(gt.nutrition.avgCalories)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"kcal/day avg \u2022 ",gt.nutrition.meals," meals")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Recovery"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.recovery.avgSleepHours.toFixed(1),"h"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"avg sleep")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Habits"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.habits.completionPct,"%"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"completed"))),React.createElement("div",{className:"mt-3"}),!se&&!at?React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[14px]"},"No data yet"),React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},"Log 1 item today to unlock trends (workouts, nutrition, recovery, metrics)."),React.createElement("div",{className:"mt-3"},React.createElement(Xo,{tone:"cyan",onClick:()=>{try{pt(xt.LOG)}catch(Pe){}},className:"w-full justify-center"},"Go to Log"))):null,React.createElement("div",{className:"grid grid-cols-2 gap-3 mt-0"},[{k:"WORKOUT",t:"Workouts",v:we.WORKOUT},{k:"NUTRITION",t:"Nutrition",v:we.NUTRITION},{k:"RECOVERY",t:"Recovery",v:we.RECOVERY},{k:"METRICS",t:"Body metrics",v:we.METRICS}].map(Pe=>React.createElement("div",{key:Pe.k,className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/60 font-bold"},Pe.t),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},Pe.v),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/35",style:{width:Math.min(100,Pe.v/7*35)+"%"}}))))),at?React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Weight (from Profile Health Data)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Most recent entries:"),React.createElement("div",{className:"mt-2 space-y-2"},(j.weight||j["body weight"]||[]).slice(-5).reverse().map((Pe,Wt)=>React.createElement("div",{key:Wt,className:"rounded-2xl border border-white/10 bg-black/30 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/70 font-bold"},Pe.k),React.createElement("div",{className:"text-[13px] text-white font-extrabold tabular-nums"},Pe.v))))):null,c?React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Why / next actions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},we.RECOVERY===0?"Add a quick recovery check (sleep/stress/soreness) on low-capacity days \u2014 it improves plan decisions.":we.NUTRITION===0?"Log one meal/day for 3 days to make nutrition trends meaningful (no need for perfect tracking).":we.WORKOUT>=3?"Great training volume. Keep recovery logs on the day after harder sessions to protect capacity.":"Pick one category to log consistently (e.g., workouts) and add a second category once it\u2019s automatic.")):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Upgrade/unlock deeper trend explanations and suggested next actions."))},nt=()=>React.createElement(re,{title:"Weekly recap",subtitle:"Last 7 days \u2022 quick summary (v1)"},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Total logs"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},(G.all||[]).length)),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Days active"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},$t.daysWith,React.createElement("span",{className:"text-[12px] text-white/55 font-semibold"},"/7")))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Training minutes"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},Math.round(gt.workout.minutes)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},gt.workout.sessions," sessions \u2022 avg ",gt.workout.avgMinutesPerDay.toFixed(0)," min/day")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Nutrition"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},Math.round(gt.nutrition.calories)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"kcal total \u2022 avg ",Math.round(gt.nutrition.avgCalories)," /day")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Recovery"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.recovery.avgSleepHours.toFixed(1),"h"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"avg sleep \u2022 soreness ",gt.recovery.avgSoreness.toFixed(1))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Habits"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},gt.habits.completionPct,"%"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},gt.habits.done,"/",gt.habits.entries||0," completed"))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"What happened"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},[{t:"Workouts",v:we.WORKOUT},{t:"Nutrition logs",v:we.NUTRITION},{t:"Recovery checks",v:we.RECOVERY},{t:"Body metrics",v:we.METRICS}].map((se,at)=>React.createElement("div",{key:at,className:"rounded-2xl border border-white/10 bg-black/30 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/65 font-bold"},se.t),React.createElement("div",{className:"text-[13px] text-white font-extrabold tabular-nums"},se.v)))),React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},(G.all||[]).length===0?"No logs this week yet. Start with one quick entry today.":we.WORKOUT>=3&&we.RECOVERY===0?"Strong training week. Add recovery checks to keep capacity stable.":we.NUTRITION>=3?"Nice nutrition consistency. Keep it simple: repeat 2\u20133 \u201Cgo-to\u201D meals.":"Good progress. Consistency beats intensity \u2014 aim for 4/7 days logged next week.")),a?React.createElement("div",{className:"mt-3"},React.createElement(Xo,{tone:"cyan",onClick:()=>Si("Share weekly recap","Linked-only placeholder. Shares a concise recap to your coach."),className:"w-full justify-center"},"Share recap to coach")):null),Lt=()=>React.createElement(re,{title:"Capacity trend",subtitle:"Last 7 days \u2022 based on Capacity score (v1)"},React.createElement("div",{className:"grid grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Average"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},ve.avg,React.createElement("span",{className:"text-[12px] text-white/55 font-semibold"},"/100"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Best"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][ve.hi.i]||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 tabular-nums"},ve.hi.v,"/100")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Lowest"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][ve.lo.i]||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 tabular-nums"},ve.lo.v,"/100"))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"7-day trend"),React.createElement("div",{className:"text-[10px] font-mono text-white/55"},"v1")),React.createElement("div",{className:"mt-3 flex items-center gap-1 h-16"},ve.arr.map((se,at)=>React.createElement("div",{key:at,className:"flex-1 rounded-md bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/35",style:{height:(Number(se)||0)+"%"}})))),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},c?"On low-capacity days, swap to recovery/mobility and keep intensity moderate.":"Upgrade to see deeper drivers and recommended adjustments."))),ze=()=>React.createElement(re,{title:"Adherence vs Capacity",subtitle:"Last 7 days \u2022 pattern check (v1)"},React.createElement("div",{className:"grid grid-cols-1 gap-3"},[{z:"HIGH",t:"High capacity days",d:"67\u2013100",s:me.HIGH},{z:"MID",t:"Mid capacity days",d:"34\u201366",s:me.MID},{z:"LOW",t:"Low capacity days",d:"0\u201333",s:me.LOW}].map((se,at)=>React.createElement("div",{key:se.z,className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px]"},se.t),React.createElement("div",{className:"text-white/55 text-[12px] mt-0.5"},"Capacity ",se.d," \u2022 ",se.s.n," days")),React.createElement("div",{className:"text-white font-extrabold text-[18px] tabular-nums"},se.s.pct,"%")),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/35",style:{width:se.s.pct+"%"}})),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Logged on ",se.s.logged," of ",se.s.n," days.")))),c?React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Interpretation"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},me.LOW.pct<me.HIGH.pct?"You log less on low-capacity days. Add a 30-second recovery check or habit tick to keep your streak alive.":"Nice\u2014your logging stays consistent even on low-capacity days. This improves planning accuracy.")):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Upgrade to unlock \u201Cwhy + next actions\u201D insights."));return React.createElement("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-28 space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold tracking-tight text-[18px]"},"Insights"),React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},a?"Linked \u2022 Shareable weekly summary":c?"Trial/Paid \u2022 Deeper explanations":"Free \u2022 Surface-level summaries"," \u2022 Last 7 days")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full bg-white/6 border border-white/10 text-white/80 text-[11px] font-bold"},"7D"),React.createElement("button",{type:"button",onClick:()=>Si("Insights v1","Read-only insights from your logs + capacity trend. No editing here (v1)."),className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center","aria-label":"Info",title:"Info"},React.createElement(gi,{name:"Info",size:18}))))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement(je,{title:"Adherence",subtitle:"Days logged",icon:"Target",value:`${$t.daysWith}/7`,meta:c?$t.pct>=70?"Strong consistency":"Build your streak":"Surface summary",onClick:()=>Ae("ADH")}),React.createElement(je,{title:"Trends",subtitle:"What you\u2019ve tracked",icon:"TrendingUp",value:`${gt.workout.sessions}W \u2022 ${gt.nutrition.meals}M`,meta:c?"Workouts & meals logged (7D)":"Surface summary",onClick:()=>Ae("TRN")}),React.createElement(je,{title:"Weekly recap",subtitle:"Quick summary",icon:"Sparkles",value:`${Math.round(gt.workout.minutes)} min \u2022 ${Math.round(gt.nutrition.calories)} kcal`,meta:c?`Sleep avg ${gt.recovery.avgSleepHours.toFixed(1)}h \u2022 Habits ${gt.habits.completionPct}%`:"Surface summary",onClick:()=>Ae("REC")}),React.createElement(je,{title:"Capacity trend",subtitle:"Last 7 days",icon:"Activity",value:`${Math.round(xo||0)}`,meta:c?"Capacity (7D trend)":"Surface summary",onClick:()=>Ae("CAP")})),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px]"},"Adherence vs Capacity"),React.createElement("div",{className:"text-white/55 text-[12px] mt-0.5"},"Patterns across LOW/MID/HIGH capacity days")),React.createElement("button",{type:"button",onClick:()=>Ae("AVC"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"View")),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},[{z:"LOW",v:me.LOW.pct},{z:"MID",v:me.MID.pct},{z:"HIGH",v:me.HIGH.pct}].map(se=>React.createElement("div",{key:se.z,className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},se.z),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white tabular-nums"},se.v,"%"),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/35",style:{width:se.v+"%"}}))))),c?null:React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Upgrade to unlock \u201Cwhy + next actions\u201D inside this tile.")),(G.all||[]).length===0?React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[14px]"},"Empty state"),React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},"No logs in the last 7 days. Log one item today to activate Insights."),React.createElement("div",{className:"mt-3"},React.createElement(Xo,{tone:"cyan",onClick:()=>{try{pt(xt.LOG)}catch(se){}},className:"w-full justify-center"},"Go to Log"))):null,De==="ADH"?React.createElement(Z,null):null,De==="TRN"?React.createElement(Qe,null):null,De==="REC"?React.createElement(nt,null):null,De==="CAP"?React.createElement(Lt,null):null,De==="AVC"?React.createElement(ze,null):null)},ca=({persona:e})=>{var a=(r,c)=>{try{Si(r,c)}catch(h){}};return React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 overflow-hidden"},React.createElement("div",{className:"relative p-4 bg-gradient-to-br from-[#0b1220] via-[#111827] to-[#020617]"},React.createElement("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(circle_at_20%_20%,rgba(244,114,182,0.18),transparent_45%),radial-gradient(circle_at_85%_30%,rgba(56,189,248,0.18),transparent_55%),radial-gradient(circle_at_70%_90%,rgba(34,197,94,0.16),transparent_50%)]"}),React.createElement("div",{className:"relative"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold tracking-tight text-[18px]"},"Coach"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Messages, check-ins, and guidance (UI shell).")),React.createElement("div",{className:"flex flex-wrap gap-2 justify-end"},React.createElement(No,null,(e==null?void 0:e.clientMode)||"INDEPENDENT"),React.createElement(No,null,(e==null?void 0:e.tier)||"FREE"))),React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>a("Messages","Messaging is implemented in the coach/pro surface; this is a placeholder."),className:"touch-manipulation rounded-3xl border border-white/12 bg-white/10 hover:bg-white/14 p-4 text-left active:scale-[0.99]"},React.createElement("div",{className:"text-[14px]"},"\u{1F4AC}"),React.createElement("div",{className:"mt-2 text-white font-extrabold text-[12px]"},"Messages"),React.createElement("div",{className:"mt-1 text-[10px] text-white/60"},"Chat + notes")),React.createElement("button",{type:"button",onClick:()=>a("Check-in","Check-ins are wired in later steps."),className:"touch-manipulation rounded-3xl border border-white/12 bg-black/20 hover:bg-black/25 p-4 text-left active:scale-[0.99]"},React.createElement("div",{className:"text-[14px]"},"\u2705"),React.createElement("div",{className:"mt-2 text-white font-extrabold text-[12px]"},"Check\u2011in"),React.createElement("div",{className:"mt-1 text-[10px] text-white/60"},"Weekly form")))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold tracking-tight text-[15px]"},"Quick tools"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},[["\u{1F4C5}","Bookings","Sessions & calls"],["\u{1F4CC}","Tasks","Your next actions"],["\u{1F4C8}","Progress","Coach summary"],["\u{1F9FE}","Notes","Feedback history"]].map((r,c)=>React.createElement("button",{key:c,type:"button",onClick:()=>a(r[1],"Placeholder only."),className:"touch-manipulation rounded-3xl border border-white/10 bg-black/20 hover:bg-black/25 p-3 text-left active:scale-[0.99]"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[14px]"},r[0]),React.createElement("div",{className:"text-white font-extrabold text-[12px]"},r[1])),React.createElement("div",{className:"mt-1 text-[10px] text-white/60"},r[2])))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/70"},"Coach surface stays available for all clients, but features depend on client mode & tier (later steps)."))))},La=({active:e,children:a,onClick:r,title:c,className:h=""})=>React.createElement("button",{type:"button",onClick:r,title:c,className:"px-3 py-2 rounded-2xl border text-[12px] font-extrabold transition touch-manipulation "+(e?"border-cyan-300/35 bg-cyan-400/12 text-white shadow-[0_0_0_1px_rgba(77,233,255,0.12)]":"border-white/12 bg-white/6 hover:bg-white/10 text-white/80")+(h?" "+h:"")},a),fi=({persona:e,todaySubTab:a,setTodaySubTab:r})=>{var c=Ft==="LINKED",h="fof_entitlements_v1",V=()=>{try{var Y=localStorage.getItem(h);if(!Y)return{subscriptionStatus:"ACTIVE",tier:Di};var ft=JSON.parse(Y);return{subscriptionStatus:ft.subscriptionStatus||"ACTIVE",tier:ft.tier||Di,trialStartAt:ft.trialStartAt||null,trialEndAt:ft.trialEndAt||null}}catch(Y){return{subscriptionStatus:"ACTIVE",tier:Di}}},[de,M]=React.useState(V);React.useEffect(()=>{var Y=()=>{try{M(V())}catch(ft){}};try{window.addEventListener("storage",Y)}catch(ft){}try{window.addEventListener("flowofit:entitlementsUpdated",Y)}catch(ft){}return Y(),()=>{try{window.removeEventListener("storage",Y)}catch(ft){}try{window.removeEventListener("flowofit:entitlementsUpdated",Y)}catch(ft){}}},[]);var De=!c&&Di==="FREE",Ae=Di==="TRIAL"||Di==="AI"||Di==="PAID"||Di==="PREMIUM"||Di==="PRO",Oe="fof_coach_last_seen_v1",N="fof_coach_pending_open_v1",[Ne,G]=React.useState(()=>{try{if(typeof Xa!="function")return 0;var Y=Xa()||[],ft=Number(localStorage.getItem(Oe)||0);return(Y||[]).filter(_a=>Number(_a&&_a.ts?new Date(_a.ts).getTime():0)>ft).length}catch(Y){return 0}});React.useEffect(()=>{if(!c)return;var Y=()=>{try{if(typeof Xa!="function")return G(0);var ft=Xa()||[],_a=Number(localStorage.getItem(Oe)||0),Ja=(ft||[]).filter(Ui=>Number(Ui&&Ui.ts?new Date(Ui.ts).getTime():0)>_a).length;G(Ja)}catch(ft){}};try{window.addEventListener("flowofit:coachChatUpdated",Y)}catch(ft){}try{window.addEventListener("storage",Y)}catch(ft){}return Y(),()=>{try{window.removeEventListener("flowofit:coachChatUpdated",Y)}catch(ft){}try{window.removeEventListener("storage",Y)}catch(ft){}}},[c]);var we=React.useMemo(()=>{try{var Y=new Date,ft=Y.getFullYear(),_a=String(Y.getMonth()+1).padStart(2,"0"),Ja=String(Y.getDate()).padStart(2,"0"),qs=`fof_checkin_v1::${e&&e.id?String(e.id):"demo_surface"}::${ft}-${_a}-${Ja}`;return!!localStorage.getItem(qs)}catch(Y){return!1}},[e]),gt=Number(typeof xo!="undefined"?xo:typeof capacityScore!="undefined"?capacityScore:0)||0,_e=gt<=33?"LOW":gt<=66?"MID":"HIGH",ve=_e==="HIGH"?"bg-emerald-400/15 text-emerald-200 border-emerald-400/25":_e==="MID"?"bg-amber-400/15 text-amber-200 border-amber-400/25":"bg-rose-400/15 text-rose-200 border-rose-400/25",[me,j]=React.useState(0);React.useEffect(()=>{var Y=()=>j(ft=>ft+1);try{window.addEventListener("flowofit:logsUpdated",Y)}catch(ft){}return()=>{try{window.removeEventListener("flowofit:logsUpdated",Y)}catch(ft){}}},[]);var je=e&&(e.surfaceKey||e.clientId||e.id)||"demo_surface",re=typeof Qi=="function"?Qi():new Date().toISOString().slice(0,10),[Z,Qe]=React.useState(0);React.useEffect(()=>{var Y=()=>Qe(ft=>ft+1);try{window.addEventListener("flowofit:habitsUpdated",Y)}catch(ft){}return()=>{try{window.removeEventListener("flowofit:habitsUpdated",Y)}catch(ft){}}},[]),React.useEffect(()=>{try{typeof window.__fof_habits_tryTickFromActivity=="function"&&window.__fof_habits_tryTickFromActivity(je,re)}catch(Y){}},[me,Z,je,re]);var nt=React.useMemo(()=>{try{return typeof window.__fof_habits_getStreak=="function"?window.__fof_habits_getStreak(je):{count:0}}catch(Y){return{count:0}}},[Z,me,je]),Lt=React.useMemo(()=>{try{return typeof window.__fof_habits_weekCount=="function"?window.__fof_habits_weekCount(je,re,7):0}catch(Y){return 0}},[Z,me,je,re]),ze=()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"HABITS_STREAK_SHEET_V1",props:{surfaceKey:je}}}))}catch(Y){}},[Le,se]=React.useState(!1),at=Y=>{try{window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:Y}}))}catch(ft){}},Pe=Y=>{try{window.__FOF&&typeof window.__FOF.setClientTab=="function"&&window.__FOF.setClientTab(Y)}catch(ft){}},Wt=()=>at("PLAN"),Ha=Y=>{at("LOG");try{window.dispatchEvent(new CustomEvent("flowofit:logFocus",{detail:{kind:Y}}))}catch(ft){}},qa=Y=>{Pe("LIBRARY");try{Y&&window.dispatchEvent(new CustomEvent("flowofit:librarySegment",{detail:{segment:Y}}))}catch(ft){}},oa=()=>{var Y=window.__FOF_CLIENT_CONTEXT||{},ft=Y&&Y.entitlements?String(Y.entitlements.yogaAccess||""):"",_a=String(ft||"NONE").toUpperCase();try{_a==="FULL"||_a==="LIMITED"?window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"YC_Session_Selection",props:{yogaAccess:_a,from:"TODAY"}}})):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"YC_Access_Check",props:{yogaAccess:_a,from:"TODAY"}}}))}catch(Ja){if(_a==="FULL")qa("YOGA");else try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"UpsellSheet",props:{featureKey:"YOGA_FULL",meta:{from:"TODAY_TILE",yogaAccess:_a,ctx:Y}}}}))}catch(Ui){}}},Ra=(()=>{var Y;try{var ft=window.__FOF_CLIENT_CONTEXT||{},_a=String(((Y=ft==null?void 0:ft.entitlements)==null?void 0:Y.yogaAccess)||"NONE").toUpperCase();return _a==="FULL"||_a==="LIMITED"||_a==="NONE"?_a:"NONE"}catch(ft){return"NONE"}})(),ri=Ra==="NONE"?"ADD":Ra,Da=Ra==="FULL"?"Full library \u2022 recovery & mobility":Ra==="LIMITED"?"Limited sessions \u2022 upgrade for full":"Add Yoga to unlock sessions",Va=()=>{var Y=e&&(e.surfaceKey||e.clientId||e.id)||"demo_surface",ft="fof_active_session_v1::"+Y;var _a=null;try{_a=JSON.parse(localStorage.getItem(ft)||"null")}catch(ki){_a=null}if(_a&&_a.id){var ki=new Date().toISOString().slice(0,10);try{r&&r(null)}catch(Vs){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WORKOUT_LOGGER",props:{dateKey:ki,from:"TODAY_PRIMARY_CTA",surfaceKey:Y,sessionId:_a.id}}}))}catch(Vs){}try{window.__toast&&window.__toast("Resuming session")}catch(Vs){}return}var Ja="sess_"+Date.now(),Ui={id:Ja,startedAt:Date.now(),surfaceKey:Y,focusPillar:"FITNESS",capZone:"GREEN",source:c?"COACH":isPro?"AI":"BASIC",plannedDate:new Date().toISOString().slice(0,10),plannedWeekday:new Date().getDay(),title:"Training session"+(c?" (coach plan)":isPro?" (AI-assisted)":" (basic)"),summary:"Strength \u2022 ~45 min",exercises:[{id:"ex1",name:"Warm-up",sets:[{reps:"5\u20138 min",rpe:""}],note:"Mobility + activation"},{id:"ex2",name:"Main block",sets:[{reps:"6",rpe:"7"},{reps:"6",rpe:"7"},{reps:"6",rpe:"7"}],note:"Controlled tempo"},{id:"ex3",name:"Accessory",sets:[{reps:"10",rpe:"7"},{reps:"10",rpe:"7"}],note:"Move smoothly"},{id:"ex4",name:"Cooldown",sets:[{reps:"5\u20138 min",rpe:""}],note:"Breath + stretch"}]},qs={};try{(Ui.exercises||[]).forEach(ki=>{var Vs=Array.isArray(ki.sets)?ki.sets:[];qs[ki.id]={name:ki.name,note:ki.note||"",sets:Vs.map((Ke,ua)=>({idx:ua,weight:"",reps:Ke&&(Ke.reps||Ke.t)?String(Ke.reps||Ke.t):"",rpe:Ke&&Ke.rpe?String(Ke.rpe):"",done:!1}))}})}catch(ki){}try{localStorage.setItem("fof_session_log_v1::"+Ui.id,JSON.stringify(qs))}catch(ki){}try{localStorage.setItem(ft,JSON.stringify(Ui))}catch(ki){}var _o=new Date().toISOString().slice(0,10);try{r&&r(null)}catch(ki){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WORKOUT_LOGGER",props:{dateKey:_o,from:"TODAY_PRIMARY_CTA",surfaceKey:Y,sessionId:Ja}}}))}catch(ki){}try{window.__toast&&window.__toast("Session opened")}catch(ki){}};return React.createElement("div",{className:"max-w-5xl mx-auto px-4 pt-5 pb-32"},(()=>{var Y=String(de&&de.subscriptionStatus?de.subscriptionStatus:"ACTIVE").toUpperCase();if(!(Y==="IN_GRACE"||Y==="DUNNING_LOCKED"))return null;var _a=Y==="DUNNING_LOCKED";return React.createElement("div",{className:"mb-4 rounded-3xl border px-4 py-4 "+(_a?"border-rose-400/25 bg-rose-400/10":"border-amber-300/25 bg-amber-300/10")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},_a?"Account locked":"Grace period active"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-snug"},_a?"Premium features are paused. Fix payment to restore access.":"You still have access. Update payment to avoid interruption.")),React.createElement("span",{className:"shrink-0 text-[10px] font-bold px-2 py-1 rounded-full bg-white/10 border border-white/10 text-white/70"},_a?"LOCKED":"IN GRACE")),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:_a?"DunningFlow_DF_Client_Unlock_Triage":"Payments_Module_PM_Entry",props:{from:"TODAY_DUNNING_BANNER",reason:_a?"DUNNING_LOCKED":"IN_GRACE"}}}))}catch(Ja){}},className:"w-full rounded-2xl bg-white/10 border border-white/10 px-4 py-3 text-[13px] font-semibold text-white active:scale-[0.99]"},"Fix payment")))})(),React.createElement(gr,{className:"space-y-3"},React.createElement(ul,{tier:Di,ent:de,isLinked:c}),React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:ze,className:"inline-flex items-center gap-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-[12px] text-white/85 font-semibold",title:"Consistency"},React.createElement("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-xl bg-white/10 border border-white/10 text-[12px]"},"\u{1F525}"),React.createElement("span",{className:"truncate"},Math.max(0,Number((nt==null?void 0:nt.count)||0))>0?React.createElement(React.Fragment,null,"Showed up ",React.createElement("span",{className:"text-white font-extrabold"},Math.max(0,Number((nt==null?void 0:nt.count)||0)))):React.createElement(React.Fragment,null,"Start your streak"))),React.createElement("div",{className:"text-[11px] text-white/60"},"This week: ",React.createElement("span",{className:"text-white font-semibold"},Lt,"/7"))),c?React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"RehabHome_Module",props:{from:"TODAY_QUICK"}}}))}catch(Y){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/8 px-3 py-3 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Rehab & Pain"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},"Quick PROMs \u2192 coach")),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"Discovery_Hub_DH_Entry",props:{from:"TODAY_QUICK"}}}))}catch(Y){}},className:"rounded-2xl border border-white/12 bg-white/5 hover:bg-white/8 px-3 py-3 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Discover"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},"Programs \u2022 challenges"))):null,React.createElement(Dn,{title:"Today\u2019s best action",subtitle:"Execution lives in Today (Plan stays strategic)."},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white text-[18px] font-extrabold leading-tight"},"Start / Continue Today\u2019s Session"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Do the next best step for today. Capacity will modulate intensity automatically.")),React.createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 justify-end"},React.createElement(Xo,{tone:"lime",icon:"Play",onClick:Va,className:"w-full sm:w-auto"},"Start / Continue Today\u2019s Session"),React.createElement("button",{type:"button",onClick:()=>{try{r(null),pt(xt.PLAN)}catch(Y){}},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 font-semibold w-full sm:w-auto"},"View plan")))),React.createElement(Dn,{title:"On track this week",subtitle:"A simple execution snapshot \u2014 no pressure.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"WEEK")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2"},[{t:"Sessions",v:"3/5",tone:"good"},{t:"Recovery",v:"2/3",tone:"warn"},{t:"Nutrition",v:"4/7",tone:"brand"}].map(Y=>React.createElement("div",{key:Y.t,className:"rounded-2xl border px-3 py-3 "+(Y.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":Y.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},Y.t),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},Y.v)))),React.createElement("div",{className:"mt-3 w-full max-w-full overflow-x-hidden flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Tip: consistency beats intensity. Capacity modulates effort."),React.createElement("button",{type:"button",onClick:()=>Si("On track this week","In production: adherence vs targets across training, recovery, and nutrition, with the next smallest win highlighted."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 font-semibold"},"Details"))),c||Ae?React.createElement(Dn,{title:"Add secondary activity",subtitle:"Optional extra session \u2014 checked for conflicts with today\u2019s plan.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"9.3.4")},React.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},React.createElement(Xo,{tone:"brand",icon:"Plus",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:c?"LC_Add_Secondary_Activity_NEW":"IC_Add_Secondary_Activity_NEW",props:{from:"TODAY",via:"TodayScreen"}}}))}catch(Y){}},className:"w-full sm:w-auto"},"Add Secondary Activity"),React.createElement("button",{type:"button",onClick:()=>Si("Secondary Activity Check","When you add a second activity, FlowOFit checks today\u2019s primary load + capacity zone and suggests safer alternatives if needed. You can still override (logged)."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 font-semibold w-full sm:w-auto"},"How it works"))):null,c?React.createElement(React.Fragment,null,React.createElement(Wn,{onClick:()=>{try{try{localStorage.setItem(Oe,String(Date.now()))}catch(Y){}try{try{var Y={view:"INBOX",openInbox:!0};window.__fof_pendingCoachOpen=Y,localStorage.setItem(N,JSON.stringify(Y))}catch(Y){}typeof window.__fof_openCoach=="function"?window.__fof_openCoach({view:"INBOX",openInbox:!0}):window.dispatchEvent(new CustomEvent("flowofit:coach:open",{detail:{view:"INBOX",openInbox:!0}}))}catch(Y){}at("COACH")}catch(Y){}},className:"border-brand/30 bg-gradient-to-br from-brand/14 via-white/6 to-black/10 py-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-11 h-11 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center text-[13px] font-extrabold text-white/90"},e&&e.coachName?String(e.coachName).trim().slice(0,1).toUpperCase():"C"),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-widest text-white/60"},"Coach\u2011Led"),React.createElement("div",{className:"mt-0.5 text-[15px] font-extrabold tracking-tight text-white truncate"},e&&e.coachName?e.coachName:"Coach"),React.createElement("div",{className:"text-[12px] text-white/65 truncate"},e&&e.coachBrand?e.coachBrand:"Your program \u2022 check\u2011ins \u2022 accountability"))),React.createElement("span",{className:"shrink-0 px-3 py-1.5 rounded-full border border-brand/40 bg-brand/15 text-[11px] font-extrabold text-white"},Ne>0?`${Ne} new`:"Message"))),React.createElement(Nn,{coachName:e&&e.coachName?e.coachName:"Coach",title:"Today\u2019s assigned session",note:e&&e.coachNote?e.coachNote:"Coach notes included \u2022 tap to start",onPress:()=>{try{r(null),at("PLAN")}catch(Y){}}}),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{try{try{var Y={view:"HOME",openPlanUpdate:!0};window.__fof_pendingCoachOpen=Y,localStorage.setItem(N,JSON.stringify(Y))}catch(Y){}window.dispatchEvent(new CustomEvent("flowofit:coach:open",{detail:{view:"HOME",openPlanUpdate:!0}}))}catch(Y){}at("COACH")}catch(Y){}},className:"touch-manipulation rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"text-[12px] font-extrabold tracking-widest text-white/60"},"REQUEST"),React.createElement("div",{className:"mt-0.5 text-[14px] font-extrabold text-white"},"Plan update"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/65"},"Intensity \u2022 swaps \u2022 schedule")),React.createElement("button",{type:"button",onClick:()=>{try{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"CHECKIN_SHEET",props:{from:"HOME_LINKED_QUICK"}}}))}catch(Y){}}catch(Y){}},className:"touch-manipulation rounded-2xl border border-white/12 bg-white/6 hover:bg-white/10 px-4 py-3 text-left"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold tracking-widest text-white/60"},"TODAY"),React.createElement("div",{className:"mt-0.5 text-[14px] font-extrabold text-white"},"Check\u2011in")),React.createElement("span",{className:"px-2 py-1 rounded-full text-[11px] font-extrabold border "+(we?"border-emerald-400/25 bg-emerald-400/10 text-emerald-200":"border-white/12 bg-white/5 text-white/70")},we?"Done":"Due")),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Energy \u2022 pain \u2022 sleep \u2022 adherence"))),React.createElement(nr,{icon:"\u2705",title:"Daily check\u2011in",subtitle:"Pain \u2022 energy \u2022 sleep \u2022 adherence (sent to your coach)",onPress:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"CHECKIN_SHEET",props:{from:"HOME_LINKED"}}}))}catch(Y){try{at("COACH")}catch(ft){}}},right:React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")}),React.createElement(nr,{icon:"\u2728",title:"Ask AI (coach\u2011aware)",subtitle:"Explain plan \u2022 swap movement \u2022 get guidance (coach can see)",onPress:()=>{try{var Y=String(Di||"FREE").toUpperCase();if(Y==="PAID"||Y==="TRIAL"){window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"AI_COACH_SHEET_V1",props:{from:"HOME_LINKED"}}}));return}try{_n&&_n("AI_COACH",{from:"HOME_LINKED"})}catch(_a){}}catch(Y){}}}),React.createElement(nr,{icon:"\u26A1",title:"Capacity: "+gt+"/100",subtitle:"Capacity is a modifier \u2014 it can adjust today\u2019s load",onPress:()=>{try{se(!0)}catch(Y){}},right:React.createElement("span",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold uppercase tracking-widest "+ve},_e)}),React.createElement(nr,{icon:"\u{1F3AF}",title:"Manage goals",subtitle:(()=>{var Y,ft;try{var _a=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():{},Ja=String(((Y=_a==null?void 0:_a.goals)==null?void 0:Y.focus)||(_a==null?void 0:_a.emphasis)||localStorage.getItem("fof_goal_focus_v1")||"FITNESS").toUpperCase(),Ui=String(((ft=_a==null?void 0:_a.goals)==null?void 0:ft.priority)||(_a==null?void 0:_a.goalPriority)||localStorage.getItem("fof_goal_priority_v1")||"PERFORMANCE").toUpperCase();return`Update focus & priorities \u2022 Current: ${Ja} \u2022 ${Ui}`}catch(_a){return"Update focus & priorities (feeds plan + yoga gating)"}})(),onPress:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openGoalManager)==null||ft.call(Y)}catch(_a){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{id:"GOAL_MANAGER",props:{from:"TodayPrimaryGoals"}}}))}catch(Ja){}}},right:React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")}),React.createElement("div",{className:"pt-1 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between px-1"},React.createElement("div",{className:"text-[11px] tracking-widest text-white/50 font-extrabold"},"QUICK LOG"),React.createElement("button",{type:"button",onClick:()=>{try{at("LOG")}catch(Y){}},className:"text-[11px] font-extrabold text-white/60 hover:text-white"},"View history \u2192")),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement(hi,{title:"Log session",subtitle:"Sets \u2022 reps \u2022 duration",icon:"Activity",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickLogSheet)==null||ft.call(Y,"WORKOUT",null)}catch(_a){}}}),React.createElement(hi,{title:"Log food",subtitle:"Calories \u2022 macros \u2022 photo",icon:"Utensils",onClick:()=>{var Y,ft;try{window.__fof_trackHubPage="NUTRITION",window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"LOG"}}));var _a=new Date().toISOString().slice(0,10);(ft=(Y=window.__fof_openers)==null?void 0:Y.openFoodAddSheet)==null||ft.call(Y,_a,{meal:"BREAKFAST"})}catch(_a){}}}),React.createElement(hi,{title:"Recovery",subtitle:"Sleep \u2022 soreness \u2022 metrics",icon:"HeartPulse",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickLogSheet)==null||ft.call(Y,"RECOVERY",null)}catch(_a){}}}),React.createElement(hi,{title:"Goals",subtitle:"Set focus & priorities",icon:"Target",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openGoalManager)==null||ft.call(Y)}catch(_a){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{id:"GOAL_MANAGER",props:{from:"TodayScreen"}}}))}catch(Ja){}}}}),React.createElement(hi,{title:"Quick note",subtitle:"Message your coach",icon:"MessageCircle",onClick:()=>{try{at("COACH")}catch(Y){}}}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] tracking-widest text-white/50 font-extrabold"},"MODULES"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement(hi,{title:"Plan",subtitle:"Week view \u2022 schedule",icon:"Calendar",onClick:()=>{try{Wt()}catch(Y){}}}),React.createElement(hi,{title:"Nutrition",subtitle:"Planner \u2022 logs",icon:"Apple",onClick:()=>{try{Ha("FOOD")}catch(Y){}}}),React.createElement(hi,{title:"Yoga",subtitle:Da,tag:ri,icon:"Lotus",onClick:()=>{try{oa()}catch(Y){}}}),React.createElement(hi,{title:"Goals",subtitle:"Set focus & priorities",icon:"Target",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openGoalManager)==null||ft.call(Y)}catch(_a){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{id:"GOAL_MANAGER",props:{from:"TodayModules"}}}))}catch(Ja){}}}}),React.createElement(hi,{title:"Insights",subtitle:"Trends \u2022 recap",icon:"BarChart3",onClick:()=>{try{at("INSIGHTS")}catch(Y){}}}),React.createElement(hi,{title:"More",subtitle:"Library \u2022 Coach \u2022 AI Search",icon:"MoreHorizontal",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"MODULE_MORE_SHEET_V1",props:{tier:Di}}}))}catch(Y){}}}))))):React.createElement(React.Fragment,null,React.createElement(fl,{title:_e==="LOW"?"Recovery session \u2022 20\u201330 min":_e==="MID"?"Planned workout \u2022 35\u201350 min":"Progression workout \u2022 45\u201360 min",subtitle:"One clear action to execute now",onPress:()=>{try{Wt()}catch(Y){}},right:React.createElement("span",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold uppercase tracking-widest "+ve},_e)}),React.createElement(nr,{icon:"\u{1F4C5}",title:"View today\u2019s plan",subtitle:"See what\u2019s scheduled and why it was adjusted",onPress:()=>{try{Wt()}catch(Y){}}}),React.createElement(nr,{icon:"\u26A1",title:"Capacity: "+gt+"/100",subtitle:"Capacity is a modifier (not the identity) \u2014 tap for guidance",onPress:()=>{try{se(!0)}catch(Y){}},right:React.createElement("span",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold uppercase tracking-widest "+ve},_e)}),_e==="LOW"?React.createElement(nr,{icon:"\u{1F9D8}",title:"Recovery actions for today",subtitle:"Quick 5\u201315 min options \u2022 no logging complexity",onPress:()=>{try{var Y=window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay:null;Y?Y("RECOVERY_ACTIONS_V1",{from:"TODAY_LOW_CAPACITY_TILE"}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"RECOVERY_ACTIONS_V1",props:{from:"TODAY_LOW_CAPACITY_TILE"}}}))}catch(Y){}},right:React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")}):null,React.createElement(nr,{icon:"\u{1F3AF}",title:"Manage goals",subtitle:(()=>{var Y,ft;try{var _a=typeof window.__fof_getClientContext=="function"?window.__fof_getClientContext():{},Ja=String(((Y=_a==null?void 0:_a.goals)==null?void 0:Y.focus)||(_a==null?void 0:_a.emphasis)||localStorage.getItem("fof_goal_focus_v1")||"FITNESS").toUpperCase(),Ui=String(((ft=_a==null?void 0:_a.goals)==null?void 0:ft.priority)||(_a==null?void 0:_a.goalPriority)||localStorage.getItem("fof_goal_priority_v1")||"PERFORMANCE").toUpperCase();return`Update focus & priorities \u2022 Current: ${Ja} \u2022 ${Ui}`}catch(_a){return"Update focus & priorities (feeds plan + yoga gating)"}})(),onPress:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openGoalManager)==null||ft.call(Y)}catch(_a){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{id:"GOAL_MANAGER",props:{from:"TodayPrimaryGoals"}}}))}catch(Ja){}}},right:React.createElement("span",{className:"text-white/55 text-[12px]"},"\u203A")}),React.createElement("div",{className:"pt-1 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between px-1"},React.createElement("div",{className:"text-[11px] tracking-widest text-white/50 font-extrabold"},"QUICK LOG"),React.createElement("button",{type:"button",onClick:()=>{try{at("LOG")}catch(Y){}},className:"text-[11px] font-extrabold text-white/60 hover:text-white"},"View history \u2192")),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement(hi,{title:"Quick workout",subtitle:"Log sets \u2022 reps \u2022 duration",icon:"Activity",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickLogSheet)==null||ft.call(Y,"WORKOUT",null)}catch(_a){}}}),React.createElement(hi,{title:"Quick food",subtitle:"Calories \u2022 macros \u2022 photo",icon:"Utensils",onClick:()=>{var Y,ft;try{window.__fof_trackHubPage="NUTRITION",window.dispatchEvent(new CustomEvent("flowofit:navigateIntent",{detail:{to:"LOG"}}));var _a=new Date().toISOString().slice(0,10);(ft=(Y=window.__fof_openers)==null?void 0:Y.openFoodAddSheet)==null||ft.call(Y,_a,{meal:"BREAKFAST"})}catch(_a){}}}),React.createElement(hi,{title:"Quick metrics",subtitle:"Weight \u2022 body metrics",icon:"Scale",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickLogSheet)==null||ft.call(Y,"BODY",null)}catch(_a){}}}),React.createElement(hi,{title:"Recovery",subtitle:"Sleep \u2022 soreness \u2022 metrics",icon:"HeartPulse",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openQuickLogSheet)==null||ft.call(Y,"RECOVERY",null)}catch(_a){}}}))),React.createElement("div",null,React.createElement("div",{className:"px-1 text-[11px] tracking-widest text-white/50 font-extrabold"},"MODULES"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement(hi,{title:"Plan",subtitle:"Week view \u2022 schedule",icon:"Calendar",onClick:()=>{try{Wt()}catch(Y){}}}),React.createElement(hi,{title:"Nutrition",subtitle:"Planner \u2022 logs",icon:"Apple",onClick:()=>{try{Ha("FOOD")}catch(Y){}}}),React.createElement(hi,{title:"Yoga",subtitle:Da,tag:ri,icon:"Lotus",onClick:()=>{try{oa()}catch(Y){}}}),React.createElement(hi,{title:"Goals",subtitle:"Set focus & priorities",icon:"Target",onClick:()=>{var Y,ft;try{(ft=(Y=window.__fof_openers)==null?void 0:Y.openGoalManager)==null||ft.call(Y)}catch(_a){try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{id:"GOAL_MANAGER",props:{from:"TodayModules"}}}))}catch(Ja){}}}}),React.createElement(hi,{title:"Insights",subtitle:"Trends \u2022 recap",icon:"BarChart3",onClick:()=>{try{at("INSIGHTS")}catch(Y){}}}),React.createElement(hi,{title:"More",subtitle:"Library \u2022 Coach \u2022 AI Search",icon:"MoreHorizontal",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"MODULE_MORE_SHEET_V1",props:{tier:Di}}}))}catch(Y){}}}))))),React.createElement(al,{open:Le,title:"Capacity guidance",kicker:"Capacity Score",onClose:()=>{try{se(!1)}catch(Y){}}},React.createElement("div",{className:"text-[13px] text-white/80 leading-relaxed"},React.createElement("div",{className:"font-extrabold text-white"},"What does Capacity mean?"),React.createElement("div",{className:"mt-2"},"Capacity (called ",React.createElement("span",{className:"font-bold"},"Readiness")," in the flowcharts) is a daily modifier. It should adjust how hard you push \u2014 not replace your plan."),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-rose-200"},"LOW (0\u201333)"),React.createElement("div",{className:"text-[12px] text-white/70"},"Deload / recovery bias. Reduce volume, keep form quality.")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-amber-200"},"MID (34\u201366)"),React.createElement("div",{className:"text-[12px] text-white/70"},"Normal day. Execute plan. Make small swaps if needed.")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-emerald-200"},"HIGH (67\u2013100)"),React.createElement("div",{className:"text-[12px] text-white/70"},"Green light. Progress if the plan calls for it."))),React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Tip: Pull down on Today to reveal the Capacity bar again if it hides."),typeof window!="undefined"&&window.__FOF&&typeof window.__FOF.setCapacityMock=="function"?React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/50 font-extrabold"},"TEST (DEV)"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF.setCapacityMock({score:25}),window.__toast&&window.__toast("Capacity set to LOW (25)")}catch(Y){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-rose-500/15 text-rose-100 text-[12px] font-extrabold active:scale-[0.99]"},"Low"),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF.setCapacityMock({score:55}),window.__toast&&window.__toast("Capacity set to MID (55)")}catch(Y){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-amber-500/15 text-amber-100 text-[12px] font-extrabold active:scale-[0.99]"},"Mid"),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF.setCapacityMock({score:85}),window.__toast&&window.__toast("Capacity set to HIGH (85)")}catch(Y){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-emerald-500/15 text-emerald-100 text-[12px] font-extrabold active:scale-[0.99]"},"High")),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF.clearCapacityMock&&window.__FOF.clearCapacityMock(),window.__toast&&window.__toast("Capacity mock cleared")}catch(Y){}},className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-white/75 text-[12px] font-extrabold active:scale-[0.99]"},"Clear mock")):null))))},ms=({persona:e,todaySubTab:a,setTodaySubTab:r})=>React.createElement(fi,{persona:e,todaySubTab:a,setTodaySubTab:r}),ss=(e,a)=>{try{return JSON.parse(e)}catch(r){return a}},ds=(e=Date.now())=>{try{return new Date(e).toISOString().slice(0,10)}catch(a){return new Date().toISOString().slice(0,10)}},Xs=e=>Date.now()-Number(e||0)*24*60*60*1e3,Wo=()=>{var e=[];try{var a=typeof es=="function"?es():ss(localStorage.getItem("fof_client_logs_v1")||"{}",{}),r=24*60*60*1e3,h=Date.now()-30*r;(a&&typeof a=="object"?Object.keys(a):[]).forEach(de=>{var M=a[de];(Array.isArray(M&&M.__events)?M.__events:[]).forEach(Ae=>{var Oe=Number(Ae&&Ae.ts)||Date.now();if(Oe<h)return;var N=Ae&&(Ae.kind||Ae.type)?String(Ae.kind||Ae.type):"unknown",Ne=Ae&&(Ae.data||Ae.payload)?Ae.data||Ae.payload:{};e.push({raw:Ae,ts:Oe,dk:String(Ae.dateKey||de||ds(Oe)),name:N,payload:Ne})})})}catch(a){}try{var a=ss(localStorage.getItem("fof_event_log_v1")||"[]",[]);Array.isArray(a)&&a.forEach(r=>{var c=Number(r==null?void 0:r.createdAt)||r!=null&&r.ts&&Date.parse(r.ts)||Date.now(),h=(r==null?void 0:r.event_name)||(r==null?void 0:r.type)||(r==null?void 0:r.kind)||"unknown",V=(r==null?void 0:r.dateKey)||ds(c);e.push({raw:r,ts:c,dk:V,name:String(h),payload:(r==null?void 0:r.payload)||(r==null?void 0:r.data)||{}})})}catch(a){}try{var a=new Set;return e.sort((r,c)=>(c.ts||0)-(r.ts||0)).filter(r=>{var h,V;var c=((h=r==null?void 0:r.raw)==null?void 0:h.id)||((V=r==null?void 0:r.raw)==null?void 0:V.event_id)||(r==null?void 0:r.name)+"_"+String((r==null?void 0:r.ts)||0);return!c||a.has(c)?!1:(a.add(c),!0)}).slice(0,600)}catch(a){return e}},Po=()=>ss(localStorage.getItem("fof_xp_v1")||'{"xp":0,"streak":0,"lastDateKey":null}',{xp:0,streak:0,lastDateKey:null}),Eo="fof_achievements_v1",Oi=()=>ss(localStorage.getItem(Eo)||"[]",[]),jo=e=>{try{localStorage.setItem(Eo,JSON.stringify(Array.isArray(e)?e:[]))}catch(a){}try{window.dispatchEvent(new CustomEvent("flowofit:achievementsUpdated",{detail:{count:Array.isArray(e)?e.length:0}}))}catch(a){}},to=e=>{var a=xs(e);return a==="WORKOUT"||a==="STRENGTH"||a==="STRENGTH_WORKOUT"||a==="CARDIO"||a==="RUN"||a==="WALK"||a==="YOGA"||a==="PILATES"||a==="SESSION"||a==="TRAINING"||a==="HIIT"},Rn=e=>xs(e)==="CHECKIN"||xs(e)==="CHECK_IN",Io=(e=365)=>{var a=es(),r=Date.now(),c=864e5,h=[];try{var V=a&&a.days?a.days:a&&a.byDay?a.byDay:{},de=Object.keys(V||{});for(var M of de){var De=V[M]||{},Ae=Array.isArray(De.__events)?De.__events:[];var Oe=NaN;try{if(typeof M=="string"&&M.includes("-")){var[Ne,G,we]=M.split("-").map($t=>parseInt($t,10));Ne&&G&&we&&(Oe=new Date(Ne,G-1,we).getTime())}}catch(Ne){}if(!Number.isFinite(Oe)||r-Oe<=e*c)for(var Ne of Ae)h.push(Ne)}}catch(V){}try{var V=ss(localStorage.getItem("fof_event_log_v1")||"[]",[]);Array.isArray(V)&&h.push(...V)}catch(V){}return h},bs=e=>{try{var a=new Date(Number(e));if(Number.isNaN(a.getTime()))return null;var r=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),h=String(a.getDate()).padStart(2,"0");return`${r}-${c}-${h}`}catch(a){return null}},Ao=()=>{var e=Io(365);var a=0,r=0,c=0;var h=new Set;for(var Ae of Array.isArray(e)?e:[]){var Oe=xs(Ae&&Ae.kind),N=Ae&&(Ae.ts||Ae.timestamp)||null;if(to(Oe)){a+=1,(Oe==="WORKOUT"||Oe==="STRENGTH"||Oe==="STRENGTH_WORKOUT")&&(r+=1);var Ne=Ae&&Ae.dateKey?String(Ae.dateKey):bs(N);Ne&&h.add(Ne)}if(Rn(Oe)){c+=1;var Ne=Ae&&Ae.dateKey?String(Ae.dateKey):bs(N);Ne&&h.add(Ne)}}var V=typeof Lo=="function"?Lo():bs(Date.now());var de=0;try{var Ae=new Date;Ae.setHours(0,0,0,0);for(var Oe=0;Oe<400;Oe++){var N=new Date(Ae.getTime()-Oe*864e5),Ne=`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`;if(h.has(Ne))de+=1;else break}}catch(Ae){}var M=0,De=0;try{var Ae=ss(localStorage.getItem("fof_community_v1")||"{}",{}),Oe=Array.isArray(Ae.joined)?Ae.joined:[];M=Oe.length;var N=Po(),Ne=Io(30),G=Date.now(),we=je=>G-je*864e5,$t=(je,re)=>{var Z=new Set((je||[]).map(xs));var Qe=0;for(var nt of Ne){var Lt=xs(nt&&nt.kind),ze=Number(nt&&(nt.ts||nt.timestamp)||0);re&&ze&&ze<re||Z.has(Lt)&&(Qe+=1)}return Qe},gt=$t(["WORKOUT","STRENGTH","STRENGTH_WORKOUT","SESSION","TRAINING"],we(7)),_e=$t(["CHECKIN","CHECK_IN"],we(7)),ve=Math.max(Number(N&&N.streak)||0,de||0),me=[{id:"c_streak_7",metric:"STREAK",target:7},{id:"c_workouts_5",metric:"WORKOUTS",target:5},{id:"c_checkins_4",metric:"CHECKINS",target:4}],j=je=>{var re=String(je||"").toUpperCase();return re==="STREAK"?ve:re==="WORKOUTS"?gt:re==="CHECKINS"?_e:0};for(var je of Oe){var re=me.find(nt=>nt.id===je);if(!re)continue;var Z=j(re.metric);(re.target?Math.round(Z/re.target*100):0)>=100&&(De+=1)}}catch(Ae){}return{sessions:a,workouts:r,checkins:c,streak:de,challengesJoined:M,challengesCompleted:De,todayKey:V}},sn=[{id:"ACH_FIRST_WORKOUT",title:"First Workout",desc:"Log your first workout session.",tier:"COMMON",test:e=>e.workouts>=1},{id:"ACH_SESSIONS_10",title:"10 Sessions",desc:"Log 10 training sessions.",tier:"COMMON",test:e=>e.sessions>=10},{id:"ACH_SESSIONS_25",title:"25 Sessions",desc:"Log 25 training sessions.",tier:"RARE",test:e=>e.sessions>=25},{id:"ACH_SESSIONS_50",title:"50 Sessions",desc:"Log 50 training sessions.",tier:"ELITE",test:e=>e.sessions>=50},{id:"ACH_STREAK_3",title:"3\u2011Day Streak",desc:"Stay consistent for 3 days in a row.",tier:"COMMON",test:e=>e.streak>=3},{id:"ACH_STREAK_7",title:"7\u2011Day Streak",desc:"A full week of consistency.",tier:"RARE",test:e=>e.streak>=7},{id:"ACH_STREAK_30",title:"30\u2011Day Streak",desc:"Elite consistency for 30 days.",tier:"ELITE",test:e=>e.streak>=30},{id:"ACH_CHALLENGE_JOINED",title:"Joined a Challenge",desc:"Join your first community challenge.",tier:"COMMON",test:e=>e.challengesJoined>=1},{id:"ACH_CHALLENGE_COMPLETED",title:"Challenge Completed",desc:"Complete a community challenge.",tier:"RARE",test:e=>e.challengesCompleted>=1}],Li=(e={})=>{try{var a=Ao(),r=Oi(),c=new Map((Array.isArray(r)?r:[]).map(De=>[De&&De.id,De])),h=Date.now(),V=[];for(var De of sn){var Ae=!1;try{Ae=!!(De&&typeof De.test=="function"&&De.test(a))}catch(N){Ae=!1}if(!Ae)continue;var Oe=c.get(De.id);V.push({id:De.id,title:De.title,desc:De.desc,tier:De.tier,earnedAt:Oe&&Oe.earnedAt?Oe.earnedAt:h})}V.sort((De,Ae)=>(Number(Ae.earnedAt)||0)-(Number(De.earnedAt)||0));var de=(()=>{try{return JSON.stringify(r||[])}catch(De){return""}})(),M=(()=>{try{return JSON.stringify(V||[])}catch(De){return""}})();return(de!==M||e.force)&&jo(V),{ok:!0,stats:a,achievements:V}}catch(a){return{ok:!1,error:String(a&&a.message||a)}}};window.__fof_getAchievements=()=>Oi(),window.__fof_recomputeAchievements=e=>Li(e||{}),(()=>{var e=null;var a=()=>{try{e&&clearTimeout(e)}catch(r){}e=setTimeout(()=>{Li({})},120)};try{window.addEventListener("flowofit:eventsUpdated",a)}catch(r){}try{window.addEventListener("flowofit:logsUpdated",a)}catch(r){}try{window.addEventListener("flowofit:workoutLogsUpdated",a)}catch(r){}try{window.addEventListener("storage",r=>{r&&(r.key==="fof_client_logs_v1"||r.key==="fof_event_log_v1"||r.key==="fof_xp_v1"||r.key==="fof_community_v1")&&a()})}catch(r){}try{a()}catch(r){}})();var po="fof_badge_pins_v1",Tn=[{id:"BDG_FIRST_WORKOUT",achId:"ACH_FIRST_WORKOUT",name:"First Rep",rarity:"COMMON",icon:"\u{1F3C1}",colorHint:"slate"},{id:"BDG_SESSIONS_10",achId:"ACH_SESSIONS_10",name:"10 Sessions",rarity:"COMMON",icon:"\u{1F4C6}",colorHint:"slate"},{id:"BDG_SESSIONS_25",achId:"ACH_SESSIONS_25",name:"25 Sessions",rarity:"RARE",icon:"\u{1F4C8}",colorHint:"violet"},{id:"BDG_SESSIONS_50",achId:"ACH_SESSIONS_50",name:"50 Sessions",rarity:"ELITE",icon:"\u{1F3C6}",colorHint:"amber"},{id:"BDG_STREAK_3",achId:"ACH_STREAK_3",name:"3\u2011Day Streak",rarity:"COMMON",icon:"\u{1F525}",colorHint:"slate"},{id:"BDG_STREAK_7",achId:"ACH_STREAK_7",name:"7\u2011Day Streak",rarity:"RARE",icon:"\u{1F525}",colorHint:"violet"},{id:"BDG_STREAK_30",achId:"ACH_STREAK_30",name:"30\u2011Day Streak",rarity:"ELITE",icon:"\u{1F525}",colorHint:"amber"},{id:"BDG_CHALLENGE_JOINED",achId:"ACH_CHALLENGE_JOINED",name:"Challenger",rarity:"COMMON",icon:"\u{1F91D}",colorHint:"slate"},{id:"BDG_CHALLENGE_COMPLETED",achId:"ACH_CHALLENGE_COMPLETED",name:"Finisher",rarity:"RARE",icon:"\u2705",colorHint:"violet"}],cr=()=>{var e=ss(localStorage.getItem(po)||"[]",[]);return Array.isArray(e)?e.filter(Boolean).slice(0,3):[]},_r=e=>{var a=Array.isArray(e)?e.filter(Boolean).slice(0,3):[];try{localStorage.setItem(po,JSON.stringify(a))}catch(r){}try{window.dispatchEvent(new CustomEvent("flowofit:badgesUpdated",{detail:{pins:a}}))}catch(r){}return a},$o=()=>{var e=Oi(),a=new Map((Array.isArray(e)?e:[]).map(c=>[c&&c.id,c])),r=Tn.map(c=>{var h=a.get(c.achId);return{id:c.id,achId:c.achId,name:c.name,rarity:c.rarity,icon:c.icon,colorHint:c.colorHint,earned:!!h,earnedAt:h&&h.earnedAt?h.earnedAt:null,tier:h&&h.tier?h.tier:null,title:h&&h.title?h.title:null,desc:h&&h.desc?h.desc:null}});return r.sort((c,h)=>{var V=c.earned?1:0,de=h.earned?1:0;if(V!==de)return de-V;var M=Number(c.earnedAt)||0,De=Number(h.earnedAt)||0;return M!==De?De-M:Tn.findIndex(Ae=>Ae.id===c.id)-Tn.findIndex(Ae=>Ae.id===h.id)}),r};window.__fof_getBadges=()=>$o(),window.__fof_getPinnedBadges=()=>cr(),window.__fof_setPinnedBadges=e=>{var a=new Set($o().filter(c=>c.earned).map(c=>c.id)),r=(Array.isArray(e)?e:[]).filter(c=>a.has(c)).slice(0,3);return _r(r)},(()=>{var e=()=>{try{var a=new Set($o().filter(h=>h.earned).map(h=>h.id)),r=cr(),c=r.filter(h=>a.has(h)).slice(0,3);JSON.stringify(r)!==JSON.stringify(c)&&_r(c)}catch(a){}};try{window.addEventListener("flowofit:achievementsUpdated",e)}catch(a){}try{window.addEventListener("storage",a=>{a&&(a.key===Eo||a.key===po)&&e()})}catch(a){}try{e()}catch(a){}})();var Vo="fof_community_v1",xn=()=>{var e=ss(localStorage.getItem(Vo)||"{}",{}),a=Array.isArray(e.joined)?e.joined:[],r=e.joinedMeta&&typeof e.joinedMeta=="object"?e.joinedMeta:{};return{joined:a,joinedMeta:r,activity:Array.isArray(e.activity)?e.activity:[],metric:e.metric||"STREAK",scope:e.scope||"FRIENDS"}},Xn=e=>{try{localStorage.setItem(Vo,JSON.stringify(e||{}))}catch(a){}},Fi=({persona:e})=>{var[a,r]=React.useState(xn),[c,h]=React.useState(0);React.useEffect(()=>{var nt=Le=>{Le&&(Le.key==="fof_event_log_v1"||Le.key==="fof_xp_v1"||Le.key===Vo)&&(r(xn()),h(se=>se+1))};window.addEventListener("storage",nt);var Lt=()=>{try{h(Le=>Le+1),r(xn())}catch(Le){}};window.addEventListener("flowofit:eventsUpdated",Lt),window.addEventListener("flowofit:logsUpdated",Lt),window.addEventListener("flowofit:workoutLogsUpdated",Lt);var ze=setInterval(()=>h(Le=>Le+1),2500);return()=>{window.removeEventListener("storage",nt),window.removeEventListener("flowofit:eventsUpdated",Lt),window.removeEventListener("flowofit:logsUpdated",Lt),window.removeEventListener("flowofit:workoutLogsUpdated",Lt),clearInterval(ze)}},[]);var V=React.useMemo(()=>Po(),[c]),de=React.useMemo(()=>Wo(),[c]),M=React.useMemo(()=>{var Lt=Date.now(),ze=45,Le=new Set(["WORKOUT","WORKOUT_LOG","WORKOUT_SESSION","SESSION","SESSION_COMPLETED","YOGA","YOGA_SESSION","CHECKIN","CHECK_IN","CLIENT_CHECKIN","CLIENT_CHECKIN_SUBMITTED","NUTRITION","MEAL","MEAL_LOG","FOOD","FOOD_LOG","HABITS","HABIT","HABIT_LOG","RECOVERY","BODY","client.workout.logged","client.session.completed","YOGA_SESSION","client.checkin.submitted","client.nutrition.logged","client.food.logged","client.habit.logged"]),se=new Set;for(var Wt of de||[]){if(!Wt||!Wt.ts||!Le.has(Wt.name))continue;var Ha=Math.floor(Wt.ts/864e5);se.add(Ha)}var at=Math.floor(Lt/864e5);if(!se.has(at))return 0;var Pe=0;for(var Wt=at;Wt>=at-ze&&se.has(Wt);Wt--)Pe++;return Pe},[de]),De=React.useMemo(()=>{var nt=Xs(7),Lt=new Set(["client.workout.logged","client.session.completed","YOGA_SESSION"]);return de.filter(ze=>ze.ts>=nt&&Lt.has(ze.name)).length},[de]),Ae=React.useMemo(()=>{var nt=Xs(7);return de.filter(Lt=>Lt.ts>=nt&&Lt.name==="client.checkin.submitted").length},[de]),Oe=React.useMemo(()=>{var nt=Xs(7);var Lt=0;return de.forEach(ze=>{if(ze.ts<nt)return;var Le=ze.payload||{},se=Number(Le.steps||Le.stepCount||Le.dailySteps||0);Number.isFinite(se)&&se>0&&(Lt+=se)}),Lt},[de]),N=React.useMemo(()=>[{id:"c_streak_7",title:"7\u2011Day Consistency Streak",subtitle:"Log anything daily (workout, yoga, habit).",metric:"STREAK",target:7},{id:"c_workout_3",title:"3 Workouts This Week",subtitle:"Any logged workout or completed session counts.",metric:"WORKOUTS",target:3},{id:"c_steps_50",title:"50k Steps (7 days)",subtitle:"Connect wearables to auto-fill steps.",metric:"STEPS",target:5e4}],[]),Ne=React.useCallback(nt=>nt==="STREAK"?Math.max(0,Number(M||0),Number((V==null?void 0:V.streak)||0)):nt==="WORKOUTS"?Math.max(0,Number(De||0)):nt==="CHECKINS"?Math.max(0,Number(Ae||0)):nt==="STEPS"?Math.max(0,Number(Oe||0)):0,[M,V,De,Ae,Oe]),G=nt=>{var Lt=Ne(nt.metric),ze=nt.target?Math.max(0,Math.min(100,Math.round(Lt/nt.target*100))):0;return{v:Lt,pct:ze}},we=nt=>(a.joined||[]).includes(nt),$t=(nt,Lt)=>{r(()=>{var ze=xn(),Le=new Set(ze.joined||[]),se={...ze.joinedMeta||{}},at=Array.isArray(ze.activity)?ze.activity.slice(0):[],Pe=Le.has(nt),Wt=Lt===!0,Ha=Lt===!1;Wt&&!Pe&&(Le.add(nt),se[nt]={joinedAt:Date.now()},at.unshift({id:"aj_"+nt+"_"+Date.now(),ts:Date.now(),type:"JOIN",challengeId:nt})),Ha&&Pe&&(Le.delete(nt),delete se[nt],at.unshift({id:"al_"+nt+"_"+Date.now(),ts:Date.now(),type:"LEAVE",challengeId:nt}));var qa={...ze,joined:Array.from(Le),joinedMeta:se,activity:at.slice(0,30)};return Xn(qa),qa})},gt=nt=>({STREAK:"Streak",WORKOUTS:"Workouts",STEPS:"Steps",CHECKINS:"Check\u2011ins"})[nt]||nt,_e=React.useMemo(()=>{var nt="fof_community_seed_v1";var Lt=1337;try{var ki=localStorage.getItem(nt);ki&&(Lt=Number(ki)||1337),ki||localStorage.setItem(nt,String(Lt))}catch(ki){}var ze=()=>(Lt^=Lt<<13,Lt^=Lt>>17,Lt^=Lt<<5,Math.abs(Lt)%1e3/1e3),Le=Number(Ne(a.metric)||0),at=(ki=>ki==="STREAK"?{baseline:4,min:0,max:21,noise:1.2,label:"days"}:ki==="WORKOUTS"?{baseline:2,min:0,max:14,noise:.8,label:"wk"}:ki==="CHECKINS"?{baseline:2,min:0,max:14,noise:.8,label:"wk"}:ki==="STEPS"?{baseline:3e4,min:0,max:18e4,noise:9e3,label:"7d"}:{baseline:1,min:0,max:999999,noise:1,label:""})(a.metric),Pe=Math.max(Le,at.baseline),Wt=ki=>Math.max(at.min,Math.min(at.max,ki)),Ha=[["Aisha","Consistent"],["Omar","Steady"],["Maya","Rising"],["Noah","New"],["Huda","Focused"],["Zain","Strong"],["Layla","Balanced"],["Sam","On it"]],qa=[["Aisha","Consistent"],["Omar","Steady"],["Maya","Rising"],["Noah","New"],["Huda","Focused"],["Zain","Strong"],["Layla","Balanced"],["Sam","On it"],["Rami","Fast"],["Sara","Sharp"],["Khalid","Driven"],["Nour","Locked-in"],["Yara","Smooth"],["Adam","Relentless"],["Fatima","Calm"],["Yusuf","Hybrid"]],oa=a.scope==="GLOBAL"?qa:Ha,Ra=a.scope==="GLOBAL"?12:6,ri=Array.isArray(a.joined)?a.joined:[],Da=(N||[]).filter(ki=>ri.includes(ki.id)),Va=Da.find(ki=>ki.metric===a.metric)||Da[0]||null,Y=oa.slice(0,Ra).map((ki,Vs)=>{var[Ke,ua]=ki,Vi=1+(ze()-.5)*.9,$i=(ze()-.5)*at.noise*2;var Ya=Pe*Vi+$i;if(a.metric==="STEPS"&&(Ya=Ya+ze()*12e3),Ya=Wt(Math.round(Ya)),a.scope==="FRIENDS"){var Zt=.25+ze()*.2;Ya=Wt(Math.round(Ya*(1-Zt)+Le*Zt))}return{id:"p"+(Vs+1),name:Ke,badge:ua,score:Ya,inChallenge:!!(Va&&Va.metric===a.metric&&ze()>.35)}}),_a=[{id:"me",name:"You",badge:"",score:Wt(Math.round(Le)),isMe:!0,inChallenge:!!Va},...Y].sort((ki,Vs)=>(Vs.score||0)-(ki.score||0)).map((ki,Vs)=>({...ki,rank:Vs+1})),Ja=_a.find(ki=>ki.isMe)||{id:"me",name:"You",score:Le,rank:1,isMe:!0},Ui=_a.length||1,qs=Math.max(0,Math.min(99,Math.round((Ui-Ja.rank)/Ui*100)));return{rows:[Ja,..._a.filter(ki=>!ki.isMe)],rawRanked:_a,meRow:Ja,percentile:qs,activeChallenge:Va}},[a.metric,a.scope,a.joined,c,De,Ae,Oe,M,V==null?void 0:V.streak,N]),ve=_e.rows,me=nt=>{try{var Lt=Math.max(0,Math.floor((Date.now()-Number(nt||0))/1e3));if(Lt<60)return"just now";var ze=Math.floor(Lt/60);if(ze<60)return`${ze}m ago`;var Le=Math.floor(ze/60);return Le<48?`${Le}h ago`:`${Math.floor(Le/24)}d ago`}catch(Lt){return""}},j=React.useMemo(()=>{var nt=[],ze=(Array.isArray(a.activity)?a.activity:[]).slice(0).sort((Pe,Wt)=>(Wt.ts||0)-(Pe.ts||0)).slice(0,10);ze.forEach(Pe=>{var Wt=Pe.challengeId,Ha=(N||[]).find(qa=>qa.id===Wt);Ha&&(Pe.type==="JOIN"&&nt.push({id:Pe.id||"join_"+Wt+"_"+(Pe.ts||0),type:"JOIN",title:"\u{1F3C1} Joined: "+Ha.title,meta:(me(Pe.ts)?me(Pe.ts)+" \u2022 ":"")+"Progress updates automatically as you log in Track."}),Pe.type==="LEAVE"&&nt.push({id:Pe.id||"leave_"+Wt+"_"+(Pe.ts||0),type:"LEAVE",title:"\u{1F44B} Left: "+Ha.title,meta:(me(Pe.ts)?me(Pe.ts)+" \u2022 ":"")+"You can re-join anytime."}))}),ze.length||(a.joined||[]).slice(0,5).forEach(Pe=>{var Wt=(N||[]).find(Ha=>Ha.id===Pe);Wt&&nt.push({id:"join_"+Pe,type:"JOIN",title:"\u{1F3C1} Joined: "+Wt.title,meta:"This week is your week \u2014 keep the chain alive."})}),(a.joined||[]).forEach(Pe=>{var Wt=(N||[]).find(qa=>qa.id===Pe);if(!Wt)return;var Ha=G(Wt);Ha.pct>=100?nt.push({id:"done_"+Pe,type:"MOMENT",title:"\u{1F3C6} Challenge completed: "+Wt.title,meta:"Nice \u2014 keep momentum and pick a new one."}):Ha.pct>=75&&nt.push({id:"near_"+Pe,type:"MOMENT",title:"\u{1F525} Almost there: "+Wt.title,meta:`You\u2019re at ${Ha.pct}% \u2014 finish strong.`})});var Le=Xs(14);(de||[]).filter(Pe=>Pe.ts>=Le).sort((Pe,Wt)=>Wt.ts-Pe.ts).slice(0,14).forEach(Pe=>{var qa,oa,Ra,ri,Da,Va,Y,ft,_a,Ja,Ui;var Wt=me(Pe.ts),Ha=String(Pe&&Pe.name?Pe.name:"").toUpperCase();(Ha==="CLIENT.WORKOUT.LOGGED"||Ha==="WORKOUT"||Ha==="WORKOUT_LOG"||Ha.includes("WORKOUT"))&&nt.push({id:((qa=Pe.raw)==null?void 0:qa.id)||((oa=Pe.raw)==null?void 0:oa.event_id)||"w_"+Pe.ts,type:"WORKOUT",title:"\u{1F4AA} Workout logged",meta:(Wt?Wt+" \u2022 ":"")+"Counts toward weekly consistency."}),(Ha==="CLIENT.SESSION.COMPLETED"||Ha==="SESSION_COMPLETED"||Ha==="SESSION")&&nt.push({id:((Ra=Pe.raw)==null?void 0:Ra.id)||((ri=Pe.raw)==null?void 0:ri.event_id)||"s_"+Pe.ts,type:"SESSION",title:"\u2705 Session completed",meta:(Wt?Wt+" \u2022 ":"")+"Nice work \u2014 keep the rhythm."}),(Ha==="YOGA_SESSION"||Ha==="YOGA"||Ha==="YOGA_SESSION_LOG"||Ha.includes("YOGA"))&&nt.push({id:((Da=Pe.raw)==null?void 0:Da.id)||"y_"+Pe.ts,type:"YOGA",title:"\u{1F9D8} Yoga session logged",meta:(Wt?Wt+" \u2022 ":"")+"Recovery + mobility win."}),(Ha==="CLIENT.CHECKIN.SUBMITTED"||Ha==="CHECKIN"||Ha==="CHECK_IN"||Ha.includes("CHECKIN"))&&nt.push({id:((Va=Pe.raw)==null?void 0:Va.id)||((Y=Pe.raw)==null?void 0:Y.event_id)||"c_"+Pe.ts,type:"CHECKIN",title:"\u{1F4DD} Check\u2011in submitted",meta:(Wt?Wt+" \u2022 ":"")+"Helps plans adapt to you."}),(Ha==="CLIENT.NUTRITION.LOGGED"||Ha==="CLIENT.FOOD.LOGGED"||Ha==="NUTRITION"||Ha==="FOOD"||Ha.includes("NUTRITION")||Ha.includes("FOOD")||Ha.includes("MEAL"))&&nt.push({id:((ft=Pe.raw)==null?void 0:ft.id)||((_a=Pe.raw)==null?void 0:_a.event_id)||"n_"+Pe.ts,type:"NUTRITION",title:"\u{1F37D}\uFE0F Nutrition logged",meta:(Wt?Wt+" \u2022 ":"")+"Small logs compound into big wins."}),(Ha==="CLIENT.HABIT.LOGGED"||Ha==="HABITS"||Ha==="HABIT"||Ha.includes("HABIT"))&&nt.push({id:((Ja=Pe.raw)==null?void 0:Ja.id)||((Ui=Pe.raw)==null?void 0:Ui.event_id)||"h_"+Pe.ts,type:"HABIT",title:"\u2705 Habit logged",meta:(Wt?Wt+" \u2022 ":"")+"Consistency wins."})});var at=new Set;return nt.filter(Pe=>Pe&&Pe.id&&!at.has(Pe.id)&&at.add(Pe.id)).slice(0,16)},[a.joined,a.activity,de,N,c]),je=React.useMemo(()=>{var nt=[];return(a.joined||[]).length>0||nt.push({id:"p_join",title:"Join your first challenge",body:"Pick one below \u2014 we\u2019ll track progress automatically from what you log.",cta:"Browse challenges",action:"SCROLL_CHALLENGES"}),Number(De||0)<=0&&nt.push({id:"p_log",title:"Log a session to start your feed",body:"A single logged workout or yoga session will unlock your streak + feed activity.",cta:"Go to Track",action:"GO_TRACK"}),Number(Oe||0)<=0&&nt.push({id:"p_steps",title:"Connect wearables for steps challenges",body:"Steps are optional \u2014 connect devices to auto-fill steps when available.",cta:"Open Track \u2192 Devices",action:"GO_TRACK_DEVICES"}),Number(Ne("STREAK")||0)<=0&&nt.push({id:"p_streak",title:"Start a streak today",body:"Log anything today (workout, yoga, habit) to begin a consistency streak.",cta:"Log now",action:"GO_TRACK"}),nt.slice(0,3)},[a.joined,De,Oe,c]),re=nt=>{try{if(nt==="SCROLL_CHALLENGES"){var Lt=document.getElementById("cm_challenges");if(!Lt)return;var Le=(se=>{var at=se&&se.parentElement?se.parentElement:null;for(;at;){try{var Pe=window.getComputedStyle(at),Wt=Pe&&Pe.overflowY?String(Pe.overflowY):"";if(Wt==="auto"||Wt==="scroll")return at}catch(Pe){}at=at.parentElement}return null})(Lt);if(Le&&Le.scrollTo){var se=Lt.getBoundingClientRect().top-Le.getBoundingClientRect().top+Le.scrollTop-12;Le.scrollTo({top:se,behavior:"smooth"})}else Lt.scrollIntoView&&Lt.scrollIntoView({behavior:"smooth",block:"start"});return}if(nt==="GO_TRACK"){window.__fof_navigateTab&&window.__fof_navigateTab("TRACK",{from:"COMMUNITY",intent:"LOG_ANY"});return}if(nt==="GO_TRACK_DEVICES"){window.__fof_navigateTab&&window.__fof_navigateTab("TRACK",{from:"COMMUNITY",intent:"DEVICES"});return}}catch(Lt){}},Z=({k:nt,label:Lt})=>React.createElement("button",{onClick:()=>{var ze={...xn(),metric:nt};Xn(ze),r(ze)},className:"px-3 py-1.5 rounded-full text-[12px] font-extrabold border "+(a.metric===nt?"bg-white/15 border-white/25 text-white":"bg-black/20 border-white/10 text-white/70 hover:text-white")},Lt),Qe=({k:nt,label:Lt})=>React.createElement("button",{onClick:()=>{var ze={...xn(),scope:nt};Xn(ze),r(ze)},className:"px-3 py-1.5 rounded-full text-[12px] font-extrabold border "+(a.scope===nt?"bg-white/15 border-white/25 text-white":"bg-black/20 border-white/10 text-white/70 hover:text-white")},Lt);return React.createElement("div",{className:"max-w-5xl mx-auto px-4 pt-5 pb-32"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[18px]"},"Community"),React.createElement("div",{className:"mt-1 text-white/60 text-[13px]"},"Challenges, leaderboards, and activity \u2014 powered by what you log in Track.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"rounded-full border border-white/12 bg-black/30 px-3 py-2"},React.createElement("div",{className:"text-[10px] text-white/55"},"Streak"),React.createElement("div",{className:"text-[14px] font-extrabold text-white"},Ne("STREAK"),"d")),React.createElement("div",{className:"rounded-full border border-white/12 bg-black/30 px-3 py-2"},React.createElement("div",{className:"text-[10px] text-white/55"},"Workouts (7d)"),React.createElement("div",{className:"text-[14px] font-extrabold text-white"},De)))),React.createElement("div",{id:"cm_challenges",className:"mt-4 rounded-[28px] border border-white/12 bg-white/5 backdrop-blur-xl p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-extrabold"},"Challenges"),React.createElement("div",{className:"text-[12px] text-white/55"},"Join to track progress locally")),React.createElement("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-2",style:{WebkitOverflowScrolling:"touch"}},N.map(nt=>{var Lt=G(nt),ze=we(nt.id),Le=nt.metric==="STEPS"&&Oe<=0;return React.createElement("div",{key:nt.id,className:"min-w-[280px] rounded-3xl border border-white/12 bg-black/25 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},nt.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},nt.subtitle)),React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},gt(nt.metric))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"flex items-center justify-between text-[12px] text-white/65"},React.createElement("span",null,"Progress"),React.createElement("span",{className:"font-extrabold text-white"},nt.metric==="STEPS"?Lt.v.toLocaleString():Lt.v," / ",nt.metric==="STEPS"?nt.target.toLocaleString():nt.target)),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-2 rounded-full bg-white/40",style:{width:Lt.pct+"%"}})),Le?React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"No steps data yet \u2014 connect wearables in Track \u2192 Devices."):null),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},ze?React.createElement(React.Fragment,null,React.createElement("button",{disabled:!0,className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-white/10 border-white/18 text-white/90 cursor-default"},"Joined"),React.createElement("button",{onClick:()=>$t(nt.id,!1),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-black/20 border-white/12 text-white/70 hover:text-white"},"Leave")):React.createElement("button",{onClick:()=>$t(nt.id,!0),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-white/15 border-white/20 text-white hover:bg-white/18"},"Join"),Lt.pct>=100?React.createElement("span",{className:"px-2 py-1 rounded-full text-[11px] font-extrabold bg-white/15 border border-white/20 text-white"},"Completed"):null),React.createElement("div",{className:"text-[11px] text-white/50"},"Local \u2022 progress auto-updates")))}))),React.createElement("div",{id:"cm_leaderboard",className:"mt-4 rounded-[28px] border border-white/12 bg-white/5 backdrop-blur-xl p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Leaderboard"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Ranking is local + deterministic until backend arrives.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(Qe,{k:"FRIENDS",label:"Friends"}),React.createElement(Qe,{k:"GLOBAL",label:"Global"}))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Z,{k:"STREAK",label:"Streak"}),React.createElement(Z,{k:"WORKOUTS",label:"Workouts"}),React.createElement(Z,{k:"STEPS",label:"Steps"}),React.createElement(Z,{k:"CHECKINS",label:"Check\u2011ins"})),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"You\u2019re ",React.createElement("span",{className:"text-white font-extrabold"},"#",_e.meRow.rank)," \u2022 Top ",React.createElement("span",{className:"text-white font-extrabold"},_e.percentile,"%")," for ",gt(a.metric).toLowerCase(),"."),_e.activeChallenge?React.createElement("div",{className:"px-2 py-1 rounded-full text-[11px] font-extrabold bg-white/10 border border-white/14 text-white/80"},_e.activeChallenge.title):React.createElement("div",{className:"text-[11px] text-white/45"},"Join a challenge to appear in themed leaderboards."))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-black/20 overflow-hidden"},React.createElement("div",{className:"px-4 py-3 flex items-center justify-between border-b border-white/10"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},"Rank"),React.createElement("div",{className:"text-[12px] font-extrabold text-white/70"},gt(a.metric))),React.createElement("div",null,ve.map(nt=>React.createElement("div",{key:nt.id,className:"px-4 py-3 flex items-center justify-between border-b border-white/10 "+(nt.isMe?"bg-white/6":"")},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 rounded-full border border-white/12 flex items-center justify-center text-[12px] font-extrabold "+(nt.isMe?"bg-white/15 text-white":"bg-black/30 text-white/70")},nt.rank),React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},nt.name),React.createElement("div",{className:"text-[11px] text-white/50"},nt.isMe?"Your current pace":nt.badge||"",nt.inChallenge?React.createElement("span",{className:"ml-2 px-2 py-[2px] rounded-full border border-white/12 bg-white/10 text-white/70"},"In your challenge"):null))),React.createElement("div",{className:"text-white font-extrabold"},a.metric==="STEPS"?Number(nt.score||0).toLocaleString():Number(nt.score||0))))))),React.createElement("div",{id:"cm_feed",className:"mt-4 rounded-[28px] border border-white/12 bg-white/5 backdrop-blur-xl p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Feed"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Community moments and your latest activity.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>re("SCROLL_CHALLENGES"),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-white/15 border-white/20 text-white hover:bg-white/18"},"Browse challenges"),React.createElement("button",{onClick:()=>re("GO_TRACK"),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-black/25 border-white/12 text-white/80 hover:text-white"},"Go to Track"))),je.length?React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2"},je.map(nt=>React.createElement("button",{key:nt.id,onClick:()=>re(nt.action),className:"text-left rounded-3xl border border-white/12 bg-black/20 p-4 hover:bg-black/25"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},nt.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},nt.body),React.createElement("div",{className:"mt-3 inline-flex items-center gap-2 text-[12px] font-extrabold text-white/80"},React.createElement("span",{className:"px-3 py-1.5 rounded-full border border-white/14 bg-white/10"},nt.cta),React.createElement("span",{className:"text-white/40"},"\u2192"))))):null,j.length===0?React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-white font-extrabold"},"Your feed is empty"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Join a challenge or log something in Track \u2014 we\u2019ll start surfacing moments here automatically."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{onClick:()=>re("SCROLL_CHALLENGES"),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-white/15 border-white/20 text-white hover:bg-white/18"},"Browse challenges"),React.createElement("button",{onClick:()=>re("GO_TRACK"),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold border bg-black/25 border-white/12 text-white/80 hover:text-white"},"Go to Track"))):React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},j.map(nt=>React.createElement("div",{key:nt.id,className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-white font-extrabold"},nt.title),React.createElement("div",{className:"text-[11px] text-white/45"},nt.type)),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},nt.meta))))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] text-white/65"},"A9.4 implemented: richer feed/events + prompt cards. Still local-first (no backend) and safe to run offline.")))},ws=e=>{var a=String(e||"You").trim().split(/\s+/).filter(Boolean),r=(a[0]||"Y")[0]||"Y",c=(a[1]||"")[0]||"";return(r+c).toUpperCase()},mo=({open:e,onClose:a})=>{var[r,c]=React.useState(0),[h,V]=React.useState(!1),[de,M]=React.useState([]),De=React.useMemo(()=>{try{var gt=ss(localStorage.getItem("fof_profile_v1")||"{}",{});return gt.displayName||gt.name||gt.fullName||"You"}catch(gt){return"You"}},[r]),{stats:Ae}=React.useMemo(()=>{try{if(typeof window.__fof_recomputeAchievements=="function")return window.__fof_recomputeAchievements({silent:!0})}catch(gt){}return{ok:!0,stats:{}}},[r]),Oe=React.useMemo(()=>{try{return typeof window.__fof_getBadges=="function"?window.__fof_getBadges():[]}catch(gt){return[]}},[r]),N=React.useMemo(()=>{try{return typeof window.__fof_getPinnedBadges=="function"?window.__fof_getPinnedBadges():[]}catch(gt){return[]}},[r]);React.useEffect(()=>{try{M((N||[]).map(gt=>gt.id).filter(Boolean).slice(0,3))}catch(gt){M([])}},[r,h]),React.useEffect(()=>{if(!e)return;var gt=()=>c(ve=>ve+1),_e=ve=>{try{if(!ve||!ve.key)return;["fof_achievements_v1","fof_badge_pins_v1","fof_client_logs_v1","fof_event_log_v1"].includes(ve.key)&&gt()}catch(me){}};return window.addEventListener("flowofit:badgesUpdated",gt),window.addEventListener("flowofit:achievementsUpdated",gt),window.addEventListener("flowofit:eventsUpdated",gt),window.addEventListener("flowofit:logsUpdated",gt),window.addEventListener("flowofit:workoutLogsUpdated",gt),window.addEventListener("storage",_e),()=>{window.removeEventListener("flowofit:badgesUpdated",gt),window.removeEventListener("flowofit:achievementsUpdated",gt),window.removeEventListener("flowofit:eventsUpdated",gt),window.removeEventListener("flowofit:logsUpdated",gt),window.removeEventListener("flowofit:workoutLogsUpdated",gt),window.removeEventListener("storage",_e)}},[e]);var Ne=gt=>{gt&&M(_e=>_e.includes(gt)?_e.filter(me=>me!==gt):_e.length>=3?_e:[..._e,gt])},G=()=>{try{typeof window.__fof_setPinnedBadges=="function"&&window.__fof_setPinnedBadges(de)}catch(gt){}V(!1),c(gt=>gt+1)},we=(gt,_e=0)=>{try{var ve=(Ae||{})[gt];return typeof ve=="number"&&isFinite(ve)?ve:_e}catch(ve){return _e}},$t=Oe.filter(gt=>gt.earned).length;return React.createElement(qo,{open:e,title:"Profile",kicker:"Identity",onClose:a,maxHeightVh:92,footer:React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{V(gt=>!gt)},className:"flex-1 h-12 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 font-extrabold"},h?"Done":"Edit pinned badges"),h?React.createElement("button",{type:"button",onClick:G,className:"flex-1 h-12 rounded-2xl bg-emerald-500/20 hover:bg-emerald-500/25 border border-emerald-400/30 text-emerald-100 font-extrabold"},"Save pins"):null)},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-white/15 to-white/5 border border-white/10 flex items-center justify-center font-extrabold text-white"},ws(De)),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[16px] leading-tight truncate"},De),React.createElement("div",{className:"text-[12px] text-white/60"},we("streakDays",0)," day streak \u2022 ",we("totalSessions",0)," sessions \u2022 ",$t," badges"))),React.createElement("button",{type:"button",onClick:()=>{try{var gt=typeof Rr=="function"?Rr():window.__FOF_CLIENT_CONTEXT||{},_e=String(gt&&gt.tier?gt.tier:"FREE").toUpperCase(),ve={pdf:_e==="FREE"},me=(Oe||[]).filter(Z=>Z&&Z.earned),j=me.slice(0,12).map(Z=>({icon:Z.icon||"\u{1F3C5}",name:Z.name||"Badge"})),je=[];try{(N||[]).forEach(Z=>{Z&&Z.name&&je.push(`Pinned: ${Z.name}`)})}catch(Z){}je.length||me.slice(0,6).forEach(Z=>{Z&&Z.name&&je.push(Z.name)});var re={kind:"ACHIEVEMENTS",sheetTitle:"Share & Export",kicker:"Profile",title:De||"You",subtitle:`${we("streakDays",0)} day streak \u2022 ${we("totalSessions",0)} sessions`,stats:[{label:"Streak",value:String(we("streakDays",0))},{label:"Sessions",value:String(we("totalSessions",0))},{label:"Badges",value:String($t||0)},{label:"XP",value:String(we("xpTotal",0))}],lines:je,badges:j,metaChips:[_e==="PAID"?"Premium":_e==="TRIAL"?"Trial":"Free",`${$t||0} badges earned`],locks:ve,paywallFeatureKey:"Share & Export",meta:{coachApproved:!1,source:"PROFILE_IDENTITY"}};if(typeof window.__fof_openShareExport=="function")window.__fof_openShareExport(re);else try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"SHARE_EXPORT_SHEET_V1",props:{payload:re}}}))}catch(Z){}}catch(gt){}},className:"h-10 px-4 rounded-2xl border border-white/12 bg-white/5 text-[12px] font-extrabold text-white/85 hover:bg-white/10"},"Share")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Pinned badges"),React.createElement("div",{className:"text-[12px] text-white/55"},(N||[]).length,"/3")),N&&N.length?React.createElement("div",{className:"mt-2 flex gap-2"},N.slice(0,3).map(gt=>React.createElement("div",{key:gt.id,className:"flex-1 rounded-2xl border border-white/10 bg-black/20 p-2"},React.createElement("div",{className:"text-[18px] leading-none"},gt.icon),React.createElement("div",{className:"mt-1 text-[12px] text-white font-bold truncate"},gt.name),React.createElement("div",{className:"text-[11px] text-white/55"},gt.rarity)))):React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Pin up to 3 badges to show your identity across the app.")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Streak"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[18px]"},we("streakDays",0)," days")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Workouts"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[18px]"},we("workoutCount",0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Check-ins"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[18px]"},we("checkinCount",0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},"Challenges"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[18px]"},we("challengesCompleted",0)," done"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-extrabold"},"Badges"),React.createElement("div",{className:"text-[12px] text-white/55"},Oe.filter(gt=>gt.earned).length," earned")),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},Oe.slice().sort((gt,_e)=>(_e.earned?1:0)-(gt.earned?1:0)).map(gt=>{var _e=de.includes(gt.id),ve=h&&gt.earned;return React.createElement("button",{key:gt.id,type:"button",disabled:!ve,onClick:()=>ve?Ne(gt.id):null,className:["text-left rounded-2xl border p-2 transition",gt.earned?"border-white/10 bg-black/20 hover:bg-black/25":"border-white/5 bg-black/10 opacity-60",ve?"cursor-pointer":"cursor-default",ve&&_e?"ring-2 ring-emerald-400/40":""].join(" ")},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[18px] leading-none"},gt.icon),React.createElement("div",{className:"mt-1 text-[12px] text-white font-bold"},gt.name),React.createElement("div",{className:"text-[11px] text-white/55"},gt.rarity)),h?React.createElement("div",{className:"text-[11px] font-extrabold text-white/70"},gt.earned?_e?"Pinned":"Pin":"Locked"):null))})),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},h?"Tap earned badges to pin (max 3).":"Earn badges by staying consistent. Pins appear across your profile and community identity.")))},fs=({persona:e})=>React.createElement("div",{className:"max-w-5xl mx-auto px-4 pt-5 pb-32"},React.createElement("div",{className:"rounded-[28px] border border-white/12 bg-white/5 backdrop-blur-xl p-5"},React.createElement("div",{className:"text-white font-extrabold text-[18px]"},"Community"),React.createElement("div",{className:"mt-1 text-white/60 text-[13px]"},"Loading Community\u2026"))),Mo=()=>{switch(Js){case xt.TODAY:return React.createElement(ms,{persona:zo,todaySubTab:Oo,setTodaySubTab:Ls});case xt.PLAN:return React.createElement(yl,{persona:zo,planSubTab:ur,setPlanSubTab:Tr});case xt.TRACK:case xt.LOG:return window.__SXEP_FLAGS&&window.__SXEP_FLAGS.A2_TRACK?React.createElement(vt,{persona:zo}):React.createElement(Ge,{persona:zo,logSubTab:Go,setLogSubTab:vo});case xt.COACH:{var e=Number(xo)||0,a=e<=33?"LOW":e<=66?"MID":"HIGH";return React.createElement("div",{className:"max-w-5xl mx-auto px-4 pt-5 pb-32"},React.createElement(Bi,{persona:zo,tier:Di,clientMode:Ft,capNow:e,zone:a,openLibrary:()=>pt(xt.LIBRARY)}))}case xt.INSIGHTS:return React.createElement(Ge,{persona:zo,logSubTab:Go,setLogSubTab:vo});case xt.COMMUNITY:return React.createElement(Fi,{persona:zo});case xt.PROFILE:return React.createElement(Td,null);case xt.LIBRARY:return React.createElement(Kn,{tier:Di,onBack:()=>pt(xt.PLAN)});default:return React.createElement(Bo,{title:"Client Dashboard",note:"Unknown view. Showing safe placeholder."})}},[Di,dn]=React.useState(lt||"FREE"),An="fof_user_context_v1",Hr="fof_entitlements_v1";React.useEffect(()=>{try{var e=localStorage.getItem(An);if(!e)return;var a=JSON.parse(e);a&&a.tier&&a.tier!==Di&&dn(a.tier),a&&a.clientMode&&a.clientMode!==Ft&&Rt(a.clientMode)}catch(e){}},[]);var Wr=e=>{try{var a=(e||"FREE").toString().toUpperCase();dn(a);try{window.__fof_setClientAxis&&window.__fof_setClientAxis("tier",a)}catch(r){}try{var r=JSON.parse(localStorage.getItem(An)||"{}");localStorage.setItem(An,JSON.stringify({...r,tier:a,clientMode:Ft}))}catch(r){}try{var c={subscriptionStatus:"ACTIVE",...JSON.parse(localStorage.getItem(Hr)||"{}"),tier:a};localStorage.setItem(Hr,JSON.stringify(c)),window.__fof_entitlements=c}catch(r){}}catch(a){}};React.useEffect(()=>{try{var e=JSON.parse(localStorage.getItem(An)||"{}");localStorage.setItem(An,JSON.stringify({...e,tier:Di,clientMode:Ft}))}catch(e){}try{var a={subscriptionStatus:"ACTIVE",...JSON.parse(localStorage.getItem(Hr)||"{}"),tier:Di};localStorage.setItem(Hr,JSON.stringify(a)),window.__fof_entitlements=a}catch(e){}},[Di,Ft]),React.useEffect(()=>{try{var e=localStorage.getItem(Hr)||localStorage.getItem("FOF_ENTITLEMENTS_V1")||"",a=e?JSON.parse(e)||{}:{},r=localStorage.getItem(An)||"",c=r?JSON.parse(r)||{}:{},h=String(Di||"").toUpperCase(),V=String(a.tier||"").toUpperCase(),de=String(c.tier||"").toUpperCase();if(!(h==="TRIAL"||V==="TRIAL"||de==="TRIAL")||!a.trialEndAt)return;var De=new Date(a.trialEndAt).getTime();if(Number.isNaN(De)||Date.now()<De)return;var Oe="fof_trial_expired_prompted_v1::"+(typeof window.__fof_localDateKey=="function"?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10));if(!!!a.__debugForceTrialPrompt&&localStorage.getItem(Oe))return;localStorage.setItem(Oe,String(Date.now())),window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"TRIAL_EXPIRED_LADDER_SHEET_V1",props:{from:"APP_MOUNT",ent:a}}}))}catch(e){}},[Di,Ft]);try{typeof window.__fof_debug_showTrialExpiredLadder!="function"&&(window.__fof_debug_showTrialExpiredLadder=()=>{try{var e=localStorage.getItem(Hr)||localStorage.getItem("FOF_ENTITLEMENTS_V1")||"{}",a=JSON.parse(e||"{}")||{};window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"TRIAL_EXPIRED_LADDER_SHEET_V1",props:{from:"DEBUG",ent:a}}}))}catch(e){}}),typeof window.__fof_debug_clearTrialExpiredPrompt!="function"&&(window.__fof_debug_clearTrialExpiredPrompt=()=>{try{Object.keys(localStorage).filter(e=>e.startsWith("fof_trial_expired_prompted_v1::")).forEach(e=>localStorage.removeItem(e))}catch(e){}})}catch(e){}var On=Di==="TRIAL"||Di==="AI"||Di==="PAID"||Di==="PREMIUM"||Di==="PRO",[zn,xl]=React.useState(()=>!!Ks("fof_qa_mode_v1",!1));React.useEffect(()=>{try{Fs("fof_qa_mode_v1",!!zn)}catch(e){}},[zn]);var[qr,hl]=React.useState(ge==="SELECT"&&rt==="MODE"),[Sn,Be]=React.useState(null),[Ia,q]=React.useState({effort:null,pain:null,note:""}),Ea=React.useMemo(()=>"fof_plan_history_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT"),[Ds,Ft]),[Ts,bo]=React.useState(()=>{try{var e=localStorage.getItem(Ea);if(e)return JSON.parse(e)}catch(e){}return[]});React.useEffect(()=>{try{localStorage.setItem(Ea,JSON.stringify(Ts.slice(0,60)))}catch(e){}},[Ea,Ts]);var Fo=React.useCallback(e=>{var r;var a={id:(e==null?void 0:e.id)||"s_"+Date.now(),ts:(e==null?void 0:e.ts)||Date.now(),title:(e==null?void 0:e.title)||"Session",summary:(e==null?void 0:e.summary)||"",doneSets:Number((e==null?void 0:e.doneSets)||0),durationMin:(r=e==null?void 0:e.durationMin)!=null?r:null,source:(e==null?void 0:e.source)||null,variantId:(e==null?void 0:e.variantId)||null};bo(c=>[a,...Array.isArray(c)?c:[]].slice(0,60)),Be(a),q({effort:null,pain:null,note:""});try{pt("TODAY")}catch(c){}try{eo("client.session.completed",{surfaceKey:Ds,clientMode:Ft,sessionId:a.id,doneSets:a.doneSets})}catch(c){}},[Ds,Ft]),Ss=React.useCallback((e={})=>{q(a=>({...a||{},...e||{}}))},[]),Cn=React.useCallback(()=>{if(!Sn)return;var e="fof_session_feedback_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT");try{var a=JSON.parse(localStorage.getItem(e)||"[]"),r=Array.isArray(a)?a.slice():[];r.unshift({id:"fb_"+Date.now(),ts:Date.now(),sessionId:Sn.id,effort:(Ia==null?void 0:Ia.effort)||null,pain:(Ia==null?void 0:Ia.pain)||null,note:((Ia==null?void 0:Ia.note)||"").slice(0,240)}),localStorage.setItem(e,JSON.stringify(r.slice(0,100)))}catch(a){}try{eo("client.session.feedback.saved",{surfaceKey:Ds,clientMode:Ft,sessionId:Sn.id,effort:Ia==null?void 0:Ia.effort,pain:Ia==null?void 0:Ia.pain})}catch(a){}Be(null)},[Sn,Ia,Ds,Ft]),[zs,So]=React.useState(()=>"FITNESS"),[mn,Yi]=React.useState(()=>{try{var e=window.__fof_getClientContext?window.__fof_getClientContext():null;return e&&e.entitlements&&e.entitlements.yogaAccess?e.entitlements.yogaAccess:"NONE"}catch(e){return"NONE"}});React.useEffect(()=>{var e=a=>{try{var r=a&&a.detail&&a.detail.clientContext&&a.detail.clientContext.entitlements&&a.detail.clientContext.entitlements.yogaAccess?a.detail.clientContext.entitlements.yogaAccess:"NONE";Yi(r);try{var c=a&&a.detail&&a.detail.clientContext?a.detail.clientContext:window.__fof_getClientContext?window.__fof_getClientContext():null;if(c){var h=c.relationship?String(c.relationship).toUpperCase():null,V=c.tier?String(c.tier).toUpperCase():null,de=c.emphasis?String(c.emphasis).toUpperCase():null;h&&Rt(h==="LINKED"?"LINKED":"INDEPENDENT"),V&&dn(V),de&&So(de)}}catch(c){}}catch(r){}};return window.addEventListener("flowofit:clientContextChanged",e),()=>window.removeEventListener("flowofit:clientContextChanged",e)},[]);var[js,Qo]=React.useState(null);React.useEffect(()=>{},[zs]);var zo=React.useMemo(()=>{var e=String(js||zs||"FITNESS").toUpperCase(),a=e.includes("HYBRID")?"HYBRID":e.includes("NUTRITION")?"NUTRITION":e.includes("YOGA")?"YOGA":"FITNESS",r=String(Di||"FREE").toUpperCase(),c=r==="AI"||r==="PAID"?"PAID":r==="TRIAL"?"TRIAL":"FREE",V=String(Ft||"INDEPENDENT").toUpperCase()==="LINKED"?"LINKED":"INDEPENDENT";return{goalCategory:a,tier:c,clientMode:V}},[js,zs,Di,Ft]),[ur,Tr]=React.useState(null),[Oo,Ls]=React.useState(null);React.useEffect(()=>{try{li(ea)===xt.TODAY&&Ls(null)}catch(e){}},[ea]);var[Go,vo]=React.useState(null),[xo,cn]=React.useState(()=>62),[wa,ho]=React.useState(()=>48),[Xi,gs]=React.useState(()=>71),[Do,ir]=React.useState(!1),[Dr,rr]=React.useState(!1),[mr,kr]=React.useState(()=>{try{return window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null}catch(e){return null}}),[hn,Un]=React.useState(!1);React.useEffect(()=>{var e=a=>{try{var r=a&&a.detail&&a.detail.selectedDayKey?a.detail.selectedDayKey:window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():null;r&&kr(String(r))}catch(r){}};try{window.addEventListener("flowofit:selectedDayChanged",e)}catch(a){}return()=>{try{window.removeEventListener("flowofit:selectedDayChanged",e)}catch(a){}}},[]);var Ln=e=>{try{var a=String(mr||(window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():new Date().toISOString().slice(0,10))),r=new Date(a+"T00:00:00");if(Number.isNaN(r.getTime()))return;r.setDate(r.getDate()+(Number(e)||0));var c=r.getFullYear(),h=String(r.getMonth()+1).padStart(2,"0"),V=String(r.getDate()).padStart(2,"0"),de=`${c}-${h}-${V}`;window.__fof_setSelectedDayKey?window.__fof_setSelectedDayKey(de):kr(de)}catch(a){}},Pr=React.useMemo(()=>{try{var e=window.__fof_dayFlags?window.__fof_dayFlags(mr):{isToday:!1,isPast:!1,isFuture:!1,todayKey:null,selectedDayKey:mr},a=String(e.selectedDayKey||mr||""),r=String(e.todayKey||(window.__fof_localDateKey?window.__fof_localDateKey(new Date):new Date().toISOString().slice(0,10))),c=new Date(r+"T00:00:00");c.setDate(c.getDate()-1);var h=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;if(a===r)return{title:"TODAY",subtitle:""};if(a===h)return{title:"YESTERDAY",subtitle:""};var V=new Date(a+"T00:00:00");if(Number.isNaN(V.getTime()))return{title:a,subtitle:""};var de=V.toLocaleDateString(void 0,{weekday:"short"}),M=V.toLocaleDateString(void 0,{month:"short"}),De=V.getDate();return{title:`${de}, ${M} ${De}`,subtitle:a}}catch(e){return{title:"TODAY",subtitle:""}}},[mr]),Cl=React.useRef({x:0,t:0}),ld=e=>{try{var a=e.touches&&e.touches[0]?e.touches[0].clientX:0;Cl.current={x:a,t:Date.now()}}catch(a){}},dd=e=>{try{var a=Cl.current||{x:0,t:0},c=(e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].clientX:a.x)-a.x;if(Date.now()-(a.t||0)>800||Math.abs(c)<35)return;c<0?Ln(1):Ln(-1)}catch(a){}},[Yr,Qn]=React.useState(!1),Kr=React.useCallback(e=>{try{e&&e.preventDefault&&e.preventDefault()}catch(a){}try{e&&e.stopPropagation&&e.stopPropagation()}catch(a){}Qn(!0)},[]),[Il,$r]=React.useState(!1),[or,rn]=React.useState(!1),sr=e=>{var a=Number(e)||0;return a<=30?{band:"LOW",tone:"brand",headline:"Low capacity today",subtext:"Your system is under strain. Prioritise recovery before adding more load."}:a<=55?{band:"LIMITED",tone:"warn",headline:"Limited capacity today",subtext:"You can train, but recovery will matter more than intensity."}:a<=75?{band:"MODERATE",tone:"warn",headline:"Moderate capacity today",subtext:"You\u2019re in a good place to train, as long as load stays controlled."}:{band:"HIGH",tone:"good",headline:"High capacity today",subtext:"Your system is well-prepared to absorb training stress."}},zl=React.useMemo(()=>Jl(100-(Number(wa)||0)),[wa]),ql=React.useMemo(()=>Jl(Number(Xi)||0),[Xi]),[lr,ia]=React.useState(()=>({delta:0,signals:{fueling:0,training:0,recovery:0},updatedAtISO:null})),Es=!0;React.useEffect(()=>{if(Es)try{Ft!=="INDEPENDENT"&&Rt("INDEPENDENT"),Di==="FREE"&&dn("TRIAL")}catch(e){}},[]);var Ro=(e=new Date)=>{try{return e.toISOString().slice(0,10)}catch(a){return String(Date.now())}},un=()=>{var e=new Date;return e.setDate(e.getDate()-1),Ro(e)},Jo=React.useMemo(()=>"fof_home_decisions_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT"),[Ds,Ft]),kn=()=>{try{return JSON.parse(localStorage.getItem(Jo)||"[]")}catch(e){return[]}},ln=e=>{try{localStorage.setItem(Jo,JSON.stringify((Array.isArray(e)?e:[]).slice(0,90)))}catch(a){}},fn=()=>{var e=Ro(),a=kn();return(Array.isArray(a)?a:[]).find(c=>c&&c.date===e)||null},[oo,Zn]=React.useState(()=>fn()),Or=React.useCallback((e,a={})=>{var r=Ro(),c={id:"dec_"+Date.now(),ts:Date.now(),date:r,action:String(e||"TRAIN").toUpperCase(),capAtDecision:Number(xo)||null,...a},h=kn(),V=(Array.isArray(h)?h:[]).filter(de=>de&&de.date!==r);V.unshift(c),ln(V),Zn(c);try{eo("home.decision.saved",{surfaceKey:Ds,clientMode:Ft,tier:Di,action:c.action,cap:c.capAtDecision})}catch(de){}return c},[Jo,xo,Ds,Ft,Di]),Yo=React.useCallback(e=>{var a=Number(e)||0;return a<=25?{action:"SKIP",verb:"Skip",label:"Skip",reason:"Very low capacity. Prioritize recovery and reduce load.",impact:"Protect tomorrow (+2\u20134 capacity)"}:a<=45?{action:"RECOVER",verb:"Recover",label:"Recover",reason:"Low capacity. Move lightly and downshift stress.",impact:"Stabilize tomorrow (+1\u20133 capacity)"}:a<=70?{action:"MODIFY",verb:"Modify",label:"Modify",reason:"Moderate capacity. Train, but reduce intensity/volume.",impact:"Maintain tomorrow (0 to -2 capacity)"}:{action:"TRAIN",verb:"Train",label:"Train",reason:"High capacity. Execute the plan as written.",impact:"Build fitness (tomorrow -1 to -4 depending on load)"}},[]),gn=React.useMemo(()=>{var e=kn(),a=un(),r=(Array.isArray(e)?e:[]).find(h=>h&&h.date===a);if(!r||!r.action)return 0;var c=String(r.action).toUpperCase();return c==="SKIP"?2:c==="RECOVER"?3:c==="MODIFY"?-1:c==="TRAIN"?-3:0},[Jo]),qn="fof_cap_nutrition_v1",Rl="fof_cap_traininglog_v1",[Mr,Fr]=React.useState(()=>{try{var e=localStorage.getItem(qn);if(e)return JSON.parse(e)}catch(e){}return null}),[on,Tl]=React.useState(()=>{try{var e=localStorage.getItem(Rl);if(e)return JSON.parse(e)}catch(e){}return[]});React.useEffect(()=>{try{localStorage.setItem(qn,JSON.stringify(Mr))}catch(e){}},[Mr]),React.useEffect(()=>{try{localStorage.setItem(Rl,JSON.stringify(on))}catch(e){}},[on]);var Er=e=>Math.max(0,Math.min(1,Number(e)||0)),xr=(e,a,r)=>Math.max(a,Math.min(r,Number(e)||0)),Jr=React.useCallback(()=>{var e=xr(Xi,0,100);var a=1;if(e>=80?a=1.1:e>=60?a=1:e>=40?a=.9:a=.8,Mr&&Mr.targetCals&&Mr.actualCals){var r=Math.max(1,Number(Mr.targetCals)||1),h=Math.max(0,Number(Mr.actualCals)||0)/r,V=Er(1-Math.min(1.25,Math.abs(1-h)));a+=(V-.5)*.06}return xr(a,.75,1.15)},[Xi,Mr]),jr=React.useCallback(()=>{var de;var e=Array.isArray(on)?on:[];if(!e.length)return 0;var a=e.slice(-7).reverse(),r=[1,.85,.7,.55,.4,.25,.15],c=M=>{var De=String(M||"").toUpperCase();return De.includes("HIGH")?3:De.includes("MOD")?2:De.includes("LOW")?1:2};var h=0;for(var M=0;M<a.length;M++){var De=a[M]||{},Ae=(de=r[M])!=null?de:.15;h+=Ae*c(De.intensity||De.level||De.loadLevel||"MODERATE")}var V=Math.round(h*6);return xr(V,0,55)},[on]),$l=e=>{var a=xr(e,0,100);return a<=33?"LOW":a<=66?"MID":"HIGH"},Ol=React.useCallback(e=>{var a=e||"MID",r={fitness:a==="LOW"?"DELOAD":a==="HIGH"?"PROGRESS":"MAINTAIN",nutrition:a==="LOW"?"RECOVERY_FUEL":a==="HIGH"?"PERFORMANCE_FUEL":"MAINTAIN",yoga:a==="LOW"?"RESTORE":a==="HIGH"?"FLOW_STRENGTH":"BALANCE",hybrid:a==="LOW"?"RECOVERY_BIAS":a==="HIGH"?"PROGRESS_BIAS":"BALANCED"};return r._goal=zo&&zo.goalCategory?zo.goalCategory:"FITNESS",r},[zo]),Ll=React.useCallback(()=>{var e=typeof window!="undefined"&&window.__FOF_CAPACITY_MOCK?window.__FOF_CAPACITY_MOCK:null;var a=62;var r=Jr(),c=jr();var h;if(e&&typeof e=="object")if(typeof e.score=="number")h=xr(e.score,0,100);else{a=typeof e.base=="number"?e.base:a;var M=typeof e.recoveryMod=="number"?e.recoveryMod:r,De=typeof e.loadPenalty=="number"?e.loadPenalty:c;h=xr(Math.round(a*M-De),0,100)}else h=xr(Math.round(a*r-c),0,100);var V=$l(h),de=Ol(V);return{score:h,zone:V,components:{base:a,recoveryMod:xr(r,.5,1.5),loadPenalty:xr(c,0,100)},modifiers:de}},[Jr,jr,Ol]);React.useEffect(()=>{try{var e=Ll();cn(e.score),window.__FOF_LAST_CAPACITY=e,window.__FOF=window.__FOF||{},window.__FOF.getCapacity=()=>window.__FOF_LAST_CAPACITY||{score:xo,zone:$l(xo)},window.__FOF.setCapacityMock=a=>{window.__FOF_CAPACITY_MOCK=a;try{window.__FOF_FORCE_CAPACITY_RECALC&&window.__FOF_FORCE_CAPACITY_RECALC()}catch(r){}},window.__FOF.clearCapacityMock=()=>{try{delete window.__FOF_CAPACITY_MOCK}catch(a){window.__FOF_CAPACITY_MOCK=null}try{window.__FOF_FORCE_CAPACITY_RECALC&&window.__FOF_FORCE_CAPACITY_RECALC()}catch(a){}},window.__FOF_FORCE_CAPACITY_RECALC=()=>{try{var a=Ll();cn(a.score),window.__FOF_LAST_CAPACITY=a}catch(a){}}}catch(e){}},[Ll]);var[xd,Dl]=React.useState(()=>[{id:"h_water",label:"Hydration",target:"2.5L",done:!1,streak:4},{id:"h_steps",label:"Steps",target:"8k+",done:!0,streak:7},{id:"h_sleep",label:"Sleep",target:"7.5h",done:!1,streak:2},{id:"h_mob",label:"Mobility",target:"10 min",done:!0,streak:5}]),[gl,Sc]=React.useState("FOR_YOU"),[er,hd]=React.useState(()=>{try{return new Set(JSON.parse(localStorage.getItem("fof_saved_library_v1")||"[]"))}catch(e){return new Set}});React.useEffect(()=>{try{localStorage.setItem("fof_saved_library_v1",JSON.stringify(Array.from(er)))}catch(e){}},[er]);var zd=React.useMemo(()=>Ft==="LINKED"?"Coach":Di==="AI"?"AI Coach":"Guidance",[Ft,Di]),Ds=React.useMemo(()=>"client:"+Ft+":"+Di+":"+zs,[Ft,Di,zs]);React.useEffect(()=>{Ft==="LINKED"&&Di!=="FREE"&&dn("FREE")},[Ft]),React.useEffect(()=>{try{eo("dashboard.client.opened",{mode:Ft,tier:Di,focusPillar:zs,dashboardType:bt,source:"CLIENT_DASH"})}catch(e){}},[]);function Jl(e,a=0,r=100){return Math.max(a,Math.min(r,e))}var qd=({label:e,value:a,tone:r="brand",delta:c=null,onClick:h})=>React.createElement("button",{type:"button",onClick:V=>{try{V.preventDefault(),V.stopPropagation()}catch(de){}h&&h(V)},className:"inline-flex items-center gap-2 rounded-full border px-5 py-2.5 text-[14px] font-extrabold ring-1 ring-white/10 backdrop-blur-xl shadow-[0_14px_40px_rgba(0,0,0,0.35)] transition-all hover:translate-y-[-1px] hover:shadow-[0_18px_55px_rgba(0,0,0,0.45)] "+(r==="good"?"border-emerald-400/45 bg-emerald-400/12 text-emerald-100":r==="warn"?"border-amber-400/45 bg-amber-400/12 text-amber-100":"border-sky-400/45 bg-sky-400/12 text-sky-100"),title:e+" details"},React.createElement("span",{className:"uppercase tracking-[0.22em] text-[10px] opacity-85"},e),React.createElement("span",{className:"text-white text-[15px] font-extrabold tabular-nums"},a),c!=null?React.createElement("span",{className:"ml-1 inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-black uppercase tracking-widest "+(c>0?"border-emerald-400/45 bg-emerald-400/10 text-emerald-200":c<0?"border-rose-400/45 bg-rose-400/10 text-rose-200":"border-white/15 bg-white/5 text-white/70")},c>0?"+":"",c):null,React.createElement(gi,{name:"ChevronRight",size:16,className:"opacity-80"}));var Dn=({title:e,subtitle:a,right:r,children:c,className:h="",onClick:V=null})=>{var de=typeof V=="function",M="relative overflow-hidden rounded-3xl border border-white/12 bg-gradient-to-b from-white/10 to-white/5 backdrop-blur-xl ring-1 ring-white/5 shadow-[0_18px_60px_rgba(0,0,0,0.55)] "+(h||""),De=de?{role:"button",tabIndex:0,onClick:Oe=>{try{Oe&&Oe.preventDefault&&Oe.preventDefault(),Oe&&Oe.stopPropagation&&Oe.stopPropagation()}catch(N){}try{V(Oe)}catch(N){}},onKeyDown:Oe=>{try{if(!Oe)return;var N=Oe.key;if(N==="Enter"||N===" "){Oe.preventDefault();try{V(Oe)}catch(Ne){}}}catch(N){}},className:M+" text-left w-full active:scale-[0.99] transition",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"}}:{className:M};return React.createElement("div",{...De},React.createElement("div",{className:"pointer-events-none absolute inset-0 opacity-60",style:{background:"radial-gradient(800px 240px at 20% 0%, rgba(255,255,255,0.16), transparent 55%)"}}),React.createElement("div",{className:"px-5 pt-5 pb-3 flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},e),a?React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},a):null),r),React.createElement("div",{className:"px-5 pb-5"},c))};var Xo=({children:e,onClick:a,tone:r="sky",className:c="",icon:h,disabled:V=!1})=>React.createElement("button",{type:"button",onClick:de=>{try{de&&de.preventDefault&&de.preventDefault()}catch(M){}try{de&&de.stopPropagation&&de.stopPropagation()}catch(M){}if(!V)try{a&&a(de)}catch(M){}},className:"w-full rounded-2xl px-4 py-3 font-semibold text-[13px] flex items-center justify-center gap-2 border transition-colors "+(V?"opacity-60 cursor-not-allowed":"")+`
                `+(r==="lime"?"bg-[rgba(16,255,97,0.12)] border-[rgba(16,255,97,0.35)] text-white hover:bg-[rgba(16,255,97,0.18)]":r==="violet"?"bg-[rgba(168,85,255,0.12)] border-[rgba(168,85,255,0.35)] text-white hover:bg-[rgba(168,85,255,0.18)]":"bg-[rgba(77,233,255,0.12)] border-[rgba(77,233,255,0.35)] text-white hover:bg-[rgba(77,233,255,0.18)]")+`
                `+c},h?React.createElement(gi,{name:h,size:16}):null,e),$d=e=>{try{return localStorage.getItem(e)||null}catch(a){return null}},Ad=(e,a)=>{try{localStorage.setItem(e,a)}catch(r){}},Jd=(e,a)=>{var[r,c]=React.useState(a);return React.useEffect(()=>{var h=$d(e);if(h)try{var V=JSON.parse(h);if(!Array.isArray(V))return;var de=V.filter(De=>a.includes(De)),M=a.filter(De=>!de.includes(De));c([...de,...M])}catch(V){}},[e]),React.useEffect(()=>{Ad(e,JSON.stringify(r))},[e,r]),[r,c]},nc=({storageKey:e,tiles:a,isFree:r=!1,isLinked:c=!1})=>{var h=React.useMemo(()=>a.map(Ne=>Ne.id),[a]),[V,de]=Jd(e,h),M=React.useRef(null),De=React.useMemo(()=>{var Ne=new Map(a.map($t=>[$t.id,$t])),G=V.map($t=>Ne.get($t)).filter(Boolean),we=a.filter($t=>!V.includes($t.id));return[...G,...we]},[a,V]),Ae=Ne=>G=>{M.current=Ne;try{G.dataTransfer.effectAllowed="move"}catch(we){}},Oe=Ne=>G=>{G.preventDefault();var we=M.current;!we||we===Ne||de($t=>{var gt=[...$t],_e=gt.indexOf(we),ve=gt.indexOf(Ne);return _e<0||ve<0?$t:(gt.splice(_e,1),gt.splice(ve,0,we),gt)})},N=()=>()=>{M.current=null};return React.createElement("div",{className:"space-y-4"},r&&React.createElement(Dn,{title:"Upgrade to edit your plan",subtitle:"Swap + reschedule + change log unlock in Trial / AI",right:React.createElement(NeonPill,{tone:"amber"},"Locked")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},__showExec&&React.createElement("div",{className:"mb-3 rounded-2xl border px-3 py-2 "+(__capZone==="RED"?"border-rose-500/35 bg-rose-500/10":"border-amber-400/30 bg-amber-400/10")},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/65 font-bold"},"Fueling adjustment"),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/80"},__capZone==="RED"?"Prioritize recovery today: ease restriction + hydrate.":"Support today: small intake bump can stabilize capacity."),(__nutAltApplied||__nutNotifiedCoach)&&React.createElement("div",{className:"mt-1 text-[10px] text-white/60"},__nutAltApplied?"Alternate applied (demo).":"Sent to coach for approval.")),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center overflow-hidden",onClick:wi,"aria-label":"Open profile",title:"Profile"},React.createElement("div",{className:"h-full w-full bg-gradient-to-br from-cyan-400 via-sky-400 to-lime-400 flex items-center justify-center"},React.createElement("span",{className:"text-black font-extrabold text-[12px]"},"F"))),React.createElement("button",{type:"button",className:"h-9 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center gap-2 px-3",onClick:()=>ci(""),"aria-label":"Open command bar",title:"Command Bar (CTRL+K)"},React.createElement("span",{className:"text-white/80"},"\u2315"),React.createElement("span",{className:"text-[12px] text-white/70"},"Search")),Ft==="LINKED"?React.createElement("button",{type:"button",onClick:sendNutritionToCoach,className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Send"):Di==="AI"||Di==="TRIAL"||Di==="PAID"?React.createElement("button",{type:"button",onClick:applyNutritionAlternate,className:"px-3 py-2 rounded-2xl border text-[12px] font-semibold text-white "+(__capZone==="RED"?"border-rose-500/40 bg-rose-500/15 hover:bg-rose-500/20":"border-amber-400/40 bg-amber-400/15 hover:bg-amber-400/20")},"Apply"):React.createElement("button",{type:"button",onClick:()=>Si("Upgrade for nutrition alternates","AI tier can adjust daily nutrition targets on low-capacity days."),className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Upgrade")))),React.createElement("div",{className:"text-[13px] text-white/80"},"You can view your week, but edits are disabled on the Free tier."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement(Xo,{tone:"aqua",onClick:()=>Si("Upgrade","In production, this would open your upgrade flow (Trial / AI).")},"Start Trial / Upgrade"),React.createElement("button",{type:"button",className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80",onClick:()=>Si("Why locked?","Swap/reschedule requires capacity + recovery logic and is offered on Trial/AI.")},"Why locked?")))),c&&React.createElement(Dn,{title:"Requests",subtitle:"Your changes require coach approval",right:React.createElement(NeonPill,{tone:"purple"},"Coach")},React.createElement("div",{className:"space-y-2"},requests&&requests.length>0?requests.slice(0,6).map(Ne=>{var G,we;return React.createElement("div",{key:Ne.id,className:"rounded-2xl border border-white/12 bg-white/5 p-3 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},Ne.kind," \u2022 ",(G=Ne.from)==null?void 0:G.day," \u2192 ",((we=Ne.to)==null?void 0:we.day)||"TBD"),React.createElement("div",{className:"text-[11px] text-white/70"},Ne.status==="PENDING"?"Pending coach approval":Ne.status==="APPROVED"?"Approved":"Rejected")),Ne.status==="PENDING"&&React.createElement(Xo,{tone:"lime",onClick:()=>approveRequest(Ne.id)},"Simulate coach approval"))}):React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3 text-[12px] text-white/70"},"No requests yet. Use \u201CAsk coach to approve\u201D inside a session."))),De.map(Ne=>React.createElement("div",{key:Ne.id,onDragOver:Oe(Ne.id),onDrop:N(),className:"relative"},React.createElement("div",{draggable:!0,onDragStart:Ae(Ne.id),className:"absolute -top-2 -right-2 z-10 p-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 cursor-move select-none",title:"Drag to reorder","aria-label":"Drag to reorder"},React.createElement(gi,{name:"GripVertical",size:16})),React.createElement("div",{className:"pointer-events-auto"},Ne.node))))},rc=()=>{var e=React.useMemo(()=>Ft==="LINKED"?{title:"Next best action",main:"Complete today\u2019s check-in",sub:"Your coach uses this to auto-adjust your plan this week.",cta:"Open check-in",icon:"ClipboardCheck",tone:"violet",onClick:()=>{try{eo("client.action.open_checkin",{surfaceKey:Ds})}catch(a){}Si("Daily check-in",`Client-facing flow.

In production this opens the check-in experience and emits:
- checkin.opened
- checkin.submitted
- readiness.recomputed (if applicable)`)}}:Di==="AI"?{title:"Next best action",main:"Run an AI plan tune-up",sub:"We\u2019ll update intensity + recovery from your week so far.",cta:"Tune my plan",icon:"Sparkles",tone:"lime",onClick:()=>{try{eo("client.action.ai_tuneup",{surfaceKey:Ds})}catch(a){}Si("AI tune-up",`AI Coach action (paid / trial).

In production this would:
- compute weekly load + readiness
- suggest adjustments (volume/intensity/recovery)
- allow user confirmation
- emit ai.plan.adjusted`)}}:{title:"Next best action",main:"Pick today\u2019s focus",sub:"Follow the simplest action that moves your goal forward.",cta:"Show options",icon:"Target",tone:"sky",onClick:()=>{try{eo("client.action.pick_focus",{surfaceKey:Ds})}catch(a){}Si("Today focus options",`For free users, we keep guidance lightweight.

In production:
- show 2\u20133 curated options
- offer upgrade to AI Coach for deeper tuning`)}},[Ft,Di,Ds]);return React.createElement(Dn,{title:e.title,subtitle:e.sub,right:React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("div",{className:"hidden sm:block text-[10px] font-mono text-white/50"},"drag tiles below"),React.createElement("button",{type:"button",onClick:()=>Si("Dashboard personalization",`This dashboard supports card-level drag & drop.

We save your layout per dashboard surface:
- Mode: `+Ft+`
- Tier: `+Di+`
- Focus: `+zs),className:"p-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10",title:"About layout"},React.createElement(gi,{name:"Info",size:16}))),className:"border-white/20"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center border
                            `+(e.tone==="lime"?"bg-[rgba(16,255,97,0.12)] border-[rgba(16,255,97,0.35)]":e.tone==="violet"?"bg-[rgba(168,85,255,0.12)] border-[rgba(168,85,255,0.35)]":"bg-[rgba(77,233,255,0.12)] border-[rgba(77,233,255,0.35)]")},React.createElement(gi,{name:e.icon,size:22,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white text-[16px] font-extrabold leading-tight"},e.main),React.createElement("div",{className:"mt-1 text-white/65 text-[12px] max-w-[520px]"},Ft==="LINKED"?"Fastest way for your coach to keep your plan aligned with your week.":Di==="AI"?"Your AI Coach adapts week-to-week as your data changes.":"Keep it simple. Consistency beats perfection."))),React.createElement("div",{className:"min-w-[160px]"},React.createElement(Xo,{tone:e.tone,onClick:e.onClick,icon:"ChevronRight"},e.cta))))},lc=()=>{var e=Ft==="LINKED",a=!e&&(Di==="AI"||Di==="TRIAL"||Di==="PAID"),r=!e&&Di==="FREE",c=Number(xo)||0,h=sr(c),V=h.band==="MODERATE"?"AMBER":h.band==="LIMITED"||h.band==="CRITICAL"?"RED":"GREEN",de=V==="AMBER"||V==="RED",M=Yo(c),De=oo&&oo.action?String(oo.action).toUpperCase():M.action,Ae="fof_session_variant_today_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT"),Oe=nt=>{var Lt=String(nt||"").toUpperCase(),ze={recommended:M.action,capZone:V};Or(Lt,ze);var Le=null;Lt==="RECOVER"&&(Le="SWAP_RECOVERY"),Lt==="MODIFY"&&(Le="LIGHTEN");try{Le?localStorage.setItem(Ae,JSON.stringify({date:__todayKey(),status:"APPLIED",variantId:Le})):localStorage.removeItem(Ae)}catch(se){}try{Lt==="TRAIN"&&window.__toast&&window.__toast("Action set: Train"),Lt==="MODIFY"&&window.__toast&&window.__toast("Action set: Modify (lighter)"),Lt==="RECOVER"&&window.__toast&&window.__toast("Action set: Recover"),Lt==="SKIP"&&window.__toast&&window.__toast("Action set: Skip")}catch(se){}},N="fof_linked_ai_triage_v1::"+(Ds||"demo_surface"),[Ne,G]=React.useState(!1),[we,$t]=React.useState(!1),[gt,_e]=React.useState(!1),ve=React.useMemo(()=>{var nt=zs==="YOGA"?"Yoga flow":zs==="NUTRITION"?"Nutrition day":"Training session";return e?nt+" (coach plan)":a?nt+" (AI-assisted)":nt+" (basic)"},[zs,e,a]),me=React.useMemo(()=>zs==="YOGA"?V==="RED"?"Restorative \u2022 15\u201320 min":"Vinyasa \u2022 ~25 min":zs==="NUTRITION"?V==="RED"?"Recovery fueling \u2022 hydration focus":"Balanced day \u2022 hit protein":V==="RED"?"Technique + Zone 2 \u2022 30\u201340 min":"Strength \u2022 ~45 min",[zs,V]),j=()=>{if(!oo)try{Oe(M.action)}catch(oa){}if(De==="SKIP"){try{Or("SKIP",{recommended:M.action,capZone:V,note:"Skipped from HOME"})}catch(oa){}Si("Skipped today",`You chose to skip.

Why this matters:
\u2022 Capacity protects tomorrow
\u2022 Skipping today avoids digging a deeper hole

Tomorrow impact: likely +2 capacity (demo).`);return}try{eo("home.today.start",{surfaceKey:Ds,mode:e?"LINKED":"INDEPENDENT",tier:Di,capZone:V})}catch(oa){}var nt="sess_"+Date.now(),Lt=e?"COACH":a?"AI":"BASIC";var ze=null;try{ze=JSON.parse(localStorage.getItem(Ae)||"null")}catch(oa){ze=null}var Le=ze&&ze.date===__todayKey()&&(ze.status==="APPLIED"||ze.status==="APPROVED")?ze.variantId:null,at=(()=>{if(zs==="YOGA")return[{id:"ex_y1",name:"Breathwork",sets:[{t:"5 min"}],note:"Nasal breathing"},{id:"ex_y2",name:V==="RED"?"Restorative flow":"Vinyasa flow",sets:[{t:V==="RED"?"15\u201320 min":"25 min"}],note:"Move smoothly"},{id:"ex_y3",name:"Stretch / cooldown",sets:[{t:"5\u20138 min"}],note:"Hips + back"}];if(zs==="NUTRITION")return[{id:"ex_n1",name:"Protein target",sets:[{t:"Hit your target"}],note:"Spread across meals"},{id:"ex_n2",name:"Hydration",sets:[{t:"2\u20133 L"}],note:"Add electrolytes if needed"},{id:"ex_n3",name:"Carb timing",sets:[{t:"Support training"}],note:"Especially if training today"}];var oa=[{id:"ex1",name:"Warm-up",sets:[{reps:"5\u20138 min",rpe:""}],note:"Mobility + activation"},{id:"ex2",name:"Back Squat",sets:[{reps:"6",rpe:"7"},{reps:"6",rpe:"7"},{reps:"6",rpe:"7"},{reps:"6",rpe:"7"}],note:"Controlled tempo"},{id:"ex3",name:"Romanian Deadlift",sets:[{reps:"8",rpe:"7"},{reps:"8",rpe:"7"},{reps:"8",rpe:"7"}],note:"Hamstring tension"},{id:"ex4",name:"Split Squat",sets:[{reps:"10",rpe:"7"},{reps:"10",rpe:"7"},{reps:"10",rpe:"7"}],note:"Each leg"},{id:"ex5",name:"Core",sets:[{reps:"45s",rpe:""},{reps:"45s",rpe:""},{reps:"45s",rpe:""}],note:"Plank variations"}];return Le==="SWAP_RECOVERY"?[{id:"ex_r1",name:"Zone-1 walk",sets:[{reps:"20\u201330 min",rpe:""}],note:"Keep it easy"},{id:"ex_r2",name:"Mobility flow",sets:[{reps:"10\u201315 min",rpe:""}],note:"Hips + T-spine"},{id:"ex_r3",name:"Breathwork",sets:[{reps:"5\u20138 min",rpe:""}],note:"Downshift recovery"}]:Le==="SHORTEN"?oa.slice(0,4).map(ri=>({...ri,sets:(ri.sets||[]).slice(0,Math.max(1,Math.ceil((ri.sets||[]).length*.6)))})):Le==="LIGHTEN"?oa.map(ri=>({...ri,sets:(ri.sets||[]).map(Da=>({...Da,rpe:Da.rpe?String(Math.max(5,(Number(Da.rpe)||7)-1)):Da.rpe}))})):oa})(),Pe=Array.isArray(at)?at:at&&Array.isArray(at.exercises)?at.exercises:[],Wt=Array.isArray(at)?at:at&&Array.isArray(at.base)?at.base:Pe,Ha={id:nt,startedAt:Date.now(),surfaceKey:Ds||"demo_surface",focusPillar:zs,capZone:V,source:Lt,plannedDate:__todayKey(),plannedWeekday:new Date().getDay(),title:"Training session"+(a?" (AI-assisted)":e?" (coach plan)":" (basic)"),summary:Le==="SWAP_RECOVERY"?"Recovery \u2022 25\u201340 min":V==="RED"||__painFlag?"Technique / light day \u2022 25\u201335 min":V==="AMBER"?"Controlled strength \u2022 ~35\u201345 min":"Strength \u2022 ~45 min",baseExercises:__built2&&Array.isArray(__built2.base)?__built2.base:[],exercises:__built2&&Array.isArray(__built2.exercises)?__built2.exercises:[],variantId:Le||null},qa=(()=>{var oa={};try{(Ha.exercises||[]).forEach(Ra=>{var ri=Array.isArray(Ra.sets)?Ra.sets:[];oa[Ra.id]={name:Ra.name,note:Ra.note||"",sets:ri.map((Da,Va)=>({idx:Va,weight:"",reps:Da&&(Da.reps||Da.t)?String(Da.reps||Da.t):"",rpe:Da&&Da.rpe?String(Da.rpe):"",done:!1}))}})}catch(Ra){}return oa})();try{localStorage.setItem("fof_session_log_v1::"+Ha.id,JSON.stringify(qa))}catch(oa){}try{localStorage.setItem("fof_active_session_v1::"+(Ds||"demo_surface"),JSON.stringify(Ha))}catch(oa){}try{localStorage.setItem("fof_open_session_in_plan_v1::"+(Ds||"demo_surface"),JSON.stringify({sessionId:Ha.id,ts:Date.now()}))}catch(oa){}try{pt("TRACK")}catch(oa){}try{window.__toast&&window.__toast("Session opened")}catch(oa){}},je=()=>{try{var nt=JSON.parse(localStorage.getItem(N)||"[]"),Lt=Array.isArray(nt)?nt.slice():[];Lt.unshift({id:"triage_"+Date.now(),type:"CAPACITY_EXEC_ALT",createdAt:Date.now(),surfaceKey:Ds||"demo_surface",focusPillar:zs,capZone:V,suggestion:V==="RED"?"Swap today to recovery / mobility. Keep plan intact.":"Reduce volume ~25% or remove finisher. Keep plan intact.",status:"PENDING"}),localStorage.setItem(N,JSON.stringify(Lt.slice(0,50)))}catch(nt){}_e(!0),Si("Sent to coach for approval",`Your coach stays in control.

We sent a suggested alternate execution for today (approve/decline).`)},re=nt=>{$t(!0),G(!1),Si("Alternate applied (demo)","Chosen: "+nt+`

Plan remains unchanged; this only affects today\u2019s execution guidance.`)},Z=React.useMemo(()=>[{id:"t1",label:"Warm-up",meta:"Mobility + activation",icon:"Flame",tone:"sky"},{id:"t2",label:"Main block",meta:me,icon:"Dumbbell",tone:"violet"},{id:"t3",label:"Recovery",meta:"Breathwork / stretch",icon:"HeartPulse",tone:"lime"}],[me]);return React.createElement(Dn,{title:"Today\u2019s plan",subtitle:"One clear action \u2014 no clutter.",right:React.createElement(()=>React.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-2xl border text-xs "+(V==="GREEN"?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":V==="AMBER"?"bg-amber-500/10 border-amber-400/20 text-amber-200":"bg-rose-500/10 border-rose-400/20 text-rose-200")},React.createElement("span",{className:"font-semibold"},"Home"),React.createElement("span",{className:"opacity-80"},V),we?React.createElement("span",{className:"ml-1 opacity-90"},"\u2022 Adjusted"):null,gt?React.createElement("span",{className:"ml-1 opacity-90"},"\u2022 Pending coach"):null),null)},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] tracking-[0.22em] uppercase text-white/50"},"Today \u2022 One clear action"),React.createElement("div",{className:"mt-1 flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-white font-extrabold text-[18px]"},De===M.action?M.verb:De==="TRAIN"?"Train":De==="MODIFY"?"Modify":De==="RECOVER"?"Recover":"Skip"),React.createElement("div",{className:"text-white/50 text-[12px] font-semibold"},"(",Math.round(c),"/100 capacity)"),React.createElement("div",{className:"ml-0 md:ml-2 px-2.5 py-1 rounded-full border text-[11px] "+(V==="GREEN"?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":V==="AMBER"?"bg-amber-500/10 border-amber-400/20 text-amber-200":"bg-rose-500/10 border-rose-400/20 text-rose-200")},V)),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 max-w-[760px]"},De===M.action?"Recommended: "+M.reason:"Chosen: "+(De==="TRAIN"?"Execute the plan as written.":De==="MODIFY"?"Train, but reduce intensity/volume.":De==="RECOVER"?"Downshift and recover.":"Skip to protect recovery.")),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},"Tomorrow impact (demo): ",M.impact,Number(gn)?" \u2022 Today includes yesterday modifier: "+(gn>0?"+":"")+gn:"")),React.createElement("button",{type:"button",onClick:()=>Si("Phase-1 HOME foundation",`Locked in Phase-1:

\u2022 Capacity \u2192 action mapping
\u2022 Action verbs (Train/Modify/Recover/Skip)
\u2022 Tomorrow impact loop

This makes rework risk near-zero once approved.`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-white/80 text-[12px] font-semibold"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(gi,{name:"Info",size:14})," Why this?"))),React.createElement("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2"},[{a:"TRAIN",label:"Train",tone:"bg-white text-black hover:opacity-90"},{a:"MODIFY",label:"Modify",tone:"bg-amber-400/15 border border-amber-400/25 text-amber-200 hover:bg-amber-400/20"},{a:"RECOVER",label:"Recover",tone:"bg-emerald-400/10 border border-emerald-400/20 text-emerald-200 hover:bg-emerald-400/15"},{a:"SKIP",label:"Skip",tone:"bg-rose-500/10 border border-rose-400/20 text-rose-200 hover:bg-rose-500/15"}].map(nt=>React.createElement("button",{key:nt.a,type:"button",onClick:()=>Oe(nt.a),className:"px-3 py-2 rounded-2xl text-[12px] font-extrabold transition-colors "+(nt.a==="TRAIN",nt.tone)+" "+(De===nt.a?" ring-2 ring-white/25":"")},nt.label))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Verbs are states: ",React.createElement("span",{className:"text-white/70 font-semibold"},"Plan stays intact"),", only today\u2019s execution changes (Modify/Recover) and tomorrow updates via consequence logic.")),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-base font-semibold"},ve),React.createElement("div",{className:"text-xs text-white/60 mt-1"},me)),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",onClick:j,className:"px-4 py-2 rounded-2xl bg-white text-black text-sm font-semibold hover:opacity-90"},"Start session"),React.createElement("button",{type:"button",onClick:()=>Si("Today\u2019s plan",`This card is the hero.

\u2022 Capacity guides execution (only Amber/Red)
\u2022 Logging happens in Track
\u2022 Professional plans stay intact`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Details"))),de&&React.createElement("div",{className:"rounded-2xl border p-3 "+(V==="AMBER"?"bg-amber-500/8 border-amber-400/20":"bg-rose-500/8 border-rose-400/20")},React.createElement("div",{className:"text-sm font-semibold"},V==="RED"?"Today needs recovery-first execution":"Today may need a lighter approach"),React.createElement("div",{className:"text-xs text-white/70 mt-1"},"Primary driver is shown in your Capacity card. This does not change the plan \u2014 it suggests how to execute today."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},e?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:je,className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-sm"},"Send suggestion to coach"),gt&&React.createElement("span",{className:"text-xs text-white/60 self-center"},"Sent \u2022 awaiting approval")):a?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>G(!0),className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-sm"},"See safer options"),React.createElement("button",{type:"button",onClick:()=>Si("Continue as planned",`No problem \u2014 proceed as planned.

Tip: keep effort smooth and stop 1\u20132 reps early if needed.`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-sm text-white/80"},"Continue as planned")):React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>Si("Safer options (locked)",`Upgrade to AI to get alternate options.

You can still proceed \u2014 just keep it easy today.`),className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-sm"},"View safer options"),React.createElement("button",{type:"button",onClick:()=>Si("Continue as planned","Proceed as planned, but keep intensity lower today."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-sm text-white/80"},"Continue as planned")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2"},Z.map(nt=>React.createElement("div",{key:nt.id,className:"rounded-2xl bg-white/5 border border-white/10 p-3"},React.createElement("div",{className:"text-xs text-white/60"},nt.label),React.createElement("div",{className:"text-sm font-semibold mt-1"},nt.meta))))),Ne&&React.createElement("div",{className:"fixed inset-0 z-[70] flex items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>G(!1)}),React.createElement("div",{className:"relative w-full max-w-lg mx-auto rounded-t-3xl bg-[#0b1220] border border-white/10 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-base font-semibold"},"Choose a safer option"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Applies to today only (plan remains intact).")),React.createElement("button",{type:"button",onClick:()=>G(!1),className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-sm"},"Close")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("button",{type:"button",onClick:()=>re("Lighter version (reduce volume ~25%)"),className:"w-full text-left p-3 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10"},React.createElement("div",{className:"text-sm font-semibold"},"Lighter version"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Reduce volume ~25%, keep technique clean.")),React.createElement("button",{type:"button",onClick:()=>re("Swap to recovery (mobility + breathwork)"),className:"w-full text-left p-3 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10"},React.createElement("div",{className:"text-sm font-semibold"},"Swap to recovery"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Mobility + breathwork, low stress.")),React.createElement("button",{type:"button",onClick:()=>re("Shortened session (time cap)"),className:"w-full text-left p-3 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10"},React.createElement("div",{className:"text-sm font-semibold"},"Shorten the session"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Keep the main lift, skip optional work."))))))},dc=({modeKey:e="default"}={})=>{var a=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],r="fof_client_plan_week_v1::"+e,c="fof_client_plan_log_v1::"+e;var h="fof_client_plan_requests_v1::"+e;var V=(Ae,Oe)=>{try{var N=JSON.parse(localStorage.getItem(Ae)||"null");return N==null?Oe:N}catch(N){return Oe}},de=(Ae,Oe)=>{try{localStorage.setItem(Ae,JSON.stringify(Oe))}catch(N){}},M=(Ae,Oe={})=>{var N={id:Ys(),ts:En(),type:Ae,payload:Oe};setChangeLog(Ne=>{var G=[N,...Ne||[]].slice(0,30);return de(c,G),G})},De=React.useMemo(()=>{var Ae=a.map((N,Ne)=>({d:N,kind:"REST",label:"Rest"}));return(zs==="YOGA"?[1,3,5]:zs==="HYBRID"?[0,2,4,6]:[0,2,4]).forEach((N,Ne)=>{Ae[N]={d:a[N],kind:"TRAIN",label:zs==="YOGA"?"Yoga":Ne%2===0?"Train":"Recover"}}),Ae},[zs]);return React.createElement(Dn,{title:"This week",subtitle:"A compact strip \u2014 tap any day to open the plan.",right:React.createElement("button",{type:"button",onClick:()=>{pt("TRACK");try{eo("client.nav.to_plan",{surfaceKey:Ds})}catch(Ae){}},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 inline-flex items-center gap-2"},"Open plan ",React.createElement(gi,{name:"ChevronRight",size:16}))},React.createElement("div",{className:"grid grid-cols-7 gap-2"},De.map(Ae=>React.createElement("button",{key:Ae.d,type:"button",onClick:()=>{pt("TRACK"),Si("Weekly plan","Open "+Ae.d+": "+Ae.label)},className:`rounded-2xl border px-2 py-2 text-center transition-colors
                                `+(Ae.kind==="TRAIN"?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)] hover:bg-[rgba(77,233,255,0.14)]":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"text-[10px] font-bold text-white/70"},Ae.d),React.createElement("div",{className:"mt-1 text-[11px] font-semibold text-white"},Ae.label)))))},cc=()=>React.createElement(Dn,{title:"Insights",subtitle:Di==="AI"?"AI-generated weekly signals (demo).":"Lightweight guidance (free).",right:Di==="AI"?React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"AI Coach"):React.createElement("button",{type:"button",onClick:()=>{dn("AI");try{eo("subscription.upgrade.clicked",{surfaceKey:Ds,from:"FREE"})}catch(e){}},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.10)] hover:bg-[rgba(168,85,255,0.16)] text-[12px] text-white"},"Upgrade")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"TrendingUp",size:16})," Weekly momentum"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Consistency is trending up. Keep the same training days this week.")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"HeartPulse",size:16})," Recovery focus"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Add 10 minutes of mobility on non-training days to reduce tightness.")))),uc=()=>{var e=React.useMemo(()=>{var r=Math.max(20,Math.min(95,Number(typeof __capNow!="undefined"?__capNow:60)||60));return[-6,-2,1,-3,4,2,0].map((h,V)=>Math.max(5,Math.min(100,Math.round(r+h+(V%2===0?1:-1)))))},[typeof __capNow!="undefined"?__capNow:60]),a=React.useMemo(()=>{var r=Array.isArray(e)?e.slice(0,7):[],c=r.reduce((M,De)=>M+(Number(De)||0),0),h=r.length?Math.round(c/r.length):0;var V={v:-1,i:0},de={v:999,i:0};return r.forEach((M,De)=>{var Ae=Number(M)||0;Ae>V.v&&(V={v:Ae,i:De}),Ae<de.v&&(de={v:Ae,i:De})}),{avg:h,hi:V,lo:de,arr:r}},[e]);return React.createElement(Dn,{title:"Weekly Capacity report",subtitle:"A compact weekly view (trend + best/lowest day).",right:React.createElement("button",{type:"button",onClick:()=>Si("Weekly Capacity report","This summarizes your last 7 days of Capacity. In production, this also explains drivers (sleep vs load vs nutrition) and links to plan adjustments."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Details")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Average"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white tabular-nums"},a.avg,React.createElement("span",{className:"text-[11px] text-white/55 font-semibold"},"/100")),React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},"Last 7 days")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Best day"),React.createElement("div",{className:"mt-1 text-[16px] font-bold text-white"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a.hi.i]||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 tabular-nums"},a.hi.v,"/100")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Lowest day"),React.createElement("div",{className:"mt-1 text-[16px] font-bold text-white"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a.lo.i]||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 tabular-nums"},a.lo.v,"/100"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Trend"),React.createElement("div",{className:"text-[10px] font-mono text-white/55"},"7d")),React.createElement("div",{className:"mt-3 flex items-center gap-1 h-14"},a.arr.map((r,c)=>React.createElement("div",{key:c,className:"flex-1 rounded-md bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/35",style:{height:(Number(r)||0)+"%"}})))),React.createElement("div",{className:"mt-2 text-[10px] text-white/55"},"Tip: pair this with Plan swaps (Train vs Recover) on low-capacity days.")))},mc=()=>{var e=React.useMemo(()=>{var Oe=new Date,N=Oe.getFullYear(),Ne=String(Oe.getMonth()+1).padStart(2,"0"),G=String(Oe.getDate()).padStart(2,"0");return`fof_checkin_v1::${Ds||"demo_surface"}::${N}-${Ne}-${G}`},[Ds]),[a,r]=React.useState(()=>{try{return localStorage.getItem(e)?"DONE":"MISSING"}catch(Oe){return"MISSING"}}),[c,h]=React.useState(()=>({energy:"OK",soreness:"MILD",pain:"NONE",painArea:""}));React.useEffect(()=>{try{var Oe=localStorage.getItem(e);if(Oe){r("DONE");var N=JSON.parse(Oe);N&&typeof N=="object"&&h(Ne=>({...Ne,...N}))}else r("MISSING")}catch(Oe){}},[e,ea]);var V=()=>{try{eo("home.checkin.open",{surfaceKey:Ds})}catch(Oe){}try{localStorage.setItem("fof_open_session_in_plan_v1::"+(Ds||"demo_surface"),JSON.stringify({sessionId:session.id,ts:Date.now()}))}catch(Oe){}try{pt("TRACK")}catch(Oe){}},de=Oe=>{try{Dl(N=>Array.isArray(N)?N.map(Ne=>Ne.id===Oe?{...Ne,done:!Ne.done}:Ne):N)}catch(N){}},M=React.useMemo(()=>{var Oe=Array.isArray(xd)?xd.slice():[];return Oe.sort((N,Ne)=>N.done===Ne.done?0:N.done?1:-1),Oe.slice(0,3)},[xd]),De=()=>{var Oe={energy:c.energy,soreness:c.soreness,pain:c.pain,painArea:c.pain==="SIGNIFICANT"&&c.painArea||""};try{localStorage.setItem(e,JSON.stringify(Oe))}catch(N){}r("DONE");try{eo("home.checkin.save",{surfaceKey:Ds,...Oe})}catch(N){}Si("Check-in saved",`Thanks \u2014 this helps guide execution on Amber/Red days.

We keep it short: Energy \u2022 Soreness \u2022 Pain.`)},Ae=({label:Oe,value:N,options:Ne,onChange:G})=>React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-xs text-white/60"},Oe),React.createElement("div",{className:"flex items-center gap-1"},Ne.map(we=>React.createElement("button",{key:we,type:"button",onClick:()=>G(we),className:"px-2.5 py-1.5 rounded-xl text-xs border "+(N===we?"bg-white text-black border-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},we))));return React.createElement(Dn,{title:"Support & consistency",subtitle:"Tiny check-in + habits (no friction).",right:React.createElement("button",{type:"button",onClick:V,className:"px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 text-xs"},"Open Track")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Daily check-in"),React.createElement("span",{className:"text-[11px] px-2 py-1 rounded-xl border "+(a==="DONE"?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":"bg-amber-500/10 border-amber-400/20 text-amber-200")},a==="DONE"?"Completed":"Due")),a==="MISSING"?React.createElement("div",{className:"mt-3 space-y-2"},React.createElement(Ae,{label:"Energy",value:c.energy,options:["Low","OK","High"],onChange:Oe=>h(N=>({...N,energy:Oe}))}),React.createElement(Ae,{label:"Soreness",value:c.soreness,options:["None","Mild","High"],onChange:Oe=>h(N=>({...N,soreness:Oe}))}),React.createElement(Ae,{label:"Pain",value:c.pain==="SIGNIFICANT"?"Significant":c.pain==="MILD"?"Mild":"None",options:["None","Mild","Significant"],onChange:Oe=>h(N=>({...N,pain:Oe==="Significant"?"SIGNIFICANT":Oe==="Mild"?"MILD":"NONE"}))}),c.pain==="SIGNIFICANT"&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-xs text-white/60 mb-1"},"Where?"),React.createElement("div",{className:"flex flex-wrap gap-1"},["Knee","Back","Shoulder","Hip","Ankle","Other"].map(Oe=>React.createElement("button",{key:Oe,type:"button",onClick:()=>h(N=>({...N,painArea:Oe})),className:"px-2.5 py-1.5 rounded-xl text-xs border "+(c.painArea===Oe?"bg-white text-black border-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},Oe)))),React.createElement("button",{type:"button",onClick:De,className:"mt-2 w-full px-3 py-2 rounded-2xl bg-white text-black text-sm font-semibold hover:opacity-90"},"Save check-in"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"3 taps. No surveys. Helps guide execution on Amber/Red days.")):React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-xs text-white/70"},"Energy: ",React.createElement("span",{className:"text-white/90"},c.energy)," \u2022 ","Soreness: ",React.createElement("span",{className:"text-white/90"},c.soreness)," \u2022 ","Pain: ",React.createElement("span",{className:"text-white/90"},c.pain==="SIGNIFICANT"?"Significant"+(c.painArea?" ("+c.painArea+")":""):c.pain==="MILD"?"Mild":"None")),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{localStorage.removeItem(e)}catch(Oe){}r("MISSING")},className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 text-xs"},"Edit"),React.createElement("button",{type:"button",onClick:V,className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-xs text-white/80"},"View in Track")))),React.createElement("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Habits"),React.createElement("button",{type:"button",onClick:()=>Si("Habits",`Keep habits small.

\u2022 1-tap completion
\u2022 Supports plans (doesn\u2019t compete with them)
\u2022 Feeds capacity indirectly`),className:"px-2.5 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 text-[11px]"},"Why?")),React.createElement("div",{className:"mt-3 space-y-2"},M.map(Oe=>React.createElement("button",{key:Oe.id,type:"button",onClick:()=>de(Oe.id),className:"w-full flex items-center justify-between gap-3 p-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10"},React.createElement("div",{className:"text-sm font-semibold"},Oe.label),React.createElement("span",{className:"text-[11px] px-2 py-1 rounded-xl border "+(Oe.done?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":"bg-white/5 border-white/10 text-white/70")},Oe.done?"Done":"Tap"))),M.length===0&&React.createElement("div",{className:"text-xs text-white/60"},"No habits yet \u2014 add a few in Track.")))))},pc=()=>{var je;var e=Ft==="LINKED",a=!e&&(Di==="AI"||Di==="TRIAL"||Di==="PAID"),r=!e&&Di==="FREE",c=Number(xo)||0,h=sr(c),V=h.band==="MODERATE"?"AMBER":h.band==="LIMITED"||h.band==="LOW"?"RED":"GREEN",de=React.useMemo(()=>{try{var re="fof_session_feedback_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT"),Z=localStorage.getItem(re);if(!Z)return!1;var Qe=JSON.parse(Z),nt=Array.isArray(Qe)&&Qe.length?Qe[0]:null;return nt&&String(nt.pain||"").toUpperCase()==="YES"}catch(re){}return!1},[Ds,Ft,Sn]),M=React.useMemo(()=>{try{var Z=new Date(Date.now()-864e5).toISOString().slice(0,10);return!(Array.isArray(on)?on:[]).some(Lt=>Lt&&Lt.date===Z&&Lt.didSession===!0)}catch(re){}return!1},[on]),De=React.useMemo(()=>"fof_session_variant_today_v1::"+(Ds||"demo_surface")+"__"+(Ft||"INDEPENDENT"),[Ds,Ft]),Ae=React.useMemo(()=>{try{return JSON.parse(localStorage.getItem(De)||"null")}catch(re){return null}},[De,Sn]),Oe=(re,Z="APPLIED")=>{try{localStorage.setItem(De,JSON.stringify({date:__todayKey(),variantId:re,status:Z,ts:En()}))}catch(nt){}try{eo("home.variant.applied",{surfaceKey:Ds,clientMode:Ft,tier:Di,variantId:re,status:Z})}catch(nt){}var Qe=()=>{try{if(!window.confirm(`Reset demo data?

This clears demo sessions, logs, plan history, variants, and bookings for this prototype.

Saved Library stays.`))return;var Lt=Ds||"demo_surface",ze=Lt+"__"+(Ft||"INDEPENDENT");["fof_active_session_v1::"+Lt,"fof_open_session_in_plan_v1::"+Lt,"fof_session_variant_today_v1::"+ze,"fof_session_feedback_v1::"+ze,"fof_plan_history_v1::"+ze,"fof_sessions_store_v1","fof_event_log_v1","fof_client_plan_week_v1::"+ze,"fof_client_plan_log_v1::"+ze,"fof_client_plan_requests_v1::"+ze].forEach(se=>{try{localStorage.removeItem(se)}catch(at){}});for(var se=localStorage.length-1;se>=0;se--){var at=localStorage.key(se);if(at&&(at.startsWith("fof_session_log_v1::")||at.startsWith("fof_active_session_notes_v1::")||at.startsWith("fof_checkin_v1::")))try{localStorage.removeItem(at)}catch(Pe){}}try{Be(null)}catch(se){}try{q({effort:null,pain:null,note:""})}catch(se){}try{bo([])}catch(se){}try{Si("Demo data reset","Cleared sessions/logs/history (Saved Library preserved).")}catch(se){try{alert("Demo data reset (Saved Library preserved).")}catch(at){}}try{window.location.reload()}catch(se){}}catch(nt){try{alert("Reset failed: "+(nt&&nt.message?nt.message:nt))}catch(Lt){}}}},N=({forceVariantId:re=null}={})=>{try{eo("home.primary.start",{surfaceKey:Ds,mode:e?"LINKED":"INDEPENDENT",tier:Di,capZone:V})}catch(se){}var Z="sess_"+Date.now(),Qe=e?"COACH":a?"AI":"BASIC";var nt=null;try{var se=re?{date:__todayKey(),variantId:re,status:"APPLIED"}:JSON.parse(localStorage.getItem(De)||"null");nt=se&&se.date===__todayKey()&&(se.status==="APPLIED"||se.status==="APPROVED")?se.variantId:null}catch(se){nt=re}var ze=(()=>{var se=[{id:"ex1",name:"Warm-up",sets:[{reps:"5\u20138 min",rpe:""}],note:"Mobility + activation"},{id:"ex2",name:"Back Squat",sets:[{reps:"6",rpe:"7"},{reps:"6",rpe:"7"},{reps:"6",rpe:"7"},{reps:"6",rpe:"7"}],note:"Controlled tempo"},{id:"ex3",name:"Romanian Deadlift",sets:[{reps:"8",rpe:"7"},{reps:"8",rpe:"7"},{reps:"8",rpe:"7"}],note:"Hamstring tension"},{id:"ex4",name:"Split Squat",sets:[{reps:"10",rpe:"7"},{reps:"10",rpe:"7"},{reps:"10",rpe:"7"}],note:"Each leg"},{id:"ex5",name:"Core",sets:[{reps:"45s",rpe:""},{reps:"45s",rpe:""},{reps:"45s",rpe:""}],note:"Plank variations"}];var at=se;return nt==="SWAP_RECOVERY"?at=[{id:"ex_r1",name:"Zone-1 walk",sets:[{reps:"20\u201330 min",rpe:""}],note:"Keep it easy"},{id:"ex_r2",name:"Mobility flow",sets:[{reps:"10\u201315 min",rpe:""}],note:"Hips + T-spine"},{id:"ex_r3",name:"Breathwork",sets:[{reps:"5\u20138 min",rpe:""}],note:"Downshift recovery"}]:nt==="SHORTEN"?at=se.slice(0,4).map(Pe=>({...Pe,sets:(Pe.sets||[]).slice(0,Math.max(1,Math.ceil((Pe.sets||[]).length*.6)))})):nt==="LIGHTEN"&&(at=se.map(Pe=>({...Pe,sets:(Pe.sets||[]).map(Wt=>({...Wt,rpe:Wt.rpe?String(Math.max(5,(Number(Wt.rpe)||7)-1)):Wt.rpe}))}))),{base:se,exercises:at}})(),Le={id:Z,startedAt:Date.now(),surfaceKey:Ds||"demo_surface",focusPillar:zs,capZone:V,source:Qe,title:"Training session"+(a?" (AI-assisted)":e?" (coach plan)":" (basic)"),summary:nt==="SWAP_RECOVERY"?"Recovery \u2022 25\u201340 min":V==="RED"||de?"Technique / light day \u2022 25\u201335 min":V==="AMBER"?"Controlled strength \u2022 ~35\u201345 min":"Strength \u2022 ~45 min",baseExercises:ze&&Array.isArray(ze.base)?ze.base:[],exercises:ze&&Array.isArray(ze.exercises)?ze.exercises:[],variantId:nt||null};try{localStorage.setItem("fof_active_session_v1::"+(Ds||"demo_surface"),JSON.stringify(Le))}catch(se){}try{localStorage.setItem("fof_open_session_in_plan_v1::"+(Ds||"demo_surface"),JSON.stringify({sessionId:Le.id,ts:Date.now()}))}catch(se){}try{pt("PLAN")}catch(se){}try{window.__toast&&window.__toast("Workout opened")}catch(se){}},Ne=React.useMemo(()=>de?{state:"RISK",headline:"Take it easy today",sub:"Pain flagged recently \u2014 protect recovery and keep movement gentle.",primary:{label:"Choose Recovery Session",action:()=>{Oe("SWAP_RECOVERY"),N({forceVariantId:"SWAP_RECOVERY"})},tone:"warn"},alts:[{label:"Short mobility only",action:()=>{Oe("SWAP_RECOVERY"),N({forceVariantId:"SWAP_RECOVERY"})},tone:"sky"},{label:"Skip today (no penalty)",action:()=>{try{window.__toast&&window.__toast("Okay \u2014 reset day")}catch(re){}},tone:"muted"}]}:V==="RED"?{state:"LOW",headline:"Recovery is lagging today",sub:"Your system is under strain \u2014 pushing hard now reduces consistency.",primary:{label:"Choose Recovery Instead",action:()=>{Oe("SWAP_RECOVERY"),N({forceVariantId:"SWAP_RECOVERY"})},tone:"warn"},alts:[{label:"Train light (reduce load)",action:()=>{Oe("LIGHTEN"),N({forceVariantId:"LIGHTEN"})},tone:"sky"},{label:"Skip today (no penalty)",action:()=>{try{window.__toast&&window.__toast("Okay \u2014 recovery day")}catch(re){}},tone:"muted"}]}:V==="AMBER"?{state:"LIMITED",headline:"You can train \u2014 keep it controlled",sub:"Today supports progress if volume stays reasonable.",primary:{label:"Train Light Today",action:()=>{Oe("LIGHTEN"),N({forceVariantId:"LIGHTEN"})},tone:"sky"},alts:[{label:"Shorten the session",action:()=>{Oe("SHORTEN"),N({forceVariantId:"SHORTEN"})},tone:"sky"},{label:"Choose recovery instead",action:()=>{Oe("SWAP_RECOVERY"),N({forceVariantId:"SWAP_RECOVERY"})},tone:"muted"}]}:{state:"HIGH",headline:"You\u2019re ready to train today",sub:M?"Resume normally \u2014 don\u2019t try to \u201Ccatch up\u201D.":"Your recovery is aligned for productive training.",primary:{label:"Start Strength Session",action:()=>{N()},tone:"lime"},alts:[{label:"Shorten (if time is tight)",action:()=>{Oe("SHORTEN"),N({forceVariantId:"SHORTEN"})},tone:"sky"},{label:"Swap to recovery",action:()=>{Oe("SWAP_RECOVERY"),N({forceVariantId:"SWAP_RECOVERY"})},tone:"muted"}]},[V,de,M,Oe,N]),[G,we]=React.useState(!1),$t=()=>React.createElement(Dn,{title:"Home",subtitle:Ne.headline,right:React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("span",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold uppercase tracking-widest "+(V==="GREEN"?"border-emerald-400/45 bg-emerald-400/10 text-emerald-100":V==="AMBER"?"border-amber-400/45 bg-amber-400/10 text-amber-100":"border-rose-400/45 bg-rose-400/10 text-rose-100")},h.band),React.createElement("button",{type:"button",onClick:()=>{Js===xt.TODAY&&!Oo?ir(!0):(Ls(null),pt(xt.TODAY))},className:"p-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10",title:"Capacity details"},React.createElement(gi,{name:"Info",size:16})))},React.createElement("div",{className:"text-[13px] text-white/80"},Ne.sub),React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-[11px] text-white/70"},M?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Yesterday missed \u2022 resume normally"):null,de?React.createElement("span",{className:"px-2 py-1 rounded-full bg-amber-400/15 border border-amber-400/20"},"Pain flagged \u2022 protect joints"):null,Ae&&Ae.date===__todayKey()?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Variant set: ",React.createElement("span",{className:"font-bold text-white"},Ae.variantId)):null)),gt=()=>React.createElement(Dn,{title:"Today\u2019s best action",subtitle:"Execution lives in Today (Plan stays strategic)."},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white text-[18px] font-extrabold leading-tight"},"Start / Continue Today\u2019s Session"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Recommended now: ",React.createElement("span",{className:"text-white font-semibold"},Ne.primary.label),V==="RED"||de?" \u2022 keep it recovery-first.":V==="AMBER"?" \u2022 keep it controlled.":" \u2022 execute normally.")),React.createElement("div",{className:"flex items-center gap-2 md:min-w-[320px] justify-end"},React.createElement(Xo,{tone:Ne.primary.tone==="warn"?"violet":Ne.primary.tone==="lime"?"lime":"sky",onClick:Ne.primary.action,icon:"Play"},"Start / Continue Today\u2019s Session"),React.createElement("button",{type:"button",onClick:()=>{try{pt(xt.PLAN)}catch(re){}},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 font-semibold"},"View plan")))),_e=()=>React.createElement(Dn,{title:"On track this week",subtitle:"A simple execution snapshot \u2014 no pressure.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"WEEK")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2"},[{t:"Sessions",v:"3/5",tone:"good"},{t:"Recovery",v:"2/3",tone:"warn"},{t:"Nutrition",v:"4/7",tone:"brand"}].map(re=>React.createElement("div",{key:re.t,className:"rounded-2xl border px-3 py-3 "+(re.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":re.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},re.t),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white"},re.v)))),React.createElement("div",{className:"mt-3 w-full max-w-full overflow-x-hidden flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Tip: consistency beats intensity. Capacity modulates effort."),React.createElement("button",{type:"button",onClick:()=>Si("On track this week","In production: this summarizes adherence vs targets (training, recovery, nutrition) and highlights the next small win."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 font-semibold"},"Details"))),ve=()=>React.createElement(Dn,{title:"Other valid options",subtitle:"Choose one if it fits your day.",right:React.createElement("button",{type:"button",onClick:()=>{try{Si("Why only a few options?","To reduce choice overload, HOME shows only the options that are genuinely safe and useful today. Full browsing lives in other tabs.")}catch(re){}},className:"p-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10",title:"Why limited options?"},React.createElement(gi,{name:"Info",size:16}))},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(Ne.alts||[]).slice(0,2).map((re,Z)=>React.createElement("button",{key:Z,type:"button",onClick:re.action,className:"w-full text-left rounded-2xl border px-4 py-3 transition-colors "+(re.tone==="muted"?"border-white/12 bg-white/5 hover:bg-white/8":"border-[rgba(77,233,255,0.25)] bg-[rgba(77,233,255,0.08)] hover:bg-[rgba(77,233,255,0.12)]")},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},re.label),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},re.label.toLowerCase().includes("skip")?"Skipping isn\u2019t failure \u2014 it\u2019s adaptation.":re.label.toLowerCase().includes("short")?"Keep momentum with less time cost.":re.label.toLowerCase().includes("recovery")?"Downshift load without losing consistency.":"A safe alternative for today."))))),me=()=>{var re=React.useMemo(()=>{var Qe=[];return V==="GREEN"&&Qe.push("Recovery signals support productive training today."),V==="AMBER"&&Qe.push("You\u2019re in a good place to train if volume stays controlled."),V==="RED"&&Qe.push("Your system is under strain \u2014 prioritize recovery before adding more load."),M&&Qe.push("Missed yesterday: resume normally rather than compensating."),(Number(Xi)||0)>=75&&Qe.push("Recovery is strong \u2014 negative training impact is softened."),(Number(wa)||0)>=60&&Qe.push("Recent load is elevated \u2014 avoid stacking intensity."),Qe.slice(0,3)},[V,M,Xi,wa]),Z=React.useMemo(()=>V==="RED"||de?"If you push hard today, tomorrow capacity is likely to drop.":V==="AMBER"?"If you keep it controlled, tomorrow should stay stable.":"If you execute cleanly, tomorrow should remain stable or improve slightly.",[V,de]);return React.createElement(Dn,{title:"Why this works",subtitle:"Transparent reasoning (no raw numbers).",right:React.createElement("button",{type:"button",onClick:()=>we(Qe=>!Qe),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},G?"Hide":"Show")},G?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"space-y-2"},re.map((Qe,nt)=>React.createElement("div",{key:nt,className:"flex items-start gap-2 text-[12px] text-white/80"},React.createElement("span",{className:"mt-[6px] w-1.5 h-1.5 rounded-full bg-white/60"}),React.createElement("div",null,Qe)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Tomorrow impact"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},Z)),r?React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/80"},"Want deeper tuning? ",React.createElement("button",{type:"button",className:"underline text-white",onClick:()=>Si("Upgrade","AI tier unlocks deeper explanations + automatic weekly tuning.")},"Unlock AI Coach"),".")):null):React.createElement("div",{className:"text-[12px] text-white/70"},"Tap \u201CShow\u201D for the reasoning and tomorrow impact."))},j=()=>React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 px-5 py-4"},React.createElement("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Planned: Training session"),M?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Context: missed yesterday"):null,V==="RED"?React.createElement("span",{className:"px-2 py-1 rounded-full bg-rose-400/15 border border-rose-400/20"},"Mode: recovery-first"):null,a?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"AI: enabled"):null));return React.createElement("div",{className:"space-y-4"},Sn?React.createElement(Dn,{title:"Session complete",subtitle:"Quick feedback (1 tap) + summary",right:React.createElement("button",{type:"button",onClick:()=>Be(null),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Dismiss")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[13px]"},(Sn==null?void 0:Sn.title)||"Session"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},(Sn==null?void 0:Sn.summary)||"Logged locally (demo)."),React.createElement("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Done sets: ",React.createElement("span",{className:"font-bold text-white"},(je=Sn==null?void 0:Sn.doneSets)!=null?je:0)),Sn!=null&&Sn.durationMin?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10"},"Duration: ",React.createElement("span",{className:"font-bold text-white"},Sn.durationMin,"m")):null)),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Effort"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},[{k:"EASY",l:"Too easy"},{k:"JUST_RIGHT",l:"Just right"},{k:"HARD",l:"Too hard"}].map(re=>React.createElement("button",{key:re.k,type:"button",onClick:()=>Ss({effort:re.k}),className:"px-3 py-2 rounded-2xl border text-[12px] font-semibold "+((Ia==null?void 0:Ia.effort)===re.k?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/15 bg-white/5 hover:bg-white/10 text-white/80")},re.l)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Pain / issue?"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},[{k:"NO",l:"No"},{k:"YES",l:"Yes"}].map(re=>React.createElement("button",{key:re.k,type:"button",onClick:()=>Ss({pain:re.k}),className:"px-3 py-2 rounded-2xl border text-[12px] font-semibold "+((Ia==null?void 0:Ia.pain)===re.k?"border-amber-400/45 bg-amber-400/15 text-white":"border-white/15 bg-white/5 hover:bg-white/10 text-white/80")},re.l))))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Optional note"),React.createElement("textarea",{value:(Ia==null?void 0:Ia.note)||"",onChange:re=>Ss({note:re.target.value}),rows:2,className:"mt-2 w-full rounded-2xl border border-white/15 bg-black/20 px-3 py-2 text-[12px] text-white placeholder-white/40 outline-none",placeholder:"Anything your coach/AI should know? (demo)"}),React.createElement("div",{className:"mt-3 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:Cn,className:"px-4 py-2 rounded-2xl border border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] hover:bg-[rgba(77,233,255,0.18)] text-[12px] text-white font-semibold"},"Save feedback")))):null,React.createElement($t,null),React.createElement(gt,null),React.createElement(_e,null),React.createElement(ve,null),React.createElement(me,null),React.createElement(j,null))},bc=({clientMode:e="INDEPENDENT",tier:a="FREE",coachContext:r=null,focusPillar:c="FITNESS"})=>{var h=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],V=e==="LINKED",de=!V&&a==="FREE",M=!V&&(a==="AI"||a==="TRIAL"||a==="PAID"),De=(V?"LINKED":"INDEPENDENT")+"::"+(a||"FREE"),Ae=React.useMemo(()=>"fof_active_session_v1::"+(Ds||"demo_surface"),[Ds]),Oe=React.useMemo(()=>"fof_open_session_in_plan_v1::"+(Ds||"demo_surface"),[Ds]),[N,Ne]=React.useState(()=>Ks(Oe,null)),[G,we]=React.useState(()=>Ks(Ae,null)),[$t,gt]=React.useState("LOG"),[_e,ve]=React.useState({exIdx:0,setIdx:0}),[me,j]=React.useState(0),[je,re]=React.useState(!1),Z=React.useCallback((P,I)=>{try{var te=P&&(Array.isArray(P.exercises)?P.exercises:Object.values(P.exercises||{}))||[];for(var Ce=0;Ce<te.length;Ce++){var C=te[Ce],ye=I&&I[C.id]?I[C.id]:null,le=ye?ye.sets||[]:(C.sets||[]).map((O,qe)=>({idx:qe,done:!1}));for(var O=0;O<le.length;O++)if(!le[O].done)return{exIdx:Ce,setIdx:O}}}catch(te){}return{exIdx:0,setIdx:0}},[]);React.useEffect(()=>{N&&G&&ve(Z(G,se))},[N,G&&G.id]),React.useEffect(()=>{if(me<=0)return;var P=setInterval(()=>j(I=>Math.max(0,(Number(I)||0)-1)),1e3);return()=>clearInterval(P)},[me]);var Qe=()=>{var P=Z(G,se);ve(P)},nt=P=>{try{var I=G&&(Array.isArray(G.exercises)?G.exercises:Object.values(G.exercises||{}))||[];if(!I.length)return;var te=_e.exIdx||0,Ce=_e.setIdx||0;var C=le=>{var O=se&&se[le.id]?se[le.id]:null,qe=O?O.sets||[]:le.sets||[];return qe&&qe.length?qe.length:0},ye=C(I[te])||0;P>0?Ce+1<ye?Ce+=1:te+1<I.length&&(te+=1,Ce=0):Ce-1>=0?Ce-=1:te-1>=0&&(te-=1,Ce=Math.max(0,(C(I[te])||1)-1)),ve({exIdx:te,setIdx:Ce})}catch(I){}},[Lt,ze]=React.useState(()=>{try{return Ks("fof_active_session_notes_v1::"+(Ds||"demo_surface"),"")||""}catch(P){return""}});React.useEffect(()=>{N&&G&&gt("LOG")},[N,G&&G.id]),React.useEffect(()=>{Ne(Ks(Oe,null)),we(Ks(Ae,null))},[Oe,Ae]);var Le=React.useMemo(()=>G?"fof_session_log_v1::"+G.id:null,[G]),[se,at]=React.useState(()=>{try{var P=G?localStorage.getItem("fof_session_log_v1::"+G.id):null;if(P)return JSON.parse(P)}catch(P){}return null}),Pe=React.useCallback(P=>{if(!P||!P.exercises)return{};var I={};return(P.exercises||[]).forEach(te=>{var Ce=(te.sets||[]).map((C,ye)=>({idx:ye,weight:"",reps:C.reps||C.t||"",rpe:C.rpe||"",done:!1}));I[te.id]={name:te.name,note:te.note||"",sets:Ce}}),I},[]);React.useEffect(()=>{G&&at(P=>{if(P&&Object.keys(P).length)return P;try{var I=localStorage.getItem("fof_session_log_v1::"+G.id);if(I)return JSON.parse(I)}catch(I){}return Pe(G)})},[G,Pe]),React.useEffect(()=>{if(!(!G||!Le))try{localStorage.setItem(Le,JSON.stringify(se||{}))}catch(P){}},[G,Le,se]);var Wt=(P,I,te,Ce)=>{at(C=>{var ye={...C||{}},le=ye[P]?{...ye[P]}:{sets:[]},O=(le.sets||[]).map(Pt=>({...Pt})),qe=O.find(Pt=>Pt.idx===I)||null;return qe&&(qe[te]=Ce),le.sets=O,ye[P]=le,ye})},Ha=(P,I)=>{at(te=>{var Ce={...te||{}},C=Ce[P]?{...Ce[P]}:{sets:[]},ye=(C.sets||[]).map(O=>({...O})),le=ye.find(O=>O.idx===I)||null;return le&&(le.done=!le.done),C.sets=ye,Ce[P]=C,Ce})},qa=React.useMemo(()=>{try{var P=Object.values(se||{}).reduce((Ce,C)=>Ce+(C&&C.sets?C.sets.length:0),0),I=Object.values(se||{}).reduce((Ce,C)=>Ce+(C&&C.sets?C.sets.filter(ye=>ye&&ye.done).length:0),0),te=P?Math.round(I/P*100):0;return{total:P,done:I,pct:te}}catch(P){}return{total:0,done:0,pct:0}},[se]),oa=P=>{if(!G)return;try{eo("client.session.variant_mid",{surfaceKey:Ds,clientMode:e,sessionId:G.id,variantId:P})}catch(ye){}var I=Array.isArray(G.baseExercises)&&G.baseExercises.length?G.baseExercises:Array.isArray(G.exercises)?G.exercises:[],Ce={...G,variantId:P,exercises:P==="SWAP_RECOVERY"?[{id:"ex_r1",name:"Zone-1 walk",sets:[{reps:"20\u201330 min",rpe:""}],note:"Keep it easy"},{id:"ex_r2",name:"Mobility flow",sets:[{reps:"10\u201315 min",rpe:""}],note:"Hips + T-spine"},{id:"ex_r3",name:"Breathwork",sets:[{reps:"5\u20138 min",rpe:""}],note:"Downshift recovery"}]:P==="SHORTEN"?(I||[]).slice(0,4).map(ye=>({...ye,sets:(ye.sets||[]).slice(0,Math.max(1,Math.ceil((ye.sets||[]).length*.6)))})):P==="LIGHTEN"?(I||[]).map(ye=>({...ye,sets:(ye.sets||[]).map(le=>({...le,rpe:le.rpe?String(Math.max(5,(Number(le.rpe)||7)-1)):le.rpe}))})):I};try{localStorage.setItem(Ae,JSON.stringify(Ce))}catch(ye){}we(Ce);var C=Pe(Ce);at(C);try{window.__toast&&window.__toast("Adjusted session")}catch(ye){}},Ra=()=>{try{localStorage.removeItem(Oe)}catch(P){}Ne(null)},ri=()=>{try{eo("client.session.end",{surfaceKey:Ds,clientMode:e,sessionId:G==null?void 0:G.id})}catch(le){}var P=Number((G==null?void 0:G.startedAt)||0),I=P?Math.max(1,Math.round((Date.now()-P)/6e4)):null;var te=0,Ce=0;try{var le=Object.values(se||{});Ce=le.reduce((O,qe)=>O+(qe&&qe.sets?qe.sets.length:0),0),te=le.reduce((O,qe)=>O+(qe&&qe.sets?qe.sets.filter(Pt=>Pt&&Pt.done).length:0),0)}catch(le){}var C=Ce?Math.round(te/Ce*100):0,ye=C>=80?"COMPLETE":C>=30?"PARTIAL":"ABANDONED";if(!(C<30&&!window.confirm("You marked only "+C+"% of sets as done. End session anyway?"))){try{var le="fof_plan_done_map_v1::"+(Ds||"demo_surface")+"__"+(De||"INDEPENDENT::FREE"),O=localStorage.getItem(le),qe=O?JSON.parse(O)||{}:{},Pt=(G==null?void 0:G.plannedDate)||__todayKey();qe[Pt]={sessionId:G==null?void 0:G.id,ts:Date.now(),title:(G==null?void 0:G.title)||"Session",summary:(G==null?void 0:G.summary)||"",completionPct:C,completionStatus:ye,doneSets:te,totalSets:Ce,durationMin:I,variantId:(G==null?void 0:G.variantId)||null,source:(G==null?void 0:G.source)||null},localStorage.setItem(le,JSON.stringify(qe))}catch(le){}try{typeof Fo=="function"&&Fo({id:(G==null?void 0:G.id)||"sess_"+Date.now(),ts:Date.now(),title:(G==null?void 0:G.title)||"Session",summary:(G==null?void 0:G.summary)||"",doneSets:te,durationMin:I,source:(G==null?void 0:G.source)||null,variantId:(G==null?void 0:G.variantId)||null,completionPct:C,completionStatus:ye})}catch(le){}try{localStorage.removeItem(Ae)}catch(le){}try{localStorage.removeItem(Oe)}catch(le){}we(null),at(null),Ne(null),Si("Session complete",`Saved your per-set log locally (demo).

Completion: ${C}% (${ye}).`)}},Da=Number(xo)||0,Va=sr(Da),Y=Va.band==="MODERATE"?"AMBER":Va.band==="LIMITED"||Va.band==="CRITICAL"?"RED":"GREEN",ft=Y==="AMBER"||Y==="RED",[_a,Ja]=React.useState(!1),[Ui,qs]=React.useState(!1),[_o,ki]=React.useState(!1),[Vs,Ke]=React.useState(null),ua="fof_session_variant_today_v1::"+(Ds||"demo_surface")+"__"+(e||"INDEPENDENT"),ga=(P,I="APPLIED")=>{try{localStorage.setItem(ua,JSON.stringify({date:__todayKey(),variantId:P,status:I,ts:En()}))}catch(te){}},Vi=React.useMemo(()=>{var P=[{id:"LIGHTEN",title:"Lighter version of today",desc:"Reduce volume & intensity. Keep the same structure.",icon:"Sparkles"},{id:"SHORTEN",title:"Shortened session",desc:"Keep key sets only. Stop at ~60\u201370% of planned work.",icon:"Timer"},{id:"SWAP_RECOVERY",title:"Swap to recovery",desc:"Mobility + Zone\u20111 walk + breathwork.",icon:"HeartPulse"}];return Y==="RED"?[P[2],P[0],P[1]]:[P[0],P[1],P[2]]},[Y]),$i="fof_linked_ai_triage_v1::"+(Ds||"demo_surface"),Ya=React.useMemo(()=>Y==="RED"?{title:"Today is a RED day",message:"Capacity is low. Don\u2019t force intensity\u2014swap to recovery, mobility, or a light skills session.",altLabel:"Swap to recovery / low-intensity",altPlan:{kind:"RECOVER",title:"Recovery + Mobility",subtitle:"Zone-1 walk \u2022 breathwork \u2022 stretching",icon:"HeartPulse"}}:{title:"Today is an AMBER day",message:"Capacity is limited. Keep the plan, but reduce volume/intensity or swap to a lighter session.",altLabel:"Reduce intensity / lighter swap",altPlan:{kind:"LIGHT",title:"Light Session",subtitle:"Technique \u2022 short strength \u2022 easy cardio",icon:"Sparkles"}},[Y]),Zt=P=>{try{var I=typeof Ks=="function"?Ks($i,[])||[]:JSON.parse(localStorage.getItem($i)||"[]")||[],te=[{id:Ys(),ts:En(),...P},...I].slice(0,30);return typeof Fs=="function"?Fs($i,te):localStorage.setItem($i,JSON.stringify(te)),te}catch(I){return null}};var Ki="fof_client_plan_requests_v1::"+Ds+"__"+De;var Fa=React.useCallback(P=>{var I=h.map((Ce,C)=>({id:Ce+"_"+C,d:Ce,kind:"REST",title:"Rest",subtitle:"Recovery + mobility",icon:"Moon"}));return(P==="YOGA"?[1,3,5]:P==="HYBRID"?[0,2,4,6]:P==="NUTRITION"?[0,2,4]:[0,2,4]).forEach((Ce,C)=>{P==="YOGA"?I[Ce]={id:h[Ce]+"_"+Ce,d:h[Ce],kind:"YOGA",title:"Yoga",subtitle:C%2===0?"Flow + breath":"Mobility reset",icon:"Lotus"}:P==="NUTRITION"?I[Ce]={id:h[Ce]+"_"+Ce,d:h[Ce],kind:"NUTRITION",title:"Nutrition",subtitle:"Meals + targets",icon:"Utensils"}:P==="HYBRID"?I[Ce]={id:h[Ce]+"_"+Ce,d:h[Ce],kind:C%3===0?"TRAIN":C%3===1?"YOGA":"NUTRITION",title:C%3===0?"Train":C%3===1?"Yoga":"Nutrition",subtitle:C%3===0?"Strength + conditioning":C%3===1?"Flow + mobility":"Meals + targets",icon:C%3===0?"Dumbbell":C%3===1?"Lotus":"Utensils"}:I[Ce]={id:h[Ce]+"_"+Ce,d:h[Ce],kind:"TRAIN",title:C%2===0?"Train":"Recover",subtitle:C%2===0?"Strength + cardio":"Mobility + walk",icon:C%2===0?"Dumbbell":"HeartPulse"}}),I},[h]),Ni=React.useMemo(()=>"fof_plan_week_v1_"+Ds,[Ds]),ys=React.useMemo(()=>"fof_plan_changelog_v1_"+Ds+"__"+De,[Ds,De]),[Ps,Ms]=React.useState(()=>{try{var P=localStorage.getItem(Ni);if(P)return JSON.parse(P)}catch(P){}return Fa(c)}),[o,d]=React.useState(()=>{try{var P=localStorage.getItem(ys);if(P)return JSON.parse(P)}catch(P){}return[]}),m=React.useMemo(()=>"fof_plan_done_map_v1::"+(Ds||"demo_surface")+"__"+(De||"INDEPENDENT::FREE"),[Ds,De]),[E,g]=React.useState(()=>Ks(m,{}));React.useEffect(()=>{g(Ks(m,{}))},[m,Sn]);var f=React.useMemo(()=>{var P=new Date,I=P.getDay(),te=I===0?-6:1-I,Ce=new Date(P.getFullYear(),P.getMonth(),P.getDate()+te),C=[];for(var ye=0;ye<7;ye++){var le=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()+ye);C.push(le.toISOString().slice(0,10))}return C},[]),[F,D]=React.useState(()=>{try{var P=localStorage.getItem(Ki);if(P)return JSON.parse(P)}catch(P){}return[]}),k=React.useRef(null);React.useEffect(()=>{try{localStorage.setItem(Ki,JSON.stringify(F))}catch(P){}try{window.dispatchEvent(new Event("fof_plan_requests_updated"))}catch(P){}},[F]);var T=(P,I,te=null)=>{var ye,le;var Ce=Ps[I],C={id:Ys(),ts:En(),status:"PENDING",kind:P,fromIdx:I,toIdx:te,from:{day:Ce==null?void 0:Ce.d,title:Ce==null?void 0:Ce.title},to:te!=null?{day:(ye=Ps[te])==null?void 0:ye.d,title:(le=Ps[te])==null?void 0:le.title}:null};D(O=>[C,...O].slice(0,30)),d(O=>[{ts:C.ts,msg:"Change requested ("+P+") \u2022 pending coach approval."},...O].slice(0,40));try{eo("plan.change.requested",{kind:P,fromIdx:I,toIdx:te,modeKey:De,surfaceKey:Ds})}catch(O){}return C},he=P=>{var I=(F||[]).find(te=>te.id===P);if(!(!I||I.status!=="PENDING")){Ms(te=>{var Ce=te.slice();if(I.kind==="SWAP"&&I.toIdx!=null){var C=Ce[I.fromIdx];Ce[I.fromIdx]=Ce[I.toIdx],Ce[I.toIdx]=C}if(I.kind==="RESCHEDULE"){var C=I.fromIdx;var ye=I.toIdx;if(ye==null&&(ye=Ce.findIndex((le,O)=>O!==C&&(le.kind==="REST"||/Rest/i.test(le.title)))),ye!=null&&ye>=0){var le=Ce[ye];Ce[ye]=Ce[C],Ce[C]=le}}return Ce}),D(te=>te.map(Ce=>Ce.id===P?{...Ce,status:"APPROVED",resolved_ts:En()}:Ce)),d(te=>[{ts:En(),msg:"Coach approved request \u2022 "+I.kind+"."},...te].slice(0,40));try{eo("plan.change.approved",{reqId:P,kind:I.kind,modeKey:De,surfaceKey:Ds})}catch(te){}}},[oe,ke]=React.useState(null),[Re,Me]=React.useState(null);React.useEffect(()=>{try{localStorage.setItem(Ni,JSON.stringify(Ps))}catch(P){}},[Ps,Ni]),React.useEffect(()=>{try{localStorage.setItem(ys,JSON.stringify(o.slice(-40)))}catch(P){}},[o,ys]),React.useEffect(()=>{Ms(Fa(c)),ke(null),Me(null),d(P=>[...P,{ts:new Date().toISOString(),msg:"Plan regenerated for "+c+"."}].slice(-40))},[c]);var Et=(P,I={})=>{d(te=>[...te,{ts:new Date().toISOString(),msg:P,...I}].slice(-40))},ya=(P,I)=>{if(!(P==null||I==null||P===I)){Ms(te=>{var Ce=[...te],C=Ce[P];return Ce[P]={...Ce[I]},Ce[I]={...C},Ce[P].d=te[P].d,Ce[I].d=te[I].d,Ce}),Et("Swapped "+h[P]+" \u2194 "+h[I]+".",{type:"SWAP",a:P,b:I});try{eo("client.plan.swap",{a:P,b:I,surfaceKey:Ds})}catch(te){}}},Ct=P=>{var I=Ps.findIndex((te,Ce)=>Ce!==P&&te.kind==="REST");if(I===-1){Si("No rest day available","Your week has no rest day to move this session into. Try swapping with another day instead.");return}ya(P,I),Et("Rescheduled "+h[P]+" \u2192 "+h[I]+".",{type:"RESCHEDULE",from:P,to:I});try{eo("client.plan.reschedule",{from:P,to:I,surfaceKey:Ds})}catch(te){}},Jt=()=>{var P=Fa(c);Ms(P),ke(null),Me(null),d(I=>[...I,{ts:new Date().toISOString(),msg:"Plan reset to default week."}].slice(-40));try{eo("client.plan.reset",{surfaceKey:Ds,focusPillar:c})}catch(I){}},Ye=({item:P,idx:I})=>{var te=P.kind==="TRAIN"?"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)]":P.kind==="YOGA"?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)]":P.kind==="NUTRITION"?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)]":"border-white/12 bg-white/5";return React.createElement("button",{type:"button",onClick:()=>{ke(I),Me(null);try{eo("client.plan.day.opened",{idx:I,kind:P.kind,surfaceKey:Ds})}catch(Ce){}},className:"w-full rounded-2xl border p-4 text-left transition-colors hover:bg-white/10 "+te},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(gi,{name:P.icon||"Calendar",size:18,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},P.d),React.createElement("div",{className:"text-white font-semibold text-[13px]"},P.title),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/65"},P.subtitle))),React.createElement("div",{className:"text-[10px] font-mono text-white/45"},P.kind)),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("div",{className:"text-[10px] text-white/55"},"Tap for swap / reschedule"),React.createElement(gi,{name:"ChevronRight",size:16,className:"text-white/70"})))},Tt=()=>{if(oe==null)return null;var P=Ps[oe];return React.createElement(al,{open:oe!=null,title:P.d+" \u2022 "+P.title,onClose:()=>{ke(null),Me(null)}},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Session"),React.createElement("div",{className:"text-[10px] font-mono text-white/45"},P.kind)),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},P.subtitle)),React.createElement("button",{type:"button",onClick:()=>{if(de){Si("Upgrade required","Swap days unlocks in Trial / AI.");return}Me(oe)},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(de?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"Shuffle",size:16})," ",V?"Request a swap":"Swap with another day"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},de?"Locked on Free. Start Trial / AI to swap sessions.":V?"Coach approval required \u2014 choose the day to request.":"Pick a target day to swap sessions.")),React.createElement("button",{type:"button",onClick:()=>{var I;if(de){Si("Upgrade required","Reschedule unlocks in Trial / AI.");return}if(V){var te=T("RESCHEDULE",oe,null);Si("Request sent","Reschedule request submitted for "+(((I=te==null?void 0:te.from)==null?void 0:I.day)||"this day")+" (pending coach approval).");return}Ct(oe)},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(de?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"CalendarClock",size:16})," ",V?"Request reschedule":"Reschedule"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},de?"Locked on Free. Start Trial / AI to reschedule sessions.":V?"Sends a request to your coach for approval.":"Move this session to the next rest day automatically.")),e==="LINKED"?React.createElement("button",{type:"button",onClick:()=>{oe!=null&&(T("SWAP",oe,null),Si("Request sent","In production, this opens a pre-filled message to your coach with the selected day and your requested change."))},className:"w-full rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] px-4 py-3 text-left"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"MessageCircle",size:16})," Ask coach to approve"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/70"},"Linked clients require coach approval.")):React.createElement("button",{type:"button",onClick:()=>{if(de){Si("Upgrade required","AI tuning unlocks in Trial / AI.");return}Si(a==="AI"?"Tune my plan":"Tune (Trial)","AI will rebalance the week using readiness + wearables + schedule constraints.")},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(de?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] hover:bg-[rgba(16,255,97,0.14)]")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(gi,{name:"Sparkles",size:16})," ",a==="AI"?"Tune with AI":a==="TRIAL"?"Tune (Trial preview)":"Unlock AI tuning"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/70"},de?"Locked on Free. Start Trial / AI to unlock auto-adjustments.":"Independent plans can be auto-adjusted week-to-week.")),React.createElement("div",{className:"pt-2 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{ke(null),Me(null)},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Close"),React.createElement("button",{type:"button",onClick:Jt,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Reset week")))},_t=()=>{if(Re==null)return null;var P=Ps[Re];return React.createElement(al,{open:Re!=null,title:"Swap: "+P.d+" \u2022 "+P.title,onClose:()=>Me(null)},React.createElement("div",{className:"text-[11px] text-white/70"},"Choose a target day to swap with."),React.createElement("div",{className:"grid grid-cols-2 gap-2"},Ps.map((I,te)=>React.createElement("button",{key:I.id||te,type:"button",disabled:te===Re,onClick:()=>{var Ce,C;if(de){Si("Upgrade required","Swap days unlocks in Trial / AI.");return}if(V){var ye=T("SWAP",Re,te);Me(null),ke(null),Si("Request sent","Swap request submitted: "+(((Ce=ye==null?void 0:ye.from)==null?void 0:Ce.day)||"From")+" \u2192 "+(((C=ye==null?void 0:ye.to)==null?void 0:C.day)||"To")+" (pending coach approval).");return}ya(Re,te),Me(null),ke(null)},className:`rounded-2xl border px-3 py-3 text-left transition-colors
                                    `+(te===Re?"border-white/10 bg-white/5 opacity-50 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},I.d),React.createElement("div",{className:"mt-0.5 text-[10px] text-white/60"},I.title)))),React.createElement("button",{type:"button",onClick:()=>Me(null),className:"w-full mt-2 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Cancel"))};return React.createElement("div",{className:"space-y-4"},N&&G&&React.createElement("div",{id:"fof-active-session-shell","data-fof-active-session":"1",className:"fixed inset-0 z-[80] flex flex-col bg-[#06060a]",onPointerDown:P=>{try{P.stopPropagation()}catch(I){}},onClick:P=>{try{P.stopPropagation()}catch(I){}}},React.createElement("div",{className:"px-5 pt-5 pb-3 border-b border-white/10 bg-black/30 backdrop-blur-xl"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Plan \u2022 Active Session"),React.createElement("div",{className:"mt-1 text-[16px] font-semibold text-white"},G.title||"Session"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},G.source==="COACH"?"Coach-assigned":G.source==="AI"?"AI-assisted":"Basic"," \u2022 ",G.capZone||Y),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"flex items-center justify-between text-[11px] text-white/65"},React.createElement("div",null,"Progress"),React.createElement("div",{className:"font-mono"},qa.done,"/",qa.total," sets \u2022 ",qa.pct,"%")),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden border border-white/10"},React.createElement("div",{className:"h-full bg-[rgba(77,233,255,0.65)]",style:{width:(qa.pct||0)+"%"}})))),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",onClick:Ra,className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Back to Plan"),!de&&React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>oa("LIGHTEN"),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/85",title:"Reduce intensity"},"Lighten"),React.createElement("button",{type:"button",onClick:()=>oa("SHORTEN"),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/85",title:"Reduce remaining volume"},"Shorten"),React.createElement("button",{type:"button",onClick:()=>oa("SWAP_RECOVERY"),className:"shrink-0 px-3 py-2 rounded-2xl border border-rose-500/35 bg-rose-500/10 hover:bg-rose-500/15 text-[12px] text-white/90",title:"Convert this session to recovery"},"Recovery")),React.createElement("button",{type:"button",onClick:ri,className:"shrink-0 px-3 py-2 rounded-2xl bg-white text-black text-[12px] font-semibold hover:opacity-90"},"End session")))),React.createElement("div",{className:"flex-1 overflow-y-auto px-3 md:px-5 py-4 space-y-4"},React.createElement("div",{className:"flex items-center gap-2 mb-1"},(()=>{var P=(I,te)=>React.createElement("button",{key:I,type:"button",onClick:()=>gt(I),className:"px-3 py-2 rounded-2xl border text-[12px] "+($t===I?"bg-white text-black border-white":"bg-white/5 border-white/12 text-white/80 hover:bg-white/10")},te);return React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},P("OVERVIEW","Overview"),P("LOG","Log"),P("NOTES","Notes"))})()),$t==="OVERVIEW"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Session overview"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-relaxed"},"This is a session instance created from your plan. Your plan stays unchanged; this log becomes history."),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Type"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-semibold"},G.kind||"Training")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Variant"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-semibold"},G.variantId||"BASE")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Progress"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-semibold"},qa.pct,"%")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Sets"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-semibold"},qa.done,"/",qa.total)))),$t==="NOTES"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Notes"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Optional. Saved locally (demo) per session."),React.createElement("textarea",{value:Lt,onChange:P=>{var I=P.target.value;ze(I);try{Fs("fof_active_session_notes_v1::"+(Ds||"demo_surface"),I)}catch(te){}},placeholder:"How did it feel? Any pain, limitations, notes for next time...",className:"mt-3 w-full min-h-[140px] px-4 py-3 rounded-3xl border border-white/12 bg-black/30 text-[12px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Saved automatically")),$t==="LOG"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/30 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Runner"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},(()=>{var I=(G&&(Array.isArray(G.exercises)?G.exercises:Object.values(G.exercises||{}))||[])[_e.exIdx]||null;return I?I.name:"\u2014"})()),React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},(()=>{var I=(G&&(Array.isArray(G.exercises)?G.exercises:Object.values(G.exercises||{}))||[])[_e.exIdx]||null;if(!I)return"";var te=se&&se[I.id]?se[I.id]:null,Ce=te?te.sets||[]:I.sets||[],C=Ce[_e.setIdx]||null,ye=C&&C.done;return"Set "+(Number(_e.setIdx||0)+1)+" of "+(Ce.length||0)+(ye?" \u2022 done":" \u2022 next up")})())),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",onClick:()=>re(P=>!P),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},je?"Expand":"Compact"),React.createElement("button",{type:"button",onClick:()=>nt(-1),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Prev"),React.createElement("button",{type:"button",onClick:()=>nt(1),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Next"),React.createElement("button",{type:"button",onClick:Qe,className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] hover:bg-[rgba(77,233,255,0.18)] text-[12px] text-white"},"Jump to next"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2 "+(je?"opacity-90":"")},(()=>{var Pt,Za,Ma,$a;var I=(G&&(Array.isArray(G.exercises)?G.exercises:Object.values(G.exercises||{}))||[])[_e.exIdx]||null;if(!I)return null;var te=se&&se[I.id]?se[I.id]:null,C=(te?te.sets||[]:I.sets||[])[_e.setIdx]||null,ye=C&&((Pt=C.weight)!=null?Pt:"")||"",le=C&&((Ma=(Za=C.reps)!=null?Za:C.t)!=null?Ma:"")||"",O=C&&(($a=C.rpe)!=null?$a:"")||"",qe=!!(C&&C.done);return React.createElement(React.Fragment,null,React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 "+(qe?"ring-1 ring-emerald-400/20":"")},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/55 font-bold"},"Weight"),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{type:"button",onClick:()=>{var Yt=parseFloat(String(ye||"").replace(/[^0-9.]/g,""))||0,it=Math.max(0,Math.round((Yt-2.5)*10)/10);Wt(I.id,_e.setIdx||0,"weight",String(it||""))},className:"h-8 w-8 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80","aria-label":"Decrease weight"},React.createElement(gi,{name:"Minus",size:14,className:"mx-auto"})),React.createElement("button",{type:"button",onClick:()=>{var Yt=parseFloat(String(ye||"").replace(/[^0-9.]/g,""))||0,it=Math.round((Yt+2.5)*10)/10;Wt(I.id,_e.setIdx||0,"weight",String(it||""))},className:"h-8 w-8 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80","aria-label":"Increase weight"},React.createElement(gi,{name:"Plus",size:14,className:"mx-auto"})))),React.createElement("input",{value:ye,onChange:Yt=>Wt(I.id,_e.setIdx||0,"weight",Yt.target.value),placeholder:"kg",inputMode:"decimal",className:"mt-2 w-full px-3 py-3 rounded-2xl border border-white/12 bg-black/30 text-[14px] font-semibold text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 "+(qe?"ring-1 ring-emerald-400/10":"")},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/55 font-bold"},"Reps / time"),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{type:"button",onClick:()=>{var Yt=parseInt(String(le||"").replace(/[^0-9]/g,""),10)||0,it=Math.max(0,Yt-1);Wt(I.id,_e.setIdx||0,"reps",String(it||""))},className:"h-8 w-8 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80","aria-label":"Decrease reps"},React.createElement(gi,{name:"Minus",size:14,className:"mx-auto"})),React.createElement("button",{type:"button",onClick:()=>{var it=(parseInt(String(le||"").replace(/[^0-9]/g,""),10)||0)+1;Wt(I.id,_e.setIdx||0,"reps",String(it||""))},className:"h-8 w-8 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80","aria-label":"Increase reps"},React.createElement(gi,{name:"Plus",size:14,className:"mx-auto"})))),React.createElement("input",{value:le,onChange:Yt=>Wt(I.id,_e.setIdx||0,"reps",Yt.target.value),placeholder:"reps",inputMode:"numeric",className:"mt-2 w-full px-3 py-3 rounded-2xl border border-white/12 bg-black/30 text-[14px] font-semibold text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 "+(qe?"ring-1 ring-emerald-400/25 bg-emerald-500/5":"")},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/55 font-bold"},"RPE"),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{type:"button",onClick:()=>j(45),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/80"},"45s"),React.createElement("button",{type:"button",onClick:()=>j(60),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/80"},"60s"),React.createElement("button",{type:"button",onClick:()=>j(90),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/80"},"90s"))),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{var Yt=parseFloat(String(O||"").replace(/[^0-9.]/g,""))||0,it=Math.max(0,Math.round((Yt-.5)*10)/10);Wt(I.id,_e.setIdx||0,"rpe",String(it||""))},className:"h-11 w-11 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 active:scale-[0.99]","aria-label":"Decrease RPE"},React.createElement(gi,{name:"Minus",size:16,className:"mx-auto"})),React.createElement("input",{value:O,onChange:Yt=>Wt(I.id,_e.setIdx||0,"rpe",Yt.target.value),placeholder:"1\u201310",inputMode:"decimal",className:"flex-1 px-3 py-3 rounded-2xl border border-white/12 bg-black/30 text-[14px] font-semibold text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}),React.createElement("button",{type:"button",onClick:()=>{var Yt=parseFloat(String(O||"").replace(/[^0-9.]/g,""))||0,it=Math.round((Yt+.5)*10)/10;Wt(I.id,_e.setIdx||0,"rpe",String(it||""))},className:"h-11 w-11 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 active:scale-[0.99]","aria-label":"Increase RPE"},React.createElement(gi,{name:"Plus",size:16,className:"mx-auto"}))),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{Ha(I.id,_e.setIdx||0),j(45)},className:"px-4 py-3 rounded-2xl border text-[13px] font-extrabold active:scale-[0.99] "+(qe?"bg-emerald-500/20 border-emerald-400/30 text-emerald-100":"bg-white/5 border-white/12 text-white/90 hover:bg-white/10")},qe?"Done \u2713":"Mark done"),React.createElement("div",{className:"flex items-center gap-2"},me>0?React.createElement("div",{className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-[12px] text-white/80 font-mono"},"Rest ",Math.floor(me/60),":",String(me%60).padStart(2,"0")):React.createElement("div",{className:"text-[11px] text-white/55"},"No rest timer"),React.createElement("button",{type:"button",onClick:()=>j(0),className:"h-10 w-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 active:scale-[0.99]","aria-label":"Clear rest timer"},React.createElement(gi,{name:"X",size:16,className:"mx-auto"}))))))})()),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/55"},"Tip: this keeps the \u201CPlan \u2192 Active Session\u201D context, but gives you a Track-like run mode."),React.createElement("button",{type:"button",onClick:()=>j(0),className:"text-[11px] text-white/60 hover:text-white"},"Clear rest"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},"Log your workout"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"This is a session instance created from your plan. Logs are saved here and your plan stays unchanged.")),(Array.isArray(G.exercises)?G.exercises:Object.values(G.exercises||{})).map(P=>{var I=se&&se[P.id]?se[P.id]:null,te=I&&I.sets?I.sets:(P.sets||[]).map((Ce,C)=>({idx:C,weight:"",reps:Ce.reps||Ce.t||"",rpe:Ce.rpe||"",done:!1}));return React.createElement("div",{key:P.id,className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-semibold text-white"},P.name),P.note?React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},P.note):null)),React.createElement("div",{className:"mt-3 space-y-2"},te.map(Ce=>React.createElement("div",{key:Ce.idx,className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("div",{className:"w-10 text-[11px] text-white/55"},"Set ",Ce.idx+1),React.createElement("input",{value:Ce.weight,onChange:C=>Wt(P.id,Ce.idx,"weight",C.target.value),placeholder:"kg",className:"w-20 px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}),React.createElement("input",{value:Ce.reps,onChange:C=>Wt(P.id,Ce.idx,"reps",C.target.value),placeholder:"reps/time",className:"flex-1 px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}),React.createElement("input",{value:Ce.rpe,onChange:C=>Wt(P.id,Ce.idx,"rpe",C.target.value),placeholder:"RPE",className:"w-20 px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white/90 placeholder:text-white/30 outline-none focus:border-white/25"}),React.createElement("button",{type:"button",onClick:()=>Ha(P.id,Ce.idx),className:"px-3 py-2 rounded-2xl border text-[12px] "+(Ce.done?"bg-emerald-500/15 border-emerald-400/25 text-emerald-200":"bg-white/5 border-white/12 text-white/75 hover:bg-white/10")},Ce.done?"Done":"Mark")))))})))),e==="LINKED"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Linked"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Plan edits become requests your coach can approve.")),React.createElement("button",{type:"button",onClick:()=>Si("Linked plan","In LINKED mode, plan edits are requests. Coach can approve/reject."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"))):a==="FREE"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Free"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"View + basic swaps. AI suggestions are locked.")),React.createElement("button",{type:"button",onClick:()=>{try{eo("upsell.ai_from_plan",{surfaceKey:Ds})}catch(P){}Si("Unlock AI planning","Upgrade unlocks capacity-based suggestions + weekly load balancing.")},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI"))):React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI / Trial"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"AI can suggest swaps based on capacity + recovery.")),React.createElement("button",{type:"button",onClick:()=>Si("AI planning","In AI tier, the system suggests swaps/reschedules and can regenerate your week based on capacity trend."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"What changes?"))),ft&&React.createElement("div",{className:"rounded-3xl border px-5 py-4 backdrop-blur-xl "+(Y==="RED"?"border-rose-500/40 bg-rose-500/10":"border-amber-400/35 bg-amber-400/10")},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("div",{className:"w-2.5 h-2.5 rounded-full "+(Y==="RED"?"bg-rose-400":"bg-amber-400")}),React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/70 font-bold"},"Capacity execution guidance")),React.createElement("div",{className:"mt-1 text-[14px] font-semibold text-white"},Ya.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/75 leading-relaxed"},Ya.message),(_a||Ui)&&React.createElement("div",{className:"mt-2 text-[11px] text-white/70"},_a?"Applied alternative for today.":"Sent to coach AI triage for approval.")),React.createElement("div",{className:"flex flex-col gap-2 min-w-[160px]"},e==="LINKED"?React.createElement("button",{type:"button",onClick:()=>{ki(!0),Ke(null)},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Send alternate for approval"):a==="AI"||a==="TRIAL"||a==="PAID"?React.createElement("button",{type:"button",onClick:()=>{ki(!0),Ke(null)},className:"px-3 py-2 rounded-2xl border text-[12px] text-white font-semibold "+(Y==="RED"?"border-rose-500/45 bg-rose-500/15 hover:bg-rose-500/20":"border-amber-400/45 bg-amber-400/15 hover:bg-amber-400/20")},"Choose alternate"):React.createElement("button",{type:"button",onClick:()=>Si("Upgrade for AI alternatives","On Free tier we show guidance, but automatic alternatives are locked. Upgrade to enable AI swaps/reschedules."),className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI swaps"),React.createElement("button",{type:"button",onClick:()=>Si("Why you\u2019re seeing this","This overlay is advisory only. It helps you execute safely when capacity is low, without changing or limiting a coach\u2019s plan."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Why?")))),_o&&React.createElement("div",{className:"fixed inset-0 z-[60] flex items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>ki(!1)}),React.createElement("div",{className:"relative w-full max-w-[720px] rounded-t-3xl border border-white/12 bg-[rgba(6,10,18,0.92)] backdrop-blur-2xl p-5"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Alternates for today"),React.createElement("div",{className:"mt-1 text-[14px] font-semibold text-white"},Y==="RED"?"Keep it very light":"Dial it down \u2014 keep the intent"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"Choose an execution option. This does ",React.createElement("span",{className:"font-bold text-white/80"},"not")," rewrite the plan.")),React.createElement("button",{type:"button",onClick:()=>ki(!1),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Close")),React.createElement("div",{className:"mt-4 grid gap-2"},Vi.map(P=>React.createElement("button",{key:P.id,type:"button",onClick:()=>Ke(P),className:"w-full rounded-2xl border px-4 py-3 flex items-start gap-3 text-left transition-colors "+((Vs==null?void 0:Vs.id)===P.id?"border-[rgba(77,233,255,0.40)] bg-[rgba(77,233,255,0.10)]":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"w-10 h-10 rounded-xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(gi,{name:P.icon,size:18,className:"text-white"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-white font-semibold text-[13px]"},P.title),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},P.desc)),(Vs==null?void 0:Vs.id)===P.id&&React.createElement("div",{className:"mt-1 text-[10px] font-mono text-white/60"},"selected")))),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[11px] text-white/60"},e==="LINKED"?"Your coach approves changes. We'll send the selected alternate to AI triage.":a==="AI"||a==="TRIAL"||a==="PAID"?"Apply for today (demo). In production this would adjust execution/scheduling.":"AI alternates are locked on Free tier."),e==="LINKED"?React.createElement("button",{type:"button",disabled:!Vs,onClick:()=>{if(Vs){qs(!0);try{ga(Vs.id,"PENDING")}catch(P){}ki(!1),Zt({type:"CAPACITY_EXEC_ALT",source:"client_capacity_exec_overlay",clientMode:e,tier:a,capNow:Da,zone:Y,choice:Vs,status:"PENDING_REVIEW"});try{eo("linked.triage.created",{surfaceKey:Ds,zone:Y,choice:Vs.id})}catch(P){}Si("Sent for approval","We sent today\u2019s suggested alternate to your coach to approve or decline.")}},className:"px-4 py-2 rounded-2xl border text-[12px] font-semibold "+(Vs?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] hover:bg-[rgba(77,233,255,0.18)] text-white":"border-white/10 bg-white/5 text-white/40 cursor-not-allowed")},"Send for approval"):a==="AI"||a==="TRIAL"||a==="PAID"?React.createElement("button",{type:"button",disabled:!Vs,onClick:()=>{if(Vs){Ja(!0);try{ga(Vs.id,"APPLIED")}catch(P){}ki(!1);try{logEvent("plan.exec_alt.applied",{zone:Y,altChoice:Vs.id})}catch(P){}try{eo("client.exec_alt.applied",{surfaceKey:Ds,zone:Y,choice:Vs.id})}catch(P){}Si("Applied for today","Prototype: marked as adjusted. Production: this would scale/swap today\u2019s session without rewriting the plan.")}},className:"px-4 py-2 rounded-2xl border text-[12px] font-semibold "+(Vs?Y==="RED"?"border-rose-500/45 bg-rose-500/15 hover:bg-rose-500/20 text-white":"border-amber-400/45 bg-amber-400/15 hover:bg-amber-400/20 text-white":"border-white/10 bg-white/5 text-white/40 cursor-not-allowed")},"Apply alternate"):React.createElement("button",{type:"button",onClick:()=>Si("Unlock AI alternates","Upgrade to AI to apply suggested alternates and get weekly balancing."),className:"px-4 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white font-semibold"},"Upgrade")))),React.createElement(Dn,{title:"Plan",subtitle:"Weekly calendar \u2022 swap / reschedule \u2022 change log",right:React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",onClick:()=>Si("Plan module",`This is the client Plan tab.

Key UX:
\u2022 Weekly calendar view
\u2022 Swap/reschedule actions (client-side demo)
\u2022 Change log (audit style)

In production: coach locks / approvals (Linked), AI suggestions (AI tier), and a full audit log stored per-tenant.`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"),React.createElement("button",{type:"button",onClick:Jt,className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80",title:"Reset week"},"Reset"))},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},[{k:"FITNESS",t:"Fitness",i:"Dumbbell",d:"Strength + conditioning"},{k:"NUTRITION",t:"Nutrition",i:"Utensils",d:"Meals + targets"},{k:"YOGA",t:"Yoga",i:"Lotus",d:"Mobility + breath"},{k:"HYBRID",t:"Hybrid",i:"Layers",d:"Fitness + Yoga + Nutrition"}].map(P=>React.createElement("button",{key:P.k,type:"button",onClick:()=>So(P.k),className:`rounded-2xl border p-4 text-left transition-colors
                                    `+(c===P.k?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)]":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-bold"},React.createElement(gi,{name:P.i,size:18})," ",P.t),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},P.d)))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"Weekly calendar"),React.createElement("button",{type:"button",onClick:()=>Si("Calendar","Tap any day to swap or reschedule. The change log below records what you did."),className:"text-[11px] text-white/70 hover:text-white"},"Tips ",React.createElement(gi,{name:"Info",size:14,className:"inline"}))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ps.map((P,I)=>React.createElement(Ye,{key:P.id||I,item:P,idx:I}))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Planned vs done (this week)"),React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},"A clean adherence view \u2014 no guilt. Partial days are shown as \u201Cpartial\u201D.")),React.createElement("button",{type:"button",onClick:()=>Si("Planned vs done","This compares your weekly plan intent against what you actually completed. It updates when you end a session."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Info")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},Ps.map((P,I)=>{var le,O,qe;var te=f&&f[I]?f[I]:null,Ce=te&&E?E[te]:null,C=P&&P.kind&&P.kind!=="REST"?P.title||P.kind:"Rest",ye=Ce?Ce.completionStatus==="COMPLETE"?{t:"Done",cls:"bg-emerald-500/15 border-emerald-400/25 text-emerald-200"}:Ce.completionStatus==="PARTIAL"?{t:"Partial",cls:"bg-amber-400/15 border-amber-400/25 text-amber-100"}:{t:"Abandoned",cls:"bg-rose-500/15 border-rose-400/25 text-rose-200"}:P&&P.kind&&P.kind!=="REST"?{t:"Planned",cls:"bg-white/5 border-white/12 text-white/70"}:{t:"Rest",cls:"bg-white/5 border-white/12 text-white/55"};return React.createElement("div",{key:P.id||I,className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-bold text-white"},h[I]," ",React.createElement("span",{className:"text-white/40 font-mono"},te)),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},C,Ce&&Ce.variantId?" \u2022 variant: "+Ce.variantId:"")),React.createElement("div",{className:"text-right"},React.createElement("span",{className:"px-2 py-1 rounded-full border text-[11px] "+ye.cls},ye.t),Ce?React.createElement("div",{className:"mt-1 text-[10px] font-mono text-white/45"},(le=Ce.completionPct)!=null?le:0,"% \u2022 ",(O=Ce.doneSets)!=null?O:0,"/",(qe=Ce.totalSets)!=null?qe:0):null))})))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Quick actions"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement(Xo,{tone:"sky",icon:"Calendar",onClick:()=>Si("Weekly view","Weekly calendar view (demo). In production: constraints + month view + coach locks.")},"Open calendar view"),e==="LINKED"?React.createElement(React.Fragment,null,React.createElement(Xo,{tone:"lime",icon:"MessageCircle",onClick:()=>{var P=Ps.findIndex(Ce=>Ce&&Ce.kind!=="REST"),I=P>=0?P:0,te=T("RESCHEDULE",I,null);Si("Plan request created","Request submitted ("+te.kind+`). Status: PENDING.

In production: your coach receives this request, can approve/reject, and you see the decision here.`)}},"Create plan request"),React.createElement(Xo,{tone:"violet",icon:"ClipboardCheck",onClick:()=>{}},"View requests")):a==="FREE"?React.createElement(React.Fragment,null,React.createElement(Xo,{tone:"lime",icon:"Shuffle",onClick:()=>{ke(0),Me(0)}},"Swap a day"),React.createElement(Xo,{tone:"violet",icon:"Lock",onClick:()=>{try{eo("upsell.ai_from_plan_quick",{surfaceKey:Ds})}catch(P){}Si("Locked","AI suggestions unlock in Trial/AI.")}},"AI suggestions (locked)")):React.createElement(React.Fragment,null,React.createElement(Xo,{tone:"lime",icon:"Shuffle",onClick:()=>{ke(0),Me(0)}},"Swap a day"),React.createElement(Xo,{tone:"violet",icon:"Sparkles",onClick:()=>Si("AI suggestions","AI suggests swaps based on readiness + schedule. (Demo)")},"Suggest changes (AI)"),React.createElement(Xo,{tone:"brand",icon:"Wand2",onClick:()=>{Ms(Fa(c)),Et("AI regenerated this week (demo).")}},"Regenerate week")))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Plan history"),React.createElement("button",{type:"button",onClick:()=>Si("Plan history","Prototype: planned vs done is stored locally. In production this is a true audit trail synced with your coach (Linked) and your wearable / activity data."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Info")),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Planned vs done (last 10). This updates when you finish a session."),React.createElement("div",{className:"mt-3 space-y-2"},(Array.isArray(Ts)?Ts.slice(0,10):[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/60"},"No history yet. Finish a session to populate this list."):(Array.isArray(Ts)?Ts.slice(0,10):[]).map(P=>{var I;return React.createElement("div",{key:P.id,className:"rounded-2xl border border-white/12 bg-white/5 p-3 flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},P.title||"Session"),React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},P.summary||"\u2014"),React.createElement("div",{className:"mt-1 text-[10px] font-mono text-white/45"},new Date(P.ts).toLocaleString())),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/55 font-bold"},"Done"),React.createElement("div",{className:"mt-1 inline-flex items-center gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10 text-[11px] text-white tabular-nums"},(I=P.doneSets)!=null?I:0," sets"),P.durationMin?React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/10 border border-white/10 text-[11px] text-white tabular-nums"},P.durationMin,"m"):null)))}))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Change log"),React.createElement("button",{type:"button",onClick:()=>{d([]);try{localStorage.removeItem(ys)}catch(P){}},className:"text-[11px] text-white/70 hover:text-white"},"Clear")),React.createElement("div",{className:"mt-3 max-h-[220px] overflow-auto scroll-area space-y-2 pr-1"},o.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/60"},"No changes yet. Swap or reschedule a day to create a log entry."):o.slice().reverse().map((P,I)=>React.createElement("div",{key:I,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-semibold text-white"},P.msg),React.createElement("div",{className:"text-[10px] font-mono text-white/45"},(P.ts||"").toString().slice(11,16))),React.createElement("div",{className:"mt-1 text-[10px] text-white/50"},(P.ts||"").toString().slice(0,10)))))))),React.createElement(Tt,null),React.createElement(_t,null))},Cd=({surfaceKey:e="demo_surface",clientMode:a="INDEPENDENT",tier:r="FREE",coachContext:c=null,habits:h=null,setHabits:V=null,onSessionComplete:de=null,readiness:M=62,recovery:De=71,strain:Ae=48,capNutrition:Oe=null,setCapNutrition:N=null,capTrainingLog:Ne=null,setCapTrainingLog:G=null,setCapacity:we=null})=>{var Tt,_t,P,I,te,Ce;var $t=a==="LINKED",gt=!$t&&r==="FREE",_e=!$t&&(r==="AI"||r==="TRIAL"||r==="PAID"),ve=Number(M)||0,me=sr(ve),j=me.band==="MODERATE"?"AMBER":me.band==="LIMITED"||me.band==="CRITICAL"?"RED":"GREEN",je=j==="AMBER"||j==="RED",re="fof_linked_ai_triage_v1::"+(e||"demo_surface"),[Z,Qe]=React.useState(!1),[nt,Lt]=React.useState(!1),ze=C=>{try{var ye=Ha(re,[])||[],le=[{id:Ys(),ts:En(),...C},...ye].slice(0,30);return qa(re,le),le}catch(ye){return null}},Le=()=>{try{var C=Number((Da==null?void 0:Da.targetCals)||0);if(!C)return;var ye=Math.round(C+(j==="RED"?350:200));Va(le=>({...le,targetCals:String(ye)})),Qe(!0);try{eo("client.nutrition.alt.applied",{surfaceKey:e,zone:j,easedTarget:ye})}catch(le){}Si("Fueling alternate applied","Prototype: we increased today\u2019s target calories slightly to support recovery. In production this would adjust your goal-aligned targets/macros for the day.")}catch(C){}},se=()=>{Lt(!0),ze({type:"CAPACITY_NUTRITION_ALT",source:"client_capacity_exec_overlay",zone:j,capNow:ve,suggestion:j==="RED"?"Ease deficit / prioritize hydration + protein":"Slightly increase intake / carb-support training",status:"PENDING_REVIEW"});try{eo("linked.triage.nutrition.created",{surfaceKey:e,zone:j})}catch(C){}Si("Sent to coach","We sent a fueling adjustment suggestion to your linked professional for approval.")},at=($t?"LINKED":"INDEPENDENT")+"::"+(r||"FREE"),Pe="fof_wearables_connected_v1::"+at,Wt="fof_recovery_log_v1::"+at,Ha=(C,ye)=>{try{var le=JSON.parse(localStorage.getItem(C)||"null");return le==null?ye:le}catch(le){return ye}},qa=(C,ye)=>{try{localStorage.setItem(C,JSON.stringify(ye))}catch(le){}},oa="fof_cap_nutrition_v1",Ra="fof_cap_traininglog_v1",ri=()=>{try{return window.__fof_getSelectedDayKey?window.__fof_getSelectedDayKey():new Date().toISOString().slice(0,10)}catch(C){return new Date().toISOString().slice(0,10)}},[Da,Va]=React.useState(()=>{var C,ye,le,O;try{var qe=localStorage.getItem(oa);if(qe){var Pt=JSON.parse(qe)||{};return{targetCals:(ye=(C=Pt.targetCals)!=null?C:Pt.target)!=null?ye:"",actualCals:(O=(le=Pt.actualCals)!=null?le:Pt.actual)!=null?O:""}}}catch(qe){}return{targetCals:"",actualCals:""}}),[Y,ft]=React.useState(()=>{try{var C=localStorage.getItem(Ra);if(C){var ye=JSON.parse(C)||[],le=ri(),O=(Array.isArray(ye)?ye:[]).find(qe=>qe&&qe.date===le)||null;if(O)return{didSession:!!O.didSession,intensity:O.intensity||"MODERATE"}}}catch(C){}return{didSession:!1,intensity:"MODERATE"}}),_a=React.useMemo(()=>"fof_active_session_v1::"+(e||"demo_surface"),[e]),[Ja,Ui]=React.useState(()=>Ha(_a,null)),qs=React.useMemo(()=>Ja?"fof_session_log_v1::"+Ja.id:null,[Ja]),[_o,ki]=React.useState(()=>{try{var C=Ja?localStorage.getItem("fof_session_log_v1::"+Ja.id):null;if(C)return JSON.parse(C)}catch(C){}return null});React.useEffect(()=>{Ui(Ha(_a,null))},[_a]),React.useEffect(()=>{if(!(!Ja||!qs))try{localStorage.setItem(qs,JSON.stringify(_o||{}))}catch(C){}},[Ja,qs,_o]);var Vs=React.useCallback(C=>{if(!C||!C.exercises)return{};var ye={};return(C.exercises||[]).forEach(le=>{var O=(le.sets||[]).map((qe,Pt)=>({idx:Pt,weight:"",reps:qe.reps||qe.t||"",rpe:qe.rpe||"",done:!1}));ye[le.id]={name:le.name,note:le.note||"",sets:O}}),ye},[]);React.useEffect(()=>{Ja&&ki(C=>{if(C&&Object.keys(C).length)return C;try{var ye=localStorage.getItem("fof_session_log_v1::"+Ja.id);if(ye)return JSON.parse(ye)}catch(ye){}return Vs(Ja)})},[Ja,Vs]);var Ke=(C,ye,le,O)=>{ki(qe=>{var Pt={...qe||{}},Za=Pt[C]?{...Pt[C]}:{sets:[]},Ma=(Za.sets||[]).map(Yt=>({...Yt})),$a=Ma.find(Yt=>Yt.idx===ye)||null;return $a&&($a[le]=O),Za.sets=Ma,Pt[C]=Za,Pt})},ua=(C,ye)=>{ki(le=>{var O={...le||{}},qe=O[C]?{...O[C]}:{sets:[]},Pt=(qe.sets||[]).map(Ma=>({...Ma})),Za=Pt.find(Ma=>Ma.idx===ye)||null;return Za&&(Za.done=!Za.done),qe.sets=Pt,O[C]=qe,O})},ga=()=>{try{eo("client.session.end",{surfaceKey:e,clientMode:a,sessionId:Ja==null?void 0:Ja.id})}catch(O){}var C=Number((Ja==null?void 0:Ja.startedAt)||0),ye=C?Math.max(1,Math.round((Date.now()-C)/6e4)):null;var le=0;try{le=Object.values(_o||{}).reduce((O,qe)=>O+(qe.sets||[]).filter(Pt=>Pt.done).length,0)}catch(O){}try{var O={id:"w_"+Math.random().toString(16).slice(2),ts:Date.now(),type:(Ja==null?void 0:Ja.title)||"Session",minutes:ye,rpe:null,note:"Completed sets: "+le+" \u2022 Logged in-session"};Ni(qe=>[O,...Array.isArray(qe)?qe:[]].slice(0,50))}catch(O){}try{typeof de=="function"&&de({id:(Ja==null?void 0:Ja.id)||"sess_"+Date.now(),ts:Date.now(),title:(Ja==null?void 0:Ja.title)||"Session",summary:(Ja==null?void 0:Ja.summary)||"",doneSets:le,durationMin:ye,source:(Ja==null?void 0:Ja.source)||null,variantId:(Ja==null?void 0:Ja.variantId)||null})}catch(O){}try{localStorage.removeItem(_a)}catch(O){}Ui(null),ki(null),Si("Session complete","Saved your session log locally (demo).")},[Vi,$i]=React.useState(null),[Ya,Zt]=React.useState(null),Ki=React.useMemo(()=>"fof_workout_log_v1::"+e+"__"+a,[e,a]),[Fa,Ni]=React.useState(()=>{try{var C=localStorage.getItem(Ki);if(C)return JSON.parse(C)}catch(C){}return[]}),[ys,Ps]=React.useState({type:"Workout",minutes:"",rpe:"",note:""}),Ms=React.useMemo(()=>"fof_client_checkin_v1::"+e+"__"+a,[e,a]),[o,d]=React.useState(()=>{try{var C=localStorage.getItem(Ms);if(C)return JSON.parse(C)}catch(C){}return{status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,pain:"None",painArea:null}});React.useEffect(()=>{try{var C=localStorage.getItem(Ms);if(C){d(JSON.parse(C));return}}catch(C){}d({status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,pain:"None",painArea:null})},[Ms]),React.useEffect(()=>{try{localStorage.setItem(Ms,JSON.stringify(o))}catch(C){}},[Ms,o]),React.useEffect(()=>{try{var C=localStorage.getItem(Ki);if(C){Ni(JSON.parse(C));return}}catch(C){}Ni([])},[Ki]),React.useEffect(()=>{try{localStorage.setItem(Ki,JSON.stringify(Fa))}catch(C){}},[Ki,Fa]);var m=C=>{C&&C.preventDefault&&C.preventDefault();var ye=Number(ys.minutes||0),le=Number(ys.rpe||0),O={id:"w_"+Math.random().toString(16).slice(2),ts:Date.now(),type:ys.type||"Workout",minutes:ye||null,rpe:le||null,note:(ys.note||"").slice(0,240)};Ni(qe=>[O,...qe].slice(0,50)),Ps({type:ys.type||"Workout",minutes:"",rpe:"",note:""});try{eo("client.workout.logged",{surfaceKey:e,clientMode:a,type:O.type,minutes:O.minutes,rpe:O.rpe})}catch(qe){}Si("Workout logged","Saved locally (demo). In production this attaches to today, feeds weekly load trends, and syncs to your coach when linked.")},E=C=>{try{C&&C.preventDefault&&C.preventDefault(),C&&C.stopPropagation&&C.stopPropagation()}catch(ye){}try{var ye=Number(Da==null?void 0:Da.targetCals),le=Number(Da==null?void 0:Da.actualCals);if(!ye||ye<=0||!le||le<0){Si("Fueling not saved","Please enter both Target and Actual calories.");return}var O={targetCals:ye,actualCals:le,savedAtISO:En()};try{qa(oa,O)}catch(qe){}try{typeof N=="function"&&N(O)}catch(qe){}try{typeof we=="function"&&typeof window.__FOF_FORCE_CAPACITY_RECALC=="function"&&window.__FOF_FORCE_CAPACITY_RECALC()}catch(qe){}try{window.__toast&&window.__toast("Fueling saved")}catch(qe){}try{eo("client.fueling.saved",{surfaceKey:e,targetCals:ye,actualCals:le})}catch(qe){}}catch(ye){console.warn("saveNutrition failed",ye),Si("Could not save",String(ye&&ye.message?ye.message:ye))}},g=C=>{try{C&&C.preventDefault&&C.preventDefault(),C&&C.stopPropagation&&C.stopPropagation()}catch(ye){}try{var ye=ri(),le=String((Y==null?void 0:Y.intensity)||"MODERATE").toUpperCase(),O=(Y==null?void 0:Y.didSession)===!0,qe={date:ye,didSession:O,intensity:le,ts:En()},Pt=Ha(Ra,[]),Za=[qe,...Array.isArray(Pt)?Pt:[]].slice(0,30);qa(Ra,Za);try{typeof G=="function"&&G(Za)}catch(Ma){}try{typeof we=="function"&&typeof window.__FOF_FORCE_CAPACITY_RECALC=="function"&&window.__FOF_FORCE_CAPACITY_RECALC()}catch(Ma){}try{window.__toast&&window.__toast("Training saved")}catch(Ma){}try{eo("client.training.saved",{surfaceKey:e,didSession:O,intensity:le})}catch(Ma){}}catch(ye){console.warn("saveTrainingToday failed",ye),Si("Could not save",String(ye&&ye.message?ye.message:ye))}},f=Array.isArray(h)?h:[],F=typeof V=="function"?V:()=>{},D=gt?f.slice(0,3):f,[k,T]=React.useState(()=>{try{return localStorage.getItem(Pe)==="1"}catch(C){return!1}}),he=React.useMemo(()=>{var C=Math.max(25,Math.min(90,Number(M)||60));return[-6,-2,1,-3,4,2,0].map((le,O)=>Math.max(10,Math.min(100,Math.round(C+le+(O%2===0?1:-1)))))},[M]),oe=React.useMemo(()=>{var C=Math.max(25,Math.min(95,Number(De)||70));return[-4,1,-1,3,-2,2,0].map((le,O)=>Math.max(10,Math.min(100,Math.round(C+le+(O%2===0?0:1)))))},[De]),ke=React.useMemo(()=>{var C=Math.max(20,Math.min(95,Number(Ae)||50));return[6,2,-1,4,-3,1,0].map((le,O)=>Math.max(5,Math.min(100,Math.round(C+le+(O%2===0?0:-1)))))},[Ae]),Re=C=>{T(C);try{localStorage.setItem(Pe,C?"1":"0")}catch(ye){}},Me=()=>{if(gt){Si("Upgrade required","Wearables + insights unlock in Trial / AI.");return}Re(!0);try{eo("wearable.connected",{provider:"demo_multi",surfaceKey:e})}catch(C){}Si("Wearables connected",`You\u2019re now connected (demo).

This unlocks:
\u2022 More accurate capacity + recovery
\u2022 Auto-updated steps / sleep / workouts
\u2022 Smarter week-to-week plan adjustments`)},Et=()=>{Re(!1);try{eo("wearable.disconnected",{surfaceKey:e})}catch(C){}Si("Wearables disconnected","Disconnected (demo). You can reconnect anytime.")},ya=k?7800+M%800:0,Ct=k?6.9+De%9/10:null,Jt=k?42+De%18:null,Ye=k?56+Ae%10:null;return React.createElement("div",{className:"space-y-4"},Ja&&React.createElement("div",{className:"bg-panel border border-white/10 rounded-2xl p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},"Active session"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},Ja.title," \u2022 Source: ",Ja.source," \u2022 ",Ja.summary)),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("button",{type:"button",onClick:()=>{try{localStorage.removeItem(_a)}catch(C){}Ui(null),ki(null)},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-xs text-white/80"},"Close"),React.createElement("button",{type:"button",onClick:ga,className:"shrink-0 px-3 py-2 rounded-2xl bg-white text-black text-xs font-semibold hover:opacity-90"},"End session"))),React.createElement("div",{className:"mt-4 space-y-4"},(Ja.exercises||[]).map(C=>{var ye=_o&&_o[C.id]?_o[C.id]:null,le=ye?ye.sets||[]:(C.sets||[]).map((O,qe)=>({idx:qe,weight:"",reps:O.reps||O.t||"",rpe:O.rpe||"",done:!1}));return React.createElement("div",{key:C.id,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},C.name),C.note?React.createElement("div",{className:"text-xs text-white/60 mt-1"},C.note):null),React.createElement("div",{className:"text-xs text-white/60"},le.length," sets")),React.createElement("div",{className:"mt-3 overflow-x-auto fof-hscroll"},React.createElement("table",{className:"w-full text-xs"},React.createElement("thead",null,React.createElement("tr",{className:"text-white/50"},React.createElement("th",{className:"text-left py-1 pr-2"},"Set"),React.createElement("th",{className:"text-left py-1 pr-2"},"Weight"),React.createElement("th",{className:"text-left py-1 pr-2"},"Reps/Time"),React.createElement("th",{className:"text-left py-1 pr-2"},"RPE"),React.createElement("th",{className:"text-left py-1 pr-0"},"Done"))),React.createElement("tbody",null,le.map(O=>React.createElement("tr",{key:O.idx,className:"border-t border-white/5"},React.createElement("td",{className:"py-2 pr-2 text-white/70"},O.idx+1),React.createElement("td",{className:"py-2 pr-2"},React.createElement("input",{value:O.weight||"",onChange:qe=>Ke(C.id,O.idx,"weight",qe.target.value),className:"w-20 px-2 py-1 rounded-xl bg-black/30 border border-white/10 outline-none",placeholder:"kg"})),React.createElement("td",{className:"py-2 pr-2"},React.createElement("input",{value:O.reps||"",onChange:qe=>Ke(C.id,O.idx,"reps",qe.target.value),className:"w-24 px-2 py-1 rounded-xl bg-black/30 border border-white/10 outline-none",placeholder:"reps"})),React.createElement("td",{className:"py-2 pr-2"},React.createElement("input",{value:O.rpe||"",onChange:qe=>Ke(C.id,O.idx,"rpe",qe.target.value),className:"w-16 px-2 py-1 rounded-xl bg-black/30 border border-white/10 outline-none",placeholder:"1-10"})),React.createElement("td",{className:"py-2 pr-0"},React.createElement("input",{type:"checkbox",checked:!!O.done,onChange:()=>ua(C.id,O.idx),className:"h-4 w-4 rounded border-white/20 bg-black/30"}))))))))}))),a==="LINKED"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Linked"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Your coach sees your check-ins and can adjust your week.")),React.createElement("button",{type:"button",onClick:()=>Si("Linked mode","In LINKED mode, your coach can assign sessions, review logs, and adjust intensity. Your actions here sync to the coach dashboard."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"))):r==="FREE"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Free"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"You can log habits and basics. AI insights and auto-adjustments are preview-only.")),React.createElement("button",{type:"button",onClick:()=>{try{eo("upsell.ai_from_track",{surfaceKey:e})}catch(C){}Si("Upgrade to AI Coach","Upgrade unlocks: auto-adjusted capacity, recovery-based suggestions, and weekly load balancing.")},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI"))):React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI Coach"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Insights adapt based on capacity + recovery + your logs.")),React.createElement("button",{type:"button",onClick:()=>Si("AI insights","In AI tier, habits + recovery + wearable signals tune your plan week-to-week."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"What changes?"))),React.createElement(Dn,{title:"Track",subtitle:"Habits + recovery + wearables in one place.",right:React.createElement("button",{type:"button",onClick:()=>Si("How Track works",`Track is client-facing.

\u2022 Habits: you check off daily targets
\u2022 Recovery: you see how your body is doing
\u2022 Wearables: improve accuracy + reduce manual logging

Nothing here shows backend notes.`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works")},Js===xt.TODAY&&!Oo&&React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl p-4",style:{display:Js===xt.TODAY&&!Oo?"block":"none"}},React.createElement("button",{type:"button",onClick:()=>{Js===xt.TODAY&&!Oo?ir(!0):(Ls(null),pt(xt.TODAY))},className:"w-full text-left"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Capacity Score"),React.createElement("div",{className:"mt-1 text-[26px] font-extrabold text-white leading-none"},M,React.createElement("span",{className:"text-[12px] text-white/55 font-semibold"},"/100"))),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},sr(M).headline),React.createElement("div",{className:"mt-1 text-[11px] text-white/60 max-w-[240px]"},sr(M).subtext))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-[rgba(16,255,97,0.85)]",style:{width:M+"%"}})),React.createElement("div",{className:"mt-2 text-[10px] text-white/55"},"Based on your recent 7-day pattern \u2022 Tap to see what\u2019s contributing")),React.createElement("div",{className:"mt-3 flex items-center gap-1 h-10"},he.map((C,ye)=>React.createElement("div",{key:ye,className:"flex-1 rounded-md bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/30",style:{height:C+"%"}})))))),Js===xt.TODAY&&!Oo&&React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("READINESS_MODULE",{}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"READINESS_MODULE",props:{}}}))}catch(C){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 text-left"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Capacity"),React.createElement("div",{className:"mt-0.5 font-semibold"},"View details")),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("GOAL_MANAGER",{}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"GOAL_MANAGER",props:{}}}))}catch(C){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 text-left"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Goals"),React.createElement("div",{className:"mt-0.5 font-semibold"},"Manage")),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_CLIENT&&window.__FOF_CLIENT.openOverlay?window.__FOF_CLIENT.openOverlay("NUTRITION_LOGGER",{}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"NUTRITION_LOGGER",props:{}}}))}catch(C){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 text-left"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Nutrition"),React.createElement("div",{className:"mt-0.5 font-semibold"},"Log")),React.createElement("button",{type:"button",onClick:()=>{try{var C=(window.__fof_getClientContext?window.__fof_getClientContext():window.__FOF_CLIENT_CONTEXT||{})||{},O=String(C.relationship||C.clientMode||"").toUpperCase()==="LINKED"?"LC_Add_Secondary_Activity_NEW":"IC_Add_Secondary_Activity_NEW";window.__FOF_CLIENT&&typeof window.__FOF_CLIENT.openOverlay=="function"?window.__FOF_CLIENT.openOverlay(O,{from:"TODAY_QUICK_ACTIONS"}):window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:O,props:{from:"TODAY_QUICK_ACTIONS"}}}))}catch(C){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 text-left"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Add-on"),React.createElement("div",{className:"mt-0.5 font-semibold"},"Secondary"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Daily check\u2011in"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"2\u20133 taps \u2014 supports Capacity and your coach visibility (Linked).")),React.createElement("span",{className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold "+(o.status==="UP_TO_DATE"?"border-emerald-400/35 bg-emerald-400/10 text-emerald-100":"border-amber-400/35 bg-amber-400/10 text-amber-100")},o.status==="UP_TO_DATE"?"Up to date":"Due")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Mood"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Great","Okay","Low"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>quickPick("mood",C),className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(o.mood===C?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Soreness"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Low","Moderate","High"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>quickPick("soreness",C),className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(o.soreness===C?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Sleep"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Good","Mixed","Poor"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>quickPick("sleep",C),className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(o.sleep===C?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Pain"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["None","Mild","Moderate","High"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>{quickPick("pain",C),C==="None"&&quickPick("painArea",null)},className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(o.pain===C?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C))))),o.pain&&o.pain!=="None"&&React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Pain area"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Knee","Back","Shoulder","Hip","Ankle","Wrist","Neck","Other"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>quickPick("painArea",C),className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(o.painArea===C?"border-rose-400/40 bg-rose-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C)))),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement(Xo,{tone:"aqua",onClick:()=>{var C={...o,status:"UP_TO_DATE",lastTs:Date.now()};d(C);try{eo("client.checkin.submitted",{surfaceKey:e,clientMode:a,mood:C.mood,soreness:C.soreness,sleep:C.sleep,pain:C.pain,painArea:C.painArea})}catch(ye){}Si("Check\u2011in saved","Saved locally (demo). In production it improves Capacity accuracy and is visible to your coach when linked.")}},"Save check\u2011in"),React.createElement("button",{type:"button",onClick:()=>{d(C=>({...C,status:"DUE"}))},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Mark due"))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Quick workout log"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"Log extra sessions or notes \u2014 reflection first (not a dashboard form).")),React.createElement("button",{type:"button",onClick:()=>Si("Workout logging","Prototype quick log. In production: session logging happens inside the workout flow, and this is mainly for extra activity notes / off-plan sessions."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Type"),React.createElement("select",{value:ys.type,onChange:C=>Ps(ye=>({...ye,type:C.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"},["Workout","Sport","Walk","Run","Swim","Yoga","Mobility","Other"].map(C=>React.createElement("option",{key:C,value:C},C)))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Minutes"),React.createElement("input",{value:ys.minutes,onChange:C=>Ps(ye=>({...ye,minutes:C.target.value})),inputMode:"numeric",placeholder:"e.g., 45",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"RPE"),React.createElement("input",{value:ys.rpe,onChange:C=>Ps(ye=>({...ye,rpe:C.target.value})),inputMode:"numeric",placeholder:"1\u201310",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"})))),React.createElement("div",{className:"mt-3"},React.createElement("textarea",{value:ys.note,onChange:C=>Ps(ye=>({...ye,note:C.target.value})),placeholder:"Optional note (sets, pain, performance, anything).",className:"w-full min-h-[72px] px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"})),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement(Xo,{tone:"aqua",onClick:C=>m(C)},"Save workout"),React.createElement("button",{type:"button",onClick:()=>{Ps({type:"Workout",minutes:"",rpe:"",note:""})},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Clear")),Fa&&Fa.length>0&&React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Recent"),Fa.slice(0,3).map(C=>React.createElement("div",{key:C.id,className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},C.type),React.createElement("div",{className:"text-[11px] text-white/60 tabular-nums"},C.minutes?C.minutes+"m":"",C.rpe?" \u2022 RPE "+C.rpe:"")),C.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},C.note):null))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Fueling (Calories)"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"Optional \u2014 used to refine Capacity when entered.")),React.createElement("button",{type:"button",onClick:()=>Si("Fueling & Capacity","Calories are evaluated against your goal-aligned target (not raw maintenance). When you\u2019re close to target, recovery quality improves and Capacity becomes more stable."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Why?")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Target"),React.createElement("input",{value:Da.targetCals,onChange:C=>Va(ye=>({...ye,targetCals:C.target.value})),inputMode:"numeric",placeholder:"e.g., 2200",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Home"),React.createElement("input",{value:Da.actualCals,onChange:C=>Va(ye=>({...ye,actualCals:C.target.value})),inputMode:"numeric",placeholder:"e.g., 2050",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-white text-[12px] outline-none focus:border-[rgba(77,233,255,0.35)]"}))),React.createElement("div",{className:"mt-3"},React.createElement(Xo,{tone:"aqua",onClick:C=>E(C)},"Save fueling"),React.createElement("div",{className:"mt-1 text-[10px] text-white/55"},"Saved locally (demo). ",Vi?"Saved "+String(Vi).slice(11,16):"Tap Save to apply."))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Training log"),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},"Mark today\u2019s session to make Load more accurate.")),React.createElement("button",{type:"button",onClick:()=>Si("Training log & Capacity","When you log sessions, Load reflects what you actually did (last 7 days). Capacity then balances that Load against your Recovery."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Why?")),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},"Completed a session today?"),React.createElement("button",{type:"button",onClick:()=>ft(C=>({...C,didSession:!C.didSession})),className:"px-3 py-2 rounded-full border text-[12px] font-semibold "+(Y.didSession?"border-[rgba(16,255,97,0.40)] bg-[rgba(16,255,97,0.12)] text-white":"border-white/15 bg-white/5 text-white/70 hover:bg-white/10")},Y.didSession?"Yes":"No")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Intensity"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["LIGHT","MODERATE","HARD"].map(C=>React.createElement("button",{key:C,type:"button",onClick:()=>ft(ye=>({...ye,intensity:C})),className:"px-3 py-2 rounded-full border text-[12px] font-semibold "+(Y.intensity===C?"border-sky-400/40 bg-sky-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},C==="LIGHT"?"Light":C==="HARD"?"Hard":"Moderate")))),React.createElement("div",{className:"mt-3"},React.createElement(Xo,{tone:"violet",onClick:C=>g(C)},"Save training"),React.createElement("div",{className:"mt-1 text-[10px] text-white/55"},"Saved locally (demo). ",Ya?"Saved "+String(Ya).slice(11,16):"Tap Save to apply.")))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[12px] flex items-center gap-2"},React.createElement(gi,{name:"Sparkles",size:16})," Today\u2019s impact"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"This is a UX layer to make changes feel alive. It does ",React.createElement("span",{className:"font-bold text-white/75"},"not")," alter the agreed Capacity calculation.")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/55 font-bold"},"\u0394 Today"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white tabular-nums"},lr&&lr.delta>0?"+":"",lr?lr.delta:0))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},[{k:"Fueling",v:(_t=(Tt=lr==null?void 0:lr.signals)==null?void 0:Tt.fueling)!=null?_t:0,icon:"Utensils"},{k:"Training",v:(I=(P=lr==null?void 0:lr.signals)==null?void 0:P.training)!=null?I:0,icon:"Dumbbell"},{k:"Recovery",v:(Ce=(te=lr==null?void 0:lr.signals)==null?void 0:te.recovery)!=null?Ce:0,icon:"HeartPulse"}].map(C=>React.createElement("div",{key:C.k,className:"inline-flex items-center gap-2 rounded-full border px-3 py-2 text-[11px] font-extrabold "+(C.v>0?"border-emerald-400/40 bg-emerald-400/10 text-emerald-100":C.v<0?"border-rose-400/40 bg-rose-400/10 text-rose-100":"border-white/12 bg-white/5 text-white/75")},React.createElement(gi,{name:C.icon,size:14,className:"opacity-90"}),React.createElement("span",{className:"uppercase tracking-widest"},C.k),React.createElement("span",{className:"tabular-nums"},C.v>0?"+":"",C.v)))))),React.createElement(Dn,{title:"Habits",subtitle:"Quick daily check\u2011ins (tap to complete).",right:React.createElement("button",{type:"button",onClick:()=>Si("Habits",`Habits are lightweight daily targets.

In production they power:
\u2022 streaks + nudges
\u2022 coach visibility (Linked)
\u2022 weekly adherence insights`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Details")},React.createElement("div",{className:"max-h-[calc(100vh-280px)] overflow-y-auto space-y-2 pr-1"},D.map(C=>React.createElement("button",{key:C.id,type:"button",onClick:()=>{F(ye=>ye.map(le=>le.id===C.id?{...le,done:!le.done,streak:le.done?Math.max(0,le.streak-1):le.streak+1}:le));try{eo("client.habit.toggled",{id:C.id,done:!C.done,surfaceKey:e})}catch(ye){}},className:"w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("div",{className:"w-7 h-7 rounded-xl flex items-center justify-center border "+(C.done?"bg-[rgba(16,255,97,0.18)] border-[rgba(16,255,97,0.35)]":"bg-white/5 border-white/15")},React.createElement(gi,{name:C.done?"Check":"Circle",size:14,className:"text-white"})),React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},C.label),React.createElement("div",{className:"text-[10px] text-white/60"},"Target: ",C.target," \u2022 Streak: ",C.streak,"d"))),React.createElement(gi,{name:"ChevronRight",size:16,className:"text-white/45"}))))),React.createElement(Dn,{title:"Recovery",subtitle:"How your body is doing today.",right:React.createElement("button",{type:"button",onClick:()=>Si("Recovery signals",k?"Recovery uses sleep + HRV + resting HR + recent training load (demo).":"Connect wearables to unlock more accurate recovery signals (demo)."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Signals")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Sleep quality"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},k?"Good":"\u2014"),React.createElement("div",{className:"text-[10px] text-white/50 mt-1"},k?Ct.toFixed(1)+"h logged":"Connect wearables to track")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Soreness"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},Ae>65?"High":Ae>45?"Moderate":"Low"),React.createElement("div",{className:"text-[10px] text-white/50 mt-1"},"Based on training load (demo)")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Recovery note"),React.createElement("div",{className:"mt-1 text-[12px] text-white/85 leading-snug"},M>=70?"You\u2019re primed \u2014 push intensity if your schedule allows.":M>=50?"Solid day \u2014 keep the plan, watch fatigue.":"Take it easier \u2014 prioritize mobility and sleep."))),!k&&React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-white/5 p-3 flex items-start gap-3"},React.createElement("div",{className:"p-2 rounded-2xl bg-white/5 border border-white/12"},React.createElement(gi,{name:"Watch",size:18,className:"text-white/80"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Connect a wearable to improve accuracy"),React.createElement("div",{className:"text-[10px] text-white/60 mt-1"},"You\u2019ll get sleep-aware recovery + auto-adjusted week-to-week tracking.")),React.createElement("button",{type:"button",onClick:Me,className:"shrink-0 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 border border-white/15 text-[12px] text-white font-semibold"},"Connect"))))};try{if(typeof Tl=="function"){var e=[...arr.filter(a=>a&&a.date!==t),nextRow].slice(-21);Tl(e)}}catch(e){}var Id=({clientMode:e="INDEPENDENT",tier:a="FREE"})=>{var r=e==="LINKED",c=a==="FREE",h=a!=="FREE",[V,de]=React.useState("FOR_YOU"),[M,De]=React.useState(""),[Ae,Oe]=React.useState("RELEVANCE"),[N,Ne]=React.useState(!1);React.useEffect(()=>{de("FOR_YOU"),De(""),Oe("RELEVANCE"),Ne(!1)},[e,a]);var G=React.useCallback(()=>{try{var Z=localStorage.getItem("fof_library_deeplink_v1");if(!Z)return;var Qe=JSON.parse(Z||"{}")||{},nt=String(Qe.filter||"").toUpperCase();nt&&["FOR_YOU","TRAIN","YOGA","NUTRITION","RECOVERY","SAVED"].includes(nt)&&de(c&&nt==="NUTRITION"?"FOR_YOU":nt),Qe.query!=null&&De(String(Qe.query||"")),localStorage.removeItem("fof_library_deeplink_v1")}catch(Z){}},[c]);React.useEffect(()=>{G();var Z=()=>G();try{window.addEventListener("fof:libraryDeeplink",Z)}catch(Qe){}return()=>{try{window.removeEventListener("fof:libraryDeeplink",Z)}catch(Qe){}}},[G]);var we=Z=>{hd(Qe=>{var nt=new Set(Array.from(Qe));return nt.has(Z)?nt.delete(Z):nt.add(Z),nt});try{eo("client.library.save.toggled",{id:Z,surfaceKey:Ds,clientMode:e,tier:a})}catch(Qe){}},$t=er&&er.size?er.size:0,gt=React.useMemo(()=>[{k:"FOR_YOU",t:r?"Assigned + For you":"For you",icon:"Sparkles"},{k:"TRAIN",t:"Training",icon:"Dumbbell"},{k:"YOGA",t:"Yoga",icon:"Lotus"},{k:"NUTRITION",t:"Nutrition",icon:"Utensils",locked:c},{k:"RECOVERY",t:"Recovery",icon:"HeartPulse"},{k:"SAVED",t:"Saved ("+$t+")",icon:"Bookmark"}],[r,c,$t]),_e=React.useMemo(()=>r?[{id:"assigned_1",cat:"TRAIN",title:"Coach-assigned: Strength A",meta:"Assigned \u2022 Today",duration:35,intensity:"Moderate",icon:"ClipboardCheck",tag:"ASSIGNED"},{id:"assigned_2",cat:"RECOVERY",title:"Coach note: Mobility reset",meta:"Assigned \u2022 10 min",duration:10,intensity:"Low",icon:"HeartPulse",tag:"ASSIGNED"},{id:"assigned_3",cat:"YOGA",title:"Coach pick: Yoga flow (hips)",meta:"Assigned \u2022 20 min",duration:20,intensity:"Low",icon:"Lotus",tag:"ASSIGNED"}]:[],[r]),ve=React.useMemo(()=>[{id:"lib_1",cat:"TRAIN",title:"Strength foundations (4 weeks)",meta:"Program \u2022 Beginner friendly",duration:45,intensity:"Moderate",icon:"Dumbbell",tag:"PROGRAM"},{id:"lib_2",cat:"RECOVERY",title:"Mobility reset (10 min)",meta:"Recovery \u2022 Daily habit",duration:10,intensity:"Low",icon:"HeartPulse",tag:"HABIT"},{id:"lib_3",cat:"YOGA",title:"Yoga flow: hips & hamstrings",meta:"Yoga \u2022 20 min",duration:20,intensity:"Low",icon:"Lotus",tag:"SESSION"},{id:"lib_4",cat:"NUTRITION",title:"High-protein meal pack",meta:"Nutrition \u2022 Recipes",duration:0,intensity:"\u2014",icon:"Utensils",tag:"RECIPES"},{id:"lib_5",cat:"TRAIN",title:"Conditioning builder",meta:"Program \u2022 3 days/week",duration:30,intensity:"High",icon:"Flame",tag:"PROGRAM"},{id:"lib_6",cat:"RECOVERY",title:"Breathwork downshift",meta:"Recovery \u2022 5 min",duration:5,intensity:"Low",icon:"Wind",tag:"SESSION"},{id:"lib_7",cat:"YOGA",title:"Power yoga (strength)",meta:"Yoga \u2022 25 min",duration:25,intensity:"Moderate",icon:"Lotus",tag:"SESSION"},{id:"lib_8",cat:"TRAIN",title:"Gym split: Upper/Lower",meta:"Program \u2022 Intermediate",duration:55,intensity:"Moderate",icon:"Dumbbell",tag:"PROGRAM"},{id:"lib_9",cat:"RECOVERY",title:"Sleep wind-down routine",meta:"Recovery \u2022 8 min",duration:8,intensity:"Low",icon:"Moon",tag:"HABIT"}],[]),me=React.useMemo(()=>!h||r?[]:[{id:"ai_1",cat:"TRAIN",title:"AI pick: Capacity-based training day",meta:"Auto-adjusts intensity \u2022 Today",duration:40,intensity:"Adaptive",icon:"Cpu",tag:"AI PICK"},{id:"ai_2",cat:"RECOVERY",title:"AI pick: Recovery micro-session",meta:"Sleep-aware \u2022 8 min",duration:8,intensity:"Adaptive",icon:"Cpu",tag:"AI PICK"}],[h,r]),j=React.useMemo(()=>{var Z=ve.slice();return c&&(Z=Z.filter(Qe=>Qe.cat!=="NUTRITION").slice(0,6)),h&&(Z=Z.slice(0,9)),Z},[ve,c,h]),je=React.useMemo(()=>{var Z=(M||"").trim().toLowerCase();var Qe=[];V==="FOR_YOU"?Qe=r?[..._e,...j]:[...me,...j]:V==="SAVED"?Qe=[..._e,...me,...j].filter(ze=>er&&er.has(ze.id)):Qe=[..._e,...me,...j].filter(ze=>ze.cat===V),c&&(Qe=Qe.filter(ze=>ze.cat!=="NUTRITION")),Z&&(Qe=Qe.filter(ze=>{var Le=(ze.title||"").toLowerCase(),se=(ze.meta||"").toLowerCase();return Le.includes(Z)||se.includes(Z)||(ze.cat||"").toLowerCase().includes(Z)})),Ae==="NEW"&&(Qe=Qe.slice().reverse()),Ae==="SHORT"&&(Qe=Qe.slice().sort((ze,Le)=>(ze.duration||999)-(Le.duration||999)));var nt=new Set,Lt=[];for(var ze of Qe)nt.has(ze.id)||(nt.add(ze.id),Lt.push(ze));return Lt},[V,M,Ae,r,c,_e,me,j,er]),re=()=>React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-5 text-center"},React.createElement("div",{className:"mx-auto w-12 h-12 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(gi,{name:"Search",size:18,className:"text-white"})),React.createElement("div",{className:"mt-3 text-white font-semibold"},"No matches"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Try a different filter or clear your search."),React.createElement("button",{type:"button",onClick:()=>{De(""),de("FOR_YOU")},className:"mt-4 px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Reset"));return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},r?"Linked Library":c?"Free Library":"AI / Trial Library"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},r?"Your coach can assign sessions. You\u2019ll see assigned items first, then the full catalog.":c?"Browse core training, yoga, and recovery. Nutrition and AI picks are locked on Free.":"Browse the full catalog. \u201CAI picks\u201D adapt to your readiness and week-to-week recovery.")),React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},!r&&c?React.createElement("button",{type:"button",onClick:()=>{try{eo("upsell.ai_from_library",{surfaceKey:Ds})}catch(Z){}Si("Unlock full library","Upgrade unlocks Nutrition packs + AI picks + smarter weekly adjustments.")},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock"):React.createElement("button",{type:"button",onClick:()=>Si("Library module",`Library is shared across the FlowOFIT ecosystem.

Client:
\u2022 Browse + save
\u2022 Start sessions (demo)
`+(r?`\u2022 Receives coach assignments (Linked)
`:"")+(h?`\u2022 Gets AI recommendations (AI/Trial)
`:"")+`

Coach:
\u2022 Assign sessions/programs (Linked)

Admin:
\u2022 Curate and govern content`),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it connects"))),React.createElement("div",{className:"mt-4 flex flex-col sm:flex-row gap-2"},React.createElement("div",{className:"flex-1 relative"},React.createElement("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/60"},React.createElement(gi,{name:"Search",size:16})),React.createElement("input",{value:M,onChange:Z=>De(Z.target.value),placeholder:r?"Search assigned + catalog\u2026":"Search the library\u2026",className:"w-full pl-9 pr-3 py-2.5 rounded-2xl border border-white/12 bg-white/5 text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.28)]"})),React.createElement("select",{value:Ae,onChange:Z=>Oe(Z.target.value),className:"sm:w-[180px] w-full px-3 py-2.5 rounded-2xl border border-white/12 bg-white/5 text-white focus:outline-none"},React.createElement("option",{value:"RELEVANCE"},"Sort: Relevance"),React.createElement("option",{value:"NEW"},"Sort: Newest"),React.createElement("option",{value:"SHORT"},"Sort: Shortest")))),React.createElement("div",{className:"flex flex-wrap gap-2"},gt.map(Z=>{var Qe=V===Z.k,nt=!!Z.locked;return React.createElement("button",{key:Z.k,type:"button",onClick:()=>{if(nt){try{eo("upsell.library_filter_locked",{filter:Z.k,surfaceKey:Ds})}catch(Lt){}return Si("Locked on Free","Nutrition packs unlock on AI / Trial. You can still browse Training, Yoga, and Recovery on Free.")}de(Z.k)},className:`px-3 py-2 rounded-full border text-[12px] font-semibold transition-colors inline-flex items-center gap-2
                                    `+(Qe?"border-[rgba(77,233,255,0.40)] bg-[rgba(77,233,255,0.12)] text-white":nt?"border-white/10 bg-white/3 text-white/45 hover:bg-white/5":"border-white/12 bg-white/5 text-white/70 hover:text-white hover:bg-white/10"),title:nt?"Locked on Free":Z.t},React.createElement(gi,{name:Z.icon,size:14,className:nt?"text-white/35":"text-white"}),Z.t,nt?React.createElement(gi,{name:"Lock",size:14,className:"text-white/35"}):null)})),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("button",{type:"button",onClick:()=>Ne(Z=>!Z),className:"w-full flex items-center justify-between text-left"},React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto fof-hscroll max-w-full md:overflow-visible"},React.createElement("div",{className:"w-9 h-9 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(gi,{name:"Info",size:16,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[13px]"},"How to use Library"),React.createElement("div",{className:"text-white/60 text-[11px]"},r?"Assigned items first \u2022 Save favorites for your coach":c?"Browse basics \u2022 Upgrade to unlock more":"AI picks adapt to your week"))),React.createElement(gi,{name:N?"ChevronUp":"ChevronDown",size:18,className:"text-white/70"})),N?React.createElement("div",{className:"mt-3 text-[12px] text-white/70 leading-relaxed space-y-2"},r?React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 ",React.createElement("span",{className:"text-white/90 font-semibold"},"Assigned")," items are your coach\u2019s picks. Completing them improves plan accuracy."),React.createElement("div",null,"\u2022 Tap ",React.createElement("span",{className:"text-white/90 font-semibold"},"Save")," to bookmark sessions you want more of (helps your coach personalize).")):c?React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 Free includes Training, Yoga and Recovery basics."),React.createElement("div",null,"\u2022 Nutrition packs + AI picks unlock on AI/Trial.")):React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 ",React.createElement("span",{className:"text-white/90 font-semibold"},"AI picks")," adapt based on capacity, recovery and weekly load."),React.createElement("div",null,"\u2022 Saves become your shortcuts \u2014 use ",React.createElement("span",{className:"text-white/90 font-semibold"},"Saved")," to quickly start sessions."))):null),React.createElement("div",{className:"space-y-3"},je.length===0?React.createElement(re,null):je.map(Z=>{var Qe=er&&er.has(Z.id),nt=c&&Z.cat==="NUTRITION",Lt=Z.tag==="ASSIGNED",ze=Z.tag==="AI PICK";return React.createElement("div",{key:Z.id,className:`rounded-3xl border p-4 flex items-start justify-between gap-3
                                `+(Lt?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.08)]":ze?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.08)]":"border-white/12 bg-white/5")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-11 h-11 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center shrink-0"},React.createElement(gi,{name:Z.icon,size:18,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-white font-semibold text-[13px]"},Z.title),React.createElement("span",{className:`px-2 py-1 rounded-full text-[10px] font-bold tracking-widest border
                                                `+(Lt?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] text-white":ze?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] text-white":"border-white/10 bg-white/5 text-white/70")},Z.tag),React.createElement("span",{className:"px-2 py-1 rounded-full text-[10px] border border-white/10 bg-white/5 text-white/70"},Z.cat)),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},Z.meta),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2 text-[10px] text-white/70"},Z.duration?React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/10 bg-white/5"},Z.duration," min"):null,Z.intensity?React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/10 bg-white/5"},"Intensity: ",Z.intensity):null,Qe?React.createElement("span",{className:"px-2 py-1 rounded-full border border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] text-white"},"Saved"):null))),React.createElement("div",{className:"flex flex-col items-center gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:()=>we(Z.id),className:`px-3 py-2 rounded-2xl border text-[12px] font-semibold inline-flex items-center gap-2
                                            `+(Qe?"border-[rgba(16,255,97,0.40)] bg-[rgba(16,255,97,0.12)] text-white":"border-white/12 bg-white/5 text-white/75 hover:bg-white/10"),title:Qe?"Unsave":"Save"},React.createElement(gi,{name:Qe?"BookmarkCheck":"Bookmark",size:16}),Qe?"Saved":"Save"),React.createElement("button",{type:"button",onClick:()=>{if(nt){try{eo("upsell.library_item_locked",{id:Z.id,surfaceKey:Ds})}catch(Le){}return Si("Locked on Free","Nutrition packs unlock on AI / Trial.")}try{eo("client.library.item.opened",{id:Z.id,cat:Z.cat,source:Lt?"ASSIGNED":ze?"AI_PICK":"CATALOG",surfaceKey:Ds})}catch(Le){}Si("Demo: Start item",`In a real build this would open the session/program detail screen, with:
\u2022 content metadata
\u2022 equipment needs
\u2022 coach notes (Linked)
\u2022 AI adjustments (AI tier)`,{id:Z.id,cat:Z.cat,tag:Z.tag})},className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 inline-flex items-center gap-2"},React.createElement(gi,{name:"Play",size:16}),"Open")))})),!r&&h?React.createElement("div",{className:"rounded-3xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-5"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI tools"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Generate a suggested session list based on your capacity trend.")),React.createElement("button",{type:"button",onClick:()=>{try{eo("client.library.ai_generate_clicked",{surfaceKey:Ds})}catch(Z){}Si("AI generate (demo)","In production: AI uses capacity trend + recent workouts + recovery + time constraints to recommend sessions. This also feeds Admin analytics and your \u201CWeekly Capacity\u201D evolution.")},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white inline-flex items-center gap-2"},React.createElement(gi,{name:"Sparkles",size:16})," Generate"))):null)},Rd=({surfaceKey:e="client",clientMode:a="INDEPENDENT",tier:r="FREE",coachContext:c=null})=>{var h=a==="LINKED",V=r==="AI",M="fof_wearables_connected_v1::"+((h?"LINKED":"INDEPENDENT")+"::"+(r||"FREE")),De=React.useMemo(()=>{try{var j=localStorage.getItem(M);if(!j)return!1;var je=JSON.parse(j);return Array.isArray(je)?je.length>0:!!je}catch(j){return!1}},[M]),Ae=React.useMemo(()=>"fof_checkin_v1::"+e+"__"+a,[e,a]),[Oe,N]=React.useState(()=>{try{var j=localStorage.getItem(Ae);if(j)return JSON.parse(j)}catch(j){}return{status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,pain:null,painArea:null,note:""}});React.useEffect(()=>{try{var j=localStorage.getItem(Ae);if(j){N(JSON.parse(j));return}}catch(j){}N({status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,pain:null,painArea:null,note:""})},[Ae]),React.useEffect(()=>{try{localStorage.setItem(Ae,JSON.stringify(Oe))}catch(j){}},[Ae,Oe]);var Ne=()=>{var j=En(),je=re=>({...re,status:"UP_TO_DATE",lastTs:j});N(re=>{var Z=je(re);try{localStorage.setItem(Ae,JSON.stringify(Z))}catch(Qe){}return Z});try{window.dispatchEvent(new Event("fof_checkin_updated"))}catch(re){}try{eo("client.coach.checkin.completed",{modeKey:$t,surfaceKey:e,ts:j})}catch(re){}Si("Check-in submitted","Nice \u2014 your coach will see this in their dashboard. In production: this would create a secure, timestamped entry and update compliance states.")},G=()=>{N(j=>({...j,status:"DUE"}));try{eo("client.coach.checkin.set_due",{modeKey:$t,surfaceKey:e})}catch(j){}},we=(j,je)=>N(re=>({...re,[j]:je})),$t=React.useMemo(()=>(h?"LINKED":"INDEPENDENT")+"::"+(r||"FREE"),[h,r]),gt=React.useMemo(()=>"fof_client_plan_requests_v1::"+e+"__"+$t,[e,$t]),[_e,ve]=React.useState(0),me=React.useCallback(()=>{try{var j=localStorage.getItem(gt);if(!j)return ve(0);var je=JSON.parse(j)||[];ve(je.filter(re=>re&&re.status==="PENDING").length)}catch(j){ve(0)}},[gt]);if(React.useEffect(()=>{var j=()=>me();try{window.addEventListener("fof_planreq_updated",j)}catch(je){}return()=>{try{window.removeEventListener("fof_planreq_updated",j)}catch(je){}}},[me]),React.useEffect(()=>{me();var j=()=>me(),je=re=>{re&&re.key===gt&&me()};return window.addEventListener("fof_plan_requests_updated",j),window.addEventListener("storage",je),()=>{window.removeEventListener("fof_plan_requests_updated",j),window.removeEventListener("storage",je)}},[me,gt]),h){var j=c&&(c.coachName||c.name)?c.coachName||c.name:"Your coach",je=c&&c.planName?c.planName:"Your plan",re=Oe.status==="UP_TO_DATE"?"good":"warn",Z=Oe.status==="UP_TO_DATE"?"Up to date":"Due";return React.createElement("div",{className:"space-y-4"},React.createElement(Dn,{title:"Coach",subtitle:"Updates, check-ins, and messages \u2014 client-facing and clean.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"Linked")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px] leading-tight"},j),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},je," \u2022 your coach can review your check-ins and adjust your week.")),React.createElement("button",{type:"button",onClick:()=>Si("Coach profile","Coach profile view (client-facing). In production: coach bio, specialties, availability, and contact preferences."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"View ",React.createElement(gi,{name:"ChevronRight",size:14,className:"inline"}))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement(Xo,{tone:"violet",icon:"MessageSquare",onClick:()=>{try{eo("client.coach.message.clicked",{surfaceKey:e})}catch(Qe){}Si("Message","Secure client\u2194coach messaging (demo).")}},"Message"),React.createElement(Xo,{tone:"sky",icon:"ClipboardCheck",onClick:()=>{try{eo("client.coach.checkin.opened",{surfaceKey:e})}catch(Qe){}Si("Check-in","Scroll down \u2014 the Check-in card is right below.")}},"Check-in"),React.createElement(Xo,{tone:"lime",icon:"Calendar",onClick:()=>{try{eo("client.coach.plan.opened",{surfaceKey:e})}catch(Qe){}pt("TRACK")}},"Plan"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Check-in"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"A quick signal for your coach \u2014 takes 20 seconds.")),React.createElement(qd,{label:"Status",value:Z,tone:re,onClick:()=>Si("Check-in status",Oe.status==="UP_TO_DATE"?"Last submitted: "+(Oe.lastTs||"\u2014"):"Check-in is due. Submit to keep your coach updated.")})),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Mood"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Great","Okay","Low"].map(Qe=>React.createElement("button",{key:Qe,type:"button",onClick:()=>we("mood",Qe),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(Oe.mood===Qe?"border-sky-400/40 bg-sky-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Qe)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Soreness"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Low","Moderate","High"].map(Qe=>React.createElement("button",{key:Qe,type:"button",onClick:()=>we("soreness",Qe),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(Oe.soreness===Qe?"border-amber-400/40 bg-amber-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Qe))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Pain"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["None","Mild","Moderate","High"].map(Qe=>React.createElement("button",{key:Qe,type:"button",onClick:()=>{we("pain",Qe),Qe==="None"&&we("painArea",null)},className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(Oe.pain===Qe?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Qe))),Oe.pain&&Oe.pain!=="None"&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/50 font-bold"},"Area"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Knee","Back","Shoulder","Hip","Ankle","Wrist","Neck","Other"].map(Qe=>React.createElement("button",{key:Qe,type:"button",onClick:()=>we("painArea",Qe),className:"px-3 py-1.5 rounded-2xl border text-[12px] "+(Oe.painArea===Qe?"border-rose-400/40 bg-rose-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Qe)))))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},"Sleep"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Good","Mixed","Poor"].map(Qe=>React.createElement("button",{key:Qe,type:"button",onClick:()=>we("sleep",Qe),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(Oe.sleep===Qe?"border-emerald-400/40 bg-emerald-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Qe))))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:Ne,className:`rounded-2xl px-4 py-3 font-semibold text-[13px] flex items-center justify-center gap-2 border transition-colors
                                        `+(Oe.status==="UP_TO_DATE"?"bg-white/5 border-white/12 text-white/70 hover:bg-white/10":"bg-[rgba(77,233,255,0.12)] border-[rgba(77,233,255,0.35)] text-white hover:bg-[rgba(77,233,255,0.18)]")},React.createElement(gi,{name:"Send",size:16})," ",Oe.status==="UP_TO_DATE"?"Submitted":"Submit check-in"),React.createElement("button",{type:"button",onClick:()=>Si("What your coach sees","In production: your coach sees your check-in timeline, capacity trend, and adherence. They can adjust your plan, assign content, and send notes back to you."),className:"rounded-2xl px-4 py-3 font-semibold text-[13px] flex items-center justify-center gap-2 border border-white/12 bg-white/5 hover:bg-white/10 text-white"},React.createElement(gi,{name:"Eye",size:16})," What coach sees")),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},Oe.status==="UP_TO_DATE"?React.createElement("button",{type:"button",onClick:G,className:"underline underline-offset-4 hover:text-white/80"},"Set as due (demo)"):React.createElement("span",null,"Tip: keep it short \u2014 the coach only needs signals, not essays."))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Status snapshot"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"Lightweight status indicators (no scary labels).")),_e>0?React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-amber-400/10 text-amber-200 border border-amber-400/35"},_e," plan request",_e>1?"s":""," pending"):React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-400/10 text-emerald-200 border border-emerald-400/35"},"On track")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},[{t:"Check-in",v:Z,tone:re},{t:"Wearable",v:"Not yet",tone:"brand"},{t:"Plan",v:_e>0?"Waiting":"Active",tone:_e>0?"warn":"good"}].map(Qe=>React.createElement("div",{key:Qe.t,className:`rounded-2xl border px-3 py-2
                                        `+(Qe.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":Qe.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},Qe.t),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold text-white"},Qe.v)))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement(Xo,{tone:"sky",icon:"ShieldCheck",onClick:()=>Si("Status details","In production: detailed compliance timeline and coach notes appear here. This stays client-friendly (no internal risk labels).")},"View details"),React.createElement(Xo,{tone:"violet",icon:"ClipboardList",onClick:()=>{pt("TRACK"),Si("Plan requests","If you request swaps/reschedules, they show up for your coach. In this demo you can create requests inside the Plan tab.")}},"Review plan requests"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI + Coach blend"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Your coach stays in control. AI helps with suggestions and summaries \u2014 your coach approves the final plan.")),React.createElement("button",{type:"button",onClick:()=>Si("AI + Coach blend","Linked clients: AI can propose session swaps based on capacity/sleep and summarize your check-ins. Your coach is the decision-maker (approvals + plan locks)."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works")))))}return V?React.createElement("div",{className:"space-y-4"},React.createElement(Dn,{title:"AI Coach",subtitle:"Quick tools \u2014 no clutter. Uses your capacity trend to guide the week.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"AI")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement(Xo,{tone:"violet",icon:"Sparkles",onClick:()=>{try{eo("client.ai.ask.opened",{surfaceKey:e})}catch(j){}Si("Ask AI (demo)","In production: chat with context (goals, readiness, equipment, schedule).")}},"Ask AI"),React.createElement(Xo,{tone:"sky",icon:"Calendar",onClick:()=>{try{eo("client.ai.plan.adjust.clicked",{surfaceKey:e})}catch(j){}pt("TRACK"),Si("AI planning","In Plan: AI suggests swaps/reschedules using capacity trend.")}},"Adjust my week"),React.createElement(Xo,{tone:"lime",icon:"HeartPulse",onClick:()=>{try{eo("client.ai.recovery.insights.clicked",{surfaceKey:e})}catch(j){}Si("Recovery insights (demo)","Sleep + soreness + strain summary. With wearables, this becomes automatic.")}},"Recovery insights"),React.createElement(Xo,{tone:"sky",icon:"Utensils",onClick:()=>{try{eo("client.ai.nutrition.clicked",{surfaceKey:e})}catch(j){}Si("AI nutrition (demo)","Generate meal suggestions + macro guidance based on your goal and training load.")}},"Nutrition help")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Weekly readiness tune"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"AI can nudge intensity up/down based on your trend.")),React.createElement("button",{type:"button",onClick:()=>Si("Capacity Score evolution","In production: a weekly graph and \u201Cwhy it changed\u201D explanation (sleep, load, recovery, adherence)."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Preview")),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},[{t:"Trend",v:"Stable",tone:"good"},{t:"Load",v:"Moderate",tone:"warn"},{t:"Next week",v:"Adjust",tone:"brand"}].map(j=>React.createElement("div",{key:j.t,className:`rounded-2xl border px-3 py-2
                                        `+(j.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":j.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[10px] uppercase tracking-widest text-white/60 font-bold"},j.t),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold text-white"},j.v))))))):React.createElement("div",{className:"space-y-4"},React.createElement(Dn,{title:"Guidance",subtitle:"Basic guidance + navigation. Upgrade unlocks AI coaching.",right:React.createElement("span",{className:"text-[10px] font-mono text-white/55"},"Free")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"What you can do here"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"Browse the library, track basics, and follow your plan.")),React.createElement("button",{type:"button",onClick:()=>Si("Guidance vs AI","Free: basic content + tracking. AI tier: capacity-based planning, smart suggestions, and summaries."),className:"shrink-0 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Compare")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement(Xo,{tone:"lime",icon:"Play",onClick:()=>{try{window.__fof_toast&&window.__fof_toast("Start / Continue Today\u2019s Session (stub): execution stays in Today.")}catch(j){}}},"Start / Continue Today\u2019s Session"),React.createElement(Xo,{tone:"sky",icon:"Library",onClick:()=>pt("LIBRARY")},"Open Library"),React.createElement(Xo,{tone:"violet",icon:"Users",onClick:()=>{try{eo("client.link_coach.clicked",{surfaceKey:e})}catch(j){}Si("Link a coach","In production: connect to a coach/trainer for assigned plans, accountability, and approvals.")}},"Link a coach"),React.createElement(Xo,{tone:"sky",icon:"Calendar",onClick:()=>pt("TRACK")},"View Plan"),React.createElement(Xo,{tone:"violet",icon:"Activity",onClick:()=>pt("TRACK")},"Track"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Upgrade to AI Coach"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Unlock capacity-based suggestions, smarter weekly planning, and AI insights.")),React.createElement("button",{type:"button",onClick:()=>{try{eo("upsell.ai_from_coach_tab",{surfaceKey:e})}catch(j){}Si("Unlock AI Coach","In production: subscription paywall. For demo: switch tier using the Account button in header.")},className:"shrink-0 px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI")))))},rl=()=>React.createElement(bd,{onBack:()=>{},onHome:()=>{},canGoBack:!1},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"w-full max-w-lg rounded-[28px] border border-white/15 bg-white/6 backdrop-blur-2xl shadow-[0_25px_90px_rgba(0,0,0,0.55)] p-6"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Choose how you train"),React.createElement("div",{className:"mt-2 text-white text-[18px] font-extrabold"},"Pick your dashboard mode"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Linked is for coach-led training. Independent is for solo plans (free, trial, or AI)."),React.createElement("div",{className:"mt-5 space-y-3"},React.createElement(Xo,{tone:"violet",icon:"Users",onClick:()=>{Rt("LINKED"),hl(!1),pt("TODAY")}},"Linked with my coach"),React.createElement(Xo,{tone:"sky",icon:"User",onClick:()=>{Rt("INDEPENDENT"),hl(!1),pt("TODAY")}},"Independent (solo)")),Ft!=="LINKED"||zn?React.createElement("div",{className:"mt-5 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px] flex items-center gap-2"},React.createElement(gi,{name:"Sparkles",size:16})," Tier"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("button",{onClick:()=>dn("FREE"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(Di==="FREE"?"border-sky-400/45 bg-sky-400/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Free"),React.createElement("div",{className:"text-white/60 text-[10px]"},"Guidance")),React.createElement("button",{onClick:()=>dn("TRIAL"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(Di==="TRIAL"?"border-amber-400/45 bg-amber-400/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Trial"),React.createElement("div",{className:"text-white/60 text-[10px]"},"Full access")),React.createElement("button",{onClick:()=>dn("AI"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(Di==="AI"?"border-[rgba(168,85,255,0.45)] bg-[rgba(168,85,255,0.12)]":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"AI Coach"),React.createElement("div",{className:"text-white/60 text-[10px]"},"Paid")))):React.createElement("div",{className:"mt-5 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px] flex items-center gap-2"},React.createElement(gi,{name:"CreditCard",size:16})," Plan & Billing"),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-white/80 text-[12px]"},React.createElement("span",{className:"font-semibold text-white"},"Plan source:")," Coach / Studio managed"),React.createElement("div",{className:"mt-1 text-white/60 text-[11px]"},React.createElement("span",{className:"font-semibold text-white/80"},"Status:")," Active (simulated)")),React.createElement("div",{className:"mt-2 text-white/55 text-[10px]"},"Linked clients don\u2019t choose Free/Trial/Paid here. Access is derived from billing + coach assignment."),React.createElement("button",{type:"button",onClick:()=>Si("Linked billing","In a production Linked experience, plan status is managed by the coach/studio or subscription owner. Tier switching is available only in QA Mode for testing dunning/trial flows."),className:"mt-2 w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-left"},React.createElement("div",{className:"text-white/80 text-[11px] font-semibold"},"Why no Tier selector?"),React.createElement("div",{className:"text-white/50 text-[10px]"},"Tap to see explanation"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"QA Mode"),React.createElement("div",{className:"text-white/55 text-[10px]"},"Shows simulation controls (Tier selector for Linked)")),React.createElement("button",{type:"button",onClick:()=>xl(e=>!e),className:"px-3 py-2 rounded-2xl border text-[11px] font-bold "+(zn?"border-emerald-400/45 bg-emerald-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},zn?"ON":"OFF"))),React.createElement("div",{className:"mt-5 flex justify-between"},React.createElement("button",{type:"button",onClick:ee,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Log out"),React.createElement("button",{type:"button",onClick:()=>Si("Mode choice","This is used when the user reaches dashboard from Login (not onboarding).\\n\\nFrom onboarding, we can skip this and route directly to the correct dashboard type."),className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Why this?"))))),Xd=({scrollRef:e})=>{var $t,gt;if(Js===xt.PROFILE)return null;var a=Number(xo)||0,r=sr(a),h={[xt.TODAY]:"Today",[xt.PLAN]:"Plan",[xt.TRACK]:"Log",[xt.COACH]:"Coach",[xt.INSIGHTS]:"Insights",[xt.COMMUNITY]:"Community",[xt.PROFILE]:"Profile"}[Js]||"Today",V=Js===xt.TODAY&&!Oo,de=r.band==="HIGH"?"High":r.band==="MODERATE"?"Moderate":r.band==="LIMITED"?"Limited":"Low",M=r.band==="HIGH"?"bg-emerald-400":r.band==="MODERATE"?"bg-amber-400":r.band==="LIMITED"?"bg-orange-400":"bg-rose-400",De=React.useMemo(()=>Math.max(20,Math.min(95,Math.round(62))),[]),[Ae,Oe]=React.useState(6);React.useEffect(()=>{Do&&Oe(6)},[Do]);var N=React.useMemo(()=>{var _e=j=>Math.max(0,Math.min(100,Math.round(Number(j)||0))),ve=_e(a);return[ve-18,ve-12,ve-8,ve-5,ve-7,ve-2,ve].map(_e)},[a]),Ne=React.useMemo(()=>{var _e=j=>Math.max(0,Math.min(100,Math.round(Number(j)||0))),ve=_e(wa!=null?wa:50);return[6,2,-1,4,-3,1,0].map((j,je)=>_e(ve+j+(je%2===0?0:-1)))},[wa]),G=React.useMemo(()=>{var _e=j=>Math.max(0,Math.min(100,Math.round(Number(j)||0))),ve=_e(Xi!=null?Xi:70);return[-4,1,-1,3,-2,2,0].map((j,je)=>_e(ve+j+(je%2===0?0:1)))},[Xi]),we=React.useMemo(()=>{try{var ve="fof_wearables_connected_v1::"+((Ft==="LINKED"?"LINKED":"INDEPENDENT")+"::"+(Di||"FREE")),me=localStorage.getItem(ve),j=me?JSON.parse(me)||[]:[];return Array.isArray(j)&&j.length>0}catch(_e){return!1}},[Ft,Di]);return React.createElement(React.Fragment,null,React.createElement("div",{className:"relative z-40 bg-midnight-950/92 backdrop-blur-xl border-b border-white/10"},React.createElement("div",{className:"px-3 pt-2 pb-3"},React.createElement("div",{className:"relative h-11 flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 overflow-hidden flex items-center justify-center",onClick:()=>wi(),"aria-label":"Open profile",title:"Profile"},React.createElement(gi,{name:"User",size:18})),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"h-2 w-2 rounded-full "+M,"aria-hidden":"true"}),React.createElement("div",{className:"text-[12px] font-extrabold tracking-[0.14em] uppercase text-white/85"},h))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center",onClick:Kr,onPointerUp:Kr,onMouseDown:Kr,onTouchEnd:Kr,"aria-label":"Open menu",title:"Menu"},React.createElement(gi,{name:"Menu",size:18})),React.createElement("button",{type:"button",className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center",onClick:()=>rn(!0),onTouchEnd:_e=>{_e.preventDefault(),_e.stopPropagation(),rn(!0)},"aria-label":"Quick settings",title:"Settings"},React.createElement(gi,{name:"Settings",size:18})))),Js===xt.TODAY&&!Oo&&React.createElement("button",{type:"button",className:"mt-2 w-full text-left",onClick:()=>{Js===xt.TODAY&&!Oo?ir(!0):(Ls(null),pt(xt.TODAY))},"aria-label":"Open Capacity details"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[14px] uppercase tracking-[0.16em] text-white/70 font-extrabold"},"Capacity Score ",React.createElement("span",{className:"text-white tabular-nums text-[18px] tracking-normal ml-1"},Math.round(a)),(()=>{var _e=N&&N.length>5?N[N.length-2]:null;if(typeof _e!="number")return null;var ve=Math.round(a)-Math.round(_e),me=ve===0?"\xB10":ve>0?"\u2191 +"+ve:"\u2193 "+Math.abs(ve),j=ve>0?"bg-emerald-400/10 text-emerald-200 border-emerald-400/25":ve<0?"bg-rose-400/10 text-rose-200 border-rose-400/25":"bg-white/8 text-white/70 border-white/15";return React.createElement("span",{className:"ml-2 inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-extrabold "+j},me,React.createElement("span",{className:"ml-1 text-[10px] font-semibold text-white/60"},"vs yday"))})()),React.createElement("div",{className:"mt-1 text-[13px] text-white/85 font-semibold leading-snug"},r.headline)),React.createElement("div",{className:"flex flex-col items-center gap-1 shrink-0"},React.createElement("div",{className:"inline-flex items-center gap-2 rounded-full border px-2.5 py-1 text-[11px] font-extrabold "+(r.band==="HIGH"?"border-emerald-400/30 bg-emerald-400/10 text-emerald-200":r.band==="MODERATE"?"border-amber-400/30 bg-amber-400/10 text-amber-200":r.band==="LIMITED"?"border-orange-400/30 bg-orange-400/10 text-orange-200":"border-rose-400/30 bg-rose-400/10 text-rose-200")},React.createElement("span",{className:"h-2 w-2 rounded-full "+M}),r.band==="HIGH"?"High":r.band==="MODERATE"?"Moderate":r.band==="LIMITED"?"Limited":"Low"),React.createElement("div",{className:"text-[11px] text-white/55 font-semibold"},we?"Wearable connected":"No wearable"))),React.createElement("div",{className:"mt-3 h-3.5 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full",style:{width:Math.max(0,Math.min(100,a))+"%",background:"linear-gradient(90deg, rgba(251,113,133,1) 0%, rgba(245,158,11,1) 35%, rgba(52,211,153,1) 70%, rgba(34,211,238,1) 100%)"}})),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[11px] text-white/75 font-semibold"},"Base ",React.createElement("span",{className:"text-white tabular-nums font-extrabold"},"62")),React.createElement("span",{className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[11px] text-white/75 font-semibold"},"Load ",React.createElement("span",{className:"text-white tabular-nums font-extrabold"},Math.round(wa))),React.createElement("span",{className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[11px] text-white/75 font-semibold"},"Recovery ",React.createElement("span",{className:"text-white tabular-nums font-extrabold"},Math.round(Xi))),React.createElement("span",{className:"px-2.5 py-1 rounded-full border border-white/10 bg-white/5 text-[11px] text-white/75 font-semibold"},"Tap for details \u2192")),React.createElement("div",{className:"mt-2 text-[10px] text-white/55"},"Base = onboarding + history \xB7 Load = recent training stress \xB7 Recovery = absorption signals"))))),React.createElement(ar,{open:Yr,title:"FlowOFit",onClose:()=>Qn(!1)},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"h-10 w-10 rounded-2xl bg-gradient-to-br from-cyan-400 to-lime-400 flex items-center justify-center"},React.createElement("span",{className:"font-display font-extrabold text-black text-[14px]"},"F")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold leading-tight truncate"},"Client"),React.createElement("div",{className:"text-[12px] text-white/60 truncate"},"Mode: ",React.createElement("span",{className:"text-white/85 font-semibold"},Ft)," \xB7 Tier: ",React.createElement("span",{className:"text-white/85 font-semibold"},Di))))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/50 font-bold mb-2"},"Account & Setup"),React.createElement("button",{className:"w-full rounded-2xl border border-white/10 bg-gradient-to-r from-fuchsia-500/15 via-cyan-500/10 to-lime-500/10 hover:from-fuchsia-500/20 hover:via-cyan-500/15 hover:to-lime-500/15 p-3 text-left",onClick:()=>{try{Si(Di==="PAID"?"Manage Plan":Di==="TRIAL"?"Upgrade (Trial)":"Start Trial / Upgrade","In production, this opens the Paywall Sheet / Manage Subscription flow (Stage 3).")}catch(_e){}}},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Upgrade / Manage Plan"),React.createElement("div",{className:"text-[11px] text-white/60"},Di==="PAID"?"Member active \xB7 Manage billing":Di==="TRIAL"?"Trial active \xB7 Upgrade anytime":"Free \xB7 Unlock AI + premium modules")),React.createElement(gi,{name:"ChevronRight",size:16}))),React.createElement("button",{className:"mt-2 w-full flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-2 text-left",onClick:()=>{try{Qn(!1)}catch(_e){}try{window.__fof_openNode&&window.__fof_openNode("Referral_Program_RP1",{from:"DRAWER"})}catch(_e){try{Si("Referral","Invite a friend and earn rewards. (Share stub in this build)")}catch(ve){}}}},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Refer a friend"),React.createElement("div",{className:"text-[11px] text-white/60"},"Invite friends and earn rewards")),React.createElement(gi,{name:"ChevronRight",size:16})),Ft==="LINKED"&&React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/50 font-bold mb-2"},"Coach"),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"h-9 w-9 rounded-2xl bg-white/10 flex items-center justify-center"},React.createElement("span",{className:"text-[12px] font-extrabold text-white"},"C")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] text-white font-extrabold truncate"},mt&&(mt.coachName||mt.name)?mt.coachName||mt.name:"Assigned Coach"),React.createElement("div",{className:"text-[11px] text-white/60 truncate"},mt&&(mt.businessName||mt.brandName)?mt.businessName||mt.brandName:"Coach-led mode")),React.createElement("div",{className:"ml-auto text-[10px] px-2 py-1 rounded-full border border-white/15 bg-white/5 text-white/70 font-bold"},"Linked"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold mb-2"},"Relationship"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"flex-1 rounded-xl border px-3 py-2 text-[12px] font-bold "+(Ft==="INDEPENDENT"?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/0 text-white/75 hover:bg-white/5"),onClick:()=>{try{window.__fof_setClientAxis&&window.__fof_setClientAxis("relationship","INDEPENDENT")}catch(_e){}Rt("INDEPENDENT"),pt("TODAY")}},"Independent"),React.createElement("button",{className:"flex-1 rounded-xl border px-3 py-2 text-[12px] font-bold "+(Ft==="LINKED"?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/0 text-white/75 hover:bg-white/5"),onClick:()=>{try{window.__fof_setClientAxis&&window.__fof_setClientAxis("relationship","LINKED")}catch(_e){}Rt("LINKED"),pt("TODAY")}},"Linked")),Ft!=="LINKED"||zn?React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-4 text-[12px] text-white/70 font-semibold mb-2"},"Tier"),React.createElement("div",{className:"flex gap-2"},[{k:"FREE",label:"Free"},{k:"TRIAL",label:"Trial"},{k:"PAID",label:"Paid"}].map(_e=>React.createElement("button",{key:_e.k,className:"flex-1 rounded-xl border px-3 py-2 text-[12px] font-bold "+(Di===_e.k?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/0 text-white/75 hover:bg-white/5"),onClick:()=>{Wr(_e.k),pt("TODAY")}},_e.label)))):React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px] flex items-center gap-2"},React.createElement(gi,{name:"CreditCard",size:16})," Plan & Billing"),React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-white/80 text-[12px]"},React.createElement("span",{className:"font-semibold text-white"},"Plan source:")," Coach / Studio managed"),React.createElement("div",{className:"mt-1 text-white/60 text-[11px]"},React.createElement("span",{className:"font-semibold text-white/80"},"Status:")," Active (simulated)")),React.createElement("div",{className:"mt-2 text-white/55 text-[10px]"},"Linked clients don\u2019t choose Free/Trial/Paid here. Access is derived from billing + coach assignment."),React.createElement("button",{type:"button",onClick:()=>Si("Linked billing","In a production Linked experience, plan status is managed by the coach/studio or subscription owner. Tier switching is available only in QA Mode for testing trial/dunning states."),className:"mt-2 w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-left"},React.createElement("div",{className:"text-white/80 text-[11px] font-semibold"},"Why no Tier selector?"),React.createElement("div",{className:"text-white/50 text-[10px]"},"Tap to see explanation"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"QA Mode"),React.createElement("div",{className:"text-white/55 text-[10px]"},"Shows simulation controls (Tier selector for Linked)")),React.createElement("button",{type:"button",onClick:()=>xl(_e=>!_e),className:"rounded-2xl border px-3 py-2 text-[11px] font-bold "+(zn?"border-emerald-400/40 bg-emerald-400/10 text-emerald-100":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},zn?"ON":"OFF"))),React.createElement("div",{className:"mt-4 text-[12px] text-white/70 font-semibold mb-2"},"Emphasis"),React.createElement("div",{className:"flex flex-wrap gap-2"},["FITNESS","NUTRITION","YOGA","HYBRID"].map(_e=>React.createElement("button",{key:_e,className:"rounded-xl border px-3 py-2 text-[12px] font-bold "+(zs===_e?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/0 text-white/75 hover:bg-white/5"),onClick:()=>{try{window.__fof_setClientAxis&&window.__fof_setClientAxis("emphasis",_e)}catch(ve){}Qo(_e),So(_e)}},_e==="NUTRITION"?"Nutrition":_e==="YOGA"?"Yoga":_e==="HYBRID"?"Hybrid":"Fitness"))),React.createElement("div",{className:"mt-4 text-[12px] text-white/70 font-semibold mb-2"},"Yoga Access"),React.createElement("div",{className:"flex gap-2"},[{k:"NONE",label:"None"},{k:"LIMITED",label:"Limited"},{k:"FULL",label:"Full"}].map(_e=>React.createElement("button",{key:_e.k,className:"flex-1 rounded-xl border px-3 py-2 text-[12px] font-bold "+(mn===_e.k?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/0 text-white/75 hover:bg-white/5"),onClick:()=>{try{window.__fof_setClientAxis&&window.__fof_setClientAxis("yogaAccess",_e.k)}catch(ve){}try{var ve=JSON.parse(localStorage.getItem("fof_entitlements_v1")||"{}");localStorage.setItem("fof_entitlements_v1",JSON.stringify({...ve,yogaAccess:_e.k}))}catch(ve){}Yi(_e.k)}},_e.label))),React.createElement("div",{className:"mt-3 text-[10px] text-white/45"},"Changing these options updates the app immediately (no reload). Locks & paywalls are implemented in Stage 3+."))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/50 font-bold mb-2"},"Connections"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 space-y-2"},React.createElement("button",{className:"w-full flex items-center justify-between rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2",onClick:()=>{$r(!0),Qn(!1)}},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Wearables"),React.createElement("div",{className:"text-[11px] text-white/60"},"Manage connections")),React.createElement(gi,{name:"ChevronRight",size:16})),Ft==="LINKED"&&React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/0 px-3 py-2"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Coach"),React.createElement("div",{className:"text-[11px] text-white/60"},mt&&mt.name?mt.name:"Assigned coach")))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/50 font-bold mb-2"},"System"),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 space-y-2"},React.createElement("button",{className:"w-full flex items-center justify-between rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2",onClick:()=>{rn(!0),Qn(!1)}},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Settings"),React.createElement("div",{className:"text-[11px] text-white/60"},"App preferences")),React.createElement(gi,{name:"ChevronRight",size:16})),React.createElement("div",{role:"button",tabIndex:0,className:"w-full flex items-center justify-between rounded-xl border border-amber-500/30 bg-amber-500/10 hover:bg-amber-500/15 px-3 py-2 cursor-pointer select-none",onClick:()=>{__resetDemoData()},onKeyDown:_e=>{(_e.key==="Enter"||_e.key===" ")&&(_e.preventDefault(),__resetDemoData())}},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Reset demo data"),React.createElement("div",{className:"text-[11px] text-white/60"},"Clear sessions & logs (demo only)")),React.createElement(gi,{name:"Trash2",size:16})),React.createElement("button",{className:"w-full flex items-center justify-between rounded-xl border border-rose-500/30 bg-rose-500/10 hover:bg-rose-500/15 px-3 py-2",onClick:()=>{typeof ee=="function"?ee():hl(!0)}},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"Logout"),React.createElement("div",{className:"text-[11px] text-white/60"},"End session")),React.createElement(gi,{name:"LogOut",size:16}))))),React.createElement(al,{open:Il,title:"Wearables",kicker:"Connections",onClose:()=>$r(!1)},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-white/70 text-[12px]"},"Wearables refine your recovery signals, but they're optional."),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Connection status"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},we?"Connected":"Not connected")),React.createElement("span",{className:"h-3 w-3 rounded-full "+(we?"bg-emerald-400":"bg-white/25")})),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2 text-[12px] font-semibold text-white",onClick:()=>{try{var ve="fof_wearables_connected_v1::"+((Ft==="LINKED"?"LINKED":"INDEPENDENT")+"::"+(Di||"FREE"));localStorage.setItem(ve,JSON.stringify([{provider:"DemoWearable",connectedAt:En()}]))}catch(_e){}try{$r(!1)}catch(_e){}try{window.__toast&&window.__toast("Wearable connected (demo)")}catch(_e){}}},"Connect (demo)"),React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2 text-[12px] font-semibold text-white/85",onClick:()=>{try{var ve="fof_wearables_connected_v1::"+((Ft==="LINKED"?"LINKED":"INDEPENDENT")+"::"+(Di||"FREE"));localStorage.removeItem(ve)}catch(_e){}try{$r(!1)}catch(_e){}try{window.__toast&&window.__toast("Wearable disconnected (demo)")}catch(_e){}}},"Disconnect"))))),React.createElement(al,{open:or,title:"Settings",kicker:"System",onClose:()=>rn(!1)},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"App preferences"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"This is a prototype settings panel."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2 text-[12px] font-semibold text-white",onClick:()=>{try{rn(!1),Si("Settings","Settings will be expanded in the next iteration.")}catch(_e){}}},"View details"),React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/10 bg-white/0 hover:bg-white/5 px-3 py-2 text-[12px] font-semibold text-white/85",onClick:()=>{try{rn(!1)}catch(_e){}}},"Close"))))),React.createElement(al,{open:Do,title:"Capacity Score",kicker:"Details",onClose:()=>ir(!1)},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-black"},"Capacity Score"),React.createElement("div",{className:"mt-1 flex items-center gap-3"},React.createElement("div",{className:"text-white font-extrabold text-[42px] leading-none tabular-nums"},Math.round(a)),React.createElement("div",{className:"pb-1"},React.createElement("div",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-extrabold "+(r.tone==="good"?"border-emerald-400/45 bg-emerald-400/12 text-emerald-100":r.tone==="warn"?"border-amber-400/45 bg-amber-400/12 text-amber-100":"border-sky-400/45 bg-sky-400/12 text-sky-100")},React.createElement("span",{className:"h-2 w-2 rounded-full "+M}),r.band),React.createElement("div",{className:"mt-1 text-white/60 text-[11px]"},"Updates as you log training + nutrition"),React.createElement("button",{type:"button",className:"mt-2 inline-flex items-center gap-2 rounded-full border border-white/12 bg-white/5 px-3 py-1 text-[11px] font-extrabold text-white/80 hover:bg-white/10",onClick:()=>rr(!0)},React.createElement(gi,{name:"Info",size:14}),"What does this mean?"))),React.createElement("div",{className:"mt-2 text-white/90 font-semibold"},r.headline),React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},r.subtext))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"h-3.5 w-full rounded-full bg-white/10 overflow-hidden border border-white/10"},React.createElement("div",{className:"h-full rounded-full",style:{width:Jl(Number(a)||0,0,100)+"%",background:"linear-gradient(90deg, rgba(244,63,94,0.95) 0%, rgba(245,158,11,0.95) 38%, rgba(16,255,97,0.90) 72%, rgba(77,233,255,0.90) 100%)"}})),React.createElement("div",{className:"mt-2 flex items-center justify-between text-[11px] text-white/55 font-semibold"},React.createElement("span",null,"0"),React.createElement("span",null,"50"),React.createElement("span",null,"100")))),Ft==="LINKED"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-semibold"},"Coach guidance"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Today\u2019s plan may be adjusted by your coach to keep training safe and effective."),React.createElement("div",{className:"mt-2 text-white text-[12px] font-semibold"},"Coach note: ",React.createElement("span",{className:"text-white/80"},"Keep intensity moderate today.")),React.createElement("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full border border-amber-400/35 bg-amber-400/10 px-3 py-1 text-[11px] font-extrabold text-amber-100"},"Intensity cap: MODERATE")),React.createElement("button",{type:"button",className:"shrink-0 rounded-xl border border-white/12 bg-white/4 px-3 py-2 text-[12px] font-semibold text-white/80 hover:bg-white/6",onClick:()=>Si("Coach overrides","In V2, coaches can add guidance (notes) or apply an intensity cap for the day. This does not inflate your score \u2014 it only changes your recommended plan safely.")},"How it works"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold"},"Last 7 days"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Tap a day to see what drove your Capacity.")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[10px] font-mono text-white/45"},"Index"),React.createElement("div",{className:"mt-1 text-[11px] font-semibold text-white/70"},(()=>{if(!N||N.length<3)return null;var _e=N[N.length-3],ve=N[N.length-2],me=N[N.length-1];return me<ve&&ve<_e?"Trend: 3-day decline":me>ve&&ve>_e?"Trend: 3-day rise":"Trend: stable"})()))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2"},N.map((_e,ve)=>{var me=sr(_e),j=Ae===ve,je=Math.max(10,Math.min(100,_e)),re=j?"ring-2 ring-white/70":"ring-1 ring-white/10",Z=me.band==="HIGH"?"bg-emerald-400/70":me.band==="MODERATE"?"bg-amber-400/70":me.band==="LIMITED"?"bg-amber-400/55":"bg-sky-400/60";return React.createElement("button",{key:ve,type:"button",onClick:()=>Oe(ve),className:"flex-1 rounded-2xl border border-white/10 bg-white/4 px-2 py-2 hover:bg-white/6 "+re,"aria-label":"Day "+(ve+1)+" capacity "+_e},React.createElement("div",{className:"h-20 w-full flex items-center justify-center"},React.createElement("div",{className:"w-full rounded-xl bg-white/8 overflow-hidden"},React.createElement("div",{className:"w-full rounded-xl "+Z,style:{height:je/100*80}}))),React.createElement("div",{className:"mt-2 text-[10px] text-white/60 font-semibold"},["M","T","W","T","F","S","S"][ve]))})),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][Ae]," \u2022 Capacity ",N[Ae],(()=>{if(!N||N.length<2)return null;var _e=Ae,ve=N[Math.max(0,_e-1)],me=Math.round(N[_e])-Math.round(ve);if(_e===0)return null;var j=me===0?"\xB10":me>0?"\u2191 +"+me:"\u2193 "+Math.abs(me),je=me>0?"text-emerald-200":me<0?"text-rose-200":"text-white/70";return React.createElement("span",{className:"ml-2 text-[11px] font-extrabold "+je},j)})()),React.createElement("button",{type:"button",className:"text-[11px] font-semibold text-white/60 hover:text-white",onClick:()=>Si("How to read this","Each bar is your daily Capacity Score (0\u2013100). Tap a day to understand the main driver: Base, Load or Recovery.")},"Info")),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[11px]"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/4 p-2"},React.createElement("div",{className:"text-white/55 uppercase tracking-[0.18em] text-[9px] font-black"},"Base"),React.createElement("div",{className:"text-white font-extrabold tabular-nums"},Math.round(De))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/4 p-2"},React.createElement("div",{className:"text-white/55 uppercase tracking-[0.18em] text-[9px] font-black"},"Load"),React.createElement("div",{className:"text-white font-extrabold tabular-nums"},($t=Ne==null?void 0:Ne[Ae])!=null?$t:Math.round(wa))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/4 p-2"},React.createElement("div",{className:"text-white/55 uppercase tracking-[0.18em] text-[9px] font-black"},"Recovery"),React.createElement("div",{className:"text-white font-extrabold tabular-nums"},(gt=G==null?void 0:G[Ae])!=null?gt:Math.round(Xi)))),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-white/60 text-[12px] font-semibold"},"Drivers:"),(()=>{var j,je;var _e=(j=Ne==null?void 0:Ne[Ae])!=null?j:wa,ve=(je=G==null?void 0:G[Ae])!=null?je:Xi,me=[];return ve<45&&me.push({txt:"Recovery low",cls:"border-rose-400/25 bg-rose-400/10 text-rose-200"}),_e>75&&me.push({txt:"Load high",cls:"border-amber-400/25 bg-amber-400/10 text-amber-200"}),me.length||me.push({txt:"Balanced",cls:"border-white/15 bg-white/8 text-white/75"}),me.map((re,Z)=>React.createElement("span",{key:Z,className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-extrabold "+re.cls},re.txt))})()),React.createElement("div",{className:"mt-2 text-white/60 text-[12px]"},(()=>{var me,j;var _e=(me=Ne==null?void 0:Ne[Ae])!=null?me:wa;return((j=G==null?void 0:G[Ae])!=null?j:Xi)<45?"Lower recovery was the main limiter today.":_e>75?"Higher recent load is the main driver today.":N[Ae]>N[Math.max(0,Ae-1)]?"You absorbed load well \u2014 recovery kept up.":"No single limiter \u2014 steady, balanced day."})())))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-semibold"},"Breakdown"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"A clear view of what\u2019s influencing today\u2019s Capacity."),React.createElement("div",{className:"text-white/45 text-[11px] mt-1"},"Base, Load and Recovery are normalised indices (0\u2013100) \u2014 not calories, minutes, or sleep hours."),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},React.createElement("button",{type:"button",className:"rounded-2xl border border-white/12 bg-white/6 p-3 text-left hover:bg-white/8",onClick:()=>Si("Base Capacity","Base is set from onboarding (experience + activity context). It changes slowly over time.")},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/55 font-black"},"Base"),React.createElement("div",{className:"mt-1 text-white font-extrabold tabular-nums text-[18px]"},Math.round(De)),React.createElement("div",{className:"mt-1 text-white/55 text-[11px]"},"Index (0\u2013100)")),React.createElement("button",{type:"button",className:"rounded-2xl border border-white/12 bg-white/6 p-3 text-left hover:bg-white/8",onClick:()=>Si("Load","Load is your recent training + sports + activity stress. Higher load lowers next\u2011day capacity unless recovery keeps up.")},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/55 font-black"},"Load"),React.createElement("div",{className:"mt-1 text-white font-extrabold tabular-nums text-[18px]"},Math.round(wa)),React.createElement("div",{className:"mt-1 text-white/55 text-[11px]"},"Index (0\u2013100)")),React.createElement("button",{type:"button",className:"rounded-2xl border border-white/12 bg-white/6 p-3 text-left hover:bg-white/8",onClick:()=>Si("Recovery","Recovery reflects your ability to absorb training stress. Wearables make this more accurate (sleep + recovery signals).")},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/55 font-black"},"Recovery"),React.createElement("div",{className:"mt-1 text-white font-extrabold tabular-nums text-[18px]"},Math.round(Xi)),React.createElement("div",{className:"mt-1 text-white/55 text-[11px]"},"Index (0\u2013100)"))),React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Load readiness"),React.createElement("div",{className:"text-white/55 text-[11px] mt-0.5"},"Inverse of recent stress (higher is better)")),React.createElement("div",{className:"text-white font-extrabold tabular-nums"},Math.round(zl))),React.createElement("div",{className:"mt-2 h-2 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-white/60",style:{width:Jl(zl||0,0,100)+"%"}}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Recovery readiness"),React.createElement("div",{className:"text-white/55 text-[11px] mt-0.5"},"Ability to absorb training stress")),React.createElement("div",{className:"text-white font-extrabold tabular-nums"},Math.round(ql))),React.createElement("div",{className:"mt-2 h-2 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-white/60",style:{width:Jl(ql||0,0,100)+"%"}}))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold"},"What to do today"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Simple actions that improve your next score.")),React.createElement("button",{type:"button",className:"rounded-xl border border-white/12 bg-white/0 hover:bg-white/6 px-3 py-2 text-[12px] font-semibold text-white",onClick:()=>{ir(!1),pt("TRACK")}},"View plan")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},r.band==="LOW"?"Recovery focus":r.band==="LIMITED"?"Keep it controlled":"Train with intent"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},r.band==="LOW"?"Choose mobility, easy cardio, or a short technique session.":r.band==="LIMITED"?"Reduce intensity or volume. Prioritise good form and pacing.":"You can push, but keep quality high and avoid junk volume.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Quick win"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Hydration + high\u2011protein meals + earlier bedtime improves recovery the fastest.")))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-semibold"},"Data sources"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-bold "+(we?"border-emerald-400/35 bg-emerald-400/10 text-emerald-100":"border-white/12 bg-white/4 text-white/70")},React.createElement("span",{className:"h-2 w-2 rounded-full "+(we?"bg-emerald-400":"bg-white/25")}),"Wearable: ",we?"Connected":"Not connected"),React.createElement("span",{className:"inline-flex items-center rounded-full border border-white/12 bg-white/4 px-3 py-1 text-[11px] font-bold text-white/70"},"Training: Track log"),React.createElement("span",{className:"inline-flex items-center rounded-full border border-white/12 bg-white/4 px-3 py-1 text-[11px] font-bold text-white/70"},"Nutrition: Target vs actual")),React.createElement("div",{className:"mt-2 text-white/60 text-[12px]"},"Wearables improve recovery signals (sleep/strain proxies). Without a wearable, we use your check\u2011ins and recent activity logs."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/12 bg-white/0 hover:bg-white/6 px-3 py-2 text-[12px] font-semibold text-white",onClick:()=>{ir(!1),$r(!0)}},"Manage wearables"),React.createElement("button",{type:"button",className:"flex-1 rounded-xl border border-white/12 bg-white/0 hover:bg-white/6 px-3 py-2 text-[12px] font-semibold text-white/85",onClick:()=>Si("Capacity logic","Capacity is an internal readiness score that blends base capacity (slow) with recent load + recovery signals (fast).")},"How it works"))))),React.createElement(al,{open:Dr,title:"Readiness / Capacity",kicker:"Explanation",onClose:()=>rr(!1)},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/6 p-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-black"},"Big idea"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[16px] leading-snug"},"Readiness is a modifier \u2014 it helps your plan adapt today, it\u2019s not a grade."),React.createElement("div",{className:"mt-2 text-white/65 text-[12px] leading-relaxed"},"FlowOFit uses your recent training + recovery signals to recommend the right intensity for ",React.createElement("span",{className:"text-white/85 font-semibold"},"today"),". Your long\u2011term plan stays intact \u2014 this just keeps you consistent week to week.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"What contributes"),React.createElement("ul",{className:"mt-2 space-y-2 text-[12px] text-white/70"},React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/50"}),"Recent training load (stress)"),React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/50"}),"Recovery signals (sleep / rest / absorption)"),React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/50"}),"Consistency (how steady your last week was)"),React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/50"}),"Stress / illness flags (when available)")),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"We show drivers (Base / Load / Recovery) to explain the \u201Cwhy\u201D \u2014 not to make you chase a number.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"What it affects"),React.createElement("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-[12px]"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Today\u2019s intensity"),React.createElement("div",{className:"mt-1 text-white/60"},"Heavier vs lighter variants, volume tweaks, rest guidance.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold"},"Recovery nudges"),React.createElement("div",{className:"mt-1 text-white/60"},"Optional swaps: mobility, walk, yoga, or rest when needed."))),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Your plan doesn\u2019t \u201Creset\u201D \u2014 it adapts the day so progress stays sustainable.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},"How to use it (simple)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70 leading-relaxed"},"If today is ",React.createElement("span",{className:"text-white/85 font-semibold"},"High"),", push when the plan says push. If today is ",React.createElement("span",{className:"text-white/85 font-semibold"},"Low"),", do the lighter option and keep the streak alive. Consistency wins.")),React.createElement("div",{className:"pt-1"},React.createElement("button",{type:"button",className:"w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-4 py-3 text-[13px] font-extrabold text-white",onClick:()=>rr(!1)},"Got it")))))},Qd=()=>{var e=[{k:xt.TODAY,t:"Home",i:"Home"},{k:xt.PLAN,t:"Plan",i:"CalendarDays"},{k:xt.TRACK,t:"Track",i:"Activity",primary:!0},{k:xt.COACH,t:"Coach",i:Ft==="LINKED"?"Users":"Sparkles"},{k:xt.COMMUNITY,t:"Community",i:"Trophy"}];return React.createElement("div",{className:"shrink-0 z-40"},React.createElement("div",{className:"px-4 pb-4 pt-2"},React.createElement("div",{className:"rounded-[28px] border border-white/12 bg-gradient-to-b from-white/10 to-white/4 backdrop-blur-2xl shadow-[0_28px_110px_rgba(0,0,0,0.60)] p-2"},React.createElement("div",{className:"grid grid-cols-5 gap-2"},e.map(a=>{var r=Js===a.k,c=a.i||"Circle",h="relative flex flex-col items-center justify-center rounded-2xl px-2 py-2 transition active:scale-[0.98]",V=r?"bg-gradient-to-br from-[#1f8cff] via-[#6b3cff] to-[#00ffd5] border border-white/20 shadow-[0_18px_55px_rgba(0,0,0,0.45)]":"bg-transparent hover:bg-white/5",de=a.primary?"py-3 -mt-5":"";return React.createElement("button",{key:a.k,onClick:()=>pt(a.k),className:`${h} ${V} ${de}`,"aria-label":a.t},React.createElement("div",{className:`relative flex items-center justify-center ${a.primary?"w-12 h-12 rounded-2xl bg-black/25 border border-white/15 shadow-[0_18px_55px_rgba(0,0,0,0.45)]":""}`},!!(To&&To[a.k])&&React.createElement("span",{className:"absolute -top-0.5 -right-0.5 h-2.5 w-2.5 rounded-full bg-emerald-400 shadow-[0_0_0_2px_rgba(2,6,23,0.85)]"}),React.createElement(gi,{name:c,size:a.primary?24:20,className:`${r?"text-white":"text-white/75"}`})),React.createElement("div",{className:`${a.primary?"text-[11px] mt-1.5":"text-[11px] mt-1"} ${r?"text-white":"text-white/70"}`},a.t))})))))},Xl=({todayKey:e,onAdd:a})=>{var[r,c]=React.useState(e||""),[h,V]=React.useState("Weight"),[de,M]=React.useState(""),[De,Ae]=React.useState("kg"),[Oe,N]=React.useState("");React.useEffect(()=>{Ae(h==="Weight"?"kg":h==="Resting HR"?"bpm":h==="Sleep"?"h":h==="Body Fat"?"%":"")},[h]);var Ne=()=>{if(!r){try{alert("Choose a date")}catch(G){}return}if(!h){try{alert("Choose a metric")}catch(G){}return}if(String(de||"").trim()===""){try{alert("Enter a value")}catch(G){}return}try{a&&a({date:r,metric:h,value:String(de).trim(),unit:De,note:String(Oe||"").trim()})}catch(G){}M(""),N("")};return React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold"},"Add entry"),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-3"},React.createElement("div",{className:"col-span-2 md:col-span-1"},React.createElement("div",{className:"text-white/60 text-[11px] font-extrabold uppercase tracking-[0.18em]"},"Date"),React.createElement("input",{type:"date",value:r,onChange:G=>c(G.target.value),className:"mt-1 w-full rounded-2xl border border-white/12 bg-black/40 px-3 py-2 text-white text-[13px]"})),React.createElement("div",{className:"col-span-2 md:col-span-1"},React.createElement("div",{className:"text-white/60 text-[11px] font-extrabold uppercase tracking-[0.18em]"},"Metric"),React.createElement("select",{value:h,onChange:G=>V(G.target.value),className:"mt-1 w-full rounded-2xl border border-white/12 bg-black/40 px-3 py-2 text-white text-[13px]"},["Weight","Resting HR","Sleep","Body Fat","Blood Pressure","Notes"].map(G=>React.createElement("option",{key:G,value:G},G)))),React.createElement("div",{className:"col-span-1"},React.createElement("div",{className:"text-white/60 text-[11px] font-extrabold uppercase tracking-[0.18em]"},"Value"),React.createElement("input",{type:"text",value:de,onChange:G=>M(G.target.value),placeholder:"e.g. 72.4",className:"mt-1 w-full rounded-2xl border border-white/12 bg-black/40 px-3 py-2 text-white text-[13px]"})),React.createElement("div",{className:"col-span-1"},React.createElement("div",{className:"text-white/60 text-[11px] font-extrabold uppercase tracking-[0.18em]"},"Unit"),React.createElement("input",{type:"text",value:De,onChange:G=>Ae(G.target.value),className:"mt-1 w-full rounded-2xl border border-white/12 bg-black/40 px-3 py-2 text-white text-[13px]"}))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-white/60 text-[11px] font-extrabold uppercase tracking-[0.18em]"},"Note (optional)"),React.createElement("input",{type:"text",value:Oe,onChange:G=>N(G.target.value),placeholder:"Any context\u2026",className:"mt-1 w-full rounded-2xl border border-white/12 bg-black/40 px-3 py-2 text-white text-[13px]"})),React.createElement("div",{className:"mt-3 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:Ne,className:"rounded-2xl border border-white/12 bg-white/10 hover:bg-white/15 px-4 py-2 text-white text-[12px] font-extrabold active:scale-[0.99]"},"Save entry")))},Td=()=>{var e=React.useMemo(()=>{try{return new Date().toISOString().slice(0,10)}catch(me){return""}},[]),a="fof_profile_v1",r=()=>{try{return JSON.parse(localStorage.getItem(a)||"{}")||{}}catch(me){return{}}},c=me=>{try{localStorage.setItem(a,JSON.stringify(me||{}))}catch(j){}},[h,V]=React.useState(null),[de,M]=React.useState(!1),[De,Ae]=React.useState(0);React.useEffect(()=>{var me=()=>Ae(j=>j+1);return window.addEventListener("flowofit:badgesUpdated",me),window.addEventListener("flowofit:achievementsUpdated",me),window.addEventListener("flowofit:eventsUpdated",me),window.addEventListener("flowofit:logsUpdated",me),window.addEventListener("flowofit:workoutLogsUpdated",me),window.addEventListener("storage",me),()=>{window.removeEventListener("flowofit:badgesUpdated",me),window.removeEventListener("flowofit:achievementsUpdated",me),window.removeEventListener("flowofit:eventsUpdated",me),window.removeEventListener("flowofit:logsUpdated",me),window.removeEventListener("flowofit:workoutLogsUpdated",me),window.removeEventListener("storage",me)}},[]);var Oe=React.useMemo(()=>{try{var me=(window.__fof_getBadges?window.__fof_getBadges():[])||[],je=((window.__fof_getPinnedBadges?window.__fof_getPinnedBadges():[])||[]).map(Z=>me.find(Qe=>Qe&&Qe.id===Z)).filter(Boolean).slice(0,3),re=typeof Ao=="function"?Ao()||{}:{};return{pinned:je,stats:re}}catch(me){return{pinned:[],stats:{}}}},[De]),[N,Ne]=React.useState(()=>({goal:"FITNESS",emphasis:["FITNESS"],units:"METRIC",devices:{},privacy:{shareWithCoach:!1,shareWithGym:!1,dataExport:!0},health:[],...r()}));React.useEffect(()=>{c(N)},[N]);var G=()=>V(null),we=({title:me,desc:j,icon:je,onClick:re,disabled:Z})=>React.createElement("button",{type:"button",onClick:re,disabled:!!Z,className:"text-left rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 active:scale-[0.99] p-4 "+(Z?"opacity-50 cursor-not-allowed":"")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px] leading-tight"},me),React.createElement("div",{className:"mt-1 text-white/60 text-[12px]"},j)),React.createElement("div",{className:"h-10 w-10 rounded-2xl bg-white/6 border border-white/10 inline-flex items-center justify-center shrink-0"},React.createElement(gi,{name:je,size:18,className:"text-white/85"})))),$t=({title:me,subtitle:j,children:je})=>React.createElement("div",{className:"fixed inset-0 z-[90] bg-black/70 backdrop-blur-sm flex items-center md:items-center justify-center p-3"},React.createElement("div",{className:"w-full max-w-[720px] rounded-t-3xl md:rounded-3xl border border-white/12 bg-black/85 shadow-2xl overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[15px]"},me),j?React.createElement("div",{className:"text-white/55 text-[12px] mt-0.5"},j):null),React.createElement("button",{type:"button",onClick:G,className:"h-9 w-9 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center","aria-label":"Close",title:"Close"},React.createElement(gi,{name:"X",size:18}))),React.createElement("div",{className:"p-4 max-h-[78vh] overflow-y-auto"},je))),gt=(me,j)=>{var je=Array.isArray(me)?me.slice():[],re=je.indexOf(j);return re>=0?je.splice(re,1):je.push(j),je},_e=me=>{Ne(j=>({...j,health:[me,...Array.isArray(j.health)?j.health:[]].slice(0,90)}))},ve=()=>{try{var me=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),j=URL.createObjectURL(me),je=document.createElement("a");je.href=j,je.download=`fof_profile_export_${e||"today"}.json`,document.body.appendChild(je),je.click(),je.remove(),URL.revokeObjectURL(j)}catch(me){try{alert("Export not supported in this environment.")}catch(j){}}};return React.createElement("div",{className:"min-h-[70vh]"},React.createElement("div",{className:"flex items-center justify-between mt-1"},React.createElement("button",{type:"button",onClick:Is,className:"inline-flex items-center gap-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 text-white text-[12px] font-bold"},React.createElement(gi,{name:"ChevronLeft",size:16,className:"text-white"}),"Back"),React.createElement("div",{className:"text-white/85 text-[12px] font-extrabold uppercase tracking-[0.18em]"},"Profile"),React.createElement("div",{className:"w-16"})),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("button",{type:"button",onClick:()=>{try{alert("Edit photo (v1 placeholder)")}catch(me){}},className:"relative h-16 w-16 rounded-3xl overflow-hidden border border-white/12 bg-white/5 shrink-0","aria-label":"Edit profile photo",title:"Edit profile photo"},React.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-400 via-sky-400 to-lime-400 opacity-90"}),React.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},React.createElement("span",{className:"font-display font-extrabold text-black text-3xl"},"F"))),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[18px] leading-tight truncate"},"Client"),React.createElement("div",{className:"text-white/60 text-[12px] font-semibold"},"Tier: ",React.createElement("span",{className:"text-white font-bold"},Di)," \u2022 Mode: ",React.createElement("span",{className:"text-white font-bold"},Ft)),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full bg-white/6 border border-white/10 text-white/80 text-[11px] font-bold"},"Goal: ",React.createElement("span",{className:"text-white"},N.goal||"FITNESS")),React.createElement("span",{className:"px-2.5 py-1 rounded-full bg-white/6 border border-white/10 text-white/80 text-[11px] font-bold"},"Units: ",React.createElement("span",{className:"text-white"},N.units||"METRIC")),React.createElement("span",{className:"px-2.5 py-1 rounded-full bg-white/6 border border-white/10 text-white/70 text-[11px] font-bold"},"Health entries: ",React.createElement("span",{className:"text-white"},Array.isArray(N.health)?N.health.length:0)))))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-extrabold tracking-wide"},"Identity"),React.createElement("div",{className:"text-[12px] text-white/60"},"Pinned badges + key stats")),React.createElement("button",{type:"button",onClick:()=>M(!0),className:"px-3 py-1.5 rounded-full bg-white/10 border border-white/12 text-white text-[12px] font-bold hover:bg-white/14"},"View")),React.createElement("div",{className:"mt-3"},Oe.pinned&&Oe.pinned.length?React.createElement("div",{className:"flex flex-wrap gap-2"},Oe.pinned.map(me=>React.createElement("span",{key:me.id,className:"inline-flex items-center gap-2 px-2.5 py-1.5 rounded-2xl bg-black/25 border border-white/10"},React.createElement("span",{className:"text-[16px] leading-none"},me.icon),React.createElement("span",{className:"text-[12px] font-bold text-white/90"},me.short||me.name),me.rarity?React.createElement("span",{className:"text-[10px] font-extrabold px-2 py-0.5 rounded-full bg-white/10 border border-white/12 text-white/70"},String(me.rarity).toUpperCase()):null))):React.createElement("div",{className:"rounded-2xl bg-black/20 border border-white/10 p-3"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold"},"No pinned badges yet."),React.createElement("div",{className:"text-[12px] text-white/55 mt-0.5"},"Open Identity \u2192 pin up to 3 badges to show them here."),React.createElement("button",{type:"button",onClick:()=>M(!0),className:"mt-2 px-3 py-1.5 rounded-full bg-white/10 border border-white/12 text-white text-[12px] font-bold"},"Pin badges"))),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl bg-black/20 border border-white/10 p-2.5"},React.createElement("div",{className:"text-[11px] text-white/60 font-bold"},"Streak"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},Number(Oe.stats.streakDays||0))),React.createElement("div",{className:"rounded-2xl bg-black/20 border border-white/10 p-2.5"},React.createElement("div",{className:"text-[11px] text-white/60 font-bold"},"Workouts"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},Number(Oe.stats.workouts||0))),React.createElement("div",{className:"rounded-2xl bg-black/20 border border-white/10 p-2.5"},React.createElement("div",{className:"text-[11px] text-white/60 font-bold"},"Check-ins"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},Number(Oe.stats.checkins||0))),React.createElement("div",{className:"rounded-2xl bg-black/20 border border-white/10 p-2.5"},React.createElement("div",{className:"text-[11px] text-white/60 font-bold"},"Challenges"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},Number(Oe.stats.challengesCompleted||0))))),React.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3"},React.createElement(we,{title:"Identity",desc:"Pinned badges, stats, achievements.",icon:"Sparkles",onClick:()=>M(!0)}),React.createElement(we,{title:"Goals & Preferences",desc:"Goal type, emphasis, units.",icon:"Target",onClick:()=>V("GOALS")}),React.createElement(we,{title:"Health Data",desc:"Manual entries (date-stamped).",icon:"HeartPulse",onClick:()=>V("HEALTH")}),React.createElement(we,{title:"Devices & Integrations",desc:"Connect wearables (v1 UI).",icon:"Watch",onClick:()=>V("DEVICES")}),React.createElement(we,{title:"Subscription / Tier",desc:"Plan, billing, upsell.",icon:"BadgeCheck",onClick:()=>V("SUB")}),React.createElement(we,{title:"Privacy / Sharing",desc:"Permissions and export.",icon:"Shield",onClick:()=>V("PRIVACY")}),React.createElement(we,{title:"Support / Export",desc:"Help, export profile JSON.",icon:"LifeBuoy",onClick:()=>V("SUPPORT")})),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold"},"Quick actions"),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-3"},React.createElement("button",{type:"button",onClick:()=>V("HEALTH"),className:"rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 p-4 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Add health entry"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Weight, RHR, sleep, notes.")),React.createElement("button",{type:"button",onClick:()=>V("DEVICES"),className:"rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 p-4 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Connect a device"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"Apple Health, Garmin, etc.")),React.createElement("button",{type:"button",onClick:ve,className:"rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 p-4 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Export JSON"),React.createElement("div",{className:"text-white/60 text-[12px] mt-1"},"For testing / support.")))),h==="GOALS"&&React.createElement($t,{title:"Goals & Preferences",subtitle:"Saved locally (v1)."},React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3"},[{k:"FITNESS",t:"Fitness"},{k:"NUTRITION",t:"Nutrition"},{k:"YOGA",t:"Yoga"},{k:"HYBRID",t:"Hybrid"}].map(me=>React.createElement("button",{key:me.k,type:"button",onClick:()=>Ne(j=>({...j,goal:me.k})),className:"rounded-3xl border p-4 text-left "+((N.goal||"FITNESS")===me.k?"border-cyan-400/50 bg-cyan-500/10":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me.t),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},"Set as primary goal")))),React.createElement("div",{className:"mt-4 text-white font-extrabold"},"Emphasis (v1)"),React.createElement("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-3"},["FITNESS","NUTRITION","YOGA"].map(me=>React.createElement("button",{key:me,type:"button",onClick:()=>Ne(j=>({...j,emphasis:gt(j.emphasis,me)})),className:"rounded-3xl border p-4 text-left "+(Array.isArray(N.emphasis)&&N.emphasis.includes(me)?"border-lime-400/45 bg-lime-500/10":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},"Toggle emphasis")))),React.createElement("div",{className:"mt-4 text-white font-extrabold"},"Units"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-3"},["METRIC","IMPERIAL"].map(me=>React.createElement("button",{key:me,type:"button",onClick:()=>Ne(j=>({...j,units:me})),className:"rounded-3xl border p-4 text-left "+((N.units||"METRIC")===me?"border-sky-400/45 bg-sky-500/10":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},"Measurement preference"))))),h==="HEALTH"&&React.createElement($t,{title:"Health Data",subtitle:"Manual, date-stamped entries (v1)."},React.createElement(Xl,{todayKey:e,onAdd:me=>_e(me)}),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-white font-extrabold"},"Recent entries"),React.createElement("div",{className:"text-white/55 text-[12px]"},Array.isArray(N.health)?N.health.length:0," total")),React.createElement("div",{className:"mt-2 space-y-2"},(Array.isArray(N.health)?N.health:[]).slice(0,25).map((me,j)=>React.createElement("div",{key:j,className:"rounded-3xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me.metric||"Metric"),React.createElement("div",{className:"text-white/60 text-[12px] font-semibold"},me.date||"")),React.createElement("div",{className:"mt-1 text-white/80 text-[13px] font-bold tabular-nums"},String(me.value||"")," ",React.createElement("span",{className:"text-white/55 text-[12px] font-semibold"},me.unit||"")),me.note?React.createElement("div",{className:"mt-1 text-white/55 text-[12px]"},me.note):null)),!Array.isArray(N.health)||N.health.length===0?React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/4 p-4 text-white/60 text-[12px]"},"No manual entries yet. Add one above."):null)),h==="DEVICES"&&React.createElement($t,{title:"Devices & Integrations",subtitle:"Connection UI (v1 placeholder)."},React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3"},[{k:"APPLE",t:"Apple Health",d:"iOS sync",i:"Activity"},{k:"GARMIN",t:"Garmin",d:"Training load",i:"Activity"},{k:"FITBIT",t:"Fitbit",d:"Steps & sleep",i:"Watch"},{k:"WHOOP",t:"WHOOP",d:"Strain & recovery",i:"Zap"},{k:"OURA",t:"Oura",d:"Sleep & readiness",i:"Moon"},{k:"STRAVA",t:"Strava",d:"Workouts",i:"Route"}].map(me=>{var j=!!(N.devices&&N.devices[me.k]);return React.createElement("button",{key:me.k,type:"button",onClick:()=>Ne(je=>({...je,devices:{...je.devices||{},[me.k]:!j}})),className:"rounded-3xl border p-4 text-left "+(j?"border-emerald-400/45 bg-emerald-500/10":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me.t),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},me.d)),React.createElement("div",{className:"h-9 w-9 rounded-2xl bg-white/6 border border-white/10 inline-flex items-center justify-center shrink-0"},React.createElement(gi,{name:me.i,size:16,className:"text-white/85"}))),React.createElement("div",{className:"mt-3 text-[12px] font-extrabold"},j?React.createElement("span",{className:"text-emerald-300"},"Connected"):React.createElement("span",{className:"text-white/60"},"Tap to connect")))})),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 bg-white/4 p-4 text-white/55 text-[12px]"},"Note: Real OAuth/device sync happens outside the prototype. This is for flow + UI only.")),h==="SUB"&&React.createElement($t,{title:"Subscription / Tier",subtitle:"View-only in v1 (no billing integration)."},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Current tier"),React.createElement("div",{className:"mt-1 text-white/80 text-[18px] font-extrabold"},Di),React.createElement("div",{className:"mt-2 text-white/55 text-[12px]"},"In production: manage billing, upgrades, and trial.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"AI Add\u2011ons"),React.createElement("div",{className:"mt-2 grid grid-cols-1 gap-2"},["AI Coach","Meal Planner","Hybrid Planner"].map(me=>React.createElement("div",{key:me,className:"rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"text-white/80 font-bold text-[12px]"},me),React.createElement("div",{className:"text-white/55 text-[11px] mt-0.5"},"v1: teaser only"))))))),h==="PRIVACY"&&React.createElement($t,{title:"Privacy / Sharing",subtitle:"Toggles saved locally (v1)."},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},[{k:"shareWithCoach",t:"Share with Coach",d:"If linked, allow your coach to view logs & capacity."},{k:"shareWithGym",t:"Share with Gym",d:"Tenant-level visibility (aggregated in admin)."},{k:"dataExport",t:"Allow data export",d:"Enable exporting your profile as JSON."}].map(me=>{var j=!!(N.privacy&&N.privacy[me.k]);return React.createElement("button",{key:me.k,type:"button",onClick:()=>Ne(je=>({...je,privacy:{...je.privacy||{},[me.k]:!j}})),className:"rounded-3xl border p-4 text-left "+(j?"border-cyan-400/45 bg-cyan-500/10":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},me.t),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},me.d)),React.createElement("div",{className:"h-8 px-3 rounded-full border inline-flex items-center justify-center text-[11px] font-extrabold "+(j?"border-cyan-400/40 bg-cyan-500/15 text-cyan-200":"border-white/12 bg-white/5 text-white/60")},j?"ON":"OFF")))}))),h==="SUPPORT"&&React.createElement($t,{title:"Support / Export",subtitle:"Utilities for v1 testing."},React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{alert("Support (demo): email support@flowofit")}catch(me){}},className:"rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 p-4 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Contact support"),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},"Demo action")),React.createElement("button",{type:"button",onClick:ve,className:"rounded-3xl border p-4 text-left "+(N.privacy&&N.privacy.dataExport?"border-white/12 bg-white/5 hover:bg-white/8":"border-white/10 bg-white/3 opacity-50 cursor-not-allowed"),disabled:!(N.privacy&&N.privacy.dataExport)},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Export JSON"),React.createElement("div",{className:"text-white/55 text-[12px] mt-1"},"Download profile data")),React.createElement("button",{type:"button",onClick:()=>{try{localStorage.removeItem(a)}catch(me){}Ne(me=>({...me,goal:"FITNESS",emphasis:["FITNESS"],units:"METRIC",devices:{},privacy:{shareWithCoach:!1,shareWithGym:!1,dataExport:!0},health:[]}))},className:"rounded-3xl border border-rose-400/30 bg-rose-500/10 hover:bg-rose-500/15 p-4 text-left"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Reset Profile (demo)"),React.createElement("div",{className:"text-white/65 text-[12px] mt-1"},"Clears local storage")))),React.createElement(mo,{open:de,onClose:()=>M(!1)}))},cd=({children:e})=>React.createElement("div",{className:"min-h-screen w-full overflow-hidden",style:{background:"radial-gradient(circle at 10% 0%, rgba(77,233,255,0.20), transparent 55%),radial-gradient(circle at 90% 10%, rgba(168,85,255,0.18), transparent 60%),radial-gradient(circle at 50% 100%, rgba(16,255,97,0.14), transparent 55%),linear-gradient(180deg, rgba(2,6,23,0.96) 0%, rgba(5,11,39,0.96) 100%)"}},React.createElement("div",{className:"pointer-events-none absolute inset-0 opacity-[0.12]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.08) 1px, transparent 1px)",backgroundSize:"46px 46px"}}),React.createElement("div",{className:"relative z-10"},e)),Ql=React.useRef(null);return qr?React.createElement(rl,null):React.createElement(cd,null,React.createElement("div",{className:"h-screen min-h-screen flex flex-col overflow-hidden"},React.createElement("div",{ref:Ql,className:"flex-1 overflow-y-auto scroll-area fof-main-scroll"},React.createElement("div",{className:"px-4 pb-2"},React.createElement(Xd,{scrollRef:Ql}),React.createElement("div",{className:"max-w-5xl mx-auto"},Mo(),React.createElement(W,{overlay:ja,onClose:Ci,onAfterAction:({key:e,meta:a})=>{try{e==="NUTRITION_LOGGER"&&pt(xt.TRACK)}catch(r){}}}),React.createElement(_d,{data:ns,onClose:()=>{try{Zi(null)}catch(e){}}}),React.createElement(Pa,{activeTab:ea,onPrompt:(e,a)=>{try{pt(xt.COACH),setTimeout(()=>{try{window.__FOF&&window.__FOF._coachPushPrompt&&window.__FOF._coachPushPrompt(e,a)}catch(r){}},50)}catch(r){}}})))),React.createElement(Ed,{open:Qa,presetQuery:Bs,actions:[{id:"go_today",title:"Home",subtitle:"Go to Home",group:"Navigation",keywords:"today home",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.goToday&&window.__fof_openers.goToday()}catch(e){}}},{id:"go_plan",title:"Plan",subtitle:"Go to Plan",group:"Navigation",keywords:"plan schedule program",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.goPlan&&window.__fof_openers.goPlan()}catch(e){}}},{id:"go_log",title:"Log",subtitle:"Go to Log",group:"Navigation",keywords:"log history tracking",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.goLog&&window.__fof_openers.goLog()}catch(e){}}},{id:"go_coach",title:"Coach",subtitle:"Go to Coach",group:"Navigation",keywords:"coach messages chat",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.goCoach&&window.__fof_openers.goCoach()}catch(e){}}},{id:"go_insights",title:"Insights",subtitle:"Go to Insights",group:"Navigation",keywords:"insights analytics progress",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.goInsights&&window.__fof_openers.goInsights()}catch(e){}}},{id:"open_library",title:"Library",subtitle:"Browse content",group:"Navigation",keywords:"library exercises yoga articles",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openLibrary&&window.__fof_openers.openLibrary()}catch(e){}}},{id:"open_profile",title:"Profile",subtitle:"Account & settings",group:"Navigation",keywords:"profile settings account",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openProfile&&window.__fof_openers.openProfile()}catch(e){}}},{id:"open_capacity",title:"Capacity details",subtitle:"See score explanation",group:"Coach",keywords:"capacity readiness score zone explain why",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openReadinessModule&&window.__fof_openers.openReadinessModule()}catch(e){}}},{id:"open_goals",title:"Manage Goals",subtitle:"Adherence mode & requests",group:"Coach",keywords:"goals adherence streaks neutral what-if plan review",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openGoalManager&&window.__fof_openers.openGoalManager()}catch(e){}}},{id:"open_referral",title:"Refer a friend",subtitle:"Copy/share your invite code",group:"Account",keywords:"refer referral invite share code",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openNode&&window.__fof_openNode("Referral_Program_RP1",{from:"COMMAND_BAR"})}catch(e){}}},{id:"open_weekly_review",title:"Weekly Review",subtitle:"This week recap \u2022 progress",group:"Insights",keywords:"weekly review recap progress streak",onRun:()=>{try{Cs()}catch(e){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WEEKLY_REVIEW_V1",props:{from:"COMMAND_BAR"}}}))}catch(e){}}},{id:"open_weekly_summary",title:"Weekly Summary",subtitle:"Structured recap \u2022 coach-aware",group:"Insights",keywords:"weekly summary recap progress coach note",onRun:()=>{try{Cs()}catch(e){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"WEEKLY_SUMMARY_V1",props:{from:"COMMAND_BAR"}}}))}catch(e){}}},{id:"open_upgrade",title:"Upgrade",subtitle:"See plans & trials",group:"Account",keywords:"upgrade trial paid premium checkout",onRun:()=>{try{Cs()}catch(e){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"UPGRADE_PROMPT_SHEET_V1",props:{from:"COMMAND_BAR"}}}))}catch(e){}}},{id:"open_checkout",title:"Checkout",subtitle:"Billing & payment",group:"Account",keywords:"payment billing checkout promo",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openNode&&window.__fof_openNode("Payments_Module_PM_Entry",{from:"COMMAND_BAR"})}catch(e){}}},{id:"open_secondary",title:"Add secondary activity",subtitle:"Check conflicts (9.3.4)",group:"Today",keywords:"secondary add-on mobility yoga cardio conflict",onRun:()=>{try{Cs()}catch(e){}try{window.dispatchEvent(new CustomEvent("flowofit:openOverlay",{detail:{key:"IC_Add_Secondary_Activity_NEW",props:{from:"COMMAND_BAR"}}}))}catch(e){}}},{id:"open_bodyscan",title:"Body Scan",subtitle:"Capture 3D scan",group:"Logging",keywords:"body scan photos progress",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openNode&&window.__fof_openNode("Client_BodyScan_Module.CBS_Entry_IC",{from:"COMMAND_BAR"})}catch(e){}}},{id:"quick_log_workout",title:"Log Workout",subtitle:"Add a workout entry",group:"Logging",keywords:"workout exercise session strength cardio",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openQuickLogSheet("WORKOUT",null)}catch(e){}}},{id:"quick_log_nutrition",title:"Log Nutrition",subtitle:"Add a meal entry",group:"Logging",keywords:"nutrition meal calories macros food",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openQuickLogSheet("FOOD",null)}catch(e){}}},{id:"quick_log_recovery",title:"Log Recovery",subtitle:"Sleep, soreness & mood",group:"Logging",keywords:"recovery sleep soreness mood readiness",onRun:()=>{try{Cs()}catch(e){}try{window.__fof_openers&&window.__fof_openers.openQuickLogSheet("RECOVERY",null)}catch(e){}}}],onClose:Cs,onSelect:e=>{try{e&&e.onRun&&e.onRun()}catch(a){}Cs()}}),React.createElement(Nd,null),React.createElement(Qd,null)))}}})();(function(){try{if(window.__fofClickGuardInstalled)return;window.__fofClickGuardInstalled=!0,document.addEventListener("click",function(wt){var na=wt.target&&wt.target.closest?wt.target.closest("a"):null;if(!na)return;var si=(na.getAttribute("href")||"").trim();(si===""||si==="#"||si.startsWith("#"))&&wt.preventDefault()},!0),document.addEventListener("click",function(wt){var na=wt.target&&wt.target.closest?wt.target.closest("button"):null;na&&(na.getAttribute("type")||na.setAttribute("type","button"))},!0),document.addEventListener("click",function(wt){if(!(wt.target&&wt.target.closest?wt.target.closest('button, [role="button"], a, input[type="button"], input[type="submit"]'):null))return;var si=window.scrollY||document.documentElement.scrollTop||0;setTimeout(()=>{if((window.scrollY||document.documentElement.scrollTop||0)+12<si)try{window.scrollTo(0,si)}catch(Ta){}},0)},!0),document.addEventListener("submit",function(wt){wt.preventDefault()},!0)}catch(wt){}})();window.__FOF_FLAGS=window.__FOF_FLAGS||{};typeof window.__FOF_FLAGS.ONBOARDING_3A=="undefined"&&(window.__FOF_FLAGS.ONBOARDING_3A=!0);(function(){var wt="FOF_TRAINER_ONBOARDING_3A_V1",na=(Ii,Ta)=>{try{return JSON.parse(Ii)}catch(ti){return Ta}},si=()=>({firstLoginDone:!1,subscriptionPlan:null,whiteLabelPromptAnswered:!1,whiteLabelDone:!1,businessWizardDone:!1,setupTasksDone:!1,role:null,lastStep:null,updatedAt:Date.now()});window.__FOF_ONB3A=window.__FOF_ONB3A||{},window.__FOF_ONB3A.get=()=>{var Ii=na(localStorage.getItem(wt),null);return!Ii||typeof Ii!="object"?si():{...si(),...Ii}},window.__FOF_ONB3A.set=Ii=>{try{var ti={...window.__FOF_ONB3A.get(),...Ii||{},updatedAt:Date.now()};return localStorage.setItem(wt,JSON.stringify(ti)),ti}catch(Ta){return null}},window.__FOF_ONB3A.key=wt})();function fc(wt){if(wt==null||wt===!1||wt===!0)return wt;try{if(React&&React.isValidElement&&React.isValidElement(wt))return wt}catch(si){}if(Array.isArray(wt))return wt.map(fc);var na=typeof wt;return na==="string"||na==="number"?wt:""}(function(){try{if(!React||!React.createElement||React.__fofCreateElementPatched)return;var wt=React.createElement;React.createElement=function(na,si,...Ii){var Ta=Ii.map(fc);return wt.apply(this,[na,si,...Ta])},React.__fofCreateElementPatched=!0}catch(wt){}})();var Ld=()=>window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"id_"+Math.random().toString(16).slice(2)+Date.now(),yc=()=>new Date().toISOString(),Zl=(()=>{var wt="fof_event_log_v1",si=()=>{try{return JSON.parse(localStorage.getItem(wt)||"[]")}catch(ai){return[]}},Ii=ai=>{try{localStorage.setItem(wt,JSON.stringify(ai.slice(-500)))}catch(qi){}};return{read:si,push:ai=>{var qi=si();return qi.push(ai),Ii(qi),ai},clear:()=>Ii([]),KEY:wt}})(),Ar=(wt,na={})=>{var si={event_id:Ld(),event_name:wt,ts:yc(),tenant_id:window.__fofTenantId||"tenant_demo",actor_type:window.__fofActorType||"user",actor_id:window.__fofActorId||"demo_user",session_id:window.__fofSessionId||(window.__fofSessionId=Ld()),view:window.__fofView||null,payload:na};return Zl.push(si),si},Bl=(wt,na,si={})=>{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:wt,body:na,meta:si}}))},{motion:ru,AnimatePresence:lu}=window.Motion?window.Motion:{motion:{div:"div"},AnimatePresence:({children:wt})=>wt},ni=({name:wt,size:na=20,className:si="",color:Ii})=>{var Ta=Cc(null);return Gl(()=>{if(window.lucide&&window.lucide.icons&&window.lucide.icons[wt]&&Ta.current){var ti=window.lucide.createElement(window.lucide.icons[wt]);ti.setAttribute("width",na),ti.setAttribute("height",na),si&&ti.setAttribute("class",si),Ii&&ti.setAttribute("stroke",Ii),Ta.current.innerHTML="",Ta.current.appendChild(ti)}else!window.lucide&&Ta.current&&(Ta.current.innerHTML="<span>?</span>")},[wt,na,si,Ii]),React.createElement("span",{ref:Ta,className:"inline-flex items-center justify-center "+si,style:{width:na,height:na}})},ud=({devMode:wt,emits:na=[]})=>{if(!wt||!na||na.length===0)return null;var si=na.join(", ");return React.createElement("span",{className:"ml-2 inline-flex items-center gap-1 rounded-full border border-midnight-600 bg-midnight-900/70 px-2 py-[2px] text-[10px] font-mono text-slate-300"},React.createElement(ni,{name:"Bug",size:12}),"Emits: ",si)},Ic=({devMode:wt,onToggle:na})=>{var[si,Ii]=React.useState(()=>Zl.read());if(React.useEffect(()=>{if(!wt)return;var ti=setInterval(()=>{try{var ai=Zl.read();Ii(ai)}catch(ai){}},500);return()=>clearInterval(ti)},[wt]),!wt)return null;var Ta=(si||[]).slice(-8).reverse();return React.createElement("div",{className:"fixed bottom-4 right-4 z-[998] w-[360px] max-w-[calc(100vw-2rem)]"},React.createElement("div",{className:"glass-panel border border-midnight-700 rounded-3xl p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(ni,{name:"Bug",size:16,className:"text-emerald-300"}),React.createElement("div",{className:"text-sm font-bold text-white"},"Dev Mode"),React.createElement("span",{className:"text-[10px] font-mono text-slate-400"},"debug badges + live events")),React.createElement("button",{onClick:na,className:"px-3 py-1.5 rounded-xl bg-midnight-900 border border-midnight-700 hover:border-emerald-500 text-xs text-slate-200 hover:text-white"},"Turn Off")),React.createElement("div",{className:"mt-3 max-h-[220px] overflow-auto space-y-2"},Ta.length===0?React.createElement("div",{className:"text-xs text-slate-400"},"No events yet. Perform any action to see events."):Ta.map((ti,ai)=>React.createElement("div",{key:ai,className:"rounded-2xl border border-midnight-800 bg-midnight-950/60 p-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono text-slate-100"},ti.event||ti.event_name||"event"),React.createElement("div",{className:"text-[10px] text-slate-500"},(ti.timestamp||"").toString().slice(11,19))),ti.payload&&React.createElement("div",{className:"mt-1 text-[10px] text-slate-400 line-clamp-2"},JSON.stringify(ti.payload))))),React.createElement("div",{className:"mt-3 text-[10px] text-slate-400"},"Tip: Use Admin \u2192 Advanced Analytics to verify funnels & audit events. Dev Mode never shows to real users.")))},Rc=({data:wt,onClose:na})=>wt?React.createElement("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/70 p-4 modal-overlay",onMouseDown:na},React.createElement("div",{className:"w-full max-w-xl glass-panel rounded-3xl p-6 border border-midnight-700 bg-midnight-900 modal-card",onMouseDown:si=>si.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono text-slate-400 uppercase tracking-widest"},"Info"),React.createElement("h3",{className:"text-lg font-bold text-white"},dl(wt.title))),React.createElement("button",{onClick:na,className:"p-2 rounded-xl hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(ni,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 text-sm text-slate-200 whitespace-pre-wrap leading-relaxed"},dl(wt.body)),wt.meta&&Object.keys(wt.meta).length>0&&React.createElement("div",{className:"mt-4 bg-midnight-950 border border-midnight-700 rounded-2xl p-3 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Metadata"),React.createElement("pre",{className:"whitespace-pre-wrap"},JSON.stringify(wt.meta,null,2))),React.createElement("div",{className:"mt-5 flex justify-end"},React.createElement("button",{onClick:na,className:"px-4 py-2 rounded-xl bg-brand text-white text-sm font-semibold hover:bg-brand/90"},"Close")))):null,Tc=({open:wt,onClose:na})=>wt?React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4"},React.createElement("div",{className:"glass-panel max-w-lg w-full rounded-3xl p-6 border border-emerald-500/40 bg-midnight-900"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(ni,{name:"Watch",size:20,className:"text-emerald-400"}),React.createElement("h2",{className:"text-lg font-semibold text-white"},"Connect your wearables")),React.createElement("button",{type:"button",onClick:na,className:"p-1 rounded-full hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(ni,{name:"X",size:16}))),React.createElement("p",{className:"text-xs text-slate-400 mb-4"},"This preview mirrors your WearableConnectionFlow: in production we would securely connect to Apple Health, Google Fit, Garmin and other providers, then stream steps, sleep, HRV and workout data into your daily tiles, Trainer dashboards and AI Hub."),React.createElement("div",{className:"grid grid-cols-2 gap-3 mb-4 text-xs"},React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(ni,{name:"Apple",size:14})," Apple Health"),React.createElement("span",{className:"text-[10px] text-slate-500"},"iPhone / Apple Watch")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(ni,{name:"Activity",size:14})," Google Fit"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Android & WearOS")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(ni,{name:"Watch",size:14})," Garmin / Polar"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Sports watches & head units")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(ni,{name:"CircleDot",size:14})," WHOOP / Oura"),React.createElement("span",{className:"text-[10px] text-slate-500"},"Recovery & readiness wearables"))),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-3 mb-4 text-[11px] text-slate-400"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"font-semibold text-slate-200"},"Data used in:")),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Client dashboard tiles (Recovery / Strain / Calories)"),React.createElement("li",null,"Trainer panels such as Linked client readiness and Daily Use views"),React.createElement("li",null,"Admin TSS scores, AI Hub risk models and Unified_AI_Triage signals"))),React.createElement("button",{type:"button",onClick:()=>{Ar("wearable.connected",{provider:"demo_multi"}),Bl("Wearables connected",`This is a functional UI step.

Behind the scenes (real build): OAuth/permissions per provider, provider health checks, and a wearable.sync.summary event (daily) that rolls up into readiness, recovery tiles, trainer dashboards, and Admin Advanced Analytics.`),na&&na()},className:"w-full py-2.5 rounded-2xl bg-emerald-500 text-midnight-950 text-sm font-semibold hover:bg-emerald-400 transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"CheckCircle2",size:18})," Mark wearables as connected"),React.createElement("p",{className:"mt-1.5 text-[10px] text-slate-500 text-center"},"In a real build this is where OAuth / permissions, error states and per-tenant provider toggles would live."))):null,Lr=({children:wt,onBack:na,onHome:si,canGoBack:Ii,devMode:Ta,toggleDevMode:ti})=>React.createElement("div",{className:"min-h-screen w-full bg-midnight-950 bg-mesh text-slate-100 font-sans flex flex-col relative"},Ta&&React.createElement(Ic,{devMode:Ta,onToggle:ti}),React.createElement("div",{className:"fixed inset-0 bg-glow pointer-events-none z-0"}),React.createElement("div",{className:"fixed top-4 left-4 z-50 flex gap-2"},React.createElement("button",{onClick:si,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Reset & Home"},React.createElement(ni,{name:"Home",size:20})),Ii&&React.createElement("button",{onClick:na,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Go Back"},React.createElement(ni,{name:"ArrowLeft",size:20}))),React.createElement("div",{className:"relative z-10 flex-1 flex flex-col"},wt));function dl(wt,na=""){return typeof wt=="string"||typeof wt=="number"?wt:na}function lo(wt,na=""){try{if(typeof React!="undefined"&&React.isValidElement&&React.isValidElement(wt))return wt}catch(si){}return dl(wt,na)}var ll=({label:wt,subtext:na,onComplete:si})=>{var[Ii,Ta]=Ws(!1);return Gl(()=>{var ti=setTimeout(si,1500);return()=>clearTimeout(ti)},[si]),React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-1 flex flex-col items-center justify-center min-h-screen bg-midnight-950"},React.createElement("div",{className:"relative mb-6"},React.createElement("div",{className:"w-16 h-16 border-4 border-midnight-700 border-t-brand rounded-full animate-spin"}),React.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},React.createElement(ni,{name:"Cpu",className:"text-brand"}))),React.createElement("h2",{className:"text-xl font-mono font-bold tracking-widest uppercase text-white animate-pulse"},lo(wt)),na&&React.createElement("p",{className:"text-slate-400 mt-2 text-sm"},lo(na))),React.createElement(Tc,{open:Ii,onClose:()=>Ta(!1)}))},$n=({title:wt,step:na,total:si,children:Ii,onBack:Ta,onHome:ti,canGoBack:ai})=>React.createElement(Lr,{onBack:Ta,onHome:ti,canGoBack:ai},React.createElement("div",{className:"relative z-10 flex-1 flex flex-col"},React.createElement("div",{className:"mx-auto w-full max-w-6xl px-4 pt-6 pb-6 space-y-4"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-2xl px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-midnight-950 border border-white/12 flex items-center justify-center shrink-0"},React.createElement("span",{className:"font-display font-extrabold text-white text-[14px]"},"F")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] truncate"},lo(wt)),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},"Goal-centric client onboarding"))),React.createElement("div",{className:"flex items-center gap-2 shrink-0 flex-wrap justify-end"},si>0&&React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/12 bg-white/5 px-3 py-1.5 text-[12px] font-semibold text-white/90"},"STEP ",na,"/",si),ai&&React.createElement("button",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-300/25 bg-emerald-400/10 px-3 py-1.5 text-[12px] font-semibold text-emerald-100 hover:bg-emerald-400/15 transition",onClick:Ta},"Back"))),si>0&&React.createElement("div",{className:"h-1.5 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-emerald-400/90 transition-all duration-500",style:{width:na/si*100+"%"}})),React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5 md:p-7 overflow-hidden max-h-[82vh]"},React.createElement("div",{className:"max-h-[76vh] overflow-y-auto pr-1"},Ii))))),Oc=({onBack:wt,onHome:na,canGoBack:si,conversionAnalytics:Ii,devMode:Ta,toggleDevMode:ti})=>{var[ai,qi]=Ws("DASHBOARD"),[co,Ys]=Ws("SUPER_ADMIN"),[bi,hs]=Ws(null),[fo,go]=Ws(null);Gl(()=>{window.__fofActorType="admin",window.__fofView="ADMIN_PORTAL",Ar("admin.view.opened",{view:ai,role:co})},[ai,co]);var Ei=(is,xs,ps={})=>Bl(is,xs,ps),As=(is,xs=null)=>{qi(is),xs&&hs(xs)},yo=()=>React.createElement("button",{onClick:()=>qi("DASHBOARD"),className:"mb-4 flex items-center gap-2 text-slate-400 hover:text-white transition-colors"},React.createElement(ni,{name:"ArrowLeft",size:16})," Back to Dashboard"),Ks=()=>{var[is,xs]=Ws("LEADERBOARD");return is==="DETAIL"&&bi?React.createElement("div",{className:"space-y-6"},React.createElement("button",{onClick:()=>xs("LEADERBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white"},React.createElement(ni,{name:"ArrowLeft",size:16})," Back to Leaderboard"),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-brand"},React.createElement("h3",{className:"text-2xl font-bold text-white mb-1"},lo(bi.name)),React.createElement("div",{className:"flex items-center gap-2 text-sm text-slate-400"},"TSS Score: ",React.createElement("span",{className:"text-brand font-bold text-lg"},bi.score,"/100"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Client Adherence"),React.createElement("div",{className:"text-2xl font-bold text-white"},"87%")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Client Churn %"),React.createElement("div",{className:"text-2xl font-bold text-red-400"},"2.1%")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Marketplace Sales"),React.createElement("div",{className:"text-2xl font-bold text-brand-green"},"$4,250"),React.createElement("div",{className:"text-[10px] text-slate-500"},"Incl. Offline Logs")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Collab XP"),React.createElement("div",{className:"text-2xl font-bold text-brand-purple"},"1,250 XP")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-red-900/50"},React.createElement("div",{className:"text-xs uppercase text-red-400 font-bold mb-2 flex items-center gap-2"},React.createElement(ni,{name:"AlertTriangle",size:12})," AI Risk Flag"),React.createElement("div",{className:"text-sm text-white"},"Recovery focus Revenue, On track Engagement"))),React.createElement("div",{className:"flex gap-4 pt-4 border-t border-midnight-800"},React.createElement("button",{className:"flex-1 py-3 bg-brand text-white font-bold rounded-xl hover:bg-brand-dark flex items-center justify-center gap-2"},React.createElement(ni,{name:"MessageSquare",size:18})," Send Targeted Message"),React.createElement("button",{className:"flex-1 py-3 bg-midnight-800 border border-red-500 text-red-400 font-bold rounded-xl hover:bg-red-900/20 flex items-center justify-center gap-2"},React.createElement(ni,{name:"Flag",size:18})," Flag for QC Review"))):React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex justify-between items-end"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"TSS Leaderboard"),React.createElement("p",{className:"text-slate-400 text-sm"},"Proactive Trainer Success Score (0-100)")),React.createElement("div",{className:"text-xs bg-brand/10 text-brand px-3 py-1 rounded border border-brand/20"},"Excludes Off-Platform Clients")),React.createElement("div",{className:"glass-panel overflow-hidden rounded-xl"},React.createElement("table",{className:"w-full text-left text-sm"},React.createElement("thead",{className:"bg-midnight-900 text-slate-500 font-mono text-xs uppercase"},React.createElement("tr",null,React.createElement("th",{className:"p-4"},"Rank"),React.createElement("th",{className:"p-4"},"Trainer"),React.createElement("th",{className:"p-4"},"TSS",React.createElement(ud,{devMode:Ta,emits:["trainer.tss.calculated","trainer.qc.flagged"]})),React.createElement("th",{className:"p-4"},"Trend"),React.createElement("th",{className:"p-4"},"Action"))),React.createElement("tbody",{className:"divide-y divide-midnight-700"},[{id:1,name:"Alex Johnson",score:98,trend:"UP"},{id:2,name:"Alex Johnson",score:94,trend:"STABLE"},{id:3,name:"Davide P.",score:72,trend:"DOWN",risk:!0}].map((ps,Ho)=>React.createElement("tr",{key:ps.id,className:"hover:bg-midnight-800/50 transition-colors"},React.createElement("td",{className:"p-4 font-bold"},"#",Ho+1),React.createElement("td",{className:"p-4 flex items-center gap-2 font-bold text-white"},ps.name," ",ps.risk&&React.createElement(ni,{name:"AlertCircle",size:14,className:"text-red-500"})),React.createElement("td",{className:"p-4"},React.createElement("span",{className:"px-2 py-1 rounded font-bold "+(ps.score>90?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400")},lo(ps.score))),React.createElement("td",{className:"p-4 text-slate-400"},lo(ps.trend)),React.createElement("td",{className:"p-4"},React.createElement("button",{onClick:()=>{hs(ps),xs("DETAIL")},className:"text-brand hover:underline"},"Deep Dive"))))))))},Fs=()=>{var[is,xs]=Ws(!1);return React.createElement("div",{className:"space-y-6 relative"},React.createElement(yo,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("h2",{className:"text-2xl font-bold text-white"},"User Management"),React.createElement("button",{className:"px-4 py-2 bg-midnight-800 border border-midnight-700 rounded-lg text-sm hover:border-brand flex items-center gap-2"},React.createElement(ni,{name:"Layers",size:16})," Bulk Actions")),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4"},["All","Clients","Trainers","Partners","Specialists"].map(ps=>React.createElement("button",{key:ps,className:"px-4 py-2 rounded-lg bg-midnight-900 hover:bg-midnight-800 text-sm font-medium transition-colors"},lo(ps)))),is&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"},React.createElement("div",{className:"bg-midnight-900 border border-orange-500/50 p-6 rounded-2xl max-w-lg w-full shadow-lg"},React.createElement("div",{className:"flex items-center gap-3 mb-4 text-orange-400"},React.createElement(ni,{name:"AlertTriangle",size:24}),React.createElement("h3",{className:"font-bold text-lg"},"Resolve Hybrid Role Conflict")),React.createElement("p",{className:"text-slate-300 text-sm mb-4"},"User ",React.createElement("strong",null,"FitCorp Gym")," has conflicting permissions between 'Partner' and 'Trainer' roles."),React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl mb-6 space-y-2"},React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Permission:"),React.createElement("span",{className:"text-white"},"Marketplace Listing Limit")),React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Partner Role:"),React.createElement("span",{className:"text-green-400"},"Unlimited")),React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Trainer Role:"),React.createElement("span",{className:"text-red-400"},"Max 5"))),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{onClick:()=>xs(!1),className:"flex-1 py-3 bg-brand text-white font-bold rounded-xl"},"Apply 'Partner' Rules (Override)"),React.createElement("button",{onClick:()=>xs(!1),className:"flex-1 py-3 border border-midnight-700 hover:bg-midnight-800 rounded-xl text-slate-400"},"Cancel")))),React.createElement("div",{className:"space-y-3"},[{name:"John Doe",role:"Client",status:"Active"},{name:"FitCorp Gym",role:"Partner",status:"Active",edge:!0},{name:"Dr. Strange",role:"Specialist",status:"Suspended"}].map((ps,Ho)=>React.createElement("div",{key:Ho,className:"glass-panel p-4 rounded-xl flex items-center justify-between group"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-midnight-800 flex items-center justify-center font-bold text-slate-500"},ps.name[0]),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white flex items-center gap-2"},ps.name,ps.edge&&React.createElement("button",{onClick:()=>xs(!0),className:"text-[10px] bg-orange-500/20 text-orange-400 px-1 rounded border border-orange-500/30 hover:bg-orange-500 hover:text-white transition-colors cursor-pointer"},"HYBRID ROLE (Resolve)")),React.createElement("div",{className:"text-xs text-slate-500"},ps.role," \u2022 ",ps.status))),React.createElement("div",{className:"flex gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity"},React.createElement("button",{title:"Edit",className:"p-2 hover:bg-brand/20 rounded text-brand"},React.createElement(ni,{name:"Edit2",size:16})),React.createElement("button",{title:"Impersonate (Logged)",className:"p-2 hover:bg-purple-500/20 rounded text-purple-400"},React.createElement(ni,{name:"Eye",size:16})),React.createElement("button",{title:"Message",className:"p-2 hover:bg-blue-500/20 rounded text-blue-400"},React.createElement(ni,{name:"MessageSquare",size:16})),React.createElement("button",{title:"Suspend",className:"p-2 hover:bg-yellow-500/20 rounded text-yellow-400"},React.createElement(ni,{name:"PauseCircle",size:16})),React.createElement("button",{title:"Delete",onClick:()=>{Ar("admin.action.performed",{action:"user.delete.clicked"}),Bl("Delete user (confirmation)",`In a real build this would open a confirmation dialog and (if confirmed) anonymize data per policy, then emit user.status.changed and audit_log entries (who/when/why).

This prototype keeps the UX real-world and moves implementation details into this popup.`)},className:"p-2 hover:bg-red-500/20 rounded text-red-400"},React.createElement(ni,{name:"Trash2",size:16})))))))},Lo=()=>React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Content Management"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"MasterContentLibrary for workouts, programs, habits, and nutrition templates")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-purple-500/10 text-purple-300 border border-purple-500/40"},"Admin Only"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(ni,{name:"Sparkles",size:12})," AI Assist"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(ni,{name:"Layers",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Program Library"),React.createElement("div",{className:"text-xs text-slate-400"},"IC flows, solo plans, hybrid templates"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Centralised library of all training plans used across tenants and trainers.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(ni,{name:"Dumbbell",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Workout Blocks"),React.createElement("div",{className:"text-xs text-slate-400"},"Exercises, supersets, progressions"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Reusable blocks that feed into MasterContentLibrary for workouts.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(ni,{name:"StickyNote",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Habits & Messaging"),React.createElement("div",{className:"text-xs text-slate-400"},"Habit packs, check-in scripts, nudges"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Templates used in Daily Use flows for nudges, check-ins, and auto-messages.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-lime-500/10 text-lime-400"},React.createElement(ni,{name:"Utensils",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Nutrition Library"),React.createElement("div",{className:"text-xs text-slate-400"},"Meal plans, recipe packs, guidelines"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"MasterContentLibrary_Nutrition for nutrition-only and hybrid plans.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-fuchsia-500/10 text-fuchsia-400"},React.createElement(ni,{name:"Sparkles",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Content Suggestions"),React.createElement("div",{className:"text-xs text-slate-400"},"Unified_AI_Triage \u2192 suggested content"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"In production this would surface AI-flagged content gaps by goal / condition.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-rose-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(ni,{name:"ShieldCheck",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Content Governance"),React.createElement("div",{className:"text-xs text-slate-400"},"Approvals, localisation, tenant overrides"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Controls which content is global vs tenant-specific, and who can edit what.")))),Hn=()=>React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"AI Hub & Unified Triage"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Central place for AI triage rules, risk flags, and AI-suggested actions across the ecosystem.")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(ni,{name:"Sparkles",size:12})," AI Core"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-sky-500/10 text-sky-300 border border-sky-500/40"},"Read-Only preview"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(ni,{name:"Filter",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Unified AI Triage Rules"),React.createElement("div",{className:"text-xs text-slate-400"},"Churn, compliance, injury risk, opportunity"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Mirrors Unified_AI_Triage from your flows: defines which signals trigger alerts for trainers, admins, and specialists.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-red-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-red-500/10 text-red-400"},React.createElement(ni,{name:"AlertTriangle",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Risk & Compliance Flags"),React.createElement("div",{className:"text-xs text-slate-400"},"Imminent churn, at-risk programmes, policy issues"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Surfaces AI-calculated risk segments that feed TSS, Compliance / At-Risk, and content moderation queues.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-emerald-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(ni,{name:"Lightbulb",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Suggestions & Playbooks"),React.createElement("div",{className:"text-xs text-slate-400"},"Recommended nudges, plan changes, upsell opportunities"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"In production this would show suggested actions (message templates, plan tweaks, offers) by segment and severity.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-cyan-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-cyan-500/10 text-cyan-400"},React.createElement(ni,{name:"Database",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Signals & Data Sources"),React.createElement("div",{className:"text-xs text-slate-400"},"App usage, check-ins, payments, wearables"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Lists where the AI triage engine pulls from: Daily Use, payments, support tickets, Content, and WearableConnectionFlow.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-purple-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-purple-500/10 text-purple-400"},React.createElement(ni,{name:"FlaskConical",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Experiments & Tuning"),React.createElement("div",{className:"text-xs text-slate-400"},"Model variants, thresholds, A/B experiments"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Placeholder for how you would iterate on rules and models powering Unified_AI_Triage.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-rose-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(ni,{name:"Shield",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Governance"),React.createElement("div",{className:"text-xs text-slate-400"},"Review flows, overrides, auditability"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Connects to Security / Audit modules to explain and review AI decisions, overrides, and human-in-the-loop flows.")))),es=()=>{var[is,xs]=Ws("OVERVIEW"),[ps,Ho]=Ws([]);Gl(()=>{var Os=()=>Ho(Zl.read().slice().reverse());Os();var vn=setInterval(Os,1200);return()=>clearInterval(vn)},[]);var Bt=Os=>Zs.filter(vn=>vn.event_name===Os).length,ta=[{label:"Onboarding Started",event:"onboarding.started"},{label:"Step Completed",event:"onboarding.step.completed"},{label:"Wearable Connected",event:"wearable.connected"},{label:"Subscription Started",event:"subscription.started"}].map(Os=>({...Os,value:Bt(Os.event)})),Ka=()=>{Zl.clear(),Ar("admin.action.performed",{action:"analytics.clear_event_log"}),Ei("Event log cleared",`This cleared the local demo event_log.

In production, only privileged roles can run deletes, and typically analytics events remain append-only.`)},[oi,io]=Ws("7D"),_=React.useMemo(()=>{var Os=Date.now();if(oi==="TODAY"){var vn=new Date;return vn.setHours(0,0,0,0),vn.getTime()}return oi==="30D"?Os-30*24*60*60*1e3:Os-7*24*60*60*1e3},[oi]),Zs=React.useMemo(()=>(ps||[]).filter(Os=>{try{var vn=new Date(Os.ts).getTime();return!isNaN(vn)&&vn>=_}catch(vn){return!1}}),[ps,_]),Zo=Os=>Zs.filter(vn=>vn.event_name===Os).length,nn=Zs.length,Bn=Zs.filter(Os=>Os.event_name==="admin.action.performed").length,yn=[{k:"events",label:"Events logged",value:nn,sub:"event_log (filtered)",tone:"text-white"},{k:"onb",label:"Onboarding started",value:Zo("onboarding.started"),sub:"onboarding.started",tone:"text-white"},{k:"wear",label:"Wearables connected",value:Zo("wearable.connected"),sub:"wearable.connected",tone:"text-emerald-300"},{k:"sub",label:"Subscription started",value:Zo("subscription.started"),sub:"subscription.started",tone:"text-white"},{k:"audit",label:"Admin actions",value:Bn,sub:"admin.action.performed",tone:"text-amber-300"}];return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Advanced Analytics",React.createElement(ud,{devMode:Ta,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Funnels, cohorts, auditability and AI governance \u2014 mapped to the Admin Analytics contract (event_log + daily_snapshot + entity_state + ai_decision_audit).")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{Ar("admin.action.performed",{action:"analytics.seed_demo"}),Zl.push({event_id:Ld(),event_name:"onboarding.started",ts:yc(),tenant_id:"tenant_demo",actor_type:"user",actor_id:"demo_user",session_id:window.__fofSessionId,view:"ONBOARDING",payload:{source:"seed"}})},className:"px-3 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Seed 1 demo event"),React.createElement("button",{onClick:Ka,className:"px-3 py-2 rounded-xl bg-red-500/15 border border-red-500/30 text-red-300 text-xs hover:bg-red-500/25"},"Clear log"))),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4 flex-wrap"},[{k:"OVERVIEW",t:"Overview",i:"BarChart3"},{k:"FUNNELS",t:"Funnels",i:"GitBranch"},{k:"EVENTS",t:"Event Stream",i:"Activity"},{k:"AUDIT",t:"Audit Log",i:"ScrollText"},{k:"AI",t:"AI Governance",i:"Shield"}].map(Os=>React.createElement("button",{key:Os.k,onClick:()=>xs(Os.k),className:"px-4 py-2 rounded-xl text-xs font-semibold border "+(is===Os.k?"bg-brand/15 border-brand text-brand":"bg-midnight-900 border-midnight-700 text-slate-400 hover:border-brand/60")},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(ni,{name:Os.i,size:14}),lo(Os.t)))),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between gap-4 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-sm font-bold text-white"},"Report range"),React.createElement("span",{className:"text-[10px] font-mono text-slate-500"},"filters events + KPIs + funnels")),React.createElement("div",{className:"flex gap-2"},[{k:"TODAY",t:"Today"},{k:"7D",t:"7d"},{k:"30D",t:"30d"}].map(Os=>React.createElement("button",{key:Os.k,onClick:()=>io(Os.k),className:"px-3 py-2 rounded-xl text-xs font-semibold border "+(oi===Os.k?"bg-brand/15 border-brand text-brand":"bg-midnight-900 border-midnight-700 text-slate-300 hover:border-brand/60")},Os.t)))),React.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"},yn.map(Os=>React.createElement("div",{key:Os.k,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},Os.label),React.createElement("div",{className:"text-2xl font-bold mt-1 "+Os.tone},Os.value),React.createElement("div",{className:"text-[10px] text-slate-500 mt-1 font-mono"},Os.sub)))),Zs.length===0&&React.createElement("div",{className:"mt-4 bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold"},"No data yet for this range"),React.createElement("div",{className:"text-xs text-slate-400 mt-1"},"To generate data, run any client onboarding steps, connect wearables, or perform admin actions (Users / Imports).")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{Ar("admin.action.performed",{action:"analytics.quick_demo_seed",range:oi});var Os=Date.now(),vn=(ed,Ur,vl={})=>{Zl.push({event_id:Ld(),event_name:ed,ts:new Date(Os-Ur*60*1e3).toISOString(),tenant_id:"tenant_demo",actor_type:"user",actor_id:"demo_user",session_id:window.__fofSessionId,view:"DEMO",payload:vl})};vn("onboarding.started",55,{source:"quick_demo"}),vn("onboarding.step.completed",52,{step_id:"STEP_01",step_index:1}),vn("onboarding.step.completed",50,{step_id:"STEP_02",step_index:2}),vn("wearable.connected",45,{provider:"demo_multi"}),vn("subscription.started",30,{plan:"TRIAL",source:"onboarding"}),Bl("Demo data added",`A small demo dataset was generated so you can see KPIs, funnels, event stream and audit log working.

Tip: turn Dev Mode ON to see live events as you click.`)},className:"px-3 py-2 rounded-xl bg-brand text-white text-xs font-semibold hover:bg-brand/90"},"Run quick demo"),React.createElement("button",{onClick:()=>Bl("Generate real data",`Quick ways to generate real data in this prototype:

1) Client Journey \u2192 progress through onboarding steps
2) Connect wearables (Mark wearables as connected)
3) Finish onboarding to reach dashboard
4) Admin Portal \u2192 Users (delete/suspend) or Imports (start import)

Then return to Admin \u2192 Advanced Analytics.`),className:"px-3 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs text-slate-200 hover:border-brand/60"},"How to generate data")))))),is==="OVERVIEW"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Active Tenants (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"12"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"daily_snapshot.tenant_active_7d")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Onboarding Conversion"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"38%"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"KPI: trial-to-paid / activation")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Open AI Flags"),React.createElement("div",{className:"text-2xl font-bold text-amber-300 mt-1"},"7"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"ai.signal.raised \u2192 queues")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Support Backlog"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"19"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"ticket_state.backlog"))),is==="FUNNELS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h3",{className:"font-bold text-white"},"Onboarding \u2192 Activation Funnel"),React.createElement("button",{onClick:()=>Ei("Funnel logic",`Funnels are computed from event_log using canonical event names.

Example events:
- onboarding.started
- onboarding.step.completed
- wearable.connected
- subscription.started

Rollup target: daily_snapshot.funnel_rollups (by tenant, plan_type, segment).`),className:"text-xs text-brand hover:underline"},"How this is computed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},ta.map(Os=>React.createElement("div",{key:Os.event,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500"},lo(Os.label)),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},lo(Os.value)),React.createElement("div",{className:"text-[10px] text-slate-500 mt-1 font-mono"},lo(Os.event))))),React.createElement("div",{className:"mt-4 text-[11px] text-slate-400"},"Tip: run the onboarding, connect wearables, start subscription \u2014 then return here to see the event stream populate.")),is==="EVENTS"&&React.createElement("div",{className:"glass-panel rounded-2xl border border-midnight-700 overflow-hidden"},React.createElement("div",{className:"p-4 flex items-center justify-between border-b border-midnight-800"},React.createElement("div",{className:"font-bold text-white"},"Event Stream (event_log)"),React.createElement("div",{className:"text-xs text-slate-500"},"Latest ",Math.min(Zs.length,50)," shown")),React.createElement("div",{className:"max-h-[420px] overflow-auto"},React.createElement("table",{className:"w-full text-left text-xs"},React.createElement("thead",{className:"bg-midnight-900 text-slate-500 font-mono uppercase"},React.createElement("tr",null,React.createElement("th",{className:"p-3"},"Time"),React.createElement("th",{className:"p-3"},"Event"),React.createElement("th",{className:"p-3"},"Actor"),React.createElement("th",{className:"p-3"},"Tenant"),React.createElement("th",{className:"p-3"},"Details"))),React.createElement("tbody",{className:"divide-y divide-midnight-800"},Zs.slice(0,50).map(Os=>React.createElement("tr",{key:Os.event_id,className:"hover:bg-midnight-800/40"},React.createElement("td",{className:"p-3 text-slate-400 whitespace-nowrap"},new Date(Os.ts).toLocaleString()),React.createElement("td",{className:"p-3 text-white font-semibold"},lo(Os.event_name)),React.createElement("td",{className:"p-3 text-slate-300"},Os.actor_type,":",Os.actor_id),React.createElement("td",{className:"p-3 text-slate-400"},lo(Os.tenant_id)),React.createElement("td",{className:"p-3"},React.createElement("button",{onClick:()=>Ei("Event details",`Full event envelope (contract):

`+JSON.stringify(Os,null,2)),className:"text-brand hover:underline"},"View")))),Zs.length===0&&React.createElement("tr",null,React.createElement("td",{className:"p-4 text-slate-500",colSpan:"5"},"No events yet. Use the app flows, then return here.")))))),is==="AUDIT"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("h3",{className:"font-bold text-white"},"Audit Log (admin.action.performed)"),React.createElement("button",{onClick:()=>Ei("Audit contract",`Every admin action must write to audit_log (append-only):
- who (admin_id + role)
- what (action)
- target entity (type/id)
- before/after snapshot refs
- why (reason)
- timestamp + tenant scope

UI reads audit_log for traceability and compliance.`),className:"text-xs text-brand hover:underline"},"Contract")),React.createElement("div",{className:"space-y-2"},Zs.filter(Os=>Os.event_name==="admin.action.performed").slice(0,12).map(Os=>{var vn;return React.createElement("div",{key:Os.event_id,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold"},((vn=Os.payload)==null?void 0:vn.action)||"admin.action.performed"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},new Date(Os.ts).toLocaleString()," \u2022 ",Os.actor_id," \u2022 ",Os.tenant_id)),React.createElement("button",{onClick:()=>Ei("Audit entry",JSON.stringify(Os,null,2)),className:"text-xs text-brand hover:underline"},"Open"))}),Zs.filter(Os=>Os.event_name==="admin.action.performed").length===0&&React.createElement("div",{className:"text-sm text-slate-500"},"No admin actions logged yet. Try actions like \u201CStart Import\u201D, \u201CDelete user\u201D, etc."))),is==="AI"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("h3",{className:"font-bold text-white"},"AI Governance (ai_decision_audit)"),React.createElement("button",{onClick:()=>Ei("AI governance mapping",`AI Hub must write to ai_decision_audit:
- ai.signal.raised (model + threshold)
- ai.decision.recommended (action)
- ai.decision.overridden (who/why)
- outcome (true/false positive when known)

These records feed Quality Control, Safety, and Admin reporting.`),className:"text-xs text-brand hover:underline"},"Mapping")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"Override Rate (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"6%"),React.createElement("div",{className:"text-[10px] text-slate-500 mt-1"},"KPI: ai.decision.overridden / ai.signal.raised")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"False Positives (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"12"),React.createElement("div",{className:"text-[10px] text-slate-500 mt-1"},"Requires outcomes feedback loop")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"Open Recovery focus-Risk Flags"),React.createElement("div",{className:"text-2xl font-bold text-rose-300 mt-1"},"2"),React.createElement("div",{className:"text-[10px] text-slate-500 mt-1"},"AI Hub \u2192 QC queue"))),React.createElement("div",{className:"mt-4 flex gap-3"},React.createElement("button",{onClick:()=>{Ar("ai.signal.raised",{model:"readiness_v1",threshold:.72,severity:"medium"}),Ei("AI signal raised","Logged ai.signal.raised (demo).")},className:"px-4 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Log demo AI signal"),React.createElement("button",{onClick:()=>{Ar("ai.decision.overridden",{reason:"human_review",original:"flag_churn_risk"}),Ei("AI override recorded","Logged ai.decision.overridden (demo).")},className:"px-4 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Log demo override"))))},Ai=()=>{var[is,xs]=Ws("REVENUE");return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex gap-4 mb-6"},React.createElement("button",{onClick:()=>xs("REVENUE"),className:"px-4 py-2 rounded-lg font-bold "+(is==="REVENUE"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Revenue & Payouts"),React.createElement("button",{onClick:()=>xs("REFUNDS"),className:"px-4 py-2 rounded-lg font-bold "+(is==="REFUNDS"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Refund Queue"),React.createElement("button",{onClick:()=>xs("RECON"),className:"px-4 py-2 rounded-lg font-bold "+(is==="RECON"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Reconciliation")),is==="REFUNDS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Refund Requests (AD_Refund_Queue)"),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl"},React.createElement("div",{className:"flex justify-between mb-2"},React.createElement("span",{className:"font-bold text-white"},"Client: Jane Doe"),React.createElement("span",{className:"text-sm text-brand"},"$49.00")),React.createElement("p",{className:"text-sm text-slate-400 mb-4"},'Reason: "Double charged for subscription."'),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{className:"px-4 py-2 bg-brand-green text-white text-xs font-bold rounded flex items-center gap-2"},React.createElement(ni,{name:"Check",size:12})," Approve (Trigger API)"),React.createElement("button",{className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/30 text-xs font-bold rounded flex items-center gap-2"},React.createElement(ni,{name:"X",size:12})," Deny (Notify)"))))),is==="RECON"&&React.createElement("div",{className:"p-10 text-center border-2 border-dashed border-midnight-700 rounded-2xl"},React.createElement(ni,{name:"RefreshCw",size:32,className:"mx-auto text-slate-500 mb-4"}),React.createElement("h3",{className:"text-xl font-bold text-white"},"Gateway Reconciliation"),React.createElement("p",{className:"text-slate-400"},"Matching Platform Logs vs. Stripe/PayPal Reports..."),React.createElement("button",{className:"mt-4 px-6 py-2 bg-midnight-800 rounded-lg hover:bg-brand hover:text-white transition-colors"},"Run Match")),is==="REVENUE"&&React.createElement("div",{className:"text-slate-500 text-center p-10"},"Revenue Dashboards Loaded..."))},no=()=>{var[is,xs]=Ws("TICKETS");return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:()=>xs("TICKETS"),className:"flex-1 py-3 rounded-xl border "+(is==="TICKETS"?"border-brand bg-brand/10 text-brand":"border-midnight-700 bg-midnight-900 text-slate-400")},"Support Tickets"),React.createElement("button",{onClick:()=>xs("MOD"),className:"flex-1 py-3 rounded-xl border "+(is==="MOD"?"border-brand bg-brand/10 text-brand":"border-midnight-700 bg-midnight-900 text-slate-400")},"Moderation Queue")),is==="TICKETS"&&React.createElement("div",{className:"glass-panel p-4 rounded-xl"},React.createElement("div",{className:"flex justify-between border-b border-midnight-700 pb-2 mb-2"},React.createElement("span",{className:"font-bold"},"Subject"),React.createElement("span",{className:"text-sm text-slate-500"},"Priority")),React.createElement("div",{className:"flex justify-between py-2"},React.createElement("span",null,"Login Issue - User #42"),React.createElement("span",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded"},"HIGH"))),is==="MOD"&&React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"bg-gradient-to-r from-purple-900/20 to-brand/10 p-6 rounded-2xl border border-white/10"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(ni,{name:"Sparkles",className:"text-purple-400"}),React.createElement("h3",{className:"font-bold text-white"},"AI Review Triage")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl opacity-70"},React.createElement("div",{className:"text-xs uppercase font-bold text-slate-500"},"Auto-Rejected (Spam)"),React.createElement("div",{className:"text-2xl font-bold text-red-400"},"142")),React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl border border-brand/50"},React.createElement("div",{className:"text-xs uppercase font-bold text-brand"},"Flagged for Manual Review"),React.createElement("div",{className:"text-2xl font-bold text-white"},"3"),React.createElement("button",{className:"mt-2 w-full py-2 bg-brand text-white text-xs font-bold rounded"},"Review Queue")))),React.createElement("div",{className:"glass-panel p-6 rounded-xl"},React.createElement("h3",{className:"font-bold mb-4"},"Reported Content"),React.createElement("div",{className:"p-3 bg-midnight-950 rounded flex justify-between items-center"},React.createElement("span",null,"Post #9923 (Inappropriate)"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"text-xs bg-red-500 text-white px-3 py-1 rounded"},"Remove"),React.createElement("button",{className:"text-xs bg-midnight-700 px-3 py-1 rounded"},"Ignore"))))))},Co=()=>{var[is,xs]=Ws("WIZARD");return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Data Imports"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Bulk_Import_Wizard and Post_Import_Processing for clients, trainers and content \u2013 matching your admin flowcharts.")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-sky-500/10 text-sky-300 border border-sky-500/40"},"Admin & Ops"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(ni,{name:"Sparkles",size:12})," Assisted by AI Hub"))),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4"},React.createElement("button",{onClick:()=>xs("WIZARD"),className:"px-4 py-2 rounded-lg text-xs font-semibold "+(is==="WIZARD"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Bulk Import Wizard"),React.createElement("button",{onClick:()=>xs("POST"),className:"px-4 py-2 rounded-lg text-xs font-semibold "+(is==="POST"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Post-Import Processing")),is==="WIZARD"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",null,React.createElement("h3",{className:"text-lg font-semibold text-white"},"Bulk_Import_Wizard"),React.createElement("p",{className:"text-xs text-slate-400"},"Upload CSV or integrate with external systems to migrate clients, trainers or content into FlowOFIT.")),React.createElement("button",{type:"button",onClick:()=>{Ar("import.started",{source:"csv_demo"}),Bl("Start Import",`This starts the Bulk Import Wizard.

In production: upload \u2192 schema mapping \u2192 validation/dry-run \u2192 commit \u2192 post-import processing.

Admin Analytics mapping: import.started / import.mapping.completed / import.validation.completed / import.committed / import.failed events.`)},className:"px-3 py-2 rounded-xl bg-brand text-white text-xs font-semibold hover:bg-brand/90 flex items-center gap-1"},React.createElement(ni,{name:"UploadCloud",size:14})," Start Import")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 text-xs"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"1. Select source"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Trainerize / PTminder export, spreadsheets, legacy CRM, or partner tenant.")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"2. Map fields"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Map columns to FlowOFIT schema (clients, plans, tags, consent flags).")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"3. Validate & dry-run"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Preview how many rows will be created, updated or rejected before committing."))),React.createElement("div",{className:"mt-4 bg-midnight-950 border border-dashed border-midnight-700 rounded-xl p-4 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Connected modules"),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Feeds User Management and TrainerDashboard client lists."),React.createElement("li",null,"Seeds MasterContentLibrary when importing standard programs."),React.createElement("li",null,"Optionally triggers welcome nudges via AI Hub after import completes.")))),is==="POST"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",null,React.createElement("h3",{className:"text-lg font-semibold text-white"},"Post_Import_Processing"),React.createElement("p",{className:"text-xs text-slate-400"},"Resolve duplicates, missing consent and segment newly imported records for automation.")),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[10px] bg-purple-500/10 text-purple-300 border border-purple-500/40 flex items-center gap-1"},React.createElement(ni,{name:"Sparkles",size:12})," Unified_AI_Triage Signals")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-xs"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4 space-y-2"},React.createElement("div",{className:"font-semibold text-slate-100"},"Deduplication & merge"),React.createElement("p",{className:"text-[11px] text-slate-400"},"AI-assisted matching on name, email, phone and external IDs to avoid double-counting clients."),React.createElement("button",{type:"button",onClick:()=>Bl("Info"," dedupe rules not editable here yet."),className:"mt-2 inline-flex items-center gap-1 px-3 py-1.5 rounded-xl bg-midnight-800 text-slate-200 hover:bg-midnight-700"},React.createElement(ni,{name:"Settings2",size:13})," Adjust rules")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4 space-y-2"},React.createElement("div",{className:"font-semibold text-slate-100"},"Segmentation & routing"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Tag imported cohorts for TSS, automations and marketplace eligibility based on plan, goal and source."),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Flag high-value B2B cohorts for Account Management."),React.createElement("li",null,"Route at-risk imports into Compliance / At-Risk segments."),React.createElement("li",null,"Sync key tags into TrainerDashboard filters.")))),React.createElement("div",{className:"mt-4 bg-midnight-950 border border-dashed border-midnight-700 rounded-xl p-4 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Output destinations"),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Updates Admin Analytics funnels for IC and linked client growth."),React.createElement("li",null,"Feeds AI Hub models (Unified_AI_Triage) with fresh cohort metadata."),React.createElement("li",null,"Optionally pushes summary back to CRM or warehouse.")))))},Mi=()=>{var[is,xs]=Ws("TRIAGE");return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Marketplace Management"),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4 mb-4 overflow-x-auto"},React.createElement("button",{onClick:()=>xs("TRIAGE"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="TRIAGE"?"bg-purple-600 text-white":"text-slate-400")},"AI Triage"),React.createElement("button",{onClick:()=>xs("LISTINGS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="LISTINGS"?"bg-brand text-white":"text-slate-400")},"Live Listings"),React.createElement("button",{onClick:()=>xs("TX"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="TX"?"bg-brand text-white":"text-slate-400")},"Transactions"),React.createElement("button",{onClick:()=>xs("ADS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="ADS"?"bg-orange-500 text-white":"text-slate-400")},"Ads Approval"),React.createElement("button",{onClick:()=>xs("PARTNERS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="PARTNERS"?"bg-teal-500 text-white":"text-slate-400")},"Partner Apps"),React.createElement("button",{onClick:()=>xs("EVENTS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(is==="EVENTS"?"bg-blue-600 text-white":"text-slate-400")},"Events Queue")),is==="TRIAGE"&&React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"p-6 bg-gradient-to-br from-purple-900/30 to-midnight-900 border border-purple-500/30 rounded-2xl"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(ni,{name:"Sparkles",className:"text-purple-400"}),React.createElement("h3",{className:"font-bold text-white text-lg"},"AI Pre-Screening")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl"},React.createElement("div",{className:"text-xs text-slate-500 font-bold uppercase"},"Auto-Approved"),React.createElement("div",{className:"text-2xl text-green-400 font-bold"},"1,204"),React.createElement("p",{className:"text-[10px] text-slate-600"},"On track risk score < 10")),React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl border border-red-500/30"},React.createElement("div",{className:"text-xs text-red-400 font-bold uppercase"},"Flagged for Review"),React.createElement("div",{className:"text-2xl text-white font-bold"},"12"),React.createElement("p",{className:"text-[10px] text-slate-600"},"Potential policy violation")))),React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h4",{className:"font-bold text-white mb-4"},"Review Queue (Flagged)"),React.createElement("div",{className:"space-y-3"},[{id:1,title:"Super Mass Gainer X",seller:"GymBros Inc",reason:"Unverified Health Claim"},{id:2,title:"Yoga Mat - 100% Magic",seller:"SpiritualStore",reason:"Suspicious Keywords"}].map(ps=>React.createElement("div",{key:ps.id,className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},lo(ps.title)),React.createElement("div",{className:"text-xs text-slate-500"},"Seller: ",ps.seller),React.createElement("div",{className:"text-xs text-red-400 mt-1"},"Flag: ",dl(ps.reason))),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500"},"Approve"),React.createElement("button",{className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-500"},"Reject"))))))),is==="ADS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Geo-Discovery Ads Approval"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Summer Bootcamp (Loc: NYC)"),React.createElement("div",{className:"text-xs text-slate-500"},"Ad Spend: $500 \u2022 Dur: 2 Weeks")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-green-600 text-white text-xs rounded"},"Approve"),React.createElement("button",{className:"px-3 py-1 bg-midnight-800 text-slate-400 text-xs rounded border border-midnight-600"},"Preview"))))),is==="PARTNERS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Partner & Specialist Applications"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 rounded-full bg-teal-500/20 text-teal-400 flex items-center justify-center font-bold"},"N"),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"NutriScience Labs"),React.createElement("div",{className:"text-xs text-slate-500"},"Type: Education Partner"))),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-teal-600 text-white text-xs rounded"},"Onboard"),React.createElement("button",{className:"px-3 py-1 bg-red-500/20 text-red-400 text-xs rounded"},"Deny"))))),is==="EVENTS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Recovery focus-Value Event Submissions"),React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Global CrossFit Expo 2025"),React.createElement("div",{className:"text-xs text-slate-500"},"Organizer: Apex Events \u2022 Est. Rev: $50k"),React.createElement("div",{className:"text-xs text-orange-400 mt-1"},"Requires Admin Verification")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded"},"Verify & Publish")))),is==="LISTINGS"&&React.createElement("div",{className:"text-center p-10 text-slate-500"},"Active Listings View Loaded..."),is==="TX"&&React.createElement("div",{className:"text-center p-10 text-slate-500"},"Transaction Logs Loaded..."))},ts=()=>React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Quality Control Center"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-red-500"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(ni,{name:"Activity",className:"text-red-500"}),React.createElement("h3",{className:"font-bold text-white"},"AI Trainer Churn Risk")),React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl mb-4"},React.createElement("div",{className:"text-3xl font-bold text-white"},"18"),React.createElement("div",{className:"text-xs text-slate-500 uppercase"},'Trainers Flagged "At-Risk"')),React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"flex justify-between items-center text-sm p-2 bg-midnight-900 rounded"},React.createElement("span",{className:"text-white"},"Marcus T."),React.createElement("span",{className:"text-red-400 font-bold"},"92% Risk")),React.createElement("div",{className:"flex justify-between items-center text-sm p-2 bg-midnight-900 rounded"},React.createElement("span",{className:"text-white"},"Lisa K."),React.createElement("span",{className:"text-orange-400 font-bold"},"78% Risk"))),React.createElement("button",{className:"mt-4 w-full py-2 bg-midnight-800 hover:bg-brand hover:text-white rounded-lg text-xs font-bold transition-colors"},"View All Predictions")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Reports Queue"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-3 bg-midnight-950 border border-midnight-700 rounded-xl"},React.createElement("div",{className:"flex justify-between"},React.createElement("span",{className:"text-sm font-bold text-white"},"Coach Steve"),React.createElement("span",{className:"text-xs bg-red-500/20 text-red-400 px-2 py-0.5 rounded"},"Harassment")),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},'"Sent inappropriate messages..."'),React.createElement("div",{className:"flex gap-2 mt-3"},React.createElement("button",{className:"flex-1 py-1 bg-red-600 text-white text-xs rounded"},"Suspend"),React.createElement("button",{className:"flex-1 py-1 bg-midnight-800 text-slate-300 text-xs rounded"},"Investigate")))))),React.createElement("div",{className:"p-4 rounded-xl border border-dashed border-midnight-700 bg-midnight-900/50"},React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(ni,{name:"Award",className:"text-yellow-500"}),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Certification Re-verification"),React.createElement("div",{className:"text-xs text-slate-400"},"5 Approaching Expiry \u2022 2 Expired"))),React.createElement("button",{className:"px-4 py-2 bg-midnight-950 border border-midnight-700 rounded-lg text-xs font-bold hover:border-brand"},"Manage Queue")))),vs=({title:is,features:xs})=>React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},lo(is)),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},xs.map((ps,Ho)=>React.createElement("div",{key:Ho,className:"glass-panel p-6 rounded-2xl hover:border-brand transition-colors cursor-pointer group"},React.createElement("div",{className:"flex items-center gap-4 mb-3"},React.createElement("div",{className:"p-3 rounded-lg "+(ps.colorClass||"bg-midnight-800 text-brand")},React.createElement(ni,{name:ps.icon,size:24})),React.createElement("h3",{className:"font-bold text-lg text-white group-hover:text-brand transition-colors"},lo(ps.label))),React.createElement("p",{className:"text-sm text-slate-400"},lo(ps.desc)),ps.ai&&React.createElement("div",{className:"mt-3 text-xs flex items-center gap-1 text-purple-400"},React.createElement(ni,{name:"Sparkles",size:12})," AI Powered"))))),ko=({conversionAnalytics:is})=>{var xs=(is==null?void 0:is.icTotalCompleted)||0,ps=(is==null?void 0:is.icYogaPureCompleted)||0,Ho=xs-ps,Bt=xs>0?Math.round(ps/xs*100):0,ta=(is==null?void 0:is.events)||[],Ka=ta.reduce((_,Zs)=>{var nn=(Zs.primaryGoal||"Unspecified goal")+"::"+Zs.variant;return _[nn]=(_[nn]||0)+1,_},{}),oi=Object.entries(Ka).map(([_,Zs])=>{var[Zo,nn]=_.split("::");return{goal:Zo,variant:nn,count:Zs}}),io=ta.slice(-5).reverse();return React.createElement("div",{className:"space-y-6"},React.createElement(yo,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Advanced Analytics",React.createElement(ud,{devMode:Ta,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("p",{className:"text-slate-400 text-sm mb-6"},"Live funnel snapshots generated from\xA0",React.createElement("span",{className:"font-mono text-brand"},"IC_Conversion_Analytics"),". This is a lightweight in-app preview of how Independent Client onboarding data flows into admin-level reporting, segmentation and future heatmaps."),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-brand"},React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold mb-2"},"Independent Client Funnel"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},lo(xs)),React.createElement("div",{className:"text-xs text-slate-500"},"Completed IC onboardings (this session)")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-emerald-500"},React.createElement("div",{className:"text-xs uppercase text-emerald-300 font-bold mb-2"},"Yoga-First Path"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},lo(ps)),React.createElement("div",{className:"text-xs text-slate-500"},"Pure Yoga primary-only conversions"),React.createElement("div",{className:"mt-3 h-1.5 w-full bg-midnight-900 rounded-full overflow-hidden"},React.createElement("div",{className:"h-full bg-emerald-500 transition-all",style:{width:Math.min(100,Bt)+"%"}})),React.createElement("div",{className:"mt-1 text-[11px] text-slate-400"},Bt,"% of IC conversions")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-purple-500"},React.createElement("div",{className:"text-xs uppercase text-purple-300 font-bold mb-2"},"Non-Yoga / Hybrid"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},Ho<0?0:Ho),React.createElement("div",{className:"text-xs text-slate-500"},"Standard & hybrid IC flows"),React.createElement("p",{className:"mt-3 text-[11px] text-slate-500"},"In a production system this tile would drill into per-goal funnels, drop-off points and A/B experiments."))),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold"},"Goal Segmentation"),React.createElement("div",{className:"text-sm text-slate-300"},"Breakdown of IC conversions by primary goal & path variant."))),oi.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"No conversion events recorded yet in this session."):React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"min-w-full text-xs"},React.createElement("thead",null,React.createElement("tr",{className:"text-slate-400 border-b border-midnight-800"},React.createElement("th",{className:"py-2 pr-4 text-left font-medium"},"Primary Goal"),React.createElement("th",{className:"py-2 px-4 text-left font-medium"},"Variant"),React.createElement("th",{className:"py-2 px-4 text-right font-medium"},"Conversions"))),React.createElement("tbody",null,oi.map((_,Zs)=>React.createElement("tr",{key:Zs,className:"border-b border-midnight-900"},React.createElement("td",{className:"py-1 pr-4 text-slate-200"},lo(_.goal)),React.createElement("td",{className:"py-1 px-4 text-[11px] text-slate-400"},lo(_.variant)),React.createElement("td",{className:"py-1 px-4 text-right text-slate-100"},lo(_.count)))))))),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold"},"Recent IC Conversions"),React.createElement("div",{className:"text-sm text-slate-300"},"Last few independent clients entering the system."))),io.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"No conversion events recorded yet in this session."):React.createElement("ul",{className:"space-y-2 text-xs"},io.map(_=>{var Zs;return React.createElement("li",{key:_.id,className:"flex items-center justify-between bg-midnight-900/60 rounded-xl px-3 py-2"},React.createElement("div",null,React.createElement("div",{className:"font-semibold text-slate-100"},_.primaryGoal||"Unspecified goal"),React.createElement("div",{className:"text-[11px] text-slate-400"},_.variant," \xB7 ",_.planType||"Independent plan"," \xB7"," ",_.ageBand||"Age n/a")),React.createElement("div",{className:"text-[10px] text-slate-500"},((Zs=_.timestamp)==null?void 0:Zs.slice(11,19))||""))}))))},$s=()=>{switch(ai){case"TSS":return React.createElement(Ks,null);case"USERS":return React.createElement(Fs,null);case"CONTENT":return React.createElement(Lo,null);case"IMPORTS":return React.createElement(Co,null);case"AIHUB":return React.createElement(Hn,null);case"FINANCE":return React.createElement(Ai,null);case"SUPPORT":return React.createElement(no,null);case"MARKETPLACE":return React.createElement(Mi,null);case"QUALITY":return React.createElement(ts,null);case"ANALYTICS":return React.createElement(ko,{conversionAnalytics:Ii});case"SECURITY":return React.createElement(vs,{title:"Security & Compliance",features:[{label:"Audit Log",icon:"ScrollText",desc:"View all admin actions across the platform"},{label:"RBAC",icon:"Shield",desc:"Manage admin roles and permissions"},{label:"DSR Requests",icon:"UserX",desc:"Handle GDPR/CCPA data subject requests"},{label:"Data Map",icon:"Map",desc:"System of record across services"}]});case"SYSTEM_HEALTH":return React.createElement(vs,{title:"System Health",features:[{label:"Status Page",icon:"Activity",desc:"Live system status & uptime"},{label:"Error Budget",icon:"BatteryCharging",desc:"SLOs and error budgets"},{label:"Latency Heatmap",icon:"ThermometerSun",desc:"API & queue latency"}]});case"PLATFORM_ROADMAP":return React.createElement(vs,{title:"Platform Roadmap",features:[{label:"Upcoming Modules",icon:"Rocket",desc:"Planned major releases"},{label:"Beta Programs",icon:"FlaskConical",desc:"Opt-in to early features"},{label:"Feedback Inbox",icon:"Mailbox",desc:"Centralised product feedback"}]});case"AUDIT":return React.createElement(vs,{title:"Audit & Governance",features:[{label:"Admin Actions",icon:"ScrollText",desc:"Trail of sensitive changes"},{label:"Data Access Logs",icon:"Eye",desc:"PII & export guardrail logs"},{label:"Retention Rules",icon:"Hourglass",desc:"Data retention and deletion rules"}]});case"PARTNERSHIPS":return React.createElement(vs,{title:"Partnerships",features:[{label:"Key Accounts",icon:"Handshake",desc:"Major B2B partnerships"},{label:"Rev-Share Deals",icon:"Coins",desc:"Commercial terms and rev-share"},{label:"Integrations",icon:"PlugZap",desc:"3rd party integrations overview"}]});case"MARKETING":return React.createElement(vs,{title:"Marketing Ops",features:[{label:"Campaign Calendar",icon:"CalendarClock",desc:"Major launches & promos"},{label:"ICP Segments",icon:"Target",desc:"Ideal customer profiles"},{label:"Attribution",icon:"ChartNoAxesCombined",desc:"Top-of-funnel attribution"}]});case"DEVELOPER":return React.createElement(vs,{title:"Developer Platform",features:[{label:"API Keys",icon:"KeyRound",desc:"Manage API access tokens"},{label:"Webhooks",icon:"Webhook",desc:"Outbound integration hooks"},{label:"SDKs & Docs",icon:"BookOpenCheck",desc:"Developer onboarding & guides"}]});default:return React.createElement("div",{className:"space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("div",{onClick:()=>As("TSS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(ni,{name:"Trophy",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Trainer Success Scores"),React.createElement("div",{className:"text-xs text-slate-400"},"TSS: leaderboards & at-risk trainers")))),React.createElement("div",{onClick:()=>As("USERS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(ni,{name:"Users",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"User Management"),React.createElement("div",{className:"text-xs text-slate-400"},"Hybrid roles, impersonation, suspensions")))),React.createElement("div",{onClick:()=>As("CONTENT"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-teal-500/10 text-teal-400"},React.createElement(ni,{name:"Folders",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Content Management"),React.createElement("div",{className:"text-xs text-slate-400"},"Master libraries for plans, workouts & nutrition")))),React.createElement("div",{onClick:()=>As("IMPORTS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(ni,{name:"UploadCloud",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Data Imports"),React.createElement("div",{className:"text-xs text-slate-400"},"Bulk_Import_Wizard & Post_Import_Processing for clients, trainers & content")))),React.createElement("div",{onClick:()=>As("FINANCE"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(ni,{name:"Coins",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Finance & Billing"),React.createElement("div",{className:"text-xs text-slate-400"},"MRR, failed payments, payouts")))),React.createElement("div",{onClick:()=>As("SUPPORT"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(ni,{name:"MessageCircle",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Support & Moderation"),React.createElement("div",{className:"text-xs text-slate-400"},"Tickets, SLAs, flagged content")))),React.createElement("div",{onClick:()=>As("MARKETPLACE"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-fuchsia-500/10 text-fuchsia-400"},React.createElement(ni,{name:"Store",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Marketplace",React.createElement(ud,{devMode:Ta,emits:["marketplace.listing.approved","marketplace.listing.rejected"]})),React.createElement("div",{className:"text-xs text-slate-400"},"Plans, bundles, SKUs & reviews")))),React.createElement("div",{onClick:()=>As("QUALITY"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-lime-500/10 text-lime-400"},React.createElement(ni,{name:"ClipboardCheck",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Quality & Compliance"),React.createElement("div",{className:"text-xs text-slate-400"},"NPS, complaints, compliance flags")))),React.createElement("div",{onClick:()=>As("ANALYTICS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-purple-500/10 text-purple-400"},React.createElement(ni,{name:"BarChart3",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Advanced Analytics",React.createElement(ud,{devMode:Ta,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("div",{className:"text-xs text-slate-400"},"IC conversion funnels & cohorts")))),React.createElement("div",{onClick:()=>As("AIHUB"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(ni,{name:"Sparkles",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Hub & Triage"),React.createElement("div",{className:"text-xs text-slate-400"},"Unified_AI_Triage rules, risk flags, suggestions")))),React.createElement("div",{onClick:()=>As("SECURITY"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-red-500/10 text-red-400"},React.createElement(ni,{name:"Shield",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Security & Compliance"),React.createElement("div",{className:"text-xs text-slate-400"},"Audit log, RBAC, DSR requests")))),React.createElement("div",{onClick:()=>As("SYSTEM_HEALTH"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-cyan-500/10 text-cyan-400"},React.createElement(ni,{name:"Activity",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"System Health"),React.createElement("div",{className:"text-xs text-slate-400"},"Status, latency, error budgets")))),React.createElement("div",{onClick:()=>As("PLATFORM_ROADMAP"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-indigo-500/10 text-indigo-400"},React.createElement(ni,{name:"Rocket",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Platform Roadmap"),React.createElement("div",{className:"text-xs text-slate-400"},"Upcoming modules & beta programs")))),React.createElement("div",{onClick:()=>As("PARTNERSHIPS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-orange-500/10 text-orange-400"},React.createElement(ni,{name:"Handshake",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Partnerships"),React.createElement("div",{className:"text-xs text-slate-400"},"Key accounts & rev\u2011share deals")))),React.createElement("div",{onClick:()=>As("MARKETING"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-pink-500/10 text-pink-400"},React.createElement(ni,{name:"Megaphone",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Marketing Ops"),React.createElement("div",{className:"text-xs text-slate-400"},"Campaign calendar & attribution")))),React.createElement("div",{onClick:()=>As("DEVELOPER"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-slate-500/10 text-slate-300"},React.createElement(ni,{name:"Code2",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Developer Platform"),React.createElement("div",{className:"text-xs text-slate-400"},"API keys, webhooks, SDKs & docs"))))))}};return React.createElement("div",{className:"min-h-screen bg-midnight-950 text-slate-100 p-8 pb-20"},React.createElement("div",{className:"max-w-7xl mx-auto"},React.createElement("header",{className:"flex justify-between items-center mb-8"},React.createElement("h1",{className:"text-3xl font-bold font-mono uppercase tracking-widest text-white flex items-center gap-3"},React.createElement(ni,{name:"Shield",className:"text-red-500"})," Admin Portal"),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:ti,className:"px-4 py-2 rounded-2xl border text-xs font-mono tracking-wide "+(Ta?"bg-emerald-500/15 border-emerald-500 text-emerald-200":"bg-midnight-900 border-midnight-700 text-slate-300 hover:text-white hover:border-emerald-500")},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(ni,{name:"Bug",size:14})," Dev Mode: ",Ta?"ON":"OFF")),React.createElement("button",{onClick:na,className:"p-3 bg-midnight-900 border border-midnight-700 rounded-full hover:bg-brand hover:text-white transition-colors"},React.createElement(ni,{name:"Home"})))),$s()))},Lc=({onStart:wt,onSelect:na,onBack:si,onHome:Ii,canGoBack:Ta,onAdminLogin:ti,devMode:ai})=>React.createElement("div",{className:"min-h-screen w-full bg-midnight-950 bg-mesh text-slate-100 font-sans flex flex-col relative overflow-x-hidden"},React.createElement("div",{className:"fixed inset-0 bg-glow pointer-events-none z-0"}),React.createElement("nav",{className:"fixed top-0 w-full z-50 bg-midnight-950/80 backdrop-blur border-b border-white/5"},React.createElement("div",{className:"max-w-7xl mx-auto px-6 h-20 flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-2 font-bold text-2xl tracking-tight"},React.createElement(ni,{name:"Activity",className:"text-brand"})," FlowOFIT"),React.createElement("div",{className:"hidden md:flex gap-8 text-sm font-medium text-slate-400"},React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Features"),React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Enterprise"),React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Pricing")),React.createElement("div",{className:"flex items-center gap-4"},React.createElement("button",{onClick:ti,className:"text-xs font-bold text-slate-500 hover:text-white uppercase tracking-wider transition-colors"},"Admin Portal"),React.createElement("div",{className:"h-4 w-px bg-white/10"}),React.createElement("button",{onClick:()=>wt("LOGIN"),className:"text-sm font-bold text-white hover:text-brand transition-colors"},"Log In"),React.createElement("button",{onClick:()=>wt("ROLE_SELECT"),className:"px-5 py-2 bg-white text-midnight-950 font-bold rounded-full hover:bg-brand hover:text-white transition-all shadow-lg"},"Get Started")))),React.createElement("div",{className:"relative z-10 pt-32 pb-20 px-6"},React.createElement("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center"},React.createElement("div",{className:"space-y-8"},React.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand/10 border border-brand/20 text-brand text-xs font-bold uppercase tracking-wider"},React.createElement("span",{className:"w-2 h-2 rounded-full bg-brand animate-pulse"})," V6.1 System Online"),React.createElement("h1",{className:"text-5xl md:text-7xl font-bold leading-[1.1] tracking-tight"},"One Ecosystem.",React.createElement("br",null),React.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand via-brand-purple to-brand-accent"},"Infinite Potential.")),React.createElement("p",{className:"text-lg text-slate-400 max-w-xl leading-relaxed"},"The unified platform for fitness professionals, enterprises, and athletes. Manage clients, automate workflows, and scale your business with AI-driven insights."),React.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},React.createElement("button",{onClick:()=>wt("ROLE_SELECT"),className:"px-8 py-4 bg-brand text-white font-bold rounded-2xl hover:bg-brand-dark transition-all shadow-[0_0_30px_rgba(59,130,246,0.3)] flex items-center justify-center gap-2 group"},"Start Your Journey ",React.createElement(ni,{name:"ArrowRight",className:"group-hover:translate-x-1 transition-transform"})),React.createElement("button",{className:"px-8 py-4 bg-white/5 border border-white/10 text-white font-bold rounded-2xl hover:bg-white/10 transition-all flex items-center justify-center gap-2"},React.createElement(ni,{name:"PlayCircle",size:20})," Watch Demo")),React.createElement("div",{className:"flex items-center gap-4 text-sm text-slate-500 font-medium"},React.createElement("div",{className:"flex -space-x-2"},[1,2,3,4].map(qi=>React.createElement("div",{key:qi,className:"w-8 h-8 rounded-full bg-midnight-800 border-2 border-midnight-950 flex items-center justify-center text-[10px] text-white font-bold"},"U",qi))),React.createElement("p",null,"Trusted by 10,000+ Pros & Gyms"))),React.createElement("div",{className:"relative"},React.createElement("div",{className:"absolute inset-0 bg-brand/20 blur-[100px] rounded-full"}),React.createElement("div",{className:"relative glass-panel p-6 rounded-3xl border border-white/10 shadow-2xl transform rotate-2 hover:rotate-0 transition-transform duration-500"},React.createElement("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4"},React.createElement("div",{className:"flex gap-2"},React.createElement("div",{className:"w-3 h-3 rounded-full bg-red-500"}),React.createElement("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),React.createElement("div",{className:"w-3 h-3 rounded-full bg-green-500"})),React.createElement("div",{className:"text-xs font-mono text-slate-500"},"SYSTEM_STATUS: OPTIMAL")),React.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},React.createElement("div",{className:"bg-midnight-900/50 p-4 rounded-xl border border-white/5"},React.createElement("div",{className:"text-slate-400 text-xs uppercase mb-1"},"Active Clients"),React.createElement("div",{className:"text-2xl font-bold text-white"},"1,248"),React.createElement("div",{className:"text-xs text-brand-green flex items-center gap-1 mt-1"},React.createElement(ni,{name:"TrendingUp",size:12})," +12% this week")),React.createElement("div",{className:"bg-midnight-900/50 p-4 rounded-xl border border-white/5"},React.createElement("div",{className:"text-slate-400 text-xs uppercase mb-1"},"Monthly Revenue"),React.createElement("div",{className:"text-2xl font-bold text-white"},"$84.2k"),React.createElement("div",{className:"text-xs text-brand-purple flex items-center gap-1 mt-1"},React.createElement(ni,{name:"Activity",size:12})," 98% Collection"))),React.createElement("div",{className:"bg-brand/10 p-4 rounded-xl border border-brand/20 flex items-center gap-4"},React.createElement("div",{className:"p-3 bg-brand rounded-lg text-white shadow-lg"},React.createElement(ni,{name:"Zap",size:20})),React.createElement("div",null,React.createElement("div",{className:"text-white font-bold"},"AI Workflow Automated"),React.createElement("div",{className:"text-brand-accent text-xs"},"New client onboarding completed in 1.2s"))))))),React.createElement("div",{className:"border-y border-white/5 bg-black/20 py-10"},React.createElement("div",{className:"max-w-7xl mx-auto px-6"},React.createElement("p",{className:"text-center text-slate-500 text-xs font-bold uppercase tracking-widest mb-8"},"Powering Industry Leaders"),React.createElement("div",{className:"flex flex-wrap justify-center gap-12 opacity-50 grayscale hover:grayscale-0 transition-all duration-500"},["Equinox","Gold's Gym","Orange Theory","CrossFit","F45"].map((qi,co)=>React.createElement("div",{key:co,className:"text-xl font-bold text-white"},lo(qi)))))),React.createElement("footer",{className:"py-12 border-t border-white/5 mt-auto"},React.createElement("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6"},React.createElement("div",{className:"text-slate-500 text-sm"},"\xA9 2025 FlowOFIT Systems. All rights reserved."),React.createElement("div",{className:"flex gap-6 text-sm text-slate-400"},React.createElement("button",{type:"button",className:"hover:text-white"},"Privacy"),React.createElement("button",{type:"button",className:"hover:text-white"},"Terms"),React.createElement("button",{type:"button",className:"hover:text-white"},"Security",React.createElement(ud,{devMode:ai,emits:["admin.action.performed","user.dsr.requested"]})))))),Dc=({onSelect:wt,onBack:na,onHome:si,canGoBack:Ii})=>React.createElement(Lr,{onBack:na,onHome:si,canGoBack:Ii},React.createElement("div",{className:"flex-1 flex flex-col justify-center items-center p-6 py-20 relative z-10"},React.createElement("h2",{className:"text-4xl font-bold mb-4 text-center"},"Choose Your Path"),React.createElement("p",{className:"text-slate-400 mb-12 text-center max-w-md"},"Select how you will interact with the FlowOFIT ecosystem."),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl"},React.createElement("button",{onClick:()=>wt("CLIENT"),className:"group relative bg-midnight-900/50 hover:bg-midnight-800 border border-white/10 hover:border-brand p-8 rounded-3xl text-left transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden"},React.createElement("div",{className:"absolute top-0 right-0 p-32 bg-brand/5 rounded-full blur-3xl group-hover:bg-brand/10 transition-colors"}),React.createElement("div",{className:"relative z-10"},React.createElement("div",{className:"w-16 h-16 bg-midnight-950 rounded-2xl border border-white/10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg"},React.createElement(ni,{name:"User",size:32,className:"text-brand-green"})),React.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Personal Journey"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed mb-6"},"For athletes, gym members, and individuals looking to track progress, connect with coaches, and achieve fitness goals."),React.createElement("div",{className:"flex items-center gap-2 text-brand-green font-bold text-sm"},"Enter as Member ",React.createElement(ni,{name:"ArrowRight",size:16,className:"group-hover:translate-x-1 transition-transform"})))),React.createElement("button",{onClick:()=>wt("TRAINER"),className:"group relative bg-midnight-900/50 hover:bg-midnight-800 border border-white/10 hover:border-brand-purple p-8 rounded-3xl text-left transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden"},React.createElement("div",{className:"absolute top-0 right-0 p-32 bg-brand-purple/5 rounded-full blur-3xl group-hover:bg-brand-purple/10 transition-colors"}),React.createElement("div",{className:"relative z-10"},React.createElement("div",{className:"w-16 h-16 bg-midnight-950 rounded-2xl border border-white/10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg"},React.createElement(ni,{name:"Building2",size:32,className:"text-brand-purple"})),React.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Professional & Enterprise"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed mb-6"},"For trainers, nutritionists, gyms, and large health organizations requiring management tools, CRM, and analytics."),React.createElement("div",{className:"flex items-center gap-2 text-brand-purple font-bold text-sm"},"Access Workspace ",React.createElement(ni,{name:"ArrowRight",size:16,className:"group-hover:translate-x-1 transition-transform"}))))))),Pc=({role:wt,onNavigate:na,extra:si,onBack:Ii,onHome:Ta,canGoBack:ti})=>React.createElement(Lr,{onBack:Ii,onHome:Ta,canGoBack:ti},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl max-w-md w-full text-center"},React.createElement("h2",{className:"text-2xl font-bold mb-8"},wt==="TRAINER"?"Professional":wt," Access"),React.createElement("button",{onClick:()=>na("LOGIN"),className:"w-full py-4 border border-midnight-700 text-white font-bold rounded-xl mb-4 hover:bg-midnight-800 transition-colors"},"Log In (Existing)"),React.createElement("button",{onClick:()=>na("SIGNUP"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl hover:bg-brand-dark shadow-neon transition-all"},"Sign Up (New)"),lo(si)))),Mc=({step:wt,onNext:na,onUpdate:si,onBack:Ii,onHome:Ta,canGoBack:ti})=>{var ai={onBack:Ii,onHome:Ta,canGoBack:ti};return wt==="TYPE_SELECT"?React.createElement($n,{title:"Select Account Type",step:1,total:3,...ai},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>na("GO_TO_PRO_WIZARD"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand/10 text-brand rounded-lg"},React.createElement(ni,{name:"UserCog",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Individual Professional"),React.createElement("p",{className:"text-sm text-slate-400"},"Trainer, Nutritionist, Physio, or Specialist."))),React.createElement("button",{onClick:()=>na("GYM_CHECK"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand/10 text-brand rounded-lg"},React.createElement(ni,{name:"Dumbbell",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Gym / Fitness Facility"),React.createElement("p",{className:"text-sm text-slate-400"},"Manage members, classes, and billing."))),React.createElement("button",{onClick:()=>na("CORP_CHECK"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand-purple transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand-purple/10 text-brand-purple rounded-lg"},React.createElement(ni,{name:"Building",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Corporate Wellness"),React.createElement("p",{className:"text-sm text-slate-400"},"Employee health programs and insurance."))))):wt==="GYM_CHECK"?React.createElement($n,{title:"Gym Access",step:2,total:3,...ai},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>na("DASHBOARD"),className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 text-white"},"Login to Existing Gym"),React.createElement("button",{onClick:()=>na("GYM_ONBOARD"),className:"p-4 bg-brand text-white rounded-xl font-bold hover:bg-brand-dark"},"Register New Facility"))):wt==="GYM_ONBOARD"?React.createElement($n,{title:"Facility Details",step:3,total:3,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Gym Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Location count"}),React.createElement("button",{onClick:()=>na("DASHBOARD"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-4"},"Launch Gym Portal"))):wt==="CORP_CHECK"?React.createElement($n,{title:"Corporate Portal",step:2,total:3,...ai},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>na("DASHBOARD"),className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 text-white"},"HR Admin Login"),React.createElement("button",{onClick:()=>na("CORP_ONBOARD"),className:"p-4 bg-brand-purple text-white rounded-xl font-bold hover:bg-purple-700"},"New Wellness Program"))):wt==="CORP_ONBOARD"?React.createElement($n,{title:"Company Profile",step:3,total:3,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Company Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Employee Count"}),React.createElement("button",{onClick:()=>na("DASHBOARD"),className:"w-full py-4 bg-brand-purple text-white font-bold rounded-xl mt-4"},"Initialize Wellness Hub"))):React.createElement("div",null,"Unknown Step")},Fc=({stepIndex:wt,totalSteps:na,canBack:si,onBack:Ii,children:Ta})=>{var ti=(wt+1)/na*100;return React.createElement("div",{className:"onboarding-shell min-h-screen bg-night-950 bg-onboarding-grid bg-fixed bg-cover flex items-center justify-center px-4 py-8"},React.createElement("div",{className:"max-w-md w-full"},React.createElement("div",{className:"rounded-[32px] border border-slate-700/70 bg-card-blur shadow-card-strong px-4 py-5"},React.createElement("div",{className:"pt-2"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-night-900 border border-[#10FF61] flex items-center justify-center shadow-[0_0_24px_#10FF61]"}),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.24em] text-neon-aqua"},"FlowOFIT"),React.createElement("div",{className:"text-[0.72rem] text-slate-300"},"Goal-centric client onboarding"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"px-3 py-1.5 rounded-full border border-[#10FF61] bg-black/40 text-[11px] font-mono uppercase tracking-[0.22em] text-[#10FF61] shadow-[0_0_18px_#10FF61]"},"Step ",wt+1,"/",na),si&&React.createElement("button",{type:"button",onClick:Ii,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-[#10FF61] bg-night-900/80 text-[11px] text-slate-100 hover:shadow-[0_0_18px_#10FF61] transition-all"},"Back"))),React.createElement("div",{className:"h-1.5 rounded-full bg-night-900 overflow-hidden mb-4"},React.createElement("div",{className:"h-full rounded-full bg-gradient-to-r from-[#4DE9FF] via-[#35F27A] to-[#10FF61] shadow-[0_0_24px_#10FF61] transition-all",style:{width:ti+"%"}}))),Ta)))},Nc=({active:wt,title:na,label:si,note:Ii,img:Ta,onClick:ti,disabled:ai=!1})=>React.createElement("button",{type:"button",disabled:ai,onClick:qi=>{try{qi.preventDefault(),qi.stopPropagation()}catch(co){}ai||ti&&ti(qi)},className:"w-full text-left rounded-3xl overflow-hidden mb-3 border transition-all "+(wt?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"relative h-28 w-full"},React.createElement("img",{src:Ta,alt:na,className:"h-full w-full object-cover",loading:"lazy"}),React.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-night-950/95 via-night-950/40 to-transparent"}),wt&&React.createElement("div",{className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-[#10FF61] text-night-950 flex items-center justify-center shadow-[0_0_18px_#10FF61]"},React.createElement(ni,{name:"Check",size:18}))),React.createElement("div",{className:"px-4 py-3"},React.createElement("div",{className:"text-[0.85rem] font-extrabold tracking-[0.08em] text-slate-50"},lo(na)),React.createElement("div",{className:"text-[0.78rem] font-semibold text-slate-200 mt-0.5"},lo(si)),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-1"},lo(Ii)))),Dd=({label:wt,active:na,onClick:si,className:Ii="",disabled:Ta=!1})=>React.createElement("button",{type:"button",disabled:Ta,onClick:Ta?void 0:si,className:"px-3 py-1.5 rounded-full text-[0.78rem] font-semibold border transition-all "+(na?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_24px_#10FF61] ":"bg-night-950/70 text-slate-200 border-white/10 hover:border-[#10FF61] hover:shadow-[0_0_12px_#10FF61] ")+(Ta?"opacity-50 cursor-not-allowed ":"cursor-pointer ")+Ii},lo(wt)),pr=({eyebrow:wt,title:na,subtitle:si,icon:Ii})=>React.createElement("div",{className:"mb-4"},wt&&React.createElement("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-full bg-night-900 border border-neon-lime/70 text-[11px] font-mono uppercase tracking-[0.2em] text-neon-lime"},lo(wt)),React.createElement("div",{className:"mt-3 flex items-start gap-3"},React.createElement("div",{className:"flex-1"},React.createElement("h1",{className:"text-[1.3rem] leading-snug font-display font-semibold text-slate-50"},lo(na)),si&&React.createElement("p",{className:"mt-1.5 text-[0.85rem] text-slate-400 leading-relaxed"},lo(si))))),br=({children:wt,className:na="",...si})=>React.createElement("button",{...si,className:"w-full inline-flex items-center justify-center gap-2 rounded-2xl text-[0.98rem] font-semibold py-3 bg-[#10FF61] text-night-950 border border-[#10FF61] hover:border-[#10FF61] hover:shadow-[0_0_24px_#10FF61] hover:bg-[#10FF61] transition-all disabled:opacity-60 disabled:cursor-not-allowed "+na},wt),Uc=({state:wt,update:na,onNext:si})=>{var As,yo;var[Ii,Ta]=Ws(wt.name||""),[ti,ai]=Ws(wt.email||""),[qi,co]=Ws(wt.password||""),[Ys,bi]=Ws((As=wt.newsletterOptIn)!=null?As:!0),[hs,fo]=Ws(wt.acceptedTerms||!1),go=!Ii.trim()||!ti.trim()||!qi.trim()||!hs,Ei=()=>{na({name:Ii.trim(),email:ti.trim(),password:qi,newsletterOptIn:Ys,acceptedTerms:hs,signUpMethod:"email"}),si()};return React.createElement(React.Fragment,null,((yo=wt==null?void 0:wt.coachContext)==null?void 0:yo.planName)&&React.createElement("div",{className:"mb-4 p-4 rounded-3xl bg-[#10FF61]/10 border border-[#10FF61]/30"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-[#10FF61]/20 border border-[#10FF61]/30 flex items-center justify-center text-[#10FF61]"},React.createElement(ni,{name:"BadgeCheck",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-mono uppercase tracking-[0.25em] text-[#10FF61]"},"Coach assigned"),React.createElement("div",{className:"text-sm font-extrabold text-white mt-1"},"Your coach has assigned: ",wt.coachContext.planName),React.createElement("div",{className:"text-[12px] text-slate-300 mt-1"},wt.coachContext.coachName?"Coach: "+wt.coachContext.coachName+". ":"",wt.coachContext.note||"We\u2019ll tailor your week around this plan and your readiness.")))),React.createElement(pr,{title:"Lets create your FlowOFIT profile",subtitle:"We will use this to save your progress and sync across all your devices.",icon:"UserRound"}),React.createElement("div",{className:"space-y-3 flex-1 overflow-y-auto pr-1 scroll-area"},React.createElement("div",{className:"rounded-3xl profile-card bg-midnight-900/80 border px-4 py-3.5"},React.createElement("div",{className:"space-y-2.5"},React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Your Name")),React.createElement("input",{type:"text",value:Ii,onChange:Ks=>Ta(Ks.target.value),placeholder:"Type your name here...",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Your Email address")),React.createElement("input",{type:"email",value:ti,onChange:Ks=>ai(Ks.target.value),placeholder:"Type your email here...",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Create a password")),React.createElement("input",{type:"password",value:qi,onChange:Ks=>co(Ks.target.value),placeholder:"At least 8 characters",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})))),React.createElement("div",{className:"flex items-start gap-2"},React.createElement("input",{id:"tos",type:"checkbox",checked:hs,onChange:Ks=>fo(Ks.target.checked),className:"mt-0.5 rounded border-slate-400 text-brand focus:ring-brand/70 bg-midnight-900"}),React.createElement("label",{htmlFor:"tos",className:"text-[0.76rem] text-slate-300 leading-snug"},"I agree to FlowOFIT's ",React.createElement("span",{className:"underline"},"Terms")," and"," ",React.createElement("span",{className:"underline"},"Privacy Policy"),".")),React.createElement("div",{className:"flex items-start gap-2"},React.createElement("input",{id:"newsletter",type:"checkbox",checked:Ys,onChange:Ks=>bi(Ks.target.checked),className:"mt-0.5 rounded border-slate-400 text-brand focus:ring-brand/70 bg-midnight-900"}),React.createElement("label",{htmlFor:"newsletter",className:"text-[0.76rem] text-slate-300 leading-snug"},"Send me occasional tips and updates that match my goals."))),React.createElement("div",{className:"pt-4"},React.createElement(br,{disabled:go,onClick:Ei},"Continue",React.createElement(ni,{name:"ArrowRight",size:16}))))},Bc=({state:wt,update:na,onNext:si})=>{var Ii=wt.focusAreas||[],Ta=[{key:"FITNESS_FIRST",title:"GENERAL FITNESS",label:"Strength, Conditioning, Cardio",note:"Build strength, drop fat and feel like an athlete again.",img:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?auto=format&fit=crop&q=80&w=600"},{key:"NUTRITION_FIRST",title:"NUTRITION & HABITS",label:"Food, Energy, Lifestyle",note:"Make food and habits work around your real life, not against it.",img:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?auto=format&fit=crop&q=80&w=600"},{key:"YOGA_WELLNESS",title:"YOGA & WELLNESS",label:"Calm, Mobility, Nervous System",note:"Flows, breathwork and recovery to feel lighter and less stressed.",img:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8WU9HQXxlbnwwfHwwfHx8MA%3D%3D"}],ti=ai=>{var co=Ii.includes(ai)?Ii.filter(bi=>bi!==ai):[...Ii,ai];var Ys=null;if(co.length===1)Ys=co[0];else if(co.length===2){var bi=[...co].sort(),hs=bi.includes("FITNESS_FIRST"),fo=bi.includes("NUTRITION_FIRST"),go=bi.includes("YOGA_WELLNESS");hs&&fo?Ys="FITNESS_NUTRITION":hs&&go?Ys="FITNESS_YOGA":fo&&go&&(Ys="NUTRITION_YOGA")}else co.length===3&&(Ys="HYBRID_ALL");na({focusAreas:co,route:Ys})};return React.createElement(React.Fragment,null,React.createElement(pr,{title:"What brings you to FlowOFIT?",subtitle:"You may select more than one that matches your goal \u2013 we\u2019ll blend them into your plan.",icon:"Compass"}),React.createElement("div",{className:"max-h-[380px] overflow-y-auto pr-1 scroll-area"},Ta.map(ai=>React.createElement(Nc,{key:ai.key,active:Ii.includes(ai.key),title:ai.title,label:ai.label,note:dl(ai.note),img:ai.img,onClick:()=>ti(ai.key)}))),React.createElement("div",{className:"pt-3"},React.createElement(br,{disabled:Ii.length===0,onClick:si},"Continue personalizing your plan",React.createElement(ni,{name:"ArrowRight",size:16}))))},Gc=({state:wt,update:na,onNext:si})=>{var Ii=wt.route||"HYBRID_ALL",Ta=wt.primaryGoal||null,[ti,ai]=Ws(!1),[qi,co]=Ws(""),Ys=()=>{var Ei=wt.focusAreas||[],As=wt.primaryGoal,yo=Ei.includes("FITNESS_FIRST"),Ks=Ei.includes("NUTRITION_FIRST"),Fs=Ei.includes("YOGA_WELLNESS"),Lo=["Momentum beats motivation. Give us the details and we\u2019ll build a plan that\u2019s simple, repeatable, and effective.","Consistency wins. Next, we\u2019ll tailor your roadmap so it fits busy weeks and still drives results.","No overthinking. We\u2019ll keep it efficient \u2014 tell us the nuance and we\u2019ll dial it in."],Hn=["No extremes. No guilt. Next, we\u2019ll tailor habits that work in real life \u2014 meals, cravings, and all.","We\u2019ll keep food simple and sustainable. Share the nuance and we\u2019ll shape habits you can actually stick to.","Progress comes from repeatable choices. Next, we\u2019ll tailor your plan around your routine and appetite."],es=["You don\u2019t need more pressure \u2014 you need calm structure. Next, we\u2019ll tailor practices that feel lighter and steady.","Slow is strong. Share the nuance and we\u2019ll build a routine that calms your system and supports your body.","We\u2019ll keep it gentle, consistent, and grounding. Next, tell us what\u2019s real \u2014 and we\u2019ll tailor it."],Ai=["You don\u2019t need perfect motivation \u2014 you need a plan built around your real life. Next, give us the nuance\u2026 and we\u2019ll tailor it properly.","Small wins, stacked daily. Next, we\u2019ll blend your choices into a roadmap that feels personal \u2014 not overwhelming.","No resets. No extremes. Just a blended plan that works. Next, tell us the nuance and we\u2019ll tailor it."],no={LOSE_FAT:["Fat loss is about consistency, not perfection. Next, we\u2019ll tailor the plan so it\u2019s easy to repeat \u2014 and it works.","We\u2019ll make this sustainable: simple structure, smart choices, and progress you can maintain."],BUILD_MUSCLE:["Muscle is built through repeatable weeks. Next, we\u2019ll tailor the plan so you can progress without burning out.","We\u2019ll keep it progressive and realistic \u2014 so strength builds week after week."],STRESS:["Calm is a skill. Next, we\u2019ll tailor your routine to reduce stress and make recovery feel automatic.","We\u2019ll build calm into your week \u2014 not as an extra task, but as the foundation."],SLEEP:["Sleep is your superpower. Next, we\u2019ll tailor routines that support deeper recovery.","We\u2019ll shape habits that help you switch off and wake up fresher."],ENERGY:["Energy comes from structure. Next, we\u2019ll tailor the plan to reduce crashes and boost daily drive.","We\u2019ll build a rhythm that keeps you switched on \u2014 not drained."],HEALTH_MARKERS:["We\u2019ll keep it evidence-led and sustainable. Next, share the nuance and we\u2019ll tailor the lifestyle pieces that move the needle."],FOOD_PEACE:["We\u2019ll keep this gentle and practical. Next, we\u2019ll tailor habits that reduce guilt and increase control."],PAIN_FREE:["We\u2019ll keep it safe and coach-like. Next, share the nuance so we can respect limits and still progress."]};var Co=[];return Fs&&!yo&&!Ks?Co=es:Ks&&!yo&&!Fs?Co=Hn:yo&&!Ks&&!Fs?Co=Lo:Co=Ai,As&&no[As]&&(Co=Co.concat(no[As])),yo&&Ks&&!Fs&&Co.push("We\u2019ll balance training and food so they work together \u2014 not against each other."),yo&&Fs&&!Ks&&Co.push("We\u2019ll blend strength with mobility and recovery so your body feels strong and calm."),Ks&&Fs&&!yo&&Co.push("We\u2019ll pair calmer routines with simple food structure so stress doesn\u2019t drive your choices."),Co[Math.floor(Math.random()*Co.length)]};var bi="What\u2019s your most priority goal for the next 12\u201316 weeks?",hs="Target",fo=[];Ii==="FITNESS_FIRST"?(bi="What is your North Star for this fitness journey?",hs="Dumbbell",fo=[{key:"LOSE_FAT",title:"Body Recomposition",label:"Lose fat & inches",note:"Feel lighter, leaner and more athletic.",img:"https://themusclephd.com/wp-content/uploads/2021/05/shutterstock_1369044449-1200x600.jpg"},{key:"BUILD_MUSCLE",title:"Performance & Power",label:"Build muscle & strength",note:"Look and feel noticeably stronger.",img:"https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&q=80&w=600"},{key:"PERFORMANCE",title:"Sports & Performance",label:"Mobility & strength",note:"Train for a sport, race or key event.",img:"https://sportsmatik.com/uploads/misc/3_1626692453.jpg"},{key:"PAIN_FREE",title:"Move Painfree",label:"Safe & confident movement",note:"Make joints and movements feel safer.",img:"https://blog.somaiya.edu/wp-content/uploads/2023/07/Banner-Option-1.jpg"}]):Ii==="YOGA_WELLNESS"?(bi="What is the NOISE in your life right now that you are trying to quiet down?",hs="Flower2",fo=[{key:"PAIN_FREE",title:"Mobility & Comfort",label:"Ease stiffness & pain",note:"Less tightness in back, hips or shoulders.",img:"https://pmrxcontent.com/wp-content/uploads/Back-Pain-Relief-through-Yoga.jpg"},{key:"SLEEP",title:"Rest & Recovery",label:"Sleep deeper",note:"Fall asleep easier and wake up more rested.",img:"https://elev8.com/wp-content/uploads/sites/4/2024/11/17325664543981.jpg?strip=all&quality=80"},{key:"STRESS",title:"Calmer nervous system",label:"Reduce stress & anxiety",note:"Calm your system after long days.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"},{key:"ENERGY",title:"Daily Vitality",label:"Feel lighter & energised",note:"More \u201Cgood days\u201D and fewer heavy ones.",img:"https://static.toiimg.com/thumb/msid-123854125,imgsize-460969,width-400,resizemode-4/yoga.jpg"}]):Ii==="NUTRITION_FIRST"?(bi="Are we trying to break a bad habit, or build a new lifestyle?",hs="Utensils",fo=[{key:"LOSE_FAT",title:"Weight & Shape",label:"Lose body fat sustainably",note:"No extreme diets, no rebound.",img:"https://www.tigerfitness.com/cdn/shop/articles/weight-loss-1_1200x600_crop_center.jpg?v=1539974908"},{key:"ENERGY",title:"Focus & Mood",label:"Stable energy all day",note:"Fewer crashes and afternoon slumps.",img:"https://americanbehavioralclinics.com/wp-content/uploads/2025/11/Depositphotos_444847522_L.jpg"},{key:"HEALTH_MARKERS",title:"Labs & Longevity",label:"Improve health markers",note:"Support labs & long-term health.",img:"https://www.news-medical.net/images/news/ImageForNews_712324_16514604802736596.jpg"},{key:"FOOD_PEACE",title:"Habits & Headspace",label:"Peace with food",note:"Less guilt, more control and ease.",img:"https://www.eatingwell.com/thmb/m5xUzIOmhWSoXZnY-oZcO9SdArQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/article_291139_the-top-10-healthiest-foods-for-kids_-02-4b745e57928c4786a61b47d8ba920058.jpg"}]):Ii==="FITNESS_NUTRITION"?(bi="Choose your level of mix of Training & Nutrition, so that we can blend it for you?",hs="Dumbbell",fo=[{key:"LOSE_FAT",title:"Training + Meals",label:"Drop fat & reshape",note:"Lose fat with your workouts and nutrition working together.",img:"https://thumbs.dreamstime.com/b/dumbells-healthy-food-towels-fitness-health-isolated-white-background-50300700.jpg"},{key:"BUILD_MUSCLE",title:"Strength + Recovery",label:"Stronger, more athletic",note:"Build muscle while fuelling recovery and performance.",img:"https://thumbs.dreamstime.com/z/postworkout-recovery-empty-bottles-towels-dumbbell-wooden-floor-dim-light-casts-warm-glow-scene-post-exercise-370252050.jpg"},{key:"ENERGY",title:"Work, Life & Training",label:"Energy & day-to-day performance",note:"Feel switched on during the day and strong in your sessions.",img:"https://images.unsplash.com/photo-1522844990619-4951c40f7eda?auto=format&fit=crop&q=80&w=600"},{key:"HEALTH_MARKERS",title:"Health Markers + Lifestyle",label:"Training for long-term health",note:"Use both training and food to support your long-term health markers.",img:"https://thumbs.dreamstime.com/b/healthy-lifestyle-concept-diet-fitness-medicine-background-125235090.jpg"}]):Ii==="FITNESS_YOGA"?(bi="What is your body asking for most right now?",hs="Dumbbell",fo=[{key:"LOSE_FAT",title:"Body + Movement",label:"Lean, athletic & mobile",note:"Trim down while keeping joints and movement feeling good.",img:"https://media.istockphoto.com/id/636191848/photo/dumbbell-and-yoga-mat-on-wood-table.jpg?s=612x612&w=0&k=20&c=SELP8KSRmx2noiRcze_5FAgtR_RlZil84Q4Xo8s9c0Y="},{key:"BUILD_MUSCLE",title:"Strength + Mobility",label:"Strong but still fluid",note:"Build muscle while staying mobile and \u201Cun-stiff\u201D.",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR28Nq8reN-FRqLro5Yq2GOt6bDRNzyEg570Q&s"},{key:"PAIN_FREE",title:"Pain-Free Movement",label:"Train without fear of flareups",note:"Use strength + yoga to make movement feel safer and calmer.",img:"https://pmrxcontent.com/wp-content/uploads/Back-Pain-Relief-through-Yoga.jpg"},{key:"STRESS",title:"Calm + Strength",label:"Stress relief that actually sticks",note:"Blend nervous system work with training so stress doesn\u2019t pile up.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"}]):Ii==="NUTRITION_YOGA"?(bi="What is the primary job your nutrition and lifestyle plan needs to do?",hs="Utensils",fo=[{key:"LOSE_FAT",title:"Food + Nervous System",label:"Gentle, sustainable fat loss",note:"Lose weight without constantly fighting your body and stress.",img:"https://www.tigerfitness.com/cdn/shop/articles/weight-loss-1_1200x600_crop_center.jpg?v=1539974908"},{key:"SLEEP",title:"Sleep Ritual + Nutrition",label:"Sleep better from the inside out",note:"Evening routines, breathwork and food habits that support deep sleep.",img:"https://elev8.com/wp-content/uploads/sites/4/2024/11/17325664543981.jpg?strip=all&quality=80"},{key:"STRESS",title:"Cortisol + Calm",label:"On tracker stress, calmer days",note:"Nourish your body and calm your system so you don\u2019t stay wired.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"},{key:"FOOD_PEACE",title:"Habits & Headspace",label:"A calmer relationship with food",note:"Use rituals, breath and structure to feel less guilt and more control.",img:"https://www.eatingwell.com/thmb/m5xUzIOmhWSoXZnY-oZcO9SdArQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/article_291139_the-top-10-healthiest-foods-for-kids_-02-4b745e57928c4786a61b47d8ba920058.jpg"}]):(bi="What is the foundation we are building your new body and mind upon?",hs="Infinity",fo=[{key:"LOSE_FAT",title:"Hybrid Mode - Body Recomposition",label:"Recompose: leaner & athletic",note:"Lose fat while staying strong.",img:"https://barbend.com/wp-content/uploads/2023/07/body-recomposition-featured-barbend.com-1.jpg"},{key:"BUILD_MUSCLE",title:"Strength + Physique",label:"Stronger & more muscular",note:"Build an athletic frame.",img:"https://www.borntough.com/cdn/shop/articles/Best_Biceps_Workouts_with_Dumbbells_at_Home.jpg?v=1656353954"},{key:"PAIN_FREE",title:"Strength + Mobility",label:"Pain-free, fluid movement",note:"Blend strength and mobility safely.",img:"https://images.unsplash.com/photo-1575052814086-f385e2e2ad1b?auto=format&fit=crop&q=80&w=600"},{key:"ENERGY",title:"Whole-life Performance",label:"Energy & mood",note:"Support focus, mood and resilience.",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREBdauOkUWVKnvlQ9jlL4mXHrpR7sV0zxFog&s"}]);var go=Ei=>{na({primaryGoal:Ei})};return React.createElement(React.Fragment,null,React.createElement(pr,{title:bi,subtitle:"You can change this later \u2014 this just helps us shape your starting plan.",icon:hs}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area"},fo.map(Ei=>React.createElement(Nc,{key:Ei.key,active:Ta===Ei.key,title:Ei.title,label:Ei.label,note:dl(Ei.note),img:Ei.img,onClick:()=>go(Ei.key)}))),React.createElement("div",{className:"pt-3"},React.createElement(br,{disabled:!Ta,onClick:()=>{co(Ys()),ai(!0)}},"Continue",React.createElement(ni,{name:"ArrowRight",size:16}))),ti&&React.createElement("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4 py-6"},React.createElement("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-[2px] modal-overlay",onClick:()=>ai(!1)}),React.createElement("div",{className:"relative w-full max-w-sm modal-card"},React.createElement("div",{className:"rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/35 to-neon-lime/25 p-3.5 shadow-[0_0_28px_rgba(16,255,97,0.25)]"},React.createElement("div",{className:"rounded-3xl bg-night-950/90 border border-neon-lime/60 px-3.5 py-3"},React.createElement("div",{className:"text-[0.92rem] text-slate-50 font-semibold"},"Your choices are locked, Now lets build a roadmap to reach your goal with personalized and most relaistic plan."),React.createElement("div",{className:"mt-3 rounded-2xl bg-midnight-950/70 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.72rem] text-slate-400"},"Your focus"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},(wt.focusAreas||[]).map(Ei=>{var yo={FITNESS_FIRST:"General Fitness",NUTRITION_FIRST:"Nutrition & Habits",YOGA_WELLNESS:"Yoga & Wellness"}[Ei]||Ei;return React.createElement("span",{key:Ei,className:"px-2.5 py-1 rounded-2xl bg-night-950 border border-slate-600 text-[0.76rem] text-slate-100"},lo(yo))})),Ta&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[0.72rem] text-slate-400"},"North Star goal"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},React.createElement("span",{className:"px-2.5 py-1 rounded-2xl bg-night-950 border border-slate-600 text-[0.76rem] text-slate-100"},{LOSE_FAT:"Lose fat / recomposition",BUILD_MUSCLE:"Build muscle & strength",PERFORMANCE:"Sport / performance",PAIN_FREE:"Move pain-free",SLEEP:"Better sleep",STRESS:"Less stress",ENERGY:"More daily energy",HEALTH_MARKERS:"Improve health markers",FOOD_PEACE:"Peace with food"}[Ta]||Ta)))),React.createElement("div",{className:"mt-3 rounded-2xl bg-black/35 border border-white/10 px-3 py-2"},React.createElement("div",{className:"mt-1 text-[0.8rem] text-slate-300 leading-relaxed"},lo(qi))),React.createElement("div",{className:"mt-3"},React.createElement(br,{onClick:()=>{ai(!1),si()}},"Continue"),React.createElement("button",{type:"button",onClick:()=>ai(!1),className:"mt-2 w-full text-center text-[0.78rem] text-slate-300 hover:text-slate-100 transition-colors"},"Go back to make changes")))))))},Hc=({state:wt,update:na,onNext:si})=>{var Ii=wt.primaryGoal,Ta=wt.route,[ti,ai]=Ws(wt.goalNotes||""),[qi,co]=Ws(wt.goalTags||[]),[Ys,bi]=Ws(wt.medicalConditions||"");if(!Ii)return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Choose a goal first",subtitle:"We\u2019ll unlock these details once your main focus is set.",icon:"AlertCircle"}),React.createElement("div",{className:"mt-auto pt-6"},React.createElement(br,{disabled:!0},"Go back and pick a primary goal")));var hs=[];(Ta==="FITNESS_FIRST"||Ta==="FITNESS_NUTRITION"||Ta==="FITNESS_YOGA"||Ta==="HYBRID_ALL")&&hs.push("Strength","Fat loss","Cardio","Mobility","Performance"),(Ta==="NUTRITION_FIRST"||Ta==="FITNESS_NUTRITION"||Ta==="NUTRITION_YOGA"||Ta==="HYBRID_ALL")&&hs.push("Portion control","Snacking","Energy dips","Sugar cravings"),(Ta==="YOGA_WELLNESS"||Ta==="FITNESS_YOGA"||Ta==="NUTRITION_YOGA"||Ta==="HYBRID_ALL")&&hs.push("Stress relief","Sleep","Back pain","Stiff hips","Recovery"),Ii==="LOSE_FAT"?hs.push("Lose fat","Drop inches","Recomposition"):Ii==="BUILD_MUSCLE"?hs.push("Build muscle","Strength gain","Performance"):Ii==="PAIN_FREE"?hs.push("Move without pain","Joint friendly","Rehab safe"):Ii==="SLEEP"?hs.push("Sleep deeper","Fall asleep faster","Wake up fresher"):Ii==="ENERGY"&&hs.push("More daily energy","Less crashes","Focus"),hs=Array.from(new Set(hs));var fo=Ei=>{qi.includes(Ei)?co(qi.filter(As=>As!==Ei)):co([...qi,Ei])},go=()=>{na({goalNotes:ti,goalTags:qi,medicalConditions:Ys}),si()};return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Describe your goal in your own words",subtitle:"Think like you\u2019re briefing a coach for the next 12\u201316 weeks \u2013 what result should we actually chase?",icon:"Sparkles"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-midnight-900/80 border border-slate-700 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-300 mb-1.5"},"What do you want your body, energy or performance to feel like?"),React.createElement("textarea",{rows:3,value:ti,onChange:Ei=>ai(Ei.target.value),placeholder:"E.g. \u201CDrop ~8 kg without feeling drained, keep strength in the gym, no knee flare-ups after 5\u2011a\u2011side.\u201D",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-2.5 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"No perfect wording needed \u2013 Type it the way you\u2019d message your coach on WhatsApp.")),hs.length>0&&React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Optional: Tag your goal so the FlowOfit Pilot understands the nuance better."),React.createElement("div",{className:"flex flex-wrap gap-1.5"},hs.map(Ei=>React.createElement(Dd,{key:Ei,label:Ei,active:qi.includes(Ei),onClick:()=>fo(Ei)}))),qi.length>0&&React.createElement("p",{className:"mt-1.5 text-[0.75rem] text-slate-400"},"We\u2019ll treat these as \u201Cpriority flavours\u201D when we build your roadmap.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Any injuries, medical flags or guidelines from your doctor or physio we should respect?"),React.createElement("textarea",{rows:3,value:Ys,onChange:Ei=>bi(Ei.target.value),placeholder:"E.g. ACL recon 2019, recurring lower-back tightness, high blood pressure, pregnancy, \u201Cno max-effort sprints\u201D from doctor.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-2.5 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.72rem] text-slate-400"},"This doesn\u2019t replace medical advice, but it lets us keep your plan safer and more coach-like."))),React.createElement("div",{className:"pt-3"},React.createElement(br,{onClick:go},"Continue",React.createElement(ni,{name:"ArrowRight",size:16}))))},Wc=({state:wt,update:na,onNext:si})=>{var go;var[Ii,Ta]=Ws(wt.activityLevel||""),[ti,ai]=Ws(typeof wt.deskJob=="boolean"?wt.deskJob:null),[qi,co]=Ws(!1);Gl(()=>{ti!==null&&co(!0)},[ti]);var Ys=[{key:"VERY_LOW",title:"Very On track Movement",subtitle:"Mostly sitting or resting outside work",icon:"\u{1F6CB}\uFE0F",neat:1},{key:"LIGHT",title:"Light Movement",subtitle:"Some walking or daily tasks, but mostly low activity",icon:"\u{1F6B6}\u200D\u2642\uFE0F",neat:1.25},{key:"MODERATE",title:"Adjusting Movement",subtitle:"Regular walking, errands, and general daily movement",icon:"\u{1F9CD}\u200D\u2642\uFE0F",neat:1.5},{key:"HIGH",title:"Recovery focus Movement",subtitle:"On your feet a lot with frequent walking",icon:"\u{1F6B6}\u200D\u2640\uFE0F",neat:1.75},{key:"VERY_HIGH",title:"Very Recovery focus Movement",subtitle:"Physically demanding days or constant movement",icon:"\u{1F3C3}\u200D\u2642\uFE0F",neat:2}],bi=!Ii||ti===null,hs=()=>{var Lo;var Ei=Ys.find(Hn=>Hn.key===Ii),As=(Lo=Ei==null?void 0:Ei.neat)!=null?Lo:1.5,yo=ti===!0?-.5:.5,Ks=As+yo;var Fs="MEDIUM";Ks<=1?Fs="LOW":Ks>=2&&(Fs="HIGH"),na({activityLevel:Ii,deskJob:ti,neatBaseline:As,deskModifier:yo,dailyActivityIndex:Ks,baselinePreset:Fs}),si()},fo=((go=Ys.find(Ei=>Ei.key===Ii))==null?void 0:go.title)||"";return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Let\u2019s understand your day-to-day",subtitle:"Exclude workouts and sports \u2014 we\u2019ll factor those in separately.",icon:"Activity"}),React.createElement("div",{className:"mb-3 rounded-3xl bg-black/25 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"text-[0.88rem] text-slate-50 font-semibold"},"Do you have a desk job?"),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},"This helps us understand how much time you typically spend sitting during work hours."),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>ai(!0),className:"text-left rounded-3xl border px-3.5 py-3 transition-all "+(ti===!0?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},"Yes"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-0.5"},"Mostly seated")),React.createElement("button",{type:"button",onClick:()=>ai(!1),className:"text-left rounded-3xl border px-3.5 py-3 transition-all "+(ti===!1?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},"No"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-0.5"},"Mostly on my feet or moving")))),ti!==null&&React.createElement("div",{className:"rounded-3xl bg-black/30 border border-white/10 overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>co(Ei=>!Ei),className:"w-full flex items-start justify-between gap-3 px-4 py-3 text-left"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[0.88rem] font-semibold text-slate-50"},"How active are you outside of work, on most days?"),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},"This includes walking, errands, daily movement \u2014 not workouts or sports."),!qi&&React.createElement("div",{className:"mt-2 text-[0.78rem] text-slate-200"},Ii?React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",{className:"text-[#10FF61]"},"\u2713"),"Selected: ",React.createElement("span",{className:"font-semibold"},lo(fo))):React.createElement("span",{className:"text-slate-400"},"Tap to choose your activity level."))),React.createElement("div",{className:"shrink-0 mt-1 text-slate-300"},qi?"\u25B2":"\u25BC")),qi&&React.createElement("div",{className:"px-4 pb-4"},React.createElement("div",{className:"space-y-3 max-h-[320px] overflow-y-auto pr-1 scroll-area"},Ys.map(Ei=>React.createElement("button",{key:Ei.key,type:"button",onClick:()=>Ta(Ei.key),className:"w-full text-left rounded-3xl border px-4 py-4 min-h-[104px] transition-all "+(Ii===Ei.key?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border flex items-center justify-center shrink-0 "+(Ii===Ei.key?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_18px_#10FF61]":"bg-night-950/60 text-slate-200 border-white/10")},React.createElement("span",{className:"text-[1.05rem] leading-none"},lo(Ei.icon))),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[0.95rem] font-semibold text-white"},lo(Ei.title)),React.createElement("div",{className:"text-[0.78rem] text-slate-300 mt-0.5 line-clamp-2"},lo(Ei.subtitle))),Ii===Ei.key&&React.createElement("div",{className:"mt-1 text-[#10FF61]"},React.createElement("span",{className:"text-[1.05rem] leading-none"},"\u2705")))))))),React.createElement("div",{className:"pt-3"},React.createElement(br,{disabled:bi,onClick:hs},"Continue ",React.createElement(ni,{name:"ArrowRight",size:16}))))},Yc=({state:wt,update:na,onNext:si})=>{var[Ii,Ta]=Ws(wt.sportsActivity||""),[ti,ai]=Ws(wt.sportsDays||""),[qi,co]=Ws(wt.sportsHoursPerWeek||""),[Ys,bi]=Ws(wt.sportsPain||""),hs=()=>{na({sportsActivity:Ii,sportsDays:ti,sportsHoursPerWeek:qi,sportsPain:Ys}),si()},fo=["1","2","3","4","5","6","7"],go=["1\u20132","3\u20134","5\u20137","8\u201310","10+"];return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Tell us about your sport load",subtitle:"We will adapt intensity and recovery so your sport and training work together \u2014 not against each other.",icon:"Trophy"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-midnight-900/80 border border-slate-700 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Are you currently playing any sports or doing regular activities we should factor in?"),React.createElement("textarea",{rows:2,value:Ii,onChange:Ei=>Ta(Ei.target.value),placeholder:"E.g. 5-a-side football twice a week, weekend padel, weekly tennis league, recreational running.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"If nothing right now, you can leave this blank \u2013 we\u2019ll just build from scratch.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"How many days per week do you usually play or train for this sport?"),React.createElement("div",{className:"flex flex-wrap gap-1.5"},fo.map(Ei=>React.createElement(Dd,{key:Ei,label:Ei+" d",active:ti===Ei,onClick:()=>ai(Ei)}))),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"Quick tap is fine \u2013 we just need a ballpark training frequency.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Across those days, roughly how many total hours per week does that add up to?"),React.createElement("div",{className:"flex flex-wrap gap-1.5"},go.map(Ei=>React.createElement(Dd,{key:Ei,label:Ei+" hrs",active:qi===Ei,onClick:()=>co(Ei)}))),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"You can refine this later \u2013 this just helps us balance training load and recovery.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Do you feel any pain, tightness or challenges during or right after these sports?"),React.createElement("textarea",{rows:2,value:Ys,onChange:Ei=>bi(Ei.target.value),placeholder:"E.g. knee niggle after football, tight lower back after long runs, shoulder pinch after serving in tennis.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"This is about managing weekly load \u2014 not medical limits,we already have those"))),React.createElement("div",{className:"pt-3"},React.createElement(br,{onClick:hs},"Continue",React.createElement(ni,{name:"ChevronRight",size:18,className:"ml-1"}))))};var Kc=({state:wt,update:na,onNext:si})=>{var Ii=wt.route,Ta=Ii==="YOGA_WELLNESS",ti=Ii==="NUTRITION_FIRST",ai=Ii==="FITNESS_FIRST",[qi,co]=Ws(wt.units||"METRIC"),[Ys,bi]=Ws(wt.age||""),[hs,fo]=Ws(wt.sex||wt.gender||""),[go,Ei]=Ws(typeof wt.heightCm=="number"?wt.heightCm:wt.height?Number(wt.height):""),[As,yo]=Ws(typeof wt.weightKg=="number"?wt.weightKg:wt.weight?Number(wt.weight):""),Ks=Bt=>{var ta=Number(Bt)/2.54,Ka=Math.floor(ta/12),oi=Math.round(ta-Ka*12);return{ft:isFinite(Ka)?Ka:"",inch:isFinite(oi)?oi:""}},Fs=Bt=>Number(Bt)*2.2046226218,Lo=Bt=>Number(Bt)/2.2046226218,Hn=(Bt,ta)=>(Number(Bt)*12+Number(ta||0))*2.54,[es,Ai]=Ws(()=>go?Ks(go).ft:""),[no,Co]=Ws(()=>go?Ks(go).inch:""),[Mi,ts]=Ws(()=>{if(!As)return"";var Bt=Math.round(Fs(As));return isFinite(Bt)?Bt:""});Gl(()=>{if(qi==="IMPERIAL"){if(go){var Bt=Ks(go);Ai(Bt.ft),Co(Bt.inch)}else Ai(""),Co("");if(As){var Bt=Math.round(Fs(As));ts(isFinite(Bt)?Bt:"")}else ts("")}},[qi]);var[vs,ko]=Ws((wt.trainingExperience==="ATHLETE"?"ADVANCED":wt.trainingExperience)||""),$s=(()=>{var Bt=Array.isArray(wt.focusAreas)&&wt.focusAreas.length?wt.focusAreas:wt.route?[wt.route]:[],ta=Bt.includes("FITNESS_FIRST"),Ka=Bt.includes("NUTRITION_FIRST"),oi=Bt.includes("YOGA_WELLNESS"),io="We\u2019ll match your starting plan to your level (and blend it with activity + sport load).";return Ka&&!ta&&!oi?{title:"How consistent are your routines?",sub:io,labels:{BEGINNER:"Starting",RETURNING:"Returning",INTERMEDIATE:"Consistent",ADVANCED:"Very consistent"},subtitles:{BEGINNER:"New to food routines",RETURNING:"Back on track again",INTERMEDIATE:"Mostly consistent weeks",ADVANCED:"Strong structure & follow-through"}}:oi&&!ta&&!Ka?{title:"What\u2019s your yoga experience?",sub:io,labels:{BEGINNER:"New",RETURNING:"Returning",INTERMEDIATE:"Regular",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to yoga practice",RETURNING:"Back after a break",INTERMEDIATE:"Practice most weeks",ADVANCED:"Confident with flows & holds"}}:ta&&!Ka&&!oi?{title:"What\u2019s your training experience?",sub:"So we set your starting intensity and progression.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structured training",RETURNING:"Restarting after a break",INTERMEDIATE:"Train regularly",ADVANCED:"Recovery focus capacity / fast progress"}}:ta&&Ka&&!oi?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance training + nutrition to fit your real life.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:ta&&oi&&!Ka?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance training + yoga to keep you progressing safely.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:Ka&&oi&&!ta?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance routines + yoga to keep it sustainable.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:{title:"What\u2019s your experience level overall?",sub:"We blend this with your activity + sport load to set a safe starting plan.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}})(),is=[{key:"BEGINNER"},{key:"RETURNING"},{key:"INTERMEDIATE"},{key:"ADVANCED"}],xs=!Ys||!hs||!(qi==="METRIC"&&go&&As||qi==="IMPERIAL"&&es&&Mi)||!vs,ps=()=>{var Bt=Number(qi==="METRIC"?go:Hn(es,no)),ta=Number(qi==="METRIC"?As:Lo(Mi));na({age:Ys,sex:hs,gender:hs,units:qi,heightCm:Bt,weightKg:ta,height:Bt,weight:ta,trainingExperience:vs}),si()},Ho=Array.from({length:73},(Bt,ta)=>String(ta+13));return React.createElement(React.Fragment,null,React.createElement(pr,{title:"A few quick details",subtitle:"This helps us tailor targets and keep your plan realistic.",icon:"UserRound"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Age"),React.createElement("div",{className:"w-[58%]"},React.createElement("select",{value:Ys,onChange:Bt=>bi(Bt.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-3 text-[0.9rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:""},"Select"),Ho.map(Bt=>React.createElement("option",{key:Bt,value:Bt},lo(Bt))))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Sex"),React.createElement("div",{className:"w-[58%]"},React.createElement("select",{value:hs,onChange:Bt=>fo(Bt.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-3 text-[0.9rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"Female"},"Female"),React.createElement("option",{value:"Male"},"Male")))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Height"),React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Weight"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 font-semibold"},"Units")),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("div",null,qi==="METRIC"?React.createElement("input",{inputMode:"numeric",value:go,onChange:Bt=>Ei(Bt.target.value.replace(/[^\d.]/g,"")),placeholder:"cm",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}):React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{inputMode:"numeric",value:es,onChange:Bt=>Ai(Bt.target.value.replace(/[^\d]/g,"")),placeholder:"ft",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}),React.createElement("input",{inputMode:"numeric",value:no,onChange:Bt=>Co(Bt.target.value.replace(/[^\d]/g,"")),placeholder:"in",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}))),React.createElement("div",null,qi==="METRIC"?React.createElement("input",{inputMode:"numeric",value:As,onChange:Bt=>yo(Bt.target.value.replace(/[^\d.]/g,"")),placeholder:"kg",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}):React.createElement("input",{inputMode:"numeric",value:Mi,onChange:Bt=>ts(Bt.target.value.replace(/[^\d.]/g,"")),placeholder:"lb",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("select",{value:qi,onChange:Bt=>co(Bt.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:"METRIC"},"Metric"),React.createElement("option",{value:"IMPERIAL"},"Imperial"))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"text-[0.92rem] text-slate-50 font-semibold"},lo($s.title)),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},lo($s.sub)),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},is.map(Bt=>{var ta;return React.createElement("button",{key:Bt.key,type:"button",onClick:()=>ko(Bt.key),className:"rounded-3xl border px-3.5 py-3 text-left transition-all "+(vs===Bt.key?"bg-night-900/90 border-[#10FF61] shadow-[0_0_20px_#10FF61]":"bg-black/35 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.85rem] font-semibold text-slate-50"},$s.labels[Bt.key]),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-0.5"},((ta=$s.subtitles)==null?void 0:ta[Bt.key])||""))})))),React.createElement("div",{className:"pt-3"},React.createElement(br,{disabled:xs,onClick:ps},"Continue ",React.createElement(ni,{name:"ArrowRight",size:16}))))},jc=({state:wt,update:na,onNext:si})=>{var Ii=wt.route,Ta=Ii==="YOGA_WELLNESS",ti=Ii==="NUTRITION_FIRST",[ai,qi]=Ws(wt.days||3),[co,Ys]=Ws(wt.time||"ANY"),[bi,hs]=Ws(wt.length||"30_45"),fo=()=>{na({days:ai,time:co,length:bi}),si()};var go="What does a realistic week look like for you?",Ei="We\u2019ll build around your life, not the other way round.";Ta?(go="Where can calm movement realistically fit into your week?",Ei="We\u2019ll weave yoga, breathwork and recovery into the spaces that already exist in your life."):ti&&(go="What does a realistic week of food & habits look like for you?",Ei="We\u2019ll match your plan to when life feels most under control, not perfectly \u201Cclean\u201D.");var As=ti?"How many days per week can you be intentional with food or habits?":Ta?"How many days of gentle or focused practice feels realistic?":"How many focused days can you give us?",yo=ti?"When does your eating or routine feel most under control?":"When does your day feel most in your control?",Ks=ti?"How much time can you usually give to food prep, logging or small habit work?":Ta?"How long can you usually give for each practice without feeling rushed?":"Typical time window for one block";return React.createElement(React.Fragment,null,React.createElement(pr,{title:go,subtitle:Ei,icon:"CalendarClock"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between text-[0.8rem] text-slate-200 mb-1.5"},React.createElement("span",null,lo(As)),React.createElement("span",{className:"text-neon-aqua font-semibold"},ai," day",ai!==1?"s":"","/week")),React.createElement("input",{type:"range",min:"1",max:"7",value:ai,onChange:Fs=>qi(parseInt(Fs.target.value,10)),className:"w-full accent-neon-aqua"}),React.createElement("div",{className:"flex justify-between text-[0.7rem] text-slate-500 mt-1"},React.createElement("span",null,"1"),React.createElement("span",null,"3"),React.createElement("span",null,"5"),React.createElement("span",null,"7"))),React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3 space-y-2"},React.createElement("p",{className:"text-[0.8rem] text-slate-200"},lo(yo)),React.createElement("div",{className:"flex gap-1.5"},[{key:"MORNING",label:"Morning"},{key:"AFTERNOON",label:"Afternoon"},{key:"EVENING",label:"Evening"},{key:"ANY",label:"No preference"}].map(Fs=>React.createElement("button",{key:Fs.key,type:"button",onClick:()=>Ys(Fs.key),className:"flex-1 rounded-2xl text-[0.78rem] px-2.5 py-2 border "+(co===Fs.key?"border-brand bg-brand text-white":"border-white/15 bg-black/60 text-slate-200 hover:border-neon-lime")},lo(Fs.label))))),React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3 space-y-2"},React.createElement("p",{className:"text-[0.8rem] text-slate-200"},lo(Ks)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},[{key:"20_30",label:"20\u201330 min"},{key:"30_45",label:"30\u201345 min"},{key:"45_60",label:"45\u201360 min"},{key:"60_PLUS",label:"60+ min"}].map(Fs=>React.createElement(Dd,{key:Fs.key,label:Fs.label,active:bi===Fs.key,onClick:()=>hs(Fs.key)}))))),React.createElement("div",{className:"pt-3"},React.createElement(br,{onClick:fo},"Continue",React.createElement(ni,{name:"ArrowRight",size:16}))))},Vc=({state:wt,onNext:na})=>{var si=wt.name||"You",Ii={YOGA_WELLNESS:"Yoga & Wellness",FITNESS_FIRST:"General Fitness",NUTRITION_FIRST:"Nutrition & Habits",FITNESS_NUTRITION:"Fitness + Nutrition",FITNESS_YOGA:"Fitness + Yoga & Wellness",NUTRITION_YOGA:"Yoga & Nutrition blend",HYBRID_ALL:"Full hybrid: Fitness + Yoga + Nutrition",HYBRID:"Hybrid journey"},Ta={LOSE_FAT:"Lose fat / recomposition",BUILD_MUSCLE:"Build muscle & strength",PERFORMANCE:"Sport or performance",PAIN_FREE:"Move without pain",SLEEP:"Better sleep",ENERGY:"Energy & mood",HEALTH_MARKERS:"Health markers",FOOD_PEACE:"Calmer relationship with food"},ti={MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",ANY:"No strong preference"},ai={"20_30":"20\u201330 min","30_45":"30\u201345 min","45_60":"45\u201360 min","60_PLUS":"60+ min"},qi=Ii[wt.route]||"Hybrid journey",co=Ta[wt.primaryGoal]||"General health & fitness",Ys=wt.days?wt.days+" day"+(wt.days!==1?"s":"")+" / week":"We\u2019ll start with 3 days / week",bi=ti[wt.time]||"We\u2019ll place sessions where they fit best",hs=ai[wt.length]||"Around 30\u201345 minutes",fo=wt.trainingStyle||[],go=wt.focusAreas||[],Ei=wt.age,As=wt.sex||wt.gender,yo=As,Ks=wt.height,Fs=wt.weight,Lo=wt.goalNotes,Hn=(Mi,ts)=>!Mi||Mi.length===0?React.createElement("p",{className:"text-[0.78rem] text-slate-400"},lo(ts)):React.createElement("div",{className:"flex flex-wrap gap-1.5"},Mi.map(vs=>React.createElement("span",{key:vs,className:"px-2.5 py-1 rounded-2xl bg-midnight-950 border border-slate-600 text-[0.78rem] text-slate-100"},lo(vs)))),es=fo.map(Mi=>Mi==="HOME"?"Home-based":Mi==="GYM"?"Gym":Mi==="CLASSES"?"Classes / group":Mi==="OUTDOOR"?"Outdoor":Mi),Ai=go.map(Mi=>Mi==="FITNESS_FIRST"?"General Fitness":Mi==="NUTRITION_FIRST"?"Nutrition & Habits":Mi==="YOGA_WELLNESS"?"Yoga & Wellness":Mi),no=[];Ei&&no.push("Age "+Ei),As&&no.push(As),Ks&&no.push(Ks+" cm"),Fs&&no.push(Fs+" kg");var Co=()=>{na&&na()};return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Here\u2019s your FlowOFIT starting point, "+si,subtitle:"You can always fine-tune this later \u2013 this is your first, personalised version.",icon:"Sparkles"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3 rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/35 to-neon-lime/25 px-3.5 py-3.5"},React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1.5"},"Overall direction"),React.createElement("p",{className:"text-[0.9rem] text-slate-100 font-medium"},lo(qi)),React.createElement("p",{className:"text-[0.8rem] text-slate-300 mt-1"},"Primary focus:"," ",React.createElement("span",{className:"text-brand font-semibold"},lo(co))),go.length>0&&React.createElement("p",{className:"text-[0.78rem] text-slate-400 mt-1.5"},"You told us you care most about:"," ",React.createElement("span",{className:"text-slate-100"},Ai.join(" \u2022 ")))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1"},"Your starting week"),React.createElement("div",{className:"grid grid-cols-3 gap-2 text-[0.78rem]"},React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Frequency"),React.createElement("p",{className:"text-slate-50 font-medium"},lo(Ys))),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Best time"),React.createElement("p",{className:"text-slate-50 font-medium"},lo(bi))),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Session length"),React.createElement("p",{className:"text-slate-50 font-medium"},lo(hs))))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"Context we\u2019re building around"),React.createElement("div",{className:"space-y-1.5 mt-1"},React.createElement("div",null,React.createElement("p",{className:"text-[0.75rem] text-slate-400 mb-0.5"},"Training environment"),Hn(es,"We\u2019ll assume a mix you can change later.")))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"Basics we're keeping in mind"),no.length>0?React.createElement("p",{className:"text-[0.8rem] text-slate-200"},no.join(" \u2022 ")):React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"You'll be able to add more profile details later.")),Lo&&Lo.trim()&&React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1"},"In your own words"),React.createElement("p",{className:"text-[0.8rem] text-slate-200 italic"},"\u201C",Lo.trim(),"\u201D"))),React.createElement("div",{className:"mt-3 rounded-3xl bg-gradient-to-br from-brand/35 via-neon-aqua/20 to-neon-lime/25 px-3.5 py-3.5"},React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-aqua/50 px-3.5 py-3"},React.createElement("div",{className:"flex items-start gap-2"},React.createElement("div",{className:"mt-0.5 rounded-2xl bg-midnight-950 border border-white/10 p-2"}),React.createElement("div",{className:"flex-1"},React.createElement("p",{className:"text-[0.92rem] text-slate-50 font-semibold"},"Want this plan to adapt automatically?"),React.createElement("p",{className:"mt-1 text-[0.78rem] text-slate-300 leading-relaxed"},"Connect a wearable to unlock ",React.createElement("span",{className:"text-slate-100"},"readiness\u2011based training"),", ",React.createElement("span",{className:"text-slate-100"},"sleep\u2011aware recovery"),",",React.createElement("span",{className:"text-slate-100"}," auto\u2011adjusted calories"),", ",React.createElement("span",{className:"text-slate-100"},"weekly load balancing and many more"),"."),React.createElement("p",{className:"mt-2 text-[0.72rem] text-slate-400"},"Takes ~20 seconds \u2014 you can skip and do it later."))))),React.createElement("div",{className:"pt-3"},React.createElement(br,{onClick:Co},"Looks good \u2013 continue",React.createElement(ni,{name:"ArrowRight",size:16}))))},zc=({state:wt,update:na,onNext:si})=>{var Ii=wt.route||"HYBRID_ALL",Ta=wt.wearablesConnected||[],[ti,ai]=Ws(Ta),[qi,co]=Ws(wt.wearablesSyncMode||"AUTO"),[Ys,bi]=Ws(wt.wearablesMetrics||[]),[hs,fo]=Ws(!1),go=[{key:"APPLE_HEALTH",title:"Apple Health",label:"iPhone + Apple Watch",note:"Best for iOS users. Imports activity, workouts, sleep, HR/HRV (device dependent).",img:"https://aroundsketch.github.io/Apple-App-Icons/App-Icon/Apple/Health/@SVG.svg"},{key:"GOOGLE_FIT",title:"Google Fit",label:"Android baseline",note:"Great starting point for Android. Steps, activity minutes, workouts (varies).",img:"https://gstatic.com/images/branding/product/1x/gfit_512dp.png"},{key:"FITBIT",title:"Fitbit",label:"Sleep + readiness style metrics",note:"Strong sleep + cardio metrics. Syncs workouts, HR, sleep stages (if available).",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZCT7hq-kAh4yr7UF9B1ZpNhlbTJ9lhl2ROg&s"},{key:"GARMIN",title:"Garmin",label:"Training load powerhouse",note:"Best for sport data: workouts, HR, VO\u2082 max, training load (if available).",img:"https://cdn.worldvectorlogo.com/logos/garmin-2.svg"},{key:"WHOOP",title:"WHOOP",label:"Recovery signals",note:"Great for recovery trends (sleep + strain). Availability depends on API access.",img:"https://play-lh.googleusercontent.com/RpXxly7Gn0C_MjCHbynE9QxhMgC2D3PI4CAC7E2ujha2GRqepYWgH9IletL1x5facA"},{key:"OURA",title:"Oura",label:"Sleep + readiness",note:"Excellent sleep + readiness. Imports sleep, HR/HRV, temperature trends (if enabled).",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQseQFOiHGWCz8HgGlyNjF1warCeg_P6qgpZQ&s"}],Ei=()=>{var es=is=>(wt.focusAreas||[]).includes(is),Ai=es("FITNESS_FIRST")||Ii.includes("FITNESS"),no=es("YOGA_WELLNESS")||Ii.includes("YOGA"),Co=es("NUTRITION_FIRST")||Ii.includes("NUTRITION"),Mi=["STEPS","RESTING_HR","WORKOUTS"],ts=["ACTIVE_CALORIES","CARDIO_FITNESS_VO2","TRAINING_LOAD"],vs=["HRV","SLEEP","STRESS_TREND"],ko=["WEIGHT","ACTIVE_CALORIES","SLEEP"];var $s=[...Mi];return Ai&&($s=$s.concat(ts)),no&&($s=$s.concat(vs)),Co&&($s=$s.concat(ko)),[...new Set($s)]},As={STEPS:"Steps",WORKOUTS:"Workouts",RESTING_HR:"Resting HR",ACTIVE_CALORIES:"Calories burned",HRV:"HRV",SLEEP:"Sleep (duration/stages)",STRESS_TREND:"Stress / recovery trend",CARDIO_FITNESS_VO2:"VO\u2082 max / cardio fitness",TRAINING_LOAD:"Training load",WEIGHT:"Weight",ALL_SENSORS:"All available sensors"},yo=es=>{bi(Ai=>Ai.includes(es)?Ai.filter(Mi=>Mi!==es):es==="ALL_SENSORS"?["ALL_SENSORS"]:[...Ai.filter(Mi=>Mi!=="ALL_SENSORS"),es])},Ks=es=>{ai(Ai=>Ai.includes(es)?Ai.filter(Co=>Co!==es):[...Ai,es])},Fs=()=>{var es=Ei();na({wearablesConnected:ti,wearablesSyncMode:qi,wearablesMetrics:es}),si()},Lo=Ei(),Hn=Ys.length?Ys:Lo;return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Power up your plan with real data",subtitle:"Connect a wearable to unlock smarter adjustments week-to-week. We will keep your plan aligned with your real life.",icon:"Watch"}),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-4 py-3 mb-3"},React.createElement("div",{className:"text-[0.84rem] text-slate-100 font-semibold"},"Connect now for smarter weekly adjustments "),React.createElement("div",{className:"mt-1 text-[0.72rem] text-slate-400 leading-snug"},"Or skip and connect later in Settings.")),React.createElement("div",{className:"max-h-[260px] overflow-y-auto pr-1 scroll-area"},go.map(es=>React.createElement("div",{key:es.key,className:"rounded-3xl overflow-hidden mb-3 border border-white/10 bg-black/40"},React.createElement("div",{className:"flex gap-3 p-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-night-900 border border-[#10FF61]/50 flex items-center justify-center overflow-hidden"},React.createElement("img",{src:es.img,alt:dl(es.title),className:"w-10 h-10 object-contain"})),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},dl(es.title)),React.createElement("div",{className:"text-[0.75rem] text-slate-300"},dl(es.label)),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},dl(es.note))),React.createElement("button",{type:"button",onClick:()=>Ks(es.key),className:"h-fit px-3 py-2 rounded-2xl text-[0.75rem] font-semibold border transition-all "+(ti.includes(es.key)?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_18px_#10FF61]":"bg-night-950/70 text-slate-200 border-white/10 hover:border-[#10FF61]/70")},ti.includes(es.key)?"Connected":"Connect"))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-4 py-3 mt-2"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[0.84rem] text-slate-100 font-semibold"},"What you\u2019ll unlock"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"FlowOFIT uses your wearable in the background to keep your plan realistic \u2014 even when your week changes.")),React.createElement("button",{type:"button",onClick:()=>fo(!0),className:"shrink-0 rounded-2xl px-3 py-2 text-[0.72rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all",title:"How syncing works"},"How it works")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},["Readiness\u2011based training","Sleep\u2011aware recovery","Auto\u2011adjusted calories","Weekly load balancing"].map(es=>React.createElement("span",{key:es,className:"inline-flex items-center rounded-full px-3 py-1 text-[0.72rem] border border-white/10 bg-night-950/70 text-slate-200"},lo(es)))),React.createElement("div",{className:"mt-2 text-[0.72rem] text-slate-400 leading-snug"},"You\u2019re always in control \u2014 disconnect anytime.")),hs&&ReactDOM.createPortal(React.createElement("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center px-4 py-6"},React.createElement("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-[2px] modal-overlay",onClick:()=>fo(!1)}),React.createElement("div",{className:"relative w-full max-w-sm modal-card"},React.createElement("div",{className:"rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/20 to-neon-lime/20 p-3.5 shadow-[0_0_28px_rgba(16,255,97,0.18)]"},React.createElement("div",{className:"rounded-3xl bg-night-950/90 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-slate-50 font-semibold"},"How syncing works"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-1 leading-snug"},"This is the background stuff \u2014 you don\u2019t need to manage it.")),React.createElement("button",{type:"button",onClick:()=>fo(!1),className:"rounded-2xl px-3 py-2 text-[0.75rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all"},"Close")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"Permissions (OAuth)"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"In production, each provider asks for permission to read health/activity data. You can revoke access anytime.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"Update timing"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"Most wearables sync in batches (every few minutes \u2192 hours), not continuous live streaming. FlowOFIT updates your plan when new data arrives.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"What we use"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"We automatically pull the most useful signals your device supports \u2014 based on your route."),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},Lo.map(es=>React.createElement("span",{key:es,className:"inline-flex items-center rounded-full px-3 py-1 text-[0.72rem] border border-white/10 bg-night-950/70 text-slate-200"},As[es]||es))),React.createElement("div",{className:"mt-2 text-[0.72rem] text-slate-400 leading-snug"},"If your wearable supports advanced metrics (like calories or VO\u2082 max), we\u2019ll use them. If not, we still personalize well using steps, workouts, heart rate, and sleep/recovery.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"preview note"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"In this preview, \u201CConnect\u201D is simulated. In production, each provider requires OAuth/permissions.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"How FlowOFIT adapts"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"We use this data to adjust training volume, sleep\u2011aware recovery, workout load balancing, and smarter calorie targets (when supported)."))))))),document.body),React.createElement("div",{className:"pt-3 space-y-2"},React.createElement(br,{onClick:Fs},"Continue ",React.createElement(ni,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>{na({wearablesConnected:[],wearablesSyncMode:qi,wearablesMetrics:Hn}),si()},className:"w-full rounded-2xl py-3 text-[0.9rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all"},"Skip for now")))},qc=({onNext:wt})=>(Gl(()=>{var na=setTimeout(()=>{typeof wt=="function"&&wt()},2200);return()=>clearTimeout(na)},[]),React.createElement(React.Fragment,null,React.createElement(pr,{title:"Setting up your starting week\u2026",subtitle:"We\u2019re stitching together your plan based on everything you just told us.",icon:"Cpu"}),React.createElement("div",{className:"flex flex-col items-center justify-center gap-4 max-h-[360px] min-h-[260px]"},React.createElement("div",{className:"relative"},React.createElement("div",{className:"w-24 h-24 rounded-full border border-neon-aqua/50 flex items-center justify-center bg-black/50"},React.createElement("div",{className:"w-16 h-16 rounded-full border-2 border-neon-aqua/80 flex items-center justify-center animate-spin"},React.createElement(ni,{name:"Infinity",size:28,className:"text-neon-aqua"})))),React.createElement("p",{className:"text-[0.8rem] text-slate-300 text-center px-4"},"In the real app, this would take you straight into your daily tiles and roadmap.")),React.createElement("div",{className:"pt-3"},React.createElement(br,{onClick:wt},"Continue to dashboard (stub)",React.createElement(ni,{name:"ArrowRight",size:16}))))),$c=({onStart:wt})=>(React.useEffect(()=>{var na=setTimeout(()=>{wt&&wt()},1400);return()=>clearTimeout(na)},[wt]),React.createElement("div",{className:"min-h-screen flex items-center justify-center px-6 bg-onboarding-grid bg-night-950"},React.createElement("div",{className:"max-w-sm text-center animate-step"},React.createElement("div",{className:"mb-6 flex flex-col items-center gap-3"},React.createElement("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-brand/30 to-brand-purple/20 border border-white/10 flex items-center justify-center shadow-[0_20px_60px_rgba(0,0,0,0.55)]"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-brand/15 border border-brand/30 flex items-center justify-center"},React.createElement(ni,{name:"Sparkles",size:18,className:"text-brand"}))),React.createElement("div",{className:"text-xs font-mono uppercase tracking-[0.28em] text-slate-500"},"FlowOFIT")),React.createElement("h1",{className:"text-2xl font-bold text-white mb-2"},"Welcome \u2014 we\u2019re personalising your plan"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed"},"This takes a second. We\u2019ll tailor everything to your goals and your lifestyle."),React.createElement("div",{className:"mt-6 flex items-center justify-center"},React.createElement("div",{className:"flex items-center gap-2 text-[11px] text-slate-500"},React.createElement("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-brand animate-pulse"}),"Loading your journey\u2026")))));class Jc extends React.Component{constructor(na){super(na),this.state={hasError:!1,message:""}}static getDerivedStateFromError(na){return{hasError:!0,message:na&&na.message?na.message:"Something went wrong."}}componentDidCatch(na,si){console.error("FlowOFIT UI error:",na,si)}render(){return this.state.hasError?React.createElement("div",{className:"max-w-md w-full"},React.createElement("div",{className:"rounded-3xl bg-black/50 border border-red-500/40 px-4 py-4"},React.createElement("div",{className:"text-slate-50 font-semibold"},"Something broke on this step"),React.createElement("div",{className:"text-[0.8rem] text-slate-300 mt-1"},"Try going back and continuing again. If it keeps happening, refresh the page."),React.createElement("div",{className:"mt-3 text-[0.75rem] text-red-200/80 break-words"},lo(this.state.message)))):this.props.children}}var Xc=({onComplete:wt,onExistingLogin:na,onMagicLink:si})=>{var[Ii,Ta]=Ws(0),[ti,ai]=Ws({}),qi=Ei=>ai(As=>({...As,...Ei})),Ys=[({state:Ei,update:As,onNext:yo})=>{var[Ks,Fs]=Ws("SIGNIN"),[Lo,Hn]=Ws((Ei==null?void 0:Ei.email)||""),[es,Ai]=Ws(""),[no,Co]=Ws("INPUT"),[Mi,ts]=Ws("");var vs=({children:$s})=>React.createElement("div",{className:"rounded-3xl bg-white/5 border border-white/10 p-4 shadow-[0_0_30px_rgba(16,255,97,0.06)]"},$s);var ko=({active:$s,icon:is,label:xs,onClick:ps})=>React.createElement("button",{type:"button",onClick:Ho=>{try{Ho.preventDefault(),Ho.stopPropagation()}catch(Bt){}ps&&ps(Ho)},className:["flex-1 py-2.5 rounded-2xl border text-[0.78rem] font-semibold transition-all flex items-center justify-center gap-2",$s?"bg-white/10 border-white/20 text-white":"bg-black/20 border-white/10 text-slate-300 hover:bg-white/5 hover:border-white/15"].join(" ")},React.createElement(ni,{name:is,size:14}),lo(xs));if(Ks==="SIGNIN")return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Sign in",subtitle:"Access your dashboard, plan, and weekly insights.",icon:"LogIn"}),React.createElement(vs,null,React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-slate-400 mb-1"},"Email"),React.createElement("input",{value:Lo,onChange:$s=>Hn($s.target.value),type:"email",inputMode:"email",autoComplete:"email",placeholder:"name@email.com",className:"w-full rounded-2xl px-4 py-3 bg-black/20 border border-white/10 focus:outline-none focus:ring-2 focus:ring-neon-aqua/40"})),React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between text-[11px] text-slate-400 mb-1"},React.createElement("span",null,"Password"),React.createElement("button",{type:"button",onClick:()=>alert("Password reset is not wired in this build."),className:"text-neon-aqua hover:underline"},"Forgot?")),React.createElement("input",{value:es,onChange:$s=>Ai($s.target.value),type:"password",autoComplete:"current-password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full rounded-2xl px-4 py-3 bg-black/20 border border-white/10 focus:outline-none focus:ring-2 focus:ring-neon-aqua/40"})),React.createElement(br,{onClick:()=>{As({authIntent:"LOGIN",email:Lo,authMethod:"PASSWORD"}),typeof na=="function"?na({email:Lo}):yo()}},"Sign in",React.createElement(ni,{name:"ArrowRight",size:16})),React.createElement("div",{className:"pt-3 border-t border-white/10"},React.createElement("div",{className:"text-[11px] text-slate-400 mb-2"},"New to FlowOFIT?"),React.createElement("button",{type:"button",onClick:()=>{As({authIntent:"SIGNUP",authMethod:"STANDARD",email:Lo}),yo()},className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"UserPlus",size:16}),"Create account")),React.createElement("div",{className:"pt-3 border-t border-white/10"},React.createElement("div",{className:"text-[11px] text-slate-400 mb-2"},"Invited by a coach or organization?"),React.createElement("button",{type:"button",onClick:()=>{typeof si=="function"?si():(Fs("MAGIC"),Co("INPUT"))},className:"w-full py-3 rounded-2xl border border-neon-lime/25 bg-white/5 text-white font-semibold hover:border-neon-lime/45 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"Sparkles",size:16}),"Use magic link")))));if(Ks==="MAGIC"){if(no==="INPUT")return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Magic link",subtitle:"Invited by a coach or gym? Paste your code to connect instantly.",icon:"Sparkles"}),React.createElement(vs,null,React.createElement("div",{className:"flex gap-2 mb-3"},React.createElement(ko,{icon:"LogIn",label:"Log in",onClick:()=>Fs("SIGNIN")}),React.createElement(ko,{icon:"UserPlus",label:"Sign up",onClick:()=>{As({authIntent:"SIGNUP",authMethod:"STANDARD"}),yo()}}),React.createElement(ko,{active:!0,icon:"Sparkles",label:"Magic link",onClick:()=>{Fs("MAGIC"),Co("INPUT")}})),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Email"),React.createElement("input",{value:Lo,onChange:$s=>Hn($s.target.value),placeholder:"you@email.com",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"})),React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Magic link code"),React.createElement("input",{value:Mi,onChange:$s=>ts($s.target.value),placeholder:"e.g. FLOW-ABCD-1234",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"}),React.createElement("div",{className:"mt-2 text-[11px] text-slate-500"},"(preview) In production this is generated by your coach / gym tenant and verified server-side.")),React.createElement(br,{onClick:()=>Co("STATUS")},"Verify & continue",React.createElement(ni,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>Fs("CHOICE"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back to options"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/30 px-3 py-2.5 text-[11px] text-slate-300 leading-relaxed"},"Magic Link can auto-link you to a coach program and unlock linked-client features."));if(no==="STATUS")return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Verified",subtitle:"Choose what happens next (preview simulation).",icon:"ShieldCheck"}),React.createElement(vs,null,React.createElement("div",{className:"space-y-3"},React.createElement("button",{type:"button",onClick:()=>{As({authIntent:"MAGIC",authMethod:"MAGIC_LINK",magicLink:Mi,email:Lo,magicStatus:"EXISTING_USER"}),yo()},className:"w-full py-3 rounded-2xl bg-white/10 border border-white/15 text-white font-semibold hover:bg-white/15 transition-colors"},"Existing user \u2014 log me in"),React.createElement("button",{type:"button",onClick:()=>Co("QUICK_SIGNUP"),className:"w-full py-3 rounded-2xl bg-[#10FF61] text-night-950 border border-[#10FF61] font-semibold hover:opacity-95 transition-opacity"},"New user \u2014 create account"),React.createElement("button",{type:"button",onClick:()=>Co("INPUT"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back"))));if(no==="QUICK_SIGNUP")return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Create your password",subtitle:"Finish creating your account (preview).",icon:"Key"}),React.createElement(vs,null,React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Password"),React.createElement("input",{type:"password",value:es,onChange:$s=>Ai($s.target.value),placeholder:"Create password",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"})),React.createElement(br,{onClick:()=>{As({authIntent:"MAGIC",authMethod:"MAGIC_LINK",magicLink:Mi,email:Lo,magicStatus:"NEW_USER_CREATED"}),yo()}},"Create & continue",React.createElement(ni,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>Co("STATUS"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back"))))}return React.createElement(React.Fragment,null,React.createElement(pr,{title:"Client access",subtitle:"Create an account to save your plan, dashboard, and weekly insights.",icon:"User"}),React.createElement("div",{className:"space-y-4"},React.createElement(vs,null,React.createElement("div",{className:"flex gap-2 mb-3"},React.createElement(ko,{active:!0,icon:"User",label:"Options",onClick:()=>Fs("CHOICE")}),React.createElement(ko,{icon:"LogIn",label:"Log in",onClick:()=>{typeof na=="function"?na({email:Lo}):Fs("SIGNIN")}}),React.createElement(ko,{icon:"Sparkles",label:"Magic link",onClick:()=>{typeof si=="function"?si():(Fs("MAGIC"),Co("INPUT"))}})),React.createElement("div",{className:"text-sm text-slate-200 font-semibold"},"Choose how you want to continue"),React.createElement("div",{className:"text-xs text-slate-400 mt-1"},"Sign up if you\u2019re new, log in if you already have an account, or use a Magic Link from your coach/gym."),React.createElement("div",{className:"mt-4 space-y-3"},React.createElement(br,{onClick:()=>{As({authIntent:"SIGNUP",authMethod:"STANDARD"}),yo()}},"Create account",React.createElement(ni,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>{typeof na=="function"?na({email:Lo}):Fs("SIGNIN")},className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"LogIn",size:16}),"Log in"),React.createElement("button",{type:"button",onClick:()=>{typeof si=="function"?si():(Fs("MAGIC"),Co("INPUT"))},className:"w-full py-3 rounded-2xl border border-neon-lime/25 bg-white/5 text-white font-semibold hover:border-neon-lime/45 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"Sparkles",size:16}),"Use magic link"),React.createElement("div",{className:"grid grid-cols-3 gap-2 pt-2 text-[11px] text-slate-300"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(ni,{name:"Lock",size:14,className:"text-neon-aqua"}),React.createElement("span",null,"Secure by design")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(ni,{name:"Shield",size:14,className:"text-neon-lime"}),React.createElement("span",null,"Privacy controls")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(ni,{name:"Zap",size:14,className:"text-white"}),React.createElement("span",null,"Fast setup")))))))},Uc,Bc,Gc,Hc,Wc,Yc,Kc,jc,Vc,zc,qc],bi=Ys.length;if(Ii===0)return React.createElement($c,{onStart:()=>Ta(1)});var hs=Ys[Ii-1],fo=()=>{if(Ii<bi){Ta(Ii+1);return}wt&&wt(ti)},go=()=>{Ii>1&&Ta(Ii-1)};return React.createElement(Fc,{stepIndex:Ii-1,totalSteps:bi,canBack:Ii>1,onBack:go},React.createElement(Jc,null,React.createElement(hs,{state:ti,update:qi,onNext:fo})))},Qc=({onNext:wt,onUpdate:na,onConversionEvent:si,context:Ii,onExistingLogin:Ta,onMagicLink:ti})=>React.createElement(Xc,{onComplete:qi=>{var co=qi.focusAreas||[],Ys=co.includes("YOGA_WELLNESS"),bi=co.includes("FITNESS_FIRST"),hs=co.includes("NUTRITION_FIRST");var fo="General Fitness";Ys&&!bi&&!hs?fo="Yoga & Wellness":hs&&!bi&&!Ys?fo="Nutrition & Habits":bi?fo="General Fitness":Ys&&(fo="Yoga & Wellness");var go=co.length>1;if(na&&na("q1_goal",fo),na&&na("hasSecondary",go),na&&na("v10_onboarding",qi),si){var Ei=qi.age,As=Ei?Ei<25?"18-24":Ei<35?"25-34":Ei<45?"35-44":Ei<55?"45-54":"55+":null;si("IC_ONBOARD_COMPLETE",{variant:fo==="Yoga & Wellness"&&!go?"PURE_YOGA":"STANDARD",primaryGoal:qi.primaryGoal||null,secondaryGoal:go&&co.filter(Ks=>Ks!==(Ys?"YOGA_WELLNESS":bi?"FITNESS_FIRST":"NUTRITION_FIRST"))[0]||null,ageBand:As,experienceLevel:qi.experience||qi.trainingExperience||null,planType:"Independent"})}wt&&wt("ROUTING_ENGINE")},onExistingLogin:Ta,onMagicLink:ti}),Zc=({step:wt,onNext:na,onUpdate:si,onBack:Ii,onHome:Ta,canGoBack:ti})=>{var ai={onBack:Ii,onHome:Ta,canGoBack:ti};window.__FOF=window.__FOF||{},window.__FOF.AI=window.__FOF.AI&&typeof window.__FOF.AI=="object"&&typeof window.__FOF.AI.autoBuildNutritionWeek=="function"&&typeof window.__FOF.AI.suggestMacroOverride=="function"&&typeof window.__FOF.AI.generateYogaFlow=="function"?window.__FOF.AI:function(){var Mi=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ts=["Breakfast","Lunch","Dinner","Snacks"],vs=Bt=>{Bt=String(Bt||"");var ta=2166136261;for(var Ka=0;Ka<Bt.length;Ka++)ta^=Bt.charCodeAt(Ka),ta=Math.imul(ta,16777619);return ta>>>0},ko=Bt=>{var ta=Bt>>>0||123456789;return()=>(ta^=ta<<13,ta^=ta>>>17,ta^=ta<<5,(ta>>>0)/4294967296)},$s=(Bt,ta)=>!Array.isArray(Bt)||Bt.length===0?null:Bt[Math.floor(ta()*Bt.length)%Bt.length];function is(Bt,ta,Ka){var oi=Bt&&Bt.week?JSON.parse(JSON.stringify(Bt.week)):{},io=Date.now()+vs((Bt==null?void 0:Bt.id)||(Bt==null?void 0:Bt.name)||"plan")>>>0,_=ko(io),Zs=Array.isArray(ta)?ta:[],Zo=Array.isArray(Ka)?Ka:[];return Mi.forEach(nn=>{oi[nn]=oi[nn]||{},ts.forEach(Bn=>{if(oi[nn][Bn]=Array.isArray(oi[nn][Bn])?oi[nn][Bn].slice(0):[],oi[nn][Bn].length===0){var yn=null;Bn==="Lunch"||Bn==="Dinner"?yn=$s(Zo,_)||$s(Zs,_):yn=$s(Zs,_)||$s(Zo,_),yn&&oi[nn][Bn].push({type:yn.type||(Zo.includes(yn)?"RECIPE":"MEAL"),id:yn.id||yn._id||"x"+Math.floor(_()*1e9),name:yn.name||yn.title||"Item"})}})}),oi}function xs(Bt,ta){var Ka={calories:Number((ta==null?void 0:ta.calories)||(ta==null?void 0:ta.kcal)||0)||0,protein:Number((ta==null?void 0:ta.protein)||0)||0,carbs:Number((ta==null?void 0:ta.carbs)||0)||0,fat:Number((ta==null?void 0:ta.fat)||0)||0};Ka.calories||(Ka.calories=2e3),Ka.protein||(Ka.protein=140),Ka.carbs||(Ka.carbs=200),Ka.fat||(Ka.fat=60);var oi=String((Bt==null?void 0:Bt.goal)||(Bt==null?void 0:Bt.primaryGoal)||(Bt==null?void 0:Bt.tags)||"").toLowerCase(),io=Number((Bt==null?void 0:Bt.weightKg)||(Bt==null?void 0:Bt.weight)||0);if(oi.includes("cut")||oi.includes("fat")||oi.includes("lose")?(Ka.calories=Math.round(Ka.calories*.9),Ka.protein=Math.round(Ka.protein*1.1)):oi.includes("bulk")||oi.includes("gain")||oi.includes("muscle")?(Ka.calories=Math.round(Ka.calories*1.08),Ka.protein=Math.round(Ka.protein*1.05)):oi.includes("maint")&&(Ka.calories=Math.round(Ka.calories*1)),io>30){var Zs=Math.round(Math.min(220,Math.max(110,1.8*io)));Ka.protein=Zs}var _=Ka.protein*4+Ka.carbs*4+Ka.fat*9;if(_>0){var Zs=Ka.calories-_;Ka.carbs=Math.max(50,Math.round(Ka.carbs+Zs/4))}return Ka}function ps(Bt,ta,Ka){var oi=null,io=null;Bt&&typeof Bt=="object"&&!Array.isArray(Bt)?(oi=Bt,io=Array.isArray(ta)?ta:[]):(oi={intensity:Bt,durationMin:ta},io=Array.isArray(Ka)?Ka:[]);var _=String((oi==null?void 0:oi.intensity)||"FLOW").toUpperCase(),Zs=Math.max(5,Number((oi==null?void 0:oi.durationMin)||20)),Zo=Date.now()+vs(_)+Math.floor(Zs*10)>>>0,nn=ko(Zo),Bn=Array.isArray(io)?io:[],yn=[],Os=_==="POWER"?35:_==="FLOW"?45:60,vn=_==="POWER"?10:_==="FLOW"?15:20,ed=Math.max(5*60,Math.round(Zs*60));var Ur=new Set,vl=0;for(;vl<ed&&yn.length<60;){var Vr=$s(Bn,nn)||{id:"pose_"+Math.floor(nn()*1e9),name:"Breath / Reset"},Pn=String(Vr.id||Vr._id||Vr.name);if(Ur.has(Pn)&&Bn.length>20)continue;Ur.add(Pn);var tn=Os;if(yn.push({kind:"POSE",poseId:Vr.id||Vr._id||Pn,poseName:Vr.name||Vr.title||"Pose",seconds:tn,restAfter:vn}),vl+=tn+vn,yn.length%6===0){var tr=_==="POWER"?20:30;yn.push({kind:"REST",seconds:tr}),vl+=tr}}return{intensity:_,durationMin:Zs,steps:yn}}function Ho(Bt,ta,Ka){var oi={freqPerWeek:Number((Ka==null?void 0:Ka.freqPerWeek)||3)||3,intensityCap:String((Ka==null?void 0:Ka.intensityCap)||"FLOW").toUpperCase()},io=String((Bt==null?void 0:Bt.goal)||(Bt==null?void 0:Bt.primaryGoal)||(Bt==null?void 0:Bt.tags)||"").toLowerCase(),_=String((ta==null?void 0:ta.intensity)||"").toUpperCase();return(io.includes("stress")||io.includes("recovery")||io.includes("sleep"))&&(oi.freqPerWeek=Math.min(7,Math.max(3,oi.freqPerWeek+1)),oi.intensityCap="GENTLE"),(io.includes("mobility")||io.includes("pain")||io.includes("posture"))&&(oi.freqPerWeek=Math.min(6,Math.max(2,oi.freqPerWeek)),oi.intensityCap="GENTLE"),(io.includes("performance")||io.includes("strength")||io.includes("hypertrophy"))&&(oi.freqPerWeek=Math.min(6,Math.max(2,oi.freqPerWeek)),oi.intensityCap="FLOW"),["GENTLE","FLOW","POWER"].includes(oi.intensityCap)||(oi.intensityCap="FLOW"),oi.freqPerWeek=Math.max(1,Math.min(14,oi.freqPerWeek)),oi}return{autoBuildNutritionWeek:is,suggestMacroOverride:xs,generateYogaFlow:ps,suggestYogaAssignment:Ho}}(),window.__FOF.PRO_ROLE_KEY=window.__FOF.PRO_ROLE_KEY||"fof.pro.roleType.v1";var qi="fof.pro.primaryRole.v1",co=(Mi,ts)=>{try{ts&&localStorage.setItem(qi,String(ts)),Mi&&localStorage.setItem(window.__FOF.PRO_ROLE_KEY,String(Mi));try{window.dispatchEvent(new CustomEvent("fof:pro_role_changed",{detail:{roleType:String(Mi||""),primaryRole:String(ts||"")}}))}catch(vs){}}catch(vs){}},Ys=()=>{try{return String(localStorage.getItem(qi)||"")}catch(Mi){return""}},bi=Mi=>String(Mi||"").toUpperCase()==="TRAINER"?"TRAINER":"SPECIALIST";if(wt==="Pro_RoleSelect")return React.createElement($n,{title:"Primary Expertise",step:1,total:8,...ai},React.createElement("div",{className:"grid gap-4"},[{id:"TRAINER",icon:"Dumbbell",label:"Trainer / Coach",desc:"Workout programming & tracking",color:"#3b82f6"},{id:"NUTRITION",icon:"Utensils",label:"Nutritionist",desc:"Meal planning & macros",color:"#10b981"},{id:"SMT",icon:"Activity",label:"SMT / Bodywork",desc:"Therapy & Recovery",color:"#f97316"},{id:"YOGA",icon:"Sun",label:"Yoga Instructor",desc:"Flows & Mindfulness",color:"#8b5cf6"},{id:"PHYSIO",icon:"Stethoscope",label:"Physiotherapist",desc:"Medical Rehab (Standalone)",color:"#ef4444"}].map(Mi=>React.createElement("button",{key:Mi.id,onClick:()=>{var ts=String(Mi.id||"").toUpperCase();co(bi(ts),ts);try{si("role",Mi.id)}catch(vs){}na(ts==="PHYSIO"?"PHYSIO_NOTICE":"HYBRID_CHECK")},className:"flex items-center gap-5 p-4 bg-midnight-950 border border-midnight-700 rounded-xl hover:border-brand transition-all group text-left"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-lg group-hover:scale-110 transition-transform"},React.createElement(ni,{name:Mi.icon,size:24,color:Mi.color})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},lo(Mi.label)),React.createElement("div",{className:"text-slate-400 text-sm"},lo(Mi.desc)))))));if(wt==="PHYSIO_NOTICE")return React.createElement($n,{title:"Medical Account Notice",step:1,total:8,...ai},React.createElement("div",{className:"bg-red-500/10 border border-red-500/50 p-6 rounded-xl mb-6"},React.createElement("div",{className:"flex items-center gap-3 mb-2 text-red-400"},React.createElement(ni,{name:"ShieldAlert",size:24}),React.createElement("h3",{className:"font-bold text-lg"},"Standalone Workspace")),React.createElement("p",{className:"text-sm text-slate-300"},"Physiotherapist accounts operate in a compliant, isolated medical environment. You cannot merge this account with general fitness roles later due to data privacy regulations.")),React.createElement("button",{onClick:()=>na("SO1"),className:"w-full py-4 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors"},"Acknowledge & Continue"));if(wt==="HYBRID_CHECK")return React.createElement($n,{title:"Hybrid Ecosystem",step:2,total:8,...ai},React.createElement("div",{className:"text-center mb-8"},React.createElement("div",{className:"w-20 h-20 bg-brand/10 rounded-full flex items-center justify-center mx-auto mb-4"},React.createElement(ni,{name:"Layers",size:40,className:"text-brand"})),React.createElement("h3",{className:"text-xl font-bold mb-2"},"Add Secondary Role?"),React.createElement("p",{className:"text-slate-400 text-sm"},"Do you want to merge features? (e.g. Trainer + Nutritionist)")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("button",{onClick:()=>{var Mi=Ys();co(bi(Mi),Mi),si("isHybrid",!1),na("T1")},className:"py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"No, Single Role"),React.createElement("button",{onClick:()=>{var Mi=Ys();co("HYBRID",Mi),si("isHybrid",!0),na("SEC_ROLE_SELECT")},className:"py-4 bg-brand text-white rounded-xl font-bold shadow-neon hover:bg-blue-600 transition-colors"},"Yes, Merge Access")));if(wt==="SEC_ROLE_SELECT")return React.createElement($n,{title:"Select Secondary Role",step:2,total:8,...ai},React.createElement("p",{className:"text-slate-400 mb-6 text-sm"},"Choose the role to merge into your dashboard."),React.createElement("div",{className:"grid gap-4"},[{id:"NUTRITION",icon:"Utensils",label:"Nutritionist",desc:"Meal planning & macros",color:"#10b981"},{id:"SMT",icon:"Activity",label:"SMT / Bodywork",desc:"Therapy & Recovery",color:"#f97316"},{id:"YOGA",icon:"Sun",label:"Yoga Instructor",desc:"Flows & Mindfulness",color:"#8b5cf6"}].map(Mi=>React.createElement("button",{key:Mi.id,onClick:()=>{var ts=Ys();co("HYBRID",ts),si("secondaryRole",Mi.id),na("T1")},className:"flex items-center gap-5 p-4 bg-midnight-950 border border-midnight-700 rounded-xl hover:border-brand transition-all group text-left"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-lg group-hover:scale-110 transition-transform"},React.createElement(ni,{name:Mi.icon,size:24,color:Mi.color})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},lo(Mi.label)),React.createElement("div",{className:"text-slate-400 text-sm"},lo(Mi.desc)))))));if(wt==="T1"||wt==="SO1")return React.createElement($n,{title:"Create Account",step:3,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Full Legal Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Email Address"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",type:"password",placeholder:"Password"}),React.createElement("button",{onClick:()=>na(wt==="SO1"?"SO_CREDENTIALS":"T1a"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-4 hover:bg-blue-600 transition-colors"},"Create Account")));if(wt==="SO_CREDENTIALS")return React.createElement($n,{title:"Verify Credentials",step:4,total:8,...ai},React.createElement("div",{className:"border-2 border-dashed border-midnight-700 p-10 rounded-xl text-center hover:bg-midnight-900 cursor-pointer mb-6 transition-colors"},React.createElement(ni,{name:"UploadCloud",size:32,className:"text-slate-400 mx-auto mb-2"}),React.createElement("h3",{className:"font-bold text-white"},"Upload Medical License"),React.createElement("p",{className:"text-sm text-slate-500"},"PDF or JPG (Max 5MB)")),React.createElement("button",{onClick:()=>na("SO2_VERIFY"),className:"w-full py-4 bg-brand-red text-white font-bold rounded-xl hover:bg-red-600 transition-colors"},"Submit for Review"));if(wt==="T1a")return React.createElement($n,{title:"Build Profile",step:4,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex gap-4"},React.createElement("div",{className:"w-24 h-24 bg-midnight-950 rounded-xl flex items-center justify-center border border-midnight-700 text-slate-500"},React.createElement(ni,{name:"Camera"})),React.createElement("div",{className:"flex-1 space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Headline (e.g. HIIT Specialist)"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Instagram Handle"}))),React.createElement("textarea",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white h-32 focus:outline-none focus:border-brand transition-colors",placeholder:"Bio & Specialties..."}),React.createElement("button",{onClick:()=>na("T2"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-2 hover:bg-blue-600 transition-colors"},"Save & Continue")));if(wt==="T2")return React.createElement($n,{title:"Select Plan",step:5,total:8,...ai},React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{onClick:()=>na("T3_PROVISION"),className:"bg-midnight-950 border border-midnight-700 p-6 rounded-xl hover:border-brand cursor-pointer transition-colors"},React.createElement("h3",{className:"font-bold text-xl"},"Pro"),React.createElement("div",{className:"text-3xl font-bold text-brand my-2"},"$29",React.createElement("span",{className:"text-sm text-slate-500"},"/mo")),React.createElement("p",{className:"text-xs text-slate-400"},"Up to 50 clients.")),React.createElement("div",{onClick:()=>na("T_WL_PROMPT"),className:"bg-midnight-800 border-2 border-brand p-6 rounded-xl cursor-pointer relative shadow-neon hover:scale-105 transition-transform"},React.createElement("div",{className:"absolute top-0 right-0 bg-brand text-white text-[10px] font-bold px-3 py-1 rounded-bl-lg"},"WHITE LABEL"),React.createElement("h3",{className:"font-bold text-xl"},"Studio"),React.createElement("div",{className:"text-3xl font-bold text-white my-2"},"$79",React.createElement("span",{className:"text-sm text-slate-400"},"/mo")),React.createElement("p",{className:"text-xs text-slate-300"},"Unlimited + White Label."))));if(wt==="T_WL_PROMPT")return React.createElement($n,{title:"Set up your branded app?",step:6,total:8,...ai},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-5 mb-6"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-brand/15 flex items-center justify-center"},React.createElement(ni,{name:"Sparkles",size:20,className:"text-brand"})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"White-Label Setup"),React.createElement("div",{className:"text-xs text-slate-400"},"Brand your app now, or come back later."))),React.createElement("div",{className:"text-sm text-slate-300 leading-relaxed"},"You can add your logo, colors, and domain from the White-Label Hub. We\u2019ll open it right after onboarding.")),React.createElement("div",{className:"grid gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{var Mi="FOF_TRAINER_ONBOARDING_3A_V1",ts=(()=>{try{return JSON.parse(localStorage.getItem(Mi)||"{}")||{}}catch(vs){return{}}})();ts.whiteLabelPromptAnswered=!0,ts.whiteLabelDone=!0,ts.postOnboardingNav="WHITE_LABEL_HUB",ts.postOnboardingReason="ONB_WL_PROMPT",ts.skipBulkImportOnce=!0,ts.lastStep="WL_PROMPT_BUILD",ts.updatedAt=Date.now(),localStorage.setItem(Mi,JSON.stringify(ts))}catch(Mi){}na("T3_PROVISION")},className:"w-full py-4 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Yes \u2014 build my app"),React.createElement("button",{type:"button",onClick:()=>{try{var Mi="FOF_TRAINER_ONBOARDING_3A_V1",ts=(()=>{try{return JSON.parse(localStorage.getItem(Mi)||"{}")||{}}catch(vs){return{}}})();ts.whiteLabelPromptAnswered=!0,ts.lastStep="WL_PROMPT_LATER",ts.updatedAt=Date.now(),localStorage.setItem(Mi,JSON.stringify(ts))}catch(Mi){}na("T3_PROVISION")},className:"w-full py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"Later")));if(wt==="T_WHITE_LABEL")return React.createElement($n,{title:"Brand Your App",step:6,total:8,...ai},React.createElement("div",{className:"space-y-6 mb-8"},React.createElement("div",null,React.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase"},"App Name"),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl mt-1 focus:outline-none focus:border-brand",defaultValue:"Apex Performance"})),React.createElement("div",null,React.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase"},"Theme"),React.createElement("div",{className:"flex gap-2 mt-1"},["#3b82f6","#ef4444","#10b981"].map(Mi=>React.createElement("div",{key:Mi,className:"w-8 h-8 rounded-full cursor-pointer hover:scale-110 transition-transform",style:{background:Mi}}))))),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:()=>na("T3_PROVISION"),className:"flex-1 py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"Skip"),React.createElement("button",{onClick:()=>na("T3_PROVISION"),className:"flex-1 py-4 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Launch")));var hs="FOF_IMPORT_DRAFT_V1",fo="FOF_IMPORT_JOBS_V1",go="FOF_IMPORT_REPORTS_V1",Ei=(Mi,ts)=>{try{var vs=localStorage.getItem(Mi);return vs?JSON.parse(vs):ts}catch(vs){return ts}},As=(Mi,ts)=>{try{localStorage.setItem(Mi,JSON.stringify(ts))}catch(vs){}},yo=()=>"bi_"+Math.random().toString(36).slice(2,10)+"_"+Date.now().toString(36),Ks=()=>Ei(hs,{consent:{ok:!1,ts:null},file:{name:"",size:0,headers:[],rowCount:0},mapping:{mode:"TEMPLATE",notes:""},options:{tag:"",group:"",program:"",sendInvites:!1},review:{ready:!1}}),Fs=Mi=>{var ts=Ks(),vs={...ts,...Mi,options:{...ts.options||{},...(Mi||{}).options||{}},consent:{...ts.consent||{},...(Mi||{}).consent||{}},file:{...ts.file||{},...(Mi||{}).file||{}}};return As(hs,vs),vs},Lo=({onNext:Mi})=>{var is;var[ts,vs]=React.useState(!!((is=Ks().consent)!=null&&is.ok)),[ko,$s]=React.useState(!1);return React.createElement($n,{title:"Bulk Import \u2014 Consent",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 text-emerald-400"},React.createElement(ni,{name:"ShieldCheck",size:18})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Client consent required"),React.createElement("div",{className:"text-xs text-slate-300 mt-1"},"Confirm you have permission to upload and process your clients' data. This is required before importing."))),React.createElement("label",{className:"mt-4 flex items-start gap-3 text-sm text-slate-200 cursor-pointer select-none"},React.createElement("input",{type:"checkbox",className:"mt-1",checked:ts,onChange:xs=>vs(xs.target.checked)}),React.createElement("span",null,"I confirm I have consent to upload and process this client data, and I\u2019m authorized to manage it."))),React.createElement("button",{type:"button",disabled:!ts||ko,onClick:()=>{$s(!0),Fs({consent:{ok:!0,ts:Date.now()}}),setTimeout(()=>{$s(!1),Mi("BI_UPLOAD")},250)},className:"w-full py-3 rounded-xl font-semibold transition-colors "+(!ts||ko?"bg-white/10 text-slate-400":"bg-brand text-white hover:bg-blue-600")},"Continue"),React.createElement("div",{className:"text-xs text-slate-500 text-center"},"You can cancel anytime. No data is sent outside this prototype.")))},Hn=({onNext:Mi})=>{var ta,Ka,oi;var[ts,vs]=React.useState(""),[ko,$s]=React.useState(((ta=Ks().file)==null?void 0:ta.name)||""),[is,xs]=React.useState(((Ka=Ks().file)==null?void 0:Ka.rowCount)||0),[ps,Ho]=React.useState(((oi=Ks().file)==null?void 0:oi.headers)||[]),Bt=io=>{var _=String(io||"").replace(/\r\n/g,`
`).split(`
`).filter(Zo=>Zo.trim().length);return _.length?{headers:_[0].split(",").map(Zo=>Zo.trim()).filter(Boolean),rowCount:Math.max(0,_.length-1)}:{headers:[],rowCount:0}};return React.createElement($n,{title:"Bulk Import \u2014 Upload CSV",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 text-sky-400"},React.createElement(ni,{name:"UploadCloud",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"font-semibold text-white"},"Upload your CSV"),React.createElement("div",{className:"text-xs text-slate-300 mt-1"},"We'll validate the file and take you to mapping next."),React.createElement("div",{className:"mt-4"},React.createElement("input",{type:"file",accept:".csv,text/csv",className:"block w-full text-xs text-slate-300",onChange:io=>{vs("");var _=io.target.files&&io.target.files[0];if(!_)return;$s(_.name||"");var Zs=new FileReader;Zs.onload=()=>{try{var Zo=Bt(String(Zs.result||""));if(!Zo.headers.length){vs("Invalid CSV: header row missing."),Fs({file:{name:_.name||"",size:_.size||0,headers:[],rowCount:0}}),Ho([]),xs(0);return}Fs({file:{name:_.name||"",size:_.size||0,headers:Zo.headers,rowCount:Zo.rowCount}}),Ho(Zo.headers),xs(Zo.rowCount)}catch(Zo){vs("Could not read this file. Please try another CSV.")}},Zs.onerror=()=>vs("Could not read this file. Please try another CSV."),Zs.readAsText(_)}})),ko||ps.length?React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs"},React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"File"),React.createElement("div",{className:"text-white font-semibold truncate"},ko||"\u2014")),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Rows"),React.createElement("div",{className:"text-white font-semibold"},is||0)),React.createElement("div",{className:"col-span-2 rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400 mb-1"},"Detected headers"),React.createElement("div",{className:"flex flex-wrap gap-2"},(ps||[]).slice(0,12).map((io,_)=>React.createElement("span",{key:_,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-slate-200"},io)),(ps||[]).length>12?React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-slate-400"},"+",(ps||[]).length-12," more"):null))):null,ts?React.createElement("div",{className:"mt-3 text-xs text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl p-3"},ts):null))),React.createElement("button",{type:"button",disabled:!ps.length,onClick:()=>Mi("BI_MAPPING"),className:"w-full py-3 rounded-xl font-semibold transition-colors "+(ps.length?"bg-brand text-white hover:bg-blue-600":"bg-white/10 text-slate-400")},"Continue to Mapping"),React.createElement("div",{className:"text-xs text-slate-500 text-center"},"Tip: include name + email columns for best results.")))},es=({onNext:Mi})=>{var Ka,oi,io,_;var ts=Ks(),[vs,ko]=React.useState(((Ka=ts.options)==null?void 0:Ka.tag)||""),[$s,is]=React.useState(((oi=ts.options)==null?void 0:oi.group)||""),[xs,ps]=React.useState(((io=ts.options)==null?void 0:io.program)||""),[Ho,Bt]=React.useState(!!((_=ts.options)!=null&&_.sendInvites)),ta=()=>{Fs({options:{tag:vs,group:$s,program:xs,sendInvites:Ho}}),Mi("BI_REVIEW")};return React.createElement($n,{title:"Bulk Import \u2014 Options",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"font-semibold text-white mb-1"},"Apply defaults to imported clients"),React.createElement("div",{className:"text-xs text-slate-300"},"These are optional and can be changed later."),React.createElement("div",{className:"mt-4 grid gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-slate-400 mb-1"},"Tag"),React.createElement("input",{value:vs,onChange:Zs=>ko(Zs.target.value),className:"w-full bg-midnight-900 border border-midnight-700 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-brand",placeholder:"e.g. New Lead, VIP, Trial"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-slate-400 mb-1"},"Group"),React.createElement("input",{value:$s,onChange:Zs=>is(Zs.target.value),className:"w-full bg-midnight-900 border border-midnight-700 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-brand",placeholder:"e.g. Dubai AM Bootcamp"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-slate-400 mb-1"},"Default Program"),React.createElement("input",{value:xs,onChange:Zs=>ps(Zs.target.value),className:"w-full bg-midnight-900 border border-midnight-700 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-brand",placeholder:"e.g. 4-Week Fat Loss"})),React.createElement("label",{className:"flex items-start gap-3 text-sm text-slate-200 cursor-pointer select-none"},React.createElement("input",{type:"checkbox",className:"mt-1",checked:Ho,onChange:Zs=>Bt(Zs.target.checked)}),React.createElement("span",null,"Send invites to clients after import",React.createElement("div",{className:"text-xs text-slate-400 mt-1"},"Prototype behavior only. In production this would email/SMS invites."))))),React.createElement("button",{onClick:ta,className:"w-full py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Review Import")))},Ai=({onNext:Mi})=>{var ts=Ks(),vs=ts.file||{},ko=ts.options||{};return React.createElement($n,{title:"Bulk Import \u2014 Review",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-semibold text-white"},"Ready to import"),React.createElement("div",{className:"text-xs text-slate-400"},vs.rowCount||0," rows")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs"},React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"File"),React.createElement("div",{className:"text-white font-semibold truncate"},vs.name||"\u2014")),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Send invites"),React.createElement("div",{className:"text-white font-semibold"},ko.sendInvites?"Yes":"No")),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Tag"),React.createElement("div",{className:"text-white font-semibold truncate"},ko.tag||"\u2014")),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Group"),React.createElement("div",{className:"text-white font-semibold truncate"},ko.group||"\u2014")),React.createElement("div",{className:"col-span-2 rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Default program"),React.createElement("div",{className:"text-white font-semibold truncate"},ko.program||"\u2014")))),React.createElement("button",{type:"button",onClick:()=>{var $s=Ei(fo,[]),xs={id:yo(),createdAt:Date.now(),status:"running",rows:Number(vs.rowCount||0),fileName:vs.name||"CSV",options:ko};As(fo,[xs,...$s||[]].slice(0,25)),Fs({review:{ready:!0}}),Mi("BI_PROCESS")},className:"w-full py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Start Import"),React.createElement("div",{className:"text-xs text-slate-500 text-center"},"This prototype simulates processing and will generate a sample results report.")))},no=({onNext:Mi})=>{var ts=Ei(fo,[]),vs=Ei(go,{}),ko=(ts||[])[0]||null,$s=ko&&vs[ko.id]||null;return React.createElement($n,{title:"Bulk Import \u2014 Results",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:$s&&$s.partial?"text-amber-400":"text-emerald-400"},React.createElement(ni,{name:$s&&$s.partial?"AlertTriangle":"CheckCircle2",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"font-semibold text-white"},$s?$s.partial?"Import completed (partial)":"Import completed":"Import status"),React.createElement("div",{className:"text-xs text-slate-300 mt-1"},ko?`${ko.rows||0} rows \u2022 ${ko.fileName||"CSV"}`:"No recent import found."))),$s?React.createElement("div",{className:"mt-4 grid grid-cols-3 gap-2 text-xs"},React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Imported"),React.createElement("div",{className:"text-white font-semibold"},$s.imported||0)),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Skipped"),React.createElement("div",{className:"text-white font-semibold"},$s.skipped||0)),React.createElement("div",{className:"rounded-xl bg-midnight-900 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400"},"Errors"),React.createElement("div",{className:"text-white font-semibold"},($s.errors||[]).length))):null,$s&&($s.errors||[]).length?React.createElement("div",{className:"mt-4 rounded-xl bg-amber-500/10 border border-amber-500/20 p-3 text-xs text-slate-200"},React.createElement("div",{className:"font-semibold mb-2"},"Error report (preview)"),React.createElement("div",{className:"space-y-2 max-h-40 overflow-auto pr-1"},($s.errors||[]).slice(0,8).map((is,xs)=>React.createElement("div",{key:xs,className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-slate-200"},"Row ",is.row),React.createElement("div",{className:"text-slate-300 flex-1"},is.reason)))),React.createElement("div",{className:"text-slate-400 mt-2"},"Download link will be implemented in production. (Prototype stores this report in localStorage.)")):null),React.createElement("button",{type:"button",onClick:()=>Mi("T_WL_PROMPT"),className:"w-full py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Finish Setup & Continue")))},Co=({onNext:Mi})=>{var[ts,vs]=React.useState(12);return React.useEffect(()=>{var ko=!0;var is=setInterval(()=>{ko&&vs(ps=>Math.min(100,ps+(ps<80?12:6)))},350),xs=setTimeout(()=>{if(!ko)return;clearInterval(is),vs(100);var ps=Ei(fo,[]),Ho=(ps||[])[0]||null;if(Ho){var Bt=Number(Ho.rows||0),ta=Bt>0&&Bt%3===0,Ka=ta?Math.max(0,Bt-2):Bt,oi=ta?2:0,io=ta?[{row:2,reason:"Duplicate email \u2014 client already exists."},{row:7,reason:"Missing required field: full_name."}]:[],_=Ei(go,{});_[Ho.id]={partial:ta,imported:Ka,skipped:oi,errors:io,completedAt:Date.now()},As(go,_);var Zs=[{...Ho,status:"done",completedAt:Date.now(),partial:ta},...(ps||[]).slice(1)];As(fo,Zs)}setTimeout(()=>Mi("BI_RESULTS"),250)},1800);return()=>{ko=!1,clearInterval(is),clearTimeout(xs)}},[]),React.createElement($n,{title:"Bulk Import \u2014 Processing",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/70 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-semibold text-white"},"Import running"),React.createElement("div",{className:"text-xs text-slate-400"},ts,"%")),React.createElement("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-brand",style:{width:`${ts}%`}})),React.createElement("div",{className:"text-xs text-slate-300 mt-3"},"You can leave this screen \u2014 import will finish in the background (simulated).")),React.createElement("button",{type:"button",onClick:()=>Mi("BI_RESULTS"),className:"w-full py-3 rounded-xl bg-white/10 text-white font-semibold hover:bg-white/15 transition-colors"},"View Results")))};if(wt==="BULK_IMPORT"){try{var Mi=localStorage.getItem("FOF_TRAINER_ONBOARDING_3A_V1"),ts=Mi?JSON.parse(Mi):null;if(ts&&ts.skipBulkImportOnce)return ts.skipBulkImportOnce=!1,ts.lastStep="SKIP_BULK_IMPORT_CONSUMED",ts.updatedAt=Date.now(),localStorage.setItem("FOF_TRAINER_ONBOARDING_3A_V1",JSON.stringify(ts)),typeof na=="function"&&na(),null}catch(Mi){}return React.createElement($n,{title:"Import Clients",step:7,total:8,...ai},React.createElement("div",{className:"grid gap-4 mb-6"},React.createElement("button",{type:"button",onClick:()=>na("BI_CONSENT"),className:"flex items-center gap-4 p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all group"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-full text-brand group-hover:bg-brand group-hover:text-white transition-colors"},React.createElement(ni,{name:"FileText",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white"},"Upload CSV & Bulk Import"),React.createElement("p",{className:"text-sm text-slate-300"},"Bring in your existing clients and historical data. Map columns and validate before import."))),React.createElement("button",{type:"button",onClick:()=>na("BI_PROCESS"),className:"flex items-center gap-4 p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all group"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-full text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white transition-colors"},React.createElement(ni,{name:"Users",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white"},"Quick Start with Templates"),React.createElement("p",{className:"text-sm text-slate-300"},"Use smart defaults and starter templates while a deeper import runs in the background.")))),React.createElement("div",{className:"text-xs text-slate-400 text-center mt-4"},"You can always return to Bulk Import later from the System & Data area."))}return wt==="BI_CONSENT"?React.createElement(Lo,{onNext:na}):wt==="BI_UPLOAD"?React.createElement(Hn,{onNext:na}):wt==="BI_OPTIONS"?React.createElement(es,{onNext:na}):wt==="BI_REVIEW"?React.createElement(Ai,{onNext:na}):wt==="BI_RESULTS"?React.createElement(no,{onNext:na}):wt==="BI_MAPPING"?React.createElement($n,{title:"Map Your CSV Columns",step:7,total:8,...ai},React.createElement("div",{className:"space-y-4"},React.createElement("p",{className:"text-sm text-slate-300"},"Match the columns from your CSV file to FlowOFIT client fields. This is a one-time setup that you can reuse later."),React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/80 p-4"},React.createElement("div",{className:"grid grid-cols-2 text-xs text-slate-400 mb-2"},React.createElement("div",null,"CSV Column"),React.createElement("div",null,"Mapped To")),React.createElement("div",{className:"space-y-2 text-xs"},React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"full_name"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Client Name")),React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"email_address"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Email")),React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"phone"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Phone (Optional)"))),React.createElement("div",{className:"mt-3 text-[11px] text-slate-500"},"In the real system this table will be fully editable with dropdowns and validation.")),React.createElement("div",{className:"flex justify-between items-center text-[11px] text-slate-500"},React.createElement("span",null,"Detected rows: 120 \u2022 Duplicates will be flagged automatically."),React.createElement("button",{type:"button",className:"underline hover:text-brand",onClick:()=>Ii&&Ii()},"Back")),React.createElement("div",{className:"flex gap-3 mt-4"},React.createElement("button",{type:"button",onClick:()=>na("BI_OPTIONS"),className:"flex-1 py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Confirm Mapping & Continue"),React.createElement("button",{type:"button",onClick:()=>na("T_WL_PROMPT"),className:"px-4 py-3 rounded-xl border border-slate-600 text-xs text-slate-300 hover:bg-midnight-800 transition-colors"},"Skip Import For Now")))):wt==="BI_PROCESS"?React.createElement(Co,{onNext:na}):React.createElement("div",{className:"text-white p-10"},"Unknown Pro Step: ",wt)};var eu=(()=>{window.__FOF_MEM=window.__FOF_MEM||{};var wt=(i,s=null)=>{try{var x=localStorage.getItem(i);if(x==null)return s;var S=JSON.parse(x);return S==null?s:S}catch(x){return Object.prototype.hasOwnProperty.call(window.__FOF_MEM,i)?window.__FOF_MEM[i]:s}},na=(i,s)=>{try{return localStorage.setItem(i,JSON.stringify(s)),!0}catch(x){return window.__FOF_MEM[i]=s,!1}},si=i=>{try{localStorage.removeItem(i)}catch(s){}try{delete window.__FOF_MEM[i]}catch(s){}};try{typeof window.clientPlanQueue=="undefined"&&(window.clientPlanQueue=[])}catch(i){}var Ii=typeof window!="undefined"&&window.clientPlanQueue?window.clientPlanQueue:[];var Ta=(i,s)=>wt(i,s),ti=(i,s)=>na(i,s),ai=(i,s={})=>{try{var x=typeof Ta=="function"?Ta(i,JSON.stringify(s)):localStorage.getItem(i)||JSON.stringify(s),S=JSON.parse(x);return S&&typeof S=="object"?S:s}catch(x){return s}},qi=(i,s)=>{try{return typeof ti=="function"?ti(i,JSON.stringify(s)):localStorage.setItem(i,JSON.stringify(s)),!0}catch(x){return!1}},co=i=>String((i==null?void 0:i.id)||(i==null?void 0:i.clientId)||(i==null?void 0:i.email)||(i==null?void 0:i.name)||""),Ys=({onBack:i,onCreated:s})=>{var Qo,zo,ur,Tr,Oo,Ls,Go,vo,xo,cn;var x=[{k:"BASICS",label:"Basics"},{k:"CONTACT",label:"Contact & address"},{k:"COACHING",label:"Coaching setup"},{k:"BILLING",label:"Package & billing"},{k:"INTAKE",label:"Intake & goals"},{k:"BASELINE",label:"Baseline metrics"},{k:"DOCS",label:"Documents"},{k:"CONSENT",label:"Consents"},{k:"REVIEW",label:"Review & create"}],[S,u]=React.useState(0),[$,tt]=React.useState(!1),[ue,Ie]=React.useState(null),[fe,B]=React.useState(0),X="fof.tdep.client_launch_checklist.v1",ne=wa=>{var ho=ai(X),Xi=ho&&ho[wa];return Xi||{book:!1,invite:!1,contract:!1,invoice:!1}},W=(wa,ho)=>{var Xi=ai(X),gs=Xi&&Xi[wa]?Xi[wa]:{book:!1,invite:!1,contract:!1,invoice:!1};Xi[wa]={...gs,...ho,updatedAt:Date.now()},qi(X,Xi),B(Do=>Do+1)},[J,z]=React.useState(""),[H,Ht]=React.useState(""),[Nt,U]=React.useState(""),[Q,w]=React.useState("Active"),[L,ut]=React.useState("PAID"),[ot,ht]=React.useState("VIP, Strength"),[ba,et]=React.useState("Organic"),[At,ma]=React.useState(""),[Je,Oa]=React.useState(""),[He,Ca]=React.useState("UAE"),[ha,K]=React.useState("Dubai"),[aa,Mt]=React.useState(""),[la,xa]=React.useState(""),[ei,di]=React.useState(""),[Ua,sa]=React.useState("Asia/Dubai"),[vt,Ge]=React.useState("English"),[$e,Xa]=React.useState(""),[mi,xi]=React.useState(""),[rs,ct]=React.useState("You"),[zt,Wi]=React.useState(()=>{try{return new Date().toISOString().slice(0,10)}catch(wa){return""}}),[Wa,Hs]=React.useState("HYBRID"),[ks,so]=React.useState("2x / week"),[uo,an]=React.useState("Mon/Wed/Fri AM"),[Qi,ui]=React.useState("Studio"),[vi,hi]=React.useState(!0),[ls,Bi]=React.useState("12-week Strength Coaching"),[Pa,Ga]=React.useState("2200"),[ca,La]=React.useState("AED"),[fi,ms]=React.useState("MONTHLY"),[ss,ds]=React.useState("12"),[Xs,Wo]=React.useState(!1),[Po,Eo]=React.useState("CARD"),[Oi,jo]=React.useState(""),[to,Rn]=React.useState(""),[Io,bs]=React.useState("Lose fat"),[Ao,sn]=React.useState("Beginner"),[Li,po]=React.useState("Mon/Wed/Fri AM"),[Tn,cr]=React.useState("Gym"),[_r,$o]=React.useState(""),[Vo,xn]=React.useState(""),[Xn,Fi]=React.useState(!0),[ws,mo]=React.useState(!1),[fs,Mo]=React.useState(!1),[Di,dn]=React.useState(!1),[An,Hr]=React.useState(!0),[Wr,On]=React.useState([]),[zn,xl]=React.useState("PAR_Q"),[qr,hl]=React.useState("78"),[Sn,Be]=React.useState("175"),[Ia,q]=React.useState("18"),[Ea,Ts]=React.useState("62"),[bo,Fo]=React.useState("120/80"),[Ss,Cn]=React.useState("68"),zs=(wa,ho="DOCUMENT")=>{try{var Xi=Array.from(wa||[]),gs=[...Wr];Xi.forEach(Do=>{gs.unshift({ts:Date.now(),type:ho,title:Do.name,fileName:Do.name,mime:Do.type||"application/octet-stream",size:Do.size||0})}),On(gs)}catch(Xi){}},So=wa=>{var ho=!!J.trim(),Xi=!!At.trim()||!!Je.trim(),gs=!!ls.trim()&&!!String(Pa||"").trim(),Do=!!An;return wa==="BASICS"?ho:wa==="CONTACT"?Xi:wa==="BILLING"?gs:wa==="CONSENT"?Do:wa==="REVIEW"?ho&&Xi&&gs&&Do:!0},mn=So("REVIEW")&&!$,Yi=()=>{try{tt(!0);var wa={id:`c_${Math.random().toString(16).slice(2)}_${Date.now()}`,name:J.trim()||"Client",email:At.trim(),phone:Je.trim(),tier:L,status:Q,tags:String(ot||"").split(",").map(Ln=>Ln.trim()).filter(Boolean).slice(0,12),source:ba,goal:Io,createdAt:new Date().toISOString(),city:ha,country:He},ho="fof_tdep_clients_v1";var Xi=[];try{var Ln=typeof Ta=="function"?Ta(ho,"[]"):localStorage.getItem(ho)||"[]",Pr=JSON.parse(Ln);Xi=Array.isArray(Pr)?Pr:[]}catch(Ln){Xi=[]}var gs=[wa,...Xi].slice(0,500);try{typeof ti=="function"?ti(ho,JSON.stringify(gs)):localStorage.setItem(ho,JSON.stringify(gs))}catch(Ln){}var Do=co(wa),ir="fof.tdep.client_docs.v1",Dr="fof.tdep.client_metrics.v1",rr="fof.tdep.client_notes.v1",mr=ai(ir,{});mr[Do]=(mr[Do]||[]).concat(Wr.map(Ln=>({...Ln,id:`d_${Math.random().toString(16).slice(2)}`,uploadedAt:new Date().toISOString()}))).slice(-60),qi(ir,mr);var kr=ai(Dr,{});kr[Do]={weightKg:Number(qr||0)||null,heightCm:Number(Sn||0)||null,bodyFatPct:Number(Ia||0)||null,restingHR:Number(Ea||0)||null,bp:String(bo||""),readiness:Number(Ss||0)||null,updatedAt:new Date().toISOString()},qi(Dr,kr);var hn=ai(rr,{}),Un=hn[Do]||[];String(Vo||"").trim()&&Un.unshift({id:`n_${Math.random().toString(16).slice(2)}`,ts:new Date().toISOString(),body:String(Vo).trim(),kind:"INTAKE"}),hn[Do]=Un.slice(0,120),qi(rr,hn);try{var Ln="fof.tdep.client_billing.v1",Pr="fof.tdep.client_invoices.v1",Cl="fof.calendar.draft.v1",ld=(or,rn)=>{var sr=new Date(or);return sr.setDate(sr.getDate()+rn),sr},dd=(or,rn)=>{var sr=new Date(or);return sr.setMonth(sr.getMonth()+rn),sr};var Yr=String(Oi||"").trim();if(!Yr){var or=zt?new Date(zt+"T00:00:00"):new Date;fi==="WEEKLY"?Yr=ld(or,7).toISOString().slice(0,10):fi==="MONTHLY"?Yr=dd(or,1).toISOString().slice(0,10):Yr=or.toISOString().slice(0,10)}var Qn=ai(Ln,{});Qn[Do]={packageName:String(ls||""),price:Number(Pa||0)||0,currency:String(ca||"AED"),billingCycle:String(fi||"MONTHLY"),sessionCredits:Number(ss||0)||null,autoPay:!!Xs,paymentMethod:String(Po||"CARD"),startDate:String(zt||""),nextInvoiceDate:Yr,cadence:String(ks||""),delivery:String(Wa||"HYBRID"),location:String(Qi||""),updatedAt:new Date().toISOString()},qi(Ln,Qn);var Kr=ai(Pr,{}),Il=Kr[Do]||[];Il.unshift({id:`inv_${Math.random().toString(16).slice(2)}_${Date.now()}`,dueDate:Yr,amount:Number(Pa||0)||0,currency:String(ca||"AED"),status:Number(Pa||0)?"DUE":"DRAFT",label:String(ls||"Package"),createdAt:new Date().toISOString()}),Kr[Do]=Il.slice(0,50),qi(Pr,Kr);var $r={v:1,source:"ADD_CLIENT",clientId:Do,clientName:wa.name,sessionType:"PT Session",delivery:String(Wa||"HYBRID"),location:String(Qi||"Studio"),durationMin:60,preferredTimes:String(uo||""),cadence:String(ks||""),createdAt:new Date().toISOString()};try{localStorage.setItem(Cl,JSON.stringify($r))}catch(or){}}catch(Ln){}if(String(to||"").trim()){var Ln=ai(rr,{}),Pr=Ln[Do]||[];Pr.unshift({id:`n_${Math.random().toString(16).slice(2)}`,ts:new Date().toISOString(),body:`Billing: ${to}`,kind:"BILLING"}),Ln[Do]=Pr.slice(0,120),qi(rr,Ln)}try{Ie({cid:Do,name:J||"Client",email:String(At||""),phone:String(Je||"")})}catch(Ln){}try{s&&s(wa)}catch(Ln){}try{window.dispatchEvent(new Event("fof:clients_refresh"))}catch(Ln){}}finally{try{tt(!1)}catch(wa){}}},js=({idx:wa,s:ho})=>{var Xi=wa===S,gs=So(ho.k);return React.createElement("button",{type:"button",onClick:()=>u(wa),className:"px-3 py-2 rounded-xl border text-[11px] font-extrabold whitespace-nowrap transition "+(Xi?"border-cyan-400/35 bg-cyan-400/10 text-cyan-100":gs?"border-emerald-400/25 bg-emerald-500/5 text-emerald-100/90 hover:bg-emerald-500/10":"border-white/10 bg-white/[0.04] text-white/70 hover:bg-white/[0.07]"),title:ho.label},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",null,ho.label),gs&&React.createElement("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})))};if(ue){var wa=ue.cid,ho=ue.name||"Client",Xi=ue.email||"",gs=ne(wa),Do=[gs.book,gs.invite,gs.contract].filter(Boolean).length,ir=3,Dr=Math.round(Do/ir*100),rr=hn=>{try{window.location.hash=hn}catch(Un){}},mr=()=>{try{var hn=new Date,Un={cid:wa,clientName:ho,createdAt:hn.toISOString(),currency:String(ca||"AED"),amount:Number(Pa||0)||0,description:ls?`${ls} \u2014 First invoice`:"First invoice",dueDate:new Date(hn.getFullYear(),hn.getMonth(),hn.getDate()+7).toISOString().slice(0,10),status:"DRAFT"};localStorage.setItem("fof.invoice.draft.v1",JSON.stringify(Un))}catch(hn){}},kr=()=>{try{var hn="fof.tdep.client_invites.v1",Un=ai(hn,{});Un[wa]={cid:wa,email:Xi,sentAt:new Date().toISOString(),via:"mailto"},qi(hn,Un)}catch(hn){}};return React.createElement("div",{className:"p-4 md:p-6"},React.createElement("div",{className:"mx-auto max-w-5xl"},React.createElement("div",{className:"rounded-3xl border border-emerald-400/15 bg-gradient-to-b from-emerald-500/10 to-black/20 p-5 md:p-6"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-emerald-200/80"},"Client created"),React.createElement("div",{className:"mt-1 text-2xl md:text-3xl font-extrabold text-white"},ho),React.createElement("div",{className:"mt-1 text-sm text-white/70"},Xi||"No email added yet")),React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Ie(null)}catch(hn){}try{i&&i()}catch(hn){}},className:"rounded-2xl border border-white/12 bg-white/[0.04] px-4 py-2 text-sm font-semibold text-white/85 hover:bg-white/[0.07]"},"Back to Clients"),React.createElement("button",{type:"button",onClick:()=>{try{Ie(null)}catch(hn){}try{i&&i()}catch(hn){}},className:"rounded-2xl border border-white/10 bg-black/30 px-4 py-2 text-sm font-semibold text-white/70 hover:bg-black/40"},"Done"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>{rr("#/calendar"),W(wa,{book:!0})},className:"rounded-3xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 p-4 text-left"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-emerald-200/80"},"Recommended"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},"Book first session"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Opens Calendar with this client prefilled.")),React.createElement("button",{type:"button",onClick:()=>{if(kr(),W(wa,{invite:!0}),Xi)try{var hn=encodeURIComponent("Welcome to FlowOFit"),Un=encodeURIComponent(`Hi ${ho},

Welcome! Please complete your onboarding and book your first session.

\u2014 Your Coach`);window.location.href=`mailto:${Xi}?subject=${hn}&body=${Un}`}catch(hn){}},className:"rounded-3xl border border-white/12 bg-white/[0.04] hover:bg-white/[0.07] p-4 text-left"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Invite"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},"Send invite"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Creates an invite log + opens mailto.")),React.createElement("button",{type:"button",onClick:()=>{mr(),W(wa,{invoice:!0}),rr("#/finance")},className:"rounded-3xl border border-white/12 bg-white/[0.04] hover:bg-white/[0.07] p-4 text-left"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Billing"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},"Add first payment / invoice"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Seeds an invoice draft from the package price.")),React.createElement("button",{type:"button",onClick:()=>{try{localStorage.setItem("fof.client.docs.focus.v1",JSON.stringify({cid:wa,tab:"DOCUMENTS",from:"ADD_CLIENT_POST"}))}catch(hn){}W(wa,{contract:!0}),rr("#/clients");try{i&&i()}catch(hn){}},className:"rounded-3xl border border-white/12 bg-white/[0.04] hover:bg-white/[0.07] p-4 text-left"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Documents"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},"Upload contract"),React.createElement("div",{className:"mt-1 text-sm text-white/70"},"Jumps back to Client view with Documents focus."))),React.createElement("div",{className:"mt-5 rounded-2xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Launch checklist"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Complete the 3 core steps to fully activate this client.")),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-xs font-semibold text-white/70"},Do,"/",ir," done"),React.createElement("div",{className:"rounded-full border border-white/12 bg-black/30 px-2 py-1 text-[11px] font-mono text-white/70"},Dr,"%"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Book first session"),React.createElement("div",{className:"text-sm "+(gs.book?"text-emerald-300":"text-white/45")},gs.book?"\u2713":"\u25CB")),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Schedule the first session (and recurring if needed).")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Send invite"),React.createElement("div",{className:"text-sm "+(gs.invite?"text-emerald-300":"text-white/45")},gs.invite?"\u2713":"\u25CB")),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Send app invite / welcome message.")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Upload contract"),React.createElement("div",{className:"text-sm "+(gs.contract?"text-emerald-300":"text-white/45")},gs.contract?"\u2713":"\u25CB")),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Attach waiver / agreement and confirm consent."))),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/20 p-3 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white/90"},"Optional: create first invoice"),React.createElement("div",{className:"text-xs text-white/55 mt-1"},"Useful if you track billing in-app.")),React.createElement("div",{className:"text-sm "+(gs.invoice?"text-emerald-300":"text-white/45")},gs.invoice?"\u2713":"\u25CB"))))))}return React.createElement("div",{className:"p-4 md:p-6"},React.createElement("div",{className:"max-w-6xl mx-auto"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Clients"),React.createElement("div",{className:"text-white font-extrabold text-[20px]"},"Add client"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Guided intake (CRM-grade). Tabs jump across sections.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:i,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Back"),React.createElement("button",{type:"button",disabled:!mn,onClick:Yi,className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(mn?"border-emerald-400/30 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100":"border-white/10 bg-white/5 text-white/35")},$?"Creating\u2026":"Create client"))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-black/20 overflow-hidden"},React.createElement("div",{className:"sticky top-0 z-20 bg-black/55 backdrop-blur-xl border-b border-white/10"},React.createElement("div",{className:"px-3 py-3 overflow-x-auto"},React.createElement("div",{className:"grid grid-rows-2 grid-flow-col auto-cols-max gap-2 w-max"},x.map((wa,ho)=>React.createElement(js,{key:wa.k,idx:ho,s:wa}))))),React.createElement("div",{className:"p-4 md:p-6"},((Qo=x[S])==null?void 0:Qo.k)==="BASICS"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Full name"),React.createElement("input",{value:J,onChange:wa=>z(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Client name"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Status"),React.createElement("select",{value:Q,onChange:wa=>w(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["Active","Lead","Paused","Archived"].map(wa=>React.createElement("option",{key:wa,value:wa},wa)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Gender"),React.createElement("select",{value:H,onChange:wa=>Ht(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["","Male","Female","Other"].map(wa=>React.createElement("option",{key:wa,value:wa},wa||"\u2014")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"DOB"),React.createElement("input",{type:"date",value:Nt,onChange:wa=>U(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Tier"),React.createElement("select",{value:L,onChange:wa=>ut(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["FREE","PAID","PRO"].map(wa=>React.createElement("option",{key:wa,value:wa},wa)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Tags (comma separated)"),React.createElement("input",{value:ot,onChange:wa=>ht(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"VIP, Strength"}))),((zo=x[S])==null?void 0:zo.k)==="CONTACT"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Email"),React.createElement("input",{value:At,onChange:wa=>ma(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"name@email.com"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Phone"),React.createElement("input",{value:Je,onChange:wa=>Oa(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"+971 \u2026"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Country"),React.createElement("input",{value:He,onChange:wa=>Ca(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"City"),React.createElement("input",{value:ha,onChange:wa=>K(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Address"),React.createElement("input",{value:aa,onChange:wa=>Mt(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Street, building"}),React.createElement("div",{className:"grid md:grid-cols-3 gap-3 mt-3"},React.createElement("input",{value:la,onChange:wa=>xa(wa.target.value),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Apt / unit"}),React.createElement("input",{value:ei,onChange:wa=>di(wa.target.value),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Postal"}),React.createElement("input",{value:Ua,onChange:wa=>sa(wa.target.value),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Timezone"})))),((ur=x[S])==null?void 0:ur.k)==="COACHING"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Coach owner"),React.createElement("input",{value:rs,onChange:wa=>ct(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Start date"),React.createElement("input",{type:"date",value:zt,onChange:wa=>Wi(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Delivery"),React.createElement("select",{value:Wa,onChange:wa=>Hs(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["IN_PERSON","ONLINE","HYBRID"].map(wa=>React.createElement("option",{key:wa,value:wa},wa.replace("_"," "))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Session cadence"),React.createElement("input",{value:ks,onChange:wa=>so(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Preferred times"),React.createElement("input",{value:uo,onChange:wa=>an(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Location"),React.createElement("input",{value:Qi,onChange:wa=>ui(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:vi,onChange:wa=>hi(wa.target.checked)}),"Send invite email (demo)"))),((Tr=x[S])==null?void 0:Tr.k)==="BILLING"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Package name"),React.createElement("input",{value:ls,onChange:wa=>Bi(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Price"),React.createElement("input",{value:Pa,onChange:wa=>Ga(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Currency"),React.createElement("select",{value:ca,onChange:wa=>La(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["AED","USD","EUR","GBP"].map(wa=>React.createElement("option",{key:wa,value:wa},wa)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Billing cycle"),React.createElement("select",{value:fi,onChange:wa=>ms(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["ONE_OFF","WEEKLY","MONTHLY"].map(wa=>React.createElement("option",{key:wa,value:wa},wa.replace("_"," "))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Session credits"),React.createElement("input",{value:ss,onChange:wa=>ds(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Payment method"),React.createElement("select",{value:Po,onChange:wa=>Eo(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["CARD","BANK","CASH"].map(wa=>React.createElement("option",{key:wa,value:wa},wa))),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:Xs,onChange:wa=>Wo(wa.target.checked)}),"Auto-pay")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Billing notes"),React.createElement("textarea",{value:to,onChange:wa=>Rn(wa.target.value),className:"mt-2 w-full min-h-[90px] px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85",placeholder:"Invoice rules, discounts, payment history\u2026"}))),((Oo=x[S])==null?void 0:Oo.k)==="INTAKE"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Primary goal"),React.createElement("input",{value:Io,onChange:wa=>bs(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Training age"),React.createElement("select",{value:Ao,onChange:wa=>sn(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["Beginner","Intermediate","Advanced"].map(wa=>React.createElement("option",{key:wa,value:wa},wa)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Availability"),React.createElement("input",{value:Li,onChange:wa=>po(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Equipment"),React.createElement("input",{value:Tn,onChange:wa=>cr(wa.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Limitations / injuries"),React.createElement("textarea",{value:_r,onChange:wa=>$o(wa.target.value),className:"mt-2 w-full min-h-[90px] px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Coach notes"),React.createElement("textarea",{value:Vo,onChange:wa=>xn(wa.target.value),className:"mt-2 w-full min-h-[90px] px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}))),((Ls=x[S])==null?void 0:Ls.k)==="BASELINE"&&React.createElement("div",{className:"grid md:grid-cols-3 gap-4"},[["Weight (kg)",qr,hl],["Height (cm)",Sn,Be],["Body fat (%)",Ia,q],["Resting HR",Ea,Ts],["BP",bo,Fo],["Readiness",Ss,Cn]].map(([wa,ho,Xi],gs)=>React.createElement("div",{key:gs,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},wa),React.createElement("input",{value:ho,onChange:Do=>Xi(Do.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})))),((Go=x[S])==null?void 0:Go.k)==="DOCS"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Upload documents (metadata)"),React.createElement("div",{className:"text-[12px] text-white/55"},"PAR-Q, waiver, ID, medical clearance\u2026")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("select",{value:zn,onChange:wa=>xl(wa.target.value),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},[["PAR_Q","PAR-Q"],["WAIVER","Liability waiver"],["ID","ID / passport"],["MEDICAL","Medical clearance"],["OTHER","Other"]].map(([wa,ho])=>React.createElement("option",{key:wa,value:wa},ho))),React.createElement("label",{className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80 cursor-pointer"},React.createElement("input",{type:"file",multiple:!0,className:"hidden",onChange:wa=>zs(wa.target.files,zn)}),"Add files"))),React.createElement("div",{className:"mt-3 space-y-2"},(Wr||[]).length?Wr.map((wa,ho)=>React.createElement("div",{key:ho,className:"rounded-xl border border-white/10 bg-black/20 p-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white/85 truncate"},wa.title),React.createElement("div",{className:"text-[11px] text-white/45"},wa.type," \u2022 ",wa.size||0," bytes")),React.createElement("button",{type:"button",onClick:()=>On(Xi=>Xi.filter((gs,Do)=>Do!==ho)),className:"px-2.5 py-1.5 rounded-xl border border-red-400/25 bg-red-500/10 hover:bg-red-500/15 text-[11px] font-mono uppercase tracking-widest text-red-100"},"Remove"))):React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No documents staged.")))),((vo=x[S])==null?void 0:vo.k)==="CONSENT"&&React.createElement("div",{className:"space-y-3"},[["Health screening consent",Xn,Fi],["Marketing consent",ws,mo],["Waiver signed",fs,Mo],["Photo/video consent",Di,dn],["Accept terms",An,Hr]].map(([wa,ho,Xi],gs)=>React.createElement("label",{key:gs,className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/80"},React.createElement("span",null,wa),React.createElement("input",{type:"checkbox",checked:!!ho,onChange:Do=>Xi(Do.target.checked)}))),React.createElement("div",{className:"rounded-2xl border border-amber-400/20 bg-amber-500/10 p-3 text-[12px] text-amber-100/90"},"Tip: In production, consents create signed artifacts and audit log entries.")),((xo=x[S])==null?void 0:xo.k)==="REVIEW"&&React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Client"),React.createElement("div",{className:"mt-2 text-[14px] text-white font-extrabold"},J||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},At||Je||"No contact"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},L),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},Q),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},He))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Package"),React.createElement("div",{className:"mt-2 text-[14px] text-white font-extrabold"},ls||"\u2014"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Pa," ",ca," \u2022 ",fi.replace("_"," ")),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Credits: ",ss," \u2022 Delivery: ",Wa.replace("_"," "))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Validation"),React.createElement("div",{className:"mt-2 grid md:grid-cols-4 gap-2 text-[12px]"},React.createElement("div",{className:"rounded-xl border p-2 "+(So("BASICS")?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 text-white/50")},"Basics"),React.createElement("div",{className:"rounded-xl border p-2 "+(So("CONTACT")?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 text-white/50")},"Contact"),React.createElement("div",{className:"rounded-xl border p-2 "+(So("BILLING")?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 text-white/50")},"Billing"),React.createElement("div",{className:"rounded-xl border p-2 "+(So("CONSENT")?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 text-white/50")},"Consents")),!So("REVIEW")&&React.createElement("div",{className:"mt-3 text-[12px] text-amber-200/90"},"Fill required fields (Name + Contact + Billing + Accept terms) to create client.")))),React.createElement("div",{className:"border-t border-white/10 bg-black/20 px-4 py-3 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>u(wa=>Math.max(0,wa-1)),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Prev"),React.createElement("div",{className:"text-[11px] text-white/50"},(cn=x[S])==null?void 0:cn.label),React.createElement("button",{type:"button",onClick:()=>u(wa=>Math.min(x.length-1,wa+1)),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Next")))))};(function(){try{if(window.__FOF_TAX_HELPERS_V1)return;window.__FOF_TAX_HELPERS_V1=!0;var i="fof.finance.tax_config.v1",s=()=>({businessName:"FlowOFit Demo",businessCountry:"AE",businessRegion:"ALL",receiptNote:"Thank you for your business.",jurisdictions:[{id:"AE_VAT",label:"UAE VAT",country:"AE",region:"ALL",taxName:"VAT",ratePct:5},{id:"US_SALES",label:"US Sales Tax (Example)",country:"US",region:"CA",taxName:"Sales Tax",ratePct:8.25},{id:"EU_VAT",label:"EU VAT (Example)",country:"EU",region:"DE",taxName:"VAT",ratePct:19}],updatedAt:Date.now()});window.__tax_lsKey=window.__tax_lsKey||"fof.finance.tax_config.v1";var x=window.__tax_lsKey;window.__tax_read=function(){try{var S=typeof Ta=="function"?Ta(i,""):localStorage.getItem(i)||"";if(!S)return s();var u=JSON.parse(S);return!u||typeof u!="object"?s():{...s(),...u}}catch(S){return s()}},window.__tax_write=function(S){try{var u={...S||{},updatedAt:Date.now()},$=JSON.stringify(u);return typeof ti=="function"?ti(i,$):localStorage.setItem(i,$),u}catch(u){return S}}}catch(i){}})();var bi=(i,s="")=>{try{if(i==null)return"";var x=typeof i=="number"?i:Number(i),u=(isNaN(x)?0:x).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2});return s?`${s} ${u}`:u}catch(x){return String(i!=null?i:"")}},hs=i=>{try{if(!i)return"";var s=i instanceof Date?i:new Date(i);return isNaN(s.getTime())?"":s.toLocaleString(void 0,{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(s){return""}};window.fmt=hs,window.fmtMoney=bi,window.__FOF_PBEF_CONTRACT={name:"FlowOFit Plan Builder Evolution Framework",short:"PBEF v1",step:"0.5",version:"PBEF_v1_Step0_5_LOCK",lastUpdated:"2025-12-24"},function(){try{if(window.__FOF_TDEP_V1)return;window.__FOF_TDEP_V1=!0;var i={docRef:"FOF-TDEP v1.0 \u2014 Trainer Dashboard Execution Plan (Real-App Standard)",phase:"1.1",lastUpdated:"2025-12-29",notes:["Readiness in flowcharts maps to Capacity Score in-app.","ActionLog is the audit/event spine. All high-signal actions must write an entry.","Triage is the single engine: signals -> actions -> resolution -> history."]},s={ACTION_LOG:"fof.tdep.action_log.v1",CLIENT_STATE:"fof.tdep.client_state.v1",TRIAGE_STATE:"fof.tdep.triage_state.v1"},x=()=>new Date().toISOString(),S=()=>{try{return crypto!=null&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+"-"+Math.random().toString(16).slice(2)}catch(Q){return String(Date.now())+"-"+Math.random().toString(16).slice(2)}},u=(Q,w,L)=>Math.max(w,Math.min(L,Q)),$=(Q,w=0)=>{var L=typeof Q=="number"?Q:Number(Q);return Number.isFinite(L)?L:w},tt=(Q,w="")=>Q==null?w:String(Q),ue=(Q,w=!1)=>typeof Q=="boolean"?Q:Q==null?w:!!Q,Ie=Q=>Array.from(new Set((Q||[]).filter(Boolean).map(String))),fe=()=>({id:S(),name:"Unnamed Client",mode:"LINKED",tier:"PAID",tags:[],goal:"GENERAL_FITNESS",planType:"FITNESS",capacityScoreNow:72,capacityScoreTrend7d:0,adherence7d:.75,lastCheckInAt:null,nextCheckInAt:null,lastMessageAt:null,riskFlags:{churn:!1,injury:!1,compliance:!1,opportunity:!1},meta:{createdAt:x(),updatedAt:x()}}),B=()=>({id:S(),clientId:null,type:"COMPLIANCE",severity:"MED",confidence:.7,evidence:[],summary:"",recommendedActions:[],status:"OPEN",createdAt:x(),updatedAt:x(),resolvedAt:null,snoozedUntil:null,meta:{source:"triage_engine_v1"}}),X=()=>({id:S(),ts:x(),actor:{role:"TRAINER",id:"trainer-demo"},clientId:null,type:"ui.event",payload:{},context:{surface:"unknown",module:"unknown"}}),ne=Q=>{var w=fe(),L=Q&&typeof Q=="object"?Q:{};return{...w,...L,id:tt(L.id,w.id),name:tt(L.name,w.name),mode:String(L.mode||w.mode).toUpperCase()==="INDEPENDENT"?"INDEPENDENT":"LINKED",tier:String(L.tier||w.tier).toUpperCase(),tags:Ie(L.tags||w.tags),goal:tt(L.goal,w.goal),planType:String(L.planType||w.planType).toUpperCase(),capacityScoreNow:u($(L.capacityScoreNow,w.capacityScoreNow),0,100),capacityScoreTrend7d:u($(L.capacityScoreTrend7d,w.capacityScoreTrend7d),-100,100),adherence7d:u($(L.adherence7d,w.adherence7d),0,1),lastCheckInAt:L.lastCheckInAt||w.lastCheckInAt,nextCheckInAt:L.nextCheckInAt||w.nextCheckInAt,lastMessageAt:L.lastMessageAt||w.lastMessageAt,riskFlags:{...w.riskFlags||{},...L.riskFlags||{}},meta:{...w.meta||{},...L.meta||{},updatedAt:x()}}},W=Q=>{var w=B(),L=Q&&typeof Q=="object"?Q:{},ut=L.severity!=null?L.severity:w.severity,ot=(()=>{if(typeof ut=="number"&&!Number.isNaN(ut))return u(ut,0,100);var et=String(ut||"").toUpperCase().trim(),At=Number(et);return Number.isNaN(At)?et==="HIGH"?85:et==="MED"||et==="MEDIUM"?65:et==="LOW"?45:55:u(At,0,100)})(),ht=et=>Array.isArray(et)?et.slice(0,12).map(At=>{if(At==null)return"";if(typeof At=="string")return At;if(typeof At=="number"||typeof At=="boolean")return String(At);if(typeof At=="object"){var ma=At.k!=null?String(At.k):At.key!=null?String(At.key):"",Je=At.v!=null?At.v:At.value!=null?At.value:"";return ma?`${ma}: ${Je}`:JSON.stringify(At)}return String(At)}).filter(Boolean):[];return{...w,...L,id:tt(L.id,w.id),clientId:L.clientId?tt(L.clientId,null):null,type:String(L.type||w.type).toUpperCase(),severity:String(Math.round(ot)),confidence:u($(L.confidence,w.confidence),0,1),evidence:ht(L.evidence),title:tt(L.title,tt(L.summary,w.summary)),summary:tt(L.summary,w.summary),recommendedActions:Array.isArray(L.recommendedActions)?L.recommendedActions.slice(0,8):[],status:String(L.status||w.status).toUpperCase(),createdAt:L.createdAt||w.createdAt,updatedAt:x(),resolvedAt:L.resolvedAt||null,snoozedUntil:L.snoozedUntil||null,meta:{...w.meta||{},...L.meta||{}}}},J=Q=>{var w=X(),L=Q&&typeof Q=="object"?Q:{};return{...w,...L,id:tt(L.id,w.id),ts:L.ts||w.ts,actor:{...w.actor||{},...L.actor||{}},clientId:L.clientId?tt(L.clientId,null):null,type:tt(L.type,w.type),payload:L.payload&&typeof L.payload=="object"?L.payload:{},context:{...w.context||{},...L.context||{}}}},z=(Q,w)=>{try{return typeof Ta=="function"?Ta(Q,w):w}catch(L){return w}},H=(Q,w)=>{try{return typeof ti=="function"?ti(Q,w):!1}catch(L){return!1}},Ht=()=>{var Q=z(s.ACTION_LOG,[]);return Array.isArray(Q)?Q:[]},Nt=Q=>{var w=Ht(),L=[J(Q),...w].slice(0,500);return H(s.ACTION_LOG,L),L[0]},U=(Q,w={},L={})=>Nt({type:Q,payload:w,context:{surface:tt(L.surface,"unknown"),module:tt(L.module,"unknown"),...L}});window.__FOF_TDEP={DOC:i,KEYS:s,defaultClientState:fe,defaultTriageSignal:B,defaultActionLogEntry:X,normalizeClientState:ne,normalizeTriageSignal:W,normalizeActionLogEntry:J,getActionLog:Ht,appendActionLog:Nt,logEvent:U}}catch(i){try{console.warn("FOF-TDEP Phase 1.1 init failed",i)}catch(s){}}}(),function(){var i,s;try{if(!window.__FOF_TDEP||window.__FOF_TDEP.__PHASE_1_2)return;window.__FOF_TDEP.__PHASE_1_2=!0;var x={docRef:((s=(i=window.__FOF_TDEP)==null?void 0:i.DOC)==null?void 0:s.docRef)||"FOF-TDEP v1.0",phase:"1.2",lastUpdated:"2025-12-30",notes:["Unified AI Triage is the only source of triage signals.","UI surfaces consume triage outputs; they do not re-infer risks.","Resolution writes ActionLog entries and updates triage history/state."]},{KEYS:S,normalizeTriageSignal:u,logEvent:$}=window.__FOF_TDEP;S.TRIAGE_STATE=S.TRIAGE_STATE||"fof.tdep.triage_state.v1",S.TRIAGE_HISTORY=S.TRIAGE_HISTORY||"fof.tdep.triage_history.v1",S.TRIAGE_RULES=S.TRIAGE_RULES||"fof.tdep.triage_rules.v1";var tt=(He,Ca)=>{try{return typeof Ta=="function"?Ta(He,Ca):Ca}catch(ha){return Ca}},ue=(He,Ca)=>{try{return typeof ti=="function"?ti(He,Ca):!1}catch(ha){return!1}},Ie=()=>new Date().toISOString(),fe=(He,Ca,ha)=>Math.max(Ca,Math.min(ha,He)),B=He=>{try{if(!He)return null;var Ca=new Date(He).getTime();return Number.isNaN(Ca)?null:(Date.now()-Ca)/(1e3*60*60*24)}catch(Ca){return null}},X=(He="")=>{var Ca=2166136261;var ha=String(He);for(var K=0;K<ha.length;K++)Ca^=ha.charCodeAt(K),Ca=Math.imul(Ca,16777619);return Ca>>>0},ne=He=>{var Ca=He>>>0||1;return Ca^=Ca<<13,Ca>>>=0,Ca^=Ca>>17,Ca>>>=0,Ca^=Ca<<5,Ca>>>=0,(Ca>>>0)/4294967295},W=(He,Ca)=>He[Math.max(0,Math.min(He.length-1,Math.floor(Ca*He.length)))],J=He=>{var rs,ct,zt;var Ca=He&&typeof He=="object"?He:{},ha=String(Ca.id||Ca.clientId||Ca.email||Ca.name||"").trim();if(!ha)return Ca;var K=X(ha),aa=ne(K),Mt=ne(K+101),la=ne(K+202),xa=Number((ct=(rs=Ca.capacityScoreNow)!=null?rs:Ca.capacityScore)!=null?ct:Ca.readiness),ei=Number.isFinite(xa)&&xa>0?fe(xa,0,100):fe(Math.round(25+aa*65),0,100),di=Number((zt=Ca.adherence7d)!=null?zt:Ca.adherence),Ua=Number.isFinite(di)&&di>0?fe(di,0,1):fe(.3+Mt*.65,0,1),sa=Ca.lastCheckInAt||Ca.lastCheckinAt||Ca.checkInAt||null,vt=Math.round(la*28),Ge=sa||new Date(Date.now()-vt*864e5).toISOString(),Xa=String(Ca.tier||Ca.planTier||Ca.plan||"").toUpperCase()||W(["FREE","TRIAL","PAID"],ne(K+303)),mi=Array.isArray(Ca.tags)?Ca.tags:Ca.tag?[Ca.tag]:[],xi=mi.length?mi:ne(K+404)>.5?["LINKED"]:[];return{...Ca,id:ha,tier:Xa,tags:xi,capacityScoreNow:ei,adherence7d:Ua,lastCheckInAt:Ge}},z=()=>({version:"1.0",thresholds:{capacity_low:45,capacity_critical:30,adherence_low:.55,checkin_overdue_days:14,message_unread_days:4},weights:{CHURN:1,COMPLIANCE:.9,INJURY_RISK:1.1,OPPORTUNITY:.6}}),H=()=>{var He=tt(S.TRIAGE_RULES,null);if(He&&typeof He=="object")return{...z(),...He};var Ca=z();return ue(S.TRIAGE_RULES,Ca),Ca},Ht=()=>{var He=tt(S.TRIAGE_STATE,null);if(He&&typeof He=="object")return He;var Ca={version:"1.0",updatedAt:Ie(),signalsById:{},order:[],stats:{total:0,open:0,snoozed:0,inProgress:0,resolved:0}};return ue(S.TRIAGE_STATE,Ca),Ca},Nt=He=>{var Ca={...He||{},updatedAt:Ie()};return ue(S.TRIAGE_STATE,Ca),Ca},U=He=>{var Ca=tt(S.TRIAGE_HISTORY,[]),ha=Array.isArray(Ca)?Ca:[],K=[{id:`th_${Math.random().toString(16).slice(2)}_${Date.now()}`,ts:Ie(),...He},...ha].slice(0,700);return ue(S.TRIAGE_HISTORY,K),K[0]},Q=(He,Ca,ha,K={})=>({id:He,label:Ca,verb:ha,payload:K}),w=He=>u({...He,status:He.status||"OPEN",createdAt:He.createdAt||Ie(),updatedAt:Ie()}),L=(He,Ca)=>{var Xa,mi,xi,rs,ct;var ha=Ca.thresholds,K=[],aa=(He==null?void 0:He.id)||(He==null?void 0:He.clientId)||null;if(!aa)return K;var Mt=(He==null?void 0:He.name)||(He==null?void 0:He.fullName)||"Client",la=Number((xi=(mi=(Xa=He==null?void 0:He.capacityScoreNow)!=null?Xa:He==null?void 0:He.capacityScore)!=null?mi:He==null?void 0:He.readiness)!=null?xi:0),xa=Number((ct=(rs=He==null?void 0:He.adherence7d)!=null?rs:He==null?void 0:He.adherence)!=null?ct:0),ei=(He==null?void 0:He.lastCheckInAt)||(He==null?void 0:He.lastCheckinAt)||(He==null?void 0:He.checkInAt)||null,di=B(ei),Ua=String((He==null?void 0:He.tier)||(He==null?void 0:He.planTier)||"FREE").toUpperCase(),sa=Array.isArray(He==null?void 0:He.tags)?He.tags:[],vt=He&&typeof He=="object"?He.evidenceExtras||{}:{},Ge=(zt,Wi,Wa)=>{Wa!=null&&(typeof Wa=="string"&&Wa.trim()===""||typeof Wa=="number"&&Number.isNaN(Wa)||zt.push({k:Wi,v:Wa}))};if(di!=null&&di>=ha.checkin_overdue_days){var zt=di>=ha.checkin_overdue_days*2?"HIGH":"MED";K.push(w({clientId:aa,type:"CHURN",severity:zt,confidence:fe(.55+Math.min(.35,(di-ha.checkin_overdue_days)/20),0,.9),summary:`${Mt} is overdue for check-in (${Math.floor(di)}d).`,evidence:(()=>{var Wi=[{k:"lastCheckInAt",v:ei||"unknown"},{k:"daysSinceCheckIn",v:Math.floor(di)}];return Ge(Wi,"unreadMessagesDays",vt.unreadMessagesDays),Ge(Wi,"travelDaysLast14d",vt.travelDaysLast14d),Ge(Wi,"note",vt.note),Wi})(),recommendedActions:[Q("open_thread","Message client","OPEN_THREAD",{clientId:aa}),Q("schedule_checkin","Schedule check-in","SCHEDULE_CHECKIN",{clientId:aa,days:1}),Q("review_plan","Review plan","OPEN_CLIENT",{clientId:aa,tab:"PLAN"})],meta:{reason:"CHECKIN_OVERDUE",tier:Ua,tags:sa}}))}if(!Number.isNaN(xa)&&xa>0&&xa<ha.adherence_low){var zt=xa<ha.adherence_low*.75?"HIGH":"MED";K.push(w({clientId:aa,type:"COMPLIANCE",severity:zt,confidence:fe(.6+(ha.adherence_low-xa),0,.95),summary:`${Mt} has low adherence (7d: ${(xa*100).toFixed(0)}%).`,evidence:(()=>{var Wi=[{k:"adherence7d",v:xa},{k:"threshold",v:ha.adherence_low}];return Ge(Wi,"missedSessions7d",vt.missedSessions7d),Ge(Wi,"nutritionLoggedDays",vt.nutritionLoggedDays),Ge(Wi,"proteinAvgG",vt.proteinAvgG),Ge(Wi,"rpeLastSession",vt.rpeLastSession),Ge(Wi,"note",vt.note),Wi})(),recommendedActions:[Q("open_thread","Send support message","OPEN_THREAD",{clientId:aa}),Q("simplify_plan","Simplify next 7 days","OPEN_AI",{tool:"PLAN_ADJUST",clientId:aa,mode:"SIMPLIFY_7D"}),Q("add_mini_goal","Add mini-goal","ADD_GOAL",{clientId:aa})],meta:{reason:"ADHERENCE_LOW",tier:Ua,tags:sa}}))}if(!Number.isNaN(la)&&la>0&&la<=ha.capacity_low){var zt=la<=ha.capacity_critical?"HIGH":"MED";K.push(w({clientId:aa,type:"INJURY_RISK",severity:zt,confidence:fe(.65+(ha.capacity_low-la)/100,0,.95),summary:`${Mt} has low Capacity Score (${Math.round(la)}). Consider deload/recovery.`,evidence:(()=>{var Wi=[{k:"capacityScoreNow",v:la},{k:"capacity_low",v:ha.capacity_low},{k:"capacity_critical",v:ha.capacity_critical}];return Ge(Wi,"sleepAvg7d",He==null?void 0:He.sleepAvg7d),Ge(Wi,"restingHR",He==null?void 0:He.restingHR),Ge(Wi,"restingHRDelta",vt.restingHRDelta),Ge(Wi,"painScore",He==null?void 0:He.painScore),Ge(Wi,"lastPainSpikeDays",vt.lastPainSpikeDays),Ge(Wi,"deloadIgnored",vt.deloadIgnored),Ge(Wi,"note",vt.note),Wi})(),recommendedActions:[Q("adjust_plan","Adjust plan intensity","OPEN_AI",{tool:"PLAN_ADJUST",clientId:aa,mode:"DELOAD"}),Q("recommend_recovery","Recommend recovery","OPEN_AI",{tool:"RECOVERY_RECO",clientId:aa}),Q("open_client","Review logs","OPEN_CLIENT",{clientId:aa,tab:"LOGS"})],meta:{reason:"CAPACITY_LOW",tier:Ua,tags:sa}}))}return!Number.isNaN(xa)&&xa>=.75&&!Number.isNaN(la)&&la>=65&&(Ua==="FREE"||Ua==="TRIAL")&&K.push(w({clientId:aa,type:"OPPORTUNITY",severity:"LOW",confidence:.6,summary:`${Mt} is doing well (Capacity ${Math.round(la)}, adherence ${(xa*100).toFixed(0)}%). Consider offering an upgrade.`,evidence:[{k:"capacityScoreNow",v:la},{k:"adherence7d",v:xa},{k:"tier",v:Ua}],recommendedActions:[Q("offer_upgrade","Send upgrade offer","OPEN_AI",{tool:"UPSELL_MESSAGE",clientId:aa}),Q("assign_challenge","Enroll in challenge","OPEN_MODULE",{module:"CHALLENGES",clientId:aa})],meta:{reason:"ENGAGED_UPSELL",tier:Ua,tags:sa}})),K},ut=(He,Ca)=>{var ha=Ca.weights,K=la=>la==="HIGH"?3:la==="MED"?2:la==="LOW"?1:0,aa=la=>la==="OPEN"?3:la==="IN_PROGRESS"?2:la==="SNOOZED"?1:0,Mt=He.map(la=>{var di;var xa=(di=ha[String(la.type||"").toUpperCase()])!=null?di:.7,ei=(K(String(la.severity||"").toUpperCase())*10+fe(Number(la.confidence||0),0,1)*10+aa(String(la.status||"").toUpperCase())*5)*xa;return{s:la,score:ei}});return Mt.sort((la,xa)=>xa.score-la.score),Mt.map(la=>la.s)},ot=He=>{var Ca=He.signalsById||{},ha=Object.values(Ca),K={total:ha.length,open:0,snoozed:0,inProgress:0,resolved:0};return ha.forEach(aa=>{var Mt=String(aa.status||"").toUpperCase();Mt==="OPEN"?K.open++:Mt==="SNOOZED"?K.snoozed++:Mt==="IN_PROGRESS"?K.inProgress++:Mt==="RESOLVED"&&K.resolved++}),He.stats=K,He},ht=({clients:He=[],source:Ca="unknown",force:ha=!1}={})=>{var K=H(),aa=Ht(),la={...aa.signalsById||{}},xa=[],di=(Array.isArray(He)?He:[]).map(J).filter(Boolean),Ua=(rs=25)=>{var ct=Wi=>new Date(Date.now()-Wi*864e5).toISOString(),zt=[{id:"c1",name:"Leila Al Shamsi",tier:"PAID",tags:["LINKED","FATLOSS","DESK_JOB"],segment:"ATTENTION",status:"Check-in overdue",city:"Dubai",age:34,sex:"F",goalPrimary:"Fat loss + energy",sessionsPerWeek:4,equipment:["Dumbbells","Bands"],constraints:["Knee discomfort","Travel 2x/month"],injury:"Patellofemoral pain (knee)",sleepAvg7d:5.6,restingHR:78,stepsAvg7d:4200,weightKg:84.2,weightChange7d:.6,painScore:6,adherence7d:.36,capacityScoreNow:27,lastCheckInAt:ct(33),evidenceExtras:{missedSessions7d:3,unreadMessagesDays:9,note:"Last program felt \u201Ctoo hard\u201D after travel."}},{id:"c2",name:"Omar Al Farsi",tier:"PAID",tags:["LINKED","REHAB","SHOULDER"],segment:"ATTENTION",status:"Recovery flag",city:"Abu Dhabi",age:41,sex:"M",goalPrimary:"Return to training safely",sessionsPerWeek:3,equipment:["Gym"],constraints:["Shoulder impingement"],injury:"Shoulder impingement (R)",sleepAvg7d:6.1,restingHR:74,stepsAvg7d:5100,weightKg:92.4,weightChange7d:.2,painScore:7,adherence7d:.62,capacityScoreNow:29,lastCheckInAt:ct(8),evidenceExtras:{physioCompliance:"inconsistent",lastPainSpikeDays:3,note:"Pain spikes after pressing."}},{id:"c3",name:"Maya Khan",tier:"TRIAL",tags:["LINKED","BEGINNER","FATLOSS"],segment:"ATTENTION",status:"Low adherence",city:"Sharjah",age:29,sex:"F",goalPrimary:"Lose 8kg in 12 weeks",sessionsPerWeek:4,equipment:["Bodyweight","Bands"],constraints:["New parent","Sleep disruption"],injury:"None",sleepAvg7d:4.9,restingHR:82,stepsAvg7d:3600,weightKg:71,weightChange7d:.9,painScore:1,adherence7d:.41,capacityScoreNow:43,lastCheckInAt:ct(17),evidenceExtras:{missedSessions7d:4,nutritionLoggedDays:1,note:"Requests shorter sessions (<30min)."}},{id:"c4",name:"Rami Haddad",tier:"FREE",tags:["LINKED","BEGINNER","CARDIO"],segment:"ATTENTION",status:"Overdue check-in",city:"Dubai",age:26,sex:"M",goalPrimary:"Build consistency",sessionsPerWeek:3,equipment:["Gym"],constraints:["Shift work"],injury:"Lower back tightness",sleepAvg7d:6.4,restingHR:70,stepsAvg7d:6800,weightKg:78.6,weightChange7d:.1,painScore:4,adherence7d:.52,capacityScoreNow:44,lastCheckInAt:ct(16),evidenceExtras:{missedSessions7d:2,unreadMessagesDays:6,note:"Skipped due to night shifts."}},{id:"c5",name:"Noura Ahmed",tier:"TRIAL",tags:["LINKED","RUN","5K"],segment:"ATTENTION",status:"Low adherence",city:"Ajman",age:32,sex:"F",goalPrimary:"Run 5K comfortably",sessionsPerWeek:4,equipment:["Treadmill","Bands"],constraints:["Asthma (mild)"],injury:"Shin splints history",sleepAvg7d:6,restingHR:76,stepsAvg7d:7200,weightKg:64.3,weightChange7d:-.2,painScore:5,adherence7d:.33,capacityScoreNow:61,lastCheckInAt:ct(11),evidenceExtras:{missedRuns7d:3,rpeLastSession:9,note:"Reports shin pain after intervals."}},{id:"c6",name:"Saeed Khan",tier:"PAID",tags:["LINKED","POWERLIFT","STRENGTH"],segment:"ATTENTION",status:"Capacity critical",city:"Dubai",age:38,sex:"M",goalPrimary:"Peak strength",sessionsPerWeek:5,equipment:["Gym"],constraints:["High work stress"],injury:"Elbow tendinopathy",sleepAvg7d:5.4,restingHR:81,stepsAvg7d:3900,weightKg:103.8,weightChange7d:1.1,painScore:6,adherence7d:.79,capacityScoreNow:26,lastCheckInAt:ct(6),evidenceExtras:{deloadIgnored:!0,note:"Keeps adding volume despite fatigue."}},{id:"c7",name:"Aisha Al Nuaimi",tier:"PAID",tags:["LINKED","MOBILITY","POSTURE"],segment:"ATTENTION",status:"Check-in due",city:"Ras Al Khaimah",age:45,sex:"F",goalPrimary:"Reduce neck/desk pain",sessionsPerWeek:3,equipment:["Bands","Foam Roller"],constraints:["Desk job"],injury:"Cervical tension",sleepAvg7d:6.7,restingHR:72,stepsAvg7d:5600,weightKg:69.5,weightChange7d:-.1,painScore:7,adherence7d:.73,capacityScoreNow:58,lastCheckInAt:ct(23),evidenceExtras:{postureBreaksPerDay:1,unreadMessagesDays:10,note:"Often forgets mobility sessions."}},{id:"c8",name:"Yousef Mansoor",tier:"FREE",tags:["LINKED","MUSCLE","HYPERTROPHY"],segment:"ATTENTION",status:"Low adherence",city:"Dubai",age:24,sex:"M",goalPrimary:"Gain lean mass",sessionsPerWeek:5,equipment:["Gym"],constraints:["Inconsistent schedule"],injury:"None",sleepAvg7d:7.2,restingHR:62,stepsAvg7d:8900,weightKg:68.2,weightChange7d:-.4,painScore:1,adherence7d:.4,capacityScoreNow:55,lastCheckInAt:ct(9),evidenceExtras:{missedSessions7d:3,proteinAvgG:70,note:"Under-eating; wants meal guidance."}},{id:"c9",name:"Huda Al Shehhi",tier:"TRIAL",tags:["LINKED","POSTURE","CORE"],segment:"ATTENTION",status:"Overdue check-in",city:"Fujairah",age:37,sex:"F",goalPrimary:"Core strength + posture",sessionsPerWeek:3,equipment:["Bodyweight","Bands"],constraints:["Frequent travel"],injury:"Hip flexor tightness",sleepAvg7d:6.2,restingHR:75,stepsAvg7d:6100,weightKg:73.7,weightChange7d:.3,painScore:5,adherence7d:.47,capacityScoreNow:73,lastCheckInAt:ct(29),evidenceExtras:{travelDaysLast14d:8,unreadMessagesDays:12,note:"Travel disrupted routine."}},{id:"c10",name:"Khaled Al Maktoum",tier:"PAID",tags:["LINKED","HYBRID","ENDURANCE"],segment:"ATTENTION",status:"Recovery flag",city:"Abu Dhabi",age:33,sex:"M",goalPrimary:"Hybrid performance",sessionsPerWeek:6,equipment:["Gym","Bike"],constraints:["Sleep debt"],injury:"Achilles irritation",sleepAvg7d:5.3,restingHR:79,stepsAvg7d:7400,weightKg:80.1,weightChange7d:-.1,painScore:6,adherence7d:.49,capacityScoreNow:30,lastCheckInAt:ct(14),evidenceExtras:{restingHRDelta:9,note:"Achilles sore after running volume."}},{id:"c11",name:"Layla Saif",tier:"PAID",tags:["LINKED","STRENGTH","RECOMP"],segment:"ACTIVE",status:"Active",city:"Dubai",age:30,sex:"F",goalPrimary:"Body recomposition",sessionsPerWeek:4,equipment:["Gym"],constraints:["None"],injury:"None",sleepAvg7d:7.4,restingHR:60,stepsAvg7d:9200,weightKg:58.6,weightChange7d:-.2,painScore:0,adherence7d:.84,capacityScoreNow:78,lastCheckInAt:ct(2)},{id:"c12",name:"Hassan Qureshi",tier:"PAID",tags:["LINKED","FATLOSS","METCON"],segment:"ACTIVE",status:"Active",city:"Sharjah",age:36,sex:"M",goalPrimary:"Drop body fat",sessionsPerWeek:5,equipment:["Gym"],constraints:["Busy schedule"],injury:"None",sleepAvg7d:6.9,restingHR:63,stepsAvg7d:10300,weightKg:88.9,weightChange7d:-.5,painScore:1,adherence7d:.79,capacityScoreNow:70,lastCheckInAt:ct(3)},{id:"c13",name:"Zainab Noor",tier:"TRIAL",tags:["LINKED","YOGA","MOBILITY"],segment:"ACTIVE",status:"Active",city:"Dubai",age:27,sex:"F",goalPrimary:"Flexibility + stress relief",sessionsPerWeek:3,equipment:["Mat","Blocks"],constraints:["High stress"],injury:"None",sleepAvg7d:7,restingHR:58,stepsAvg7d:7600,weightKg:55.4,weightChange7d:0,painScore:0,adherence7d:.77,capacityScoreNow:68,lastCheckInAt:ct(1)},{id:"c14",name:"Faisal Rahman",tier:"FREE",tags:["LINKED","CARDIO","10K"],segment:"ACTIVE",status:"Active",city:"Abu Dhabi",age:31,sex:"M",goalPrimary:"Improve cardio (10K)",sessionsPerWeek:4,equipment:["Outdoor","Treadmill"],constraints:["None"],injury:"None",sleepAvg7d:7.1,restingHR:57,stepsAvg7d:12e3,weightKg:74.8,weightChange7d:-.3,painScore:0,adherence7d:.85,capacityScoreNow:74,lastCheckInAt:ct(2)},{id:"c15",name:"Sara Al Haddad",tier:"PAID",tags:["LINKED","RECOMP","STRENGTH"],segment:"ACTIVE",status:"Active",city:"Dubai",age:39,sex:"F",goalPrimary:"Strength + posture",sessionsPerWeek:4,equipment:["Gym"],constraints:["Mild scoliosis"],injury:"None",sleepAvg7d:7.2,restingHR:61,stepsAvg7d:8400,weightKg:66.7,weightChange7d:-.1,painScore:2,adherence7d:.74,capacityScoreNow:67,lastCheckInAt:ct(4)},{id:"c16",name:"Bilal Younis",tier:"PAID",tags:["LINKED","REHAB","KNEE"],segment:"ACTIVE",status:"Active",city:"Al Ain",age:43,sex:"M",goalPrimary:"Knee resilience + strength",sessionsPerWeek:3,equipment:["Gym","Bands"],constraints:["ACL history"],injury:"Post-ACL strengthening",sleepAvg7d:6.8,restingHR:66,stepsAvg7d:6500,weightKg:95.1,weightChange7d:-.2,painScore:3,adherence7d:.72,capacityScoreNow:62,lastCheckInAt:ct(5)},{id:"c17",name:"Mariam Al Kaabi",tier:"PAID",tags:["LINKED","MOBILITY","PILATES"],segment:"ACTIVE",status:"Active",city:"Dubai",age:28,sex:"F",goalPrimary:"Core + mobility",sessionsPerWeek:4,equipment:["Mat","Bands"],constraints:["None"],injury:"None",sleepAvg7d:7.6,restingHR:56,stepsAvg7d:9800,weightKg:54.9,weightChange7d:.1,painScore:0,adherence7d:.81,capacityScoreNow:72,lastCheckInAt:ct(3)},{id:"c18",name:"Ibrahim Saleh",tier:"TRIAL",tags:["LINKED","STRENGTH","BEGINNER"],segment:"ACTIVE",status:"Active",city:"Dubai",age:22,sex:"M",goalPrimary:"Build muscle + confidence",sessionsPerWeek:3,equipment:["Gym"],constraints:["New to lifting"],injury:"None",sleepAvg7d:7.9,restingHR:55,stepsAvg7d:8700,weightKg:62.8,weightChange7d:.2,painScore:0,adherence7d:.76,capacityScoreNow:66,lastCheckInAt:ct(2)},{id:"c19",name:"Noor Al Hamadi",tier:"FREE",tags:["LINKED","BEGINNER","FATLOSS"],segment:"ACTIVE",status:"Active",city:"Sharjah",age:40,sex:"F",goalPrimary:"Healthy habits",sessionsPerWeek:3,equipment:["Bodyweight"],constraints:["Time-limited"],injury:"None",sleepAvg7d:7,restingHR:64,stepsAvg7d:7800,weightKg:79.3,weightChange7d:-.4,painScore:0,adherence7d:.83,capacityScoreNow:75,lastCheckInAt:ct(2)},{id:"c20",name:"Adnan Malik",tier:"PAID",tags:["LINKED","HYBRID","MUSCLE"],segment:"ACTIVE",status:"Active",city:"Dubai",age:35,sex:"M",goalPrimary:"Hybrid strength + endurance",sessionsPerWeek:5,equipment:["Gym","RowErg"],constraints:["None"],injury:"None",sleepAvg7d:7.1,restingHR:59,stepsAvg7d:9100,weightKg:82.2,weightChange7d:0,painScore:1,adherence7d:.78,capacityScoreNow:69,lastCheckInAt:ct(3)},{id:"c21",name:"Reem Al Mansouri",tier:"PAID",tags:["LINKED","YOGA","RECOVERY"],segment:"ACTIVE",status:"Active",city:"Abu Dhabi",age:33,sex:"F",goalPrimary:"Recovery + flexibility",sessionsPerWeek:3,equipment:["Mat","Blocks"],constraints:["None"],injury:"None",sleepAvg7d:7.8,restingHR:54,stepsAvg7d:8400,weightKg:57.1,weightChange7d:0,painScore:0,adherence7d:.82,capacityScoreNow:72,lastCheckInAt:ct(1)},{id:"c22",name:"Tariq Nasser",tier:"PAID",tags:["LINKED","RUN","HALF_MARATHON"],segment:"ACTIVE",status:"Active",city:"Dubai",age:29,sex:"M",goalPrimary:"Half marathon prep",sessionsPerWeek:5,equipment:["Outdoor"],constraints:["Calf tightness"],injury:"None",sleepAvg7d:7.2,restingHR:52,stepsAvg7d:13500,weightKg:70.5,weightChange7d:-.1,painScore:2,adherence7d:.77,capacityScoreNow:66,lastCheckInAt:ct(2)},{id:"c23",name:"Fatima Al Zahra",tier:"TRIAL",tags:["LINKED","FATLOSS","NUTRITION"],segment:"ACTIVE",status:"Active",city:"Ajman",age:27,sex:"F",goalPrimary:"Fat loss + nutrition consistency",sessionsPerWeek:4,equipment:["Gym"],constraints:["Sugar cravings"],injury:"None",sleepAvg7d:7,restingHR:63,stepsAvg7d:8600,weightKg:62,weightChange7d:-.3,painScore:0,adherence7d:.75,capacityScoreNow:65,lastCheckInAt:ct(3)},{id:"c24",name:"Yasir Al Kindi",tier:"PAID",tags:["LINKED","POWERLIFT","STRENGTH"],segment:"ACTIVE",status:"Active",city:"Dubai",age:44,sex:"M",goalPrimary:"Maintain strength",sessionsPerWeek:4,equipment:["Gym"],constraints:["Old shoulder issue"],injury:"None",sleepAvg7d:6.9,restingHR:65,stepsAvg7d:6200,weightKg:98.7,weightChange7d:.2,painScore:2,adherence7d:.73,capacityScoreNow:64,lastCheckInAt:ct(4)},{id:"c25",name:"Amal Farooq",tier:"PAID",tags:["LINKED","POSTURE","CORE"],segment:"ACTIVE",status:"Active",city:"Sharjah",age:32,sex:"F",goalPrimary:"Posture + core",sessionsPerWeek:3,equipment:["Bodyweight","Bands"],constraints:["Desk job"],injury:"None",sleepAvg7d:7.3,restingHR:60,stepsAvg7d:7900,weightKg:60.6,weightChange7d:-.1,painScore:1,adherence7d:.8,capacityScoreNow:71,lastCheckInAt:ct(2)}].map(J);try{window.__FOF_UNIVERSAL_CLIENTS=zt}catch(Wi){}return zt.slice(0,Math.max(1,Math.min(zt.length,rs)))},sa=di.length?di:Ua(25);window.__FOF_DEMO_CLIENTS=sa,sa.forEach(rs=>{xa.push(...L(rs,K))});var vt=rs=>{var zt;var ct=((zt=rs==null?void 0:rs.meta)==null?void 0:zt.reason)||"GEN";return`ts_${String(rs.clientId)}_${String(rs.type)}_${String(ct)}`};xa.forEach(rs=>{var ct=vt(rs),zt=la[ct],Wi=u({...zt||{},...rs,id:ct,status:zt&&zt.status&&zt.status!=="RESOLVED"?zt.status:rs.status||"OPEN",resolvedAt:zt&&zt.resolvedAt&&!ha?zt.resolvedAt:rs.resolvedAt||null,snoozedUntil:zt&&zt.snoozedUntil&&!ha?zt.snoozedUntil:rs.snoozedUntil||null,updatedAt:Ie()});la[ct]=Wi});var Ge=new Set(xa.map(vt));Object.keys(la).forEach(rs=>{var ct=la[rs];if(!ct)return;var zt=String(ct.status||"").toUpperCase();(zt==="OPEN"||zt==="IN_PROGRESS")&&!Ge.has(rs)&&(la[rs]=u({...ct,status:"RESOLVED",resolvedAt:Ie(),meta:{...ct.meta||{},autoResolved:!0}}),U({type:"AUTO_RESOLVE",signalId:rs,clientId:ct.clientId,reason:"NO_LONGER_INFERRED"}),typeof $=="function"&&$("triage.auto_resolve",{signalId:rs,clientId:ct.clientId},{surface:"triage",module:"engine"}))});var $e=Object.values(la),Xa=Date.now();$e.forEach(rs=>{if(String(rs.status).toUpperCase()==="SNOOZED"&&rs.snoozedUntil){var ct=new Date(rs.snoozedUntil).getTime();!Number.isNaN(ct)&&ct<=Xa&&(la[rs.id]=u({...rs,status:"OPEN",snoozedUntil:null,updatedAt:Ie()}),U({type:"SNOOZE_EXPIRED",signalId:rs.id,clientId:rs.clientId}))}});var mi=ut(Object.values(la).filter(Boolean),K).filter(rs=>String(rs.status||"").toUpperCase()!=="RESOLVED"),xi=ot({...aa,updatedAt:Ie(),signalsById:la,order:mi.map(rs=>rs.id)});return Nt(xi),U({type:"RUN",source:Ca,total:mi.length,rawTotal:Object.keys(la).length}),typeof $=="function"&&$("triage.run",{source:Ca,total:mi.length},{surface:"triage",module:"engine"}),{doc:x,rules:K,state:xi,queue:mi}},ba=(He={})=>{var{includeSnoozed:Ca=!1,includeResolved:ha=!1}=He||{},K=Ht(),aa=K.signalsById||{};return(K.order||[]).map(Mt=>aa[Mt]).filter(Boolean).filter(Mt=>{var la=String(Mt.status||"OPEN").toUpperCase();return!(!ha&&la==="RESOLVED"||!Ca&&la==="SNOOZED")})},et=(He,Ca,ha)=>{var K=Ht(),aa=K.signalsById||{},Mt=aa[He];if(!Mt)return null;var la=u({...Mt,...Ca,updatedAt:Ie()});var xa=Array.isArray(K.order)?K.order.slice():[];var ei=String(la.status||"OPEN").toUpperCase();ei==="RESOLVED"?xa=xa.filter(Ua=>Ua!==He):xa.includes(He)||(xa=[He,...xa]);var di=ot({...K,signalsById:{...aa,[He]:la},order:xa});Nt(di),U({type:ha||"UPDATE",signalId:He,clientId:la.clientId,patch:Ca});try{typeof window!="undefined"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("fof:triage_updated",{detail:{signalId:He,status:ei}}))}catch(Ua){}return la},At=(He,Ca="RESOLVED")=>{var K,aa;if(!He)return typeof $=="function"&&$("triage.resolve_failed",{reason:"MISSING_ID"},{surface:"triage",module:"engine"}),null;var ha=et(He,{status:"RESOLVED",resolvedAt:Ie(),meta:{...((aa=(K=Ht().signalsById)==null?void 0:K[He])==null?void 0:aa.meta)||{},resolvedReason:Ca}},"RESOLVE");return ha&&typeof $=="function"&&$("triage.resolve",{signalId:He,clientId:ha.clientId,reason:Ca},{surface:"triage",module:"engine"}),ha},ma=(He,Ca=60)=>{if(!He)return typeof $=="function"&&$("triage.snooze_failed",{reason:"MISSING_ID"},{surface:"triage",module:"engine"}),null;var ha=new Date(Date.now()+Ca*60*1e3).toISOString(),K=et(He,{status:"SNOOZED",snoozedUntil:ha},"SNOOZE");return K&&typeof $=="function"&&$("triage.snooze",{signalId:He,clientId:K.clientId,minutes:Ca},{surface:"triage",module:"engine"}),K},Je=He=>{if(!He)return typeof $=="function"&&$("triage.in_progress_failed",{reason:"MISSING_ID"},{surface:"triage",module:"engine"}),null;var Ca=et(He,{status:"IN_PROGRESS"},"IN_PROGRESS");return Ca&&typeof $=="function"&&$("triage.in_progress",{signalId:He,clientId:Ca.clientId},{surface:"triage",module:"engine"}),Ca},Oa=()=>{var He=tt(S.TRIAGE_HISTORY,[]);return Array.isArray(He)?He:[]};window.__FOF_TDEP.TRIAGE={DOC:x,getRules:H,setRules:(He={})=>{var Ca={...H(),...He||{}};return ue(S.TRIAGE_RULES,Ca),typeof $=="function"&&$("triage.rules_update",{patch:He},{surface:"triage",module:"engine"}),U({type:"RULES_UPDATE",patch:He}),Ca},getTriageState:Ht,setTriageState:Nt,getQueue:ba,getHistory:Oa,runTriage:ht,resolveSignal:At,snoozeSignal:ma,markInProgress:Je}}catch(x){try{console.warn("FOF-TDEP Phase 1.2 init failed",x)}catch(S){}}}();var fo=Object.freeze({PLAN_BUILDER:{allow:["Create/Edit Templates","Week/Day structure","Workout composition (blocks/exercises/sets/notes)","Save template & versioning metadata"],forbid:["clientId / groupId","startDate / endDate / schedule dates","nudges / reminders / notification schedules","calendar month/week rendering as primary editor","assignment creation"]},ASSIGN_PLAN:{allow:["Select client/group","Pick template","Set start date","Set nudges/reminders","Preview week (template projection)","Create assignment record"],forbid:["Deep editing of template structure (exercise library, blocks)","Template creation tools (new template, phases)","Program authoring UI"]},CALENDAR:{allow:["Month/Week/Day viewing of scheduled instances","Show assigned plans + sessions","Open details for a scheduled item"],forbid:["Template authoring","Exercise library / workout composition","Assignment creation (should route to Assign Plan)"]}}),go=Object.freeze({id:"tpl_xxx",name:"Template name",goal:"STRENGTH|FAT_LOSS|ENDURANCE|YOGA|HYBRID|CUSTOM",level:"BEGINNER|INTERMEDIATE|ADVANCED",daysPerWeek:3,weeks:[{index:1,days:[{dayIndex:1,kind:"WORKOUT|REST|MOBILITY|RECOVERY",workoutId:"wko_xxx"}]}],workouts:{wko_xxx:{id:"wko_xxx",title:"Upper Strength",intensity:"LOW|MID|HIGH",durationMin:45,blocks:[{type:"SINGLE|SUPERSET|CIRCUIT",items:[{name:"Exercise",sets:[{reps:10,load:"",restSec:90}]}]}],notes:""}},tags:["strength","upper"],createdAt:"ISO",updatedAt:"ISO"}),Ei=Object.freeze({id:"asn_xxx",clientId:"cl_xxx",groupId:null,templateId:"tpl_xxx",startDate:"YYYY-MM-DD",timezone:"Asia/Dubai",nudges:[{type:"WORKOUT",time:"07:00",days:["MON","WED","FRI"]}],status:"ACTIVE|PAUSED|COMPLETED",createdAt:"ISO"});function As(i,s){try{console.warn("%c[FOF CONTRACT]","color:#4b7cff;font-weight:700",i,s||"")}catch(x){}}function yo(i){if(!i||typeof i!="object")return;["clientId","groupId","startDate","endDate","nudges","reminders","notification","timezone"].forEach(x=>{x in i&&As(`Template contains forbidden deployment field: ${x}`,i)})}function Ks(i){!i||typeof i!="object"||["clientId","templateId","startDate"].forEach(s=>{s in i||As(`Assignment missing required field: ${s}`,i)})}window.__FOF_VALIDATE={template:yo,assignment:Ks},window.__FOF_MIP_LOCK=Object.freeze({ref:"FOF-MIP-LOCK-2025-01",version:"v1.1",phase:"PHASE_1_LOCKED",phase0Locked:!0,phase1Locked:!0,baselineFile:"FlowOFit_TRainerOnly_v277_PHASE1_LOCKED_BASELINE.html",timezone:"Asia/Dubai",notes:["PHASE 0: ownership + deep-link scaffolding locked","PHASE 1: shared foundations locked (date engine + filters + generate + exports + event log)"],lockedAtISO:new Date().toISOString()});var Fs=Object.freeze({CRM:"BUSINESS_HUB",AUTOMATION_ENGINE:"BUSINESS_HUB",INSIGHTS:"BUSINESS_HUB",EXPORTS_REPORTING:"REPORTS",FINANCE:"FINANCE_HUB"}),Lo=Object.freeze({AUTOMATION_SHORTCUT:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:null}},CRM_PIPELINE_SHORTCUT:{view:"BUSINESS_HUB",route:{section:"CRM-PIPELINE",sub:null}},CRM_APPLICATIONS_SHORTCUT:{view:"BUSINESS_HUB",route:{section:"CRM-APPLICATIONS",sub:null,filter:"APPLICATIONS"}},FINANCE_SHORTCUT:{view:"FINANCE_HUB"},REPORTS_ENTRY:{view:"REPORTS"}}),Hn=Object.freeze({RECENT_IC_CONVERSIONS:{destination:"REPORTS",phase:"PHASE_2",note:"Move funnel metrics + exports to Reports; keep Admin as thin summary."},LEAD_TO_CONVERSION:{destination:"REPORTS",phase:"PHASE_2",note:"Sales/Marketing funnel reports live in Reporting Module (Flow #5)."},ACTION_QUEUE_SUMMARY:{destination:"BUSINESS_HUB",phase:"PHASE_4",note:"Action Queue is owned by Pro Insights (Flow #9)."}});function es(i,s){var x=String(i||"");return x==="AUTOMATION"?{view:Lo.AUTOMATION_SHORTCUT.view,route:Lo.AUTOMATION_SHORTCUT.route,reason:"PHASE0_AUTOMATION_SHORTCUT"}:x==="NEW_LEADS"||x==="LEADS"?{view:Lo.CRM_PIPELINE_SHORTCUT.view,route:Lo.CRM_PIPELINE_SHORTCUT.route,reason:"PHASE0_CRM_SHORTCUT"}:x==="APPLICATIONS"?{view:Lo.CRM_APPLICATIONS_SHORTCUT.view,route:Lo.CRM_APPLICATIONS_SHORTCUT.route,reason:"PHASE0_APPLICATIONS_SHORTCUT"}:x==="BILLING"||x==="PAYMENTS"||x==="INVOICES"||x==="TAX"||x==="PAYOUTS"?{view:Lo.FINANCE_SHORTCUT.view,reason:"PHASE0_FINANCE_SHORTCUT"}:{view:x,route:s&&s.route||null,reason:null}}var{useState:Ai,useEffect:no,useRef:Co,useMemo:Mi}=React,ts="fof_hub_density";function vs(i,s){var x,S;try{var u=(S=(x=window==null?void 0:window.localStorage)==null?void 0:x.getItem)==null?void 0:S.call(x,i);return u===null||typeof u=="undefined"?s:u}catch(u){return s}}function ko(i,s){var x,S;try{(S=(x=window==null?void 0:window.localStorage)==null?void 0:x.setItem)==null||S.call(x,i,s)}catch(u){}}function $s(){var[i,s]=Ai(()=>vs(ts,"COMFORTABLE")||"COMFORTABLE");no(()=>{var u=$=>{(!$||$.key===ts)&&s(vs(ts,"COMFORTABLE")||"COMFORTABLE")};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)},[]);var x=u=>{var $=String(u||"COMFORTABLE").toUpperCase()==="COMPACT"?"COMPACT":"COMFORTABLE";ko(ts,$),s($)},S=String(i||"").toUpperCase()==="COMPACT";return{density:i,setDensity:x,isCompact:S}}(function(){try{if(window.__FOF_SHARED_FOUNDATIONS_V1_INSTALLED)return;window.__FOF_SHARED_FOUNDATIONS_V1_INSTALLED=!0,window.__FOF_SHARED_FOUNDATIONS_V1=Object.freeze({id:"FOF-PHASE1-FOUNDATIONS-V1",lockedRef:"FOF-MIP-LOCK-2025-01_v1.1",installedAt:new Date().toISOString(),tz:"Asia/Dubai"});var i=2500,s=(Q,w)=>{try{var L=localStorage.getItem(Q);return L?JSON.parse(L):w}catch(L){return w}},x=(Q,w)=>{try{localStorage.setItem(Q,JSON.stringify(w))}catch(L){}},S="fof_eventlog_v1",u="fof_segments_v1",$=()=>({ts:Date.now(),iso:new Date().toISOString(),tz:window.__FOF_SHARED_FOUNDATIONS_V1.tz,href:typeof location!="undefined"?location.href:""}),tt=()=>s(u,{}),ue=(Q,w)=>{var L=tt();return L[String(Q)]=w,x(u,L),L},Ie=()=>s(S,[]),fe=(Q,w)=>{var L={name:String(Q||"event"),payload:w||{},...$(),segments:tt()},ut=Ie();return ut.push(L),ut.length>i&&ut.splice(0,ut.length-i),x(S,ut),L};window.FOF_EVENT_LOG_V1=Object.freeze({track:(Q,w)=>{try{typeof Bt=="function"&&Bt(Q,w)}catch(L){}return fe(Q,w)},segment:Q=>(!Q||typeof Q!="object"||Object.keys(Q).forEach(w=>ue(w,Q[w])),tt()),query:({fromTs:Q,toTs:w,predicate:L}={})=>{var ut=Ie(),ot=typeof Q=="number"?Q:-1/0,ht=typeof w=="number"?w:1/0,ba=typeof L=="function"?L:null;return ut.filter(et=>et.ts>=ot&&et.ts<=ht).filter(et=>ba?!!ba(et):!0)}});var B=Q=>{var w=new Date(Q);return w.setHours(0,0,0,0),w},X=Q=>{var w=new Date(Q);return w.setHours(23,59,59,999),w},ne=Q=>{var w=new Date,L=String(Q||"LAST_7_DAYS"),ut=B(w),ot=X(w),ht={preset:L,timezone:window.__FOF_SHARED_FOUNDATIONS_V1.tz,granularity:"day"};if(L==="TODAY")return{...ht,start:ut.getTime(),end:ot.getTime()};if(L==="YESTERDAY"){var ba=new Date(ut.getTime()-864e5);return{...ht,start:B(ba).getTime(),end:X(ba).getTime()}}if(L==="LAST_7_DAYS"){var ba=new Date(ut.getTime()-5184e5);return{...ht,start:B(ba).getTime(),end:ot.getTime()}}if(L==="LAST_30_DAYS"){var ba=new Date(ut.getTime()-25056e5);return{...ht,start:B(ba).getTime(),end:ot.getTime()}}if(L==="THIS_MONTH"){var ba=new Date(w.getFullYear(),w.getMonth(),1),et=new Date(w.getFullYear(),w.getMonth()+1,0);return{...ht,start:B(ba).getTime(),end:X(et).getTime()}}if(L==="LAST_MONTH"){var ba=new Date(w.getFullYear(),w.getMonth()-1,1),et=new Date(w.getFullYear(),w.getMonth(),0);return{...ht,start:B(ba).getTime(),end:X(et).getTime()}}return{...ht,start:ut.getTime(),end:ot.getTime()}},W="fof_date_range_v1",J=()=>s(W,null),z=Q=>x(W,Q);window.FOF_DATE_ENGINE=Object.freeze({presets:["TODAY","YESTERDAY","LAST_7_DAYS","LAST_30_DAYS","THIS_MONTH","LAST_MONTH","CUSTOM"],resolve:Q=>ne(Q),get:()=>J()||ne("LAST_7_DAYS"),set:Q=>(z(Q),Q)}),window.useFoFDateRange=function(Q){var w=()=>{var ba=window.FOF_DATE_ENGINE.get();return ba&&ba.preset?ba:window.FOF_DATE_ENGINE.resolve(Q||"LAST_7_DAYS")},[L,ut]=React.useState(w);return React.useEffect(()=>{window.FOF_DATE_ENGINE.set(L)},[L&&L.start,L&&L.end,L&&L.preset]),{dr:L,setDr:ut,setPreset:ba=>{if(ba==="CUSTOM")return ut(At=>({...At||{},preset:"CUSTOM"}));var et=window.FOF_DATE_ENGINE.resolve(ba);ut(et)},setCustom:(ba,et)=>{ut(At=>({...At||{},preset:"CUSTOM",start:ba,end:et,timezone:window.__FOF_SHARED_FOUNDATIONS_V1.tz,granularity:"day"}))}}};var H="fof_filters_v1";window.FOF_FILTER_ENGINE=Object.freeze({schema:Object.freeze({clientId:"string|null",status:"string|null",segment:"string|null",source:"string|null",product:"string|null",paymentStatus:"string|null",coachId:"string|null"}),get:()=>s(H,{}),set:Q=>(x(H,Q||{}),Q||{}),sanitize:Q=>{var w={},L=window.FOF_FILTER_ENGINE.schema;return Object.keys(L).forEach(ut=>{Q&&Object.prototype.hasOwnProperty.call(Q,ut)&&(w[ut]=Q[ut])}),w}}),window.useFoFFilters=function(Q){var w=()=>{var ba=window.FOF_FILTER_ENGINE.get();return window.FOF_FILTER_ENGINE.sanitize({...ba||{},...Q||{}})},[L,ut]=React.useState(w);return React.useEffect(()=>{window.FOF_FILTER_ENGINE.set(L)},[JSON.stringify(L||{})]),{filters:L,setFilters:ut,set:(ba,et)=>ut(At=>({...At||{},[ba]:et})),clear:()=>ut({})}};var Ht=(Q,w)=>{var L=document.createElement("a"),ut=URL.createObjectURL(w);L.href=ut,L.download=Q,document.body.appendChild(L),L.click(),setTimeout(()=>{URL.revokeObjectURL(ut),L.remove()},0)},Nt=(Q,w)=>{var L=w&&w.length?w:Q&&Q[0]?Object.keys(Q[0]):[],ut=ba=>{var et=ba==null?"":String(ba);return/[",\n]/.test(et)?'"'+et.replace(/"/g,'""')+'"':et},ot=L.map(ut).join(","),ht=(Q||[]).map(ba=>L.map(et=>ut(ba?ba[et]:"")).join(",")).join(`
`);return ot+`
`+ht},U=(Q,w)=>{var L=window.open("","_blank","noopener,noreferrer");return L?(L.document.open(),L.document.write(`<!doctype html><html><head><meta charset="utf-8"/><title>${Q||"Report"}</title>
        <style>
          body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px;}
          h1{font-size:18px;margin:0 0 8px;}
          .meta{color:#666;font-size:12px;margin:0 0 16px;}
          table{width:100%;border-collapse:collapse;margin-top:12px;}
          th,td{border:1px solid #ddd;padding:8px;font-size:12px;text-align:left;}
        </style>
      </head><body>${w||""}</body></html>`),L.document.close(),L.focus(),setTimeout(()=>{L.print()},250),!0):!1};(function(){var Q=et=>String(et).padStart(2,"0"),w=et=>{try{var At=et instanceof Date?et:new Date(et);return`${At.getFullYear()}${Q(At.getMonth()+1)}${Q(At.getDate())}`}catch(At){return"00000000"}},L=()=>{var et=new Date;return`${et.getFullYear()}${Q(et.getMonth()+1)}${Q(et.getDate())}_${Q(et.getHours())}${Q(et.getMinutes())}${Q(et.getSeconds())}`},ut=et=>String(et||"REPORT").trim().replace(/\s+/g,"_").replace(/[^A-Za-z0-9_]/g,"").toUpperCase()||"REPORT",ot=et=>et?et.preset?String(et.preset).toUpperCase():`${w(et.start)}-${w(et.end)}`:"RANGE",ht=({reportKey:et,dr:At,ext:ma}={})=>{var Je=ut(et),Oa=ot(At),He=(ma||"csv").toLowerCase();return`FlowOFit_${Je}_${Oa}_${L()}.${He}`},ba={filenameFor:ht,exportCSV:({rows:et,columns:At,filename:ma,reportKey:Je,dr:Oa}={})=>{var He=ma||ht({reportKey:Je,dr:Oa,ext:"csv"});ma&&!/^FlowOFit_/i.test(String(ma))&&(He=ht({reportKey:Je,dr:Oa,ext:"csv"}));var Ca=Nt(et||[],At||null);Ht(He,new Blob([Ca],{type:"text/csv;charset=utf-8"}));try{window.FOF_EVENT_LOG_V1.track("export_csv",{filename:He,rows:(et||[]).length,reportKey:ut(Je),range:ot(Oa)})}catch(ha){}return!0},exportPDF:({html:et,filename:At,reportKey:ma,dr:Je,title:Oa}={})=>{var He=At||ht({reportKey:ma,dr:Je,ext:"pdf"});At&&!/^FlowOFit_/i.test(String(At))&&(He=ht({reportKey:ma,dr:Je,ext:"pdf"}));var Ca=printHTML(`<div style="font-family: ui-sans-serif, system-ui; padding: 18px;">
        <div style="margin-bottom:10px;">
          <div style="font-size:18px; font-weight:800;">${Zi(Oa||ma||"FlowOFit Report")}</div>
          <div style="opacity:.7; font-size:12px;">${Zi(ot(Je))} \u2022 ${Zi(He)}</div>
        </div>
        ${et||""}
      </div>`);try{window.FOF_EVENT_LOG_V1.track("export_pdf",{filename:He,reportKey:ut(ma),range:ot(Je)})}catch(ha){}return Ca}};window.FOF_EXPORT_ENGINE_V2=Object.freeze(ba),window.FOF_EXPORT_ENGINE_V1=window.FOF_EXPORT_ENGINE_V2})(),window.FOF_GENERATE_ENGINE_V1=Object.freeze({generate:async({reportKey:Q,dateRange:w,filters:L,context:ut}={})=>{var ot=Q||"REPORT",ht=w||window.FOF_DATE_ENGINE.get(),ba=L||window.FOF_FILTER_ENGINE.get(),et=[{metric:"MRR",value:1250,period:"Monthly"},{metric:"Churn",value:"3.2%",period:"Monthly"},{metric:"New Leads",value:42,period:"Selected range"},{metric:"Conversions",value:11,period:"Selected range"}],At=`${ot}:${ht&&ht.preset||"CUSTOM"}:${ba&&(ba.source||ba.status||ba.segment)||"ALL"}`,ma=et.map((Je,Oa)=>({...Je,report:ot,tag:At,idx:Oa+1}));await new Promise(Je=>setTimeout(Je,250));try{window.FOF_EVENT_LOG_V1.track("report_generated",{reportKey:ot,preset:ht==null?void 0:ht.preset,filters:ba,context:ut||null,rows:ma.length})}catch(Je){}return ma}}),window.useFoFGenerate=function(Q,w){var[L,ut]=React.useState({status:"idle",rows:null,error:null,ts:null});return{...L,generate:async(ba={})=>{try{ut(At=>({...At,status:"loading",error:null}));var et=await window.FOF_GENERATE_ENGINE_V1.generate({reportKey:Q,dateRange:ba.dateRange||(w==null?void 0:w.dateRange),filters:ba.filters||(w==null?void 0:w.filters),context:ba.context||(w==null?void 0:w.context)});return ut({status:"ready",rows:et,error:null,ts:Date.now()}),et}catch(et){return ut({status:"error",rows:null,error:et,ts:Date.now()}),null}},clear:()=>ut({status:"idle",rows:null,error:null,ts:null})}},window.FOF_REPORT_LAYOUT=Object.freeze({rules:Object.freeze({exportOwner:"REPORTS",insightNoExport:!0,financeNoExport:!0})})}catch(i){console.warn("FOF PHASE 1 foundations install failed:",i)}})(),function(){try{if(window.__fofClickGuardInstalled)return;window.__fofClickGuardInstalled=!0,document.addEventListener("click",function(i){var s=i.target&&i.target.closest?i.target.closest("a"):null;if(!s)return;var x=(s.getAttribute("href")||"").trim();(x===""||x==="#"||x.startsWith("#"))&&i.preventDefault()},!0),document.addEventListener("click",function(i){var s=i.target&&i.target.closest?i.target.closest("button"):null;s&&(s.getAttribute("type")||s.setAttribute("type","button"))},!0),document.addEventListener("click",function(i){if(!(i.target&&i.target.closest?i.target.closest('button, [role="button"], a, input[type="button"], input[type="submit"]'):null))return;var x=window.scrollY||document.documentElement.scrollTop||0;setTimeout(()=>{if((window.scrollY||document.documentElement.scrollTop||0)+12<x)try{window.scrollTo(0,x)}catch(u){}},0)},!0),document.addEventListener("submit",function(i){i.preventDefault()},!0)}catch(i){}}();function is(i){if(i==null||i===!1||i===!0)return i;try{if(React&&React.isValidElement&&React.isValidElement(i))return i}catch(x){}if(Array.isArray(i))return i.map(is);var s=typeof i;return s==="string"||s==="number"?i:""}(function(){try{if(!React||!React.createElement||React.__fofCreateElementPatched)return;var i=React.createElement;React.createElement=function(s,x,...S){var u=S.map(is);return i.apply(this,[s,x,...u])},React.__fofCreateElementPatched=!0}catch(i){}})();var xs=()=>window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"id_"+Math.random().toString(16).slice(2)+Date.now(),ps=()=>new Date().toISOString(),Ho=(()=>{var i="fof_event_log_v1",x=()=>{try{return JSON.parse(localStorage.getItem(i)||"[]")}catch(tt){return[]}},S=tt=>{try{localStorage.setItem(i,JSON.stringify(tt.slice(-500)))}catch(ue){}};return{read:x,push:tt=>{var ue=x();return ue.push(tt),S(ue),tt},clear:()=>S([]),KEY:i}})(),Bt=(i,s={})=>{var x={event_id:xs(),event_name:i,ts:ps(),tenant_id:window.__fofTenantId||"tenant_demo",actor_type:window.__fofActorType||"user",actor_id:window.__fofActorId||"demo_user",session_id:window.__fofSessionId||(window.__fofSessionId=xs()),view:window.__fofView||null,payload:s};return Ho.push(x),x},ta=(i,s,x={})=>{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:i,body:s,meta:x}}))},Ka=(i={})=>{try{var s=i&&i.title?String(i.title):"Confirm",x=i&&(i.message||i.body)?String(i.message||i.body):"",S=x?s+`

`+x:s,u=window.confirm(S);try{u&&typeof i.onConfirm=="function"&&i.onConfirm(),!u&&typeof i.onCancel=="function"&&i.onCancel()}catch($){}return u}catch(s){return!0}};window.confirmDialog=window.confirmDialog||Ka;var{motion:oi,AnimatePresence:io}=window.Motion?window.Motion:{motion:{div:"div"},AnimatePresence:({children:i})=>i},_=({name:i,size:s=20,className:x="",color:S})=>{var u=Co(null);return no(()=>{if(window.lucide&&window.lucide.icons&&window.lucide.icons[i]&&u.current){var $=window.lucide.createElement(window.lucide.icons[i]);$.setAttribute("width",s),$.setAttribute("height",s),x&&$.setAttribute("class",x),S&&$.setAttribute("stroke",S),u.current.innerHTML="",u.current.appendChild($)}else!window.lucide&&u.current&&(u.current.innerHTML="<span>?</span>")},[i,s,x,S]),React.createElement("span",{ref:u,className:"inline-flex items-center justify-center "+x,style:{width:s,height:s}})},Zs=i=>i<10?"0"+i:String(i),Zo=i=>{try{var s=i.getFullYear(),x=Zs(i.getMonth()+1),S=Zs(i.getDate());return s+"-"+x+"-"+S}catch(s){return""}},nn=({value:i,onChange:s,className:x="",inputClassName:S="",label:u=null,placeholder:$="Select date"})=>{var[tt,ue]=React.useState(!1),Ie=React.useRef(null),fe=i||"",B=()=>{try{if(fe&&/^\d{4}-\d{2}-\d{2}$/.test(fe)){var[U,Q,w]=fe.split("-").map(L=>parseInt(L,10));return new Date(U,(Q||1)-1,w||1)}}catch(U){}return new Date},[X,ne]=React.useState(()=>{var U=B();return new Date(U.getFullYear(),U.getMonth(),1)});React.useEffect(()=>{if(!tt)return;var U=Q=>{try{Ie.current&&!Ie.current.contains(Q.target)&&ue(!1)}catch(w){}};return document.addEventListener("mousedown",U,!0),document.addEventListener("touchstart",U,!0),()=>{document.removeEventListener("mousedown",U,!0),document.removeEventListener("touchstart",U,!0)}},[tt]),React.useEffect(()=>{if(fe&&/^\d{4}-\d{2}-\d{2}$/.test(fe)){var[U,Q]=fe.split("-").map(w=>parseInt(w,10));U&&Q&&ne(new Date(U,Q-1,1))}},[fe]);var W=X.toLocaleString(void 0,{month:"long",year:"numeric"}),z=(new Date(X.getFullYear(),X.getMonth(),1).getDay()+6)%7,H=new Date(X.getFullYear(),X.getMonth(),1-z),Ht=[];for(var U=0;U<42;U++){var Q=new Date(H.getFullYear(),H.getMonth(),H.getDate()+U),w=Zo(Q),L=Q.getMonth()===X.getMonth(),ut=w===fe;Ht.push({d:Q,iso:w,inMonth:L,selected:ut})}var Nt=S||"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90";return React.createElement("div",{ref:Ie,className:"relative "+x},u?React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},u):null,React.createElement("button",{type:"button",onClick:()=>ue(U=>!U),className:Nt+" text-left flex items-center justify-between gap-2 hover:bg-white/5"},React.createElement("span",{className:"truncate"},fe||$),React.createElement(_,{name:"Calendar",size:14,className:"text-white/70"})),tt&&React.createElement("div",{className:"absolute z-[999] mt-2 w-[292px] rounded-2xl border border-white/12 bg-titanium-950 shadow-[0_24px_70px_rgba(0,0,0,0.65)] p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>ne(U=>new Date(U.getFullYear(),U.getMonth()-1,1)),className:"p-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10"},React.createElement(_,{name:"ChevronLeft",size:14,className:"text-white/80"})),React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},W),React.createElement("button",{type:"button",onClick:()=>ne(U=>new Date(U.getFullYear(),U.getMonth()+1,1)),className:"p-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10"},React.createElement(_,{name:"ChevronRight",size:14,className:"text-white/80"}))),React.createElement("div",{className:"mt-2 grid grid-cols-7 gap-1 text-[10px] font-mono text-white/55"},["M","T","W","T","F","S","S"].map((U,Q)=>React.createElement("div",{key:Q,className:"text-center py-1"},U))),React.createElement("div",{className:"grid grid-cols-7 gap-1"},Ht.map(({iso:U,inMonth:Q,selected:w},L)=>React.createElement("button",{key:U+"-"+L,type:"button",onClick:()=>{try{s&&s(U)}catch(ut){}ue(!1)},className:"h-9 rounded-xl border text-[12px] font-bold hover:bg-white/8 "+(w?"border-[rgba(77,233,255,0.55)] bg-[rgba(77,233,255,0.18)] text-white":"border-white/8 bg-transparent ")+(Q?" text-white/90":" text-white/35")},String(parseInt(U.slice(-2),10))))),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{var U=Zo(new Date);try{s&&s(U)}catch(Q){}ne(new Date(new Date().getFullYear(),new Date().getMonth(),1)),ue(!1)},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Today"),React.createElement("button",{type:"button",onClick:()=>ue(!1),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Close"))))},Bn=({value:i,onChange:s,className:x="",inputClassName:S="",label:u=null,stepMin:$=15})=>{var tt=i||"09:00",ue=Math.max(5,Math.min(60,$)),Ie=[];for(var B=0;B<24;B++)for(var X=0;X<60;X+=ue)Ie.push(Zs(B)+":"+Zs(X));return React.createElement("div",{className:x},u?React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},u):null,React.createElement("select",{value:tt,onChange:B=>{try{s&&s(B.target.value)}catch(X){}},className:S||"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},Ie.map(B=>React.createElement("option",{key:B,value:B},B))))},yn=({devMode:i,emits:s=[]})=>{if(!i||!s||s.length===0)return null;var x=s.join(", ");return React.createElement("span",{className:"ml-2 inline-flex items-center gap-1 rounded-full border border-midnight-600 bg-midnight-900/70 px-2 py-[2px] text-[9px] font-mono text-slate-300"},React.createElement(_,{name:"Bug",size:12}),"Emits: ",x)},Os=({devMode:i,onToggle:s})=>{var[x,S]=React.useState(()=>Ho.read());if(React.useEffect(()=>{if(!i)return;var $=setInterval(()=>{try{var tt=Ho.read();S(tt)}catch(tt){}},500);return()=>clearInterval($)},[i]),!i)return null;var u=(x||[]).slice(-8).reverse();return React.createElement("div",{className:"fixed bottom-4 right-4 z-[998] w-[360px] max-w-[calc(100vw-2rem)]"},React.createElement("div",{className:"glass-panel border border-midnight-700 rounded-3xl p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(_,{name:"Bug",size:16,className:"text-emerald-300"}),React.createElement("div",{className:"text-sm font-bold text-white"},"Dev Mode"),React.createElement("span",{className:"text-[9px] font-mono text-slate-400"},"debug badges + live events")),React.createElement("button",{onClick:s,className:"px-3 py-1.5 rounded-xl bg-midnight-900 border border-midnight-700 hover:border-emerald-500 text-xs text-slate-200 hover:text-white"},"Turn Off")),React.createElement("div",{className:"mt-3 max-h-[220px] overflow-auto space-y-2"},u.length===0?React.createElement("div",{className:"text-xs text-slate-400"},"No events yet. Perform any action to see events."):u.map(($,tt)=>React.createElement("div",{key:tt,className:"rounded-2xl border border-midnight-800 bg-midnight-950/60 p-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono text-slate-100"},$.event||$.event_name||"event"),React.createElement("div",{className:"text-[9px] text-slate-500"},($.timestamp||"").toString().slice(11,19))),$.payload&&React.createElement("div",{className:"mt-1 text-[9px] text-slate-400 line-clamp-2"},JSON.stringify($.payload))))),React.createElement("div",{className:"mt-3 text-[9px] text-slate-400"},"Tip: Use Admin \u2192 Advanced Analytics to verify funnels & audit events. Dev Mode never shows to real users.")))},vn=({data:i,onClose:s})=>i?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] flex items-center justify-center bg-black/55 p-4 modal-overlay",onMouseDown:s},React.createElement("div",{className:"w-full max-w-xl glass-panel rounded-3xl p-6 border border-midnight-700 bg-midnight-900 modal-card",onMouseDown:x=>x.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono text-slate-400 uppercase tracking-widest"},"Info"),React.createElement("h3",{className:"text-lg font-bold text-white"},Zi(i.title))),React.createElement("button",{onClick:s,className:"p-2 rounded-xl hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 text-sm text-slate-200 whitespace-pre-wrap leading-relaxed"},Zi(i.body)),i.meta&&Object.keys(i.meta).length>0&&React.createElement("div",{className:"mt-4 bg-midnight-950 border border-midnight-700 rounded-2xl p-3 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Metadata"),React.createElement("pre",{className:"whitespace-pre-wrap"},JSON.stringify(i.meta,null,2))),React.createElement("div",{className:"mt-5 flex justify-end"},React.createElement("button",{onClick:s,className:"px-4 py-2 rounded-xl bg-brand text-white text-sm font-semibold hover:bg-brand/90"},"Close")))):null,ed=vn,Ur=({title:i="Coming soon",description:s="",actions:x=[]})=>{var S=Array.isArray(x)?x:[];return React.createElement("div",{className:"h-full w-full flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-6 max-w-xl w-full"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-11 h-11 rounded-2xl bg-white/5 border border-white/12 flex items-center justify-center text-white/80 shrink-0"},React.createElement(_,{name:"Sparkles",size:18})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/50"},"Preview"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white leading-tight"},Zi(i)),s?React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed whitespace-pre-wrap"},Zi(s)):null)),S.length>0&&React.createElement("div",{className:"mt-5 flex flex-wrap gap-2 justify-end"},S.map((u,$)=>React.createElement("button",{key:$,type:"button",onClick:()=>{try{u.onClick&&u.onClick()}catch(tt){}},className:"px-3 py-2 rounded-2xl border text-[12px] font-bold "+(u.tone==="primary"?"border-[rgba(16,255,97,0.45)] bg-[rgba(16,255,97,0.14)] hover:bg-[rgba(16,255,97,0.22)] text-white":"border-white/12 bg-white/5 hover:bg-white/10 text-white/80")},Zi(u.label||"Action"))))))},vl=({label:i="Shortcut",onGo:s})=>(React.useEffect(()=>{try{s&&s()}catch(x){}},[]),React.createElement("div",{className:"h-full w-full flex items-center justify-center p-6"},React.createElement("div",{className:"max-w-lg w-full glass-panel p-6 rounded-2xl border border-titanium-800 text-white"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-amber-300"},"Phase 0 deep-link"),React.createElement("div",{className:"mt-2 text-lg font-bold"},i),React.createElement("div",{className:"mt-1 text-sm text-zinc-300"},"This sidebar entry is a shortcut. The single owner lives inside ",React.createElement("span",{className:"text-white font-semibold"},"Business Growth Hub \u2192 Marketing & Automation"),"."),React.createElement("button",{type:"button",onClick:()=>{try{s&&s()}catch(x){}},className:"mt-4 px-4 py-2 rounded-xl bg-amber-500/15 border border-amber-400/40 hover:bg-amber-500/25 text-amber-100 font-mono text-xs uppercase tracking-widest"},"Open owner module")))),Vr=React.createContext(null),Pn=()=>React.useContext(Vr),tn=i=>{try{var s=new Date(i);return Number.isNaN(s.getTime())?"":s.toISOString().slice(0,10)}catch(s){return""}},tr=i=>{var s=new Date(i);return s.setHours(0,0,0,0),s},tl=(i,s)=>{var x=new Date(i);return x.setDate(x.getDate()+s),x},vd=({children:i})=>{var s=React.useMemo(()=>tr(new Date),[]),[x,S]=React.useState(()=>{var X=s;return{preset:"7d",start:tl(X,-6),end:X}}),[u,$]=React.useState(()=>({segment:"All",status:"All",source:"All"})),tt=React.useRef([]),ue=React.useCallback((X,ne={})=>{try{tt.current=[{id:crypto!=null&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random(),ts:new Date().toISOString(),type:X,payload:ne},...tt.current].slice(0,300)}catch(W){}try{window.__FOF_TDEP&&typeof window.__FOF_TDEP.logEvent=="function"&&window.__FOF_TDEP.logEvent(X,ne,{surface:"shared_foundations",module:"shared"})}catch(W){}},[]),Ie=React.useCallback((X,ne="export.csv")=>{try{var W=Array.isArray(X)?X:[],J=W.length?Object.keys(W[0]):[],z=Q=>{var w=Q==null?"":String(Q);return/[",\n]/.test(w)?'"'+w.replace(/"/g,'""')+'"':w},H=[J.join(","),...W.map(Q=>J.map(w=>z(Q[w])).join(","))].join(`
`),Ht=new Blob([H],{type:"text/csv;charset=utf-8;"}),Nt=URL.createObjectURL(Ht),U=document.createElement("a");U.href=Nt,U.download=ne,document.body.appendChild(U),U.click(),U.remove(),URL.revokeObjectURL(Nt)}catch(W){try{alert("CSV export failed in this environment.")}catch(J){}}},[]),fe=React.useCallback((X="Report",ne="report.pdf")=>{try{var W=new Blob([X+`

PDF export template stub (Phase 1).`],{type:"application/pdf"}),J=URL.createObjectURL(W),z=document.createElement("a");z.href=J,z.download=ne,document.body.appendChild(z),z.click(),z.remove(),URL.revokeObjectURL(J)}catch(W){try{alert("PDF export is stubbed in Phase 1.")}catch(J){}}},[]),B=React.useMemo(()=>({dateRange:x,setDateRange:S,filters:u,setFilters:$,logEvent:ue,get eventLog(){return tt.current},exportCSV:Ie,exportPDFStub:fe}),[x,u,ue,Ie,fe]);return React.createElement(Vr.Provider,{value:B},i)},eo=({compact:i=!1})=>{var s=Pn(),x=s==null?void 0:s.dateRange,[S,u]=React.useState(!1),[$,tt]=React.useState(!1),[ue,Ie]=React.useState(()=>tn((x==null?void 0:x.start)||new Date)),[fe,B]=React.useState(()=>tn((x==null?void 0:x.end)||new Date));React.useEffect(()=>{try{!S&&(x!=null&&x.start)&&(x!=null&&x.end)&&(Ie(tn(x.start)),B(tn(x.end)))}catch(H){}},[x,S]);var X=React.useMemo(()=>x?x.preset==="custom"?`${tn(x.start)} \u2192 ${tn(x.end)}`:`Last ${String(x.preset||"7d").replace("d","")} days`:"Date Range",[x]),ne=H=>{try{var Ht=tr(new Date),Nt=tl(Ht,-(H-1));s==null||s.setDateRange({preset:H+"d",start:Nt,end:Ht}),s==null||s.logEvent("date_range_changed",{preset:H+"d",start:tn(Nt),end:tn(Ht)}),tt(!1),u(!1)}catch(Ht){}},W=()=>{try{var H=new Date,Ht=tr(new Date(H.getFullYear(),H.getMonth(),1)),Nt=tr(new Date);s==null||s.setDateRange({preset:"THIS_MONTH",start:Ht,end:Nt}),s==null||s.logEvent("date_range_changed",{preset:"THIS_MONTH",start:tn(Ht),end:tn(Nt)}),tt(!1),u(!1)}catch(H){}},J=()=>{try{var H=tr(new Date(ue)),Ht=tr(new Date(fe));if(Number.isNaN(H.getTime())||Number.isNaN(Ht.getTime()))return alert("Invalid date");s==null||s.setDateRange({preset:"custom",start:H,end:Ht}),s==null||s.logEvent("date_range_changed",{preset:"custom",start:tn(H),end:tn(Ht)}),u(!1)}catch(H){}},z=(H="click")=>{try{s==null||s.logEvent("date_range_opened",{source:"SharedDateRangeBar",via:H})}catch(Ht){}u(!0)};return React.createElement("div",{className:"relative flex items-center gap-2 "+(i?"":"flex-wrap")},React.createElement("button",{type:"button",onClick:()=>z("click"),onFocus:()=>z("tab"),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest",title:"Edit date range"},X),S?React.createElement("div",{className:"absolute z-[70] top-[110%] left-0 w-[320px] max-w-[85vw] rounded-2xl border border-white/10 bg-[#0b1020] shadow-card-strong p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Date range"),React.createElement("button",{type:"button",onClick:()=>u(!1),className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"Close")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>ne(7),className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"Last 7"),React.createElement("button",{type:"button",onClick:()=>ne(30),className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"Last 30"),React.createElement("button",{type:"button",onClick:W,className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"This month"),React.createElement("button",{type:"button",onClick:()=>tt(H=>!H),className:"px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+($?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},"Custom")),$?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Start"),React.createElement("input",{type:"date",value:ue,onChange:H=>Ie(H.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"End"),React.createElement("input",{type:"date",value:fe,onChange:H=>B(H.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"}))),React.createElement("button",{type:"button",onClick:J,className:"mt-3 w-full px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Apply")):null):null)},Si=()=>{var i=Pn(),s=i==null?void 0:i.dateRange,[x,S]=React.useState(!1),[u,$]=React.useState(()=>tn((s==null?void 0:s.start)||new Date)),[tt,ue]=React.useState(()=>tn((s==null?void 0:s.end)||new Date));React.useEffect(()=>{try{!x&&(s!=null&&s.start)&&(s!=null&&s.end)&&($(tn(s.start)),ue(tn(s.end)))}catch(X){}},[s,x]);var Ie=X=>{try{var ne=tr(new Date),W=tl(ne,-(X-1));i==null||i.setDateRange({preset:X+"d",start:W,end:ne}),i==null||i.logEvent("date_range_changed",{preset:X+"d",start:tn(W),end:tn(ne)}),S(!1)}catch(ne){}},fe=()=>{try{var X=tr(new Date(u)),ne=tr(new Date(tt));if(Number.isNaN(X.getTime())||Number.isNaN(ne.getTime()))return alert("Invalid date");i==null||i.setDateRange({preset:"custom",start:X,end:ne}),i==null||i.logEvent("date_range_changed",{preset:"custom",start:tn(X),end:tn(ne)})}catch(X){}},B=React.useMemo(()=>!(s!=null&&s.start)||!(s!=null&&s.end)?"\u2014":tn(s.start)+" \u2192 "+tn(s.end),[s]);return React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[11px] font-mono uppercase tracking-widest select-none"},B),React.createElement("button",{type:"button",onClick:()=>Ie(7),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"7 Days"),React.createElement("button",{type:"button",onClick:()=>Ie(30),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"30 Days"),React.createElement("button",{type:"button",onClick:()=>Ie(90),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"90 Days"),React.createElement("button",{type:"button",onClick:()=>{S(X=>!X),i==null||i.logEvent("date_range_custom_toggled",{open:!x})},className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(x?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},"Custom Date"),x?React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("input",{type:"date",value:u,onChange:X=>$(X.target.value),className:"px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[11px]"}),React.createElement("span",{className:"text-white/50 text-xs font-mono"},"to"),React.createElement("input",{type:"date",value:tt,onChange:X=>ue(X.target.value),className:"px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[11px]"}),React.createElement("button",{type:"button",onClick:fe,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Apply")):null)},Hl=({compact:i=!1})=>{var s=Pn(),x=(s==null?void 0:s.filters)||{},S=$=>{try{var tt={...x,...$};s==null||s.setFilters(tt),s==null||s.logEvent("filters_changed",tt)}catch(tt){}},u=({label:$,value:tt,options:ue,onChange:Ie})=>React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},$),React.createElement("select",{value:tt,onChange:fe=>Ie(fe.target.value),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"},ue.map(fe=>React.createElement("option",{key:fe,value:fe},fe))));return React.createElement("div",{className:"flex items-center gap-3 flex-wrap"},React.createElement(u,{label:"Segment",value:x.segment||"All",options:["All","Active Clients","Leads","Churn Risk"],onChange:$=>S({segment:$})}),React.createElement(u,{label:"Status",value:x.status||"All",options:["All","New","In Progress","Won","Lost"],onChange:$=>S({status:$})}),React.createElement(u,{label:"Source",value:x.source||"All",options:["All","Organic","Referral","Ads","Partnership"],onChange:$=>S({source:$})}),React.createElement("div",{className:"w-full text-[10px] font-mono uppercase tracking-widest text-white/40"},"Active Filters: ",`${x.segment||"All"} \xB7 ${x.status||"Any"} \xB7 ${x.source||"Any"}`))},Pd=({getRows:i,title:s="Report",reportKey:x,context:S=null})=>{var W;var u=Pn(),$=(u==null?void 0:u.dateRange)||{},tt=(u==null?void 0:u.filters)||{},ue=React.useMemo(()=>{try{if($!=null&&$.start&&($!=null&&$.end))return{preset:$.preset||"custom",start:$.start instanceof Date?$.start.getTime():new Date($.start).getTime(),end:$.end instanceof Date?$.end.getTime():new Date($.end).getTime()}}catch(J){}return{preset:($==null?void 0:$.preset)||"custom",start:Date.now()-6*864e5,end:Date.now()}},[$==null?void 0:$.preset,$==null?void 0:$.start,$==null?void 0:$.end]),Ie=x||s,fe=React.useMemo(()=>(i==null?void 0:i())||[],[i,(W=u==null?void 0:u.dateRange)==null?void 0:W.preset,JSON.stringify((u==null?void 0:u.filters)||{})]),B=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate(Ie,{dateRange:ue,filters:tt,context:S||"SHARED_EXPORT"}):{status:"idle",rows:null,generate:async()=>fe,clear:()=>{}},X=B.rows||[],ne=J=>{try{u==null||u.logEvent(J==="csv"?"export_csv_opened":"export_pdf_opened",{title:s,key:Ie}),window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:J,title:s,filename:`${String(s||"Report").replace(/\s+/g,"_")}.${J==="csv"?"csv":"pdf"}`,rows:X}}))}catch(z){}};return React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>B.generate({context:{title:s}}),className:"px-3 py-2 rounded-xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(B.status==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20")},B.status==="loading"?"Generating\u2026":B.rows?"Regenerate":"Generate"),React.createElement("button",{type:"button",disabled:!B.rows,onClick:()=>ne("csv"),className:"px-3 py-2 rounded-xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(B.rows?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!B.rows,onClick:()=>ne("pdf"),className:"px-3 py-2 rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(B.rows?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"),B.rows?null:React.createElement("div",{className:"w-full text-[10px] font-mono uppercase tracking-widest text-white/40"},"Generate first, then export."))},gi=()=>{var i=Pn(),s=i==null?void 0:i.dateRange,x=(i==null?void 0:i.filters)||{},S=React.useMemo(()=>{try{if(s!=null&&s.start&&(s!=null&&s.end))return{preset:s.preset||"custom",start:s.start instanceof Date?s.start.getTime():new Date(s.start).getTime(),end:s.end instanceof Date?s.end.getTime():new Date(s.end).getTime()}}catch(tt){}return{preset:(s==null?void 0:s.preset)||"custom",start:Date.now()-6*864e5,end:Date.now()}},[s==null?void 0:s.preset,s==null?void 0:s.start,s==null?void 0:s.end]),u=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("INSIGHTS_DASH",{dateRange:S,filters:x,context:"BUSINESS_HUB:INSIGHTS-DASH"}):{status:"idle",rows:null,generate:async()=>[],clear:()=>{}},$=tt=>{try{var ue=u.rows||[];window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:tt,title:"Insights_Dash",filename:tt==="csv"?"Insights_Dash.csv":"Insights_Dash.pdf",rows:ue}}))}catch(ue){}};return React.createElement(qo,{title:"Pro Insights",subtitle:"INSIGHTS-DASH foundation shell. Uses shared date range + filters + export engine (Phase 1)."},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-panel p-5 space-y-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"text-[12px] text-zinc-200"},React.createElement("span",{className:"text-white/60 font-mono uppercase tracking-widest text-[10px]"},"Active range:")," ",React.createElement("span",{className:"font-mono text-[11px]"},(s==null?void 0:s.preset)==="custom"?`${tn(s.start)} \u2192 ${tn(s.end)}`:`Last ${String((s==null?void 0:s.preset)||"7d").replace("d","")} days`)),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>u.generate(),className:"px-3 py-2 rounded-xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.status==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20")},u.status==="loading"?"Generating\u2026":u.rows?"Regenerate":"Generate"),React.createElement("button",{type:"button",disabled:!u.rows,onClick:()=>$("csv"),className:"px-3 py-2 rounded-xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.rows?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!u.rows,onClick:()=>$("pdf"),className:"px-3 py-2 rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.rows?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement(Si,null),React.createElement(Hl,null),u.rows?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Generated output (in-page)"),React.createElement("pre",{className:"mt-2 text-[11px] text-white/70 overflow-x-auto"},JSON.stringify(u.rows,null,2))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Generate first"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-300"},"Tap ",React.createElement("span",{className:"text-white/80 font-semibold"},"Generate")," to render an Insights report output, then export.")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Insight"),React.createElement("div",{className:"mt-1 text-white font-semibold"},"Top churn risk segment"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-300"},"Stub. Phase 4 will compute from event log + CRM signals.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Action"),React.createElement("div",{className:"mt-1 text-white font-semibold"},"Nudge leads to complete application"),React.createElement("button",{type:"button",className:"mt-2 px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[11px] font-mono uppercase tracking-widest hover:bg-white/10",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_HUB"}}))}catch(tt){}}},"Records")))))},qo=({title:i,subtitle:s,children:x})=>React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate_back"))}catch(S){}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[11px] font-mono uppercase tracking-widest hover:bg-white/10"},"\u2190 Back"),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/40"},"Phase 1 Foundations")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-panel p-5"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Phase 1 \u2014 Shared Foundations"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},i),s?React.createElement("div",{className:"mt-2 text-[12px] text-zinc-300"},s):null,React.createElement("div",{className:"mt-4 pb-28"},x)))),al=()=>{var i=Pn(),s=i==null?void 0:i.dateRange,[x,S]=React.useState((s==null?void 0:s.preset)||"7d"),[u,$]=React.useState(tn((s==null?void 0:s.start)||new Date)),[tt,ue]=React.useState(tn((s==null?void 0:s.end)||new Date));React.useEffect(()=>{try{S((s==null?void 0:s.preset)||"7d"),$(tn((s==null?void 0:s.start)||new Date)),ue(tn((s==null?void 0:s.end)||new Date))}catch(B){}},[s==null?void 0:s.preset,s==null?void 0:s.start,s==null?void 0:s.end]);var Ie=B=>{try{var X=tr(new Date);var ne=X;B==="7d"&&(ne=tl(X,-6)),B==="30d"&&(ne=tl(X,-29)),B==="90d"&&(ne=tl(X,-89)),i==null||i.setDateRange({preset:B,start:ne,end:X}),i==null||i.logEvent("date_range_changed",{preset:B,start:tn(ne),end:tn(X)});try{window.dispatchEvent(new CustomEvent("fof:navigate_back"))}catch(W){}}catch(X){}},fe=()=>{try{if(!u||!tt)return alert("Select start and end");var B=tr(new Date(u)),X=tr(new Date(tt));if(Number.isNaN(B.getTime())||Number.isNaN(X.getTime()))return alert("Invalid date");i==null||i.setDateRange({preset:"custom",start:B,end:X}),i==null||i.logEvent("date_range_changed",{preset:"custom",start:tn(B),end:tn(X)});try{window.dispatchEvent(new CustomEvent("fof:navigate_back"))}catch(ne){}}catch(B){}};return React.createElement(qo,{title:"Date Range",subtitle:"All foundation modules (Reports, Insights, BH Search, Tax Reporting, Payout Trigger) read from this shared date range."},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},["7d","30d","90d"].map(B=>React.createElement("button",{key:B,type:"button",onClick:()=>Ie(B),className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(x===B?"bg-sky-500/20 border-sky-400/30 text-sky-100":"bg-white/5 border-white/10 text-white hover:bg-white/10")},B==="7d"?"7 Days":B==="30d"?"30 Days":"90 Days"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Custom"),React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Start"),React.createElement("input",{type:"date",value:u,onChange:B=>{S("custom"),$(B.target.value)},type:"date",className:"mt-2 w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"End"),React.createElement("input",{type:"date",value:tt,onChange:B=>{S("custom"),ue(B.target.value)},type:"date",className:"mt-2 w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}))),React.createElement("button",{type:"button",onClick:fe,className:"mt-3 w-full px-3 py-2 rounded-2xl bg-sky-500/15 border border-sky-400/30 hover:bg-sky-500/25 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"Apply Custom Range")))},wd=({payload:i})=>{var s=Pn(),x=i||{},{kind:S="csv",title:u="Export",filename:$="export.csv",rows:tt=[],text:ue=""}=x,Ie=React.useMemo(()=>{try{if(S!=="csv")return"";var X=Array.isArray(tt)?tt:[],ne=X.length?Object.keys(X[0]):[],W=J=>{var z=J==null?"":String(J);return/[",\n]/.test(z)?'"'+z.replace(/"/g,'""')+'"':z};return[ne.join(","),...X.map(J=>ne.map(z=>W(J[z])).join(","))].join(`
`)}catch(X){return""}},[S,tt]),fe=()=>{try{S==="csv"?s==null||s.exportCSV(tt,$):s==null||s.exportPDFStub(u,$),alert("Download started (if your browser blocks file:// downloads, use Copy instead).")}catch(X){}},B=async()=>{var X;try{var ne=S==="csv"?Ie:ue||`${u}

PDF export template stub (Phase 1).`;(X=navigator.clipboard)!=null&&X.writeText&&await navigator.clipboard.writeText(ne),alert("Copied.")}catch(ne){alert("Copy blocked. Select and copy manually from the box.")}};return React.createElement(qo,{title:`Export \u2014 ${S.toUpperCase()}`,subtitle:"Phase 1 export is foundation-level. If downloads are blocked (common on file://), use Copy."},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:fe,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Download"),React.createElement("button",{type:"button",onClick:B,className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Copy")),React.createElement("textarea",{value:S==="csv"?Ie:ue||`${u}

PDF export template stub (Phase 1).`,readOnly:!0,className:"mt-4 w-full min-h-[260px] rounded-2xl bg-black/30 border border-white/10 p-3 text-[12px] text-white/80 font-mono"}))},fd=()=>{var i=Pn(),s=(i==null?void 0:i.dateRange)||{},x=(i==null?void 0:i.filters)||{},S=React.useMemo(()=>{try{if(s!=null&&s.start&&(s!=null&&s.end))return{preset:s.preset||"custom",start:s.start instanceof Date?s.start.getTime():new Date(s.start).getTime(),end:s.end instanceof Date?s.end.getTime():new Date(s.end).getTime()}}catch(Ie){}return{preset:(s==null?void 0:s.preset)||"custom",start:Date.now()-6*864e5,end:Date.now()}},[s==null?void 0:s.preset,s==null?void 0:s.start,s==null?void 0:s.end]),u=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("TAX_REPORTING",{dateRange:S,filters:x,context:"FINANCE_HUB:TAX-REPORTING"}):{status:"idle",rows:null,generate:async()=>[],clear:()=>{}},$=React.useMemo(()=>[{jurisdiction:"UAE",rate:"5%",taxable_amount:1e3,tax:50,range:(s==null?void 0:s.preset)||""},{jurisdiction:"KSA",rate:"15%",taxable_amount:600,tax:90,range:(s==null?void 0:s.preset)||""}],[s==null?void 0:s.preset]),tt=u.rows||$,ue=Ie=>{try{window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:Ie,title:"Tax_Summary",filename:Ie==="csv"?"Tax_Summary.csv":"Tax_Summary.pdf",rows:tt}}))}catch(fe){}};return React.createElement(qo,{title:"TAX-REPORTING",subtitle:"Foundation panel for tax summaries & receipts (Appendix C support). Generate in-page, then export."},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(eo,{compact:!0}),React.createElement(Hl,{compact:!0})),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>u.generate(),className:"px-3 py-2 rounded-xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.status==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20")},u.status==="loading"?"Generating\u2026":u.rows?"Regenerate":"Generate"),React.createElement("button",{type:"button",disabled:!u.rows,onClick:()=>ue("csv"),className:"px-3 py-2 rounded-xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.rows?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!u.rows,onClick:()=>ue("pdf"),className:"px-3 py-2 rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(u.rows?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},[{k:"Taxable Amount",v:"1,600"},{k:"Estimated Tax",v:"140"}].map((Ie,fe)=>React.createElement("div",{key:fe,className:"rounded-2xl border border-white/10 bg-black/10 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},Ie.k),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},Ie.v)))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},u.rows?"Generated rows":"Sample rows (generate to refresh)"),React.createElement("pre",{className:"mt-2 text-[11px] text-white/70 overflow-x-auto"},JSON.stringify(tt,null,2))))},Md=()=>{var i=typeof window!="undefined"&&window.__FOF_PayoutTriggerPage?window.__FOF_PayoutTriggerPage:null;if(i)return React.createElement(i,{onBack:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate_back"))}catch(ne){}}});var s=Pn(),x=(s==null?void 0:s.dateRange)||{},S=(s==null?void 0:s.filters)||{},[u,$]=React.useState(""),[tt,ue]=React.useState(null),Ie=React.useMemo(()=>{try{if(x!=null&&x.start&&(x!=null&&x.end))return{preset:x.preset||"custom",start:x.start instanceof Date?x.start.getTime():new Date(x.start).getTime(),end:x.end instanceof Date?x.end.getTime():new Date(x.end).getTime()}}catch(ne){}return{preset:(x==null?void 0:x.preset)||"custom",start:Date.now()-6*864e5,end:Date.now()}},[x==null?void 0:x.preset,x==null?void 0:x.start,x==null?void 0:x.end]),fe=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("PAYOUT_TRIGGER",{dateRange:Ie,filters:S,context:"FINANCE_HUB:PAYOUT-TRIGGER"}):{status:"idle",rows:null,generate:async()=>[],clear:()=>{}},B=()=>{try{if(!u)return alert("Choose a date");var ne=tr(new Date(u)),W=tr(new Date),J=Math.floor((W-ne)/(1e3*60*60*24));ue(J);var z=J>=11;s==null||s.logEvent("payout_trigger_checked",{days_since_last:J,threshold:11,triggered:z}),alert(z?`TRIGGERED \u2705 (${J} days since last payout)`:`NOT READY (${J} days since last payout)`)}catch(ne){}},X=ne=>{try{var W=fe.rows||[];window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:ne,title:"Payout_Trigger",filename:ne==="csv"?"Payout_Trigger.csv":"Payout_Trigger.pdf",rows:W}}))}catch(W){}};return React.createElement(qo,{title:"PAYOUT-TRIGGER",subtitle:"Foundation rule stub: payout runs if last payout is \u2265 11 days ago (default). Uses unified date range + unified filters + generate-then-export."},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(eo,{compact:!0}),React.createElement(Hl,{compact:!0})),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>fe.generate({context:{lastPayout:u||null,daysSince:tt}}),className:"px-3 py-2 rounded-xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(fe.status==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20")},fe.status==="loading"?"Generating\u2026":fe.rows?"Regenerate":"Generate"),React.createElement("button",{type:"button",disabled:!fe.rows,onClick:()=>X("csv"),className:"px-3 py-2 rounded-xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(fe.rows?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!fe.rows,onClick:()=>X("pdf"),className:"px-3 py-2 rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(fe.rows?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Last payout date (simulate)"),React.createElement("input",{value:u,onChange:ne=>$(ne.target.value),type:"date",className:"mt-2 w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}),React.createElement("button",{type:"button",onClick:B,className:"mt-3 w-full px-3 py-2 rounded-2xl bg-amber-500/10 border border-amber-400/30 hover:bg-amber-500/20 text-amber-100 text-[11px] font-mono uppercase tracking-widest"},"Check Trigger"),tt!==null&&React.createElement("div",{className:"mt-3 text-[12px] text-zinc-300"},"Days since last payout: ",React.createElement("span",{className:"text-white/80 font-semibold"},tt)," (threshold: 11)")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},fe.rows?"Generated output":"Generate first"),fe.rows?React.createElement("pre",{className:"mt-2 text-[11px] text-white/70 overflow-x-auto"},JSON.stringify(fe.rows,null,2)):React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Tap ",React.createElement("span",{className:"text-white/80 font-semibold"},"Generate")," to create the in-app report output, then export.")))},td=({open:i,onClose:s,items:x})=>{var[S,u]=React.useState(""),$=[{id:"ALL",label:"All"},{id:"PROGRAMS",label:"Programs"},{id:"WORKOUTS",label:"Workouts"},{id:"ASSESSMENTS",label:"Assessments"},{id:"NUTRITION",label:"Nutrition"},{id:"REHAB",label:"Rehab"},{id:"YOGA",label:"Yoga"},{id:"SPORT_BLOCKS",label:"Sport Blocks"}],[tt,ue]=React.useState("ALL"),Ie={PROGRAMS:["PROGRAM","PROGRAM_TEMPLATE","BLOCK","MESOCYCLE"],WORKOUTS:["WORKOUT","SESSION","WOD","WORKOUT_TEMPLATE"],ASSESSMENTS:["ASSESSMENT","TEST","SCREEN","CHECKIN_FORM"],NUTRITION:["NUTRITION","MEAL_PLAN","MACRO_TEMPLATE","NUTRITION_TEMPLATE"],REHAB:["REHAB","PREHAB","PHYSIO","RECOVERY"],YOGA:["YOGA","MOBILITY","FLEXIBILITY","BREATHWORK"],SPORT_BLOCKS:["SPORT_BLOCK","SPORT","SPORT_SESSION"]};React.useEffect(()=>{i&&u("")},[i]);var fe=React.useMemo(()=>{var B=(S||"").toLowerCase().trim(),X=Array.isArray(x)?x:[];return B?X.filter(ne=>(ne.label||"").toLowerCase().includes(B)||(ne.keywords||"").toLowerCase().includes(B)):X},[S,x]);return i?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[90] bg-black/65 flex items-start justify-center p-4 md:p-8",onClick:s},React.createElement("div",{className:"w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0b1020] shadow-card-strong p-4",onClick:B=>B.stopPropagation()},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"hidden md:flex items-center gap-1 rounded-xl border border-white/10 bg-black/30 p-1"},["TODAY","7D","30D"].map(B=>React.createElement("button",{key:B,type:"button",onClick:()=>setDashRange(B),className:"px-3 py-1.5 rounded-lg text-[12px] "+(dashRange===B?"bg-white/10 text-white":"text-white/65 hover:text-white/90")},B==="TODAY"?"Today":B==="7D"?"7d":"30d"))),React.createElement("input",{autoFocus:!0,value:S,onChange:B=>u(B.target.value),placeholder:"Search\u2026 (BH-SEARCH)",className:"w-full px-4 py-3 rounded-2xl bg-white/5 border border-white/10 text-white"}),React.createElement("button",{type:"button",onClick:s,className:"px-3 py-2 rounded-2xl bg-white/5 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Esc")),React.createElement("div",{className:"mt-3 max-h-[50vh] overflow-y-auto trainer-scroll"},fe.map((B,X)=>React.createElement("button",{key:X,type:"button",onClick:()=>{try{B.onPick&&B.onPick()}catch(ne){}try{s&&s()}catch(ne){}},className:"w-full text-left px-4 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 mb-2"},React.createElement("div",{className:"text-sm font-semibold text-white"},B.label),B.hint&&React.createElement("div",{className:"text-[12px] text-zinc-400 mt-1"},B.hint))),!fe.length&&React.createElement("div",{className:"px-4 py-6 text-center text-sm text-zinc-400"},"No matches")))):null},ar=(i,s="neutral")=>{var x="inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-extrabold uppercase tracking-wider",S=String(s||"neutral").toLowerCase(),u=S==="good"||S==="success"?"border-emerald-400/30 bg-emerald-400/10 text-emerald-200":S==="warn"||S==="warning"?"border-amber-400/30 bg-amber-400/10 text-amber-200":S==="bad"||S==="danger"||S==="error"?"border-rose-400/30 bg-rose-400/10 text-rose-200":"border-white/12 bg-white/5 text-white/70";return x+" "+u},Fd=({route:i,onRoute:s,onOpenAutomations:x})=>{var qr,hl,Sn;var S=i&&i.section?i.section:"BH-ENTRY",u=[{id:"BH-ENTRY",label:"Overview",desc:"BH-ENTRY \u2014 Business Hub home"},{id:"BH-SEARCH",label:"Global Search",desc:"BH-SEARCH \u2014 Command palette search"},{id:"CRM-PIPELINE",label:"CRM Pipeline",desc:"CRM-PIPELINE \u2014 Leads & client pipeline"},{id:"CRM-APPLICATIONS",label:"Applications",desc:"CRM-APPLICATIONS \u2014 Intake + filters"},{id:"MA-ENTRY",label:"Marketing & Automations",desc:"MA-ENTRY \u2014 Single automation engine"},{id:"INSIGHTS-DASH",label:"Pro Insights",desc:"INSIGHTS-DASH \u2014 Insights dashboard"},{id:"INSIGHTS-ACTIONS",label:"Action Queue",desc:"INSIGHTS-ACTIONS \u2014 Prioritised tasks"},{id:"INSIGHTS-LTV",label:"LTV Advisory",desc:"INSIGHTS-LTV \u2014 Advisory predictor (stub)"}],[$,tt]=React.useState(!1),[ue,Ie]=React.useState(""),fe=u.find(Be=>Be.id===S)||u[0],B=Pn(),[X,ne]=React.useState(!1),W=Object.freeze({OVERVIEW:"OVERVIEW",CRM_PIPELINE:"CRM_PIPELINE",CRM_APPLICATIONS:"CRM_APPLICATIONS",CRM_RECORD:"CRM_RECORD",MARKETING_HOME:"MARKETING_HOME",MA_BROADCAST:"MA_BROADCAST",MA_DRIP:"MA_DRIP",MA_REFERRALS:"MA_REFERRALS",MA_AUTOPILOT:"MA_AUTOPILOT",MA_SAFETY:"MA_SAFETY",INSIGHTS_DASH:"INSIGHTS_DASH",INSIGHTS_ACTIONS:"INSIGHTS_ACTIONS",INSIGHTS_LTV:"INSIGHTS_LTV"}),[J,z]=React.useState(W.OVERVIEW),[H,Ht]=React.useState(null),[Nt,U]=React.useState("OVERVIEW"),[Q,w]=React.useState(!1),[L,ut]=React.useState(null),[ot,ht]=React.useState("ALL"),ba="fof.insights.ltv_segments.v1",et={activePresetId:"DEFAULT",highMin:500,midMin:200,presets:[{id:"DEFAULT",name:"Default",highMin:500,midMin:200},{id:"CONSERVATIVE",name:"Conservative",highMin:800,midMin:300},{id:"AGGRESSIVE",name:"Aggressive",highMin:350,midMin:150}]},[At,ma]=React.useState(!1),[Je,Oa]=React.useState(""),[He,Ca]=React.useState(()=>{try{return di(ba,et)}catch(Be){return et}});React.useEffect(()=>{try{Ua(ba,He)}catch(Be){}},[He]);var[ha,K]=React.useState("EMAIL"),[aa,Mt]=React.useState(""),[la,xa]=React.useState(""),ei=Be=>`fof.ma.${Be}.v1`,di=(Be,Ia)=>{try{var q=localStorage.getItem(Be);return q?JSON.parse(q):Ia}catch(q){return Ia}},Ua=(Be,Ia)=>{try{localStorage.setItem(Be,JSON.stringify(Ia))}catch(q){}},[sa,vt]=React.useState(()=>di(ei("quiet_hours"),{start:22,end:7})),[Ge,$e]=React.useState(()=>di(ei("broadcasts"),[]));React.useEffect(()=>{Ua(ei("broadcasts"),Ge)},[Ge]),React.useEffect(()=>{Ua(ei("quiet_hours"),sa)},[sa]);var[Xa,mi]=React.useState(()=>di(ei("safety_cfg"),{requireConsent:!0,defaultFooterUnsub:!0,globalCap7d:4,perClientDailyCap:1,allowPush:!1,previewRequired:!0,suppression:[],lastUpdated:null}));React.useEffect(()=>{Ua(ei("safety_cfg"),Xa)},[Xa]);var[xi,rs]=React.useState(()=>di(ei("autopilot_cfg"),{enabled:{churn:!1,recovery:!1,motivation:!1,nutrition:!1},caps7d:{churn:2,recovery:3,motivation:2,nutrition:3},lastUpdated:null}));React.useEffect(()=>{Ua(ei("autopilot_cfg"),xi)},[xi]);var[ct,zt]=React.useState(()=>di(ei("referral_cfg"),{enabled:!0,code:"",baseUrl:"https://flowofit.app/r",shareMessage:"Join me on FlowOFit \u2014 use my referral link: ",rewardType:"DISCOUNT",rewardValue:10,rewardUnit:"PERCENT",createdAt:null,lastUpdated:null,stats:{shares:0,conversions:0,revenue:0}}));React.useEffect(()=>{Ua(ei("referral_cfg"),ct)},[ct]);var Wi=()=>({id:crypto!=null&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random(),name:"",channel:"EMAIL",subject:"",body:"",audience:"ALL_CLIENTS",consent:!1,sendMode:"NOW",scheduleAt:"",status:"DRAFT",createdAt:new Date().toISOString()}),[Wa,Hs]=React.useState(!1),[ks,so]=React.useState(()=>Wi()),[uo,an]=React.useState(!1),[Qi,ui]=React.useState(()=>di(ei("drips"),[]));React.useEffect(()=>{Ua(ei("drips"),Qi)},[Qi]);var vi=()=>({id:crypto!=null&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random(),name:"",role:"TRAINER",enabled:!1,when:{trigger:"INACTIVITY_DAYS",value:7},if:{cond:"ALWAYS",value:""},then:{action:"SEND_EMAIL",value:""},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[hi,ls]=React.useState(!1),[Bi,Pa]=React.useState(()=>vi()),[Ga,ca]=React.useState(""),La=(Be=null)=>{var Ia=Be?{...Be}:vi();Pa(Ia),ls(!0);try{B==null||B.logEvent("ma.drip.builder_opened",{id:Ia.id,mode:Be?"edit":"new"})}catch(q){}};React.useEffect(()=>{try{if(J!==W.MA_DRIP)return;var Be=di("fof.ma.drip_prefill.v1",null);if(!Be)return;try{localStorage.removeItem("fof.ma.drip_prefill.v1")}catch(Ts){}var Ia=String(Be.segment||"LTV_HIGH"),q=Ia==="ALL_CLIENTS"?"All Clients":Ia.replace("LTV_","")+" LTV",Ea=vi();Ea.name=String(Be.name||`Automation \u2014 Protect ${q}`),Ea.role="ALL",Ea.when={trigger:"INACTIVITY",days:7},Ea.if={cond:"SEGMENT_IS",value:Ia},Ea.then={action:"CRM_TASK",value:`Follow up: ${q} client at risk`},La(Ea)}catch(Be){}},[J]);var fi=()=>{var Ia,q,Ea;var Be={...Bi,updatedAt:new Date().toISOString()};(Ia=Be.name)!=null&&Ia.trim()||(Be.name="Untitled Automation"),ui(Ts=>[Be,...Ts.filter(bo=>bo.id!==Be.id)]),ls(!1);try{B==null||B.logEvent("ma.drip.saved",{id:Be.id,name:Be.name,role:Be.role,trigger:(q=Be.when)==null?void 0:q.trigger,action:(Ea=Be.then)==null?void 0:Ea.action,enabled:!!Be.enabled})}catch(Ts){}},ms=Be=>{ui(Ia=>Ia.map(q=>q.id===Be?{...q,enabled:!q.enabled,updatedAt:new Date().toISOString()}:q));try{B==null||B.logEvent("ma.drip.toggled",{id:Be})}catch(Ia){}},ss=[{id:"INACTIVITY_DAYS",label:"Client inactivity",hint:"No workout/logs for N days"},{id:"TRIAL_ENDING_DAYS",label:"Trial ending",hint:"Trial ends in N days"},{id:"LEAD_CREATED",label:"Lead created",hint:"A new lead enters CRM"},{id:"CAPACITY_DROP",label:"Capacity score drop",hint:"Readiness (Capacity) drops below threshold"}],ds=[{id:"ALWAYS",label:"Always",hint:"No additional filter"},{id:"ROLE_MATCH",label:"Role match",hint:"Only for selected persona"},{id:"CAPACITY_BELOW",label:"Capacity below",hint:"Only if Capacity Score \u2264 X"},{id:"MISSING_TAG",label:"Missing tag",hint:"Only if tag not present"},{id:"SEGMENT_IS",label:"Segment is",hint:"Only if client is in segment (e.g., LTV_HIGH)"}],Xs=[{id:"SEND_EMAIL",label:"Send email",hint:"Send an email message"},{id:"SEND_PUSH_STUB",label:"Send push (stub)",hint:"Push messaging stub"},{id:"CREATE_CRM_TASK",label:"Create CRM task",hint:"Add a follow-up task to Action Queue"},{id:"APPLY_TAG",label:"Apply tag",hint:"Tag the client/lead"}],Wo=Be=>{var Ea,Ts;var Ia=((Ea=ss.find(bo=>bo.id===(Be==null?void 0:Be.trigger)))==null?void 0:Ea.label)||(Be==null?void 0:Be.trigger)||"Trigger",q=(Ts=Be==null?void 0:Be.value)!=null?Ts:"";return(Be==null?void 0:Be.trigger)==="LEAD_CREATED"?`WHEN ${Ia}`:(Be==null?void 0:Be.trigger)==="CAPACITY_DROP"?`WHEN ${Ia} (\u2264 ${q||60})`:`WHEN ${Ia} (${q||7}d)`},Po=(Be,Ia)=>{var Ts,bo;var q=((Ts=ds.find(Fo=>Fo.id===(Be==null?void 0:Be.cond)))==null?void 0:Ts.label)||(Be==null?void 0:Be.cond)||"Condition",Ea=(bo=Be==null?void 0:Be.value)!=null?bo:"";return(Be==null?void 0:Be.cond)==="ALWAYS"?`IF ${q}`:(Be==null?void 0:Be.cond)==="ROLE_MATCH"?`IF ${q}: ${Ia}`:(Be==null?void 0:Be.cond)==="CAPACITY_BELOW"?`IF ${q}: \u2264 ${Ea||60}`:(Be==null?void 0:Be.cond)==="MISSING_TAG"?`IF ${q}: ${Ea||"tag"}`:`IF ${q}`},Eo=Be=>{var Ea,Ts;var Ia=((Ea=Xs.find(bo=>bo.id===(Be==null?void 0:Be.action)))==null?void 0:Ea.label)||(Be==null?void 0:Be.action)||"Action",q=(Ts=Be==null?void 0:Be.value)!=null?Ts:"";return(Be==null?void 0:Be.action)==="CREATE_CRM_TASK"?`THEN ${Ia}: ${q||"Follow up"}`:(Be==null?void 0:Be.action)==="APPLY_TAG"?`THEN ${Ia}: ${q||"tag"}`:`THEN ${Ia}`},Oi=(Be,Ia)=>{var q,Ea;try{var Ts=Be.getHours(),bo=Number((q=Ia==null?void 0:Ia.start)!=null?q:22),Fo=Number((Ea=Ia==null?void 0:Ia.end)!=null?Ea:7);return bo===Fo?!1:bo<Fo?Ts>=bo&&Ts<Fo:Ts>=bo||Ts<Fo}catch(Ts){return!1}},jo=(Be,Ia)=>{var q,Ea;try{var Ts=Number((q=Ia==null?void 0:Ia.start)!=null?q:22),bo=Number((Ea=Ia==null?void 0:Ia.end)!=null?Ea:7),Fo=new Date(Be);return Oi(Fo,Ia)&&(Fo.setMinutes(0,0,0),Fo.setHours(bo),bo<=Ts&&Be.getHours()>=Ts&&Fo.setDate(Fo.getDate()+1)),Fo}catch(Ts){return Be}},to=Be=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:Be}))}catch(Ia){}},Rn=Be=>Be==="P1"?"High":Be==="P2"?"Medium":"Low",Io=()=>{var Ea,Ts,bo,Fo,Ss,Cn;var Be=[],Ia=new Date;try{var zs=(Ge||[]).filter(So=>((So==null?void 0:So.status)||"").toUpperCase()==="DRAFT");zs.length&&Be.push({id:"aq_drafts",pri:"P1",type:"MARKETING",title:`Send your draft campaign${zs.length>1?"s":""}`,desc:`${zs.length} draft${zs.length>1?"s":""} waiting in Broadcasts.`,cta:"Open Broadcasts",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_BROADCAST"}}})}catch(zs){}try{var zs=Qi||[],So=zs.filter(Yi=>{var js;return(Yi==null?void 0:Yi.enabled)&&((js=Yi==null?void 0:Yi.then)==null?void 0:js.action)==="SEND_PUSH"});So.length&&Be.push({id:"aq_push_stub",pri:"P1",type:"AUTOMATION",title:"Review automations using Push (stub)",desc:`${So.length} enabled workflow${So.length>1?"s":""} uses Push (stub). Replace with Email or CRM task.`,cta:"Open Drip Workflows",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_DRIP"}}});var mn=zs.filter(Yi=>(Yi==null?void 0:Yi.enabled)&&!String((Yi==null?void 0:Yi.name)||"").trim());mn.length&&Be.push({id:"aq_unnamed_drips",pri:"P2",type:"AUTOMATION",title:"Name your active automations",desc:`${mn.length} enabled workflow${mn.length>1?"s":""} has no name. Naming improves reporting & trust.`,cta:"Open Drip Workflows",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_DRIP"}}})}catch(zs){}try{var zs=!!(ct!=null&&ct.enabled),So=Number(((Ea=ct==null?void 0:ct.stats)==null?void 0:Ea.shares)||0),mn=Number(((Ts=ct==null?void 0:ct.stats)==null?void 0:Ts.conversions)||0),Yi=Number(((bo=ct==null?void 0:ct.stats)==null?void 0:bo.revenue)||0);zs&&So>0&&mn===0&&Be.push({id:"aq_ref_followup",pri:"P2",type:"REFERRALS",title:"Follow up referral shares",desc:`${So} shares recorded with 0 conversions. Nudge the warm leads or improve the reward.`,cta:"Open Referrals",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_REFERRALS"}}}),zs&&mn>0&&Yi===0&&Be.push({id:"aq_ref_revenue",pri:"P1",type:"FINANCE",title:"Record revenue for referral conversions",desc:`${mn} conversion${mn>1?"s":""} recorded but revenue is 0. Add payment/invoice to attribute ROI.`,cta:"Open Finance Hub",nav:{view:"FINANCE_HUB",route:null}})}catch(zs){}try{var zs=!!((Fo=xi==null?void 0:xi.churn)!=null&&Fo.enabled),So=Number((Cn=(Ss=xi==null?void 0:xi.churn)==null?void 0:Ss.capPer7d)!=null?Cn:2);zs?So===0&&Be.push({id:"aq_churn_cap0",pri:"P3",type:"AI",title:"Churn Prevention cap is 0",desc:"Autopilot is enabled but will never send. Increase cap to at least 1 per 7 days.",cta:"Open AI Autopilot",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_AUTOPILOT"}}}):Be.push({id:"aq_enable_churn",pri:"P2",type:"AI",title:"Enable Churn Prevention autopilot",desc:"Keep it controlled: quiet hours + frequency cap. AI suggests \u2014 you control.",cta:"Open AI Autopilot",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_AUTOPILOT"}}})}catch(zs){}try{var zs=(vo,xo)=>{try{var cn=localStorage.getItem(vo);return cn?JSON.parse(cn):xo}catch(cn){return xo}},So=zs("fof.finance.invoices.v1",[]),mn=zs("fof.finance.offline_ledger.v1",[]),Yi=zs("fof_event_log_v1",[]),js=Date.now(),Qo=vo=>{var xo=String(vo||"").trim().toLowerCase(),cn=(So||[]).filter(Xi=>String((Xi==null?void 0:Xi.status)||"").toUpperCase()==="PAID"&&String((Xi==null?void 0:Xi.clientName)||"").trim().toLowerCase()===xo).map(Xi=>({amt:Number((Xi==null?void 0:Xi.amount)||(Xi==null?void 0:Xi.total)||0),ts:Number((Xi==null?void 0:Xi.paidAt)||(Xi==null?void 0:Xi.paid_ts)||(Xi==null?void 0:Xi.ts)||0)||0})),wa=(mn||[]).filter(Xi=>String((Xi==null?void 0:Xi.client)||(Xi==null?void 0:Xi.clientName)||"").trim().toLowerCase()===xo).map(Xi=>({amt:Number((Xi==null?void 0:Xi.amount)||(Xi==null?void 0:Xi.amt)||0),ts:Number((Xi==null?void 0:Xi.ts)||(Xi==null?void 0:Xi.createdAt)||0)||0}));return{total:[...cn,...wa].reduce((Xi,gs)=>Xi+(Number(gs.amt)||0),0),invPaid:cn,off:wa}},zo=(vo,xo)=>{var cn=String(vo||"").trim().toLowerCase(),wa=js-xo*864e5,ho=[];return(So||[]).forEach(gs=>{if(String((gs==null?void 0:gs.status)||"").toUpperCase()!=="PAID"||String((gs==null?void 0:gs.clientName)||"").trim().toLowerCase()!==cn)return;var Do=Number((gs==null?void 0:gs.paidAt)||(gs==null?void 0:gs.paid_ts)||(gs==null?void 0:gs.ts)||0)||0;Do&&Do>=wa&&ho.push(Number((gs==null?void 0:gs.amount)||(gs==null?void 0:gs.total)||0)||0)}),(mn||[]).forEach(gs=>{if(String((gs==null?void 0:gs.client)||(gs==null?void 0:gs.clientName)||"").trim().toLowerCase()!==cn)return;var Do=Number((gs==null?void 0:gs.ts)||(gs==null?void 0:gs.createdAt)||0)||0;Do&&Do>=wa&&ho.push(Number((gs==null?void 0:gs.amount)||(gs==null?void 0:gs.amt)||0)||0)}),ho.reduce((gs,Do)=>gs+Do,0)},ur=vo=>{var xo=String(vo||"").trim().toLowerCase();return(Yi||[]).filter(cn=>{var wa=(cn==null?void 0:cn.payload)||{},ho=String(wa.clientName||wa.client_name||"").trim().toLowerCase();return ho&&ho===xo}).length},Tr=vo=>{var xo=Math.max(0,Math.min(100,Number(vo)||0));return xo<=19?1:xo<=34?2:xo<=49?3:xo<=64?5:xo<=79?8:xo<=89?12:18},Go=Array.from(new Set([...(So||[]).map(vo=>String((vo==null?void 0:vo.clientName)||"").trim()).filter(Boolean),...(mn||[]).map(vo=>String((vo==null?void 0:vo.client)||(vo==null?void 0:vo.clientName)||"").trim()).filter(Boolean)])).filter(Boolean).map(vo=>{var xo=Qo(vo),cn=zo(vo,60),wa=cn>0?cn/2:0,ho=ur(vo),Xi=ho>=12?40:ho>=5?24:12,gs=(So||[]).some(Un=>String((Un==null?void 0:Un.status)||"").toUpperCase()==="OVERDUE"&&String((Un==null?void 0:Un.clientName)||"").trim().toLowerCase()===String(vo).toLowerCase()),Do=gs?6:25,ir=ho>=12?20:ho>=5?12:6,Dr=Math.max(0,Math.min(100,Xi+Do+ir+5)),rr=Tr(Dr),mr=xo.total+wa*rr,kr=ho<5?"LOW_ENG":null,hn=gs?"OVERDUE":null;return{name:vo,predicted:mr,actual:xo.total,mrr:wa,rem:rr,score:Dr,hits:ho,paymentFlag:hn,inactivityFlag:kr}}).sort((vo,xo)=>(xo.predicted||0)-(vo.predicted||0)).filter(vo=>(vo.predicted||0)>=500&&(vo.paymentFlag||vo.inactivityFlag));if(Go.length){var vo=Go[0];Be.push({id:"aq_ltv_atrisk",pri:"P1",type:"INSIGHTS",title:"High-LTV clients at risk",desc:`${Go.length} client${Go.length>1?"s are":" is"} predicted high value but showing risk (e.g., ${vo.name}${vo.paymentFlag?` \u2022 ${vo.paymentFlag}`:""}${vo.inactivityFlag?` \u2022 ${vo.inactivityFlag}`:""}).`,cta:"Open CRM Pipeline",nav:{view:"BUSINESS_HUB",route:{section:"CRM-PIPELINE",sub:null}}}),Be.push({id:"aq_ltv_autopilot",pri:"P2",type:"AI",title:"Protect high-LTV clients with Churn Prevention",desc:"Route at-risk high value clients into controlled nudges (quiet hours + frequency cap). AI suggests \u2014 you control.",cta:"Open AI Autopilot",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:"MA_AUTOPILOT"}}})}}catch(zs){}Be.length||Be.push({id:"aq_empty",pri:"P3",type:"INFO",title:"No urgent tasks right now",desc:"As you create campaigns, drips, and referrals, this queue will surface the next best actions.",cta:"Go to Marketing Home",nav:{view:"BUSINESS_HUB",route:{section:"MA-ENTRY",sub:null}}});var q=zs=>zs==="P1"?1:zs==="P2"?2:3;return Be.sort((zs,So)=>q(zs.pri)-q(So.pri))},bs=()=>{var Ia,q,Ea;var Be=null;try{Be=JSON.parse(localStorage.getItem("fof.ma.broadcast_prefill.v1")||"null")}catch(Ts){Be=null}if(Be&&typeof Be=="object"){var Ts=Wi(),bo={...Ts,name:(Ia=Be.name)!=null?Ia:Ts.name,audience:(q=Be.audience)!=null?q:Ts.audience,channel:(Ea=Be.channel)!=null?Ea:Ts.channel};so(bo);try{localStorage.removeItem("fof.ma.broadcast_prefill.v1")}catch(Fo){}}else so(Wi());an(!1),Hs(!0);try{B==null||B.logEvent("ma.broadcast.composer_opened",{source:"broadcasts"})}catch(Ts){}},Ao=()=>{var Be={...ks,status:"DRAFT"};$e(Ia=>[Be,...Ia.filter(q=>q.id!==Be.id)]);try{B==null||B.logEvent("ma.broadcast.draft_saved",{id:Be.id,name:Be.name||"Untitled",audience:Be.audience,channel:Be.channel})}catch(Ia){}},sn=()=>{var q,Ea,Ts;var Be={...ks};if((q=Be.name)!=null&&q.trim()||(Be.name="Untitled Campaign"),Be.channel==="EMAIL"&&!((Ea=Be.subject)!=null&&Ea.trim())&&(Be.subject="Update from your coach"),!((Ts=Be.body)!=null&&Ts.trim())){try{alert("Please add a message before sending.")}catch(bo){}return}if(!Be.consent){try{alert("Consent required: confirm recipients opted in.")}catch(bo){}return}var Ia=new Date;if(Be.sendMode==="SCHEDULE"){var bo=Be.scheduleAt?new Date(Be.scheduleAt):null;if(!bo||isNaN(bo.getTime())){try{alert("Please select a valid schedule time.")}catch(Ss){}return}var Fo=jo(bo,sa);Be.status="SCHEDULED",Be.scheduledAt=Fo.toISOString(),Be.updatedAt=new Date().toISOString(),$e(Ss=>[{...Be},...Ss.filter(Cn=>Cn.id!==Be.id)]),Hs(!1);try{B==null||B.logEvent("campaign.scheduled",{id:Be.id,name:Be.name,audience:Be.audience,channel:Be.channel,scheduledAt:Be.scheduledAt,quietHours:sa})}catch(Ss){}}else{var bo=jo(Ia,sa);Be.status="SENT",Be.sentAt=bo.toISOString(),Be.updatedAt=new Date().toISOString(),$e(Fo=>[{...Be},...Fo.filter(Ss=>Ss.id!==Be.id)]),Hs(!1);try{B==null||B.logEvent("campaign.sent",{id:Be.id,name:Be.name,audience:Be.audience,channel:Be.channel,sentAt:Be.sentAt,quietHours:sa})}catch(Fo){}}},Li=(Be,Ia=null)=>{try{z(Be),Ht(Ia)}catch(q){}try{Di&&Di("bh_nav",{page:Be,meta:Ia})}catch(q){}};React.useEffect(()=>{try{if(!i)return;var Be=i.bhPage||i.page||i.section||null;if(!Be)return;var Ia=String(Be);if(Ia==="OVERVIEW"||Ia==="BH-ENTRY"){Li(W.OVERVIEW);return}if(Ia==="CRM_PIPELINE"||Ia==="CRM-PIPELINE"){Li(W.CRM_PIPELINE);return}if(Ia==="CRM_APPLICATIONS"||Ia==="CRM-APPLICATIONS"){Li(W.CRM_APPLICATIONS);return}if(Ia==="MARKETING_HOME"||Ia==="MA-ENTRY"){Li(W.MARKETING_HOME);return}if(Ia==="MA_BROADCAST"||Ia==="MA-BROADCAST"){Li(W.MA_BROADCAST);return}if(Ia==="MA_DRIP"||Ia==="MA-DRIP"){Li(W.MA_DRIP);return}if(Ia==="MA_REFERRALS"||Ia==="MA-REFERRALS"){Li(W.MA_REFERRALS);return}if(Ia==="MA_AUTOPILOT"||Ia==="MA-AUTOPILOT"){Li(W.MA_AUTOPILOT);return}if(Ia==="MA_SAFETY"||Ia==="MA-SAFETY"){Li(W.MA_SAFETY);return}if(Ia==="INSIGHTS_DASH"||Ia==="INSIGHTS-DASH"){Li(W.INSIGHTS_DASH);return}if(Ia==="INSIGHTS_ACTIONS"||Ia==="INSIGHTS-ACTIONS"){Li(W.INSIGHTS_ACTIONS);return}if(Ia==="INSIGHTS_LTV"||Ia==="INSIGHTS-LTV"){Li(W.INSIGHTS_LTV);return}}catch(Be){}},[i]);var po=({title:Be,subtitle:Ia,onBack:q,children:Ea,right:Ts=null})=>React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-titanium-800 md:col-span-2"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:q,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"\u2190 Back"),React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white truncate"},Be)),Ia?React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},Ia):null),Ts?React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},Ts):null),React.createElement("div",{className:"mt-4 pb-28"},Ea)),Tn="fof_bh_crm_v1",cr="fof_bh_crm_audit_v1",_r=(Be,Ia)=>{try{return typeof Ta=="function"?Ta(Be,Ia):Ia}catch(q){return Ia}},$o=(Be,Ia)=>{try{typeof ti=="function"&&ti(Be,Ia)}catch(q){}},[Vo,xn]=React.useState(()=>{var Be=_r(Tn,null);return Array.isArray(Be)&&Be.length?Be:[{id:"ld_1001",name:"Aisha K.",stage:"Lead",source:"Website",consent:!0,createdAt:"2025-12-22",note:"Asked about 12-week strength program."},{id:"ld_1002",name:"Omar R.",stage:"Application",source:"Landing Page",consent:!0,createdAt:"2025-12-20",note:"Submitted application; prefers evenings."},{id:"ld_1003",name:"Maya S.",stage:"Approved",source:"Referral",consent:!0,createdAt:"2025-12-18",note:"Approved; awaiting first invoice."},{id:"ld_1004",name:"Jon P.",stage:"Lead",source:"Manual",consent:!1,createdAt:"2025-12-26",note:"Manual entry \u2014 needs consent before automations."}]});React.useEffect(()=>{$o(Tn,Vo)},[Vo]);var[Xn,Fi]=React.useState(()=>_r(cr,[]));React.useEffect(()=>{$o(cr,Xn)},[Xn]);var[ws,mo]=React.useState("KANBAN"),[fs,Mo]=React.useState(null),Di=(Be,Ia={})=>{try{var q={id:window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"a_"+Math.random().toString(16).slice(2),ts:new Date().toISOString(),event:Be,payload:Ia};Fi(Ea=>[...Array.isArray(Ea)?Ea:[],q].slice(-300));try{B&&B.logEvent&&B.logEvent(Be,Ia)}catch(Ea){}try{window.track&&window.track(Be,Ia)}catch(Ea){}return q}catch(q){}},dn=()=>{var Be="ld_"+Math.floor(1e3+Math.random()*9e3),Ia={id:Be,name:"New Lead",stage:"Lead",source:"Manual",consent:!1,createdAt:new Date().toISOString().slice(0,10),note:""};xn(q=>[Ia,...Array.isArray(q)?q:[]]),Di("crm_lead_added",{id:Be});try{Mo(Ia)}catch(q){}try{Li(W.CRM_RECORD,{id:Be,from:J||W.CRM_PIPELINE})}catch(q){}},An=(Be,Ia)=>{xn(q=>(Array.isArray(q)?q:[]).map(Ea=>Ea.id===Be?{...Ea,...Ia}:Ea))},Hr=Be=>{var Ia=(Array.isArray(Vo)?Vo:[]).find(q=>q.id===Be);if(Ia){An(Be,{stage:"Converted"}),Di("crm_lead_converted",{id:Be,name:Ia.name,consent:!!Ia.consent});try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:{message:"Converted to Client (stub). Next: MA welcome + Finance invoice deep-links."}}))}catch(q){}}},Wr=["Lead","Application","Approved","Converted"],On=React.useMemo(()=>{var Be={Lead:[],Application:[],Approved:[],Converted:[]};return(Array.isArray(Vo)?Vo:[]).forEach(Ia=>{var q=Be[Ia.stage]?Ia.stage:"Lead";Be[q].push(Ia)}),Be},[Vo]),zn=(Be,Ia=null)=>{try{Mo(Be)}catch(q){}try{Di("crm_record_opened",{id:Be&&Be.id,stage:Be&&Be.stage,from:Ia})}catch(q){}try{Li(W.CRM_RECORD,{id:Be&&Be.id,from:Ia||J||W.CRM_PIPELINE})}catch(q){}},xl=React.useMemo(()=>[{label:"Go to CRM Pipeline",hint:"CRM-PIPELINE",keywords:"crm pipeline leads clients",onPick:()=>{try{s&&s({section:"CRM-PIPELINE",sub:null,filter:null})}catch(Be){}}},{label:"View Applications",hint:"CRM-APPLICATIONS",keywords:"applications intake filter",onPick:()=>{try{s&&s({section:"CRM-APPLICATIONS",sub:null,filter:"APPLICATIONS"})}catch(Be){}}},{label:"Marketing & Automation",hint:"MA-ENTRY",keywords:"automation drip broadcast referrals",onPick:()=>{try{s&&s({section:"MA-ENTRY",sub:null,filter:null})}catch(Be){}}},{label:"Pro Insights",hint:"INSIGHTS-DASH",keywords:"insights actions ltv",action:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"P1_INSIGHTS_DASH"}}))}catch(Be){}}}],[s]);if(React.useEffect(()=>{var Be=Ia=>{try{if((Ia.ctrlKey||Ia.metaKey)&&(Ia.key==="k"||Ia.key==="K")){Ia.preventDefault(),ne(!0);try{B==null||B.logEvent("bh_search_opened",{via:"hotkey"})}catch(q){}}Ia.key==="Escape"&&ne(!1)}catch(q){}};return window.addEventListener("keydown",Be),()=>window.removeEventListener("keydown",Be)},[B]),React.useEffect(()=>{var Be=()=>{try{ne(!0)}catch(Ia){}};return window.addEventListener("fof:openPalette",Be),()=>window.removeEventListener("fof:openPalette",Be)},[]),J!==W.OVERVIEW){var Ia={[W.CRM_PIPELINE]:"CRM Pipeline",[W.CRM_APPLICATIONS]:"Applications",[W.MARKETING_HOME]:"Marketing & Automations",[W.INSIGHTS_DASH]:"Pro Insights",[W.INSIGHTS_ACTIONS]:"Action Queue",[W.INSIGHTS_LTV]:"LTV Advisory",[W.MA_BROADCAST]:"Broadcasts",[W.MA_DRIP]:"Drip Workflows",[W.MA_REFERRALS]:"Referrals",[W.MA_AUTOPILOT]:"AI Autopilot",[W.MA_SAFETY]:"Automation Safety"}[J]||"Business Hub";return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},React.createElement("div",{className:"flex items-center justify-between gap-4 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300/90"},"Business Growth Hub"),React.createElement("h2",{className:"mt-1 text-xl font-bold text-white"},Ia),React.createElement("p",{className:"mt-1 text-sm text-zinc-300"},"This is a dedicated page view (tile \u2192 page). Use ",React.createElement("span",{className:"text-white font-semibold"},"Back")," to return to ",[W.MA_BROADCAST,W.MA_DRIP,W.MA_REFERRALS,W.MA_AUTOPILOT,W.MA_SAFETY].includes(J)?"Marketing & Automations":"the hub tiles",".")),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ne(!0),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Search (\u2318/Ctrl K)"))),J===W.CRM_PIPELINE&&React.createElement(po,{title:"CRM Pipeline",subtitle:"Single owner: Business Hub (Flowchart #9). Leads / Applications / Convert with audit trail.",onBack:()=>Li(W.OVERVIEW),right:React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>mo(q=>q==="KANBAN"?"LIST":"KANBAN"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},ws==="KANBAN"?"List View":"Kanban View"),React.createElement("button",{type:"button",onClick:dn,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ Add Lead"))},ws==="KANBAN"?React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},Wr.map(q=>React.createElement("div",{key:q,className:"rounded-2xl border border-white/10 bg-black/20 p-3 min-h-[180px]"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},q),React.createElement("div",{className:"text-[11px] text-white/50"},(On[q]||[]).length)),React.createElement("div",{className:"mt-2 space-y-2"},(On[q]||[]).map(Ea=>React.createElement("button",{key:Ea.id,type:"button",onClick:()=>zn(Ea,J),className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[13px] text-white truncate"},Ea.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Ea.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Ea.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 truncate"},Ea.source," \u2022 ",Ea.createdAt),Ea.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Ea.note):null)),!(On[q]||[]).length&&React.createElement("div",{className:"text-[11px] text-white/35 px-1 py-2"},"No records"))))):React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-left text-white/60"},React.createElement("th",{className:"py-2 pr-3"},"Name"),React.createElement("th",{className:"py-2 pr-3"},"Stage"),React.createElement("th",{className:"py-2 pr-3"},"Source"),React.createElement("th",{className:"py-2 pr-3"},"Consent"),React.createElement("th",{className:"py-2 pr-3"},"Created"),React.createElement("th",{className:"py-2 pr-3"}))),React.createElement("tbody",null,(Array.isArray(Vo)?Vo:[]).map(q=>React.createElement("tr",{key:q.id,className:"border-t border-white/10"},React.createElement("td",{className:"py-2 pr-3 text-white"},q.name),React.createElement("td",{className:"py-2 pr-3 text-white/70"},q.stage),React.createElement("td",{className:"py-2 pr-3 text-white/60"},q.source),React.createElement("td",{className:"py-2 pr-3"},React.createElement("span",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(q.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},q.consent?"YES":"NO")),React.createElement("td",{className:"py-2 pr-3 text-white/50"},q.createdAt),React.createElement("td",{className:"py-2 pr-3"},React.createElement("button",{type:"button",onClick:()=>zn(q,J),className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Open")))))))),J===W.CRM_APPLICATIONS&&React.createElement(po,{title:"Applications",subtitle:"Saved view of the same CRM dataset (no duplication). Stage: Application.",onBack:()=>Li(W.OVERVIEW),right:React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Pipeline")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(Array.isArray(On.Application)?On.Application:[]).map(q=>React.createElement("button",{key:q.id,type:"button",onClick:()=>zn(q,J),className:"text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[14px] text-white truncate"},q.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(q.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},q.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},q.source," \u2022 ",q.createdAt),q.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},q.note):null)),!(On.Application||[]).length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/50"},"No applications in this dataset yet."))),J===W.CRM_RECORD&&React.createElement(po,{title:"CRM Record",subtitle:"Single record view (real app page). Update fields, move stage, convert, and deep-link to Automations / Finance.",onBack:()=>{var q=H&&H.from?H.from:W.CRM_PIPELINE;Li(q)},right:React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>{try{Li(W.CRM_PIPELINE)}catch(q){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Pipeline"),React.createElement("button",{type:"button",onClick:()=>{try{Li(W.CRM_APPLICATIONS)}catch(q){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Applications"))},(()=>{var q=H&&H.id?H.id:fs&&fs.id,Ea=(Array.isArray(Vo)?Vo:[]).find(Ss=>Ss.id===q)||fs;if(!Ea)return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/55"},"Record not found.");var Ts=Ea.stage||"Lead",bo=Ss=>React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[10px] font-mono uppercase tracking-widest border "+(Ss==="Converted"?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200":Ss==="Approved"?"border-sky-400/40 bg-sky-500/10 text-sky-200":Ss==="Application"?"border-violet-400/40 bg-violet-500/10 text-violet-200":"border-orange-400/40 bg-orange-500/10 text-orange-200")},Ss),Fo=(Array.isArray(Xn)?Xn:[]).filter(Ss=>Ss&&Ss.payload&&Ss.payload.id===Ea.id).slice(-12).reverse();return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"ID ",Ea.id),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white truncate"},Ea.name),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Ea.source," \u2022 Created ",Ea.createdAt||"")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},bo(Ts),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[10px] font-mono uppercase tracking-widest border "+(Ea.consent?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200":"border-orange-400/40 bg-orange-500/10 text-orange-200")},Ea.consent?"Consent":"No Consent"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},"Name"),React.createElement("input",{value:Ea.name||"",onChange:Ss=>An(Ea.id,{name:Ss.target.value}),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] text-white outline-none focus:border-emerald-400/40"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},"Source"),React.createElement("input",{value:Ea.source||"",onChange:Ss=>An(Ea.id,{source:Ss.target.value}),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] text-white outline-none focus:border-emerald-400/40"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},"Notes"),React.createElement("button",{type:"button",onClick:()=>{try{Di("crm_note_updated",{id:Ea.id})}catch(Ss){}},className:"px-2.5 py-1 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Log Note")),React.createElement("textarea",{value:Ea.note||"",onChange:Ss=>An(Ea.id,{note:Ss.target.value}),rows:4,className:"mt-1 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[13px] text-white outline-none focus:border-emerald-400/40",placeholder:"Call notes, goals, objections, next steps\u2026"}))),React.createElement("div",{className:"mt-4 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{An(Ea.id,{consent:!Ea.consent});try{Di("crm_consent_toggled",{id:Ea.id,consent:!Ea.consent})}catch(Ss){}},className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(Ea.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200 hover:bg-emerald-500/20":"border-orange-400/30 bg-orange-500/10 text-orange-200 hover:bg-orange-500/20")},"Toggle Consent"),React.createElement("div",{className:"h-6 w-px bg-white/10"}),Wr.map(Ss=>React.createElement("button",{key:Ss,type:"button",onClick:()=>{An(Ea.id,{stage:Ss});try{Di("crm_stage_changed",{id:Ea.id,stage:Ss})}catch(Cn){}},className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(Ts===Ss?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/5 hover:bg-white/10 text-white/70")},Ss)),React.createElement("button",{type:"button",onClick:()=>Hr(Ea.id),className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-200 text-[11px] font-mono uppercase tracking-widest",title:"Convert to client (stubbed downstream hooks)"},"Convert"),React.createElement("div",{className:"h-6 w-px bg-white/10"}),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_SETUP_WIZARD"}}))}catch(Ss){}},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 text-emerald-200 text-[11px] font-mono uppercase tracking-widest hover:bg-emerald-500/20",title:"Open Business Setup Wizard"},"Business Setup"),React.createElement("button",{type:"button",onClick:()=>{try{Li(W.MARKETING_HOME)}catch(Ss){}},className:"px-3 py-2 rounded-xl bg-orange-500/10 border border-orange-400/30 hover:bg-orange-500/20 text-orange-200 text-[11px] font-mono uppercase tracking-widest",title:"Deep-link to the single automation engine owner"},"Marketing Automations"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"FINANCE_HUB"}}))}catch(Ss){}},className:"px-3 py-2 rounded-xl bg-amber-500/10 border border-amber-400/30 hover:bg-amber-500/20 text-amber-100 text-[11px] font-mono uppercase tracking-widest",title:"Deep-link to Finance Hub (single owner)"},"Finance Hub"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},"Recent Activity"),React.createElement("button",{type:"button",onClick:()=>{try{Di("crm_followup_created",{id:Ea.id})}catch(Ss){}},className:"px-2.5 py-1 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"+ Log Follow-up")),React.createElement("div",{className:"mt-3 space-y-2"},Fo.map(Ss=>React.createElement("div",{key:Ss.id,className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},(Ss.event||"event").replace(/_/g," ")),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},new Date(Ss.ts).toLocaleString()))),!Fo.length&&React.createElement("div",{className:"text-[12px] text-white/45"},"No activity yet. Actions here will appear automatically."))))})()),J===W.MARKETING_HOME&&React.createElement(po,{title:"Marketing & Automations",subtitle:"Single automation engine (Flowchart #9). Broadcasts, drips, referrals, AI autopilots, safety.",onBack:()=>Li(W.OVERVIEW),right:React.createElement("button",{type:"button",onClick:()=>ne(!0),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Search")},(()=>{var q=Date.now(),Ea=Ls=>Ls*24*60*60*1e3,Ts=typeof Ho!="undefined"&&Ho.read?Ho.read()||[]:[],bo=Ls=>{try{if(!Ls)return 0;var Go=Date.parse(Ls);return Number.isFinite(Go)?Go:0}catch(Go){return 0}},Fo=q-Ea(7),Ss=q-Ea(30),Cn=Ts.filter(Ls=>Ls&&Ls.event_name==="campaign.sent"&&bo(Ls.ts)>=Fo).length,zs=Ts.filter(Ls=>Ls&&Ls.event_name==="campaign.sent"&&bo(Ls.ts)>=Ss).length,So=Ts.filter(Ls=>Ls&&Ls.event_name==="automation.triggered"&&bo(Ls.ts)>=Fo).length,mn=Ts.filter(Ls=>Ls&&Ls.event_name==="automation.triggered"&&bo(Ls.ts)>=Ss).length,Yi=Ts.filter(Ls=>Ls&&String(Ls.event_name||"").startsWith("referral.")&&bo(Ls.ts)>=Ss).length,js=(Ls,Go=[])=>{try{return typeof Ta=="function"&&Ta(Ls,Go)||Go}catch(vo){return Go}},Qo=js("fof_ma_automations_v1",[]),zo=js("fof_ma_campaign_drafts_v1",[]),ur=Ts.filter(Ls=>Ls&&(String(Ls.event_name||"").startsWith("campaign.")||String(Ls.event_name||"").startsWith("automation.")||String(Ls.event_name||"").startsWith("referral.")||String(Ls.event_name||"").startsWith("autopilot."))).slice().sort((Ls,Go)=>bo(Go.ts)-bo(Ls.ts)).slice(0,8),Tr=Ls=>{try{if(!Ls)return"";var Go=new Date(Ls),vo=String(Go.getHours()).padStart(2,"0"),xo=String(Go.getMinutes()).padStart(2,"0"),cn=String(Go.getDate()).padStart(2,"0"),wa=String(Go.getMonth()+1).padStart(2,"0");return`${cn}/${wa} ${vo}:${xo}`}catch(Go){return""}},Oo=(Ls,Go="neutral")=>{var vo="text-[10px] font-mono px-2 py-[2px] rounded-full border ";return Go==="good"?vo+"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":Go==="warn"?vo+"border-amber-400/30 bg-amber-500/10 text-amber-100":Go==="bad"?vo+"border-rose-400/30 bg-rose-500/10 text-rose-100":vo+"border-white/15 bg-white/5 text-white/70"};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Active automations"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},Array.isArray(Qo)?Qo.length:0),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Single owner: Business Hub")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Messages sent"),React.createElement("div",{className:"mt-1 flex items-end justify-between gap-3"},React.createElement("div",{className:"text-2xl font-extrabold text-white"},Cn),React.createElement("div",{className:"text-[11px] text-white/55"},"last 7d")),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},zs," last 30d")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Automation triggers"),React.createElement("div",{className:"mt-1 flex items-end justify-between gap-3"},React.createElement("div",{className:"text-2xl font-extrabold text-white"},So),React.createElement("div",{className:"text-[11px] text-white/55"},"last 7d")),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},mn," last 30d \u2022 ",Yi," referrals (30d)"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Primary Actions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Create, schedule, and monitor \u2014 with consent + caps.")),React.createElement("div",{className:"mt-1 "+Oo(Array.isArray(zo)&&zo.length?"DRAFTS":"READY",Array.isArray(zo)&&zo.length?"warn":"good")},Array.isArray(zo)&&zo.length?`${zo.length} drafts`:"No drafts")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>Li(W.MA_BROADCAST,{mode:"create"}),className:"rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"Create Campaign"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Broadcast email / in-app. Preview + schedule.")),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_DRIP,{mode:"create"}),className:"rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"Create Automation"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"WHEN \u2192 IF \u2192 THEN workflows (drips).")),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_REFERRALS),className:"rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"Referral Program"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Codes + attribution + ROI tracking.")),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_AUTOPILOT),className:"rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"AI Autopilots"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Config only (you control). Quiet hours + caps."))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>Li(W.MA_SAFETY),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"Safety & Compliance"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Consent, frequency caps, quiet hours, previews.")),React.createElement("button",{type:"button",onClick:()=>{try{Bt&&Bt("ma.open.pipeline",{from:"marketing_home"})}catch(Ls){}Li(W.CRM_PIPELINE)},className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},"Open CRM Pipeline"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Target segments + assign tasks (no duplication).")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Recent Activity"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Last events emitted from campaigns / automations.")),React.createElement("div",{className:Oo("LIVE","good")},"event log")),React.createElement("div",{className:"mt-3 space-y-2"},ur.map((Ls,Go)=>React.createElement("div",{key:Go,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},String(Ls.event_name||"event")),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},Ls.payload&&(Ls.payload.name||Ls.payload.title||Ls.payload.id)?Ls.payload.name||Ls.payload.title||Ls.payload.id:"\u2014")),React.createElement("div",{className:"text-[11px] text-white/45"},Tr(Ls.ts))))),!ur.length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/55"},"No marketing activity yet. Create a campaign or automation to populate this feed."))),React.createElement("div",{className:"text-[11px] text-white/45"},"Marketing Automations is a shortcut only. This page is the single owner for broadcasts, drips, referrals, and AI autopilot config."))})()),J===W.MA_BROADCAST&&React.createElement(po,{title:"Broadcasts",subtitle:"Campaigns (broadcast). Back returns to Marketing & Automations (MA-ENTRY).",onBack:()=>Li(W.MARKETING_HOME),right:React.createElement("button",{type:"button",onClick:bs,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ New Campaign")},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"lg:col-span-2 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Campaigns"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Broadcasts you\u2019ve sent or scheduled. Drafts are saved locally in this prototype.")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:ar("EMAIL","neutral")},"email"),React.createElement("div",{className:ar("IN-APP","neutral")},"in-app"),React.createElement("div",{className:ar("PUSH","warn")},"push (stub)"))),React.createElement("div",{className:"mt-3 space-y-2"},Ge.slice(0,30).map(q=>React.createElement("div",{key:q.id,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},q.name||"Untitled Campaign"),React.createElement("div",{className:ar(String(q.status||"DRAFT"),q.status==="SENT"?"good":q.status==="SCHEDULED"?"warn":"neutral")},String(q.status||"DRAFT").toLowerCase()),React.createElement("div",{className:ar(String(q.channel||"EMAIL"),"neutral")},String(q.channel||"EMAIL").toLowerCase())),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 truncate"},"Audience: ",React.createElement("span",{className:"text-white/70"},String(q.audience||"ALL_CLIENTS").replaceAll("_"," ").toLowerCase()),q.subject?React.createElement(React.Fragment,null," \u2022 Subject: ",React.createElement("span",{className:"text-white/70"},q.subject)):null),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},q.status==="SCHEDULED"&&q.scheduledAt?React.createElement(React.Fragment,null,"Scheduled: ",hs(q.scheduledAt)):null,q.status==="SENT"&&q.sentAt?React.createElement(React.Fragment,null,"Sent: ",hs(q.sentAt)):null,q.status==="DRAFT"?React.createElement(React.Fragment,null,"Created: ",hs(q.createdAt)):null)),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{so({...Wi(),...q}),Hs(!0)},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open")),$?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[80] flex items-center justify-center bg-black/60 p-4"},React.createElement("div",{className:"w-full max-w-lg rounded-3xl border border-white/12 bg-zinc-950 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px]"},"Resolve triage from thread"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"This will mark the linked triage signal as RESOLVED and write to the action log.")),React.createElement("button",{type:"button",onClick:()=>{tt(!1),Ie("")},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/70"},"Close")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/70 font-bold"},"Resolution note (optional)"),React.createElement("textarea",{value:ue,onChange:Ea=>Ie(Ea.target.value),rows:3,placeholder:"e.g., Messaged client + scheduled check-in for tomorrow.",className:"mt-2 w-full rounded-2xl border border-white/12 bg-white/5 px-3 py-2 text-[12px] text-white outline-none"})),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{tt(!1),Ie("")},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/70"},"Cancel"),React.createElement("button",{type:"button",onClick:doResolveLinked,className:"px-3 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] text-emerald-200 font-bold"},"Resolve")))):null))),!Ge.length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/55"},"No campaigns yet. Click ",React.createElement("span",{className:"text-white font-semibold"},"+ New Campaign")," to create your first broadcast."))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Quiet Hours"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Reduce fatigue. Sends scheduled inside quiet hours auto-shift to the next allowed time.")),React.createElement("div",{className:ar(`${String(sa.start).padStart(2,"0")}:00\u2013${String(sa.end).padStart(2,"0")}:00`,"neutral")},"local time")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Quiet starts"),React.createElement("select",{value:sa.start,onChange:q=>vt(Ea=>({...Ea,start:Number(q.target.value)})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},Array.from({length:24}).map((q,Ea)=>React.createElement("option",{key:Ea,value:Ea},String(Ea).padStart(2,"0"),":00")))),React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Quiet ends"),React.createElement("select",{value:sa.end,onChange:q=>vt(Ea=>({...Ea,end:Number(q.target.value)})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},Array.from({length:24}).map((q,Ea)=>React.createElement("option",{key:Ea,value:Ea},String(Ea).padStart(2,"0"),":00"))))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Now: ",React.createElement("span",{className:"text-white/70"},new Date().toLocaleString()),Oi(new Date,sa)?React.createElement(React.Fragment,null," \u2022 Quiet hours active \u2192 next send at ",React.createElement("span",{className:"text-white/70"},jo(new Date,sa).toLocaleString())):React.createElement(React.Fragment,null," \u2022 Sends allowed")))),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Delivery Standards"),React.createElement("ul",{className:"mt-2 space-y-2 text-[12px] text-white/60 list-disc pl-5"},React.createElement("li",null,"Consent required (opt-in)"),React.createElement("li",null,"Quiet hours respected"),React.createElement("li",null,"Preview before send"),React.createElement("li",null,"Explainable audience selection")),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"This is the single broadcast engine (no duplication elsewhere).")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Audience Cheat Sheet"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Use segments like ",React.createElement("span",{className:"text-white/80"},"Inactivity 7d")," or ",React.createElement("span",{className:"text-white/80"},"Low Capacity")," to prevent churn and boost adherence."),React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"mt-3 w-full px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"View CRM Pipeline")))),Wa&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] flex items-end md:items-center justify-center bg-black/70 p-3"},React.createElement("div",{className:"w-full max-w-5xl rounded-3xl border border-white/10 bg-zinc-950/95 backdrop-blur-xl shadow-2xl overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Create Broadcast"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Build, preview, then send now or schedule.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{Hs(!1),an(!1)},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Close"))),React.createElement("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-3 pb-24"},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Campaign name"),React.createElement("input",{value:ks.name,onChange:q=>so(Ea=>({...Ea,name:q.target.value})),placeholder:"e.g., January Check-in",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white placeholder:text-white/25"})),React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Channel"),React.createElement("select",{value:ks.channel,onChange:q=>so(Ea=>({...Ea,channel:q.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},React.createElement("option",{value:"EMAIL"},"Email"),React.createElement("option",{value:"IN_APP"},"In-app"),React.createElement("option",{value:"PUSH"},"Push (stub)")))),ks.channel==="EMAIL"&&React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Subject"),React.createElement("input",{value:ks.subject,onChange:q=>so(Ea=>({...Ea,subject:q.target.value})),placeholder:"Update from your coach",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white placeholder:text-white/25"})),React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Audience"),React.createElement("button",{type:"button",onClick:()=>an(q=>!q),className:"text-[11px] text-white/60 hover:text-white underline underline-offset-4"},"Why this audience?")),React.createElement("select",{value:ks.audience,onChange:q=>so(Ea=>({...Ea,audience:q.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},React.createElement("option",{value:"ALL_CLIENTS"},"All clients"),React.createElement("option",{value:"ACTIVE_CLIENTS"},"Active clients (last 7d)"),React.createElement("option",{value:"LEADS"},"Leads"),React.createElement("option",{value:"TRIAL_ENDING"},"Trial ending (7d)"),React.createElement("option",{value:"INACTIVE_7D"},"Inactive > 7 days"),React.createElement("option",{value:"LOW_CAPACITY"},"Low Capacity (readiness)"),React.createElement("option",{value:"LTV_HIGH"},"High LTV (pred)"),React.createElement("option",{value:"LTV_MID"},"Mid LTV (pred)"),React.createElement("option",{value:"LTV_LOW"},"Low LTV (pred)")),uo&&React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/30 p-3 text-[12px] text-white/60"},React.createElement("div",{className:"text-white/80 font-semibold"},"Explainability"),React.createElement("div",{className:"mt-1"},"This segment is a ",React.createElement("span",{className:"text-white/70"},"rule-based audience")," (not AI). Use it to target the right users without spamming everyone."),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Example: \u201CInactive > 7 days\u201D reduces churn by re-engaging missed workouts."))),React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Message"),React.createElement("textarea",{value:ks.body,onChange:q=>so(Ea=>({...Ea,body:q.target.value})),placeholder:"Write a short, helpful message. Keep it human.",rows:6,className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white placeholder:text-white/25"})),React.createElement("label",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-start gap-3"},React.createElement("input",{type:"checkbox",checked:!!ks.consent,onChange:q=>so(Ea=>({...Ea,consent:q.target.checked})),className:"mt-1"}),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white/80 font-semibold"},"Consent confirmed"),React.createElement("div",{className:"text-[12px] text-white/55"},"I confirm recipients have opted in to receive marketing messages."))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60"},"Send"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80 font-semibold"},ks.sendMode==="NOW"?"Send now":"Schedule")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>so(q=>({...q,sendMode:"NOW"})),className:`px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest ${ks.sendMode==="NOW"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/5 hover:bg-white/10 text-white/80"}`},"Now"),React.createElement("button",{type:"button",onClick:()=>so(q=>({...q,sendMode:"SCHEDULE"})),className:`px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest ${ks.sendMode==="SCHEDULE"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/5 hover:bg-white/10 text-white/80"}`},"Schedule"))),ks.sendMode==="SCHEDULE"&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Schedule time"),React.createElement("input",{type:"datetime-local",value:ks.scheduleAt,onChange:q=>so(Ea=>({...Ea,scheduleAt:q.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"}),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"If scheduled during quiet hours, we auto-shift to the next allowed time."))),React.createElement("div",{className:"sticky bottom-0 z-10 -mx-4 mt-3 px-4 py-3 bg-zinc-950/95 backdrop-blur border-t border-white/10 flex items-center justify-between gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:Ao,className:"px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Save Draft"),React.createElement("button",{type:"button",onClick:sn,className:"px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},ks.sendMode==="SCHEDULE"?"Schedule":"Send"))),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Preview"),React.createElement("div",{className:ar(ks.channel==="EMAIL"?"EMAIL":ks.channel==="IN_APP"?"IN-APP":"PUSH","neutral")},(ks.channel||"EMAIL").replaceAll("_","-"))),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/60"},"To:"),React.createElement("div",{className:"mt-1 text-[12px] text-white font-semibold"},String(ks.audience||"ALL_CLIENTS").replaceAll("_"," ").toLowerCase()),ks.channel==="EMAIL"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},"Subject"),React.createElement("div",{className:"mt-1 text-[12px] text-white font-semibold"},ks.subject||"Update from your coach")),React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},"Message"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80 whitespace-pre-wrap"},ks.body||"\u2014"),React.createElement("div",{className:"mt-4 text-[11px] text-white/45"},"Consent: ",React.createElement("span",{className:"text-white/70"},ks.consent?"confirmed":"not confirmed")," \u2022 Quiet hours: ",React.createElement("span",{className:"text-white/70"},String(sa.start).padStart(2,"0"),":00\u2013",String(sa.end).padStart(2,"0"),":00"))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Preview-first UX (real-world standard). Sending is blocked until consent is confirmed.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Safety Notes"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Use tight segments, cap frequency, and respect quiet hours to protect trust and prevent churn."),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_SAFETY),className:"mt-3 w-full px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open Safety & Compliance"))))))),J===W.MA_DRIP&&React.createElement(po,{title:"Drip Workflows",subtitle:"Automations (drip). Back returns to Marketing & Automations (MA-ENTRY).",onBack:()=>Li(W.MARKETING_HOME),right:React.createElement("button",{type:"button",onClick:()=>La(null),className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ New Automation")},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-5 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Your Automations"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"WHEN \u2192 IF \u2192 THEN drip workflows (Phase 4.3.4).")),React.createElement("div",{className:ar(`${Qi.filter(q=>q.enabled).length} ACTIVE`,"success")},Qi.filter(q=>q.enabled).length," ACTIVE")),React.createElement("div",{className:"mt-3"},React.createElement("input",{value:Ga,onChange:q=>ca(q.target.value),placeholder:"Search automations\u2026",className:"w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white placeholder:text-white/35"})),React.createElement("div",{className:"mt-3 space-y-2"},Qi.filter(q=>{var Ts,bo;var Ea=(Ga||"").trim().toLowerCase();return Ea?`${q.name} ${q.role} ${(Ts=q.when)==null?void 0:Ts.trigger} ${(bo=q.then)==null?void 0:bo.action}`.toLowerCase().includes(Ea):!0}).sort((q,Ea)=>new Date(Ea.updatedAt||Ea.createdAt).getTime()-new Date(q.updatedAt||q.createdAt).getTime()).map(q=>React.createElement("div",{key:q.id,className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>La(q),className:"text-left flex-1"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},q.name||"Untitled Automation"),React.createElement("div",{className:ar(q.role,"neutral")},q.role),React.createElement("div",{className:ar(q.enabled?"ENABLED":"PAUSED",q.enabled?"success":"neutral")},q.enabled?"ENABLED":"PAUSED")),React.createElement("div",{className:"mt-2 text-[11px] text-white/55 space-y-1"},React.createElement("div",null,Wo(q.when)),React.createElement("div",null,Po(q.if,q.role)),React.createElement("div",null,Eo(q.then))),React.createElement("div",{className:"mt-2 text-[10px] text-white/35"},"Updated ",hs(q.updatedAt||q.createdAt))),React.createElement("div",{className:"flex flex-col items-end gap-2"},React.createElement("button",{type:"button",onClick:()=>ms(q.id),className:`px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest ${q.enabled?"border-emerald-400/25 bg-emerald-500/10 text-emerald-200 hover:bg-emerald-500/15":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"}`},q.enabled?"Pause":"Enable"))))),Qi.length===0&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/60"},"No automations yet. Click ",React.createElement("span",{className:"text-white/80 font-semibold"},"+ New Automation")," to create your first drip workflow."))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Notes"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"This builder is rule-based (no hidden AI). AI Autopilots will be configurable in Phase 4.3.5."),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_SAFETY),className:"mt-3 w-full px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Safety & Compliance"))),React.createElement("div",{className:"lg:col-span-7 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-5"},React.createElement("div",{className:"flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"How it works"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Create simple workflows that trigger nudges, tasks, and tags.")),React.createElement("div",{className:ar("WHEN \u2192 IF \u2192 THEN","neutral")},"WHEN \u2192 IF \u2192 THEN")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"When"),React.createElement("div",{className:"mt-2 text-[12px] text-white/80"},"Trigger event"),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Inactivity, trial ending, lead created, capacity drop")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"If"),React.createElement("div",{className:"mt-2 text-[12px] text-white/80"},"Optional condition"),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Role match, capacity threshold, missing tag")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"Then"),React.createElement("div",{className:"mt-2 text-[12px] text-white/80"},"Action"),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Email, push (stub), CRM task, apply tag"))),React.createElement("button",{type:"button",onClick:()=>La(null),className:"mt-4 w-full px-4 py-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ New Automation")))),hi&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[80] flex items-end sm:items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/55",onClick:()=>ls(!1)}),React.createElement("div",{className:"relative w-full sm:max-w-3xl max-h-[92vh] overflow-hidden rounded-t-3xl sm:rounded-3xl border border-white/10 bg-zinc-950/95 backdrop-blur shadow-2xl"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Automation Builder"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Build drip workflows with explicit rules (no hidden actions).")),React.createElement("button",{type:"button",onClick:()=>ls(!1),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Close")),React.createElement("div",{className:"p-4 overflow-auto max-h-[72vh]"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"Basics"),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Name"),React.createElement("input",{value:Bi.name,onChange:q=>Pa(Ea=>({...Ea,name:q.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white",placeholder:"e.g., 7-day inactivity nudge"})),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Role"),React.createElement("select",{value:Bi.role,onChange:q=>Pa(Ea=>({...Ea,role:q.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},React.createElement("option",{value:"TRAINER"},"TRAINER"),React.createElement("option",{value:"NUTRITIONIST"},"NUTRITIONIST"),React.createElement("option",{value:"HYBRID"},"HYBRID")),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Role-aware logic prevents duplicated flows across personas.")),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Bi.enabled,onChange:q=>Pa(Ea=>({...Ea,enabled:q.target.checked}))}),"Enabled")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"WHEN"),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Trigger"),React.createElement("select",{value:Bi.when.trigger,onChange:q=>Pa(Ea=>({...Ea,when:{...Ea.when,trigger:q.target.value}})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},ss.map(q=>React.createElement("option",{key:q.id,value:q.id},q.label))),Bi.when.trigger!=="LEAD_CREATED"&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},Bi.when.trigger==="CAPACITY_DROP"?"Threshold":"Days"),React.createElement("input",{type:"number",value:Bi.when.value,onChange:q=>Pa(Ea=>({...Ea,when:{...Ea.when,value:Number(q.target.value)}})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"})),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},((qr=ss.find(q=>q.id===Bi.when.trigger))==null?void 0:qr.hint)||""))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"IF"),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Condition"),React.createElement("select",{value:Bi.if.cond,onChange:q=>Pa(Ea=>({...Ea,if:{...Ea.if,cond:q.target.value}})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},ds.map(q=>React.createElement("option",{key:q.id,value:q.id},q.label))),(Bi.if.cond==="CAPACITY_BELOW"||Bi.if.cond==="MISSING_TAG")&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},Bi.if.cond==="CAPACITY_BELOW"?"Capacity \u2264":"Tag"),React.createElement("input",{value:Bi.if.value,onChange:q=>Pa(Ea=>({...Ea,if:{...Ea.if,value:q.target.value}})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-[12px] text-white",placeholder:Bi.if.cond==="CAPACITY_BELOW"?"e.g., 55":"e.g., VIP"})),Bi.if.cond==="SEGMENT_IS"&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Segment"),React.createElement("select",{value:Bi.if.value,onChange:q=>Pa(Ea=>({...Ea,if:{...Ea.if,value:q.target.value}})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-[12px] text-white"},["LTV_HIGH","LTV_MID","LTV_LOW","ALL_CLIENTS"].map(q=>React.createElement("option",{key:q,value:q},q==="ALL_CLIENTS"?"All clients":q.replace("LTV_","LTV "))))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},((hl=ds.find(q=>q.id===Bi.if.cond))==null?void 0:hl.hint)||""))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] text-white/55 uppercase tracking-wide"},"THEN"),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Action"),React.createElement("select",{value:Bi.then.action,onChange:q=>Pa(Ea=>({...Ea,then:{...Ea.then,action:q.target.value}})),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"},Xs.map(q=>React.createElement("option",{key:q.id,value:q.id},q.label))),(Bi.then.action==="CREATE_CRM_TASK"||Bi.then.action==="APPLY_TAG"||Bi.then.action==="SEND_EMAIL")&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[11px] text-white/60"},Bi.then.action==="CREATE_CRM_TASK"?"Task text":Bi.then.action==="APPLY_TAG"?"Tag":"Email body"),React.createElement("textarea",{value:Bi.then.value,onChange:q=>Pa(Ea=>({...Ea,then:{...Ea.then,value:q.target.value}})),className:"mt-1 w-full min-h-[88px] px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white",placeholder:Bi.then.action==="CREATE_CRM_TASK"?"Follow up with this lead\u2026":Bi.then.action==="APPLY_TAG"?"e.g., churn-risk":"Hey! Just checking in\u2026"})),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},((Sn=Xs.find(q=>q.id===Bi.then.action))==null?void 0:Sn.hint)||"")))),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Workflow Preview"),React.createElement("div",{className:ar(Bi.enabled?"ENABLED":"PAUSED",Bi.enabled?"success":"neutral")},Bi.enabled?"ENABLED":"PAUSED")),React.createElement("div",{className:"mt-3 rounded-3xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/80 space-y-2"},React.createElement("div",null,Wo(Bi.when)),React.createElement("div",null,Po(Bi.if,Bi.role)),React.createElement("div",null,Eo(Bi.then))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Actions are explicit and auditable. This view only configures rules; execution is stubbed for now.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold uppercase tracking-wide text-white"},"Safety"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Use consent, quiet hours, and frequency caps to avoid spam and churn. (Controls live in Safety & Compliance.)"),React.createElement("button",{type:"button",onClick:()=>{ls(!1),Li(W.MA_SAFETY)},className:"mt-3 w-full px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open Safety & Compliance"))))),React.createElement("div",{className:"p-4 border-t border-white/10 bg-zinc-950/95 flex items-center justify-between gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>ls(!1),className:"px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Cancel"),React.createElement("button",{type:"button",onClick:fi,className:"px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Save Automation"))))),J===W.MA_REFERRALS&&React.createElement(po,{title:"Referrals",subtitle:"Referral program + attribution. Back returns to Marketing & Automations (MA-ENTRY).",onBack:()=>Li(W.MARKETING_HOME)},(()=>{var Cn,zs,So,mn,Yi,js,Qo,zo,ur,Tr;var q=ct,Ea=`${((q==null?void 0:q.baseUrl)||"https://flowofit.app/r").replace(/\/+$/,"")}/${(q==null?void 0:q.code)||""}`,Ts=!!(q!=null&&q.enabled)&&!!(q!=null&&q.code),bo=async Oo=>{try{await navigator.clipboard.writeText(Oo),setToast({kind:"success",msg:"Copied to clipboard"})}catch(Ls){try{var Go=document.createElement("textarea");Go.value=Oo,document.body.appendChild(Go),Go.select(),document.execCommand("copy"),document.body.removeChild(Go),setToast({kind:"success",msg:"Copied to clipboard"})}catch(Go){setToast({kind:"warn",msg:"Copy failed \u2014 please copy manually."})}}},Fo=()=>{var Oo=Math.random().toString(36).replace(/[^a-z0-9]/gi,"").toUpperCase().slice(0,8),Ls=Oo.length>=6?Oo:(Oo+"FLOW").slice(0,8),Go={...q,code:Ls,createdAt:(q==null?void 0:q.createdAt)||new Date().toISOString(),lastUpdated:new Date().toISOString()};zt(Go),logEvent("referral.code_generated",{code:Ls}),setToast({kind:"success",msg:`Referral code generated: ${Ls}`})},Ss=Oo=>{var xo,cn,wa;var Ls={shares:((xo=q==null?void 0:q.stats)==null?void 0:xo.shares)||0,conversions:((cn=q==null?void 0:q.stats)==null?void 0:cn.conversions)||0,revenue:((wa=q==null?void 0:q.stats)==null?void 0:wa.revenue)||0};Oo==="share"&&(Ls.shares+=1),Oo==="convert"&&(Ls.conversions+=1),Oo==="revenue"&&(Ls.revenue+=50);var Go={...q,stats:Ls,lastUpdated:new Date().toISOString()};zt(Go);var vo=Oo==="share"?"referral.shared":Oo==="convert"?"referral.converted":"referral.revenue_recorded";logEvent(vo,{code:q==null?void 0:q.code,stats:Ls}),setToast({kind:"success",msg:Oo==="share"?"Recorded share":Oo==="convert"?"Recorded conversion":"Recorded revenue +50 (stub)"})};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-white font-extrabold flex items-center justify-between"},React.createElement("span",null,"Program Status"),React.createElement("span",{className:ar(q!=null&&q.enabled?"ENABLED":"PAUSED",q!=null&&q.enabled?"good":"warn")})),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Your referrals are trackable and attributed to a unique code/link."),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border "+(q!=null&&q.enabled?"border-white/10 bg-white/10 text-white hover:bg-white/15":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"),onClick:()=>{var Oo={...q,enabled:!(q!=null&&q.enabled),lastUpdated:new Date().toISOString()};zt(Oo),logEvent("referral.program_toggled",{enabled:Oo.enabled})}},q!=null&&q.enabled?"Pause program":"Enable program"),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:Fo},"Generate code")),React.createElement("div",{className:"mt-4 text-[11px] text-white/40"},"Last updated: ",React.createElement("span",{className:"text-white/70"},q!=null&&q.lastUpdated?hs(q.lastUpdated):"\u2014"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 md:col-span-2"},React.createElement("div",{className:"text-white font-extrabold"},"Referral Link"),React.createElement("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"lg:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/50"},"Your code"),React.createElement("div",{className:"mt-1 flex items-center gap-2"},React.createElement("input",{className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[12px] text-white placeholder-white/30 focus:outline-none",value:(q==null?void 0:q.code)||"",placeholder:"Generate a code to activate referrals",onChange:Oo=>zt({...q,code:Oo.target.value.toUpperCase(),lastUpdated:new Date().toISOString()})}),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:()=>bo((q==null?void 0:q.code)||""),disabled:!(q!=null&&q.code),style:{opacity:q!=null&&q.code?1:.5}},"Copy")),React.createElement("div",{className:"mt-3 text-[11px] text-white/50"},"Share link"),React.createElement("div",{className:"mt-1 flex items-center gap-2"},React.createElement("input",{className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-[12px] text-white placeholder-white/30 focus:outline-none",value:q!=null&&q.code?Ea:"",placeholder:"Referral link will appear here",readOnly:!0}),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:()=>bo(Ea),disabled:!(q!=null&&q.code),style:{opacity:q!=null&&q.code?1:.5}},"Copy"))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Reward (stub)"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("select",{className:"rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[12px] text-white focus:outline-none",value:(q==null?void 0:q.rewardType)||"DISCOUNT",onChange:Oo=>zt({...q,rewardType:Oo.target.value,lastUpdated:new Date().toISOString()})},React.createElement("option",{value:"DISCOUNT"},"Discount"),React.createElement("option",{value:"CREDIT"},"Credit"),React.createElement("option",{value:"XP"},"XP")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{className:"w-full rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[12px] text-white focus:outline-none",type:"number",value:(Cn=q==null?void 0:q.rewardValue)!=null?Cn:10,onChange:Oo=>zt({...q,rewardValue:Number(Oo.target.value||0),lastUpdated:new Date().toISOString()})}),React.createElement("select",{className:"rounded-xl border border-white/10 bg-black/30 px-2 py-2 text-[12px] text-white focus:outline-none",value:(q==null?void 0:q.rewardUnit)||"PERCENT",onChange:Oo=>zt({...q,rewardUnit:Oo.target.value,lastUpdated:new Date().toISOString()})},React.createElement("option",{value:"PERCENT"},"%"),React.createElement("option",{value:"AED"},"AED"),React.createElement("option",{value:"USD"},"USD")))),React.createElement("div",{className:"mt-2 text-[11px] text-white/40"},"Rewards are configurable now; payout logic hooks into Finance Hub later."))),React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/10 text-white hover:bg-white/15",onClick:()=>{if(!Ts){setToast({kind:"warn",msg:"Generate or enter a referral code first."});return}bo(((q==null?void 0:q.shareMessage)||"Join me on FlowOFit \u2014 use my referral link: ")+Ea)}},"Copy share message"),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:()=>Ss("share"),disabled:!Ts,style:{opacity:Ts?1:.5}},"Record share (stub)"),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:()=>Ss("convert"),disabled:!Ts,style:{opacity:Ts?1:.5}},"Record conversion (stub)"),React.createElement("button",{className:"px-3 py-2 rounded-xl text-[12px] font-bold border border-white/10 bg-white/5 text-white/80 hover:bg-white/10",onClick:()=>Ss("revenue"),disabled:!Ts,style:{opacity:Ts?1:.5}},"Record revenue +50 (stub)")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Attribution & ROI"),React.createElement("div",{className:"text-[12px] text-white/60"},"Track shares \u2192 conversions \u2192 revenue (stub). Full Finance attribution comes later.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:ar(`SHARES ${((zs=q==null?void 0:q.stats)==null?void 0:zs.shares)||0}`,"neutral")}),React.createElement("span",{className:ar(`CONVERSIONS ${((So=q==null?void 0:q.stats)==null?void 0:So.conversions)||0}`,"neutral")}),React.createElement("span",{className:ar(`REV ${bi(((mn=q==null?void 0:q.stats)==null?void 0:mn.revenue)||0)}`,"neutral")}))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/50"},"Conversion rate (stub)"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},(((Yi=q==null?void 0:q.stats)==null?void 0:Yi.shares)||0)>0?Math.round((((js=q==null?void 0:q.stats)==null?void 0:js.conversions)||0)/(((Qo=q==null?void 0:q.stats)==null?void 0:Qo.shares)||1)*100):0,"%")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/50"},"Revenue per conversion (stub)"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},(((zo=q==null?void 0:q.stats)==null?void 0:zo.conversions)||0)>0?bi((((ur=q==null?void 0:q.stats)==null?void 0:ur.revenue)||0)/(((Tr=q==null?void 0:q.stats)==null?void 0:Tr.conversions)||1)):"\u2014")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/50"},"Notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"Later we will connect real conversion events from CRM + payments from Finance Hub.")))))})()),J===W.MA_AUTOPILOT&&React.createElement(po,{title:"AI Autopilot",subtitle:"Configuration only (you control). Back returns to Marketing & Automations (MA-ENTRY).",onBack:()=>Li(W.MARKETING_HOME)},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"AI suggests \u2014 you control"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"This phase is configuration only. No hidden automation runs. You can pause any autopilot at any time.")),React.createElement("div",{className:"text-[11px] text-white/40"},"Last updated: ",React.createElement("span",{className:"text-white/70"},xi!=null&&xi.lastUpdated?hs(xi.lastUpdated):"\u2014")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 md:col-span-2"},React.createElement("div",{className:"text-white font-extrabold"},"Global Controls"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Quiet hours"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},"Applied across Marketing (broadcasts + drips + autopilots)."),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement("label",{className:"text-[11px] text-white/60"},"Start"),React.createElement("select",{value:sa.start,onChange:q=>vt(Ea=>({...Ea,start:+q.target.value})),className:"h-9 rounded-lg border border-white/10 bg-black/40 px-2 text-[12px] text-white"},Array.from({length:24}).map((q,Ea)=>React.createElement("option",{key:Ea,value:Ea},String(Ea).padStart(2,"0"),":00"))),React.createElement("label",{className:"ml-2 text-[11px] text-white/60"},"End"),React.createElement("select",{value:sa.end,onChange:q=>vt(Ea=>({...Ea,end:+q.target.value})),className:"h-9 rounded-lg border border-white/10 bg-black/40 px-2 text-[12px] text-white"},Array.from({length:24}).map((q,Ea)=>React.createElement("option",{key:Ea,value:Ea},String(Ea).padStart(2,"0"),":00"))))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Frequency caps"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},"Per-autopilot caps limit outreach in any rolling 7-day window."),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Tip: keep caps low to avoid spam + churn.")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-white font-extrabold"},"Preview & Explainability"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Each autopilot shows example messages and the trigger logic it would use. Messaging remains editable in future phases."),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Controls"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/60 list-disc pl-5"},React.createElement("li",null,"Enable / pause anytime"),React.createElement("li",null,"Quiet hours enforced"),React.createElement("li",null,"Frequency caps enforced"),React.createElement("li",null,"Always show \u201Cwhy\u201D"))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-white font-extrabold"},"Autopilots"),React.createElement("button",{type:"button",onClick:()=>{var Ea;var q={enabled:{churn:!1,recovery:!1,motivation:!1,nutrition:!1},caps7d:{churn:2,recovery:3,motivation:2,nutrition:3},lastUpdated:new Date().toISOString()};rs(q),(Ea=B==null?void 0:B.logEvent)==null||Ea.call(B,"autopilot.reset",q)},className:"h-9 px-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Reset defaults")),React.createElement("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3"},[{id:"churn",title:"Churn Prevention",desc:"Detect disengagement and nudge with value + simple next step.",why:"Trigger: inactivity / missed check-ins / declining capacity.",example:"\u201CQuick check-in \u2014 want me to adjust your plan for this week?\u201D"},{id:"recovery",title:"Recovery Nudges",desc:"Encourage sleep, hydration, and deload when capacity drops.",why:"Trigger: capacity score drops into LOW zone.",example:"\u201CYour recovery looks low today. Want a lighter session + mobility?\u201D"},{id:"motivation",title:"PR Motivation",desc:"Celebrate wins and push momentum after progress signals.",why:"Trigger: streaks / completed sessions / PR events.",example:"\u201CNice work this week \u{1F525} Ready to level up your next session?\u201D"},{id:"nutrition",title:"Nutrition Lapse Prevention",desc:"Spot gaps in logging and offer a quick, low-friction prompt.",why:"Trigger: missing logs / skipped meals / low adherence.",example:"\u201CNo stress \u2014 want a 2-minute meal plan suggestion for today?\u201D"}].map(q=>{var Ea,Ts,bo,Fo;return React.createElement("div",{key:q.id,className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},q.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},q.desc)),React.createElement("label",{className:"inline-flex items-center gap-2 select-none"},React.createElement("input",{type:"checkbox",className:"h-4 w-4",checked:!!((Ea=xi==null?void 0:xi.enabled)!=null&&Ea[q.id]),onChange:Ss=>{var zs;var Cn=!!Ss.target.checked;rs(So=>({...So||{},enabled:{...(So==null?void 0:So.enabled)||{},[q.id]:Cn},lastUpdated:new Date().toISOString()})),(zs=B==null?void 0:B.logEvent)==null||zs.call(B,"autopilot.toggled",{id:q.id,enabled:Cn})}}),React.createElement("span",{className:"text-[12px] text-white/70 font-bold"},(Ts=xi==null?void 0:xi.enabled)!=null&&Ts[q.id]?"ON":"OFF"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Why / Trigger"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},q.why)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Cap (7 days)"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("select",{value:(Fo=(bo=xi==null?void 0:xi.caps7d)==null?void 0:bo[q.id])!=null?Fo:2,onChange:Ss=>{var zs;var Cn=+Ss.target.value;rs(So=>({...So||{},caps7d:{...(So==null?void 0:So.caps7d)||{},[q.id]:Cn},lastUpdated:new Date().toISOString()})),(zs=B==null?void 0:B.logEvent)==null||zs.call(B,"autopilot.cap_updated",{id:q.id,cap7d:Cn})},className:"h-9 rounded-lg border border-white/10 bg-black/40 px-2 text-[12px] text-white"},[0,1,2,3,4,5].map(Ss=>React.createElement("option",{key:Ss,value:Ss},Ss===0?"Disabled":`${Ss} / 7d`))),React.createElement("span",{className:"text-[11px] text-white/45"},"0 = never send")))),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] text-white/80 font-bold"},"Example message (preview)"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},q.example)))})),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-2 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/65"},"Safety controls (consent, quiet hours, suppression) are enforced across broadcasts, drips, referrals, and autopilots."),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_SAFETY),className:"h-9 px-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"Open Safety & Compliance"))))),J===W.MA_SAFETY&&React.createElement(po,{title:"Safety & Compliance",subtitle:"Consent, quiet hours, frequency caps, suppression, and audit trail. Back returns to Marketing & Automations (MA-ENTRY).",onBack:()=>Li(W.MARKETING_HOME)},(()=>{var So,mn;var q=Xa||{},Ea=sa||{start:22,end:7},Ts=Yi=>{try{return typeof hs=="function"?hs(Yi):new Date(Yi).toLocaleString()}catch(js){return String(Yi)}},Fo=(window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.query=="function"?window.FOF_EVENT_LOG_V1.query({predicate:Yi=>String((Yi==null?void 0:Yi.name)||"").startsWith("campaign.")||String((Yi==null?void 0:Yi.name)||"").startsWith("automation.")||String((Yi==null?void 0:Yi.name)||"").startsWith("autopilot.")||String((Yi==null?void 0:Yi.name)||"").startsWith("referral.")||String((Yi==null?void 0:Yi.name)||"").startsWith("safety.")}):[]).slice(-25).reverse(),Ss=Yi=>{mi(js=>({...js||{},...Yi||{},lastUpdated:new Date().toISOString()}))},Cn=()=>{var Qo;var Yi=(aa||"").trim();if(!Yi)return;var js={type:ha,value:Yi,reason:(la||"").trim(),at:new Date().toISOString()};Ss({suppression:[js,...q.suppression||[]]});try{(Qo=B==null?void 0:B.logEvent)==null||Qo.call(B,"safety.suppression_added",js)}catch(zo){}Mt(""),xa("")},zs=Yi=>{var zo;var js=Array.isArray(q.suppression)?q.suppression.slice():[],Qo=js[Yi];js.splice(Yi,1),Ss({suppression:js});try{(zo=B==null?void 0:B.logEvent)==null||zo.call(B,"safety.suppression_removed",Qo||{})}catch(ur){}};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Consent & Preview"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("label",{className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-[12px] text-white/70"},"Require consent before sending"),React.createElement("input",{type:"checkbox",checked:q.requireConsent!==!1,onChange:Yi=>{var js;Ss({requireConsent:Yi.target.checked});try{(js=B==null?void 0:B.logEvent)==null||js.call(B,"safety.require_consent",{v:Yi.target.checked})}catch(Qo){}}})),React.createElement("label",{className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-[12px] text-white/70"},"Preview required (campaigns)"),React.createElement("input",{type:"checkbox",checked:q.previewRequired!==!1,onChange:Yi=>{var js;Ss({previewRequired:Yi.target.checked});try{(js=B==null?void 0:B.logEvent)==null||js.call(B,"safety.preview_required",{v:Yi.target.checked})}catch(Qo){}}})),React.createElement("label",{className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-[12px] text-white/70"},"Append unsubscribe footer (email)"),React.createElement("input",{type:"checkbox",checked:q.defaultFooterUnsub!==!1,onChange:Yi=>{var js;Ss({defaultFooterUnsub:Yi.target.checked});try{(js=B==null?void 0:B.logEvent)==null||js.call(B,"safety.unsub_footer",{v:Yi.target.checked})}catch(Qo){}}})),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/55"},"Tip: If consent is enabled, \u201CSend\u201D is blocked until the user checks consent in the composer. This prevents spam and protects trust."))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Quiet Hours"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Schedules inside quiet hours auto-shift to the next allowed time."),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement("div",{className:"text-[12px] text-white/70"},"Start"),React.createElement("select",{value:Ea.start,onChange:Yi=>{var Qo;var js=+Yi.target.value;vt(zo=>({...zo||{},start:js}));try{(Qo=B==null?void 0:B.logEvent)==null||Qo.call(B,"safety.quiet_hours",{...Ea,start:js})}catch(zo){}},className:"h-9 rounded-xl border border-white/10 bg-black/40 px-2 text-[12px] text-white"},Array.from({length:24}).map((Yi,js)=>React.createElement("option",{key:js,value:js},String(js).padStart(2,"0"),":00"))),React.createElement("div",{className:"text-[12px] text-white/70"},"End"),React.createElement("select",{value:Ea.end,onChange:Yi=>{var Qo;var js=+Yi.target.value;vt(zo=>({...zo||{},end:js}));try{(Qo=B==null?void 0:B.logEvent)==null||Qo.call(B,"safety.quiet_hours",{...Ea,end:js})}catch(zo){}},className:"h-9 rounded-xl border border-white/10 bg-black/40 px-2 text-[12px] text-white"},Array.from({length:24}).map((Yi,js)=>React.createElement("option",{key:js,value:js},String(js).padStart(2,"0"),":00")))),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/55"},"Current quiet window: ",React.createElement("span",{className:"text-white/80 font-semibold"},String(Ea.start).padStart(2,"0"),":00")," \u2192 ",React.createElement("span",{className:"text-white/80 font-semibold"},String(Ea.end).padStart(2,"0"),":00"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Frequency Caps"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Soft guardrails to prevent fatigue. (Hard enforcement will be server-side later.)"),React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Global cap (7 days)"),React.createElement("select",{value:(So=q.globalCap7d)!=null?So:4,onChange:Yi=>{var Qo;var js=+Yi.target.value;Ss({globalCap7d:js});try{(Qo=B==null?void 0:B.logEvent)==null||Qo.call(B,"safety.global_cap_7d",{v:js})}catch(zo){}},className:"mt-2 h-9 w-full rounded-xl border border-white/10 bg-black/40 px-2 text-[12px] text-white"},[0,1,2,3,4,5,7,10].map(Yi=>React.createElement("option",{key:Yi,value:Yi},Yi===0?"No cap":`${Yi} / 7d`)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Per-client daily cap"),React.createElement("select",{value:(mn=q.perClientDailyCap)!=null?mn:1,onChange:Yi=>{var Qo;var js=+Yi.target.value;Ss({perClientDailyCap:js});try{(Qo=B==null?void 0:B.logEvent)==null||Qo.call(B,"safety.per_client_daily_cap",{v:js})}catch(zo){}},className:"mt-2 h-9 w-full rounded-xl border border-white/10 bg-black/40 px-2 text-[12px] text-white"},[0,1,2,3].map(Yi=>React.createElement("option",{key:Yi,value:Yi},Yi===0?"No cap":`${Yi} / day`)))),React.createElement("label",{className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-[12px] text-white/70"},"Allow Push actions (currently stub)"),React.createElement("input",{type:"checkbox",checked:!!q.allowPush,onChange:Yi=>{var js;Ss({allowPush:Yi.target.checked});try{(js=B==null?void 0:B.logEvent)==null||js.call(B,"safety.allow_push",{v:Yi.target.checked})}catch(Qo){}}}))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Suppression List"),React.createElement("div",{className:"text-[12px] text-white/55"},"Exclude contacts from marketing sends (e.g., do-not-contact, bounced, requested unsubscribe).")),React.createElement("div",{className:"text-[11px] text-white/45"},"UI stub \u2014 will be enforced server-side later")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement("select",{value:ha,onChange:Yi=>K(Yi.target.value),className:"h-10 rounded-xl border border-white/10 bg-black/40 px-2 text-[12px] text-white"},React.createElement("option",{value:"EMAIL"},"EMAIL"),React.createElement("option",{value:"PHONE"},"PHONE")),React.createElement("input",{value:aa,onChange:Yi=>Mt(Yi.target.value),placeholder:"value (email/phone)",className:"h-10 rounded-xl border border-white/10 bg-black/40 px-3 text-[12px] text-white placeholder:text-white/30"}),React.createElement("input",{value:la,onChange:Yi=>xa(Yi.target.value),placeholder:"reason (optional)",className:"h-10 rounded-xl border border-white/10 bg-black/40 px-3 text-[12px] text-white placeholder:text-white/30"}),React.createElement("button",{type:"button",onClick:Cn,className:"h-10 rounded-xl bg-emerald-500/15 border border-emerald-400/30 hover:bg-emerald-400/20 text-[12px] font-semibold"},"Add")),React.createElement("div",{className:"mt-3 overflow-hidden rounded-xl border border-white/10"},React.createElement("div",{className:"grid grid-cols-12 bg-white/5 px-3 py-2 text-[11px] font-mono uppercase tracking-widest text-white/50"},React.createElement("div",{className:"col-span-2"},"Type"),React.createElement("div",{className:"col-span-4"},"Value"),React.createElement("div",{className:"col-span-4"},"Reason"),React.createElement("div",{className:"col-span-1"},"Added"),React.createElement("div",{className:"col-span-1 text-right"}," ")),React.createElement("div",{className:"divide-y divide-white/5"},(Array.isArray(q.suppression)?q.suppression:[]).slice(0,10).map((Yi,js)=>React.createElement("div",{key:js,className:"grid grid-cols-12 px-3 py-2 text-[12px] text-white/70 bg-black/10"},React.createElement("div",{className:"col-span-2 font-semibold"},Yi.type),React.createElement("div",{className:"col-span-4 truncate"},Yi.value),React.createElement("div",{className:"col-span-4 truncate text-white/55"},Yi.reason||"\u2014"),React.createElement("div",{className:"col-span-1 text-[11px] text-white/45 truncate"},(Yi.at||"").slice(5,16)),React.createElement("div",{className:"col-span-1 text-right"},React.createElement("button",{type:"button",onClick:()=>zs(js),className:"px-2 py-1 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-[11px]"},"Remove")))),(Array.isArray(q.suppression)?q.suppression.length:0)===0&&React.createElement("div",{className:"px-3 py-3 text-[12px] text-white/50"},"No suppressed contacts yet.")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-bold text-white"},"Audit Trail"),React.createElement("div",{className:"text-[12px] text-white/55"},"Recent marketing-related events from the shared event log.")),React.createElement("button",{type:"button",onClick:()=>{var Yi;try{(Yi=B==null?void 0:B.logEvent)==null||Yi.call(B,"safety.audit_viewed",{at:new Date().toISOString()})}catch(js){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Refresh")),React.createElement("div",{className:"mt-3 space-y-2"},Fo.map((Yi,js)=>React.createElement("div",{key:js,className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},Yi.name),React.createElement("div",{className:"text-[11px] text-white/45"},Ts(Yi.ts))),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 line-clamp-2"},JSON.stringify(Yi.payload||{})))),Fo.length===0&&React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/55"},"No marketing events yet. Send a campaign or save an automation to populate this feed."))))})()),J===W.INSIGHTS_DASH&&React.createElement(po,{title:"Pro Insights",subtitle:"Operator dashboard: summarise + prioritise + route actions. Reports/export stay owned by Flowchart #5.",onBack:()=>Li(W.OVERVIEW)},(()=>{var zl,ql,lr;var q=typeof Io=="function"?Io()||[]:[],Ea=q.slice(0,5),Ts=q.filter(ia=>(ia.pri||3)<=2).length,bo=q.length,Fo=Array.isArray(Ge)?Ge:[],Ss=Fo.filter(ia=>ia.status==="SENT").length,Cn=Fo.filter(ia=>ia.status==="SCHEDULED").length,zs=Fo.filter(ia=>ia.status==="DRAFT").length,So=Array.isArray(Qi)?Qi:[],mn=So.filter(ia=>ia.enabled).length,Yi=So.filter(ia=>!ia.enabled).length,js=ct||{},Qo=js&&js.stats?js.stats:{shares:0,conversions:0,revenue:0},ur=(xi||{}).enabled||{},Tr=Object.keys(ur).filter(ia=>ur[ia]).length,Oo=typeof __crm_records!="undefined"&&Array.isArray(__crm_records)?__crm_records:[],Ls=Oo.filter(ia=>String(ia.type||"").toUpperCase()==="LEAD"||String(ia.stage||"").toLowerCase().includes("lead")).length,Go=Oo.filter(ia=>String(ia.stage||"")==="Application"||String(ia.stage||"").toLowerCase().includes("application")).length,vo=Oo.filter(ia=>String(ia.type||"").toUpperCase()==="CLIENT"||String(ia.stage||"").toLowerCase().includes("client")).length,xo=(ia,Es)=>{try{var Ro=localStorage.getItem(ia);return Ro?JSON.parse(Ro):Es}catch(Ro){return Es}},cn=(ia,Es=0)=>{var Ro=Number(ia);return Number.isFinite(Ro)?Ro:Es},wa=ia=>{try{return ia?Date.parse(String(ia).slice(0,10)):NaN}catch(Es){return NaN}},ho=Array.isArray(xo("fof.finance.invoices.v1",[]))?xo("fof.finance.invoices.v1",[]):[],Xi=Array.isArray(xo("fof.finance.offline_ledger.v1",[]))?xo("fof.finance.offline_ledger.v1",[]):[],gs=xo("fof.finance.dunning.v1",{}),Do=Array.isArray(xo("fof_event_log_v1",[]))?xo("fof_event_log_v1",[]):[],ir=Oo.filter(ia=>String(ia.type||"").toUpperCase()==="CLIENT"||String(ia.stage||"").toLowerCase().includes("client")).map(ia=>({id:ia.id||ia.clientId||ia.email||ia.name||"client_"+Math.random(),name:ia.name||ia.clientName||ia.fullName||ia.email||"Client",email:ia.email||"",plan:ia.plan||ia.planName||ia.tier||""}));try{window.__FOF_CLIENTS_CACHE=Array.isArray(ir)?ir:[]}catch(ia){}var Dr=Array.from(new Set([...ho.map(ia=>ia==null?void 0:ia.clientName).filter(Boolean),...Xi.map(ia=>ia==null?void 0:ia.clientName).filter(Boolean)])).slice(0,50).map((ia,Es)=>({id:`c_fin_${Es}`,name:ia,email:"",plan:""})),rr=ir.length?ir:Dr,mr=ia=>{var Es=(ia||"").trim().toLowerCase(),Ro=ho.filter(ln=>String((ln==null?void 0:ln.status)||"").toUpperCase()==="PAID"&&String((ln==null?void 0:ln.clientName)||"").trim().toLowerCase()===Es),un=Ro.reduce((ln,fn)=>{var oo,Zn,Or;return ln+cn((Or=(Zn=(oo=fn==null?void 0:fn.total)!=null?oo:fn==null?void 0:fn.amount)!=null?Zn:fn==null?void 0:fn.subtotal)!=null?Or:0,0)},0),Jo=Xi.filter(ln=>String((ln==null?void 0:ln.clientName)||"").trim().toLowerCase()===Es),kn=Jo.reduce((ln,fn)=>{var oo;return ln+cn((oo=fn==null?void 0:fn.amount)!=null?oo:0,0)},0);return{paidInv:Ro,paidInvSum:un,off:Jo,offSum:kn,total:un+kn}},kr=(ia,Es=60)=>{var Ro=(ia||"").trim().toLowerCase(),Jo=Date.now()-Es*864e5,kn=ho.filter(oo=>String((oo==null?void 0:oo.status)||"").toUpperCase()==="PAID"&&String((oo==null?void 0:oo.clientName)||"").trim().toLowerCase()===Ro).map(oo=>{var Zn,Or;return{amt:cn((Or=(Zn=oo==null?void 0:oo.total)!=null?Zn:oo==null?void 0:oo.amount)!=null?Or:0,0),ms:wa((oo==null?void 0:oo.paidAt)||(oo==null?void 0:oo.issueDate)||(oo==null?void 0:oo.dueDate))}}).filter(oo=>Number.isFinite(oo.ms)&&oo.ms>=Jo),ln=Xi.filter(oo=>String((oo==null?void 0:oo.clientName)||"").trim().toLowerCase()===Ro).map(oo=>{var Zn;return{amt:cn((Zn=oo==null?void 0:oo.amount)!=null?Zn:0,0),ms:wa(oo==null?void 0:oo.dateISO)}}).filter(oo=>Number.isFinite(oo.ms)&&oo.ms>=Jo);return[...kn,...ln].reduce((oo,Zn)=>oo+Zn.amt,0)},hn=ia=>{var Es=String((ia==null?void 0:ia.id)||""),Ro=String((ia==null?void 0:ia.name)||"").trim().toLowerCase(),un=Do.filter(Jo=>{var kn=(Jo==null?void 0:Jo.payload)||{},ln=String(kn.clientId||kn.client_id||""),fn=String(kn.clientName||kn.client_name||"").trim().toLowerCase();return ln&&ln===Es||fn&&fn===Ro}).length;return un>=12?{band:"HIGH",score:40,hits:un}:un>=5?{band:"MED",score:24,hits:un}:{band:"LOW",score:12,hits:un}},Un=ia=>{var Es=(ia||"").trim().toLowerCase(),Ro=ho.some(Jo=>String((Jo==null?void 0:Jo.status)||"").toUpperCase()==="OVERDUE"&&String((Jo==null?void 0:Jo.clientName)||"").trim().toLowerCase()===Es),un=Object.values(gs||{}).filter(Jo=>((Jo==null?void 0:Jo.reminderCount)||0)>0).length;return Ro?{score:6,flag:"OVERDUE"}:un?{score:14,flag:"DUNNING"}:{score:25,flag:null}},Ln=ia=>{var Es=hn(ia);return Es.band==="HIGH"?{score:20,flag:null}:Es.band==="MED"?{score:12,flag:"MED_INACTIVE"}:{score:6,flag:"HIGH_INACTIVE"}},Pr=ia=>{var Es=String((ia==null?void 0:ia.plan)||"").toLowerCase();return Es.includes("annual")||Es.includes("year")?10:Es.includes("pack")||Es.includes("credit")?6:Es.includes("month")?4:5},Cl=ia=>!!(ia!=null&&ia.linked||ia!=null&&ia.coachId||ia!=null&&ia.trainerId)?5:0,ld=ia=>{var Es=hn(ia),Ro=Un(ia==null?void 0:ia.name),un=Ln(ia),Jo=Pr(ia),kn=Cl(ia);return{score:Math.max(0,Math.min(100,Es.score+Ro.score+un.score+Jo+kn)),reasons:[{k:"Engagement",v:Es.band,n:Es.hits},{k:"Payment",v:Ro.flag||"GOOD",n:Ro.score},{k:"Inactivity",v:un.flag||"LOW",n:un.score}]}},dd=ia=>ia<=19?1:ia<=34?2:ia<=49?3:ia<=64?5:ia<=79?8:ia<=89?12:18,Yr=ia=>{var Es=mr(ia==null?void 0:ia.name),Ro=kr(ia==null?void 0:ia.name,60),un=Ro>0?Ro/2:0,Jo=ld(ia),kn=dd(Jo.score),ln=Es.total+un*kn;return{client:ia,actual:Es.total,mrr:un,score:Jo.score,remainingMonths:kn,predicted:ln,flags:{payment:Un(ia==null?void 0:ia.name).flag,inactivity:Ln(ia).flag},reasons:Jo.reasons}},Qn=rr.map(Yr).sort((ia,Es)=>(Es.predicted||0)-(ia.predicted||0)),Kr=Qn.reduce((ia,Es)=>ia+(Es.predicted||0),0),Il=Qn.reduce((ia,Es)=>ia+(Es.actual||0),0),$r=Qn.filter(ia=>{var Es,Ro;return(ia.predicted||0)>=500&&(((Es=ia.flags)==null?void 0:Es.payment)||((Ro=ia.flags)==null?void 0:Ro.inactivity))}).length,or=({id:ia,label:Es})=>React.createElement("button",{type:"button",onClick:()=>U(ia),className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(Nt===ia?"border-purple-400/35 bg-purple-500/15 text-purple-100":"border-white/10 bg-white/5 hover:bg-white/10 text-white/70")},Es),rn=({k:ia,v:Es,d:Ro})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},ia),React.createElement("div",{className:"mt-2 text-2xl font-extrabold text-white"},Es),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Ro)),sr=({it:ia})=>React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},ia.title),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 line-clamp-2"},ia.desc)),React.createElement("button",{type:"button",onClick:()=>{try{to(ia.nav)}catch(Es){}},className:"shrink-0 px-3 py-2 rounded-xl bg-sky-500/15 border border-sky-400/30 hover:bg-sky-400/20 text-[12px] font-semibold"},"Open")));return React.createElement("div",{className:"space-y-4 pb-28"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(or,{id:"OVERVIEW",label:"Overview"}),React.createElement(or,{id:"GROWTH",label:"Growth"}),React.createElement(or,{id:"AUTOMATION",label:"Automation"}),React.createElement(or,{id:"ATTRIBUTION",label:"Attribution"}),React.createElement(or,{id:"LTV",label:"LTV"}),React.createElement(or,{id:"RETENTION",label:"Retention"}),React.createElement(or,{id:"ACTIONS",label:"Action Queue"}),React.createElement("div",{className:"ml-auto text-[10px] font-mono uppercase tracking-widest text-white/40"},"Insights routes actions \u2022 Reports owns exports")),Nt==="OVERVIEW"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement(rn,{k:"Urgent actions",v:Ts,d:"Priority 1\u20132 items needing attention."}),React.createElement(rn,{k:"Queue size",v:bo,d:"Across Marketing / CRM / Finance."}),React.createElement(rn,{k:"Campaign drafts",v:zs,d:"Broadcasts pending review/send."}),React.createElement(rn,{k:"Autopilots ON",v:Tr,d:"Enabled AI autopilots (config only)."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},"Advisories"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Top items you can act on now (deep-links).")),React.createElement("button",{type:"button",onClick:()=>{try{window.__fofToast&&window.__fofToast("Pro Insights refreshed")}catch(ia){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Refresh")),Ea.length?React.createElement("div",{className:"mt-3 space-y-2"},Ea.map(ia=>React.createElement(sr,{key:ia.id,it:ia}))):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"No urgent items right now. You\u2019re clear."),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>Li(W.INSIGHTS_ACTIONS),className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-purple-200 text-[11px] font-mono uppercase tracking-widest"},"View full Action Queue"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm font-semibold"},"Quick links"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Jump to the owning tool (no duplicated analytics)."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"CRM Pipeline"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_BROADCAST),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Broadcasts"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_DRIP),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Drip Workflows"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_REFERRALS),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Referrals"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_AUTOPILOT),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"AI Autopilot"),React.createElement("button",{type:"button",onClick:()=>{try{to({view:"FINANCE_HUB"})}catch(ia){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Finance Hub"),React.createElement("button",{type:"button",onClick:()=>Li(W.INSIGHTS_ACTIONS),className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-[12px] text-purple-200"},"Action Queue")))),Nt==="GROWTH"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement(rn,{k:"Leads",v:Ls,d:"Active lead records in CRM."}),React.createElement(rn,{k:"Applications",v:Go,d:"Application stage items."}),React.createElement(rn,{k:"Clients",v:vo,d:"Converted / active clients."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm font-semibold"},"Growth notes"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"This is a KPI snapshot (not a report). For exports and full analytics, open Reports."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[12px]"},"Open CRM Pipeline"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_BROADCAST),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Run a broadcast")))),Nt==="AUTOMATION"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement(rn,{k:"Campaigns sent",v:Ss,d:"Broadcast campaigns delivered."}),React.createElement(rn,{k:"Scheduled",v:Cn,d:"Queued broadcasts (quiet hours apply)."}),React.createElement(rn,{k:"Drips enabled",v:mn,d:"Active drip workflows."}),React.createElement(rn,{k:"Drips paused",v:Yi,d:"Paused/disabled workflows."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm font-semibold"},"Automation health"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Warnings and fixes are surfaced in Action Queue (deep-links). This panel stays light by design."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>Li(W.MA_DRIP),className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-purple-200 text-[12px]"},"Open Drip Workflows"),React.createElement("button",{type:"button",onClick:()=>Li(W.INSIGHTS_ACTIONS),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Review Action Queue")))),Nt==="ATTRIBUTION"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement(rn,{k:"Referral shares",v:Qo.shares||0,d:"Share events recorded."}),React.createElement(rn,{k:"Conversions",v:Qo.conversions||0,d:"Converted referrals."}),React.createElement(rn,{k:"Revenue",v:Qo.revenue||0,d:"Revenue attributed (stub)."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm font-semibold"},"Attribution notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Attribution is a summary here. For detailed breakdowns and exports, use Reports."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>Li(W.MA_REFERRALS),className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[12px]"},"Open Referrals"),React.createElement("button",{type:"button",onClick:()=>Li(W.MA_BROADCAST),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Open Broadcasts"),React.createElement("button",{type:"button",onClick:()=>{try{to({view:"FINANCE_HUB"})}catch(ia){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Finance follow-up")))),Nt==="LTV"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement(rn,{k:"Portfolio LTV (pred)",v:bi(Kr||0),d:"Sum of predicted LTV across clients (deterministic)."}),React.createElement(rn,{k:"Revenue to date",v:bi(Il||0),d:"Paid invoices + offline ledger (read-only)."}),React.createElement(rn,{k:"High-LTV at risk",v:$r,d:"Predicted \u2265 high threshold with payment/inactivity flags."}),React.createElement(rn,{k:"Clients tracked",v:Qn.length,d:"Derived from CRM (fallback: finance names)."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},"Client LTV"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Deterministic model: ",React.createElement("span",{className:"text-white/80 font-semibold"},"LTV = Actual + (MRR \xD7 Remaining Months)"),". Exports remain owned by Reports.",React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-[11px] text-white/60 mr-2"},"Segments:"),["ALL","HIGH","MID","LOW"].map(ia=>React.createElement("button",{key:ia,type:"button",onClick:()=>ht(ia),className:`px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest ${ot===ia?"border-purple-400/40 bg-purple-500/15 text-purple-200":"border-white/10 bg-white/5 hover:bg-white/10 text-white/70"}`},ia)),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{ma(!0)}catch(ia){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Segment Settings"),React.createElement("button",{type:"button",onClick:()=>{try{var ia=ot==="HIGH"?"LTV_HIGH":ot==="MID"?"LTV_MID":ot==="LOW"?"LTV_LOW":"ALL_CLIENTS",Es=ia==="ALL_CLIENTS"?"All Clients":ia.replace("LTV_","")+" LTV";Ua("fof.ma.drip_prefill.v1",{segment:ia,name:`Automation \u2014 Protect ${Es}`,template:"LTV_PROTECT",createdAt:new Date().toISOString()}),s({section:"MA_DRIP",sub:null,filter:null})}catch(ia){}},className:"px-3 py-2 rounded-xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Use in Drip"),React.createElement("button",{type:"button",onClick:()=>{try{var ia=ot==="HIGH"?"LTV_HIGH":ot==="MID"?"LTV_MID":ot==="LOW"?"LTV_LOW":"ALL_CLIENTS",Es=ia==="ALL_CLIENTS"?"Campaign \u2014 All clients":`Campaign \u2014 ${ia.replace("LTV_","")} LTV segment`;localStorage.setItem("fof.ma.broadcast_prefill.v1",JSON.stringify({audience:ia,name:Es,channel:"EMAIL"})),Li(W.MA_BROADCAST,{mode:"create",source:"insights_ltv",seg:ia})}catch(ia){}},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Create Segment Campaign"))))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Li(W.INSIGHTS_ACTIONS)}catch(ia){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Open Action Queue"),React.createElement("button",{type:"button",onClick:()=>{var ia;try{(ia=window.__fofToast)==null||ia.call(window,"LTV refreshed")}catch(Es){}},className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-purple-200 text-[12px]"},"Refresh"))),React.createElement("div",{className:"mt-3 overflow-hidden rounded-2xl border border-white/10"},React.createElement("div",{className:"grid grid-cols-12 bg-white/5 px-3 py-2 text-[11px] font-mono uppercase tracking-widest text-white/50"},React.createElement("div",{className:"col-span-3"},"Client"),React.createElement("div",{className:"col-span-2 text-right"},"Actual"),React.createElement("div",{className:"col-span-2 text-right"},"MRR"),React.createElement("div",{className:"col-span-2 text-right"},"Months"),React.createElement("div",{className:"col-span-2 text-right"},"Predicted"),React.createElement("div",{className:"col-span-1 text-right"}," ")),React.createElement("div",{className:"divide-y divide-white/5 max-h-[460px] overflow-auto"},(ot==="ALL"?Qn:Qn.filter(ia=>{var Es=Number((ia==null?void 0:ia.predicted)||0);return ot==="HIGH"?Es>=(Number(He==null?void 0:He.highMin)||500):ot==="MID"?Es>=(Number(He==null?void 0:He.midMin)||200)&&Es<(Number(He==null?void 0:He.highMin)||500):ot==="LOW"?Es<(Number(He==null?void 0:He.midMin)||200):!0})).map((ia,Es)=>{var Ro,un,Jo,kn,ln;return React.createElement("button",{key:Es,type:"button",onClick:()=>{ut(ia),w(!0)},className:"w-full text-left grid grid-cols-12 px-3 py-3 bg-black/10 hover:bg-white/5 text-[12px] text-white/75"},React.createElement("div",{className:"col-span-3 min-w-0"},React.createElement("div",{className:"font-semibold text-white truncate"},((Ro=ia.client)==null?void 0:Ro.name)||"Client"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},((un=ia.flags)==null?void 0:un.payment)&&React.createElement("span",{className:ar(ia.flags.payment,"warn")},ia.flags.payment),((Jo=ia.flags)==null?void 0:Jo.inactivity)&&React.createElement("span",{className:ar(ia.flags.inactivity,"warn")},ia.flags.inactivity),!((kn=ia.flags)!=null&&kn.payment)&&!((ln=ia.flags)!=null&&ln.inactivity)&&React.createElement("span",{className:ar("OK","good")},"OK"))),React.createElement("div",{className:"col-span-2 text-right font-semibold"},bi(ia.actual||0)),React.createElement("div",{className:"col-span-2 text-right"},bi(ia.mrr||0)),React.createElement("div",{className:"col-span-2 text-right"},ia.remainingMonths),React.createElement("div",{className:"col-span-2 text-right font-extrabold text-white"},bi(ia.predicted||0)),React.createElement("div",{className:"col-span-1 text-right"},React.createElement("span",{className:"px-2 py-1 rounded-lg border border-white/10 bg-white/5 text-[11px]"},"View")))}),Qn.length===0&&React.createElement("div",{className:"px-3 py-4 text-[12px] text-white/55"},"No clients found yet. Add CRM clients or log invoices/offline payments in Finance Hub."))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{to({view:"REPORTS"})}catch(ia){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[12px]"},"Send to Reports (exports)"),React.createElement("div",{className:"text-[11px] text-white/45 self-center"},"Model v6.1.1 \u2022 deterministic \u2022 explainable \u2022 no finance mutation"))),Q&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] bg-black/70 flex items-end md:items-center justify-center p-3"},React.createElement("div",{className:"w-full md:max-w-2xl rounded-3xl border border-white/12 bg-black/70 backdrop-blur p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Pro Insights \u2022 LTV"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white truncate"},((zl=L==null?void 0:L.client)==null?void 0:zl.name)||"Client"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"LTV = Actual + (MRR \xD7 Remaining Months). TenureScore maps to months (deterministic).")),React.createElement("button",{type:"button",onClick:()=>{w(!1)},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Actual"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},bi((L==null?void 0:L.actual)||0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"MRR"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},bi((L==null?void 0:L.mrr)||0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"TenureScore"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},(ql=L==null?void 0:L.score)!=null?ql:0)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Remaining"),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},(lr=L==null?void 0:L.remainingMonths)!=null?lr:0," mo"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Explainability"),React.createElement("div",{className:"text-[12px] text-white/55"},"Top drivers")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},((L==null?void 0:L.reasons)||[]).slice(0,3).map((ia,Es)=>React.createElement("div",{key:Es,className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},ia.k),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},ia.v),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},ia.n!=null?String(ia.n):""))))),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Li(W.CRM_PIPELINE),w(!1)}catch(ia){}},className:"px-4 py-2 rounded-2xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[12px]"},"Create CRM task"),React.createElement("button",{type:"button",onClick:()=>{try{Li(W.MA_AUTOPILOT),w(!1)}catch(ia){}},className:"px-4 py-2 rounded-2xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[12px]"},"Add to Autopilot"),React.createElement("button",{type:"button",onClick:()=>{try{to({view:"REPORTS"})}catch(ia){}},className:"px-4 py-2 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 text-[12px]"},"Send to Reports"),React.createElement("div",{className:"ml-auto text-[11px] text-white/45 self-center"},"Predicted: ",React.createElement("span",{className:"text-white font-semibold"},bi((L==null?void 0:L.predicted)||0))))))),At&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[80] flex items-end md:items-center justify-center bg-black/70 p-3"},React.createElement("div",{className:"w-full max-w-xl rounded-3xl border border-white/12 bg-zinc-950/95 p-5 shadow-2xl"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-bold tracking-wide"},"LTV Segment Definitions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Adjust thresholds used for High/Mid/Low segmentation. Deterministic and explainable.")),React.createElement("button",{type:"button",onClick:()=>ma(!1),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Close")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-wide text-white/55"},"High threshold"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("input",{type:"number",min:0,value:Number(He==null?void 0:He.highMin)||500,onChange:ia=>Ca(Es=>({...Es||{},highMin:Number(ia.target.value||0)})),className:"w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"})),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Clients with predicted LTV \u2265 this value are HIGH.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] uppercase tracking-wide text-white/55"},"Mid threshold"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("input",{type:"number",min:0,value:Number(He==null?void 0:He.midMin)||200,onChange:ia=>Ca(Es=>({...Es||{},midMin:Number(ia.target.value||0)})),className:"w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white"})),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Clients with predicted LTV between MID and HIGH are MID. Below MID is LOW."))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-wide text-white/55"},"Presets"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Apply a preset instantly. You can also save your own.")),React.createElement("button",{type:"button",onClick:()=>Ca(et),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Reset Defaults")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},((He==null?void 0:He.presets)||[]).map(ia=>React.createElement("button",{key:ia.id,type:"button",onClick:()=>Ca(Es=>({...Es||{},activePresetId:ia.id,highMin:ia.highMin,midMin:ia.midMin})),className:`px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest ${(He==null?void 0:He.activePresetId)===ia.id?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/5 hover:bg-white/10 text-white/80"}`},ia.name))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2 items-end"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Save current thresholds as preset"),React.createElement("input",{value:Je,onChange:ia=>Oa(ia.target.value),placeholder:"Preset name (e.g., Ramadan Conservative)",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-[12px] text-white placeholder:text-white/35"})),React.createElement("button",{type:"button",onClick:()=>{var ia=(Je||"").trim();if(!ia)return;var Es="CUSTOM_"+Math.random().toString(16).slice(2),Ro={id:Es,name:ia,highMin:Number(He==null?void 0:He.highMin)||500,midMin:Number(He==null?void 0:He.midMin)||200};Ca(un=>({...un||{},activePresetId:Es,presets:[Ro,...(un==null?void 0:un.presets)||[]]})),Oa("")},className:"px-3 py-2 rounded-xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Save Preset"))),React.createElement("div",{className:"mt-4 text-[11px] text-white/50"},"Current bands: HIGH \u2265 ",React.createElement("span",{className:"text-white/80 font-semibold"},Number(He==null?void 0:He.highMin)||500),", MID ",Number(He==null?void 0:He.midMin)||200,"\u2013",(Number(He==null?void 0:He.highMin)||500)-1,", LOW < ",Number(He==null?void 0:He.midMin)||200,"."))),Nt==="RETENTION"&&(()=>{var Or;var ia=Qn||[],Es=Number(He==null?void 0:He.highMin)||500,Ro=Number(He==null?void 0:He.midMin)||200,un=Yo=>{var Tl,Er,xr,Jr;var gn=[];var qn=0;var Rl=(Tl=Yo==null?void 0:Yo.flags)==null?void 0:Tl.payment,Mr=(Er=Yo==null?void 0:Yo.flags)==null?void 0:Er.inactivity,Fr=String(((Jr=(xr=Yo==null?void 0:Yo.reasons)==null?void 0:xr.find(jr=>(jr==null?void 0:jr.k)==="Engagement"))==null?void 0:Jr.v)||"").toUpperCase();Rl==="OVERDUE"?(qn+=45,gn.push("Payment overdue")):Rl==="DUNNING"&&(qn+=20,gn.push("Payment follow-up")),Mr==="HIGH_INACTIVE"?(qn+=35,gn.push("Inactive / low logs")):Mr==="MED_INACTIVE"&&(qn+=18,gn.push("Engagement dropping")),Fr==="LOW"&&(qn+=12,gn.push("Low engagement")),((Yo==null?void 0:Yo.predicted)||0)>=Es?(qn+=8,gn.push("High predicted value")):((Yo==null?void 0:Yo.predicted)||0)>=Ro&&(qn+=4,gn.push("Mid predicted value")),qn=Math.max(0,Math.min(100,qn));var on=qn>=60?"LOW":qn>=30?"MID":"HIGH";return{...Yo,churnRisk:qn,retentionBand:on,churnDrivers:gn.slice(0,4)}},Jo=ia.map(un).sort((Yo,gn)=>(gn.churnRisk||0)-(Yo.churnRisk||0)),kn=Jo.reduce((Yo,gn)=>(Yo[gn.retentionBand]=(Yo[gn.retentionBand]||0)+1,Yo),{HIGH:0,MID:0,LOW:0}),ln={};Jo.forEach(Yo=>(Yo.churnDrivers||[]).forEach(gn=>{ln[gn]=(ln[gn]||0)+1}));var fn=Object.entries(ln).sort((Yo,gn)=>gn[1]-Yo[1]).slice(0,5),oo=({r:Yo})=>{var gn,qn;return React.createElement("button",{type:"button",onClick:()=>{try{ut(Yo.client),w(!0)}catch(Rl){}},className:"w-full text-left grid grid-cols-12 gap-2 px-3 py-2 text-[12px] hover:bg-white/5"},React.createElement("div",{className:"col-span-4 text-white/90 truncate"},((gn=Yo.client)==null?void 0:gn.name)||((qn=Yo.client)==null?void 0:qn.email)||"Client"),React.createElement("div",{className:"col-span-2 text-white/70"},Yo.retentionBand),React.createElement("div",{className:"col-span-2 text-white/70"},Math.round(Yo.churnRisk||0)),React.createElement("div",{className:"col-span-4 text-white/60 truncate"},(Yo.churnDrivers||[]).join(" \u2022 ")||"\u2014"))},Zn=()=>{try{Ua("fof.ma.drip_prefill.v1",{segment:"ALL_CLIENTS",name:"Automation \u2014 Re-engage at-risk clients",template:"RETENTION_REENGAGE",createdAt:new Date().toISOString()}),s({section:"MA_DRIP",sub:null,filter:null})}catch(Yo){}};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement(rn,{k:"Retention: Healthy",v:kn.HIGH,d:"Low churn risk (rule-based)."}),React.createElement(rn,{k:"Retention: Watch",v:kn.MID,d:"Medium churn risk \u2014 monitor + nudge."}),React.createElement(rn,{k:"Retention: At-risk",v:kn.LOW,d:"High churn risk \u2014 take action now."}),React.createElement(rn,{k:"Top driver",v:((Or=fn[0])==null?void 0:Or[0])||"\u2014",d:"Most common churn driver in range."})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},"Churn drivers"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Deterministic (no AI): payment health + engagement proxy + value band. This powers Action Queue suggestions and Drip templates."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},fn.length?fn.map(([Yo,gn])=>React.createElement("span",{key:Yo,className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 text-[12px] text-white/75"},Yo," ",React.createElement("span",{className:"text-white/40"},"(",gn,")"))):React.createElement("span",{className:"text-[12px] text-white/55"},"No churn drivers detected yet (needs CRM/finance/events)."))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Li(W.INSIGHTS_ACTIONS),className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-purple-200 text-[12px]"},"Open Action Queue"),React.createElement("button",{type:"button",onClick:Zn,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[12px]"},"Create Re-engage Drip")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 overflow-hidden"},React.createElement("div",{className:"grid grid-cols-12 bg-white/5 px-3 py-2 text-[11px] font-mono uppercase tracking-widest text-white/50"},React.createElement("div",{className:"col-span-4"},"Client"),React.createElement("div",{className:"col-span-2"},"Retention"),React.createElement("div",{className:"col-span-2"},"Risk"),React.createElement("div",{className:"col-span-4"},"Drivers")),React.createElement("div",{className:"max-h-72 overflow-y-auto trainer-scroll divide-y divide-white/5"},Jo.slice(0,20).map(Yo=>{var gn,qn;return React.createElement(oo,{key:((gn=Yo.client)==null?void 0:gn.id)||((qn=Yo.client)==null?void 0:qn.name)||Math.random(),r:Yo})}),!Jo.length&&React.createElement("div",{className:"p-4 text-[12px] text-white/55"},"No clients found yet. Add CRM clients or finance entries to populate retention signals."))),React.createElement("div",{className:"text-[11px] text-white/50"},"Note: This retention view is intentionally lightweight (Insights = decision layer). Detailed cohort curves + exports will live in Reports in later Phase 6 steps."))})(),Nt==="ACTIONS"&&React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-sm font-semibold"},"Action Queue"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"This is the decision layer. Open the full queue for triage."),React.createElement("div",{className:"mt-3"},React.createElement("button",{type:"button",onClick:()=>Li(W.INSIGHTS_ACTIONS),className:"px-3 py-2 rounded-xl bg-purple-500/10 border border-purple-400/20 hover:bg-purple-500/15 text-purple-200 text-[12px]"},"Open full Action Queue"))),Ea.length?React.createElement("div",{className:"space-y-2"},Ea.map(ia=>React.createElement(sr,{key:ia.id,it:ia}))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/55"},"No items in queue yet.")))})()),J===W.INSIGHTS_ACTIONS&&React.createElement(po,{title:"Action Queue",subtitle:"INSIGHTS-ACTIONS \u2014 Prioritised tasks that deep-link into CRM / Marketing / Finance.",onBack:()=>Li(W.INSIGHTS_DASH)},React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold"},"Next best actions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"This queue is a decision layer \u2014 not a report. Each item deep-links to the owning tool.")),React.createElement("button",{type:"button",onClick:()=>{try{window.__fofToast&&window.__fofToast("Action Queue refreshed")}catch(q){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Refresh"))),(Io()||[]).map(q=>React.createElement("div",{key:q.id,className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-bold uppercase border border-white/10 bg-white/5"},Rn(q.pri)),React.createElement("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold uppercase border border-white/10 bg-black/30 text-white/70"},q.type)),React.createElement("div",{className:"mt-2 text-[13px] font-semibold text-white"},q.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},q.desc)),React.createElement("div",{className:"flex flex-col items-end gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:()=>{try{to(q.nav)}catch(Ea){}},className:"px-3 py-2 rounded-xl bg-sky-500/15 border border-sky-400/30 hover:bg-sky-400/20 text-[12px] font-semibold"},q.cta),React.createElement("button",{type:"button",onClick:()=>{try{window.__fofToast&&window.__fofToast("Marked as done (UI only)")}catch(Ea){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px]"},"Mark done"))))))),J===W.INSIGHTS_LTV&&React.createElement(po,{title:"LTV Advisory",subtitle:"INSIGHTS-LTV \u2014 Advisory LTV predictor (stub per lock).",onBack:()=>Li(W.OVERVIEW)},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/60"},"Stub: LTV advisory predictor placeholder. Implement in Phase 4.4 / later.")),![W.CRM_PIPELINE,W.CRM_APPLICATIONS,W.MARKETING_HOME,W.MA_BROADCAST,W.MA_DRIP,W.MA_REFERRALS,W.MA_AUTOPILOT,W.MA_SAFETY,W.INSIGHTS_DASH,W.INSIGHTS_ACTIONS,W.INSIGHTS_LTV].includes(J)&&React.createElement(po,{title:Ia,subtitle:"Stub page shell (locked). Full implementation comes in the next Phase 4 sub-steps.",onBack:()=>Li(W.OVERVIEW)},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/60"},"This destination exists as a routed page shell (tile \u2192 page). Feature UI will be added in Phase 4.3+.")),React.createElement(td,{open:X,onClose:()=>ne(!1),items:xl})))}return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300/90"},"Business Growth Hub"),React.createElement("h2",{className:"mt-1 text-xl font-bold text-white"},"Phase 0 \u2014 Redundancy Scaffolding"),React.createElement("p",{className:"mt-1 text-sm text-zinc-300"},"Single-owner home for ",React.createElement("span",{className:"text-white font-semibold"},"CRM"),", ",React.createElement("span",{className:"text-white font-semibold"},"Marketing Automations"),", and ",React.createElement("span",{className:"text-white font-semibold"},"Pro Insights"),". Automations in the sidebar are now a shortcut into this hub.")),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Li(W.MARKETING_HOME)}catch(Be){}},className:"px-3 py-2 rounded-xl bg-orange-500/10 border border-orange-400/30 hover:bg-orange-500/20 text-orange-200 text-[11px] font-mono uppercase tracking-widest"},"Marketing Automations"),React.createElement("button",{type:"button",onClick:()=>{try{s&&s({section:"CRM-PIPELINE",sub:null,filter:null})}catch(Be){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"CRM Pipeline"))),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-titanium-800"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"Owner map (locked)"),React.createElement("div",{className:"text-[12px] text-zinc-400 mt-1"},"CRM + Automations + Insights live here (Flowchart #9). Finance lives in Finance Hub (Flowchart #11). Reports/export lives in Reports (Flowchart #5).")),React.createElement("button",{type:"button",onClick:()=>{try{Li(W.MARKETING_HOME)}catch(Be){}},className:"px-3 py-2 rounded-xl bg-amber-500/10 border border-amber-400/30 hover:bg-amber-500/20 text-amber-100 text-[11px] font-mono uppercase tracking-widest",title:"Opens the single-owner automation module"},"Open Automations Owner"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},[{id:"SETUP",label:"Business Setup",desc:"Brand \u2022 Payments \u2022 First Service \u2022 Microsite \u2022 Welcome",go:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_SETUP_WIZARD"}}))}catch(Be){}}},{id:"EDU",label:"Education & Certifications",desc:"Partners \u2022 CEUs \u2022 Badges",go:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"EDUCATION_INTEGRATIONS_HUB"}}))}catch(Be){}}},{id:"WL",label:"White-Label App & Site",badge:"Enterprise",desc:"Branded app \u2022 Custom domain \u2022 Store publish",go:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"WHITE_LABEL_HUB"}}))}catch(Be){}}},{id:"CRM-PIPELINE",label:"CRM Pipeline",desc:"Leads \u2192 Applications \u2192 Convert",go:()=>Li(W.CRM_PIPELINE)},{id:"CRM-APPLICATIONS",label:"Applications",desc:"Intake + filters (saved view)",go:()=>Li(W.CRM_APPLICATIONS)},{id:"MA-ENTRY",label:"Marketing & Automations",desc:"Broadcasts \u2022 Drips \u2022 Referrals \u2022 AI",go:()=>Li(W.MARKETING_HOME)},{id:"INSIGHTS-DASH",label:"Pro Insights",desc:"KPIs + advisory",go:()=>Li(W.INSIGHTS_DASH)},{id:"INSIGHTS-ACTIONS",label:"Action Queue",desc:"Prioritised tasks",go:()=>Li(W.INSIGHTS_ACTIONS)},{id:"BH-SEARCH",label:"Global Search",desc:"Command palette",go:()=>ne(!0)}].map(Be=>React.createElement("button",{key:Be.id,type:"button",onClick:Ia=>{try{Ia&&Ia.preventDefault&&Ia.preventDefault(),Ia&&Ia.stopPropagation&&Ia.stopPropagation()}catch(q){}try{Be.go()}catch(q){}},className:"text-left rounded-2xl p-4 border border-white/10 bg-white/5 hover:bg-white/10 transition"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},Be.id),React.createElement("div",{className:"mt-1 flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[16px] font-extrabold text-white"},Be.label),Be.badge&&React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2 py-1 rounded-full border border-white/15 bg-white/5 text-white/70"},Be.badge)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Be.desc)))),J!==W.OVERVIEW&&React.createElement("div",{className:"mt-4"},J===W.CRM_PIPELINE&&React.createElement(po,{title:"CRM Pipeline",subtitle:"Single owner: Business Hub (Flowchart #9). Leads / Applications / Convert with audit trail.",onBack:()=>Li(W.OVERVIEW),right:React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>mo(Be=>Be==="KANBAN"?"LIST":"KANBAN"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},ws==="KANBAN"?"List View":"Kanban View"),React.createElement("button",{type:"button",onClick:dn,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ Add Lead"))},ws==="KANBAN"?React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},Wr.map(Be=>React.createElement("div",{key:Be,className:"rounded-2xl border border-white/10 bg-black/20 p-3 min-h-[180px]"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},Be),React.createElement("div",{className:"text-[11px] text-white/50"},(On[Be]||[]).length)),React.createElement("div",{className:"mt-2 space-y-2"},(On[Be]||[]).map(Ia=>React.createElement("button",{key:Ia.id,type:"button",onClick:()=>zn(Ia,J),className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[13px] text-white truncate"},Ia.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Ia.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Ia.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 truncate"},Ia.source," \u2022 ",Ia.createdAt),Ia.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Ia.note):null)),!(On[Be]||[]).length&&React.createElement("div",{className:"text-[11px] text-white/35 px-1 py-2"},"No records"))))):React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-left text-white/60"},React.createElement("th",{className:"py-2 pr-3"},"Name"),React.createElement("th",{className:"py-2 pr-3"},"Stage"),React.createElement("th",{className:"py-2 pr-3"},"Source"),React.createElement("th",{className:"py-2 pr-3"},"Consent"),React.createElement("th",{className:"py-2 pr-3"},"Created"),React.createElement("th",{className:"py-2 pr-3"}))),React.createElement("tbody",null,(Array.isArray(Vo)?Vo:[]).map(Be=>React.createElement("tr",{key:Be.id,className:"border-t border-white/10"},React.createElement("td",{className:"py-2 pr-3 text-white"},Be.name),React.createElement("td",{className:"py-2 pr-3 text-white/70"},Be.stage),React.createElement("td",{className:"py-2 pr-3 text-white/60"},Be.source),React.createElement("td",{className:"py-2 pr-3"},React.createElement("span",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Be.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Be.consent?"YES":"NO")),React.createElement("td",{className:"py-2 pr-3 text-white/50"},Be.createdAt),React.createElement("td",{className:"py-2 pr-3"},React.createElement("button",{type:"button",onClick:()=>zn(Be,J),className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Open")))))))),J===W.CRM_APPLICATIONS&&React.createElement(po,{title:"Applications",subtitle:"Saved view of the same CRM dataset (no duplication). Stage: Application.",onBack:()=>Li(W.OVERVIEW),right:React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Pipeline")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(Array.isArray(On.Application)?On.Application:[]).map(Be=>React.createElement("button",{key:Be.id,type:"button",onClick:()=>zn(Be,J),className:"text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[14px] text-white truncate"},Be.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Be.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Be.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},Be.source," \u2022 ",Be.createdAt),Be.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Be.note):null)),!(On.Application||[]).length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/50"},"No applications in this dataset yet."))),J===W.MARKETING_HOME&&React.createElement(po,{title:"Marketing & Automations",subtitle:"Single automation engine (Flowchart #9). Broadcasts, drips, referrals, AI autopilots, safety.",onBack:()=>Li(W.OVERVIEW)},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},[{t:"Broadcasts",p:W.MA_BROADCAST,d:"One-to-many announcements"},{t:"Drip Workflows",p:W.MA_DRIP,d:"Rules + multi-step sequences"},{t:"Referrals",p:W.MA_REFERRALS,d:"Attribution + ROI tracking"},{t:"AI Autopilot",p:W.MA_AUTOPILOT,d:"Role-aware AI automations"},{t:"Safety",p:W.MA_SAFETY,d:"Consent, caps, quiet hours"}].map((Be,Ia)=>React.createElement("button",{key:Ia,type:"button",onClick:()=>Li(Be.p),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},Be.t),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Be.d))))),J===W.INSIGHTS_DASH&&React.createElement("div",{className:"hidden"})),J!==W.OVERVIEW&&React.createElement("div",{className:"hidden"}),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J===W.OVERVIEW&&React.createElement(React.Fragment,null),J===W.CRM_PIPELINE&&React.createElement(po,{title:"CRM Pipeline",subtitle:"Single owner: Business Hub (Flowchart #9). Leads / Applications / Convert with audit trail.",onBack:()=>Li(W.OVERVIEW),right:React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>mo(Be=>Be==="KANBAN"?"LIST":"KANBAN"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},ws==="KANBAN"?"List View":"Kanban View"),React.createElement("button",{type:"button",onClick:dn,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ Add Lead"))},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"This page replaces any \u201Cprototype inline tiles\u201D. Real page shell + back + full content."))),J===W.CRM_APPLICATIONS&&React.createElement(po,{title:"Applications",subtitle:"Saved view of the same CRM dataset (no duplication). Stage: Application.",onBack:()=>Li(W.OVERVIEW),right:React.createElement("button",{type:"button",onClick:()=>Li(W.CRM_PIPELINE),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Pipeline")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},(Array.isArray(On.Application)?On.Application:[]).map(Be=>React.createElement("button",{key:Be.id,type:"button",onClick:()=>zn(Be,J),className:"text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[14px] text-white truncate"},Be.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Be.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Be.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},Be.source," \u2022 ",Be.createdAt),Be.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Be.note):null)),!(On.Application||[]).length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/50"},"No applications in this dataset yet."))),J===W.MARKETING_HOME&&React.createElement(po,{title:"Marketing & Automations",subtitle:"Single automation engine (Flowchart #9). Broadcasts, drips, referrals, AI autopilots, safety.",onBack:()=>Li(W.OVERVIEW)},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},[{t:"Broadcasts",p:W.MA_BROADCAST,d:"One-to-many announcements"},{t:"Drip Workflows",p:W.MA_DRIP,d:"Rules + multi-step sequences"},{t:"Referrals",p:W.MA_REFERRALS,d:"Attribution + ROI tracking"},{t:"AI Autopilot",p:W.MA_AUTOPILOT,d:"Role-aware AI automations"},{t:"Safety",p:W.MA_SAFETY,d:"Consent, caps, quiet hours"}].map((Be,Ia)=>React.createElement("button",{key:Ia,type:"button",onClick:()=>Li(Be.p),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 p-4 text-left"},React.createElement("div",{className:"font-extrabold text-white"},Be.t),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Be.d)))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"These pages are real-world shells now; features are being implemented in Phase 4.3.x (in progress).")),J===W.INSIGHTS_DASH&&React.createElement("div",{className:"hidden"}),fe.id==="CRM-PIPELINE"&&React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-titanium-800 md:col-span-2"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"CRM-PIPELINE \u2014 Lead & Client Pipeline"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Single owner: Business Hub. Client Management deep-links only. Convert is audited.")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>mo(Be=>Be==="KANBAN"?"LIST":"KANBAN"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},ws==="KANBAN"?"List View":"Kanban View"),React.createElement("button",{type:"button",onClick:dn,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"+ Add Lead"))),ws==="KANBAN"?React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3"},Wr.map(Be=>React.createElement("div",{key:Be,className:"rounded-2xl border border-white/10 bg-black/20 p-3 min-h-[180px]"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},Be),React.createElement("div",{className:"text-[11px] text-white/50"},(On[Be]||[]).length)),React.createElement("div",{className:"mt-2 space-y-2"},(On[Be]||[]).map(Ia=>React.createElement("button",{key:Ia.id,type:"button",onClick:()=>zn(Ia,J),className:"w-full text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[13px] text-white truncate"},Ia.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Ia.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Ia.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 truncate"},Ia.source," \u2022 ",Ia.createdAt),Ia.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Ia.note):null)),!(On[Be]||[]).length&&React.createElement("div",{className:"text-[11px] text-white/35 px-1 py-2"},"No records"))))):React.createElement("div",{className:"mt-4 overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-left text-white/60"},React.createElement("th",{className:"py-2 pr-3"},"Name"),React.createElement("th",{className:"py-2 pr-3"},"Stage"),React.createElement("th",{className:"py-2 pr-3"},"Source"),React.createElement("th",{className:"py-2 pr-3"},"Consent"),React.createElement("th",{className:"py-2 pr-3"},"Created"),React.createElement("th",{className:"py-2 pr-3"}))),React.createElement("tbody",null,(Array.isArray(Vo)?Vo:[]).map(Be=>React.createElement("tr",{key:Be.id,className:"border-t border-white/10"},React.createElement("td",{className:"py-2 pr-3 text-white"},Be.name),React.createElement("td",{className:"py-2 pr-3 text-white/70"},Be.stage),React.createElement("td",{className:"py-2 pr-3 text-white/60"},Be.source),React.createElement("td",{className:"py-2 pr-3"},React.createElement("span",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Be.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Be.consent?"YES":"NO")),React.createElement("td",{className:"py-2 pr-3 text-white/50"},Be.createdAt),React.createElement("td",{className:"py-2 pr-3"},React.createElement("button",{type:"button",onClick:()=>zn(Be,J),className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Open")))))))),fe.id==="CRM-APPLICATIONS"&&React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-titanium-800 md:col-span-2"},React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"CRM-APPLICATIONS \u2014 Application Intake / Filter"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"This is a saved view of the single CRM dataset (no duplication). Filtered to stage: ",React.createElement("span",{className:"text-white font-semibold"},"Application"),"."),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{s&&s({section:"CRM-PIPELINE",sub:null,filter:null})}catch(Be){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Back to Pipeline"),React.createElement("div",{className:"text-[11px] text-white/50"},"Tip: open a record to approve/convert.")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},(Array.isArray(On.Application)?On.Application:[]).map(Be=>React.createElement("button",{key:Be.id,type:"button",onClick:()=>zn(Be,J),className:"text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"font-bold text-[14px] text-white truncate"},Be.name),React.createElement("div",{className:"text-[10px] font-mono px-2 py-[2px] rounded-full border "+(Be.consent?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"border-orange-400/30 bg-orange-500/10 text-orange-200")},Be.consent?"CONSENT":"NO CONSENT")),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},Be.source," \u2022 ",Be.createdAt),Be.note?React.createElement("div",{className:"mt-1 text-[11px] text-white/45 line-clamp-2"},Be.note):null)),!(On.Application||[]).length&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4 text-[12px] text-white/50"},"No applications in this dataset yet."))),fe.id==="BH-SEARCH"&&React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-titanium-800"},React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"BH-SEARCH \u2014 Global Search"),React.createElement("p",{className:"mt-2 text-[12px] text-zinc-300"},"Command-palette style global search. Hotkey: ",React.createElement("span",{className:"text-white font-semibold"},"Ctrl/\u2318 + K"),"."),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{ne(!0);try{B==null||B.logEvent("bh_search_opened",{via:"button"})}catch(Be){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"Open Search"),React.createElement(eo,{compact:!0}),React.createElement(Hl,{compact:!0})),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-400"},"This is a Phase 1 foundation. Phase 4 completes routing + permissions + full dataset indexing.")),fe.id==="INSIGHTS-DASH"&&React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-titanium-800"},React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"INSIGHTS-DASH \u2014 Pro Insights"),React.createElement("p",{className:"mt-2 text-[12px] text-zinc-300"},"Summary + prioritised actions using the shared event log + unified date/filter foundations."),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"flex items-center gap-3 flex-wrap"},React.createElement(eo,{compact:!0}),React.createElement(Hl,{compact:!0})),React.createElement(Pd,{title:"Pro_Insights",getRows:()=>{var Ia,q;return[{metric:"Events (tracked)",value:((B==null?void 0:B.eventLog)||[]).length},{metric:"Segment",value:((Ia=B==null?void 0:B.filters)==null?void 0:Ia.segment)||"All"},{metric:"Status",value:((q=B==null?void 0:B.filters)==null?void 0:q.status)||"All"}]}})),React.createElement("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"Action"),React.createElement("div",{className:"mt-1 text-sm font-semibold text-white"},"Follow up leads"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Routes to CRM Pipeline"),React.createElement("button",{type:"button",onClick:()=>{try{s&&s({section:"CRM-PIPELINE",sub:null,filter:null})}catch(Be){}},className:"mt-3 w-full px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Records")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Action"),React.createElement("div",{className:"mt-1 text-sm font-semibold text-white"},"Send re-engagement"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Routes to Marketing & Automation"),React.createElement("button",{type:"button",onClick:()=>{try{s&&s({section:"MA-ENTRY",sub:null,filter:null})}catch(Be){}},className:"mt-3 w-full px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/30 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"Open Automations")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"Action"),React.createElement("div",{className:"mt-1 text-sm font-semibold text-white"},"Chase invoice"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Deep-link to Finance Hub"),React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_SET_VIEW&&window.__FOF_SET_VIEW("FINANCE_HUB")}catch(Be){}},className:"mt-3 w-full px-3 py-2 rounded-xl bg-amber-500/10 border border-amber-400/30 hover:bg-amber-500/20 text-amber-100 text-[11px] font-mono uppercase tracking-widest"},"Open Finance Hub"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/10 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Recent tracked events (Phase 1)"),React.createElement("div",{className:"mt-2 max-h-40 overflow-y-auto trainer-scroll space-y-2"},((B==null?void 0:B.eventLog)||[]).slice(0,6).map(Be=>React.createElement("div",{key:Be.id,className:"text-[12px] text-zinc-300 flex items-center justify-between gap-2"},React.createElement("span",{className:"text-white/80"},Be.type),React.createElement("span",{className:"text-zinc-500"},(Be.ts||"").slice(11,19)))),!((B==null?void 0:B.eventLog)||[]).length&&React.createElement("div",{className:"text-[12px] text-zinc-500"},"No events tracked yet."))))),React.createElement(td,{open:X,onClose:()=>ne(!1),items:xl})))},cl=({clients:i=[],selectedClient:s=null,dr:x,dateApi:S,presets:u=[],filters:$={},filterApi:tt})=>{var ue=Ge=>{try{return new Date(Ge).toLocaleDateString()}catch($e){return""}},[Ie,fe]=React.useState("INDIVIDUAL"),[B,X]=React.useState(!1),[ne,W]=React.useState(()=>s&&s.id?s.id:i&&i[0]&&i[0].id?i[0].id:null);React.useEffect(()=>{try{!ne&&s&&s.id&&W(s.id)}catch(Ge){}},[s&&s.id]);var J=React.useMemo(()=>[{k:"PROGRESS",label:"Progress",hint:"Body metrics + trends + PRs"},{k:"WORKOUTS",label:"Workouts",hint:"Sessions completed + load"},{k:"NUTRITION",label:"Nutrition",hint:"Macros + adherence (if enabled)"},{k:"HABITS",label:"Habits",hint:"Daily habits + streaks"},{k:"RECOVERY",label:"Recovery",hint:"Sleep + readiness + soreness"},{k:"CHECKINS",label:"Check-ins",hint:"Forms + notes + flags"}],[]),[z,H]=React.useState("PROGRESS"),Ht=React.useMemo(()=>[{k:"ADHERENCE",label:"Adherence Overview",hint:"Plan compliance by segment"},{k:"ENGAGEMENT",label:"Engagement",hint:"Active vs inactive clients"},{k:"PROGRESS_TRENDS",label:"Progress Trends",hint:"Aggregate trends (demo)"},{k:"CAPACITY",label:"Capacity Trends",hint:"Capacity bands over time (demo)"}],[]),[Nt,U]=React.useState("ADHERENCE"),Q=React.useMemo(()=>(Array.isArray(i)?i:[]).filter($e=>B?!0:!($e&&($e.offPlatform===!0||($e.tags||[]).includes("OFF_PLATFORM")))),[i,B]),w=React.useMemo(()=>(Q||[]).find(Ge=>Ge.id===ne)||(i||[]).find(Ge=>Ge.id===ne)||null,[Q,i,ne]),L=(Ge,$e={})=>{try{Bt&&Bt(Ge,{module:"REPORTS",...$e})}catch(Xa){}try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track(Ge,{module:"REPORTS",...$e})}catch(Xa){}};React.useEffect(()=>{L("client_reports_opened",{step:"R3",scope:Ie,includeOffPlatform:B})},[]);var ut=Ge=>{try{fe(Ge)}catch($e){}L("client_reports_scope_selected",{step:"R3",scope:Ge,includeOffPlatform:B})},ot=()=>{var Ge=!B;try{X(Ge)}catch($e){}L("client_reports_offplatform_toggled",{step:"R3",includeOffPlatform:Ge});try{Ge||Q.find(Xa=>Xa.id===ne)||W(Q[0]&&Q[0].id?Q[0].id:null)}catch($e){}},[ht,ba]=React.useState(!1),[et,At]=React.useState(!1),[ma,Je]=React.useState(()=>{try{return new Date((x==null?void 0:x.start)||Date.now()).toISOString().slice(0,10)}catch(Ge){return""}}),[Oa,He]=React.useState(()=>{try{return new Date((x==null?void 0:x.end)||Date.now()).toISOString().slice(0,10)}catch(Ge){return""}});React.useEffect(()=>{try{!ht&&(x!=null&&x.start)&&(x!=null&&x.end)&&(Je(new Date(x.start).toISOString().slice(0,10)),He(new Date(x.end).toISOString().slice(0,10)))}catch(Ge){}},[x&&x.start,x&&x.end,ht]);var Ca=()=>{try{if(!ma||!Oa)return;var Ge=new Date(ma+"T00:00:00"),$e=new Date(Oa+"T23:59:59");S&&S.setCustom&&S.setCustom(Ge.getTime(),$e.getTime()),ba(!1),At(!1),L("report_date_range_set",{step:Ie==="INDIVIDUAL"?"R6":"R9",preset:"CUSTOM",start:Ge.getTime(),end:$e.getTime()})}catch(Ge){}},ha=(Ge,$e,Xa,mi,xi)=>{try{window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:Ge,title:$e,filename:Xa,rows:mi,meta:xi}})),L(Ge==="csv"?"report_export_csv":"report_export_pdf",{step:"R_Export",title:$e,filename:Xa,scope:Ie,reportType:Ie==="INDIVIDUAL"?z:Nt})}catch(rs){}},K=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("REPORTS_CLIENT_INDIVIDUAL",{dateRange:x,filters:{...$||{},clientId:ne,scope:"INDIVIDUAL",includeOffPlatform:B},context:{module:"REPORTS",flow:"CLIENT",step:"R7",reportType:z,clientId:ne,includeOffPlatform:B}}):{status:"idle",rows:null,error:null,generate:async()=>[],clear:()=>{}},aa=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("REPORTS_CLIENT_AGGREGATE",{dateRange:x,filters:{...$||{},scope:"AGGREGATE",includeOffPlatform:B},context:{module:"REPORTS",flow:"CLIENT",step:"R10",reportType:Nt,includeOffPlatform:B}}):{status:"idle",rows:null,error:null,generate:async()=>[],clear:()=>{}},Mt=()=>{var Ge=w||{name:"Client",segment:"General"},$e=[{section:"Summary",metric:"Client",value:Ge.name},{section:"Summary",metric:"Segment",value:Ge.segment||"\u2014"},{section:"Summary",metric:"Range",value:`${ue(x==null?void 0:x.start)} \u2192 ${ue(x==null?void 0:x.end)}`},{section:"Summary",metric:"Report Type",value:z}],Xa=z==="PROGRESS"?[{section:"Progress",metric:"Weight \u0394",value:"+0.6 kg"},{section:"Progress",metric:"Waist \u0394",value:"-1.0 cm"},{section:"Progress",metric:"Trend",value:"Upward"}]:z==="WORKOUTS"?[{section:"Workouts",metric:"Sessions",value:12},{section:"Workouts",metric:"Adherence",value:"78%"},{section:"Workouts",metric:"Top Lift",value:"Bench PR +2.5kg"}]:z==="NUTRITION"?[{section:"Nutrition",metric:"Avg kcal",value:2100},{section:"Nutrition",metric:"Protein",value:"132g"},{section:"Nutrition",metric:"Adherence",value:"71%"}]:z==="HABITS"?[{section:"Habits",metric:"Streak (Water)",value:"9 days"},{section:"Habits",metric:"Steps avg",value:"8,400"},{section:"Habits",metric:"Sleep routine",value:"63%"}]:z==="RECOVERY"?[{section:"Recovery",metric:"Avg sleep",value:"7h 08m"},{section:"Recovery",metric:"Readiness avg",value:"74"},{section:"Recovery",metric:"Low days",value:3}]:[{section:"Check-ins",metric:"Completed",value:2},{section:"Check-ins",metric:"Flags",value:"None"},{section:"Check-ins",metric:"Coach notes",value:"On track"}];return $e.concat(Xa)},la=()=>{var $e=(Q||[]).slice(0,12).map((Xa,mi)=>({client:Xa.name,segment:Xa.segment||"\u2014",adherence:70+mi*7%20+"%",engagement:mi%3===0?"High":mi%3===1?"Mid":"Low",note:Nt}));return $e.length?$e:[{client:"(no clients)",segment:"\u2014",adherence:"\u2014",engagement:"\u2014",note:Nt}]},xa=async()=>{try{if(Ie==="INDIVIDUAL"){if(!ne)return alert("Pick a client first.");L("report_generate_clicked",{step:"R7",scope:Ie,reportType:z,clientId:ne,includeOffPlatform:B});var Ge=await K.generate({context:{title:`Client_${z}`,step:"R7",clientId:ne,reportType:z,includeOffPlatform:B}});(!Ge||!Array.isArray(Ge)||!Ge.length)&&(K.rows=Mt())}else{L("report_generate_clicked",{step:"R10",scope:Ie,reportType:Nt,includeOffPlatform:B});var Ge=await aa.generate({context:{title:`Aggregate_${Nt}`,step:"R10",reportType:Nt,includeOffPlatform:B}});(!Ge||!Array.isArray(Ge)||!Ge.length)&&(aa.rows=la())}}catch(Ge){try{Ie==="INDIVIDUAL"?K.rows=Mt():aa.rows=la()}catch($e){}}},ei=Ie==="INDIVIDUAL"?K:aa,di=ei.rows||null,Ua=()=>{var[Ge,$e]=React.useState(!1),[Xa,mi]=React.useState(""),xi=React.useMemo(()=>{var ct=Q||[],zt=String(Xa||"").trim().toLowerCase();return zt?ct.filter(Wi=>String(Wi.name||"").toLowerCase().includes(zt)||String(Wi.email||"").toLowerCase().includes(zt)).slice(0,30):ct.slice(0,30)},[Xa,Q]),rs=w?w.name:"Select client\u2026";return React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>{$e(!0),L("client_reports_client_picker_opened",{step:"R4"})},className:"w-full flex items-center justify-between gap-2 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},React.createElement("span",{className:"truncate"},rs),React.createElement(_,{name:"ChevronDown",size:16,className:"text-white/60"})),Ge?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>$e(!1)}),React.createElement("div",{className:"absolute left-1/2 top-1/2 w-[520px] max-w-[92vw] -translate-x-1/2 -translate-y-1/2 rounded-3xl border border-white/12 bg-[#0b1020] shadow-card-strong p-4 pointer-events-auto"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Pick client"),React.createElement("button",{type:"button",onClick:()=>$e(!1),className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Close")),React.createElement("div",{className:"mt-3 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40"}),React.createElement("input",{value:Xa,onChange:ct=>mi(ct.target.value),placeholder:"Search name or email\u2026",className:"w-full pl-9 pr-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-[12px] text-white outline-none",autoFocus:!0})),React.createElement("div",{className:"mt-3 max-h-[50vh] overflow-auto trainer-scroll space-y-2 pr-1"},xi.map(ct=>React.createElement("button",{key:ct.id,type:"button",onClick:()=>{W(ct.id),$e(!1),L("client_reports_client_selected",{step:"R4",clientId:ct.id,clientName:ct.name})},className:"w-full text-left rounded-2xl border p-3 transition "+(ct.id===ne?"border-sky-400/40 bg-sky-500/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},ct.name),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55 truncate"},ct.email||"\u2014")),React.createElement("div",{className:"text-[10px] font-mono text-white/55 shrink-0"},ct.segment||"\u2014",ct.offPlatform||(ct.tags||[]).includes("OFF_PLATFORM")?React.createElement("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-amber-500/10 border border-amber-400/30 text-amber-200"},"Self\u2011reported"):null)))),xi.length?null:React.createElement("div",{className:"text-[12px] text-white/55 p-3"},"No clients match.")))):null)},sa=({items:Ge,value:$e,onChange:Xa,step:mi})=>React.createElement("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2"},Ge.map(xi=>React.createElement("button",{key:xi.k,type:"button",onClick:()=>{Xa(xi.k),L("client_reports_type_selected",{step:mi,reportType:xi.k,scope:Ie})},className:"text-left rounded-2xl border p-3 transition "+($e===xi.k?"border-emerald-400/40 bg-emerald-500/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},xi.label),React.createElement("span",{className:"text-[10px] font-mono text-white/55"},xi.k)),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},xi.hint)))),vt=({stepTag:Ge})=>React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>{ba(!0),L("report_date_range_opened",{step:Ge})},className:"w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 flex items-center justify-between gap-2"},React.createElement("span",{className:"truncate"},ue(x==null?void 0:x.start)," \u2192 ",ue(x==null?void 0:x.end)," ",React.createElement("span",{className:"ml-2 text-white/55"},"(",((x==null?void 0:x.preset)||"CUSTOM").replaceAll("_"," "),")")),React.createElement(_,{name:"Calendar",size:16,className:"text-white/55"})),ht?React.createElement("div",{className:"absolute z-[120] right-0 top-[110%] w-[360px] max-w-[92vw] rounded-3xl border border-white/12 bg-[#0b1020] shadow-card-strong p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Date range"),React.createElement("button",{type:"button",onClick:()=>{ba(!1),At(!1)},className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"Close")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(u||[]).filter($e=>$e!=="CUSTOM").map($e=>React.createElement("button",{key:$e,type:"button",onClick:()=>{S&&S.setPreset&&S.setPreset($e),ba(!1),At(!1),L("report_date_range_set",{step:Ge,preset:$e})},className:"px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+((x==null?void 0:x.preset)===$e?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},$e.replaceAll("_"," "))),React.createElement("button",{type:"button",onClick:()=>{S&&S.setPreset&&S.setPreset("CUSTOM"),At(!0)},className:"px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+(et?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},"Custom")),et?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Start"),React.createElement("input",{type:"date",value:ma,onChange:$e=>Je($e.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"End"),React.createElement("input",{type:"date",value:Oa,onChange:$e=>He($e.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"}))),React.createElement("button",{type:"button",onClick:Ca,className:"mt-3 w-full px-3 py-2 rounded-2xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Apply Custom Range")):null):null);return React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"R3"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Client scope"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Default excludes off\u2011platform clients. Toggle is clearly labeled \u201CSelf\u2011reported\u201D.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ut("INDIVIDUAL"),className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(Ie==="INDIVIDUAL"?"border-sky-400/40 bg-sky-500/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},"Individual"),React.createElement("button",{type:"button",onClick:()=>ut("AGGREGATE"),className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(Ie==="AGGREGATE"?"border-sky-400/40 bg-sky-500/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},"Aggregate"))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white/85 font-semibold"},"Include off\u2011platform clients"),React.createElement("div",{className:"text-[11px] text-white/55"},"When ON, includes \u201CSelf\u2011reported\u201D clients not tracked via the app.")),React.createElement("button",{type:"button",onClick:ot,className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(B?"border-amber-400/40 bg-amber-500/10 text-amber-100":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},B?"ON \u2022 Self\u2011reported":"OFF"))),Ie==="INDIVIDUAL"?React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-5 rounded-2xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"R4"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Pick client"),React.createElement("div",{className:"mt-2"},React.createElement(Ua,null)),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Showing ",React.createElement("span",{className:"text-white/80 font-semibold"},Q.length)," clients",B?React.createElement("span",{className:"ml-2 text-amber-200"},"\u2022 includes self\u2011reported"):null,".")),React.createElement("div",{className:"lg:col-span-7 rounded-2xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"R5"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Select report type"),React.createElement(sa,{items:J,value:z,onChange:H,step:"R5"})),React.createElement("div",{className:"lg:col-span-12 rounded-2xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-fuchsia-300"},"R6"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Set date range")),React.createElement("div",{className:"w-full md:w-[360px]"},React.createElement(vt,{stepTag:"R6"}))),React.createElement("div",{className:"mt-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Generate will use shared Generate Engine + shared Export gating. Exports live in Reports only."),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:xa,className:"px-4 py-2 rounded-2xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(ei.status==="loading"?"text-lime-200/60":"text-lime-100 hover:bg-lime-500/20")},ei.status==="loading"?"Generating\u2026":di?"Regenerate (R7)":"Generate (R7)"),React.createElement("button",{type:"button",disabled:!di,onClick:()=>ha("csv",`Client_${z}`,`Client_${z}.csv`,di,{scope:Ie,indType:z,clientId:ne,includeOffPlatform:B,dateRange:x}),className:"px-3 py-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(di?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!di,onClick:()=>ha("pdf",`Client_${z}`,`Client_${z}.pdf`,di,{scope:Ie,indType:z,clientId:ne,includeOffPlatform:B,dateRange:x}),className:"px-3 py-2 rounded-2xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(di?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},di?"Generated report (R7)":"Generate first (R7)"),di?React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"min-w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-white/70"},Object.keys(di[0]||{section:"",metric:"",value:""}).slice(0,4).map(Ge=>React.createElement("th",{key:Ge,className:"text-left py-2 pr-4 font-semibold"},Ge)))),React.createElement("tbody",{className:"text-white/80"},(di||[]).slice(0,14).map((Ge,$e)=>React.createElement("tr",{key:$e,className:"border-t border-white/10"},Object.keys(di[0]||{}).slice(0,4).map(Xa=>React.createElement("td",{key:Xa,className:"py-2 pr-4"},String(Ge[Xa]))))))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Preview shows first 14 rows. Exports include full dataset + metadata (date range, filters, scope, report type).")):React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"Pick a client (R4), choose report type (R5), set date range (R6), then Generate (R7).")))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-7"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"R8"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Select aggregate report type"),React.createElement(sa,{items:Ht,value:Nt,onChange:U,step:"R8"})),React.createElement("div",{className:"lg:col-span-5"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-fuchsia-300"},"R9"),React.createElement("div",{className:"mt-1 text-[13px] font-semibold text-white"},"Set date range"),React.createElement("div",{className:"mt-2"},React.createElement(vt,{stepTag:"R9"})),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Uses shared Date Range Engine (Phase 1) + shared filters (incl. Source)."))),React.createElement("div",{className:"mt-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Aggregate reports summarize across all eligible clients in the selected scope."),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:xa,className:"px-4 py-2 rounded-2xl border border-lime-400/30 bg-lime-500/10 text-[11px] font-mono uppercase tracking-widest "+(ei.status==="loading"?"text-lime-200/60":"text-lime-100 hover:bg-lime-500/20")},ei.status==="loading"?"Generating\u2026":di?"Regenerate (R10)":"Generate (R10)"),React.createElement("button",{type:"button",disabled:!di,onClick:()=>ha("csv",`Aggregate_${Nt}`,`Aggregate_${Nt}.csv`,di,{scope:Ie,aggType:Nt,includeOffPlatform:B,dateRange:x}),className:"px-3 py-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 text-[11px] font-mono uppercase tracking-widest "+(di?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!di,onClick:()=>ha("pdf",`Aggregate_${Nt}`,`Aggregate_${Nt}.pdf`,di,{scope:Ie,aggType:Nt,includeOffPlatform:B,dateRange:x}),className:"px-3 py-2 rounded-2xl border border-fuchsia-400/30 bg-fuchsia-500/10 text-[11px] font-mono uppercase tracking-widest "+(di?"text-fuchsia-100 hover:bg-fuchsia-500/20":"text-fuchsia-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},di?"Generated report (R10)":"Generate first (R10)"),di?React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"min-w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-white/70"},Object.keys(di[0]||{client:"",segment:"",adherence:"",engagement:""}).slice(0,5).map(Ge=>React.createElement("th",{key:Ge,className:"text-left py-2 pr-4 font-semibold"},Ge)))),React.createElement("tbody",{className:"text-white/80"},(di||[]).slice(0,16).map((Ge,$e)=>React.createElement("tr",{key:$e,className:"border-t border-white/10"},Object.keys(di[0]||{}).slice(0,5).map(Xa=>React.createElement("td",{key:Xa,className:"py-2 pr-4"},String(Ge[Xa]))))))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Preview shows first 16 rows. Export for full dataset.")):React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"Choose report type (R8), set date range (R9), then Generate (R10)."))))},Wl=({clientRecords:i=[],dr:s,dateApi:x,presets:S=[],filters:u={},filterApi:$})=>{var tt=Ua=>{try{return new Date(Ua).toLocaleDateString()}catch(sa){return""}},ue=React.useMemo(()=>[{key:"REVENUE",title:"Revenue",desc:"Total revenue split by Platform vs Offline.",next:"R12"},{key:"PAYMENTS",title:"Payments Status",desc:"Due / Overdue pipeline (for follow-up).",next:"R13"},{key:"SUB_METRICS",title:"Subscription Metrics",desc:"MRR, churn cohorts, LTV forecast (SaaS-style).",next:"R13e"},{key:"INVOICING",title:"Automated Invoicing",desc:"Invoices by client + range (read-only until Phase 3 ledger).",next:"R13b"},{key:"TAX",title:"Tax Summaries",desc:"Tax split: platform-processed vs offline-logged.",next:"R13c"},{key:"PNL",title:"Profit & Loss",desc:"Basic income/expense statement (prototype stub).",next:"R13d"},{key:"OFFLINE_LEDGER",title:"Offline Payments",desc:"Offline payment ledger (cash/Venmo/etc).",next:"R13f"}],[]),[Ie,fe]=React.useState("REVENUE"),[B,X]=React.useState("ALL"),[ne,W]=React.useState(""),[J,z]=React.useState(""),[H,Ht]=React.useState("DUE"),[Nt,U]=React.useState("MRR"),[Q,w]=React.useState("MONTH"),[L,ut]=React.useState("DEFAULT"),[ot,ht]=React.useState(""),[ba,et]=React.useState("ALL"),[At,ma]=React.useState(!1),[Je,Oa]=React.useState(""),He=React.useMemo(()=>(Array.isArray(i)?i:[]).map(sa=>({id:sa.id||sa.email||sa.name,name:sa.name||sa.email||"Client"})).filter(sa=>!!sa.id),[i]),[Ca,ha]=React.useState("idle"),[K,aa]=React.useState([]),Mt=React.useCallback(()=>{var vt,Ge;var Ua=`${tt(s.start)} \u2192 ${tt(s.end)} (${s.preset||"CUSTOM"})`,sa=$e=>{var Xa=He.find(mi=>mi.id===$e);return Xa&&Xa.name?Xa.name:$e||"All Clients"};if(Ie==="REVENUE"){var $e=B;return[{bucket:"Platform",amount:8400,count:46},{bucket:"Offline",amount:2100,count:14}].filter(xi=>$e==="ALL"?!0:$e==="PLATFORM"?xi.bucket==="Platform":xi.bucket==="Offline").map(xi=>({report:"Revenue",range:Ua,client:sa(ne||""),product:J||"All Products",source:xi.bucket,transactions:xi.count,amount:xi.amount}))}if(Ie==="PAYMENTS")return[{client:"Amina",status:"DUE",amount:120,days:3},{client:"Hassan",status:"DUE",amount:90,days:1},{client:"Sara",status:"OVERDUE",amount:150,days:12},{client:((vt=(window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||[]).find(Xa=>String(Xa.id)==="c2"))==null?void 0:vt.name)||"Client",status:"OVERDUE",amount:220,days:18}].filter(Xa=>Xa.status===H).map(Xa=>({report:"Payments",range:Ua,status:Xa.status,client:Xa.client,amount:Xa.amount,ageDays:Xa.days,action:Xa.status==="OVERDUE"?"Escalate / Dunning":"Nudge / Reminder"}));if(Ie==="SUB_METRICS"){var $e=Nt==="MRR"?"MRR":Nt==="CHURN"?"Churn Rate":Nt==="LTV"?"LTV (est.)":"Net Adds",Xa=rs=>{var ct=L&&L!=="DEFAULT"?L:"";return typeof rs!="number"?String(rs!=null?rs:""):ct?`${ct} ${rs.toLocaleString()}`:rs.toLocaleString()},mi={MRR:12500,CHURN:"3.2%",LTV:1420,NET_ADDS:18},xi=Nt==="LTV"?Xa(mi.LTV):Nt==="MRR"?Xa(mi.MRR):mi[Nt];return[{report:"Subscription Metrics",range:Ua,groupBy:Q,metric:$e,value:xi}]}if(Ie==="INVOICING"){var $e=sa(ot||"");return[{report:"Automated Invoicing",range:Ua,client:$e,invoiceId:"INV-10021",status:"SENT",amount:220},{report:"Automated Invoicing",range:Ua,client:$e,invoiceId:"INV-10018",status:"PAID",amount:220},{report:"Automated Invoicing",range:Ua,client:$e,invoiceId:"INV-10009",status:"OVERDUE",amount:220}]}if(Ie==="TAX"){var $e=ba;return[{source:"Platform",taxable:8400,tax:420},{source:"Offline",taxable:2100,tax:105}].filter(mi=>$e==="ALL"?!0:$e==="PLATFORM"?mi.source==="Platform":mi.source==="Offline").map(mi=>({report:"Tax Summaries",range:Ua,source:mi.source,taxable:mi.taxable,tax:mi.tax}))}if(Ie==="PNL"){var Xa=At?4200:3600;return[{report:"Profit & Loss",range:Ua,line:"Income",amount:10500},{report:"Profit & Loss",range:Ua,line:"Expenses",amount:-Xa},{report:"Profit & Loss",range:Ua,line:"Net",amount:10500-Xa},{report:"Profit & Loss",range:Ua,line:"Includes Estimates",amount:At?"Yes":"No"}]}return[{report:"Offline Payments",range:Ua,client:"Sara",method:"Cash",amount:50,note:"Session pack",ref:"OFF-221"},{report:"Offline Payments",range:Ua,client:((Ge=(window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||[]).find($e=>String($e.id)==="c2"))==null?void 0:Ge.name)||"Client",method:"Venmo",amount:90,note:"Monthly",ref:"OFF-219"},{report:"Offline Payments",range:Ua,client:"Amina",method:"Bank",amount:120,note:"Invoice",ref:"OFF-208"}].filter($e=>Je?String($e.method||"").toLowerCase()===String(Je).toLowerCase():!0)},[Ie,s,tt,He,B,ne,J,H,Nt,Q,L,ot,ba,At,Je]),la=async()=>{try{Bt("reports_financial_generate",{type:Ie,dr:s,revMode:B,payStatus:H,subMetric:Nt,subGroupBy:Q,subCurrency:L,taxMode:ba})}catch(Ua){}try{ha("loading"),await new Promise(sa=>setTimeout(sa,180));var Ua=Mt();return aa(Array.isArray(Ua)?Ua:[]),ha("ready"),Ua}catch(Ua){return aa([]),ha("idle"),[]}},xa=()=>{var Ua=`${tt(s.start)} \u2192 ${tt(s.end)} (${s.preset||"CUSTOM"})`,sa=JSON.stringify(u||{},null,2),vt=`<h1>FlowOFit \u2014 Financial Report (${Ie})</h1><div class="meta">Date Range: ${Ua}</div>`,Ge=`<div class="meta">Filters: <pre style="margin:6px 0 0; font-size:11px; white-space:pre-wrap;">${sa}</pre></div>`,$e=K&&K[0]?Object.keys(K[0]):["report","range"],Xa=`<tr>${$e.map(xi=>`<th>${xi}</th>`).join("")}</tr>`,mi=(K||[]).map(xi=>`<tr>${$e.map(rs=>{var ct;return`<td>${String((ct=xi[rs])!=null?ct:"")}</td>`}).join("")}</tr>`).join("");return`${vt}${Ge}<table><thead>${Xa}</thead><tbody>${mi}</tbody></table><div class="meta" style="margin-top:14px;">Prototype: Finance Hub integration is read-only until PHASE 3.</div>`},ei=()=>{try{Bt("reports_financial_export_csv",{type:Ie})}catch(Ua){}window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportCSV({rows:K,filename:`flowofit_financial_${String(Ie).toLowerCase()}.csv`})},di=()=>{try{Bt("reports_financial_export_pdf",{type:Ie})}catch(Ua){}window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportPDF({title:`FlowOFit Financial Report \u2014 ${Ie}`,html:xa(),filename:`flowofit_financial_${String(Ie).toLowerCase()}.pdf`})};return React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"R11 \u2014 Financial report type"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},(ue.find(Ua=>Ua.key===Ie)||{}).title||"Financial Report"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400 leading-relaxed"},(ue.find(Ua=>Ua.key===Ie)||{}).desc||"")),React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:la,className:"rounded-xl border border-lime-400/30 bg-lime-500/10 px-3 py-2 text-[12px] "+(Ca==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20")},Ca==="loading"?"Generating\u2026":K.length?"Regenerate":"Generate"),React.createElement("button",{type:"button",disabled:!K.length,onClick:ei,className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-[12px] "+(K.length?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed")},"Export CSV"),React.createElement("button",{type:"button",disabled:!K.length,onClick:di,className:"rounded-xl border border-sky-400/30 bg-sky-500/10 px-3 py-2 text-[12px] "+(K.length?"text-sky-100 hover:bg-sky-500/20":"text-sky-100/40 opacity-60 cursor-not-allowed")},"Export PDF"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85"},"Type"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white outline-none",value:Ie,onChange:Ua=>{try{fe(Ua.target.value),aa([]),ha("idle")}catch(sa){}}},ue.map(Ua=>React.createElement("option",{key:Ua.key,value:Ua.key},Ua.title))),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-400"},"Flow nodes: ",React.createElement("span",{className:"text-white/70 font-mono"},(ue.find(Ua=>Ua.key===Ie)||{}).next||"R11")," \u2192 R13a")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3 md:col-span-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85"},"Report-specific filters"),Ie==="REVENUE"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Source"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:B,onChange:Ua=>X(Ua.target.value)},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"PLATFORM"},"Platform"),React.createElement("option",{value:"OFFLINE"},"Offline"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Client"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:ne,onChange:Ua=>W(Ua.target.value)},React.createElement("option",{value:""},"All Clients"),He.map(Ua=>React.createElement("option",{key:Ua.id,value:Ua.id},Ua.name)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Product"),React.createElement("input",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:J,onChange:Ua=>z(Ua.target.value),placeholder:"e.g., Monthly Plan"}))):null,Ie==="PAYMENTS"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Status"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:H,onChange:Ua=>Ht(Ua.target.value)},React.createElement("option",{value:"DUE"},"Due"),React.createElement("option",{value:"OVERDUE"},"Overdue"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"Hint"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Use Finance Hub (PHASE 3) for Dunning + Offline logging. Reports stays export-first."))):null,Ie==="SUB_METRICS"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Metric"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:Nt,onChange:Ua=>U(Ua.target.value)},React.createElement("option",{value:"MRR"},"MRR"),React.createElement("option",{value:"CHURN"},"Churn"),React.createElement("option",{value:"LTV"},"LTV"),React.createElement("option",{value:"NET_ADDS"},"Net Adds"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Group by"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:Q,onChange:Ua=>w(Ua.target.value)},React.createElement("option",{value:"DAY"},"Day"),React.createElement("option",{value:"WEEK"},"Week"),React.createElement("option",{value:"MONTH"},"Month"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Currency"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:L,onChange:Ua=>ut(Ua.target.value)},React.createElement("option",{value:"DEFAULT"},"Default"),React.createElement("option",{value:"AED"},"AED"),React.createElement("option",{value:"USD"},"USD"),React.createElement("option",{value:"EUR"},"EUR")))):null,Ie==="INVOICING"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Client"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:ot,onChange:Ua=>ht(Ua.target.value)},React.createElement("option",{value:""},"All / Demo"),He.map(Ua=>React.createElement("option",{key:Ua.id,value:Ua.id},Ua.name)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Dependency"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Appendix C: ",React.createElement("span",{className:"font-mono text-white/70"},"BILLING-INVOICES")," (read-only until PHASE 3)"))):null,Ie==="TAX"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Source"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:ba,onChange:Ua=>et(Ua.target.value)},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"PLATFORM"},"Platform"),React.createElement("option",{value:"OFFLINE"},"Offline"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Dependency"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Appendix C: ",React.createElement("span",{className:"font-mono text-white/70"},"TAX-REPORTING")," (read-only until PHASE 3)"))):null,Ie==="PNL"?React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Include estimated expenses"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Prototype toggle only (PHASE 3 will wire real ledger).")),React.createElement("button",{type:"button",onClick:()=>ma(Ua=>!Ua),className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(At?"bg-emerald-500/10 border-emerald-400/30 text-emerald-100":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},At?"On":"Off")):null,Ie==="OFFLINE_LEDGER"?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Method"),React.createElement("select",{className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:Je,onChange:Ua=>Oa(Ua.target.value)},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"Cash"},"Cash"),React.createElement("option",{value:"Venmo"},"Venmo"),React.createElement("option",{value:"Bank"},"Bank"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Dependency"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Appendix C: ",React.createElement("span",{className:"font-mono text-white/70"},"OFFLINE-LEDGER")," (read-only until PHASE 3)"))):null,Ie==="SUB_METRICS"?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"Note"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"These are the Flowchart #5 SaaS dashboards (R13e). The real calculations will read Finance Hub subscriptions later.")):null)),K.length?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},"R13a \u2014 Generated report"),React.createElement("div",{className:"text-[11px] text-white/60 font-mono"},"Rows: ",K.length)),React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"w-full text-left text-[12px]"},React.createElement("thead",{className:"text-white/60"},React.createElement("tr",null,Object.keys(K[0]||{}).map(Ua=>React.createElement("th",{key:Ua,className:"px-2 py-2 border-b border-white/10 font-mono uppercase tracking-widest"},Ua)))),React.createElement("tbody",null,K.map((Ua,sa)=>React.createElement("tr",{key:sa,className:"border-b border-white/5 hover:bg-white/5"},Object.keys(K[0]||{}).map(vt=>React.createElement("td",{key:vt,className:"px-2 py-2 text-white/80"},Zi(Ua[vt]))))))))):React.createElement("div",{className:"mt-4 text-[12px] text-zinc-400"},"Set shared date range above, pick a report type (R11), adjust filters (R12/R13\u2026), then ",React.createElement("span",{className:"text-white/80 font-semibold"},"Generate")," (R13a)."),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/10 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Compliance / Ownership"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400 leading-relaxed"},"This module implements Flowchart #5 financial reporting (R11\u2013R13f) and exports (R_Export). Finance tooling itself remains inside ",React.createElement("span",{className:"text-white/80 font-semibold"},"Finance Hub (Flowchart #11)")," \u2014 Reports only reads and exports.")))},Yl=({dr:i,dateApi:s,presets:x=[],filters:S={},filterApi:u})=>{var[$,tt]=React.useState("ACQUISITION"),[ue,Ie]=React.useState("ALL"),[fe,B]=React.useState("ALL"),[X,ne]=React.useState(null),W=React.useMemo(()=>[{key:"ACQUISITION",title:"Client Acquisition",desc:"New clients acquired in the selected date range.",next:"R15"},{key:"CHURN",title:"Churn Rate",desc:"Client churn snapshot (placeholder until CRM billing signals).",next:"R15"},{key:"RETENTION",title:"Retention Cohorts",desc:"Week/Month cohort retention view (demo).",next:"R15"},{key:"GROWTH",title:"Growth Snapshot",desc:"Active clients, net adds, conversion (demo).",next:"R15"}],[]),J=(Q,w={})=>{try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track(Q,w)}catch(L){}},z=Q=>{var w=Number(Q);return isFinite(w)?w:0},H=React.useMemo(()=>{try{var Q=new Date((i==null?void 0:i.start)||Date.now()),w=new Date((i==null?void 0:i.end)||Date.now());return Math.max(1,Math.round((w-Q)/(1e3*60*60*24))+1)}catch(Q){return 30}},[i==null?void 0:i.start,i==null?void 0:i.end]),Ht=()=>{J("reports_business_generate",{type:$,segment:ue,channel:fe,step:"R16"});var Q=Math.max(10,Math.round(H*1.7)),w=ut=>Math.round((Math.sin(ut*1.37)+1.2)*7);var L=[];if($==="ACQUISITION")L=Array.from({length:Math.min(12,Math.max(6,Math.round(H/3)))}).map((ut,ot)=>({period:`W${ot+1}`,newClients:Q+w(ot),channel:fe==="ALL"?["Organic","Referral","Paid"][ot%3]:fe,segment:ue==="ALL"?["General","Strength","Yoga"][ot%3]:ue,source:"placeholder/demo until Phase 4"}));else if($==="CHURN")L=Array.from({length:8}).map((ut,ot)=>{var ht=Q+40+w(ot),ba=Math.max(0,Math.round(ht*(.03+ot%3*.01)));return{period:`M${ot+1}`,activeClients:ht,churnedClients:ba,churnRate:`${(z(ba)/Math.max(1,ht)*100).toFixed(1)}%`,segment:ue==="ALL"?["General","Strength","Yoga"][ot%3]:ue,source:"placeholder/demo until Phase 4"}});else if($==="RETENTION")L=Array.from({length:6}).map((ut,ot)=>({cohort:`Cohort ${ot+1}`,week1:`${Math.max(40,92-ot*7)}%`,week4:`${Math.max(20,74-ot*9)}%`,month3:`${Math.max(10,52-ot*8)}%`,channel:fe==="ALL"?["Organic","Referral","Paid"][ot%3]:fe,source:"placeholder/demo until Phase 4"}));else{var ut=Q+80,ot=Q+10,ht=Math.round((Q+20)*.18),ba=ot-ht;L=[{metric:"Active Clients",value:ut,notes:"demo"},{metric:"New Clients",value:ot,notes:"demo"},{metric:"Churned Clients",value:ht,notes:"demo"},{metric:"Net Adds",value:ba,notes:"demo"},{metric:"Conversion Rate",value:`${8.5.toFixed(1)}%`,notes:"demo"},{metric:"Source",value:"placeholder/demo until Phase 4",notes:""}]}ne(L)},Nt=()=>{J("reports_business_export_csv",{type:$}),window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportCSV({rows:X,filename:`flowofit_business_${String($).toLowerCase()}.csv`})},U=()=>{J("reports_business_export_pdf",{type:$}),window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportPDF({title:`FlowOFit Business Report \u2014 ${String((W.find(Q=>Q.key===$)||{}).title||$)}`,rows:X,filename:`flowofit_business_${String($).toLowerCase()}.pdf`})};return React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"R14 \u2014 Business report type"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white truncate"},(W.find(Q=>Q.key===$)||{}).title||"Business Report"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400 leading-relaxed"},(W.find(Q=>Q.key===$)||{}).desc||""),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"R15 uses the ",React.createElement("span",{className:"text-white/70"},"Shared Date Range + Filters")," bar below. Current:"," ",React.createElement("span",{className:"text-white/70"},(()=>{try{return new Date((i==null?void 0:i.start)||Date.now()).toLocaleDateString()}catch(Q){return"\u2014"}})())," ","\u2192 ",React.createElement("span",{className:"text-white/70"},(()=>{try{return new Date((i==null?void 0:i.end)||Date.now()).toLocaleDateString()}catch(Q){return"\u2014"}})()))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{className:"rounded-xl border border-lime-400/30 bg-lime-500/10 px-3 py-2 text-[12px] text-lime-100 hover:bg-lime-500/20",onClick:Ht,title:"Generate business report"},X?"Regenerate":"Generate"," (R16)"),React.createElement("button",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-[12px] "+(X?"text-emerald-100 hover:bg-emerald-500/20":"opacity-50 cursor-not-allowed"),disabled:!X,onClick:Nt,title:"Export CSV"},"Export CSV"),React.createElement("button",{className:"rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 px-3 py-2 text-[12px] "+(X?"text-fuchsia-100 hover:bg-fuchsia-500/20":"opacity-50 cursor-not-allowed"),disabled:!X,onClick:U,title:"Export PDF"},"Export PDF"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"R14"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Select report"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:$,onChange:Q=>tt(Q.target.value)},W.map(Q=>React.createElement("option",{key:Q.key,value:Q.key},Q.title)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Filters"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Segment"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:ue,onChange:Q=>Ie(Q.target.value)},["ALL","General","Strength","Yoga","Hybrid"].map(Q=>React.createElement("option",{key:Q,value:Q},Q)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Filters"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Channel"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:fe,onChange:Q=>B(Q.target.value)},["ALL","Organic","Referral","Paid","Partnerships"].map(Q=>React.createElement("option",{key:Q,value:Q},Q))))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},X?"Generated report (R16)":"Generate first (R16)"),X?React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"min-w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-white/70"},Object.keys(X[0]||{}).slice(0,8).map(Q=>React.createElement("th",{key:Q,className:"text-left font-semibold py-2 pr-4"},Q)))),React.createElement("tbody",{className:"text-white/90"},X.slice(0,30).map((Q,w)=>React.createElement("tr",{key:w,className:"border-t border-white/10"},Object.keys(X[0]||{}).slice(0,8).map(L=>{var ut;return React.createElement("td",{key:L,className:"py-2 pr-4 text-white/85"},String((ut=Q[L])!=null?ut:""))}))))),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-500"},"Note: demo data until Phase 4 CRM & Business Hub sources are wired.")):React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"Choose type (R14), set date range (R15), then generate (R16).")))},md=({dr:i,dateApi:s,presets:x=[],filters:S={},filterApi:u})=>{var[$,tt]=React.useState("FUNNEL"),[ue,Ie]=React.useState("ALL"),[fe,B]=React.useState("ALL"),[X,ne]=React.useState(null),W=React.useMemo(()=>[{key:"FUNNEL",title:"Lead \u2192 Conversion Funnel",desc:"Top-of-funnel to paid conversion (demo).",node:"R17"},{key:"COHORT",title:"Cohort Retention",desc:"Lead cohorts tracked over time (demo).",node:"R17"},{key:"CAMPAIGN",title:"Campaign Performance",desc:"Spend / CPL / CAC / ROAS view (demo).",node:"R17"},{key:"SOURCE",title:"Source Attribution",desc:"Channel/source mix and conversion rates (demo).",node:"R17"}],[]),J=(w,L={})=>{try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track(w,L)}catch(ut){}},z=React.useMemo(()=>{try{var w=new Date((i==null?void 0:i.start)||Date.now()),L=new Date((i==null?void 0:i.end)||Date.now());return Math.max(1,Math.round((L-w)/(1e3*60*60*24))+1)}catch(w){return 30}},[i==null?void 0:i.start,i==null?void 0:i.end]),H=w=>{var L=Number(w);return isFinite(L)?L:0},Ht=()=>{J("reports_sales_generate",{viewType:$,segment:ue,channel:fe,step:"R17"});var w=Math.max(20,Math.round(z*1.8)),L=Math.max(10,Math.round(w*.58)),ut=Math.max(6,Math.round(L*.62)),ot=Math.max(3,Math.round(ut*.55)),ht=Math.max(1,Math.round(ot*.45)),ba=fe==="ALL"?["Organic","Referral","Paid","Partnerships"]:[fe];var et=[];$==="FUNNEL"?et=[{stage:"Leads",count:w,convFromPrev:"\u2014",notes:"demo"},{stage:"MQL",count:L,convFromPrev:`${(H(L)/Math.max(1,w)*100).toFixed(1)}%`,notes:"demo"},{stage:"SQL",count:ut,convFromPrev:`${(H(ut)/Math.max(1,L)*100).toFixed(1)}%`,notes:"demo"},{stage:"Trial",count:ot,convFromPrev:`${(H(ot)/Math.max(1,ut)*100).toFixed(1)}%`,notes:"demo"},{stage:"Paid",count:ht,convFromPrev:`${(H(ht)/Math.max(1,ot)*100).toFixed(1)}%`,notes:"demo"}]:$==="COHORT"?et=Array.from({length:6}).map((At,ma)=>({cohort:`Cohort ${ma+1}`,leads:w-ma*6,week1:`${Math.max(35,90-ma*6)}%`,week4:`${Math.max(18,72-ma*8)}%`,month3:`${Math.max(10,52-ma*7)}%`,segment:ue==="ALL"?["General","Strength","Yoga"][ma%3]:ue,source:"demo"})):$==="CAMPAIGN"?et=Array.from({length:Math.min(10,ba.length*3)}).map((At,ma)=>{var Je=Math.round(120+ma*37+(Math.sin(ma*1.2)+1)*55),Oa=Math.max(5,Math.round(w/8)+ma*2),He=Je/Math.max(1,Oa),Ca=Math.max(0,Math.round(Oa*(.08+ma%3*.02))),ha=Ca?Je/Ca:0;return{campaign:`Campaign ${ma+1}`,channel:fe==="ALL"?ba[ma%ba.length]:fe,spend:`$${Je}`,leads:Oa,cpl:`$${He.toFixed(2)}`,paid:Ca,cac:Ca?`$${ha.toFixed(2)}`:"\u2014",roas:`${(.8+ma%4*.35).toFixed(2)}x`,notes:"demo"}}):et=Array.from({length:8}).map((At,ma)=>{var Je=Math.max(4,Math.round(w/10)+ma*3),Oa=Math.max(0,Math.round(Je*(.1+ma%3*.02))),He=Oa?Oa/Je*100:0;return{source:fe==="ALL"?ba[ma%ba.length]:fe,leads:Je,paid:Oa,conversionRate:`${He.toFixed(1)}%`,cpa:`$${(14+ma*4.5).toFixed(2)}`,notes:"demo"}}),ne(et)},Nt=()=>{J("reports_sales_export_csv",{viewType:$}),window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportCSV({rows:X,filename:`flowofit_sales_${String($).toLowerCase()}.csv`})},U=()=>{J("reports_sales_export_pdf",{viewType:$}),window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportPDF({title:`FlowOFit Sales & Marketing \u2014 ${String((W.find(w=>w.key===$)||{}).title||$)}`,rows:X,filename:`flowofit_sales_${String($).toLowerCase()}.pdf`})},Q=React.useMemo(()=>{if(!X)return null;if($==="FUNNEL"){var w=X.find(ba=>String(ba.stage).toLowerCase()==="paid")||{},L=X.find(ba=>String(ba.stage).toLowerCase()==="leads")||{},ut=H(w.count),ot=H(L.count),ht=ot?ut/ot*100:0;return[{k:"Leads",v:ot},{k:"Paid",v:ut},{k:"Overall CR",v:`${ht.toFixed(1)}%`}]}if($==="CAMPAIGN"){var w=X.reduce((ot,ht)=>ot+H(String(ht.spend||"0").replace(/[^0-9.]/g,"")),0),L=X.reduce((ot,ht)=>ot+H(ht.leads),0),ut=X.reduce((ot,ht)=>ot+H(ht.paid),0);return[{k:"Spend",v:`$${w.toFixed(0)}`},{k:"Leads",v:L},{k:"Paid",v:ut}]}return[{k:"Rows",v:X.length},{k:"Segment",v:ue},{k:"Channel",v:fe}]},[X,$,ue,fe]);return React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"R_Sales_NEW \u2014 Sales & Marketing dashboard"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white truncate"},(W.find(w=>w.key===$)||{}).title||"Sales & Marketing"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400 leading-relaxed"},(W.find(w=>w.key===$)||{}).desc||""),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Date range comes from the ",React.createElement("span",{className:"text-white/70"},"Shared Date Range + Filters")," bar below. Current:"," ",React.createElement("span",{className:"text-white/70"},(()=>{try{return new Date((i==null?void 0:i.start)||Date.now()).toLocaleDateString()}catch(w){return"\u2014"}})())," ","\u2192 ",React.createElement("span",{className:"text-white/70"},(()=>{try{return new Date((i==null?void 0:i.end)||Date.now()).toLocaleDateString()}catch(w){return"\u2014"}})()))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{className:"rounded-xl border border-lime-400/30 bg-lime-500/10 px-3 py-2 text-[12px] text-lime-100 hover:bg-lime-500/20",onClick:Ht,title:"Generate sales & marketing report"},X?"Regenerate":"Generate"," (R17)"),React.createElement("button",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-[12px] "+(X?"text-emerald-100 hover:bg-emerald-500/20":"opacity-50 cursor-not-allowed"),disabled:!X,onClick:Nt,title:"Export CSV"},"Export CSV"),React.createElement("button",{className:"rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/10 px-3 py-2 text-[12px] "+(X?"text-fuchsia-100 hover:bg-fuchsia-500/20":"opacity-50 cursor-not-allowed"),disabled:!X,onClick:U,title:"Export PDF"},"Export PDF"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"R_Sales_NEW"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Select view"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:$,onChange:w=>tt(w.target.value)},W.map(w=>React.createElement("option",{key:w.key,value:w.key},w.title)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Filters"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Segment"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:ue,onChange:w=>Ie(w.target.value)},["ALL","General","Strength","Yoga","Hybrid"].map(w=>React.createElement("option",{key:w,value:w},w)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Filters"),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white/85"},"Channel"),React.createElement("select",{className:"mt-2 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white",value:fe,onChange:w=>B(w.target.value)},["ALL","Organic","Referral","Paid","Partnerships"].map(w=>React.createElement("option",{key:w,value:w},w))))),Q?React.createElement("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3"},Q.map((w,L)=>React.createElement("div",{key:L,className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},w.k),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},String(w.v))))):null,React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},X?"Funnel metrics view (R17)":"Generate first (R17)"),X?React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"min-w-full text-[12px]"},React.createElement("thead",null,React.createElement("tr",{className:"text-white/70"},Object.keys(X[0]||{}).slice(0,10).map(w=>React.createElement("th",{key:w,className:"text-left font-semibold py-2 pr-4"},w)))),React.createElement("tbody",{className:"text-white/90"},X.slice(0,40).map((w,L)=>React.createElement("tr",{key:L,className:"border-t border-white/10"},Object.keys(X[0]||{}).slice(0,10).map(ut=>{var ot;return React.createElement("td",{key:ut,className:"py-2 pr-4 text-white/85"},String((ot=w[ut])!=null?ot:""))}))))),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-500"},"Note: demo data until Business Hub (#9) + CRM lead sources are wired.")):React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"Choose view (R_Sales_NEW), set date range (R15), then generate (R17).")))},ac=({dr:i,dateApi:s,presets:x=[],filters:S={},filterApi:u})=>{var[$,tt]=React.useState("ALL"),[ue,Ie]=React.useState(null),fe=React.useMemo(()=>[{key:"PLANS",title:"Plans"},{key:"LOGS",title:"Logs"},{key:"AI_COACH",title:"AI Coach"},{key:"NUTRITION",title:"Nutrition"},{key:"RECOVERY",title:"Recovery"},{key:"REPORTS",title:"Reports"},{key:"WEARABLES",title:"Wearables"},{key:"PAYMENTS",title:"Payments"}],[]),B=React.useMemo(()=>[{key:"ALL",title:"All"},{key:"TRAINER",title:"Trainer"},{key:"CLIENT",title:"Client"},{key:"BUSINESS",title:"Business"}],[]),X=React.useCallback(()=>{var z=JSON.stringify({s:$,p:(i==null?void 0:i.preset)||null,a:(i==null?void 0:i.start)||null,b:(i==null?void 0:i.end)||null}),H=L=>{var ut=2166136261;for(var ot=0;ot<L.length;ot++)ut^=L.charCodeAt(ot),ut=Math.imul(ut,16777619);return ut>>>0},Ht=H(z),Nt=new Date,U=(L,ut)=>new Date(Nt.getTime()-(Ht%9+1+ut)*864e5).toISOString().slice(0,10),Q=$==="TRAINER"?.55:$==="CLIENT"?.85:$==="BUSINESS"?.35:1,w=fe.map((L,ut)=>{var At;var ot=H(z+"::"+L.key),ht=Math.max(1,Math.round((ot%240+30)*Q)),ba=Math.max(1,Math.min(100,Math.round((ot%75+20)*($==="ALL"?1:.9)))),et=Math.max(.2,Math.round((ot%30+3)/5*10)/10);return{Feature:L.title,ActiveUsers:ht,AdoptionPct:ba+"%",UsageFreq:et+" / wk",LastUsed:U(L.key,ut),Segment:((At=B.find(ma=>ma.key===$))==null?void 0:At.title)||"All"}});Ie(w)},[fe,B,$,i]),ne=React.useMemo(()=>[{key:"Feature",label:"Feature"},{key:"ActiveUsers",label:"Active Users"},{key:"AdoptionPct",label:"% Adoption"},{key:"UsageFreq",label:"Usage Frequency"},{key:"LastUsed",label:"Last Used"},{key:"Segment",label:"Segment"}],[]),W=()=>{try{window.FOF_EXPORT_ENGINE_V2.exportCSV({reportKey:"FEATURE_ADOPTION",dr:i,rows:ue||[],columns:ne})}catch(z){console.warn(z)}},J=()=>{var z=(()=>{var H=(ne||[]).map(U=>U.key),Ht="<tr>"+(ne||[]).map(U=>`<th style="text-align:left;padding:8px;border-bottom:1px solid #e5e7eb;">${Zi(U.label)}</th>`).join("")+"</tr>",Nt=(ue||[]).map(U=>"<tr>"+H.map(Q=>`<td style="padding:8px;border-bottom:1px solid #f1f5f9;">${Zi(U[Q])}</td>`).join("")+"</tr>").join("");return`<table style="width:100%;border-collapse:collapse;font-size:12px;">${Ht}${Nt}</table>`})();try{window.FOF_EXPORT_ENGINE_V2.exportPDF({reportKey:"FEATURE_ADOPTION",dr:i,title:"Feature Adoption Report",html:z})}catch(H){console.warn(H)}};return React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"R_Metrics"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},"Feature Adoption"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Read-only adoption metrics for key features. Uses Shared Date Range (PHASE 1). Export-first.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:X,className:"px-3 py-2 rounded-xl bg-sky-500/20 border border-sky-400/30 hover:bg-sky-500/25 text-[11px] font-mono uppercase tracking-widest text-sky-200"},"Generate"),React.createElement("button",{type:"button",onClick:W,disabled:!ue||ue.length===0,className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(!ue||ue.length===0?"bg-white/5 border-white/10 text-white/30":"bg-white/5 border-white/10 hover:bg-white/10 text-white/80")},"Export CSV"),React.createElement("button",{type:"button",onClick:J,disabled:!ue||ue.length===0,className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(!ue||ue.length===0?"bg-white/5 border-white/10 text-white/30":"bg-white/5 border-white/10 hover:bg-white/10 text-white/80")},"Export PDF"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Segment"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},B.map(z=>React.createElement("button",{key:z.key,type:"button",onClick:()=>tt(z.key),className:"px-2.5 py-1.5 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+($===z.key?"bg-sky-500/20 border-sky-400/40 text-sky-200":"bg-white/5 border-white/10 text-white/70 hover:bg-white/10")},z.title)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"Scope"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Read-only \u2022 No drill-down yet \u2022 No edits"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"Phase 3 can add pivots and user-level breakdowns.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"Export"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Uses universal export (R_Export)"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"CSV uses deterministic columns; PDF opens print dialog."))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Generated report"),ue?React.createElement("div",{className:"mt-3 overflow-auto"},React.createElement("table",{className:"min-w-[820px] w-full text-left text-[12px]"},React.createElement("thead",{className:"text-white/70"},React.createElement("tr",null,ne.map(z=>React.createElement("th",{key:z.key,className:"px-3 py-2 border-b border-white/10"},z.label)))),React.createElement("tbody",{className:"text-white/80"},ue.map((z,H)=>React.createElement("tr",{key:H,className:"odd:bg-white/0 even:bg-white/[0.03]"},ne.map(Ht=>React.createElement("td",{key:Ht.key,className:"px-3 py-2 border-b border-white/5"},Zi(z[Ht.key])))))))):React.createElement("div",{className:"mt-2 text-[12px] text-zinc-400"},"Click ",React.createElement("span",{className:"text-white/80 font-mono"},"Generate")," to render the adoption table."))))},Ud=({clientRecords:i=[],selectedClient:s=null})=>{var x=typeof window!="undefined"&&window.useFoFDateRange?window.useFoFDateRange("LAST_30_DAYS"):{dr:{preset:"LAST_30_DAYS",start:Date.now()-25056e5,end:Date.now()},setPreset:()=>{},setCustom:()=>{}},S=typeof window!="undefined"&&window.useFoFFilters?window.useFoFFilters({status:null,clientId:null,source:null,segment:null}):{filters:{},set:()=>{},clear:()=>{}},u=x.dr||{},$=S.filters||{},[tt,ue]=React.useState(!1),[Ie,fe]=React.useState(!1),[B,X]=React.useState(()=>{try{return new Date(u.start||Date.now()).toISOString().slice(0,10)}catch(ht){return""}}),[ne,W]=React.useState(()=>{try{return new Date(u.end||Date.now()).toISOString().slice(0,10)}catch(ht){return""}});React.useEffect(()=>{try{!tt&&(u!=null&&u.start)&&(u!=null&&u.end)&&(X(new Date(u.start).toISOString().slice(0,10)),W(new Date(u.end).toISOString().slice(0,10)))}catch(ht){}},[u&&u.start,u&&u.end,tt]);var J=ht=>{try{return new Date(ht).toLocaleDateString()}catch(ba){return""}},z=React.useMemo(()=>[{metric:"MRR",value:1250,period:"Monthly"},{metric:"Churn",value:"3.2%",period:"Monthly"},{metric:"New Leads",value:42,period:"Selected range"},{metric:"Conversions",value:11,period:"Selected range"}],[]),H=typeof window!="undefined"&&window.useFoFGenerate?window.useFoFGenerate("REPORTS_SAMPLE",{dateRange:u,filters:$,context:"REPORTS"}):{status:"idle",rows:null,generate:async()=>z,clear:()=>{}},Ht=()=>{var ht=`${J(u.start)} \u2192 ${J(u.end)} (${u.preset||"CUSTOM"})`,ba=JSON.stringify($||{},null,2),At=(H.rows||z).map(ma=>`<tr><td>${String(ma.metric)}</td><td>${String(ma.value)}</td><td>${String(ma.period)}</td></tr>`).join("");return`
      <h1>FlowOFit \u2014 Sample Report (Prototype)</h1>
      <div class="meta">Date Range: ${ht}</div>
      <div class="meta">Filters: <pre style="margin:6px 0 0; font-size:11px; white-space:pre-wrap;">${ba}</pre></div>
      <table>
        <thead><tr><th>Metric</th><th>Value</th><th>Period</th></tr></thead>
        <tbody>${At}</tbody>
      </table>
      <div class="meta" style="margin-top:16px;">Note: This is PHASE 1 export plumbing only (CSV + Print-to-PDF). Flowchart #5 report bodies are implemented in PHASE 2.</div>
    `},Nt=()=>{window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportCSV({rows:H.rows||z,filename:"flowofit_sample_report.csv"})},U=()=>{window.FOF_EXPORT_ENGINE_V1&&window.FOF_EXPORT_ENGINE_V1.exportPDF({title:"FlowOFit Sample Report",html:Ht(),filename:"flowofit_sample_report.pdf"})},Q=window.FOF_DATE_ENGINE&&window.FOF_DATE_ENGINE.presets?window.FOF_DATE_ENGINE.presets:["LAST_7_DAYS","LAST_30_DAYS","THIS_MONTH","CUSTOM"],[w,L]=React.useState(null),ut=React.useMemo(()=>[{key:"CLIENT",title:"Client Reports",desc:"Individual client reports + aggregate overviews.",icon:"Users",next:"R3\u2013R10"},{key:"FINANCIAL",title:"Financial Reports",desc:"Revenue, payments status, tax summaries, P&L, offline ledger (read-only until Phase 3).",icon:"Receipt",next:"R11\u2013R13a"},{key:"BUSINESS",title:"Business Reports",desc:"Acquisition, churn, and growth snapshots (export-first).",icon:"TrendingUp",next:"R14\u2013R16"},{key:"ADOPTION",title:"Feature Adoption",desc:"Adoption metrics for key features and behaviors.",icon:"Activity",next:"R_Metrics"},{key:"SALES",title:"Sales & Marketing",desc:"Lead-to-conversion funnels + cohort retention exports.",icon:"BarChart3",next:"R_Sales_NEW \u2192 R17"}],[]);React.useEffect(()=>{try{Bt&&Bt("report_opened",{module:"REPORTS",step:"R1",route:"REPORTS"})}catch(ht){}try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track("report_opened",{module:"REPORTS",step:"R1"})}catch(ht){}},[]);var ot=ht=>{try{L(ht)}catch(ba){}try{Bt&&Bt("report_category_selected",{module:"REPORTS",step:"R2",category:ht})}catch(ba){}try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track("report_category_selected",{module:"REPORTS",step:"R2",category:ht})}catch(ba){}};return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300/90"},"Reports"),React.createElement("h2",{className:"mt-1 text-xl font-bold text-white"},"PHASE 2 \u2014 Trainer Reporting Module"),React.createElement("p",{className:"mt-1 text-sm text-zinc-300"},React.createElement("span",{className:"text-white/90 font-semibold"},"Step R1\u2013R2 implemented:")," entry routes here via sidebar, then you choose a report category. All report bodies (R3\u2013R17) will be implemented next, node-by-node, using the PHASE 1 shared foundations (date engine, filters incl. Source, generate, export gating, event log).")),w?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Selected category"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},(ut.find(ht=>ht.key===w)||{}).title||w),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Stub screen for now \u2014 the node sequence for this category will be implemented next.",React.createElement("span",{className:"ml-2 text-white/70 font-mono"},"(",(ut.find(ht=>ht.key===w)||{}).next||"TBD",")"))),React.createElement("button",{type:"button",onClick:()=>{try{L(null)}catch(ht){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Back")),w==="CLIENT"?React.createElement(cl,{clients:i,selectedClient:s,dr:u,dateApi:x,presets:Q,filters:$,filterApi:S}):w==="FINANCIAL"?React.createElement(Wl,{clientRecords:i,dr:u,dateApi:x,presets:Q,filters:$,filterApi:S}):w==="BUSINESS"?React.createElement(Yl,{dr:u,dateApi:x,presets:Q,filters:$,filterApi:S}):w==="ADOPTION"?React.createElement(ac,{dr:u,dateApi:x,presets:Q,filters:$,filterApi:S}):w==="SALES"?React.createElement(md,{dr:u,dateApi:x,presets:Q,filters:$,filterApi:S}):React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"Owner"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Reports module (Flowchart #5)")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-300"},"Inputs"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Date range + filters (incl. Source)")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"Outputs"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Generated report view + Export (PDF/CSV)"))),React.createElement("div",{className:"mt-4 text-[12px] text-zinc-400"},"Next implementation will replace this stub with the full flow for the chosen category. Nothing is duplicated outside Reports \u2014 other modules only deep-link here."))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},"Select report category"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Flowchart #5 (R2). Every category must exist \u2014 implemented or stubbed \u2014 with exports owned by Reports.")),React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"R2")),React.createElement("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3"},ut.map(ht=>React.createElement("button",{key:ht.key,type:"button",onClick:()=>ot(ht.key),className:"text-left rounded-2xl border border-white/10 bg-black/30 hover:bg-black/40 hover:border-sky-400/40 transition p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-center shrink-0"},React.createElement(_,{name:ht.icon,size:18,className:"text-sky-200"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-sm font-semibold text-white"},ht.title),React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/5 border border-white/10 text-white/70 font-mono"},"Next: ",ht.next)),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400 leading-relaxed"},ht.desc))))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},"Shared Date Range + Filters (PHASE 1)"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Range: ",React.createElement("span",{className:"text-white/80"},J(u.start)," \u2192 ",J(u.end)),React.createElement("span",{className:"ml-2 rounded-full bg-white/10 px-2 py-0.5 text-[11px] text-white/70"},u.preset||"CUSTOM"))),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>ue(!0),onFocus:()=>ue(!0),className:"rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white outline-none hover:bg-black/50",title:"Edit date range"},u.preset?u.preset.replaceAll("_"," "):"CUSTOM"),tt?React.createElement("div",{className:"absolute z-[70] right-0 top-[110%] w-[320px] max-w-[85vw] rounded-2xl border border-white/10 bg-[#0b1020] shadow-card-strong p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Date range"),React.createElement("button",{type:"button",onClick:()=>{ue(!1),fe(!1)},className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[10px] font-mono uppercase tracking-widest"},"Close")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Q.filter(ht=>ht!=="CUSTOM").map(ht=>React.createElement("button",{key:ht,type:"button",onClick:()=>{x.setPreset(ht),ue(!1),fe(!1)},className:"px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+(u.preset===ht?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},ht.replaceAll("_"," "))),React.createElement("button",{type:"button",onClick:()=>{x.setPreset("CUSTOM"),fe(!0)},className:"px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+(Ie?"bg-white/10 border-white/30 text-white":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},"Custom")),Ie?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Start"),React.createElement("input",{type:"date",value:B,onChange:ht=>X(ht.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"End"),React.createElement("input",{type:"date",value:ne,onChange:ht=>W(ht.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white text-[12px]"}))),React.createElement("button",{type:"button",onClick:()=>{try{if(!B||!ne)return;var ht=new Date(B+"T00:00:00"),ba=new Date(ne+"T23:59:59");x.setCustom(ht.getTime(),ba.getTime()),ue(!1)}catch(ht){}},className:"mt-3 w-full px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Apply")):null):null),React.createElement("button",{className:"rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-[12px] text-white/90 hover:bg-white/15",onClick:()=>S.clear(),title:"Clear shared filters"},"Clear Filters"),React.createElement("button",{className:"rounded-xl border border-lime-400/30 bg-lime-500/10 px-3 py-2 text-[12px] "+(H.status==="loading"?"text-lime-200/70":"text-lime-100 hover:bg-lime-500/20"),onClick:()=>H.generate(),title:"Generate report in-page"},H.status==="loading"?"Generating\u2026":H.rows?"Regenerate":"Generate"),React.createElement("button",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-[12px] "+(H.rows?"text-emerald-100 hover:bg-emerald-500/20":"text-emerald-100/40 opacity-60 cursor-not-allowed"),disabled:!H.rows,onClick:Nt,title:"Export CSV (v1)"},"Export CSV"),React.createElement("button",{className:"rounded-xl border border-sky-400/30 bg-sky-500/10 px-3 py-2 text-[12px] "+(H.rows?"text-sky-100 hover:bg-sky-500/20":"text-sky-100/40 opacity-60 cursor-not-allowed"),disabled:!H.rows,onClick:U,title:"Export PDF (v1: Print-to-PDF)"},"Export PDF"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Filter: Status"),React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("select",{className:"flex-1 rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white outline-none",value:$.status||"",onChange:ht=>S.set("status",ht.target.value||null)},React.createElement("option",{value:""},"Any"),React.createElement("option",{value:"ACTIVE"},"ACTIVE"),React.createElement("option",{value:"LEAD"},"LEAD"),React.createElement("option",{value:"CHURNED"},"CHURNED"))),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-400"},"Shared contract: ",React.createElement("span",{className:"text-white/70"},"FOF_FILTER_ENGINE.schema"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Filter: Segment"),React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("select",{className:"flex-1 rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white outline-none",value:$.segment||"",onChange:ht=>S.set("segment",ht.target.value||null)},React.createElement("option",{value:""},"Any"),React.createElement("option",{value:"HIGH_INTENT"},"HIGH INTENT"),React.createElement("option",{value:"PRICE_SENSITIVE"},"PRICE SENSITIVE"),React.createElement("option",{value:"RETURNING"},"RETURNING"))),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-400"},"Shared contract: ",React.createElement("span",{className:"text-white/70"},"FOF_DATE_ENGINE + FOF_FILTER_ENGINE"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white/80"},"Filter: Source"),React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("select",{className:"flex-1 rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-[12px] text-white outline-none",value:$.source||"",onChange:ht=>S.set("source",ht.target.value||null)},React.createElement("option",{value:""},"Any"),React.createElement("option",{value:"ORGANIC"},"ORGANIC"),React.createElement("option",{value:"REFERRAL"},"REFERRAL"),React.createElement("option",{value:"ADS"},"ADS"),React.createElement("option",{value:"PARTNERSHIP"},"PARTNERSHIP"))),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-400"},"Shared contract: ",React.createElement("span",{className:"text-white/70"},"FOF_FILTER_ENGINE.schema.source")))),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},React.createElement("span",{className:"text-white/70 font-semibold"},"PHASE 1 note:")," This card only proves shared foundations + export plumbing. Full Flowchart #5 report nodes (R1\u2013R17) are implemented in ",React.createElement("span",{className:"text-white/70"},"PHASE 2"),".")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},"Event Log (PHASE 1)"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-400"},"Export actions emit events into ",React.createElement("span",{className:"text-white/70 font-mono"},"FOF_EVENT_LOG_V1"),". (Used later by Reports + Insights + segmentation.)"),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{className:"rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-[12px] text-white/90 hover:bg-white/15",onClick:()=>{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track("report_opened",{module:"REPORTS"})}},"Emit test event"),React.createElement("button",{className:"rounded-xl border border-white/10 bg-white/10 px-3 py-2 text-[12px] text-white/90 hover:bg-white/15",onClick:()=>{if(window.FOF_EVENT_LOG_V1){var ht=window.FOF_EVENT_LOG_V1.query({fromTs:Date.now()-6048e5});alert(`Events in last 7 days: ${ht.length}`)}}},"View event count")))))},Bd=()=>React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-4"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-bold text-white font-mono uppercase tracking-widest"},"Business & Finance Hub"),React.createElement("p",{className:"text-xs text-zinc-400 mt-1"},"Phase 0 scaffold. Single-owner home for all finance, legal and commerce tooling (Flowchart #11).")),React.createElement("div",{className:"text-right text-[11px] text-zinc-500"},"Rule: Other modules show summaries only \u2192 deep-link here.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-[0.22em] text-white/80"},"Node Coverage Note"),React.createElement("div",{className:"text-[12px] text-zinc-400 mt-2"},"Appendix C requires the following nodes to be implemented or stubbed. In Phase 0, these are ",React.createElement("span",{className:"text-white/70 font-semibold"},"stubs")," with ownership and dependencies only."),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},[{id:"FH-ENTRY",name:"Finance Hub Entry"},{id:"BILLING-SUBSCRIPTIONS",name:"Subscription Management"},{id:"BILLING-INVOICES",name:"Invoice Generation & Tracking"},{id:"BILLING-PROMOS",name:"Coupons / Bundles / Promotions"},{id:"DUNNING",name:"Overdue & Dunning Routing"},{id:"CANCELLATION",name:"Subscription Cancellation Flow"},{id:"TAX-CONFIG",name:"Tax Configuration"},{id:"TAX-REPORTING",name:"Tax Summaries & Receipts"},{id:"PAYOUT-TRIGGER",name:"Payout Job Trigger (\u226511 days default)"},{id:"WAIVERS-TEMPLATES",name:"Waiver Templates"},{id:"WAIVERS-ASSIGN",name:"Waiver Assignment Tracking"},{id:"CREDITS",name:"Credit Packs"},{id:"GROUP-CLASSES",name:"Group Class Scheduling"},{id:"OFFLINE-LEDGER",name:"Offline Payment Logging"}].map(s=>React.createElement("div",{key:s.id,className:"rounded-xl border border-titanium-700 bg-titanium-900 p-3"},React.createElement("div",{className:"text-[11px] font-extrabold text-white"},s.id),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},s.name),React.createElement("div",{className:"text-[10px] text-zinc-600 mt-2 font-mono uppercase"},"Stub \u2022 Phase 3 owner"))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-[0.22em] text-white/80"},"Deep-link Contract"),React.createElement("ul",{className:"mt-2 text-[12px] text-zinc-400 list-disc pl-5 space-y-1"},React.createElement("li",null,"Invoices, subscriptions, dunning, tax, payouts, waivers, credits, group classes and offline payments live here."),React.createElement("li",null,"Other areas may show summary tiles only (counts/alerts) and must route into this hub for actions."))))),ic=({onBack:i,onHome:s,canGoBack:x})=>React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Admin"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Admin Analytics"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},React.createElement("span",{className:"text-white/85 font-semibold"},"Thin summary shell only.")," ","Reporting generation + exports are owned by ",React.createElement("span",{className:"text-white/85 font-semibold"},"Reports (Flowchart #5)"),". Pro Insights (Business Growth Hub) prioritises actions and deep-links into CRM / Automations / Finance."),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3 text-[12px] text-white/70"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Phase 0 Note"),React.createElement("div",{className:"mt-1"},"This screen exists only to make \u201CAdmin Analytics\u201D discoverable and to prevent duplicated reporting systems. No heavy analytics logic lives here in Phase 0."))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},x?React.createElement("button",{type:"button",onClick:()=>{try{var S=["BRAND","PAYMENTS","SERVICE","MICROSITE","AUTOMATION"],u=String(st.step||"BRAND");if(u==="LIST_ITEM"){setSt(tt=>({...tt,step:"SERVICE"}));return}if(u==="SERVICE_DONE"){setSt(tt=>({...tt,step:"SERVICE"}));return}var $=S.indexOf(u);if($>0){setSt(tt=>({...tt,step:S[$-1]}));return}i&&i()}catch(S){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Back"):null,React.createElement("button",{type:"button",onClick:()=>{try{s&&s()}catch(S){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Close"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Summary widgets"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},"Placeholder summary KPIs (migration target: Reports / Pro Insights)."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"IC Conversions (summary)"),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"Funnel Snapshot (summary)"),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"Governance Metrics"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Deep-links"),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},"Shortcuts (single-owner enforcement):"),React.createElement("div",{className:"mt-3 flex flex-col gap-2"},React.createElement("button",{type:"button",className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85",onClick:()=>{try{window.__fofSetView&&window.__fofSetView("REPORTS")}catch(S){}}},"Open Reports (Exports)"),React.createElement("button",{type:"button",className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85",onClick:()=>{try{window.__fofSetView&&window.__fofSetView("BUSINESS_HUB")}catch(S){}}},"Open Business Growth Hub (Insights)"),React.createElement("button",{type:"button",className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85",onClick:()=>{try{window.__fofSetView&&window.__fofSetView("FINANCE_HUB")}catch(S){}}},"Open Finance Hub (Single owner)")))))),wl=({onBack:i})=>{var[s,x]=React.useState(()=>window.__tax_read()),[S,u]=React.useState(null);React.useEffect(()=>{var fe=B=>{try{var X=(B==null?void 0:B.detail)||{},ne=X.message||X.title||"";if(!ne)return;u({message:ne,kind:X.kind||"info"})}catch(X){}};return window.addEventListener("fof:toast",fe),window.addEventListener("flowofit:toast",fe),()=>{window.removeEventListener("fof:toast",fe),window.removeEventListener("flowofit:toast",fe)}},[]);var $=()=>{var B,X,ne;var fe=window.__tax_write(s);x(fe),u("Saved Tax Configuration");try{(B=window.__fofToast)==null||B.call(window,"Saved Tax Configuration")}catch(W){}try{(ne=(X=window.__fofSharedFoundations)==null?void 0:X.logEvent)==null||ne.call(X,"tax_config_saved",{jurisdictions:(fe.jurisdictions||[]).length})}catch(W){}setTimeout(()=>u(null),1800)},tt=()=>{var fe=`JUR_${Math.random().toString(16).slice(2,6).toUpperCase()}`;x(B=>({...B,jurisdictions:[...B.jurisdictions||[],{id:fe,label:"New Jurisdiction",country:"AE",region:"ALL",taxName:"VAT",ratePct:0}]}))},ue=(fe,B)=>{x(X=>({...X,jurisdictions:(X.jurisdictions||[]).map(ne=>ne.id===fe?{...ne,...B}:ne)}))},Ie=fe=>{confirm("Remove this jurisdiction?")&&x(B=>({...B,jurisdictions:(B.jurisdictions||[]).filter(X=>X.id!==fe)}))};return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Tax Configuration"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Configure VAT/GST/Sales Tax rules + receipt identity. Used by ",React.createElement("span",{className:"font-mono text-white/80"},"BILLING-INVOICES"),", ",React.createElement("span",{className:"font-mono text-white/80"},"OFFLINE-LEDGER"),", and ",React.createElement("span",{className:"font-mono text-white/80"},"TAX-REPORTING"),"."),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},"Appendix C Node: ",React.createElement("span",{className:"font-mono text-white/70"},"TAX-CONFIG"),React.createElement("span",{className:"ml-2 px-2 py-1 rounded-full bg-emerald-500/10 border border-emerald-400/20 text-emerald-100 text-[11px]"},"Phase 3.4 Implemented"))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"\u2190 Back"),React.createElement("button",{onClick:$,className:"px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/15 hover:bg-emerald-500/20 text-[12px] font-extrabold text-emerald-100"},"Save"))),S&&React.createElement("div",{className:"mt-4 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 p-3 text-[12px] text-emerald-100"},S),React.createElement("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 "+(String(density||"").toUpperCase()==="COMPACT"?"p-3":"p-4")},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Business Identity"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Business name"),React.createElement("input",{value:s.businessName,onChange:fe=>x(B=>({...B,businessName:fe.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Country"),React.createElement("input",{value:s.businessCountry,onChange:fe=>x(B=>({...B,businessCountry:fe.target.value.toUpperCase()})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Tax ID"),React.createElement("input",{value:s.taxId,onChange:fe=>x(B=>({...B,taxId:fe.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"}))),React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/70 select-none mt-1"},React.createElement("input",{type:"checkbox",checked:s.enabled!==!1,onChange:fe=>x(B=>({...B,enabled:!!fe.target.checked}))}),"Enable Tax Engine"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4 lg:col-span-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Jurisdictions"),React.createElement("button",{onClick:tt,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10 text-[12px] font-bold"},"+ Add")),React.createElement("div",{className:"mt-3 space-y-2"},(s.jurisdictions||[]).map(fe=>React.createElement("div",{key:fe.id,className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono text-white/50"},fe.id),React.createElement("input",{value:fe.label,onChange:B=>ue(fe.id,{label:B.target.value}),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("button",{onClick:()=>Ie(fe.id),className:"px-3 py-2 rounded-2xl bg-rose-500/10 border border-rose-400/20 text-rose-100 hover:bg-rose-500/15 text-[12px]"},"Remove")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Country"),React.createElement("input",{value:fe.country,onChange:B=>ue(fe.id,{country:B.target.value.toUpperCase()}),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Region"),React.createElement("input",{value:fe.region,onChange:B=>ue(fe.id,{region:B.target.value.toUpperCase()}),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Tax name"),React.createElement("input",{value:fe.taxName,onChange:B=>ue(fe.id,{taxName:B.target.value}),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Rate (%)"),React.createElement("input",{type:"number",value:fe.ratePct,onChange:B=>ue(fe.id,{ratePct:__inv_safeNum(B.target.value,0)}),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"}))))),(s.jurisdictions||[]).length===0&&React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 text-white/60"},"No jurisdictions configured. Add at least one for invoices and reporting."))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4 lg:col-span-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Receipt Settings"),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Footer note"),React.createElement("input",{value:s.receiptNote,onChange:fe=>x(B=>({...B,receiptNote:fe.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none focus:border-white/20"})),React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},"Stored locally: ",React.createElement("span",{className:"font-mono text-white/70"},__tax_lsKey))))))},Gd=({onBack:i})=>{var s=window.__tax_read(),[x,S]=React.useState("ALL"),[u,$]=React.useState("ALL"),[tt,ue]=React.useState(!0),Ie=React.useMemo(()=>{try{var W=typeof Ta=="function"?Ta(__inv_lsKey,"[]"):localStorage.getItem(__inv_lsKey)||"[]",J=JSON.parse(W);return Array.isArray(J)?J:[]}catch(W){return[]}},[]),fe=React.useMemo(()=>__ol_read(),[]),B=React.useMemo(()=>{var W=[],J=z=>W.push(z);return(x==="ALL"||x==="PLATFORM")&&Ie.forEach(z=>{if(tt&&z.status!=="PAID")return;var H=__inv_effectiveTaxRatePct(z,s),Ht=__inv_computeTotals(z.items||[],H),Nt=z.taxJurisdictionId||"AE_VAT";u!=="ALL"&&u!==Nt||J({ts:z.paidAt||z.updatedAt||z.createdAt||Date.now(),date:z.paidAt||z.issuedAt||z.createdAt?String(z.paidAt||z.issuedAt||"").slice(0,10):"",source:"PLATFORM",ref:z.id,client:z.clientName||"",jurisdiction:Nt,taxName:__inv_effectiveTaxName(z,s),taxable:z.taxable!==!1?Ht.subtotal:0,tax:Ht.tax,total:Ht.total,status:z.status||""})}),(x==="ALL"||x==="OFFLINE")&&fe.forEach(z=>{var H=__inv_safeNum(z.amount,0),Ht=z.taxJurisdictionId||"AE_VAT";if(u!=="ALL"&&u!==Ht)return;var Nt=z.taxable===!1?0:z.useTaxConfig?__tax_rateFor(s,Ht):__inv_safeNum(z.taxRatePct,0),U=H*(Nt/100);J({ts:z.createdAt||Date.now(),date:z.dateISO||"",source:"OFFLINE",ref:z.id,client:z.clientName||"",jurisdiction:Ht,taxName:__tax_nameFor(s,Ht),taxable:z.taxable===!1?0:H,tax:U,total:z.taxable===!1?H:H+U,status:"LOGGED"})}),W.sort((z,H)=>(H.ts||0)-(z.ts||0))},[Ie,fe,x,u,tt,s]),X=React.useMemo(()=>{var W=B.reduce((H,Ht)=>H+__inv_safeNum(Ht.taxable,0),0),J=B.reduce((H,Ht)=>H+__inv_safeNum(Ht.tax,0),0),z=B.reduce((H,Ht)=>H+__inv_safeNum(Ht.total,0),0);return{taxable:W,tax:J,total:z}},[B]),ne=W=>{var z,H;var J=B.map(Ht=>({date:Ht.date,source:Ht.source,ref:Ht.ref,client:Ht.client,jurisdiction:Ht.jurisdiction,taxName:Ht.taxName,taxable:Number(__inv_safeNum(Ht.taxable,0)).toFixed(2),tax:Number(__inv_safeNum(Ht.tax,0)).toFixed(2),total:Number(__inv_safeNum(Ht.total,0)).toFixed(2),status:Ht.status}));try{window.dispatchEvent(new CustomEvent("fof:open_export",{detail:{kind:W,title:"Tax_Summary",filename:W==="csv"?"Tax_Summary.csv":"Tax_Summary.pdf",rows:J}}))}catch(Ht){alert("Export system not available in this prototype build.")}try{(H=(z=window.__fofSharedFoundations)==null?void 0:z.logEvent)==null||H.call(z,"tax_reporting_export",{kind:W,rows:J.length,source:x,jurId:u})}catch(Ht){}};return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Tax Summaries & Receipts"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Aggregates ",React.createElement("span",{className:"text-white/85 font-semibold"},"paid invoices")," (platform) and ",React.createElement("span",{className:"text-white/85 font-semibold"},"offline payments"),", split by source + jurisdiction."),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},"Appendix C Node: ",React.createElement("span",{className:"font-mono text-white/70"},"TAX-REPORTING"),React.createElement("span",{className:"ml-2 px-2 py-1 rounded-full bg-emerald-500/10 border border-emerald-400/20 text-emerald-100 text-[11px]"},"Phase 3.4 Implemented"))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"\u2190 Back"),React.createElement("button",{onClick:()=>ne("csv"),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10 text-[12px] font-bold"},"Export CSV"),React.createElement("button",{onClick:()=>ne("pdf"),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10 text-[12px] font-bold"},"Export PDF"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-4 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4 lg:col-span-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Filters"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Source"),React.createElement("select",{value:x,onChange:W=>S(W.target.value),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"PLATFORM"},"Platform (Invoices)"),React.createElement("option",{value:"OFFLINE"},"Offline Ledger"))),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-1"},"Jurisdiction"),React.createElement("select",{value:u,onChange:W=>$(W.target.value),className:"w-full px-3 py-2 rounded-2xl bg-black/30 border border-white/10 text-white/90 outline-none"},React.createElement("option",{value:"ALL"},"All"),(s.jurisdictions||[]).map(W=>React.createElement("option",{key:W.id,value:W.id},W.label)))),React.createElement("div",{className:"flex items-end"},React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/70 select-none"},React.createElement("input",{type:"checkbox",checked:tt,onChange:W=>ue(!!W.target.checked)}),"Only Paid Invoices"))),React.createElement("div",{className:"mt-4 grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-mono text-white/45"},"Taxable"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white"},X.taxable.toFixed(2))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-mono text-white/45"},"Tax"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white"},X.tax.toFixed(2))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] font-mono text-white/45"},"Total"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white"},X.total.toFixed(2)))),React.createElement("div",{className:"mt-4 text-[12px] text-white/55"},"Uses TAX-CONFIG business identity: ",React.createElement("span",{className:"text-white/75 font-semibold"},s.businessName)," (",s.businessCountry,") ",s.taxId?`\u2022 Tax ID ${s.taxId}`:"")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4 lg:col-span-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Receipts"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 leading-relaxed"},"In this prototype, receipts are represented as export rows (CSV/PDF). In production, this page will also provide per-client receipt PDFs."),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"P1_TAX_REPORTING"}}))}catch(W){}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10 text-[12px] font-bold"},"Open Phase-1 Foundation Panel"),React.createElement("button",{onClick:()=>{var W;try{(W=window.__fofOpenFinanceHub)==null||W.call(window,"TAX-CONFIG")}catch(J){}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10 text-[12px] font-bold"},"Edit Tax Config")))),React.createElement("div",{className:"mt-5 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},"Transactions"),React.createElement("div",{className:"text-[11px] font-mono text-white/45"},B.length," rows")),React.createElement("div",{className:"mt-3 overflow-auto rounded-2xl border border-white/10"},React.createElement("table",{className:"min-w-full text-left text-[12px] text-white/75"},React.createElement("thead",{className:"bg-black/40 text-white/60"},React.createElement("tr",null,React.createElement("th",{className:"px-3 py-2"},"Date"),React.createElement("th",{className:"px-3 py-2"},"Source"),React.createElement("th",{className:"px-3 py-2"},"Ref"),React.createElement("th",{className:"px-3 py-2"},"Client"),React.createElement("th",{className:"px-3 py-2"},"Jurisdiction"),React.createElement("th",{className:"px-3 py-2"},"Taxable"),React.createElement("th",{className:"px-3 py-2"},"Tax"),React.createElement("th",{className:"px-3 py-2"},"Total"),React.createElement("th",{className:"px-3 py-2"},"Status"))),React.createElement("tbody",null,B.map((W,J)=>React.createElement("tr",{key:J,className:"border-t border-white/10 hover:bg-white/5"},React.createElement("td",{className:"px-3 py-2 whitespace-nowrap text-white/70"},W.date||"\u2014"),React.createElement("td",{className:"px-3 py-2"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px]"},W.source)),React.createElement("td",{className:"px-3 py-2 font-mono text-white/80"},W.ref),React.createElement("td",{className:"px-3 py-2"},W.client||React.createElement("span",{className:"text-white/35"},"\u2014")),React.createElement("td",{className:"px-3 py-2"},W.jurisdiction),React.createElement("td",{className:"px-3 py-2"},__inv_safeNum(W.taxable,0).toFixed(2)),React.createElement("td",{className:"px-3 py-2"},__inv_safeNum(W.tax,0).toFixed(2)),React.createElement("td",{className:"px-3 py-2 font-semibold"},__inv_safeNum(W.total,0).toFixed(2)),React.createElement("td",{className:"px-3 py-2 text-white/60"},W.status))),B.length===0&&React.createElement("tr",null,React.createElement("td",{colSpan:9,className:"px-3 py-6 text-center text-white/50"},"No rows for the selected filters."))))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Stored locally: invoices ",React.createElement("span",{className:"font-mono"},__inv_lsKey)," \u2022 offline ledger ",React.createElement("span",{className:"font-mono"},__ol_lsKey)," \u2022 tax config ",React.createElement("span",{className:"font-mono"},__tax_lsKey)))))},yd=11,pd="fof.finance.payout_batches.v1",Hd="fof.finance.invoices.v1",sc="fof.finance.offline_ledger.v1",Wd=()=>{var i=Math.random().toString(16).slice(2,6).toUpperCase(),s=String(Date.now()).slice(-6);return`PO-${i}-${s}`},Nd=(i,s)=>{try{var x=Math.abs((s||0)-(i||0));return Math.floor(x/(1e3*60*60*24))}catch(x){return 0}},Yd=(i,s)=>{try{return JSON.parse(i)}catch(x){return s}},ad=i=>{try{var s=typeof Ta=="function"?Ta(i,"[]"):localStorage.getItem(i)||"[]",x=Yd(s,[]);return Array.isArray(x)?x:[]}catch(s){return[]}},oc=(i,s)=>{try{typeof safeWriteLS=="function"?safeWriteLS(i,s):localStorage.setItem(i,JSON.stringify(s||[]))}catch(x){}},Sd=i=>{var s=[i==null?void 0:i.paidAt,i==null?void 0:i.paid_at,i==null?void 0:i.updatedAt,i==null?void 0:i.updated_at,i==null?void 0:i.createdAt,i==null?void 0:i.created_at,i==null?void 0:i.date,i==null?void 0:i.ts];for(var x of s){if(!x)continue;var u=new Date(x).getTime();if(!Number.isNaN(u))return u;if(typeof x=="number"&&x>1e9)return x;if(typeof x=="string"&&/^\d{13}$/.test(x))return Number(x)}return null},_d=(i,s)=>{var x,S,u,$,tt;try{var ue=Array.isArray(i==null?void 0:i.items)?i.items:Array.isArray(i==null?void 0:i.lines)?i.lines:[];var Ie=0;for(var ne of ue){var W=Number((S=(x=ne.qty)!=null?x:ne.quantity)!=null?S:1)||1,J=Number((tt=($=(u=ne.price)!=null?u:ne.amount)!=null?$:ne.unitPrice)!=null?tt:0)||0;Ie+=W*J}!Ie&&(i==null?void 0:i.subtotal)!=null&&(Ie=Number(i.subtotal)||0);var fe=typeof __inv_effectiveTaxRatePct=="function"?__inv_effectiveTaxRatePct(i,s):Number(i==null?void 0:i.taxRatePct)||0,B=(i==null?void 0:i.taxAmount)!=null?Number(i.taxAmount)||0:Ie*(fe/100),X=(i==null?void 0:i.total)!=null?Number(i.total)||0:Ie+B;return{subtotal:Ie,tax:B,total:X}}catch(ue){return{subtotal:0,tax:0,total:0}}},kd=(i,s)=>{var x,S,u,$;try{var tt=Number((S=(x=i==null?void 0:i.amount)!=null?x:i==null?void 0:i.total)!=null?S:0)||0,ue=Number(($=(u=i==null?void 0:i.taxRatePct)!=null?u:i==null?void 0:i.tax_rate_pct)!=null?$:0)||0,fe=(i==null?void 0:i.taxable)!==!1?tt*(ue/100):0;return{subtotal:tt,tax:fe,total:tt}}catch(tt){return{subtotal:0,tax:0,total:0}}},bd=({onBack:i})=>{var s=window.__tax_read?window.__tax_read():null,[x,S]=React.useState(yd),[u,$]=React.useState(!0),[tt,ue]=React.useState(!0),[Ie,fe]=React.useState(""),B=Date.now(),X=React.useMemo(()=>ad(Hd),[]),ne=React.useMemo(()=>ad(sc),[]),W=React.useMemo(()=>{var Nt=[];for(var U of X){var Q=String((U==null?void 0:U.status)||"").toUpperCase();if(tt&&Q!=="PAID")continue;var w=Sd(U);if(!w)continue;var L=Nd(w,B);L<(Number(x)||0)||String((U==null?void 0:U.status)||"").toUpperCase()!=="REFUNDED"&&(U==null?void 0:U.disputed)!==!0&&Nt.push({inv:U,days:L,ms:w})}return Nt.sort((U,Q)=>Q.ms-U.ms)},[X,tt,x,B]),J=React.useMemo(()=>{if(!u)return[];var Nt=[];for(var U of ne){var Q=Sd(U);if(!Q)continue;var w=Nd(Q,B);w<(Number(x)||0)||(U==null?void 0:U.voided)!==!0&&(U==null?void 0:U.refunded)!==!0&&Nt.push({e:U,days:w,ms:Q})}return Nt.sort((U,Q)=>Q.ms-U.ms)},[ne,u,x,B]),z=React.useMemo(()=>{var Nt=0,U=0,Q=0;for(var w of W){var L=_d(w.inv,s);Nt+=L.subtotal,U+=L.tax,Q+=L.total}for(var w of J){var L=kd(w.e,s);Nt+=L.subtotal,U+=L.tax,Q+=L.total}return{subtotal:Nt,tax:U,total:Q}},[W,J,s]),H=()=>{var Nt=Wd(),U={id:Nt,createdAt:new Date().toISOString(),minDays:Number(x)||yd,includeOffline:!!u,onlyPaidInvoices:!!tt,note:Ie||"",counts:{invoices:W.length,offline:J.length},totals:z,items:{invoices:W.map(w=>{var L,ut,ot,ht;return((L=w.inv)==null?void 0:L.id)||((ut=w.inv)==null?void 0:ut.invoiceId)||((ot=w.inv)==null?void 0:ot.number)||((ht=w.inv)==null?void 0:ht.publicId)||null}).filter(Boolean),offline:J.map(w=>{var L,ut,ot;return((L=w.e)==null?void 0:L.id)||((ut=w.e)==null?void 0:ut.paymentId)||((ot=w.e)==null?void 0:ot.ref)||null}).filter(Boolean)}},Q=ad(pd);Q.unshift(U),oc(pd,Q);try{typeof pushEvent=="function"&&pushEvent("payout_job_triggered",U)}catch(w){}try{typeof pushEvent=="function"&&(W.forEach(w=>{var L,ut,ot;return pushEvent("payout_item_included",{batchId:Nt,type:"invoice",id:((L=w.inv)==null?void 0:L.id)||((ut=w.inv)==null?void 0:ut.invoiceId)||((ot=w.inv)==null?void 0:ot.number)||null})}),J.forEach(w=>{var L,ut,ot;return pushEvent("payout_item_included",{batchId:Nt,type:"offline",id:((L=w.e)==null?void 0:L.id)||((ut=w.e)==null?void 0:ut.paymentId)||((ot=w.e)==null?void 0:ot.ref)||null})}))}catch(w){}try{toast&&toast.success&&toast.success(`Payout batch ${Nt} created`)}catch(w){}alert(`Payout batch created:
${Nt}

Invoices: ${W.length}
Offline: ${J.length}
Total: ${bi(z.total||0)}`)},Ht=React.useMemo(()=>ad(pd),[]);return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Payout Job Trigger"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Create payout batches from eligible transactions. Default clearing window is ",React.createElement("span",{className:"font-semibold text-white/80"},"\u2265 11 days"),"."),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},React.createElement("span",{className:"text-white/75 font-semibold"},"Appendix C Node:")," ",React.createElement("span",{className:"font-mono text-white/70"},"PAYOUT-TRIGGER"))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:i,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"\u2190 Back"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-[0.22em] text-white/80"},"Clearing window"),React.createElement("div",{className:"mt-3 flex items-center gap-3"},React.createElement("input",{className:"w-24 px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-white/90",type:"number",min:"0",value:x,onChange:Nt=>S(Nt.target.value)}),React.createElement("div",{className:"text-[12px] text-white/70"},"days (default 11)")),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/75"},React.createElement("input",{type:"checkbox",checked:u,onChange:Nt=>$(Nt.target.checked)}),"Include Offline Ledger"),React.createElement("label",{className:"mt-2 flex items-center gap-2 text-[12px] text-white/75"},React.createElement("input",{type:"checkbox",checked:tt,onChange:Nt=>ue(Nt.target.checked)}),"Only Paid Invoices"),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Batch note (optional)"),React.createElement("input",{className:"w-full px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-white/90",value:Ie,onChange:Nt=>fe(Nt.target.value),placeholder:"e.g., Weekly payout run"})),React.createElement("button",{type:"button",onClick:H,className:"mt-4 w-full px-4 py-3 rounded-2xl bg-emerald-500/20 border border-emerald-400/30 hover:bg-emerald-500/25 text-[12px] font-extrabold uppercase tracking-[0.22em] text-white"},"Run Payout Job"),React.createElement("div",{className:"mt-3 text-[11px] text-white/45 leading-relaxed"},"This prototype stores batches in ",React.createElement("span",{className:"font-mono text-white/65"},pd)," and emits audit events.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4 lg:col-span-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-[0.22em] text-white/80"},"Eligibility preview"),React.createElement("div",{className:"text-[12px] text-white/70"},"Invoices: ",React.createElement("span",{className:"font-semibold text-white/85"},W.length),React.createElement("span",{className:"mx-2 text-white/30"},"\u2022"),"Offline: ",React.createElement("span",{className:"font-semibold text-white/85"},J.length))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Subtotal"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},bi(z.subtotal||0))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Tax"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},bi(z.tax||0))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Total"),React.createElement("div",{className:"text-[16px] font-extrabold text-white"},bi(z.total||0)))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-semibold text-white/75 mb-2"},"Eligible Invoices"),React.createElement("div",{className:"max-h-[240px] overflow-auto space-y-2"},W.length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"No eligible invoices for current window."):W.map(({inv:Nt,days:U},Q)=>React.createElement("div",{key:Q,className:"flex items-center justify-between gap-2 text-[12px]"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"font-mono text-white/85 truncate"},(Nt==null?void 0:Nt.id)||(Nt==null?void 0:Nt.invoiceId)||(Nt==null?void 0:Nt.number)||"(invoice)"),React.createElement("div",{className:"text-[11px] text-white/45"},U," days old \u2022 ",String((Nt==null?void 0:Nt.status)||"\u2014"))),React.createElement("div",{className:"font-semibold text-white/80"},bi(_d(Nt,s).total||0)))))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-semibold text-white/75 mb-2"},"Eligible Offline Ledger"),React.createElement("div",{className:"max-h-[240px] overflow-auto space-y-2"},J.length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"No eligible offline entries for current window."):J.map(({e:Nt,days:U},Q)=>React.createElement("div",{key:Q,className:"flex items-center justify-between gap-2 text-[12px]"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"font-mono text-white/85 truncate"},(Nt==null?void 0:Nt.id)||(Nt==null?void 0:Nt.paymentId)||(Nt==null?void 0:Nt.ref)||"(offline)"),React.createElement("div",{className:"text-[11px] text-white/45"},U," days old")),React.createElement("div",{className:"font-semibold text-white/80"},bi(kd(Nt,s).total||0))))))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/3 p-3"},React.createElement("div",{className:"text-[11px] font-semibold text-white/75 mb-2"},"Recent payout batches"),React.createElement("div",{className:"space-y-2 max-h-[180px] overflow-auto"},Ht.length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"No payout batches created yet."):Ht.slice(0,10).map((Nt,U)=>{var Q,w,L;return React.createElement("div",{key:U,className:"flex items-center justify-between gap-3 text-[12px]"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"font-mono text-white/85 truncate"},Nt.id),React.createElement("div",{className:"text-[11px] text-white/45"},Nt.createdAt," \u2022 inv ",((Q=Nt==null?void 0:Nt.counts)==null?void 0:Q.invoices)||0," \u2022 off ",((w=Nt==null?void 0:Nt.counts)==null?void 0:w.offline)||0)),React.createElement("div",{className:"font-semibold text-white/80"},bi(((L=Nt==null?void 0:Nt.totals)==null?void 0:L.total)||0)))})))))))};try{window.__FOF_PayoutTriggerPage=bd}catch(i){}var Kl="fof.finance.waivers.templates.v1",id="fof.finance.waivers.assignments.v1",Kd="fof.finance.credits.packs.v1",jd="fof.finance.credits.ledger.v1",Ed="fof.finance.group_classes.types.v1",Vd="fof.finance.group_classes.schedule.v1",ee="fof.finance.group_classes.enrollments.v1",ge=(i,s=[])=>{try{var x=typeof Ta=="function"?Ta(i,JSON.stringify(s)):localStorage.getItem(i)||JSON.stringify(s),S=JSON.parse(x);return Array.isArray(S)?S:s}catch(x){return s}},bt=(i,s)=>{try{var x=JSON.stringify(Array.isArray(s)?s:[]);typeof ti=="function"?ti(i,x):localStorage.setItem(i,x)}catch(x){}},rt=(i="ID")=>`${i}-${Math.random().toString(16).slice(2,6).toUpperCase()}-${String(Date.now()).slice(-6)}`,Xt=({onBack:i})=>{var[s,x]=React.useState(()=>ge(Kl,[])),[S,u]=React.useState(null);React.useEffect(()=>{bt(Kl,s)},[s]);var $=ue=>{x(Ie=>Ie.find(X=>X.id===ue.id)?Ie.map(X=>X.id===ue.id?ue:X):[ue,...Ie])},tt=ue=>x(Ie=>Ie.filter(fe=>fe.id!==ue));return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold"},"Waiver Templates"),React.createElement("div",{className:"mt-1 text-[13px] text-white/65"},"Create and version waiver/contract templates (assignment happens in WAIVERS-ASSIGN).")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Back"),React.createElement("button",{onClick:()=>u({id:rt("WVT"),title:"New Waiver",version:"v1.0",active:!0,body:"Paste waiver text here\u2026",updatedAt:new Date().toISOString()}),className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"New Template"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3"},s.length===0&&React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4 text-white/70 text-[13px]"},"No templates yet. Create your first waiver template."),s.map(ue=>React.createElement("div",{key:ue.id,className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono text-white/55"},ue.id),React.createElement("div",{className:"mt-1 text-[15px] font-extrabold text-white/90"},ue.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Version: ",React.createElement("span",{className:"font-mono"},ue.version||"v1.0")),React.createElement("div",{className:"mt-2 text-[12px] text-white/60 line-clamp-3"},ue.body||"")),React.createElement("div",{className:"flex flex-col items-end gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-full text-[11px] border "+(ue.active?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":"bg-white/5 border-white/10 text-white/60")},ue.active?"Active":"Inactive"),React.createElement("button",{onClick:()=>u(ue),className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-[12px]"},"Edit"),React.createElement("button",{onClick:()=>tt(ue.id),className:"px-2 py-1 rounded-xl bg-rose-500/10 border border-rose-400/20 text-[12px] text-rose-200"},"Delete")))))),S&&React.createElement(lt,{value:S,onClose:()=>u(null),onSave:ue=>{$(ue),u(null)}}))},lt=({value:i,onClose:s,onSave:x})=>{var[S,u]=React.useState(i);return React.useEffect(()=>u(i),[i==null?void 0:i.id]),React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[70] flex items-end sm:items-center justify-center bg-black/60 p-3"},React.createElement("div",{className:"w-full max-w-3xl rounded-3xl border border-white/12 bg-zinc-950 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Edit Template"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white/90"},S.id)),React.createElement("button",{onClick:s,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Close")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Title"),React.createElement("input",{value:S.title||"",onChange:$=>u({...S,title:$.target.value}),className:"mt-2 w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-[13px] outline-none"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Version"),React.createElement("input",{value:S.version||"",onChange:$=>u({...S,version:$.target.value}),className:"mt-2 w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-[13px] outline-none"}),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!S.active,onChange:$=>u({...S,active:$.target.checked})}),"Active template"))),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Body"),React.createElement("textarea",{value:S.body||"",onChange:$=>u({...S,body:$.target.value}),rows:10,className:"mt-2 w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-[13px] outline-none"})),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{onClick:s,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Cancel"),React.createElement("button",{onClick:()=>x({...S,updatedAt:new Date().toISOString()}),className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Save"))))},mt=({onBack:i})=>{var B;var[s]=React.useState(()=>ge(Kl,[])),[x,S]=React.useState(()=>ge(id,[])),[u,$]=React.useState({clientName:"",clientEmail:"",templateId:((B=s[0])==null?void 0:B.id)||"",dueISO:"",status:"SENT"});React.useEffect(()=>{bt(id,x)},[x]);var tt=()=>{var W;if(!u.clientName||!u.templateId)return;var X=s.find(J=>J.id===u.templateId),ne={id:rt("WVA"),clientName:u.clientName,clientEmail:u.clientEmail,templateId:u.templateId,templateTitle:(X==null?void 0:X.title)||"Waiver",status:u.status||"SENT",sentAt:new Date().toISOString(),dueISO:u.dueISO||"",signedAt:""};S(J=>[ne,...J]),$({clientName:"",clientEmail:"",templateId:((W=s[0])==null?void 0:W.id)||"",dueISO:"",status:"SENT"})},ue=X=>S(ne=>ne.map(W=>W.id===X?{...W,status:"SIGNED",signedAt:new Date().toISOString()}:W)),Ie=X=>S(ne=>ne.map(W=>W.id===X?{...W,status:"VOID"}:W)),fe=X=>S(ne=>ne.filter(W=>W.id!==X));return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold"},"Waiver Assignment Tracking"),React.createElement("div",{className:"mt-1 text-[13px] text-white/65"},"Assign templates to clients and track status (sent/signed/void).")),React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Back")),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"New assignment"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2"},React.createElement("input",{value:u.clientName,onChange:X=>$({...u,clientName:X.target.value}),placeholder:"Client name",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("input",{value:u.clientEmail,onChange:X=>$({...u,clientEmail:X.target.value}),placeholder:"Email (optional)",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("select",{value:u.templateId,onChange:X=>$({...u,templateId:X.target.value}),className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},s.length===0?React.createElement("option",{value:""},"No templates"):s.map(X=>React.createElement("option",{key:X.id,value:X.id},X.title," (",X.version||"v1.0",")"))),React.createElement("button",{onClick:tt,className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Assign")),React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{value:u.dueISO,onChange:X=>$({...u,dueISO:X.target.value}),placeholder:"Due date (YYYY-MM-DD) optional",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("select",{value:u.status,onChange:X=>$({...u,status:X.target.value}),className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},React.createElement("option",{value:"SENT"},"Sent"),React.createElement("option",{value:"PENDING"},"Pending"),React.createElement("option",{value:"SIGNED"},"Signed")),React.createElement("div",{className:"text-[12px] text-white/55 flex items-center"},"Templates are managed in ",React.createElement("span",{className:"ml-1 font-mono text-white/70"},"WAIVERS-TEMPLATES"),"."))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Assignments"),React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",{className:"text-white/60"},React.createElement("tr",{className:"border-b border-white/10"},React.createElement("th",{className:"text-left py-2 pr-2"},"ID"),React.createElement("th",{className:"text-left py-2 pr-2"},"Client"),React.createElement("th",{className:"text-left py-2 pr-2"},"Template"),React.createElement("th",{className:"text-left py-2 pr-2"},"Status"),React.createElement("th",{className:"text-left py-2 pr-2"},"Sent"),React.createElement("th",{className:"text-left py-2 pr-2"},"Signed"),React.createElement("th",{className:"text-right py-2"},"Actions"))),React.createElement("tbody",{className:"text-white/80"},x.length===0&&React.createElement("tr",null,React.createElement("td",{colSpan:"7",className:"py-3 text-white/60"},"No assignments yet.")),x.map(X=>React.createElement("tr",{key:X.id,className:"border-b border-white/5"},React.createElement("td",{className:"py-2 pr-2 font-mono text-white/65"},X.id),React.createElement("td",{className:"py-2 pr-2"},X.clientName,X.clientEmail?React.createElement("span",{className:"text-white/50"}," \xB7 ",X.clientEmail):null),React.createElement("td",{className:"py-2 pr-2"},X.templateTitle),React.createElement("td",{className:"py-2 pr-2"},React.createElement("span",{className:"px-2 py-1 rounded-full text-[11px] border "+(X.status==="SIGNED"?"bg-emerald-500/10 border-emerald-400/20 text-emerald-200":X.status==="VOID"?"bg-rose-500/10 border-rose-400/20 text-rose-200":"bg-white/5 border-white/10 text-white/70")},X.status)),React.createElement("td",{className:"py-2 pr-2 text-white/60"},(X.sentAt||"").slice(0,10)),React.createElement("td",{className:"py-2 pr-2 text-white/60"},(X.signedAt||"").slice(0,10)||"\u2014"),React.createElement("td",{className:"py-2 text-right"},React.createElement("div",{className:"inline-flex gap-2"},React.createElement("button",{onClick:()=>ue(X.id),className:"px-2 py-1 rounded-xl bg-emerald-500/10 border border-emerald-400/20 text-emerald-200"},"Mark Signed"),React.createElement("button",{onClick:()=>Ie(X.id),className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-white/75"},"Void"),React.createElement("button",{onClick:()=>fe(X.id),className:"px-2 py-1 rounded-xl bg-rose-500/10 border border-rose-400/20 text-rose-200"},"Delete"))))))))))},kt=({onBack:i})=>{var W;var[s,x]=React.useState(()=>ge(Kd,[])),[S,u]=React.useState(()=>ge(jd,[])),[$,tt]=React.useState({name:"10-Session Pack",credits:10,price:500,expiryDays:90,active:!0}),[ue,Ie]=React.useState({clientName:"",packId:((W=s[0])==null?void 0:W.id)||"",qty:1,method:"ONLINE",status:"PAID"});React.useEffect(()=>{bt(Kd,s)},[s]),React.useEffect(()=>{bt(jd,S)},[S]);var fe=()=>{if(!$.name)return;var J={id:rt("CRP"),...$,createdAt:new Date().toISOString()};x(z=>[J,...z]),tt({name:"",credits:10,price:0,expiryDays:90,active:!0}),ue.packId||Ie(z=>({...z,packId:J.id}))},B=J=>x(z=>z.filter(H=>H.id!==J)),X=()=>{if(!ue.clientName||!ue.packId)return;var J=s.find(U=>U.id===ue.packId),z=Number(ue.qty||1),H=Number((J==null?void 0:J.credits)||0)*z,Ht=Number((J==null?void 0:J.price)||0)*z,Nt={id:rt("CRL"),clientName:ue.clientName,packId:ue.packId,packName:(J==null?void 0:J.name)||"Pack",qty:z,credits:H,amount:Ht,method:ue.method,status:ue.status,at:new Date().toISOString()};u(U=>[Nt,...U]),Ie({clientName:"",packId:ue.packId,qty:1,method:"ONLINE",status:"PAID"})},ne=React.useMemo(()=>{var J={};return S.filter(z=>z.status==="PAID").forEach(z=>{J[z.clientName]=(J[z.clientName]||0)+(Number(z.credits)||0)}),Object.entries(J).sort((z,H)=>H[1]-z[1])},[S]);return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold"},"Credit Packs"),React.createElement("div",{className:"mt-1 text-[13px] text-white/65"},"Define packs and log purchases (consumption tracking can be extended later).")),React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Back")),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4 lg:col-span-2"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Packs"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-5 gap-2"},React.createElement("input",{value:$.name,onChange:J=>tt({...$,name:J.target.value}),placeholder:"Pack name",className:"md:col-span-2 bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("input",{value:$.credits,onChange:J=>tt({...$,credits:J.target.value}),placeholder:"Credits",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("input",{value:$.price,onChange:J=>tt({...$,price:J.target.value}),placeholder:"Price",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("button",{onClick:fe,className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Add")),React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",{className:"text-white/60"},React.createElement("tr",{className:"border-b border-white/10"},React.createElement("th",{className:"text-left py-2 pr-2"},"ID"),React.createElement("th",{className:"text-left py-2 pr-2"},"Name"),React.createElement("th",{className:"text-right py-2 pr-2"},"Credits"),React.createElement("th",{className:"text-right py-2 pr-2"},"Price"),React.createElement("th",{className:"text-right py-2"},"Actions"))),React.createElement("tbody",{className:"text-white/80"},s.length===0&&React.createElement("tr",null,React.createElement("td",{colSpan:"5",className:"py-3 text-white/60"},"No packs yet.")),s.map(J=>React.createElement("tr",{key:J.id,className:"border-b border-white/5"},React.createElement("td",{className:"py-2 pr-2 font-mono text-white/65"},J.id),React.createElement("td",{className:"py-2 pr-2"},J.name),React.createElement("td",{className:"py-2 pr-2 text-right"},J.credits),React.createElement("td",{className:"py-2 pr-2 text-right"},bi?bi(J.price):String(J.price)),React.createElement("td",{className:"py-2 text-right"},React.createElement("button",{onClick:()=>B(J.id),className:"px-2 py-1 rounded-xl bg-rose-500/10 border border-rose-400/20 text-rose-200"},"Delete")))))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Balances"),React.createElement("div",{className:"mt-3 space-y-2"},ne.length===0&&React.createElement("div",{className:"text-[12px] text-white/60"},"No paid credits yet."),ne.map(([J,z])=>React.createElement("div",{key:J,className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"text-[12px] text-white/85"},J),React.createElement("div",{className:"text-[12px] font-mono text-white/70"},z)))))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Log purchase"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-2"},React.createElement("input",{value:ue.clientName,onChange:J=>Ie({...ue,clientName:J.target.value}),placeholder:"Client name",className:"md:col-span-2 bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("select",{value:ue.packId,onChange:J=>Ie({...ue,packId:J.target.value}),className:"md:col-span-2 bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},s.length===0?React.createElement("option",{value:""},"No packs"):s.map(J=>React.createElement("option",{key:J.id,value:J.id},J.name))),React.createElement("input",{value:ue.qty,onChange:J=>Ie({...ue,qty:J.target.value}),placeholder:"Qty",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("button",{onClick:X,className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Log")),React.createElement("div",{className:"mt-3 overflow-x-auto"},React.createElement("table",{className:"w-full text-[12px]"},React.createElement("thead",{className:"text-white/60"},React.createElement("tr",{className:"border-b border-white/10"},React.createElement("th",{className:"text-left py-2 pr-2"},"ID"),React.createElement("th",{className:"text-left py-2 pr-2"},"Client"),React.createElement("th",{className:"text-left py-2 pr-2"},"Pack"),React.createElement("th",{className:"text-right py-2 pr-2"},"Credits"),React.createElement("th",{className:"text-right py-2 pr-2"},"Amount"),React.createElement("th",{className:"text-left py-2 pr-2"},"Method"),React.createElement("th",{className:"text-left py-2 pr-2"},"Status"),React.createElement("th",{className:"text-left py-2"},"At"))),React.createElement("tbody",{className:"text-white/80"},S.length===0&&React.createElement("tr",null,React.createElement("td",{colSpan:"8",className:"py-3 text-white/60"},"No ledger entries yet.")),S.map(J=>React.createElement("tr",{key:J.id,className:"border-b border-white/5"},React.createElement("td",{className:"py-2 pr-2 font-mono text-white/65"},J.id),React.createElement("td",{className:"py-2 pr-2"},J.clientName),React.createElement("td",{className:"py-2 pr-2"},J.packName," \xD7 ",J.qty),React.createElement("td",{className:"py-2 pr-2 text-right font-mono"},J.credits),React.createElement("td",{className:"py-2 pr-2 text-right"},bi?bi(J.amount):String(J.amount)),React.createElement("td",{className:"py-2 pr-2"},J.method),React.createElement("td",{className:"py-2 pr-2"},J.status),React.createElement("td",{className:"py-2 text-white/60"},(J.at||"").slice(0,10)))))))))},Ft=({onBack:i})=>{var Ht,Nt;var[s,x]=React.useState(()=>ge(Ed,[])),[S,u]=React.useState(()=>ge(Vd,[])),[$,tt]=React.useState(()=>ge(ee,[])),[ue,Ie]=React.useState({name:"HIIT Group",price:50,capacity:12,active:!0}),[fe,B]=React.useState({typeId:((Ht=s[0])==null?void 0:Ht.id)||"",dateISO:"",time:"18:00"}),[X,ne]=React.useState({schedId:((Nt=S[0])==null?void 0:Nt.id)||"",clientName:"",status:"PAID"});React.useEffect(()=>{bt(Ed,s)},[s]),React.useEffect(()=>{bt(Vd,S)},[S]),React.useEffect(()=>{bt(ee,$)},[$]);var W=()=>{if(!ue.name)return;var U={id:rt("GCT"),...ue,createdAt:new Date().toISOString()};x(Q=>[U,...Q]),Ie({name:"",price:0,capacity:12,active:!0}),fe.typeId||B(Q=>({...Q,typeId:U.id}))},J=()=>{if(!fe.typeId||!fe.dateISO)return;var U=s.find(w=>w.id===fe.typeId),Q={id:rt("GCS"),typeId:fe.typeId,typeName:(U==null?void 0:U.name)||"Class",dateISO:fe.dateISO,time:fe.time||"18:00",capacity:Number((U==null?void 0:U.capacity)||0),price:Number((U==null?void 0:U.price)||0),createdAt:new Date().toISOString()};u(w=>[Q,...w]),B({typeId:fe.typeId,dateISO:"",time:"18:00"}),X.schedId||ne(w=>({...w,schedId:Q.id}))},z=()=>{if(!X.schedId||!X.clientName)return;var U=S.find(w=>w.id===X.schedId),Q={id:rt("GCE"),schedId:X.schedId,className:(U==null?void 0:U.typeName)||"Class",when:`${(U==null?void 0:U.dateISO)||""} ${(U==null?void 0:U.time)||""}`.trim(),clientName:X.clientName,amount:Number((U==null?void 0:U.price)||0),status:X.status||"PAID",at:new Date().toISOString()};tt(w=>[Q,...w]),ne({schedId:X.schedId,clientName:"",status:"PAID"})},H=React.useMemo(()=>{var U={};return $.forEach(Q=>{U[Q.schedId]=(U[Q.schedId]||0)+1}),U},[$]);return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold"},"Group Class Scheduling"),React.createElement("div",{className:"mt-1 text-[13px] text-white/65"},"Define class types, schedule sessions, and log enrollments.")),React.createElement("button",{onClick:i,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[13px]"},"Back")),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Class types"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("input",{value:ue.name,onChange:U=>Ie({...ue,name:U.target.value}),placeholder:"Class name",className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{value:ue.price,onChange:U=>Ie({...ue,price:U.target.value}),placeholder:"Price",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("input",{value:ue.capacity,onChange:U=>Ie({...ue,capacity:U.target.value}),placeholder:"Capacity",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"})),React.createElement("button",{onClick:W,className:"w-full px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Add Type")),React.createElement("div",{className:"mt-3 space-y-2"},s.length===0&&React.createElement("div",{className:"text-[12px] text-white/60"},"No class types yet."),s.map(U=>React.createElement("div",{key:U.id,className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85"},U.name),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Cap ",U.capacity," \xB7 ",bi?bi(U.price):String(U.price)),React.createElement("div",{className:"mt-1 text-[11px] font-mono text-white/55"},U.id))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Schedule session"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("select",{value:fe.typeId,onChange:U=>B({...fe,typeId:U.target.value}),className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},s.length===0?React.createElement("option",{value:""},"No types"):s.map(U=>React.createElement("option",{key:U.id,value:U.id},U.name))),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{value:fe.dateISO,onChange:U=>B({...fe,dateISO:U.target.value}),placeholder:"YYYY-MM-DD",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("input",{value:fe.time,onChange:U=>B({...fe,time:U.target.value}),placeholder:"HH:MM",className:"bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"})),React.createElement("button",{onClick:J,className:"w-full px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Add Session")),React.createElement("div",{className:"mt-3 space-y-2"},S.length===0&&React.createElement("div",{className:"text-[12px] text-white/60"},"No sessions yet."),S.slice(0,10).map(U=>React.createElement("div",{key:U.id,className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85"},U.typeName),React.createElement("div",{className:"text-[12px] text-white/70"},H[U.id]||0,"/",U.capacity)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},U.dateISO," \xB7 ",U.time," \xB7 ",bi?bi(U.price):String(U.price)),React.createElement("div",{className:"mt-1 text-[11px] font-mono text-white/55"},U.id))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-black/20 p-4"},React.createElement("div",{className:"text-[13px] font-semibold text-white/85"},"Enrollment"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("select",{value:X.schedId,onChange:U=>ne({...X,schedId:U.target.value}),className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},S.length===0?React.createElement("option",{value:""},"No sessions"):S.map(U=>React.createElement("option",{key:U.id,value:U.id},U.typeName," \xB7 ",U.dateISO," ",U.time))),React.createElement("input",{value:X.clientName,onChange:U=>ne({...X,clientName:U.target.value}),placeholder:"Client name",className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"}),React.createElement("select",{value:X.status,onChange:U=>ne({...X,status:U.target.value}),className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-[13px] outline-none"},React.createElement("option",{value:"PAID"},"Paid"),React.createElement("option",{value:"PENDING"},"Pending"),React.createElement("option",{value:"REFUNDED"},"Refunded")),React.createElement("button",{onClick:z,className:"w-full px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-[13px] font-semibold"},"Enroll")),React.createElement("div",{className:"mt-3 space-y-2 max-h-[340px] overflow-auto pr-1"},$.length===0&&React.createElement("div",{className:"text-[12px] text-white/60"},"No enrollments yet."),$.map(U=>React.createElement("div",{key:U.id,className:"rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85"},U.clientName),React.createElement("div",{className:"text-[12px] text-white/70"},bi?bi(U.amount):String(U.amount))),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},U.className," \xB7 ",U.when),React.createElement("div",{className:"mt-1 text-[11px] font-mono text-white/55"},U.id," \xB7 ",U.status)))))))};try{window.__FOF_WaiverTemplatesPage=Xt,window.__FOF_WaiverAssignPage=mt,window.__FOF_CreditsPage=kt,window.__FOF_GroupClassesPage=Ft}catch(i){}var Rt=({onHome:i})=>{var s=Pn(),x=window.useFoFGenerate?window.useFoFGenerate("FINANCE_HUB",{dateRange:s==null?void 0:s.dateRange,filters:s==null?void 0:s.filters,context:{panel:"FH-ENTRY"}}):{status:"idle",rows:null,error:null,generate:async()=>null,clear:()=>{}},[S,u]=React.useState(null),[$,tt]=React.useState(!1),[ue,Ie]=React.useState(null);React.useEffect(()=>{try{window.__fofOpenFinanceHub=(vt,Ge={})=>{try{localStorage.setItem("fof.finance.hub.target.v1",JSON.stringify({page:vt,payload:Ge,ts:Date.now()}))}catch($e){}try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"FINANCE_HUB"}}))}catch($e){}}}catch(vt){}},[]),React.useEffect(()=>{var vt;try{var Ge=localStorage.getItem("fof.finance.hub.target.v1");if(!Ge)return;var $e=JSON.parse(Ge);if(!$e||!$e.page)return;localStorage.removeItem("fof.finance.hub.target.v1"),u($e.page),s==null||s.logEvent("finance_deeplink_open",{page:$e.page}),(vt=$e==null?void 0:$e.payload)!=null&&vt.openOfflineModal&&(Ie($e.payload||null),tt(!0))}catch(Ge){}},[s]);var fe={"BILLING-SUBSCRIPTIONS":{label:"Subscription Management",blurb:"Plans, subscribers, renewals, status.",inputs:["Plans & pricing","Subscribers","Renewal cadence","Payment status"],outputs:["Active subscriptions","Renewal/cancel events","MRR-ready state"],deps:["BILLING-INVOICES","CANCELLATION","DUNNING (hooks)"],next:"Phase 3.2"},"BILLING-INVOICES":{label:"Invoice Generation & Tracking",blurb:"Create, send, track invoices + receipts.",inputs:["Client","Line items","Due date","Tax rules (optional)","Payment method"],outputs:["Invoices","Receipts","Exportable ledger rows"],deps:["TAX-CONFIG (optional)","OFFLINE-LEDGER (optional)","TAX-REPORTING"],next:"Phase 3.2"},"BILLING-PROMOS":{label:"Coupons / Bundles / Promotions",blurb:"Codes, bundles, eligibility windows.",inputs:["Promo rules","Eligibility","Start/end window"],outputs:["Discount application","Redemptions","Attribution hooks"],deps:["BILLING-SUBSCRIPTIONS","BILLING-INVOICES"],next:"Phase 3.3"},DUNNING:{label:"Overdue & Dunning Routing",blurb:"Overdue tracking + reminders/escalation.",inputs:["Invoice status","Due dates","Retry rules (future)","Messaging rules (future)"],outputs:["Overdue list","Dunning states","Escalation flags"],deps:["BILLING-INVOICES","CANCELLATION"],next:"Phase 3.4"},CANCELLATION:{label:"Subscription Cancellation Flow",blurb:"Pause/cancel, end-of-term, churn hooks.",inputs:["Subscriber","Plan","Effective date","Reason (optional)"],outputs:["Cancellation status","End-of-term date","Churn events"],deps:["BILLING-SUBSCRIPTIONS","DUNNING (optional)"],next:"Phase 3.5"},"TAX-CONFIG":{label:"Tax Configuration",blurb:"VAT/GST rules, rates, receipts templates.",inputs:["Jurisdiction rules","Rates","Business identity","Receipt settings"],outputs:["Tax config","Receipt templates","Compliance settings"],deps:["BILLING-INVOICES"],next:"Phase 3.6"},"TAX-REPORTING":{label:"Tax Summaries & Receipts",blurb:"Tax totals + receipt exports by date range.",inputs:["Paid invoices","Offline ledger","Tax config","Date range"],outputs:["Tax summaries","Receipts export","Jurisdiction totals"],deps:["(Phase 1) Unified Date Range","OFFLINE-LEDGER","BILLING-INVOICES"],next:"Deep-link (P1) / Phase 3.7"},"PAYOUT-TRIGGER":{label:"Payout Job Trigger",blurb:"Eligible payouts (\u226511 days default, configurable).",inputs:["Clearing window","Eligible transactions","Approvals (future)"],outputs:["Payout batches","Payout status","Audit trail"],deps:["BILLING-INVOICES","OFFLINE-LEDGER (optional)"],next:"Deep-link (P1) / Phase 3.8"},"WAIVERS-TEMPLATES":{label:"Waiver Templates",blurb:"Create/manage waiver/contract templates.",inputs:["Template text","Versioning","Signature fields"],outputs:["Templates","Template versions"],deps:["WAIVERS-ASSIGN"],next:"Phase 3.9"},"WAIVERS-ASSIGN":{label:"Waiver Assignment Tracking",blurb:"Assign + track signed/pending status.",inputs:["Client","Template","Due date (optional)"],outputs:["Assignment status","Audit entries"],deps:["WAIVERS-TEMPLATES"],next:"Phase 3.10"},CREDITS:{label:"Credit Packs",blurb:"Sell and manage session credits.",inputs:["Pack definition","Price","Validity rules"],outputs:["Credit balances","Redemption events"],deps:["BILLING-INVOICES (optional)"],next:"Phase 3.11"},"GROUP-CLASSES":{label:"Group Class Scheduling",blurb:"Schedule classes + booking hooks.",inputs:["Schedule","Capacity","Pricing"],outputs:["Bookings","Attendance","Revenue hooks"],deps:["CREDITS (optional)","BILLING-INVOICES (future)"],next:"Phase 3.12"},"OFFLINE-LEDGER":{label:"Offline Payment Logging",blurb:"Cash/manual payments + evidence + audit.",inputs:["Client","Amount","Method","Date","Evidence (optional)"],outputs:["Immutable ledger entries","Reconciliation hooks","Tax separation"],deps:["TAX-REPORTING","BILLING-INVOICES (future)"],next:"Phase 3.13"}},B=[{title:"Billing",items:["BILLING-SUBSCRIPTIONS","BILLING-INVOICES","BILLING-PROMOS","DUNNING","CANCELLATION"]},{title:"Tax",items:["TAX-CONFIG","TAX-REPORTING"]},{title:"Payouts",items:["PAYOUT-TRIGGER"]},{title:"Legal",items:["WAIVERS-TEMPLATES","WAIVERS-ASSIGN"]},{title:"Commerce",items:["CREDITS","GROUP-CLASSES"]},{title:"Payments",items:["OFFLINE-LEDGER"]}],X=vt=>{try{if(vt==="TAX-REPORTING"){window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"P1_TAX_REPORTING"}})),s==null||s.logEvent("finance_nav",{to:"P1_TAX_REPORTING"});return}if(vt==="PAYOUT-TRIGGER"){window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"P1_PAYOUT_TRIGGER"}})),s==null||s.logEvent("finance_nav",{to:"P1_PAYOUT_TRIGGER"});return}u(vt),s==null||s.logEvent("finance_page_open",{page:vt});try{window.scrollTo({top:0,behavior:"smooth"})}catch(Ge){}}catch(Ge){}},ne=vt=>{try{localStorage.setItem("fof.finance.invoices.openId",String(vt||""))}catch(Ge){}u("BILLING-INVOICES");try{window.scrollTo({top:0,behavior:"smooth"})}catch(Ge){}},W=({id:vt})=>{var Ge=fe[vt]||{label:vt,blurb:"",inputs:[],outputs:[],deps:[],next:"Phase 3"};return React.createElement("button",{type:"button",onClick:()=>X(vt),className:"text-left rounded-3xl border border-white/12 bg-black/20 hover:bg-black/30 p-4 transition relative overflow-hidden"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-white/65"},vt),React.createElement("div",{className:"mt-1 text-[14px] font-extrabold text-white/90 leading-snug"},Ge.label),React.createElement("div",{className:"mt-2 text-[12px] text-white/65 leading-relaxed"},Ge.blurb),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"Stub"),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},Ge.next)))},J="fof.finance.invoices.v1",z=()=>{var vt=new Date,Ge=$e=>String($e).padStart(2,"0");return`${vt.getFullYear()}-${Ge(vt.getMonth()+1)}-${Ge(vt.getDate())}`},H=(vt,Ge=0)=>{var $e=Number(vt);return isFinite($e)?$e:Ge},Ht=(vt=[],Ge=0)=>{var $e=vt.reduce((xi,rs)=>xi+H(rs.qty,0)*H(rs.price,0),0),Xa=$e*(H(Ge,0)/100),mi=$e+Xa;return{subtotal:$e,tax:Xa,total:mi}},Nt=()=>`INV-${Math.random().toString(16).slice(2,6).toUpperCase()}-${String(Date.now()).slice(-6)}`,U=(vt,Ge)=>{try{if(!vt||!(vt.taxable!==!1))return 0;if(vt.useTaxConfig){var Xa=vt.taxJurisdictionId||"AE_VAT";return ha(Ge||window.__tax_read(),Xa)}return H(vt.taxRatePct,0)}catch($e){return H(vt==null?void 0:vt.taxRatePct,0)}},Q=(vt,Ge)=>{try{var $e=(vt==null?void 0:vt.taxJurisdictionId)||"AE_VAT";return K(Ge||window.__tax_read(),$e)}catch($e){return"Tax"}},w=(vt,Ge=!1)=>{var $e="px-2 py-1 rounded-full text-[11px] border ";return vt==="PAID"?React.createElement("span",{className:$e+"bg-emerald-500/10 border-emerald-400/20 text-emerald-200"},"Paid"):vt==="VOID"?React.createElement("span",{className:$e+"bg-zinc-500/10 border-white/10 text-white/60"},"Void"):vt==="DRAFT"?React.createElement("span",{className:$e+"bg-white/5 border-white/10 text-white/70"},"Draft"):Ge?React.createElement("span",{className:$e+"bg-rose-500/10 border-rose-400/20 text-rose-200"},"Overdue"):React.createElement("span",{className:$e+"bg-cyan-500/10 border-cyan-400/20 text-cyan-200"},"Sent")},L="fof.finance.dunning.v1",ut=()=>{try{var vt=typeof Ta=="function"?Ta(L,"{}"):localStorage.getItem(L)||"{}",Ge=JSON.parse(vt);return Ge&&typeof Ge=="object"?Ge:{}}catch(vt){return{}}},ot=vt=>{try{typeof ti=="function"?ti(L,JSON.stringify(vt)):localStorage.setItem(L,JSON.stringify(vt))}catch(Ge){}},ht="fof.finance.offline_ledger.v1",ba=()=>{try{var vt=typeof Ta=="function"?Ta(ht,"[]"):localStorage.getItem(ht)||"[]",Ge=JSON.parse(vt);return Array.isArray(Ge)?Ge:[]}catch(vt){return[]}},et=vt=>{try{typeof ti=="function"?ti(ht,JSON.stringify(vt)):localStorage.setItem(ht,JSON.stringify(vt))}catch(Ge){}},At=vt=>{var Ge=ba(),$e=[vt,...Ge];return et($e),$e},ma="fof.finance.tax_config.v1",Je=()=>({enabled:!0,businessName:"FlowOFit Studio",businessCountry:"AE",taxId:"",receiptNote:"Thank you for your business.",jurisdictions:[{id:"AE_VAT",label:"UAE VAT",country:"AE",region:"ALL",taxName:"VAT",ratePct:5},{id:"US_SALES",label:"US Sales Tax (Example)",country:"US",region:"CA",taxName:"Sales Tax",ratePct:8.25},{id:"EU_VAT",label:"EU VAT (Example)",country:"EU",region:"DE",taxName:"VAT",ratePct:19}],updatedAt:Date.now()}),Oa=()=>{try{var vt=typeof Ta=="function"?Ta(ma,""):localStorage.getItem(ma)||"";if(!vt)return Je();var Ge=JSON.parse(vt);return!Ge||typeof Ge!="object"?Je():{...Je(),...Ge}}catch(vt){return Je()}},He=vt=>{try{var Ge={...vt,updatedAt:Date.now()};typeof ti=="function"?ti(ma,JSON.stringify(Ge)):localStorage.setItem(ma,JSON.stringify(Ge));try{window.dispatchEvent(new CustomEvent("fof:tax_config_updated",{detail:{ts:Ge.updatedAt}}))}catch($e){}return Ge}catch(Ge){return vt}},Ca=(vt,Ge)=>{try{return((vt==null?void 0:vt.jurisdictions)||[]).find($e=>$e.id===Ge)||null}catch($e){return null}},ha=(vt,Ge)=>{var $e=Ca(vt,Ge),Xa=Number(($e==null?void 0:$e.ratePct)||0);return isFinite(Xa)?Xa:0},K=(vt,Ge)=>{var $e=Ca(vt,Ge);return String(($e==null?void 0:$e.taxName)||"Tax")},aa=({onBack:vt})=>{var Ga;var[Ge,$e]=React.useState(""),[Xa,mi]=React.useState("ALL"),[xi,rs]=React.useState(()=>{try{var ca=typeof Ta=="function"?Ta(J,"[]"):localStorage.getItem(J)||"[]",La=JSON.parse(ca);return Array.isArray(La)?La:[]}catch(ca){return[]}}),ct=ca=>{rs(ca);try{typeof ti=="function"?ti(J,JSON.stringify(ca)):localStorage.setItem(J,JSON.stringify(ca))}catch(La){}},[zt,Wi]=React.useState(!1),[Wa,Hs]=React.useState(null);React.useEffect(()=>{try{var ca=localStorage.getItem("fof.finance.invoices.openId");if(!ca)return;localStorage.removeItem("fof.finance.invoices.openId"),Hs(ca),Wi(!0)}catch(ca){}},[]);var ks=()=>({id:Nt(),clientName:"",issuedAt:z(),dueDate:z(),status:"DRAFT",taxRatePct:0,taxJurisdictionId:"AE_VAT",taxable:!0,useTaxConfig:!0,items:[{desc:"Coaching Session",qty:1,price:150}],notes:"",createdAt:Date.now(),updatedAt:Date.now()}),[so,uo]=React.useState(ks),an=()=>{var La;var ca=ks();uo(ca),Hs(null),Wi(!0),(La=s==null?void 0:s.logEvent)==null||La.call(s,"invoice_new_open",{})},Qi=ca=>{var La;uo(JSON.parse(JSON.stringify(ca))),Hs(ca.id),Wi(!0),(La=s==null?void 0:s.logEvent)==null||La.call(s,"invoice_edit_open",{id:ca.id})},ui=()=>{var fi;var ca=Date.now(),La=(()=>{var ms=xi.findIndex(ds=>ds.id===(Wa||so.id)),ss={...so,id:Wa||so.id,updatedAt:ca};if(ms>=0){var ds=xi.slice();return ds[ms]=ss,ds}return[{...ss,createdAt:ca},...xi]})();ct(La),Wi(!1),(fi=s==null?void 0:s.logEvent)==null||fi.call(s,"invoice_saved",{id:Wa||so.id})},vi=ca=>{var La;confirm("Delete this invoice?")&&(ct(xi.filter(fi=>fi.id!==ca)),(La=s==null?void 0:s.logEvent)==null||La.call(s,"invoice_deleted",{id:ca}))},hi=(ca,La)=>{var ms;var fi=xi.map(ss=>ss.id===ca?{...ss,status:La,updatedAt:Date.now()}:ss);ct(fi),(ms=s==null?void 0:s.logEvent)==null||ms.call(s,"invoice_status",{id:ca,status:La})},ls=ca=>{if(ca.status!=="SENT")return!1;var La=ca.dueDate||"";return La?La<z():!1},Bi=xi.filter(ca=>{var La=`${ca.id} ${ca.clientName||""}`.toLowerCase(),fi=!Ge||La.includes(Ge.toLowerCase()),ms=ls(ca),ss=Xa==="ALL"||Xa==="OVERDUE"&&ms||Xa!=="OVERDUE"&&ca.status===Xa;return fi&&ss});return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50"},"Finance Hub \xB7 Billing"),React.createElement("div",{className:"text-[22px] font-semibold"},"Invoices"),React.createElement("div",{className:"mt-1 text-[13px] text-white/60"},"Create, send, and track invoices. This is the single owner system for billing invoices (Appendix C).")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:vt,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},"\u2190 Back"),React.createElement("button",{onClick:()=>{var Wo;var ca=Bi.map(Po=>{var Eo=Ht(Po.items||[],U(Po,window.__tax_read()));return{id:Po.id,client:Po.clientName||"",status:ls(Po)?"OVERDUE":Po.status,issuedAt:Po.issuedAt||"",dueDate:Po.dueDate||"",subtotal:Eo.subtotal.toFixed(2),tax:Eo.tax.toFixed(2),total:Eo.total.toFixed(2)}}),La=Object.keys(ca[0]||{id:""}).join(","),fi=ca.map(Po=>Object.values(Po).map(Eo=>`"${String(Eo).replace(/"/g,'""')}"`).join(",")).join(`
`),ms=La+(fi?`
`+fi:""),ss=new Blob([ms],{type:"text/csv;charset=utf-8;"}),ds=URL.createObjectURL(ss),Xs=document.createElement("a");Xs.href=ds,Xs.download=`fof_invoices_${z()}.csv`,document.body.appendChild(Xs),Xs.click(),Xs.remove(),URL.revokeObjectURL(ds),(Wo=s==null?void 0:s.logEvent)==null||Wo.call(s,"invoice_export_csv",{count:ca.length})},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},"Export CSV"),React.createElement("button",{onClick:an,className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100 hover:bg-emerald-500/20"},"+ New Invoice"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"md:col-span-2 flex gap-2"},React.createElement("input",{value:Ge,onChange:ca=>$e(ca.target.value),placeholder:"Search by client or invoice ID\u2026",className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 placeholder:text-white/30 outline-none focus:border-white/20"})),React.createElement("div",{className:"flex gap-2"},React.createElement("select",{value:Xa,onChange:ca=>mi(ca.target.value),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20"},React.createElement("option",{value:"ALL"},"All statuses"),React.createElement("option",{value:"DRAFT"},"Draft"),React.createElement("option",{value:"SENT"},"Sent"),React.createElement("option",{value:"OVERDUE"},"Overdue"),React.createElement("option",{value:"PAID"},"Paid"),React.createElement("option",{value:"VOID"},"Void")))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3"},Bi.length===0&&React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-5 text-white/60"},"No invoices yet. Click ",React.createElement("span",{className:"text-white/80"},"New Invoice")," to create your first one."),Bi.map(ca=>{var La=ls(ca),fi=Ht(ca.items||[],U(ca,window.__tax_read()));return React.createElement("div",{key:ca.id,className:"rounded-3xl border border-white/10 bg-white/5 p-5 hover:bg-white/7 transition"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50"},"Invoice"),React.createElement("div",{className:"text-[16px] font-semibold"},ca.id),React.createElement("div",{className:"mt-1 text-[13px] text-white/70"},ca.clientName||React.createElement("span",{className:"text-white/35"},"Unnamed client")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2 items-center"},w(ca.status,La),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"Due ",ca.dueDate||"\u2014"),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10 text-[11px] text-white/70"},"Total ",fi.total.toFixed(2)))),React.createElement("div",{className:"flex flex-col gap-2 items-end"},React.createElement("button",{onClick:()=>Qi(ca),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},"View / Edit"),React.createElement("div",{className:"flex flex-wrap gap-2 justify-end"},ca.status==="DRAFT"&&React.createElement("button",{onClick:()=>hi(ca.id,"SENT"),className:"px-3 py-2 rounded-2xl bg-cyan-500/15 border border-cyan-400/20 text-cyan-100 hover:bg-cyan-500/20"},"Send"),ca.status==="SENT"&&React.createElement("button",{onClick:()=>hi(ca.id,"PAID"),className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100 hover:bg-emerald-500/20"},"Mark Paid"),ca.status!=="VOID"&&React.createElement("button",{onClick:()=>hi(ca.id,"VOID"),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10"},"Void"),React.createElement("button",{onClick:()=>vi(ca.id),className:"px-3 py-2 rounded-2xl bg-rose-500/10 border border-rose-400/20 text-rose-100 hover:bg-rose-500/15"},"Delete")))))})),zt&&React.createElement("div",{className:"fixed inset-0 z-50"},React.createElement("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>Wi(!1)}),React.createElement("div",{className:"relative w-full h-full max-w-none max-h-none overflow-y-auto rounded-none bg-zinc-950/95"},React.createElement("div",{className:"sticky top-0 z-10 px-6 md:px-8 py-5 border-b border-white/10 bg-zinc-950/95 backdrop-blur"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50"},"Invoice Editor"),React.createElement("div",{className:"text-[18px] font-semibold"},so.id)),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>Wi(!1),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10"},"Cancel"),React.createElement("button",{onClick:ui,className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100 hover:bg-emerald-500/20"},"Save")))),React.createElement("div",{className:"px-6 md:px-8 py-5"},React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/50 mb-2"},"Client"),React.createElement("input",{value:so.clientName,onChange:ca=>uo(La=>({...La,clientName:ca.target.value})),placeholder:"Client name\u2026",className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/90 placeholder:text-white/30 outline-none focus:border-white/20"}),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-2"},"Issued"),React.createElement("input",{type:"date",value:so.issuedAt,onChange:ca=>uo(La=>({...La,issuedAt:ca.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/50 mb-2"},"Due"),React.createElement("input",{type:"date",value:so.dueDate,onChange:ca=>uo(La=>({...La,dueDate:ca.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20"}))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] text-white/50 mb-2"},"Tax (from TAX-CONFIG)"),React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/65 select-none"},React.createElement("input",{type:"checkbox",checked:!!so.useTaxConfig,onChange:ca=>uo(La=>({...La,useTaxConfig:!!ca.target.checked}))}),"Use Tax Config")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("select",{value:so.taxJurisdictionId||"AE_VAT",onChange:ca=>uo(La=>({...La,taxJurisdictionId:ca.target.value})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20"},(((Ga=window.__tax_read())==null?void 0:Ga.jurisdictions)||[]).map(ca=>React.createElement("option",{key:ca.id,value:ca.id},ca.label," \u2022 ",ca.taxName," ",Number(ca.ratePct||0),"%"))),React.createElement("input",{type:"number",value:so.taxRatePct,onChange:ca=>uo(La=>({...La,taxRatePct:H(ca.target.value,0),useTaxConfig:!1})),className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20",placeholder:"Override rate (%)",title:"Manual override. Turning this on disables Use Tax Config for this invoice."})),React.createElement("label",{className:"mt-2 flex items-center gap-2 text-[12px] text-white/65 select-none"},React.createElement("input",{type:"checkbox",checked:so.taxable!==!1,onChange:ca=>uo(La=>({...La,taxable:!!ca.target.checked}))}),"Taxable")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[12px] text-white/50 mb-2"},"Notes"),React.createElement("textarea",{value:so.notes,onChange:ca=>uo(La=>({...La,notes:ca.target.value})),rows:3,className:"w-full px-4 py-3 rounded-2xl bg-black/30 border border-white/10 text-white/80 outline-none focus:border-white/20",placeholder:"Optional notes\u2026"}))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/50"},"Line items"),React.createElement("button",{onClick:()=>uo(ca=>({...ca,items:[...ca.items||[],{desc:"",qty:1,price:0}]})),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10"},"+ Add")),React.createElement("div",{className:"mt-3 space-y-2 max-h-[320px] overflow-auto pr-1"},(so.items||[]).map((ca,La)=>React.createElement("div",{key:La,className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"flex gap-2"},React.createElement("input",{value:ca.desc,onChange:fi=>uo(ms=>{var ss=(ms.items||[]).slice();return ss[La]={...ss[La],desc:fi.target.value},{...ms,items:ss}}),placeholder:"Description",className:"flex-1 px-3 py-2 rounded-xl bg-black/20 border border-white/10 text-white/80 placeholder:text-white/30 outline-none focus:border-white/20"}),React.createElement("button",{onClick:()=>uo(fi=>{var ms=(fi.items||[]).slice();return ms.splice(La,1),{...fi,items:ms}}),className:"px-3 py-2 rounded-xl bg-rose-500/10 border border-rose-400/20 text-rose-100 hover:bg-rose-500/15"},"\xD7")),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("input",{type:"number",value:ca.qty,onChange:fi=>uo(ms=>{var ss=(ms.items||[]).slice();return ss[La]={...ss[La],qty:H(fi.target.value,1)},{...ms,items:ss}}),className:"px-3 py-2 rounded-xl bg-black/20 border border-white/10 text-white/80 outline-none focus:border-white/20",placeholder:"Qty"}),React.createElement("input",{type:"number",value:ca.price,onChange:fi=>uo(ms=>{var ss=(ms.items||[]).slice();return ss[La]={...ss[La],price:H(fi.target.value,0)},{...ms,items:ss}}),className:"px-3 py-2 rounded-xl bg-black/20 border border-white/10 text-white/80 outline-none focus:border-white/20",placeholder:"Price"}))))),(()=>{var ca=Ht(so.items||[],U(so,window.__tax_read()));return React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/30 p-3 text-white/80"},React.createElement("div",{className:"flex justify-between text-[13px]"},React.createElement("span",{className:"text-white/60"},"Subtotal"),React.createElement("span",null,ca.subtotal.toFixed(2))),React.createElement("div",{className:"flex justify-between text-[13px] mt-1"},React.createElement("span",{className:"text-white/60"},"Tax"),React.createElement("span",null,ca.tax.toFixed(2))),React.createElement("div",{className:"flex justify-between text-[14px] font-semibold mt-2"},React.createElement("span",null,"Total"),React.createElement("span",null,ca.total.toFixed(2))))})())),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("button",{onClick:()=>uo(ca=>({...ca,status:"DRAFT"})),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10"},"Set Draft"),React.createElement("button",{onClick:()=>uo(ca=>({...ca,status:"SENT"})),className:"px-3 py-2 rounded-2xl bg-cyan-500/15 border border-cyan-400/20 text-cyan-100 hover:bg-cyan-500/20"},"Set Sent"),React.createElement("button",{onClick:()=>uo(ca=>({...ca,status:"PAID"})),className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100 hover:bg-emerald-500/20"},"Set Paid"),React.createElement("button",{onClick:()=>uo(ca=>({...ca,status:"VOID"})),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/70 hover:bg-white/10"},"Set Void"),React.createElement("div",{className:"ml-auto flex items-center gap-2 text-[12px] text-white/50"},React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10"},"Appendix C: BILLING-INVOICES"),React.createElement("span",{className:"px-2 py-1 rounded-full bg-white/5 border border-white/10"},"Phase 3.2"))))))))},Mt=()=>{var vt=Math.random().toString(16).slice(2,6).toUpperCase(),Ge=String(Date.now()).slice(-6);return`OL-${vt}-${Ge}`},la=({open:vt,onClose:Ge,prefill:$e=null,onSaved:Xa})=>{var ct;var[mi,xi]=React.useState(()=>{var zt,Wi,Wa,Hs;return{id:Mt(),createdAt:Date.now(),dateISO:z(),clientName:($e==null?void 0:$e.clientName)||"",invoiceId:($e==null?void 0:$e.invoiceId)||"",amount:($e==null?void 0:$e.amount)||"",method:($e==null?void 0:$e.method)||"CASH",note:($e==null?void 0:$e.note)||"",evidence:($e==null?void 0:$e.evidence)||"",applyToInvoice:(zt=$e==null?void 0:$e.applyToInvoice)!=null?zt:!0,taxable:(Wi=$e==null?void 0:$e.taxable)!=null?Wi:!0,taxJurisdictionId:($e==null?void 0:$e.taxJurisdictionId)||"AE_VAT",useTaxConfig:(Wa=$e==null?void 0:$e.useTaxConfig)!=null?Wa:!0,taxRatePct:(Hs=$e==null?void 0:$e.taxRatePct)!=null?Hs:0}});if(React.useEffect(()=>{var zt,Wi,Wa,Hs,ks;vt&&xi({id:Mt(),createdAt:Date.now(),dateISO:z(),clientName:($e==null?void 0:$e.clientName)||"",invoiceId:($e==null?void 0:$e.invoiceId)||"",amount:(zt=$e==null?void 0:$e.amount)!=null?zt:"",method:($e==null?void 0:$e.method)||"CASH",note:($e==null?void 0:$e.note)||"",evidence:($e==null?void 0:$e.evidence)||"",applyToInvoice:(Wi=$e==null?void 0:$e.applyToInvoice)!=null?Wi:!0,taxable:(Wa=$e==null?void 0:$e.taxable)!=null?Wa:!0,taxJurisdictionId:($e==null?void 0:$e.taxJurisdictionId)||"AE_VAT",useTaxConfig:(Hs=$e==null?void 0:$e.useTaxConfig)!=null?Hs:!0,taxRatePct:(ks=$e==null?void 0:$e.taxRatePct)!=null?ks:0})},[vt,$e]),!vt)return null;var rs=()=>{var Hs;var zt=H(mi.amount,0);if(!mi.clientName||zt<=0){try{(Hs=window.__fofToast)==null||Hs.call(window,"Client + amount are required")}catch(ks){}alert("Client name and amount are required.");return}var Wi={...mi,amount:zt,createdAt:Date.now(),source:"FINANCE_HUB_OFFLINE_LEDGER"},Wa=At(Wi);try{Xa==null||Xa(Wi,Wa)}catch(ks){}Ge==null||Ge()};return React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] flex items-center justify-center p-4 bg-black/70"},React.createElement("div",{className:"w-full max-w-xl glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Log Offline Payment"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Appendix C: ",React.createElement("span",{className:"text-white/85 font-semibold"},"OFFLINE-LEDGER")," \xB7 Phase 3.3")),React.createElement("button",{onClick:Ge,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Client"),React.createElement("input",{value:mi.clientName,onChange:zt=>xi(Wi=>({...Wi,clientName:zt.target.value})),placeholder:"Client name",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Amount"),React.createElement("input",{value:mi.amount,onChange:zt=>xi(Wi=>({...Wi,amount:zt.target.value})),placeholder:"0.00",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Tax"),React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/65 select-none"},React.createElement("input",{type:"checkbox",checked:!!mi.useTaxConfig,onChange:zt=>xi(Wi=>({...Wi,useTaxConfig:!!zt.target.checked}))}),"Use Tax Config")),React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("select",{value:mi.taxJurisdictionId||"AE_VAT",onChange:zt=>xi(Wi=>({...Wi,taxJurisdictionId:zt.target.value})),className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"},(((ct=window.__tax_read())==null?void 0:ct.jurisdictions)||[]).map(zt=>React.createElement("option",{key:zt.id,value:zt.id},zt.label," \u2022 ",zt.taxName," ",Number(zt.ratePct||0),"%"))),React.createElement("input",{type:"number",value:mi.taxRatePct,onChange:zt=>xi(Wi=>({...Wi,taxRatePct:H(zt.target.value,0),useTaxConfig:!1})),className:"w-full bg-black/30 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none",placeholder:"Override rate (%)"})),React.createElement("label",{className:"mt-2 flex items-center gap-2 text-[12px] text-white/65 select-none"},React.createElement("input",{type:"checkbox",checked:mi.taxable!==!1,onChange:zt=>xi(Wi=>({...Wi,taxable:!!zt.target.checked}))}),"Taxable"),(()=>{var zt=H(mi.amount,0),Wi=mi.taxable===!1?0:mi.useTaxConfig?ha(window.__tax_read(),mi.taxJurisdictionId||"AE_VAT"):H(mi.taxRatePct,0),Wa=zt*(Wi/100);return React.createElement("div",{className:"mt-2 text-[12px] text-white/60 flex items-center justify-between"},React.createElement("span",null,"Estimated ",K(window.__tax_read(),mi.taxJurisdictionId||"AE_VAT")),React.createElement("span",{className:"text-white/80 font-semibold"},Wa.toFixed(2)))})()),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Method"),React.createElement("select",{value:mi.method,onChange:zt=>xi(Wi=>({...Wi,method:zt.target.value})),className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"},React.createElement("option",{value:"CASH"},"Cash"),React.createElement("option",{value:"BANK_TRANSFER"},"Bank Transfer"),React.createElement("option",{value:"CARD_TERMINAL"},"Card Terminal"),React.createElement("option",{value:"CHEQUE"},"Cheque"),React.createElement("option",{value:"OTHER"},"Other"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Date"),React.createElement("input",{type:"date",value:mi.dateISO,onChange:zt=>xi(Wi=>({...Wi,dateISO:zt.target.value})),className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"})),React.createElement("div",{className:"md:col-span-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Invoice (optional)"),React.createElement("input",{value:mi.invoiceId,onChange:zt=>xi(Wi=>({...Wi,invoiceId:zt.target.value})),placeholder:"Invoice ID (e.g. INV-...)",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"}),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!mi.applyToInvoice,onChange:zt=>xi(Wi=>({...Wi,applyToInvoice:zt.target.checked}))}),"Apply to invoice (marks invoice PAID if found)")),React.createElement("div",{className:"md:col-span-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Evidence / Note"),React.createElement("textarea",{value:mi.note,onChange:zt=>xi(Wi=>({...Wi,note:zt.target.value})),placeholder:"Optional note (e.g. receipt #, bank ref)",rows:3,className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"}),React.createElement("input",{value:mi.evidence,onChange:zt=>xi(Wi=>({...Wi,evidence:zt.target.value})),placeholder:"Optional evidence link/text",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/80 outline-none"}))),React.createElement("div",{className:"mt-5 flex items-center gap-2"},React.createElement("button",{onClick:rs,className:"px-4 py-2 rounded-2xl bg-emerald-500/20 border border-emerald-400/30 text-emerald-50 hover:bg-emerald-500/30"},React.createElement(_,{name:"Check",size:16})," Save Entry"),React.createElement("button",{onClick:Ge,className:"px-4 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},"Cancel"),React.createElement("div",{className:"ml-auto text-[11px] text-white/45"},"Stored locally: ",React.createElement("span",{className:"font-mono"},ht)))))},xa=({onBack:vt,openInvoice:Ge})=>{var[$e,Xa]=React.useState("OVERDUE"),[mi,xi]=React.useState(""),[rs,ct]=React.useState(()=>ut()),[zt,Wi]=React.useState(()=>{try{var Qi=typeof Ta=="function"?Ta(J,"[]"):localStorage.getItem(J)||"[]",ui=JSON.parse(Qi);return Array.isArray(ui)?ui:[]}catch(Qi){return[]}}),Wa=Qi=>{Wi(Qi);try{typeof ti=="function"?ti(J,JSON.stringify(Qi)):localStorage.setItem(J,JSON.stringify(Qi))}catch(ui){}},Hs=z(),ks=zt.map(Qi=>{var ui=Qi.status!=="PAID"&&Qi.status!=="VOID",vi=ui&&Qi.dueDate<Hs,hi=vi?Math.max(0,Math.round((Date.parse(Hs)-Date.parse(Qi.dueDate))/864e5)):0,ls=(rs==null?void 0:rs[Qi.id])||{};return{inv:Qi,isOverdue:vi,isOpen:ui,daysPast:hi,reminderCount:ls.reminderCount||0,lastReminderAt:ls.lastReminderAt||null}}).filter(Qi=>$e==="OVERDUE"?Qi.isOverdue:$e==="DUE"?Qi.isOpen&&!Qi.isOverdue:$e==="PAID"?Qi.inv.status==="PAID":$e==="VOID"?Qi.inv.status==="VOID":!0).filter(Qi=>{var ui=(mi||"").trim().toLowerCase();return ui?(Qi.inv.id||"").toLowerCase().includes(ui)||(Qi.inv.clientName||"").toLowerCase().includes(ui)||String(Qi.inv.status||"").toLowerCase().includes(ui):!0}),so=Qi=>{var hi;var ui={...rs||{}},vi=ui[Qi]||{};ui[Qi]={...vi,reminderCount:(vi.reminderCount||0)+1,lastReminderAt:Date.now(),lastAction:"REMINDER"},ct(ui),ot(ui);try{s==null||s.logEvent("finance_dunning_reminder",{invoiceId:Qi})}catch(ls){}try{(hi=window.__fofToast)==null||hi.call(window,"Reminder logged (prototype)")}catch(ls){}},uo=Qi=>{try{Ie({openOfflineModal:!0,invoiceId:Qi.id,clientName:Qi.clientName,amount:Qi.total,applyToInvoice:!0,note:`Offline payment for ${Qi.id}`}),tt(!0)}catch(ui){}},an=(Qi,ui)=>{var vi=zt.map(hi=>hi.id===Qi?{...hi,status:ui,paidAt:ui==="PAID"?z():hi.paidAt}:hi);Wa(vi)};return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Dunning Triage"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Appendix C: ",React.createElement("span",{className:"text-white/85 font-semibold"},"DUNNING")," \xB7 Phase 3.3")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:vt,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},React.createElement(_,{name:"ArrowLeft",size:16})," Back"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Status"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},["OVERDUE","DUE","PAID","VOID","ALL"].map(Qi=>React.createElement("button",{key:Qi,onClick:()=>Xa(Qi),className:"px-3 py-2 rounded-2xl border text-[12px] "+($e===Qi?"bg-white/10 border-white/20 text-white":"bg-black/10 border-white/10 text-white/70 hover:bg-white/5")},Qi)))),React.createElement("div",{className:"md:col-span-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Search"),React.createElement("input",{value:mi,onChange:Qi=>xi(Qi.target.value),placeholder:"Invoice ID / client / status",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"}),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Actions are logged locally (prototype). Finance remains the single owner of dunning + offline payments."))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 overflow-hidden"},React.createElement("div",{className:"grid grid-cols-12 gap-0 bg-white/5 text-[11px] text-white/60 font-mono uppercase tracking-[0.18em]"},React.createElement("div",{className:"col-span-3 p-3"},"Invoice"),React.createElement("div",{className:"col-span-3 p-3"},"Client"),React.createElement("div",{className:"col-span-2 p-3"},"Due"),React.createElement("div",{className:"col-span-1 p-3"},"Age"),React.createElement("div",{className:"col-span-1 p-3"},"Status"),React.createElement("div",{className:"col-span-2 p-3 text-right"},"Actions")),ks.length===0?React.createElement("div",{className:"p-5 text-[13px] text-white/60"},"No matching invoices."):ks.map(({inv:Qi,isOverdue:ui,daysPast:vi,reminderCount:hi})=>React.createElement("div",{key:Qi.id,className:"grid grid-cols-12 gap-0 border-t border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"col-span-3 p-3"},React.createElement("div",{className:"text-[13px] text-white/90 font-semibold"},Qi.id),React.createElement("div",{className:"text-[11px] text-white/45"},ui?"Overdue":"Open")),React.createElement("div",{className:"col-span-3 p-3"},React.createElement("div",{className:"text-[13px] text-white/85"},Qi.clientName||"\u2014"),React.createElement("div",{className:"text-[11px] text-white/45"},(()=>{var ls,Bi;try{return typeof Qi.total=="number"?Qi.total.toLocaleString():String((ls=Qi.total)!=null?ls:"")}catch(Pa){return String((Bi=Qi.total)!=null?Bi:"")}})())),React.createElement("div",{className:"col-span-2 p-3 text-[12px] text-white/70"},Qi.dueDate),React.createElement("div",{className:"col-span-1 p-3 text-[12px] "+(ui?"text-red-200":"text-white/60")},ui?`${vi}d`:"\u2014"),React.createElement("div",{className:"col-span-1 p-3"},w(Qi.status,ui)),React.createElement("div",{className:"col-span-2 p-2 flex items-center justify-end gap-2"},React.createElement("button",{onClick:()=>Ge(Qi.id),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[12px] text-white/80 hover:bg-white/10"},"Open"),React.createElement("button",{onClick:()=>so(Qi.id),className:"px-3 py-2 rounded-2xl bg-cyan-500/15 border border-cyan-400/20 text-[12px] text-cyan-50 hover:bg-cyan-500/25"},"Reminder ",hi?`(${hi})`:""),React.createElement("button",{onClick:()=>uo(Qi),className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-[12px] text-emerald-50 hover:bg-emerald-500/25"},"Log Offline"),React.createElement("button",{onClick:()=>an(Qi.id,"PAID"),className:"px-3 py-2 rounded-2xl bg-emerald-500/5 border border-emerald-400/10 text-[12px] text-emerald-100 hover:bg-emerald-500/15"},"Mark Paid")))))))},ei=({onBack:vt,openInvoice:Ge})=>{var[$e,Xa]=React.useState(()=>ba()),[mi,xi]=React.useState(""),rs=()=>Xa(ba()),ct=$e.filter(zt=>{var Wi=(mi||"").trim().toLowerCase();return Wi?(zt.clientName||"").toLowerCase().includes(Wi)||(zt.invoiceId||"").toLowerCase().includes(Wi)||(zt.method||"").toLowerCase().includes(Wi):!0});return React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Offline Payments Ledger"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},"Appendix C: ",React.createElement("span",{className:"text-white/85 font-semibold"},"OFFLINE-LEDGER")," \xB7 Phase 3.3")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>{Ie({openOfflineModal:!0}),tt(!0)},className:"px-3 py-2 rounded-2xl bg-emerald-500/20 border border-emerald-400/30 text-emerald-50 hover:bg-emerald-500/30"},React.createElement(_,{name:"Plus",size:16})," Log"),React.createElement("button",{onClick:vt,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},React.createElement(_,{name:"ArrowLeft",size:16})," Back"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.2em] text-white/45"},"Search"),React.createElement("input",{value:mi,onChange:zt=>xi(zt.target.value),placeholder:"Client / invoice / method",className:"mt-2 w-full bg-black/20 border border-white/10 rounded-2xl px-3 py-2 text-white/90 outline-none"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/65"},"Entries: ",React.createElement("span",{className:"text-white/90 font-semibold"},ct.length)),React.createElement("button",{onClick:rs,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10"},React.createElement(_,{name:"RefreshCcw",size:16})," Refresh"))),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/10 overflow-hidden"},React.createElement("div",{className:"grid grid-cols-12 gap-0 bg-white/5 text-[11px] text-white/60 font-mono uppercase tracking-[0.18em]"},React.createElement("div",{className:"col-span-3 p-3"},"Client"),React.createElement("div",{className:"col-span-2 p-3"},"Amount"),React.createElement("div",{className:"col-span-2 p-3"},"Method"),React.createElement("div",{className:"col-span-2 p-3"},"Date"),React.createElement("div",{className:"col-span-3 p-3"},"Invoice / Notes")),ct.length===0?React.createElement("div",{className:"p-5 text-[13px] text-white/60"},"No offline ledger entries yet."):ct.map(zt=>React.createElement("div",{key:zt.id,className:"grid grid-cols-12 gap-0 border-t border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"col-span-3 p-3"},React.createElement("div",{className:"text-[13px] text-white/90"},zt.clientName||"\u2014"),React.createElement("div",{className:"text-[11px] text-white/45 font-mono"},zt.id)),React.createElement("div",{className:"col-span-2 p-3 text-[13px] text-white/85"},(()=>{var Wi,Wa;try{return typeof zt.amount=="number"?zt.amount.toLocaleString():String((Wi=zt.amount)!=null?Wi:"")}catch(Hs){return String((Wa=zt.amount)!=null?Wa:"")}})()),React.createElement("div",{className:"col-span-2 p-3 text-[12px] text-white/70"},(zt.method||"\u2014").replace(/_/g," ")),React.createElement("div",{className:"col-span-2 p-3 text-[12px] text-white/70"},zt.dateISO||"\u2014"),React.createElement("div",{className:"col-span-3 p-3"},zt.invoiceId?React.createElement("button",{onClick:()=>Ge(zt.invoiceId),className:"text-left w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-[12px] text-white/80 hover:bg-white/10"},"Open ",zt.invoiceId):React.createElement("div",{className:"text-[12px] text-white/45"},"No invoice linked"),zt.note?React.createElement("div",{className:"mt-2 text-[11px] text-white/55 line-clamp-2"},zt.note):null)))),React.createElement("div",{className:"mt-4 text-[11px] text-white/45"},"Ledger is append-only in this prototype (newest first). In production: immutable storage + evidence attachments + audit log.")))};return React.createElement(React.Fragment,null,S?React.createElement(({id:vt})=>{var Ge=fe[vt]||{label:vt,blurb:"",inputs:[],outputs:[],deps:[],next:"Phase 3"};return vt==="BILLING-INVOICES"?React.createElement(aa,{onBack:()=>u(null)}):vt==="DUNNING"?React.createElement(xa,{onBack:()=>u(null),openInvoice:ne}):vt==="OFFLINE-LEDGER"?React.createElement(ei,{onBack:()=>u(null),openInvoice:ne}):vt==="TAX-CONFIG"?React.createElement(wl,{onBack:()=>u(null)}):vt==="TAX-REPORTING"?React.createElement(Gd,{onBack:()=>u(null)}):vt==="PAYOUT-TRIGGER"?React.createElement(bd,{onBack:()=>u(null)}):vt==="WAIVERS-TEMPLATES"?React.createElement(Xt,{onBack:()=>u(null)}):vt==="WAIVERS-ASSIGN"?React.createElement(mt,{onBack:()=>u(null)}):vt==="CREDITS"?React.createElement(kt,{onBack:()=>u(null)}):vt==="GROUP-CLASSES"?React.createElement(Ft,{onBack:()=>u(null)}):React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},Ge.label),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},Ge.blurb),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},React.createElement("span",{className:"text-white/75 font-semibold"},"Appendix C Node:")," ",React.createElement("span",{className:"font-mono text-white/70"},vt))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>u(null),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"\u2190 Back"),React.createElement("button",{type:"button",onClick:()=>{try{i&&i()}catch($e){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Close"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Inputs"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/70"},(Ge.inputs||[]).map(($e,Xa)=>React.createElement("li",{key:Xa},"\u2022 ",$e)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Outputs"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/70"},(Ge.outputs||[]).map(($e,Xa)=>React.createElement("li",{key:Xa},"\u2022 ",$e)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Dependencies"),React.createElement("ul",{className:"mt-2 space-y-1 text-[12px] text-white/70"},(Ge.deps||[]).map(($e,Xa)=>React.createElement("li",{key:Xa},"\u2022 ",$e))),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},"Next: ",React.createElement("span",{className:"text-white/80 font-semibold"},Ge.next)))),React.createElement("div",{className:"mt-5 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Stub rule"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70 leading-relaxed"},"This is a ",React.createElement("span",{className:"text-white/85 font-semibold"},"Phase 3.1 stub page"),". No feature is removed; implementation fills this page in Phase 3.x."))))},{id:S}):React.createElement(()=>React.createElement("div",{className:"h-full w-full p-5"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-white/55"},"Finance"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white leading-tight"},"Business & Finance Hub"),React.createElement("div",{className:"mt-2 text-[13px] text-white/70 leading-relaxed"},React.createElement("span",{className:"text-white/85 font-semibold"},"Tiles-first.")," ","Selecting any tile opens a dedicated page. Finance/legal/commerce tools live only here (Flowchart #11)."),React.createElement("div",{className:"mt-3 text-[12px] text-zinc-400"},"Appendix C nodes must be implemented or stubbed here. Payout Trigger deep-links to Phase-1; Tax is implemented in-hub in Phase 3.4.")),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{i&&i()}catch(vt){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Close"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-2 gap-4"},B.map(vt=>React.createElement("div",{key:vt.title,className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/85"},vt.title),React.createElement("div",{className:"text-[11px] font-mono text-white/45"},vt.items.length," tiles")),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"},vt.items.map(Ge=>React.createElement(W,{key:Ge,id:Ge})))))))),null),React.createElement(la,{open:$,onClose:()=>tt(!1),prefill:ue,onSaved:vt=>{try{s==null||s.logEvent("finance_offline_payment_logged",{invoiceId:(vt==null?void 0:vt.invoiceId)||null,amount:vt==null?void 0:vt.amount,method:vt==null?void 0:vt.method})}catch(Ge){}try{if(vt!=null&&vt.applyToInvoice&&(vt!=null&&vt.invoiceId)){var Ge=typeof Ta=="function"?Ta(J,"[]"):localStorage.getItem(J)||"[]",$e=JSON.parse(Ge);if(Array.isArray($e)){var Xa=$e.map(mi=>mi.id===vt.invoiceId?{...mi,status:"PAID",paidAt:(vt==null?void 0:vt.dateISO)||z(),paidVia:"OFFLINE",paidRef:vt==null?void 0:vt.id}:mi);typeof ti=="function"?ti(J,JSON.stringify(Xa)):localStorage.setItem(J,JSON.stringify(Xa))}}}catch(Ge){}}}))},ea=[{id:"tpl_ppl_3",name:"Push / Pull / Legs (3 days)",desc:"Fast strength split. Good default.",capacityProfile:{expectedDistribution:{LOW:.3,MID:.4,HIGH:.3},allowAutoDowngrade:!0,allowAutoUpgrade:!1},sessions:{mon:[{id:"s_push",title:"Push Strength",type:"Strength",dur:55,intensity:"Moderate"}],wed:[{id:"s_pull",title:"Pull Strength",type:"Strength",dur:55,intensity:"Moderate"}],fri:[{id:"s_legs",title:"Legs Strength",type:"Strength",dur:60,intensity:"Hard"}]}},{id:"tpl_hybrid_4",name:"Hybrid Week (4 sessions)",desc:"2 strength + 2 conditioning.",capacityProfile:{expectedDistribution:{LOW:.3,MID:.4,HIGH:.3},allowAutoDowngrade:!0,allowAutoUpgrade:!1},sessions:{mon:[{id:"s_fullA",title:"Full Body A",type:"Strength",dur:50,intensity:"Moderate"}],tue:[{id:"s_cond1",title:"Zone 2 Conditioning",type:"Conditioning",dur:35,intensity:"Easy"}],thu:[{id:"s_fullB",title:"Full Body B",type:"Strength",dur:50,intensity:"Moderate"}],sat:[{id:"s_cond2",title:"Intervals (Short)",type:"Conditioning",dur:25,intensity:"Hard"}]}},{id:"tpl_recovery_5",name:"Recovery-biased Week (5 light)",desc:"Mobility + easy work. Great for low capacity weeks.",capacityProfile:{expectedDistribution:{LOW:.3,MID:.4,HIGH:.3},allowAutoDowngrade:!0,allowAutoUpgrade:!1},sessions:{mon:[{id:"s_mob1",title:"Mobility Flow",type:"Mobility",dur:20,intensity:"Easy"}],tue:[{id:"s_walk",title:"Walk / Steps",type:"Activity",dur:30,intensity:"Easy"}],wed:[{id:"s_yoga",title:"Yoga Reset",type:"Yoga",dur:30,intensity:"Easy"}],fri:[{id:"s_mob2",title:"Mobility + Core",type:"Mobility",dur:25,intensity:"Easy"}],sun:[{id:"s_breath",title:"Breathwork",type:"Recovery",dur:10,intensity:"Easy"}]}}],Gt=i=>{var s=Number(i);return isFinite(s)?s>=75?"HIGH":s>=50?"MID":"LOW":"MID"},fa=i=>{var s=String(i||"").toLowerCase();return s.includes("hard")||s==="high"?"HIGH":s.includes("easy")||s==="low"?"LOW":"MID"},pt=i=>i==="HIGH"?"Hard":i==="LOW"?"Easy":"Moderate",Qa=(i,s)=>s==="HIGH"?i:s==="MID"?i==="HIGH"?"MID":i:i==="HIGH"?"MID":"LOW",Pi=(i,s)=>{var x=String(s||"").toUpperCase()==="LOW"||String(s||"").toUpperCase()==="MID"||String(s||"").toUpperCase()==="HIGH"?String(s||"").toUpperCase():Gt(s),S=fa(i),u=Qa(S,x);return{capZone:x,sessZone:S,adjZone:u,adjustedLabel:pt(u)}},Bs="fof_td_planbuilder_custom_templates_v1",Ba="fof_td_planbuilder_audit_v1";function ja(i,s){try{var x=JSON.parse(localStorage.getItem(i)||"null");return x==null?s:x}catch(x){return s}}function Aa(i,s){try{localStorage.setItem(i,JSON.stringify(s))}catch(x){}}var Ci=(()=>{try{var i=ja("fof_td_me_v1",null);return i&&(i.name||i.coachName)||ja("fof_user_name",null)||"Coach"}catch(i){return"Coach"}})(),Ri=({open:i,client:s,onClose:x,onAssigned:S})=>{var vi,hi,ls,Bi;var u="fof_td_planassign_v1",$=(Pa,Ga)=>{try{if(typeof setToast=="function"){setToast({message:String(Ga||Pa||""),onUndo:null});return}}catch(ca){}try{typeof ta=="function"&&ta(String(Pa||"Info"),String(Ga||""))}catch(ca){}},tt="fof_td_planbuilder_v1",ue="fof_td_planbuilder_custom_templates_v1",Ie="fof_td_planbuilder_audit_v1",fe=(Pa,Ga)=>{try{var ca=JSON.parse(localStorage.getItem(Pa)||"null");return ca==null?Ga:ca}catch(ca){return Ga}},B=(Pa,Ga)=>{try{localStorage.setItem(Pa,JSON.stringify(Ga))}catch(ca){}},X=(()=>{try{var Pa=fe("fof_td_me_v1",null);return Pa&&(Pa.name||Pa.coachName)||fe("fof_user_name",null)||"Coach"}catch(Pa){return"Coach"}})(),[ne,W]=React.useState(()=>fe(ue,[])),J=React.useMemo(()=>[...ea,...Array.isArray(ne)?ne:[]],[ne]),z=s&&(s.id||s.email||s.name)||"",H=s&&(s.name||s.email)||"Client",Nt=((Pa,Ga,ca)=>Math.max(Ga,Math.min(ca,Pa)))(Number((Bi=(ls=s&&((hi=(vi=s.capacityScore)!=null?vi:s.readiness)!=null?hi:s.metrics&&s.metrics.readiness))!=null?ls:fe("fof_demo_readiness_v1",65))!=null?Bi:65)||0,0,100),U=Pa=>{var Ga=Number(Pa)||0;return Ga>=75?"HIGH":Ga>=50?"MID":"LOW"},Q="fof_cap_prev_assign_"+String(z||"demo"),w=(()=>{try{var Pa=localStorage.getItem(Q),Ga=Number(Pa);return Number.isFinite(Ga)?Ga:Nt}catch(Pa){return Nt}})(),L=(Pa,Ga)=>{var ca=Number(Pa)||0,La=Number(Ga)||0;return ca>=La+5?"UP":ca<=La-5?"DOWN":"STABLE"},ut=U(Nt),ot=L(Nt,w);React.useEffect(()=>{if(i)try{localStorage.setItem(Q,String(Nt))}catch(Pa){}},[i,Q,Nt]);var ht=Pa=>{var Ga=String(Pa||"").toUpperCase();return Ga==="LOW"||Ga==="EASY"?"EASY":Ga==="MID"||Ga==="MODERATE"?"MODERATE":Ga==="HIGH"||Ga==="HARD"?"HARD":"MODERATE"},ba=(Pa,Ga)=>{var ca=ht(Pa),La=String(Ga||"").toUpperCase();return La==="HIGH"?ca:La==="MID"?ca==="HARD"?"MODERATE":ca:ca==="HARD"?"MODERATE":"EASY"},et=(Pa,Ga)=>{var ca=ht(Pa),La=ba(ca,Ga);return La!==ca?La:null},At=React.useMemo(()=>{try{var Pa=localStorage.getItem(tt);if(!Pa)return null;var Ga=JSON.parse(Pa);return Ga?{name:Ga.draftName||"Last draft",week:Ga.draftWeek||null,program:Ga.programDraftV1||null,programDurationWeeks:Ga.programDurationWeeks||(Ga.programDraftV1&&Ga.programDraftV1.weeks&&Ga.programDraftV1.weeks.length?Ga.programDraftV1.weeks.length:1),schedule:Ga.schedule||null,nudges:Ga.nudges||null}:null}catch(Pa){return null}},[i]),[ma,Je]=React.useState(()=>At?"LAST_DRAFT":J[0].id),[Oa,He]=React.useState(()=>At?At.name||"Last draft":J[0].name),[Ca,ha]=React.useState(()=>new Date().toISOString().slice(0,10)),[K,aa]=React.useState("07:00"),[Mt,la]=React.useState(!0),[xa,ei]=React.useState(0);React.useEffect(()=>{try{ei(0)}catch(Pa){}},[ma]);var[di,Ua]=React.useState({hydration:!0,steps:!1,protein:!1,sleep:!0}),[sa,vt]=React.useState(0),Ge=ma==="LAST_DRAFT"&&At&&At.program?At.program:null,$e=ma==="LAST_DRAFT"&&At&&(At.programDurationWeeks||(Ge&&Array.isArray(Ge.weeks)?Ge.weeks.length:1))||1,mi=((Pa,Ga,ca)=>Math.max(Ga,Math.min(ca,Pa)))(sa,0,Math.max(0,$e-1)),xi=Pa=>{try{if(!Pa)return"";var Ga=Pa instanceof Date?Pa:new Date(Pa);return isNaN(Ga.getTime())?"":Ga.toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})}catch(Ga){return""}},rs=(Pa,Ga)=>{try{var ca=Pa instanceof Date?new Date(Pa.getTime()):new Date(Pa);return ca.setDate(ca.getDate()+(Ga||0)),ca}catch(ca){return null}},ct=React.useMemo(()=>{try{if(Ge&&Array.isArray(Ge.weeks)){var Ga=Ge.weeks[mi];return(Ga&&Array.isArray(Ga.days)?Ga.days:[]).map(La=>({key:La.dayKey||La.label||String(La.dayIndex||""),label:La.label||La.dayKey||"Day",status:La.status||(La.sessions&&La.sessions.length?"TRAIN":"REST"),sessions:Array.isArray(La.sessions)?La.sessions:[]}))}var Pa=ma==="LAST_DRAFT"&&At&&At.week?At.week:Qi(ma);return(Array.isArray(weekDays)?weekDays:[]).map(Ga=>({key:Ga.key,label:Ga.label,status:Pa&&Pa[Ga.key]&&Pa[Ga.key].length?"TRAIN":"REST",sessions:Pa&&Pa[Ga.key]?Pa[Ga.key]:[]}))}catch(Pa){return[]}},[Ge,mi,$e,ma,At,Ca]),zt=React.useMemo(()=>{try{var Pa=Ge&&Array.isArray(Ge.weeks)?Ge.weeks:null;var Ga=0,ca=0;if(Pa)Pa.forEach(fi=>{(fi.days||[]).forEach(ms=>{var ss=Array.isArray(ms.sessions)?ms.sessions:[];(ms.status||"TRAIN")!=="OFF"&&(ca+=1),(ms.status||"TRAIN")==="TRAIN"&&(Ga+=ss.length)})});else{var fi=ma==="LAST_DRAFT"&&At&&At.week?At.week:Qi(ma);(Array.isArray(weekDays)?weekDays:[]).forEach(ms=>{var ss=fi&&fi[ms.key]?fi[ms.key]:[];ss.length&&(Ga+=ss.length),ca+=1})}var La=$e?Ga/$e:Ga;return{totalWorkouts:Ga,avgPerWeek:Math.round(La*10)/10}}catch(Pa){return{totalWorkouts:0,avgPerWeek:0}}},[Ge,$e,ma,At]),Wi=React.useMemo(()=>{try{return Ca?new Date(Ca):null}catch(Pa){return null}},[Ca]),Wa=React.useMemo(()=>Wi?rs(Wi,$e*7-1):null,[Wi,$e]),[Hs,ks]=React.useState(!1),[so,uo]=React.useState([]),an=()=>{var Pa=[{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"},{key:"sun",label:"Sun"}],Ga=La=>({title:La.title||La.name||"Session",type:La.type||La.category||"Workout",duration:La.duration||La.minutes||La.dur||45,intensity:La.intensity||"Moderate"}),ca=La=>!La||typeof La!="object"?Pa.map(fi=>({...fi,sessions:[]})):Pa.map(fi=>{var ms=fi.label,ss=Array.isArray(La[ms])?La[ms]:[];return{...fi,sessions:ss.map(Ga)}});try{if(ma==="LAST_DRAFT"&&At){if(At.week&&typeof At.week=="object")return ca(At.week);if(Array.isArray(At.sessions))return Pa.map(fi=>({...fi,sessions:At.sessions.filter(ms=>(ms.dayKey||ms.day||"").toLowerCase()===fi.key).map(Ga)}))}var La=Qi(ma);return ca(La)}catch(La){var fi=Qi(J&&J[0]&&J[0].id||"tpl_strength_base");return ca(fi)}};React.useEffect(()=>{if(i)if(ma==="LAST_DRAFT"&&At)He(At.name||"Last draft");else{var Pa=J.find(Ga=>Ga.id===ma)||J[0];He(Pa.name)}},[ma,i]);var Qi=Pa=>{var Ga=[{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"},{key:"sun",label:"Sun"}],ca={};Ga.forEach(ms=>{ca[ms.label]=[]});var La=(J||[]).find(ms=>ms.id===Pa)||(J||[])[0],fi=La&&La.sessions?La.sessions:{};return Ga.forEach(ms=>{var ss=fi[ms.key]||[];ca[ms.label]=(ss||[]).map((ds,Xs)=>({id:ds.id||`${Pa}_${ms.key}_${Xs}`,title:ds.title||"Session",type:ds.type||"Workout",dur:typeof ds.dur=="number"?ds.dur:45,intensity:ds.intensity||"Moderate"}))}),ca},ui=()=>{if(!z)return;var Pa={startDate:Ca,defaultTime:K,frequency:"WEEKLY"},Ga=Mt?{enabled:!0,items:Object.entries(di).filter(([fi,ms])=>!!ms).map(([fi])=>fi)}:{enabled:!1,items:[]},ca=ma==="LAST_DRAFT"&&At?{week:At.week||Qi("tpl_strength_base"),program:At.program||null,durationWeeks:At.programDurationWeeks||(At.program&&At.program.weeks?At.program.weeks.length:1)}:{week:Qi(ma),program:null,durationWeeks:1},La={id:`asg_${Date.now()}`,clientId:z,clientName:H,planName:Oa||"Plan",capacityContext:{scoreAtAssign:Nt,zoneAtAssign:ut,trendAtAssign:ot},week:ca.week,program:ca.program,durationWeeks:ca.durationWeeks,schedule:Pa,nudges:Ga,createdAt:new Date().toISOString(),source:ma};try{var fi=localStorage.getItem(u),ms=fi?JSON.parse(fi):[],ds=(Array.isArray(ms)?ms:[]).filter(Xs=>!(Xs.clientId===La.clientId&&Xs.planName===La.planName));ds.unshift(La),localStorage.setItem(u,JSON.stringify(ds.slice(0,50)))}catch(fi){}try{window.dispatchEvent(new Event("fof_assignments_changed_v1"))}catch(fi){}try{typeof S=="function"&&S(La)}catch(fi){}try{window.dispatchEvent(new Event("fof_plan_assigned"))}catch(fi){}x()};return i?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[9999] flex items-end md:items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:x}),React.createElement("div",{className:"relative w-full md:max-w-2xl bg-titanium-950 border border-white/10 rounded-t-3xl md:rounded-3xl shadow-[0_24px_80px_rgba(0,0,0,0.65)] p-5 max-h-[85vh] overflow-auto"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Plan Assigner"),React.createElement("div",{className:"text-xl font-extrabold text-white mt-0.5"},"Assign plan"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Client: ",React.createElement("span",{className:"text-white/85 font-semibold"},H))),React.createElement("button",{onClick:x,className:"p-2 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-white/80"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Program overview"),React.createElement("div",{className:"text-[15px] font-extrabold text-white mt-1"},Oa),React.createElement("div",{className:"mt-2 inline-flex flex-wrap items-center gap-2"},React.createElement("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10 text-[11px] text-white/80"},"Capacity: ",React.createElement("span",{className:"text-white font-semibold"},Nt)),React.createElement("span",{className:"px-2 py-0.5 rounded-full border text-[11px] font-semibold "+(ut==="HIGH"?"border-emerald-400/30 bg-emerald-400/10 text-emerald-200":ut==="MID"?"border-cyan-400/30 bg-cyan-400/10 text-cyan-200":"border-amber-400/30 bg-amber-400/10 text-amber-200")},"Zone: ",ut),React.createElement("span",{className:"px-2 py-0.5 rounded-full border text-[11px] font-semibold "+(ot==="UP"?"border-emerald-400/25 bg-emerald-400/10 text-emerald-200":ot==="DOWN"?"border-rose-400/25 bg-rose-400/10 text-rose-200":"border-white/10 bg-white/5 text-white/70")},"Trend: ",ot),React.createElement("span",{className:"text-[11px] text-white/55"},"Intensity will auto-adjust at runtime (non-destructive).")),React.createElement("div",{className:"text-[12px] text-white/70 mt-1"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10"},"Duration: ",React.createElement("span",{className:"text-white/90 font-semibold"},$e)," wk"),React.createElement("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10"},"Workouts: ",React.createElement("span",{className:"text-white/90 font-semibold"},zt.totalWorkouts)),React.createElement("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10"},"Avg/wk: ",React.createElement("span",{className:"text-white/90 font-semibold"},zt.avgPerWeek)))),React.createElement("div",{className:"text-[12px] text-white/55 mt-2"},"Goal: ",React.createElement("span",{className:"text-white/80 font-semibold"},Ge&&Ge.meta&&Ge.meta.goal?Ge.meta.goal:"\u2014"),React.createElement("span",{className:"mx-2 text-white/20"},"\u2022"),"Level: ",React.createElement("span",{className:"text-white/80 font-semibold"},Ge&&Ge.meta&&Ge.meta.level?Ge.meta.level:"\u2014"))),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Preview"),React.createElement("div",{className:"mt-1 inline-flex items-center gap-1 bg-black/20 border border-white/10 rounded-full p-1"},Array.from({length:$e}).map((Pa,Ga)=>React.createElement("button",{key:Ga,onClick:()=>vt(Ga),className:"px-3 py-1 rounded-full text-[12px] font-semibold "+(Ga===mi?"bg-white text-black":"text-white/80 hover:bg-white/10")},"W",Ga+1))))),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},ct.map((Pa,Ga)=>React.createElement("div",{key:Pa.key||Ga,className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},Pa.label),React.createElement("div",{className:"text-[10px] font-mono font-bold px-2 py-0.5 rounded-full border "+(Pa.status==="TRAIN"&&Pa.sessions.length?"border-emerald-400/30 bg-emerald-400/10 text-emerald-200":"border-white/10 bg-white/5 text-white/60")},Pa.status==="TRAIN"&&Pa.sessions.length?`${Pa.sessions.length}x`:"REST")),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},Pa.sessions&&Pa.sessions.length?(()=>{var ca=Pa.sessions[0],La=(ca.name||ca.title||"Session")+(Pa.sessions.length>1?` +${Pa.sessions.length-1} more`:""),fi=ca.intensity||"Moderate",ms=et(fi,ut)||{adjustedLabel:fi,capZone:ut,sessZone:fa(fi),adjZone:fa(fi)},ss=ms&&ms.adjustedLabel&&ms.adjustedLabel!==fi;return React.createElement(React.Fragment,null,React.createElement("div",{className:"line-clamp-2"},La),React.createElement("div",{className:"mt-1 text-[10px] font-mono"},React.createElement("span",{className:"text-white/45"},"Intensity:")," ",React.createElement("span",{className:"text-white/80 font-semibold"},fi),ss?React.createElement("span",{className:"ml-2 text-amber-200"},"\u2192 ",ms.adjustedLabel," ",React.createElement("span",{className:"text-white/35"},"(capacity)")):React.createElement("span",{className:"ml-2 text-emerald-200"},"(kept)")))})():"\u2014"))))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-bold uppercase tracking-wider text-white/80"},"Plan source"),At?React.createElement("label",{className:"mt-3 flex items-start gap-3 p-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 cursor-pointer"},React.createElement("input",{type:"radio",name:"src",checked:ma==="LAST_DRAFT",onChange:()=>Je("LAST_DRAFT")}),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},"Last draft from Plan Builder"),React.createElement("div",{className:"text-[11px] text-white/60 truncate"},At.name||"Draft"))):React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"No saved draft found. Create one in Plan Builder to enable \u201CLast draft\u201D."),React.createElement("div",{className:"mt-3 text-[10px] font-mono font-bold uppercase text-zinc-400"},"Quick templates"),React.createElement("div",{className:"mt-2 space-y-2"},J.map(Pa=>React.createElement("label",{key:Pa.id,className:"flex items-start gap-3 p-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/8 cursor-pointer"},React.createElement("input",{type:"radio",name:"src",checked:ma===Pa.id,onChange:()=>Je(Pa.id)}),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},Pa.name),React.createElement("div",{className:"text-[11px] text-white/60 truncate"},Pa.desc)))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-bold uppercase tracking-wider text-white/80"},"Assignment"),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Plan name"),React.createElement("input",{value:Oa,onChange:Pa=>He(Pa.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90",placeholder:"e.g., Hypertrophy A"})),ma==="LAST_DRAFT"&&At&&At.programDurationWeeks?React.createElement("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-white/60"},React.createElement("span",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Duration (weeks)"),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5 text-white/80 font-semibold"},At.programDurationWeeks),At.programMeta&&(At.programMeta.goal||At.programMeta.level)?React.createElement("span",{className:"text-white/50"},"\u2022 ",At.programMeta.goal||"\u2014"," \u2022 ",At.programMeta.level||"\u2014"):null):null,React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Start date"),React.createElement(nn,{value:Ca,onChange:ha,label:null,className:""})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Default time"),React.createElement(Bn,{value:K,onChange:aa,stepMin:15}))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/4 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-bold uppercase tracking-wider text-white/80"},"Nudges"),React.createElement("div",{className:"text-[11px] text-white/55"},"Simple reminders (demo)")),React.createElement("button",{type:"button",onClick:()=>la(Pa=>!Pa),className:"px-3 py-1.5 rounded-full border text-[10px] font-extrabold uppercase tracking-wider "+(Mt?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/12 bg-white/5 text-white/70")},Mt?"On":"Off")),Mt&&React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-white/75"},[["hydration","Hydration"],["sleep","Sleep"],["steps","Steps"],["protein","Protein"]].map(([Pa,Ga])=>React.createElement("label",{key:Pa,className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:!!di[Pa],onChange:ca=>Ua(La=>({...La,[Pa]:ca.target.checked}))}),React.createElement("span",null,Ga))))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-bold uppercase tracking-wider text-white/80"},"Preview week"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Review the weekly sessions before assigning.")),React.createElement("button",{type:"button",onClick:()=>{ks(Pa=>{var Ga=!Pa;return Ga&&uo(an()),Ga})},className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},Hs?"Hide":"Preview")),Hs&&Array.isArray(so)&&React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},so.map(Pa=>React.createElement("div",{key:Pa.key,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[12px] font-bold text-white/85"},Pa.label),React.createElement("div",{className:"mt-2 space-y-2"},(Pa.sessions||[]).length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"Rest / No sessions"):(Pa.sessions||[]).map((Ga,ca)=>React.createElement("div",{key:`${Pa.key}-${ca}`,className:"rounded-lg border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white/85 truncate"},Ga.title||Ga.name||"Session"),React.createElement("div",{className:"text-[11px] text-white/55 mt-0.5"},Ga.type||"Workout"," \u2022 ",Ga.duration||Ga.minutes||45," min \u2022 ",Ga.intensity||"Moderate")))))))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Confirmation"),React.createElement("div",{className:"mt-2 space-y-1 text-[12px] text-white/75"},React.createElement("div",null,"Program: ",React.createElement("span",{className:"text-white/90 font-semibold"},Oa)),React.createElement("div",null,"Duration: ",React.createElement("span",{className:"text-white/90 font-semibold"},$e)," week",$e===1?"":"s"),React.createElement("div",null,"Start: ",React.createElement("span",{className:"text-white/90 font-semibold"},xi(Wi))),React.createElement("div",null,"Ends: ",React.createElement("span",{className:"text-white/90 font-semibold"},xi(Wa))),React.createElement("div",null,"Workouts: ",React.createElement("span",{className:"text-white/90 font-semibold"},zt.totalWorkouts)," total")),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement("button",{disabled:!0,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-[12px] font-bold text-white/40 cursor-not-allowed"},"Assign to Group (soon)"))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{onClick:x,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Cancel"),React.createElement("button",{onClick:ui,className:"px-4 py-2 rounded-2xl border border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.15)] hover:bg-[rgba(77,233,255,0.22)] text-[12px] font-extrabold text-white"},"Assign")))),React.createElement("div",{className:"mt-4 text-[10px] text-white/45"},"Note: This is a \u201CTrainerize-style\u201D assign flow (client-first). Plan Builder remains the full editor."))):null},_i=({open:i,onClose:s})=>i?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-50 flex items-center justify-center bg-black/70 p-4"},React.createElement("div",{className:"glass-panel max-w-lg w-full rounded-3xl p-6 border border-emerald-500/40 bg-midnight-900"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",{className:"flex items-center gap-1.5"},React.createElement(_,{name:"Watch",size:20,className:"text-emerald-400"}),React.createElement("h2",{className:"text-lg font-semibold text-white"},"Connect your wearables")),React.createElement("button",{type:"button",onClick:s,className:"p-1 rounded-full hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(_,{name:"X",size:16}))),React.createElement("p",{className:"text-xs text-slate-400 mb-4"},"This preview mirrors your WearableConnectionFlow: in production we would securely connect to Apple Health, Google Fit, Garmin and other providers, then stream steps, sleep, HRV and workout data into your daily tiles, Trainer dashboards and AI Hub."),React.createElement("div",{className:"grid grid-cols-2 gap-3 mb-4 text-xs"},React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(_,{name:"Apple",size:14})," Apple Health"),React.createElement("span",{className:"text-[9px] text-slate-500"},"iPhone / Apple Watch")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(_,{name:"Activity",size:14})," Google Fit"),React.createElement("span",{className:"text-[9px] text-slate-500"},"Android & WearOS")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(_,{name:"Watch",size:14})," Garmin / Polar"),React.createElement("span",{className:"text-[9px] text-slate-500"},"Sports watches & head units")),React.createElement("button",{className:"flex flex-col items-start gap-1 bg-midnight-950 border border-midnight-700 hover:border-emerald-500 rounded-2xl p-3"},React.createElement("span",{className:"inline-flex items-center gap-1 text-emerald-300 font-medium"},React.createElement(_,{name:"CircleDot",size:14})," WHOOP / Oura"),React.createElement("span",{className:"text-[9px] text-slate-500"},"Recovery & readiness wearables"))),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-3 mb-4 text-[11px] text-slate-400"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"font-semibold text-slate-200"},"Data used in:")),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Client dashboard tiles (Recovery / Strain / Calories)"),React.createElement("li",null,"Trainer panels such as Linked client readiness and Daily Use views"),React.createElement("li",null,"Admin TSS scores, AI Hub risk models and Unified_AI_Triage signals"))),React.createElement("button",{type:"button",onClick:()=>{Bt("wearable.connected",{provider:"demo_multi"}),ta("Wearables connected",`This is a functional UI step.

Behind the scenes (real build): OAuth/permissions per provider, provider health checks, and a wearable.sync.summary event (daily) that rolls up into readiness, recovery tiles, trainer dashboards, and Admin Advanced Analytics.`),s&&s()},className:"w-full py-2.5 rounded-2xl bg-emerald-500 text-midnight-950 text-sm font-semibold hover:bg-emerald-400 transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"CheckCircle",size:18})," Mark wearables as connected"),React.createElement("p",{className:"mt-1.5 text-[9px] text-slate-500 text-center"},"In a real build this is where OAuth / permissions, error states and per-tenant provider toggles would live."))):null,ns=({children:i,onBack:s,onHome:x,canGoBack:S,devMode:u,toggleDevMode:$})=>React.createElement("div",{className:"min-h-screen w-full bg-midnight-950 bg-mesh text-slate-100 font-sans flex flex-col relative fof-app-shell"},u&&React.createElement(Os,{devMode:u,onToggle:$}),React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-glow pointer-events-none z-0"}),React.createElement("div",{className:"fixed top-4 left-4 z-50 flex gap-2 fof-nav-controls"},React.createElement("button",{onClick:x,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Reset & Home"},React.createElement(_,{name:"Home",size:20})),S&&React.createElement("button",{onClick:s,className:"p-3 bg-midnight-900/80 backdrop-blur border border-midnight-700 rounded-full hover:border-brand text-slate-400 hover:text-white transition-colors shadow-lg",title:"Go Back"},React.createElement(_,{name:"ArrowLeft",size:20}))),React.createElement("div",{className:"relative z-10 flex-1 flex flex-col fof-app-content"},i));function Zi(i,s=""){return typeof i=="string"||typeof i=="number"?i:s}function ci(i,s=""){try{if(typeof React!="undefined"&&React.isValidElement&&React.isValidElement(i))return i}catch(x){}return Zi(i,s)}var Cs=({label:i,subtext:s,onComplete:x})=>{var[S,u]=Ai(!1);return no(()=>{var $=setTimeout(x,1500);return()=>clearTimeout($)},[x]),React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-1 flex flex-col items-center justify-center min-h-screen bg-midnight-950"},React.createElement("div",{className:"relative mb-6"},React.createElement("div",{className:"w-16 h-16 border-4 border-midnight-700 border-t-brand rounded-full animate-spin"}),React.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},React.createElement(_,{name:"Cpu",className:"text-brand"}))),React.createElement("h2",{className:"text-xl font-mono font-bold tracking-widest uppercase text-white animate-pulse"},ci(i)),s&&React.createElement("p",{className:"text-slate-400 mt-2 text-sm"},ci(s))),React.createElement(_i,{open:S,onClose:()=>u(!1)}))},xt=({title:i,step:s,total:x,children:S,onBack:u,onHome:$,canGoBack:tt})=>React.createElement(ns,{onBack:u,onHome:$,canGoBack:tt},React.createElement("div",{className:"relative z-10 flex-1 flex flex-col"},React.createElement("div",{className:"mx-auto w-full max-w-6xl px-4 pt-6 pb-6 space-y-4"},React.createElement("div",{className:"glass-panel border border-white/12 rounded-2xl px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"fof-header-left flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-midnight-950 border border-white/12 flex items-center justify-center shrink-0"},React.createElement("span",{className:"font-display font-extrabold text-white text-[14px]"},"F")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] truncate"},ci(i)),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},"Goal-centric client onboarding"))),React.createElement("div",{className:"flex items-center gap-2 shrink-0 flex-wrap justify-end"},x>0&&React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/12 bg-white/5 px-3 py-1.5 text-[12px] font-semibold text-white/90"},"STEP ",s,"/",x),tt&&React.createElement("button",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-300/25 bg-emerald-400/10 px-3 py-1.5 text-[12px] font-semibold text-emerald-100 hover:bg-emerald-400/15 transition",onClick:u},"Back"))),x>0&&React.createElement("div",{className:"h-1.5 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full rounded-full bg-emerald-400/90 transition-all duration-500",style:{width:s/x*100+"%"}})),React.createElement("div",{className:"glass-panel border border-white/12 rounded-3xl p-5 md:p-7 overflow-hidden max-h-[82vh]"},React.createElement("div",{className:"max-h-[76vh] overflow-y-auto pr-1"},S))))),li=({onBack:i,onHome:s,canGoBack:x,conversionAnalytics:S,devMode:u,toggleDevMode:$})=>{var[tt,ue]=Ai("DASHBOARD"),[Ie,fe]=Ai("SUPER_ADMIN"),[B,X]=Ai(null),[ne,W]=Ai(null);no(()=>{window.__fofActorType="admin",window.__fofView="ADMIN_PORTAL",Bt("admin.view.opened",{view:tt,role:Ie})},[tt,Ie]);var J=(Je,Oa,He={})=>ta(Je,Oa,He),z=(Je,Oa=null)=>{ue(Je),Oa&&X(Oa)},H=()=>React.createElement("button",{onClick:()=>ue("DASHBOARD"),className:"mb-4 flex items-center gap-2 text-slate-400 hover:text-white transition-colors"},React.createElement(_,{name:"ArrowLeft",size:16})," Back to Dashboard"),Ht=()=>{var[Je,Oa]=Ai("LEADERBOARD");return Je==="DETAIL"&&B?React.createElement("div",{className:"space-y-6"},React.createElement("button",{onClick:()=>Oa("LEADERBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white"},React.createElement(_,{name:"ArrowLeft",size:16})," Back to Leaderboard"),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-brand"},React.createElement("h3",{className:"text-2xl font-bold text-white mb-1"},ci(B.name)),React.createElement("div",{className:"flex items-center gap-2 text-sm text-slate-400"},"TSS Score: ",React.createElement("span",{className:"text-brand font-bold text-lg"},B.score,"/100"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Client Adherence"),React.createElement("div",{className:"text-2xl font-bold text-white"},"87%")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Client Churn %"),React.createElement("div",{className:"text-2xl font-bold text-red-400"},"2.1%")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Marketplace Sales"),React.createElement("div",{className:"text-2xl font-bold text-brand-green"},"$4,250"),React.createElement("div",{className:"text-[9px] text-slate-500"},"Incl. Offline Logs")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-midnight-700"},React.createElement("div",{className:"text-xs uppercase text-slate-500 font-bold mb-2"},"Collab XP"),React.createElement("div",{className:"text-2xl font-bold text-brand-purple"},"1,250 XP")),React.createElement("div",{className:"bg-midnight-900 p-4 rounded-xl border border-red-900/50"},React.createElement("div",{className:"text-xs uppercase text-red-400 font-bold mb-2 flex items-center gap-2"},React.createElement(_,{name:"AlertTriangle",size:12})," AI Risk Flag"),React.createElement("div",{className:"text-sm text-white"},"Recovery focus Revenue, On track Engagement"))),React.createElement("div",{className:"flex gap-4 pt-4 border-t border-midnight-800"},React.createElement("button",{className:"flex-1 py-3 bg-brand text-white font-bold rounded-xl hover:bg-brand-dark flex items-center justify-center gap-2"},React.createElement(_,{name:"MessageSquare",size:18})," Send Targeted Message"),React.createElement("button",{className:"flex-1 py-3 bg-midnight-800 border border-red-500 text-red-400 font-bold rounded-xl hover:bg-red-900/20 flex items-center justify-center gap-2"},React.createElement(_,{name:"Flag",size:18})," Flag for QC Review"))):React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex justify-between items-end"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"TSS Leaderboard"),React.createElement("p",{className:"text-slate-400 text-sm"},"Proactive Trainer Success Score (0-100)")),React.createElement("div",{className:"text-xs bg-brand/10 text-brand px-3 py-1 rounded border border-brand/20"},"Excludes Off-Platform Clients")),React.createElement("div",{className:"glass-panel overflow-hidden rounded-xl"},React.createElement("table",{className:"w-full text-left text-sm"},React.createElement("thead",{className:"bg-midnight-900 text-slate-500 font-mono text-xs uppercase"},React.createElement("tr",null,React.createElement("th",{className:"p-4"},"Rank"),React.createElement("th",{className:"p-4"},"Trainer"),React.createElement("th",{className:"p-4"},"TSS",React.createElement(yn,{devMode:u,emits:["trainer.tss.calculated","trainer.qc.flagged"]})),React.createElement("th",{className:"p-4"},"Trend"),React.createElement("th",{className:"p-4"},"Action"))),React.createElement("tbody",{className:"divide-y divide-midnight-700"},[{id:1,name:"Alex Johnson",score:98,trend:"UP"},{id:2,name:"Alex Johnson",score:94,trend:"STABLE"},{id:3,name:"Davide P.",score:72,trend:"DOWN",risk:!0}].map((He,Ca)=>React.createElement("tr",{key:He.id,className:"hover:bg-midnight-800/50 transition-colors"},React.createElement("td",{className:"p-4 font-bold"},"#",Ca+1),React.createElement("td",{className:"p-4 flex items-center gap-2 font-bold text-white"},He.name," ",He.risk&&React.createElement(_,{name:"AlertCircle",size:14,className:"text-red-500"})),React.createElement("td",{className:"p-4"},React.createElement("span",{className:"px-2 py-1 rounded font-bold "+(He.score>90?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400")},ci(He.score))),React.createElement("td",{className:"p-4 text-slate-400"},ci(He.trend)),React.createElement("td",{className:"p-4"},React.createElement("button",{onClick:()=>{X(He),Oa("DETAIL")},className:"text-brand hover:underline"},"Deep Dive"))))))))},Nt=()=>{var[Je,Oa]=Ai(!1);return React.createElement("div",{className:"space-y-6 relative"},React.createElement(H,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("h2",{className:"text-2xl font-bold text-white"},"User Management"),React.createElement("button",{className:"px-4 py-2 bg-midnight-800 border border-midnight-700 rounded-lg text-sm hover:border-brand flex items-center gap-2"},React.createElement(_,{name:"Layers",size:16})," Bulk Actions")),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4"},["All","Clients","Trainers","Partners","Specialists"].map(He=>React.createElement("button",{key:He,className:"px-4 py-2 rounded-lg bg-midnight-900 hover:bg-midnight-800 text-sm font-medium transition-colors"},ci(He)))),Je&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/80 flex items-center justify-center z-50 p-4"},React.createElement("div",{className:"bg-midnight-900 border border-orange-500/50 p-6 rounded-2xl max-w-lg w-full shadow-lg"},React.createElement("div",{className:"flex items-center gap-3 mb-4 text-orange-400"},React.createElement(_,{name:"AlertTriangle",size:24}),React.createElement("h3",{className:"font-bold text-lg"},"Resolve Hybrid Role Conflict")),React.createElement("p",{className:"text-slate-300 text-sm mb-4"},"User ",React.createElement("strong",null,"FitCorp Gym")," has conflicting permissions between 'Partner' and 'Trainer' roles."),React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl mb-6 space-y-2"},React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Permission:"),React.createElement("span",{className:"text-white"},"Marketplace Listing Limit")),React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Partner Role:"),React.createElement("span",{className:"text-green-400"},"Unlimited")),React.createElement("div",{className:"flex justify-between text-sm"},React.createElement("span",{className:"text-slate-500"},"Trainer Role:"),React.createElement("span",{className:"text-red-400"},"Max 5"))),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{onClick:()=>Oa(!1),className:"flex-1 py-3 bg-brand text-white font-bold rounded-xl"},"Apply 'Partner' Rules (Override)"),React.createElement("button",{onClick:()=>Oa(!1),className:"flex-1 py-3 border border-midnight-700 hover:bg-midnight-800 rounded-xl text-slate-400"},"Cancel")))),React.createElement("div",{className:"space-y-3"},[{name:"John Doe",role:"Client",status:"Active"},{name:"FitCorp Gym",role:"Partner",status:"Active",edge:!0},{name:"Dr. Strange",role:"Specialist",status:"Suspended"}].map((He,Ca)=>React.createElement("div",{key:Ca,className:"glass-panel p-4 rounded-xl flex items-center justify-between group"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-midnight-800 flex items-center justify-center font-bold text-slate-500"},He.name[0]),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white flex items-center gap-2"},He.name,He.edge&&React.createElement("button",{onClick:()=>Oa(!0),className:"text-[9px] bg-orange-500/20 text-orange-400 px-1 rounded border border-orange-500/30 hover:bg-orange-500 hover:text-white transition-colors cursor-pointer"},"HYBRID ROLE (Resolve)")),React.createElement("div",{className:"text-xs text-slate-500"},He.role," \u2022 ",He.status))),React.createElement("div",{className:"flex gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity"},React.createElement("button",{title:"Edit",className:"p-2 hover:bg-brand/20 rounded text-brand"},React.createElement(_,{name:"Edit2",size:16})),React.createElement("button",{title:"Impersonate (Logged)",className:"p-2 hover:bg-purple-500/20 rounded text-purple-400"},React.createElement(_,{name:"Eye",size:16})),React.createElement("button",{title:"Message",className:"p-2 hover:bg-blue-500/20 rounded text-blue-400"},React.createElement(_,{name:"MessageSquare",size:16})),React.createElement("button",{title:"Suspend",className:"p-2 hover:bg-yellow-500/20 rounded text-yellow-400"},React.createElement(_,{name:"PauseCircle",size:16})),React.createElement("button",{title:"Delete",onClick:()=>{Bt("admin.action.performed",{action:"user.delete.clicked"}),ta("Delete user (confirmation)",`In a real build this would open a confirmation dialog and (if confirmed) anonymize data per policy, then emit user.status.changed and audit_log entries (who/when/why).

This prototype keeps the UX real-world and moves implementation details into this popup.`)},className:"p-2 hover:bg-red-500/20 rounded text-red-400"},React.createElement(_,{name:"Trash2",size:16})))))))},U=()=>React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Content Management"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"MasterContentLibrary for workouts, programs, habits, and nutrition templates")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-purple-500/10 text-purple-300 border border-purple-500/40"},"Admin Only"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(_,{name:"Sparkles",size:12})," AI Assist"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(_,{name:"Layers",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Program Library"),React.createElement("div",{className:"text-xs text-slate-400"},"IC flows, solo plans, hybrid templates"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Centralised library of all training plans used across tenants and trainers.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(_,{name:"Dumbbell",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Workout Blocks"),React.createElement("div",{className:"text-xs text-slate-400"},"Exercises, supersets, progressions"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Reusable blocks that feed into MasterContentLibrary for workouts.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(_,{name:"FileText",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Habits & Messaging"),React.createElement("div",{className:"text-xs text-slate-400"},"Habit packs, check-in scripts, nudges"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Templates used in Daily Use flows for nudges, check-ins, and auto-messages.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-lime-500/10 text-lime-400"},React.createElement(_,{name:"Utensils",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Nutrition Library"),React.createElement("div",{className:"text-xs text-slate-400"},"Meal plans, recipe packs, guidelines"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"MasterContentLibrary_Nutrition for nutrition-only and hybrid plans.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-fuchsia-500/10 text-fuchsia-400"},React.createElement(_,{name:"Sparkles",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Content Suggestions"),React.createElement("div",{className:"text-xs text-slate-400"},"Unified_AI_Triage \u2192 suggested content"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"In production this would surface AI-flagged content gaps by goal / condition.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-rose-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(_,{name:"ShieldCheck",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Content Governance"),React.createElement("div",{className:"text-xs text-slate-400"},"Approvals, localisation, tenant overrides"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Controls which content is global vs tenant-specific, and who can edit what.")))),Q=()=>React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"AI Hub & Unified Triage"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Central place for AI triage rules, risk flags, and AI-suggested actions across the ecosystem.")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(_,{name:"Sparkles",size:12})," AI Core"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-sky-500/10 text-sky-300 border border-sky-500/40"},"Read-Only preview"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-brand transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(_,{name:"Filter",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Unified AI Triage Rules"),React.createElement("div",{className:"text-xs text-slate-400"},"Churn, compliance, injury risk, opportunity"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Mirrors Unified_AI_Triage from your flows: defines which signals trigger alerts for trainers, admins, and specialists.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-red-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-red-500/10 text-red-400"},React.createElement(_,{name:"AlertTriangle",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Risk & Compliance Flags"),React.createElement("div",{className:"text-xs text-slate-400"},"Imminent churn, at-risk programmes, policy issues"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Surfaces AI-calculated risk segments that feed TSS, Compliance / At-Risk, and content moderation queues.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-emerald-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(_,{name:"Lightbulb",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Suggestions & Playbooks"),React.createElement("div",{className:"text-xs text-slate-400"},"Recommended nudges, plan changes, upsell opportunities"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"In production this would show suggested actions (message templates, plan tweaks, offers) by segment and severity.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-cyan-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-cyan-500/10 text-cyan-400"},React.createElement(_,{name:"Database",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Signals & Data Sources"),React.createElement("div",{className:"text-xs text-slate-400"},"App usage, check-ins, payments, wearables"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Lists where the AI triage engine pulls from: Daily Use, payments, support tickets, Content, and WearableConnectionFlow.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-purple-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-purple-500/10 text-purple-400"},React.createElement(_,{name:"FlaskConical",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Experiments & Tuning"),React.createElement("div",{className:"text-xs text-slate-400"},"Model variants, thresholds, A/B experiments"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Placeholder for how you would iterate on rules and models powering Unified_AI_Triage.")),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700 hover:border-rose-500/60 transition-colors cursor-pointer"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(_,{name:"Shield",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Governance"),React.createElement("div",{className:"text-xs text-slate-400"},"Review flows, overrides, auditability"))),React.createElement("p",{className:"text-[11px] text-slate-500"},"Connects to Security / Audit modules to explain and review AI decisions, overrides, and human-in-the-loop flows.")))),w=()=>{var[Je,Oa]=Ai("OVERVIEW"),[He,Ca]=Ai([]);no(()=>{var Ge=()=>Ca(Ho.read().slice().reverse());Ge();var $e=setInterval(Ge,1200);return()=>clearInterval($e)},[]);var ha=Ge=>ei.filter($e=>$e.event_name===Ge).length,K=[{label:"Onboarding Started",event:"onboarding.started"},{label:"Step Completed",event:"onboarding.step.completed"},{label:"Wearable Connected",event:"wearable.connected"},{label:"Subscription Started",event:"subscription.started"}].map(Ge=>({...Ge,value:ha(Ge.event)})),aa=()=>{Ho.clear(),Bt("admin.action.performed",{action:"analytics.clear_event_log"}),J("Event log cleared",`This cleared the local demo event_log.

In production, only privileged roles can run deletes, and typically analytics events remain append-only.`)},[Mt,la]=Ai("7D"),xa=React.useMemo(()=>{var Ge=Date.now();if(Mt==="TODAY"){var $e=new Date;return $e.setHours(0,0,0,0),$e.getTime()}return Mt==="30D"?Ge-30*24*60*60*1e3:Ge-7*24*60*60*1e3},[Mt]),ei=React.useMemo(()=>(He||[]).filter(Ge=>{try{var $e=new Date(Ge.ts).getTime();return!isNaN($e)&&$e>=xa}catch($e){return!1}}),[He,xa]),di=Ge=>ei.filter($e=>$e.event_name===Ge).length,Ua=ei.length,sa=ei.filter(Ge=>Ge.event_name==="admin.action.performed").length,vt=[{k:"events",label:"Events logged",value:Ua,sub:"event_log (filtered)",tone:"text-white"},{k:"onb",label:"Onboarding started",value:di("onboarding.started"),sub:"onboarding.started",tone:"text-white"},{k:"wear",label:"Wearables connected",value:di("wearable.connected"),sub:"wearable.connected",tone:"text-emerald-300"},{k:"sub",label:"Subscription started",value:di("subscription.started"),sub:"subscription.started",tone:"text-white"},{k:"audit",label:"Admin actions",value:sa,sub:"admin.action.performed",tone:"text-amber-300"}];return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Advanced Analytics",React.createElement(yn,{devMode:u,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Funnels, cohorts, auditability and AI governance \u2014 mapped to the Admin Analytics contract (event_log + daily_snapshot + entity_state + ai_decision_audit).")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{Bt("admin.action.performed",{action:"analytics.seed_demo"}),Ho.push({event_id:xs(),event_name:"onboarding.started",ts:ps(),tenant_id:"tenant_demo",actor_type:"user",actor_id:"demo_user",session_id:window.__fofSessionId,view:"ONBOARDING",payload:{source:"seed"}})},className:"px-3 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Seed 1 demo event"),React.createElement("button",{onClick:aa,className:"px-3 py-2 rounded-xl bg-red-500/15 border border-red-500/30 text-red-300 text-xs hover:bg-red-500/25"},"Clear log"))),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4 flex-wrap"},[{k:"OVERVIEW",t:"Overview",i:"BarChart3"},{k:"FUNNELS",t:"Funnels",i:"GitBranch"},{k:"EVENTS",t:"Event Stream",i:"Activity"},{k:"AUDIT",t:"Audit Log",i:"ScrollText"},{k:"AI",t:"AI Governance",i:"Shield"}].map(Ge=>React.createElement("button",{key:Ge.k,onClick:()=>Oa(Ge.k),className:"px-4 py-2 rounded-xl text-xs font-semibold border "+(Je===Ge.k?"bg-brand/15 border-brand text-brand":"bg-midnight-900 border-midnight-700 text-slate-400 hover:border-brand/60")},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:Ge.i,size:14}),ci(Ge.t)))),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between gap-4 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-sm font-bold text-white"},"Report range"),React.createElement("span",{className:"text-[9px] font-mono text-slate-500"},"filters events + KPIs + funnels")),React.createElement("div",{className:"flex gap-2"},[{k:"TODAY",t:"Today"},{k:"7D",t:"7d"},{k:"30D",t:"30d"}].map(Ge=>React.createElement("button",{key:Ge.k,onClick:()=>la(Ge.k),className:"px-3 py-2 rounded-xl text-xs font-semibold border "+(Mt===Ge.k?"bg-brand/15 border-brand text-brand":"bg-midnight-900 border-midnight-700 text-slate-300 hover:border-brand/60")},Ge.t)))),React.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"},vt.map(Ge=>React.createElement("div",{key:Ge.k,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},Ge.label),React.createElement("div",{className:"text-2xl font-bold mt-1 "+Ge.tone},Ge.value),React.createElement("div",{className:"text-[9px] text-slate-500 mt-1 font-mono"},Ge.sub)))),ei.length===0&&React.createElement("div",{className:"mt-4 bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold"},"No data yet for this range"),React.createElement("div",{className:"text-xs text-slate-400 mt-1"},"To generate data, run any client onboarding steps, connect wearables, or perform admin actions (Users / Imports).")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{Bt("admin.action.performed",{action:"analytics.quick_demo_seed",range:Mt});var Ge=Date.now(),$e=(Xa,mi,xi={})=>{Ho.push({event_id:xs(),event_name:Xa,ts:new Date(Ge-mi*60*1e3).toISOString(),tenant_id:"tenant_demo",actor_type:"user",actor_id:"demo_user",session_id:window.__fofSessionId,view:"DEMO",payload:xi})};$e("onboarding.started",55,{source:"quick_demo"}),$e("onboarding.step.completed",52,{step_id:"STEP_01",step_index:1}),$e("onboarding.step.completed",50,{step_id:"STEP_02",step_index:2}),$e("wearable.connected",45,{provider:"demo_multi"}),$e("subscription.started",30,{plan:"TRIAL",source:"onboarding"}),ta("Demo data added",`A small demo dataset was generated so you can see KPIs, funnels, event stream and audit log working.

Tip: turn Dev Mode ON to see live events as you click.`)},className:"px-3 py-2 rounded-xl bg-brand text-white text-xs font-semibold hover:bg-brand/90"},"Run quick demo"),React.createElement("button",{onClick:()=>ta("Generate real data",`Quick ways to generate real data in this prototype:

1) Client Journey \u2192 progress through onboarding steps
2) Connect wearables (Mark wearables as connected)
3) Finish onboarding to reach dashboard
4) Admin Portal \u2192 Users (delete/suspend) or Imports (start import)

Then return to Admin \u2192 Advanced Analytics.`),className:"px-3 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs text-slate-200 hover:border-brand/60"},"How to generate data")))))),Je==="OVERVIEW"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Active Tenants (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"12"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"daily_snapshot.tenant_active_7d")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Onboarding Conversion"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"38%"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"KPI: trial-to-paid / activation")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Open AI Flags"),React.createElement("div",{className:"text-2xl font-bold text-amber-300 mt-1"},"7"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"ai.signal.raised \u2192 queues")),React.createElement("div",{className:"glass-panel p-4 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-slate-500 font-bold"},"Support Backlog"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"19"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},"ticket_state.backlog"))),Je==="FUNNELS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h3",{className:"font-bold text-white"},"Onboarding \u2192 Activation Funnel"),React.createElement("button",{onClick:()=>J("Funnel logic",`Funnels are computed from event_log using canonical event names.

Example events:
- onboarding.started
- onboarding.step.completed
- wearable.connected
- subscription.started

Rollup target: daily_snapshot.funnel_rollups (by tenant, plan_type, segment).`),className:"text-xs text-brand hover:underline"},"How this is computed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},K.map(Ge=>React.createElement("div",{key:Ge.event,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500"},ci(Ge.label)),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},ci(Ge.value)),React.createElement("div",{className:"text-[9px] text-slate-500 mt-1 font-mono"},ci(Ge.event))))),React.createElement("div",{className:"mt-4 text-[11px] text-slate-400"},"Tip: run the onboarding, connect wearables, start subscription \u2014 then return here to see the event stream populate.")),Je==="EVENTS"&&React.createElement("div",{className:"glass-panel rounded-2xl border border-midnight-700 overflow-hidden"},React.createElement("div",{className:"p-4 flex items-center justify-between border-b border-midnight-800"},React.createElement("div",{className:"font-bold text-white"},"Event Stream (event_log)"),React.createElement("div",{className:"text-xs text-slate-500"},"Latest ",Math.min(ei.length,50)," shown")),React.createElement("div",{className:"max-h-[420px] overflow-auto"},React.createElement("table",{className:"w-full text-left text-xs"},React.createElement("thead",{className:"bg-midnight-900 text-slate-500 font-mono uppercase"},React.createElement("tr",null,React.createElement("th",{className:"p-3"},"Time"),React.createElement("th",{className:"p-3"},"Event"),React.createElement("th",{className:"p-3"},"Actor"),React.createElement("th",{className:"p-3"},"Tenant"),React.createElement("th",{className:"p-3"},"Details"))),React.createElement("tbody",{className:"divide-y divide-midnight-800"},ei.slice(0,50).map(Ge=>React.createElement("tr",{key:Ge.event_id,className:"hover:bg-midnight-800/40"},React.createElement("td",{className:"p-3 text-slate-400 whitespace-nowrap"},new Date(Ge.ts).toLocaleString()),React.createElement("td",{className:"p-3 text-white font-semibold"},ci(Ge.event_name)),React.createElement("td",{className:"p-3 text-slate-300"},Ge.actor_type,":",Ge.actor_id),React.createElement("td",{className:"p-3 text-slate-400"},ci(Ge.tenant_id)),React.createElement("td",{className:"p-3"},React.createElement("button",{onClick:()=>J("Event details",`Full event envelope (contract):

`+JSON.stringify(Ge,null,2)),className:"text-brand hover:underline"},"View")))),ei.length===0&&React.createElement("tr",null,React.createElement("td",{className:"p-4 text-slate-500",colSpan:"5"},"No events yet. Use the app flows, then return here.")))))),Je==="AUDIT"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("h3",{className:"font-bold text-white"},"Audit Log (admin.action.performed)"),React.createElement("button",{onClick:()=>J("Audit contract",`Every admin action must write to audit_log (append-only):
- who (admin_id + role)
- what (action)
- target entity (type/id)
- before/after snapshot refs
- why (reason)
- timestamp + tenant scope

UI reads audit_log for traceability and compliance.`),className:"text-xs text-brand hover:underline"},"Contract")),React.createElement("div",{className:"space-y-2"},ei.filter(Ge=>Ge.event_name==="admin.action.performed").slice(0,12).map(Ge=>{var $e;return React.createElement("div",{key:Ge.event_id,className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold"},(($e=Ge.payload)==null?void 0:$e.action)||"admin.action.performed"),React.createElement("div",{className:"text-[11px] text-slate-500 mt-1"},new Date(Ge.ts).toLocaleString()," \u2022 ",Ge.actor_id," \u2022 ",Ge.tenant_id)),React.createElement("button",{onClick:()=>J("Audit entry",JSON.stringify(Ge,null,2)),className:"text-xs text-brand hover:underline"},"Open"))}),ei.filter(Ge=>Ge.event_name==="admin.action.performed").length===0&&React.createElement("div",{className:"text-sm text-slate-500"},"No admin actions logged yet. Try actions like \u201CStart Import\u201D, \u201CDelete user\u201D, etc."))),Je==="AI"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("h3",{className:"font-bold text-white"},"AI Governance (ai_decision_audit)"),React.createElement("button",{onClick:()=>J("AI governance mapping",`AI Hub must write to ai_decision_audit:
- ai.signal.raised (model + threshold)
- ai.decision.recommended (action)
- ai.decision.overridden (who/why)
- outcome (true/false positive when known)

These records feed Quality Control, Safety, and Admin reporting.`),className:"text-xs text-brand hover:underline"},"Mapping")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"Override Rate (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"6%"),React.createElement("div",{className:"text-[9px] text-slate-500 mt-1"},"KPI: ai.decision.overridden / ai.signal.raised")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"False Positives (demo)"),React.createElement("div",{className:"text-2xl font-bold text-white mt-1"},"12"),React.createElement("div",{className:"text-[9px] text-slate-500 mt-1"},"Requires outcomes feedback loop")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-4"},React.createElement("div",{className:"text-[11px] text-slate-500 uppercase"},"Open Recovery focus-Risk Flags"),React.createElement("div",{className:"text-2xl font-bold text-rose-300 mt-1"},"2"),React.createElement("div",{className:"text-[9px] text-slate-500 mt-1"},"AI Hub \u2192 QC queue"))),React.createElement("div",{className:"mt-4 flex gap-3"},React.createElement("button",{onClick:()=>{Bt("ai.signal.raised",{model:"readiness_v1",threshold:.72,severity:"medium"}),J("AI signal raised","Logged ai.signal.raised (demo).")},className:"px-4 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Log demo AI signal"),React.createElement("button",{onClick:()=>{Bt("ai.decision.overridden",{reason:"human_review",original:"flag_churn_risk"}),J("AI override recorded","Logged ai.decision.overridden (demo).")},className:"px-4 py-2 rounded-xl bg-midnight-900 border border-midnight-700 text-xs hover:border-brand"},"Log demo override"))))},L=()=>{var He;var[Je,Oa]=Ai("REVENUE");return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex gap-4 mb-6"},React.createElement("button",{onClick:()=>Oa("REVENUE"),className:"px-4 py-2 rounded-lg font-bold "+(Je==="REVENUE"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Revenue & Payouts"),React.createElement("button",{onClick:()=>Oa("REFUNDS"),className:"px-4 py-2 rounded-lg font-bold "+(Je==="REFUNDS"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Refund Queue"),React.createElement("button",{onClick:()=>Oa("RECON"),className:"px-4 py-2 rounded-lg font-bold "+(Je==="RECON"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Reconciliation")),Je==="REFUNDS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Refund Requests (AD_Refund_Queue)"),React.createElement("div",{ref:pbRootRefV1,tabIndex:0,className:"space-y-4 outline-none",onMouseDown:()=>{try{pbRootRefV1.current&&pbRootRefV1.current.focus&&pbRootRefV1.current.focus()}catch(Ca){}}},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl"},React.createElement("div",{className:"flex justify-between mb-2"},React.createElement("span",{className:"font-bold text-white"},"Client: ",String((selectedClient==null?void 0:selectedClient.name)||((He=(window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||[])[0])==null?void 0:He.name)||"Client")),React.createElement("span",{className:"text-sm text-brand"},"$49.00")),React.createElement("p",{className:"text-sm text-slate-400 mb-4"},'Reason: "Double charged for subscription."'),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{className:"px-4 py-2 bg-brand-green text-white text-xs font-bold rounded flex items-center gap-2"},React.createElement(_,{name:"Check",size:12})," Approve (Trigger API)"),React.createElement("button",{className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/30 text-xs font-bold rounded flex items-center gap-2"},React.createElement(_,{name:"X",size:12})," Deny (Notify)"))))),Je==="RECON"&&React.createElement("div",{className:"p-10 text-center border-2 border-dashed border-midnight-700 rounded-2xl"},React.createElement(_,{name:"RefreshCw",size:32,className:"mx-auto text-slate-500 mb-4"}),React.createElement("h3",{className:"text-xl font-bold text-white"},"Gateway Reconciliation"),React.createElement("p",{className:"text-slate-400"},"Matching Platform Logs vs. Stripe/PayPal Reports..."),React.createElement("button",{className:"mt-4 px-6 py-2 bg-midnight-800 rounded-lg hover:bg-brand hover:text-white transition-colors"},"Run Match")),Je==="REVENUE"&&React.createElement("div",{className:"text-slate-500 text-center p-10"},"Revenue Dashboards Loaded..."))},ut=()=>{var[Je,Oa]=Ai("TICKETS");return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:()=>Oa("TICKETS"),className:"flex-1 py-3 rounded-xl border "+(Je==="TICKETS"?"border-brand bg-brand/10 text-brand":"border-midnight-700 bg-midnight-900 text-slate-400")},"Support Tickets"),React.createElement("button",{onClick:()=>Oa("MOD"),className:"flex-1 py-3 rounded-xl border "+(Je==="MOD"?"border-brand bg-brand/10 text-brand":"border-midnight-700 bg-midnight-900 text-slate-400")},"Moderation Queue")),Je==="TICKETS"&&React.createElement("div",{className:"glass-panel p-4 rounded-xl"},React.createElement("div",{className:"flex justify-between border-b border-midnight-700 pb-2 mb-2"},React.createElement("span",{className:"font-bold"},"Subject"),React.createElement("span",{className:"text-sm text-slate-500"},"Priority")),React.createElement("div",{className:"flex justify-between py-2"},React.createElement("span",null,"Login Issue - User #42"),React.createElement("span",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded"},"HIGH"))),Je==="MOD"&&React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"bg-gradient-to-r from-purple-900/20 to-brand/10 p-6 rounded-2xl border border-white/10"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(_,{name:"Sparkles",className:"text-purple-400"}),React.createElement("h3",{className:"font-bold text-white"},"AI Review Triage")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl opacity-70"},React.createElement("div",{className:"text-xs uppercase font-bold text-slate-500"},"Auto-Rejected (Spam)"),React.createElement("div",{className:"text-2xl font-bold text-red-400"},"142")),React.createElement("div",{className:"bg-midnight-950 p-4 rounded-xl border border-brand/50"},React.createElement("div",{className:"text-xs uppercase font-bold text-brand"},"Flagged for Manual Review"),React.createElement("div",{className:"text-2xl font-bold text-white"},"3"),React.createElement("button",{className:"mt-2 w-full py-2 bg-brand text-white text-xs font-bold rounded"},"Review Queue")))),React.createElement("div",{className:"glass-panel p-6 rounded-xl"},React.createElement("h3",{className:"font-bold mb-4"},"Reported Content"),React.createElement("div",{className:"p-3 bg-midnight-950 rounded flex justify-between items-center"},React.createElement("span",null,"Post #9923 (Inappropriate)"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"text-xs bg-red-500 text-white px-3 py-1 rounded"},"Remove"),React.createElement("button",{className:"text-xs bg-midnight-700 px-3 py-1 rounded"},"Ignore"))))))},ot=()=>{var[Je,Oa]=Ai("WIZARD");return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-2xl font-bold text-white"},"Data Imports"),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Bulk_Import_Wizard and Post_Import_Processing for clients, trainers and content \u2013 matching your admin flowcharts.")),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-sky-500/10 text-sky-300 border border-sky-500/40"},"Admin & Ops"),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-500/10 text-emerald-300 border border-emerald-500/40 flex items-center gap-1"},React.createElement(_,{name:"Sparkles",size:12})," Assisted by AI Hub"))),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4"},React.createElement("button",{onClick:()=>Oa("WIZARD"),className:"px-4 py-2 rounded-lg text-xs font-semibold "+(Je==="WIZARD"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Bulk Import Wizard"),React.createElement("button",{onClick:()=>Oa("POST"),className:"px-4 py-2 rounded-lg text-xs font-semibold "+(Je==="POST"?"bg-brand text-white":"bg-midnight-900 text-slate-400")},"Post-Import Processing")),Je==="WIZARD"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",null,React.createElement("h3",{className:"text-lg font-semibold text-white"},"Bulk_Import_Wizard"),React.createElement("p",{className:"text-xs text-slate-400"},"Upload CSV or integrate with external systems to migrate clients, trainers or content into FlowOFIT.")),React.createElement("button",{type:"button",onClick:()=>{Bt("import.started",{source:"csv_demo"}),ta("Start Import",`This starts the Bulk Import Wizard.

In production: upload \u2192 schema mapping \u2192 validation/dry-run \u2192 commit \u2192 post-import processing.

Admin Analytics mapping: import.started / import.mapping.completed / import.validation.completed / import.committed / import.failed events.`)},className:"px-3 py-2 rounded-xl bg-brand text-white text-xs font-semibold hover:bg-brand/90 flex items-center gap-1"},React.createElement(_,{name:"UploadCloud",size:14})," Start Import")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 text-xs"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"1. Select source"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Trainerize / PTminder export, spreadsheets, legacy CRM, or partner tenant.")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"2. Map fields"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Map columns to FlowOFIT schema (clients, plans, tags, consent flags).")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4"},React.createElement("div",{className:"font-semibold text-slate-100 mb-1"},"3. Validate & dry-run"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Preview how many rows will be created, updated or rejected before committing."))),React.createElement("div",{className:"mt-4 bg-midnight-950 border border-dashed border-midnight-700 rounded-xl p-4 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Connected modules"),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Feeds User Management and TrainerDashboard client lists."),React.createElement("li",null,"Seeds MasterContentLibrary when importing standard programs."),React.createElement("li",null,"Optionally triggers welcome nudges via AI Hub after import completes.")))),Je==="POST"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",null,React.createElement("h3",{className:"text-lg font-semibold text-white"},"Post_Import_Processing"),React.createElement("p",{className:"text-xs text-slate-400"},"Resolve duplicates, missing consent and segment newly imported records for automation.")),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[9px] bg-purple-500/10 text-purple-300 border border-purple-500/40 flex items-center gap-1"},React.createElement(_,{name:"Sparkles",size:12})," Unified_AI_Triage Signals")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-xs"},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4 space-y-2"},React.createElement("div",{className:"font-semibold text-slate-100"},"Deduplication & merge"),React.createElement("p",{className:"text-[11px] text-slate-400"},"AI-assisted matching on name, email, phone and external IDs to avoid double-counting clients."),React.createElement("button",{type:"button",onClick:()=>ta("Info"," dedupe rules not editable here yet."),className:"mt-2 inline-flex items-center gap-1 px-3 py-1.5 rounded-xl bg-midnight-800 text-slate-200 hover:bg-midnight-700"},React.createElement(_,{name:"Settings2",size:13})," Adjust rules")),React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-xl p-4 space-y-2"},React.createElement("div",{className:"font-semibold text-slate-100"},"Segmentation & routing"),React.createElement("p",{className:"text-[11px] text-slate-400"},"Tag imported cohorts for TSS, automations and marketplace eligibility based on plan, goal and source."),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Flag high-value B2B cohorts for Account Management."),React.createElement("li",null,"Route at-risk imports into Compliance / At-Risk segments."),React.createElement("li",null,"Sync key tags into TrainerDashboard filters.")))),React.createElement("div",{className:"mt-4 bg-midnight-950 border border-dashed border-midnight-700 rounded-xl p-4 text-[11px] text-slate-400"},React.createElement("div",{className:"font-semibold text-slate-200 mb-1"},"Output destinations"),React.createElement("ul",{className:"list-disc list-inside space-y-1"},React.createElement("li",null,"Updates Admin Analytics funnels for IC and linked client growth."),React.createElement("li",null,"Feeds AI Hub models (Unified_AI_Triage) with fresh cohort metadata."),React.createElement("li",null,"Optionally pushes summary back to CRM or warehouse.")))))},ht=()=>{var[Je,Oa]=Ai("TRIAGE");return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Marketplace Management"),React.createElement("div",{className:"flex gap-2 border-b border-midnight-700 pb-4 mb-4 overflow-x-auto"},React.createElement("button",{onClick:()=>Oa("TRIAGE"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="TRIAGE"?"bg-purple-600 text-white":"text-slate-400")},"AI Triage"),React.createElement("button",{onClick:()=>Oa("LISTINGS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="LISTINGS"?"bg-brand text-white":"text-slate-400")},"Live Listings"),React.createElement("button",{onClick:()=>Oa("TX"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="TX"?"bg-brand text-white":"text-slate-400")},"Transactions"),React.createElement("button",{onClick:()=>Oa("ADS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="ADS"?"bg-orange-500 text-white":"text-slate-400")},"Ads Approval"),React.createElement("button",{onClick:()=>Oa("PARTNERS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="PARTNERS"?"bg-teal-500 text-white":"text-slate-400")},"Partner Apps"),React.createElement("button",{onClick:()=>Oa("EVENTS"),className:"px-4 py-2 rounded-lg whitespace-nowrap font-bold "+(Je==="EVENTS"?"bg-blue-600 text-white":"text-slate-400")},"Events Queue")),Je==="TRIAGE"&&React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"p-6 bg-gradient-to-br from-purple-900/30 to-midnight-900 border border-purple-500/30 rounded-2xl"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(_,{name:"Sparkles",className:"text-purple-400"}),React.createElement("h3",{className:"font-bold text-white text-lg"},"AI Pre-Screening")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl"},React.createElement("div",{className:"text-xs text-slate-500 font-bold uppercase"},"Auto-Approved"),React.createElement("div",{className:"text-2xl text-green-400 font-bold"},"1,204"),React.createElement("p",{className:"text-[9px] text-slate-600"},"On track risk score < 10")),React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl border border-red-500/30"},React.createElement("div",{className:"text-xs text-red-400 font-bold uppercase"},"Flagged for Review"),React.createElement("div",{className:"text-2xl text-white font-bold"},"12"),React.createElement("p",{className:"text-[9px] text-slate-600"},"Potential policy violation")))),React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h4",{className:"font-bold text-white mb-4"},"Review Queue (Flagged)"),React.createElement("div",{className:"space-y-3"},[{id:1,title:"Super Mass Gainer X",seller:"GymBros Inc",reason:"Unverified Health Claim"},{id:2,title:"Yoga Mat - 100% Magic",seller:"SpiritualStore",reason:"Suspicious Keywords"}].map(He=>React.createElement("div",{key:He.id,className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},ci(He.title)),React.createElement("div",{className:"text-xs text-slate-500"},"Seller: ",He.seller),React.createElement("div",{className:"text-xs text-red-400 mt-1"},"Flag: ",Zi(He.reason))),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500"},"Approve"),React.createElement("button",{className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-500"},"Reject"))))))),Je==="ADS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Geo-Discovery Ads Approval"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Summer Bootcamp (Loc: NYC)"),React.createElement("div",{className:"text-xs text-slate-500"},"Ad Spend: $500 \u2022 Dur: 2 Weeks")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-green-600 text-white text-xs rounded"},"Approve"),React.createElement("button",{className:"px-3 py-1 bg-midnight-800 text-slate-400 text-xs rounded border border-midnight-600"},"Preview"))))),Je==="PARTNERS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Partner & Specialist Applications"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 rounded-full bg-teal-500/20 text-teal-400 flex items-center justify-center font-bold"},"N"),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"NutriScience Labs"),React.createElement("div",{className:"text-xs text-slate-500"},"Type: Education Partner"))),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-teal-600 text-white text-xs rounded"},"Onboard"),React.createElement("button",{className:"px-3 py-1 bg-red-500/20 text-red-400 text-xs rounded"},"Deny"))))),Je==="EVENTS"&&React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Recovery focus-Value Event Submissions"),React.createElement("div",{className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl flex justify-between items-center"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Global CrossFit Expo 2025"),React.createElement("div",{className:"text-xs text-slate-500"},"Organizer: Apex Events \u2022 Est. Rev: $50k"),React.createElement("div",{className:"text-xs text-orange-400 mt-1"},"Requires Admin Verification")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded"},"Verify & Publish")))),Je==="LISTINGS"&&React.createElement("div",{className:"text-center p-10 text-slate-500"},"Active Listings View Loaded..."),Je==="TX"&&React.createElement("div",{className:"text-center p-10 text-slate-500"},"Transaction Logs Loaded..."))},ba=()=>React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Quality Control Center"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-red-500"},React.createElement("div",{className:"flex items-center gap-3 mb-4"},React.createElement(_,{name:"Activity",className:"text-red-500"}),React.createElement("h3",{className:"font-bold text-white"},"AI Trainer Churn Risk")),React.createElement("div",{className:"p-4 bg-midnight-950 rounded-xl mb-4"},React.createElement("div",{className:"text-3xl font-bold text-white"},"18"),React.createElement("div",{className:"text-xs text-slate-500 uppercase"},'Trainers Flagged "At-Risk"')),React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"flex justify-between items-center text-sm p-2 bg-midnight-900 rounded"},React.createElement("span",{className:"text-white"},"Marcus T."),React.createElement("span",{className:"text-red-400 font-bold"},"92% Risk")),React.createElement("div",{className:"flex justify-between items-center text-sm p-2 bg-midnight-900 rounded"},React.createElement("span",{className:"text-white"},"Lisa K."),React.createElement("span",{className:"text-orange-400 font-bold"},"78% Risk"))),React.createElement("button",{className:"mt-4 w-full py-2 bg-midnight-800 hover:bg-brand hover:text-white rounded-lg text-xs font-bold transition-colors"},"View All Predictions")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl"},React.createElement("h3",{className:"font-bold text-white mb-4"},"Reports Queue"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"p-3 bg-midnight-950 border border-midnight-700 rounded-xl"},React.createElement("div",{className:"flex justify-between"},React.createElement("span",{className:"text-sm font-bold text-white"},"Coach Steve"),React.createElement("span",{className:"text-xs bg-red-500/20 text-red-400 px-2 py-0.5 rounded"},"Harassment")),React.createElement("p",{className:"text-xs text-slate-400 mt-1"},'"Sent inappropriate messages..."'),React.createElement("div",{className:"flex gap-2 mt-3"},React.createElement("button",{className:"flex-1 py-1 bg-red-600 text-white text-xs rounded"},"Suspend"),React.createElement("button",{className:"flex-1 py-1 bg-midnight-800 text-slate-300 text-xs rounded"},"Investigate")))))),React.createElement("div",{className:"p-4 rounded-xl border border-dashed border-midnight-700 bg-midnight-900/50"},React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(_,{name:"Award",className:"text-yellow-500"}),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"Certification Re-verification"),React.createElement("div",{className:"text-xs text-slate-400"},"5 Approaching Expiry \u2022 2 Expired"))),React.createElement("button",{className:"px-4 py-2 bg-midnight-950 border border-midnight-700 rounded-lg text-xs font-bold hover:border-brand"},"Manage Queue")))),et=({title:Je,features:Oa})=>React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},ci(Je)),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oa.map((He,Ca)=>React.createElement("div",{key:Ca,className:"glass-panel p-6 rounded-2xl hover:border-brand transition-colors cursor-pointer group"},React.createElement("div",{className:"flex items-center gap-4 mb-3"},React.createElement("div",{className:"p-3 rounded-lg "+(He.colorClass||"bg-midnight-800 text-brand")},React.createElement(_,{name:He.icon,size:24})),React.createElement("h3",{className:"font-bold text-lg text-white group-hover:text-brand transition-colors"},ci(He.label))),React.createElement("p",{className:"text-sm text-slate-400"},ci(He.desc)),He.ai&&React.createElement("div",{className:"mt-3 text-xs flex items-center gap-1 text-purple-400"},React.createElement(_,{name:"Sparkles",size:12})," AI Powered"))))),At=({conversionAnalytics:Je})=>{var Oa=(Je==null?void 0:Je.icTotalCompleted)||0,He=(Je==null?void 0:Je.icYogaPureCompleted)||0,Ca=Oa-He,ha=Oa>0?Math.round(He/Oa*100):0,K=(Je==null?void 0:Je.events)||[],aa=K.reduce((xa,ei)=>{var Ua=(ei.primaryGoal||"Unspecified goal")+"::"+ei.variant;return xa[Ua]=(xa[Ua]||0)+1,xa},{}),Mt=Object.entries(aa).map(([xa,ei])=>{var[di,Ua]=xa.split("::");return{goal:di,variant:Ua,count:ei}}),la=K.slice(-5).reverse();return React.createElement("div",{className:"space-y-6"},React.createElement(H,null),React.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Advanced Analytics",React.createElement(yn,{devMode:u,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("p",{className:"text-slate-400 text-sm mb-6"},"Live funnel snapshots generated from\xA0",React.createElement("span",{className:"font-mono text-brand"},"IC_Conversion_Analytics"),". This is a lightweight in-app preview of how Independent Client onboarding data flows into admin-level reporting, segmentation and future heatmaps."),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-brand"},React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold mb-2"},"Independent Client Funnel"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},ci(Oa)),React.createElement("div",{className:"text-xs text-slate-500"},"Completed IC onboardings (this session)")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-emerald-500"},React.createElement("div",{className:"text-xs uppercase text-emerald-300 font-bold mb-2"},"Yoga-First Path"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},ci(He)),React.createElement("div",{className:"text-xs text-slate-500"},"Pure Yoga primary-only conversions"),React.createElement("div",{className:"mt-3 h-1.5 w-full bg-midnight-900 rounded-full overflow-hidden"},React.createElement("div",{className:"h-full bg-emerald-500 transition-all",style:{width:Math.min(100,ha)+"%"}})),React.createElement("div",{className:"mt-1 text-[11px] text-slate-400"},ha,"% of IC conversions")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl border-l-4 border-purple-500"},React.createElement("div",{className:"text-xs uppercase text-purple-300 font-bold mb-2"},"Non-Yoga / Hybrid"),React.createElement("div",{className:"text-3xl font-bold text-white mb-1"},Ca<0?0:Ca),React.createElement("div",{className:"text-xs text-slate-500"},"Standard & hybrid IC flows"),React.createElement("p",{className:"mt-3 text-[11px] text-slate-500"},"In a production system this tile would drill into per-goal funnels, drop-off points and A/B experiments."))),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold"},"Goal Segmentation"),React.createElement("div",{className:"text-sm text-slate-300"},"Breakdown of IC conversions by primary goal & path variant."))),Mt.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"No conversion events recorded yet in this session."):React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"min-w-full text-xs"},React.createElement("thead",null,React.createElement("tr",{className:"text-slate-400 border-b border-midnight-800"},React.createElement("th",{className:"py-2 pr-4 text-left font-medium"},"Primary Goal"),React.createElement("th",{className:"py-2 px-4 text-left font-medium"},"Variant"),React.createElement("th",{className:"py-2 px-4 text-right font-medium"},"Conversions"))),React.createElement("tbody",null,Mt.map((xa,ei)=>React.createElement("tr",{key:ei,className:"border-b border-midnight-900"},React.createElement("td",{className:"py-1 pr-4 text-slate-200"},ci(xa.goal)),React.createElement("td",{className:"py-1 px-4 text-[11px] text-slate-400"},ci(xa.variant)),React.createElement("td",{className:"py-1 px-4 text-right text-slate-100"},ci(xa.count)))))))),React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-midnight-700"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase text-slate-400 font-bold"},"Recent IC Conversions",React.createElement("div",{className:"mt-2 text-[10px] font-mono uppercase tracking-widest text-amber-300/80"},"Phase 0 note: this is a summary shell only \u2014 export + reporting migrates to Reports (Flow #5) and prioritisation migrates to Pro Insights (Flow #9).")),React.createElement("div",{className:"text-sm text-slate-300"},"Last few independent clients entering the system."))),la.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"No conversion events recorded yet in this session."):React.createElement("ul",{className:"space-y-2 text-xs"},la.map(xa=>{var ei;return React.createElement("li",{key:xa.id,className:"flex items-center justify-between bg-midnight-900/60 rounded-xl px-3 py-2"},React.createElement("div",null,React.createElement("div",{className:"font-semibold text-slate-100"},xa.primaryGoal||"Unspecified goal"),React.createElement("div",{className:"text-[11px] text-slate-400"},xa.variant," \xB7 ",xa.planType||"Independent plan"," \xB7"," ",xa.ageBand||"Age n/a")),React.createElement("div",{className:"text-[9px] text-slate-500"},((ei=xa.timestamp)==null?void 0:ei.slice(11,19))||""))}))))},ma=()=>{switch(tt){case"TSS":return React.createElement(Ht,null);case"USERS":return React.createElement(Nt,null);case"CONTENT":return React.createElement(U,null);case"IMPORTS":return React.createElement(ot,null);case"AIHUB":return React.createElement(Q,null);case"FINANCE":return React.createElement(L,null);case"SUPPORT":return React.createElement(ut,null);case"MARKETPLACE":return React.createElement(ht,null);case"QUALITY":return React.createElement(ba,null);case"ANALYTICS":return React.createElement(At,{conversionAnalytics:S});case"SECURITY":return React.createElement(et,{title:"Security & Compliance",features:[{label:"Audit Log",icon:"ScrollText",desc:"View all admin actions across the platform"},{label:"RBAC",icon:"Shield",desc:"Manage admin roles and permissions"},{label:"DSR Requests",icon:"UserX",desc:"Handle GDPR/CCPA data subject requests"},{label:"Data Map",icon:"Map",desc:"System of record across services"}]});case"SYSTEM_HEALTH":return React.createElement(et,{title:"System Health",features:[{label:"Status Page",icon:"Activity",desc:"Live system status & uptime"},{label:"Error Budget",icon:"BatteryCharging",desc:"SLOs and error budgets"},{label:"Latency Heatmap",icon:"ThermometerSun",desc:"API & queue latency"}]});case"PLATFORM_ROADMAP":return React.createElement(et,{title:"Platform Roadmap",features:[{label:"Upcoming Modules",icon:"Rocket",desc:"Planned major releases"},{label:"Beta Programs",icon:"FlaskConical",desc:"Opt-in to early features"},{label:"Feedback Inbox",icon:"Mailbox",desc:"Centralised product feedback"}]});case"AUDIT":return React.createElement(et,{title:"Audit & Governance",features:[{label:"Admin Actions",icon:"ScrollText",desc:"Trail of sensitive changes"},{label:"Data Access Logs",icon:"Eye",desc:"PII & export guardrail logs"},{label:"Retention Rules",icon:"Hourglass",desc:"Data retention and deletion rules"}]});case"PARTNERSHIPS":return React.createElement(et,{title:"Partnerships",features:[{label:"Key Accounts",icon:"Handshake",desc:"Major B2B partnerships"},{label:"Rev-Share Deals",icon:"Coins",desc:"Commercial terms and rev-share"},{label:"Integrations",icon:"PlugZap",desc:"3rd party integrations overview"}]});case"MARKETING":return React.createElement(et,{title:"Marketing Ops",features:[{label:"Campaign Calendar",icon:"CalendarClock",desc:"Major launches & promos"},{label:"ICP Segments",icon:"Target",desc:"Ideal customer profiles"},{label:"Attribution",icon:"ChartNoAxesCombined",desc:"Top-of-funnel attribution"}]});case"DEVELOPER":return React.createElement(et,{title:"Developer Platform",features:[{label:"API Keys",icon:"KeyRound",desc:"Manage API access tokens"},{label:"Webhooks",icon:"Webhook",desc:"Outbound integration hooks"},{label:"SDKs & Docs",icon:"BookOpenCheck",desc:"Developer onboarding & guides"}]});default:return React.createElement("div",{className:"space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("div",{onClick:()=>z("TSS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(_,{name:"Trophy",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Trainer Success Scores"),React.createElement("div",{className:"text-xs text-slate-400"},"TSS: leaderboards & at-risk trainers")))),React.createElement("div",{onClick:()=>z("USERS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(_,{name:"Users",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"User Management"),React.createElement("div",{className:"text-xs text-slate-400"},"Hybrid roles, impersonation, suspensions")))),React.createElement("div",{onClick:()=>z("CONTENT"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-teal-500/10 text-teal-400"},React.createElement(_,{name:"Folders",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Content Management"),React.createElement("div",{className:"text-xs text-slate-400"},"Master libraries for plans, workouts & nutrition")))),React.createElement("div",{onClick:()=>z("IMPORTS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-sky-500/10 text-sky-400"},React.createElement(_,{name:"UploadCloud",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Data Imports"),React.createElement("div",{className:"text-xs text-slate-400"},"Bulk_Import_Wizard & Post_Import_Processing for clients, trainers & content")))),React.createElement("div",{onClick:()=>z("FINANCE"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-amber-500/10 text-amber-400"},React.createElement(_,{name:"Coins",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Finance & Billing"),React.createElement("div",{className:"text-xs text-slate-400"},"MRR, failed payments, payouts")))),React.createElement("div",{onClick:()=>z("SUPPORT"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-rose-500/10 text-rose-400"},React.createElement(_,{name:"MessageCircle",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Support & Moderation"),React.createElement("div",{className:"text-xs text-slate-400"},"Tickets, SLAs, flagged content")))),React.createElement("div",{onClick:()=>z("MARKETPLACE"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-fuchsia-500/10 text-fuchsia-400"},React.createElement(_,{name:"Store",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Marketplace",React.createElement(yn,{devMode:u,emits:["marketplace.listing.approved","marketplace.listing.rejected"]})),React.createElement("div",{className:"text-xs text-slate-400"},"Plans, bundles, SKUs & reviews")))),React.createElement("div",{onClick:()=>z("QUALITY"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-lime-500/10 text-lime-400"},React.createElement(_,{name:"ClipboardCheck",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Quality & Compliance"),React.createElement("div",{className:"text-xs text-slate-400"},"NPS, complaints, compliance flags")))),React.createElement("div",{onClick:()=>z("ANALYTICS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-purple-500/10 text-purple-400"},React.createElement(_,{name:"BarChart3",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Advanced Analytics",React.createElement(yn,{devMode:u,emits:["admin.view.opened","admin.action.performed"]})),React.createElement("div",{className:"text-xs text-slate-400"},"IC conversion funnels & cohorts")))),React.createElement("div",{onClick:()=>z("AIHUB"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(_,{name:"Sparkles",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"AI Hub & Triage"),React.createElement("div",{className:"text-xs text-slate-400"},"Unified_AI_Triage rules, risk flags, suggestions")))),React.createElement("div",{onClick:()=>z("SECURITY"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-red-500/10 text-red-400"},React.createElement(_,{name:"Shield",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Security & Compliance"),React.createElement("div",{className:"text-xs text-slate-400"},"Audit log, RBAC, DSR requests")))),React.createElement("div",{onClick:()=>z("SYSTEM_HEALTH"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-cyan-500/10 text-cyan-400"},React.createElement(_,{name:"Activity",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"System Health"),React.createElement("div",{className:"text-xs text-slate-400"},"Status, latency, error budgets")))),React.createElement("div",{onClick:()=>z("PLATFORM_ROADMAP"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-indigo-500/10 text-indigo-400"},React.createElement(_,{name:"Rocket",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Platform Roadmap"),React.createElement("div",{className:"text-xs text-slate-400"},"Upcoming modules & beta programs")))),React.createElement("div",{onClick:()=>z("PARTNERSHIPS"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-orange-500/10 text-orange-400"},React.createElement(_,{name:"Handshake",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Partnerships"),React.createElement("div",{className:"text-xs text-slate-400"},"Key accounts & rev\u2011share deals")))),React.createElement("div",{onClick:()=>z("MARKETING"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-pink-500/10 text-pink-400"},React.createElement(_,{name:"Megaphone",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Marketing Ops"),React.createElement("div",{className:"text-xs text-slate-400"},"Campaign calendar & attribution")))),React.createElement("div",{onClick:()=>z("DEVELOPER"),className:"glass-panel p-5 rounded-2xl cursor-pointer hover:border-brand transition-colors"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"p-2 rounded-xl bg-slate-500/10 text-slate-300"},React.createElement(_,{name:"Code2",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Developer Platform"),React.createElement("div",{className:"text-xs text-slate-400"},"API keys, webhooks, SDKs & docs"))))))}};return React.createElement("div",{className:"min-h-screen bg-midnight-950 text-slate-100 p-8 pb-20"},React.createElement("div",{className:"max-w-7xl mx-auto"},React.createElement("header",{className:"fof-trainer-header flex justify-between items-center mb-8"},React.createElement("h1",{className:"text-3xl font-bold font-mono uppercase tracking-widest text-white flex items-center gap-3"},React.createElement(_,{name:"Shield",className:"text-red-500"})," Admin Portal"),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:$,className:"px-4 py-2 rounded-2xl border text-xs font-mono tracking-wide "+(u?"bg-emerald-500/15 border-emerald-500 text-emerald-200":"bg-midnight-900 border-midnight-700 text-slate-300 hover:text-white hover:border-emerald-500")},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"Bug",size:14})," Dev Mode: ",u?"ON":"OFF")),React.createElement("button",{onClick:s,className:"p-3 bg-midnight-900 border border-midnight-700 rounded-full hover:bg-brand hover:text-white transition-colors"},React.createElement(_,{name:"Home"})))),ma()))},us=({onStart:i,onSelect:s,onBack:x,onHome:S,canGoBack:u,onAdminLogin:$,devMode:tt})=>React.createElement("div",{className:"min-h-screen w-full bg-midnight-950 bg-mesh text-slate-100 font-sans flex flex-col relative fof-app-shell overflow-x-hidden"},React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-glow pointer-events-none z-0"}),React.createElement("nav",{className:"fixed top-0 w-full z-50 bg-midnight-950/80 backdrop-blur border-b border-white/5"},React.createElement("div",{className:"max-w-7xl mx-auto px-6 h-20 flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-2 font-bold text-2xl tracking-tight"},React.createElement(_,{name:"Activity",className:"text-brand"})," FlowOFIT"),React.createElement("div",{className:"hidden md:flex gap-8 text-sm font-medium text-slate-400"},React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Features"),React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Enterprise"),React.createElement("button",{type:"button",className:"hover:text-white transition-colors"},"Pricing")),React.createElement("div",{className:"flex items-center gap-4"},React.createElement("button",{onClick:$,className:"text-xs font-bold text-slate-500 hover:text-white uppercase tracking-wider transition-colors"},"Admin Portal"),React.createElement("div",{className:"h-4 w-px bg-white/10"}),React.createElement("button",{onClick:()=>i("LOGIN"),className:"text-sm font-bold text-white hover:text-brand transition-colors"},"Log In"),React.createElement("button",{onClick:()=>i("ROLE_SELECT"),className:"px-5 py-2 bg-white text-midnight-950 font-bold rounded-full hover:bg-brand hover:text-white transition-all shadow-lg"},"Get Started")))),React.createElement("div",{className:"relative z-10 pt-32 pb-20 px-6"},React.createElement("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center"},React.createElement("div",{className:"space-y-8"},React.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand/10 border border-brand/20 text-brand text-xs font-bold uppercase tracking-wider"},React.createElement("span",{className:"w-2 h-2 rounded-full bg-brand animate-pulse"})," V6.1 System Online"),React.createElement("h1",{className:"text-5xl md:text-7xl font-bold leading-[1.1] tracking-tight"},"One Ecosystem.",React.createElement("br",null),React.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand via-brand-purple to-brand-accent"},"Infinite Potential.")),React.createElement("p",{className:"text-lg text-slate-400 max-w-xl leading-relaxed"},"The unified platform for fitness professionals, enterprises, and athletes. Manage clients, automate workflows, and scale your business with AI-driven insights."),React.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},React.createElement("button",{onClick:()=>i("ROLE_SELECT"),className:"px-8 py-4 bg-brand text-white font-bold rounded-2xl hover:bg-brand-dark transition-all shadow-[0_0_30px_rgba(59,130,246,0.3)] flex items-center justify-center gap-2 group"},"Start Your Journey ",React.createElement(_,{name:"ArrowRight",className:"group-hover:translate-x-1 transition-transform"})),React.createElement("button",{className:"px-8 py-4 bg-white/5 border border-white/10 text-white font-bold rounded-2xl hover:bg-white/10 transition-all flex items-center justify-center gap-2"},React.createElement(_,{name:"PlayCircle",size:20})," Watch Demo")),React.createElement("div",{className:"flex items-center gap-4 text-sm text-slate-500 font-medium"},React.createElement("div",{className:"flex -space-x-2"},[1,2,3,4].map(ue=>React.createElement("div",{key:ue,className:"w-8 h-8 rounded-full bg-midnight-800 border-2 border-midnight-950 flex items-center justify-center text-[9px] text-white font-bold"},"U",ue))),React.createElement("p",null,"Trusted by 10,000+ Pros & Gyms"))),React.createElement("div",{className:"relative"},React.createElement("div",{className:"absolute inset-0 bg-brand/20 blur-[100px] rounded-full"}),React.createElement("div",{className:"relative glass-panel p-6 rounded-3xl border border-white/10 shadow-2xl transform rotate-2 hover:rotate-0 transition-transform duration-500"},React.createElement("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4"},React.createElement("div",{className:"flex gap-2"},React.createElement("div",{className:"w-3 h-3 rounded-full bg-red-500"}),React.createElement("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),React.createElement("div",{className:"w-3 h-3 rounded-full bg-green-500"})),React.createElement("div",{className:"text-xs font-mono text-slate-500"},"SYSTEM_STATUS: OPTIMAL")),React.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},React.createElement("div",{className:"bg-midnight-900/50 p-4 rounded-xl border border-white/5"},React.createElement("div",{className:"text-slate-400 text-xs uppercase mb-1"},"Active Clients"),React.createElement("div",{className:"text-2xl font-bold text-white"},"1,248"),React.createElement("div",{className:"text-xs text-brand-green flex items-center gap-1 mt-1"},React.createElement(_,{name:"TrendingUp",size:12})," +12% this week")),React.createElement("div",{className:"bg-midnight-900/50 p-4 rounded-xl border border-white/5"},React.createElement("div",{className:"text-slate-400 text-xs uppercase mb-1"},"Monthly Revenue"),React.createElement("div",{className:"text-2xl font-bold text-white"},"$84.2k"),React.createElement("div",{className:"text-xs text-brand-purple flex items-center gap-1 mt-1"},React.createElement(_,{name:"Activity",size:12})," 98% Collection"))),React.createElement("div",{className:"bg-brand/10 p-4 rounded-xl border border-brand/20 flex items-center gap-4"},React.createElement("div",{className:"p-3 bg-brand rounded-lg text-white shadow-lg"},React.createElement(_,{name:"Zap",size:20})),React.createElement("div",null,React.createElement("div",{className:"text-white font-bold"},"AI Workflow Automated"),React.createElement("div",{className:"text-brand-accent text-xs"},"New client onboarding completed in 1.2s"))))))),React.createElement("div",{className:"border-y border-white/5 bg-black/20 py-10"},React.createElement("div",{className:"max-w-7xl mx-auto px-6"},React.createElement("p",{className:"text-center text-slate-500 text-xs font-bold uppercase tracking-widest mb-8"},"Powering Industry Leaders"),React.createElement("div",{className:"flex flex-wrap justify-center gap-12 opacity-50 grayscale hover:grayscale-0 transition-all duration-500"},["Equinox","Gold's Gym","Orange Theory","CrossFit","F45"].map((ue,Ie)=>React.createElement("div",{key:Ie,className:"text-xl font-bold text-white"},ci(ue)))))),React.createElement("footer",{className:"py-12 border-t border-white/5 mt-auto"},React.createElement("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6"},React.createElement("div",{className:"text-slate-500 text-sm"},"\xA9 2025 FlowOFIT Systems. All rights reserved."),React.createElement("div",{className:"flex gap-6 text-sm text-slate-400"},React.createElement("button",{type:"button",className:"hover:text-white"},"Privacy"),React.createElement("button",{type:"button",className:"hover:text-white"},"Terms"),React.createElement("button",{type:"button",className:"hover:text-white"},"Security",React.createElement(yn,{devMode:tt,emits:["admin.action.performed","user.dsr.requested"]})))))),Hi=({onSelect:i,onBack:s,onHome:x,canGoBack:S})=>React.createElement(ns,{onBack:s,onHome:x,canGoBack:S},React.createElement("div",{className:"flex-1 flex flex-col justify-center items-center p-6 py-20 relative z-10"},React.createElement("h2",{className:"text-4xl font-bold mb-4 text-center"},"Choose Your Path"),React.createElement("p",{className:"text-slate-400 mb-12 text-center max-w-md"},"Select how you will interact with the FlowOFIT ecosystem."),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl"},React.createElement("button",{onClick:()=>i("CLIENT"),className:"group relative bg-midnight-900/50 hover:bg-midnight-800 border border-white/10 hover:border-brand p-8 rounded-3xl text-left transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden"},React.createElement("div",{className:"absolute top-0 right-0 p-32 bg-brand/5 rounded-full blur-3xl group-hover:bg-brand/10 transition-colors"}),React.createElement("div",{className:"relative z-10"},React.createElement("div",{className:"w-16 h-16 bg-midnight-950 rounded-2xl border border-white/10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg"},React.createElement(_,{name:"User",size:32,className:"text-brand-green"})),React.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Personal Journey"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed mb-6"},"For athletes, gym members, and individuals looking to track progress, connect with coaches, and achieve fitness goals."),React.createElement("div",{className:"flex items-center gap-2 text-brand-green font-bold text-sm"},"Enter as Member ",React.createElement(_,{name:"ArrowRight",size:16,className:"group-hover:translate-x-1 transition-transform"})))),React.createElement("button",{onClick:()=>i("TRAINER"),className:"group relative bg-midnight-900/50 hover:bg-midnight-800 border border-white/10 hover:border-brand-purple p-8 rounded-3xl text-left transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl overflow-hidden"},React.createElement("div",{className:"absolute top-0 right-0 p-32 bg-brand-purple/5 rounded-full blur-3xl group-hover:bg-brand-purple/10 transition-colors"}),React.createElement("div",{className:"relative z-10"},React.createElement("div",{className:"w-16 h-16 bg-midnight-950 rounded-2xl border border-white/10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg"},React.createElement(_,{name:"Building2",size:32,className:"text-brand-purple"})),React.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Professional & Enterprise"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed mb-6"},"For trainers, nutritionists, gyms, and large health organizations requiring management tools, CRM, and analytics."),React.createElement("div",{className:"flex items-center gap-2 text-brand-purple font-bold text-sm"},"Access Workspace ",React.createElement(_,{name:"ArrowRight",size:16,className:"group-hover:translate-x-1 transition-transform"}))))))),wi=({role:i,onNavigate:s,extra:x,onBack:S,onHome:u,canGoBack:$})=>React.createElement(ns,{onBack:S,onHome:u,canGoBack:$},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl max-w-md w-full text-center"},React.createElement("h2",{className:"text-2xl font-bold mb-8"},i==="TRAINER"?"Professional":i," Access"),React.createElement("button",{onClick:()=>s("LOGIN"),className:"w-full py-4 border border-midnight-700 text-white font-bold rounded-xl mb-4 hover:bg-midnight-800 transition-colors"},"Log In (Existing)"),React.createElement("button",{onClick:()=>s("SIGNUP"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl hover:bg-brand-dark shadow-neon transition-all"},"Sign Up (New)"),ci(x)))),Is=({step:i,onNext:s,onUpdate:x,onBack:S,onHome:u,canGoBack:$})=>{var tt={onBack:S,onHome:u,canGoBack:$};return i==="TYPE_SELECT"?React.createElement(xt,{title:"Select Account Type",step:1,total:3,...tt},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>s("GO_TO_PRO_WIZARD"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand/10 text-brand rounded-lg"},React.createElement(_,{name:"UserCog",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Individual Professional"),React.createElement("p",{className:"text-sm text-slate-400"},"Trainer, Nutritionist, Physio, or Specialist."))),React.createElement("button",{onClick:()=>s("GYM_CHECK"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand/10 text-brand rounded-lg"},React.createElement(_,{name:"Dumbbell",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Gym / Fitness Facility"),React.createElement("p",{className:"text-sm text-slate-400"},"Manage members, classes, and billing."))),React.createElement("button",{onClick:()=>s("CORP_CHECK"),className:"p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand-purple transition-all flex items-center gap-4 group"},React.createElement("div",{className:"p-3 bg-brand-purple/10 text-brand-purple rounded-lg"},React.createElement(_,{name:"Building",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white text-lg"},"Corporate Wellness"),React.createElement("p",{className:"text-sm text-slate-400"},"Employee health programs and insurance."))))):i==="GYM_CHECK"?React.createElement(xt,{title:"Gym Access",step:2,total:3,...tt},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>s("DASHBOARD"),className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 text-white"},"Login to Existing Gym"),React.createElement("button",{onClick:()=>s("GYM_ONBOARD"),className:"p-4 bg-brand text-white rounded-xl font-bold hover:bg-brand-dark"},"Register New Facility"))):i==="GYM_ONBOARD"?React.createElement(xt,{title:"Facility Details",step:3,total:3,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Gym Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Location count"}),React.createElement("button",{onClick:()=>s("DASHBOARD"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-4"},"Launch Gym Portal"))):i==="CORP_CHECK"?React.createElement(xt,{title:"Corporate Portal",step:2,total:3,...tt},React.createElement("div",{className:"grid gap-4"},React.createElement("button",{onClick:()=>s("DASHBOARD"),className:"p-4 bg-midnight-950 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 text-white"},"HR Admin Login"),React.createElement("button",{onClick:()=>s("CORP_ONBOARD"),className:"p-4 bg-brand-purple text-white rounded-xl font-bold hover:bg-purple-700"},"New Wellness Program"))):i==="CORP_ONBOARD"?React.createElement(xt,{title:"Company Profile",step:3,total:3,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Company Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white",placeholder:"Employee Count"}),React.createElement("button",{onClick:()=>s("DASHBOARD"),className:"w-full py-4 bg-brand-purple text-white font-bold rounded-xl mt-4"},"Initialize Wellness Hub"))):React.createElement("div",null,"Unknown Step")},Js=({stepIndex:i,totalSteps:s,canBack:x,onBack:S,children:u})=>{var $=(i+1)/s*100;return React.createElement("div",{className:"onboarding-shell min-h-screen bg-night-950 bg-onboarding-grid bg-fixed bg-cover flex items-center justify-center px-4 py-8"},React.createElement("div",{className:"max-w-md w-full"},React.createElement("div",{className:"rounded-[32px] border border-slate-700/70 bg-card-blur shadow-card-strong px-4 py-5"},React.createElement("div",{className:"pt-2"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-night-900 border border-[#10FF61] flex items-center justify-center shadow-[0_0_24px_#10FF61]"}),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.24em] text-neon-aqua"},"FlowOFIT"),React.createElement("div",{className:"text-[0.72rem] text-slate-300"},"Goal-centric client onboarding"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"px-3 py-1.5 rounded-full border border-[#10FF61] bg-black/40 text-[11px] font-mono uppercase tracking-[0.22em] text-[#10FF61] shadow-[0_0_18px_#10FF61]"},"Step ",i+1,"/",s),x&&React.createElement("button",{type:"button",onClick:S,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-[#10FF61] bg-night-900/80 text-[11px] text-slate-100 hover:shadow-[0_0_18px_#10FF61] transition-all"},"Back"))),React.createElement("div",{className:"h-1.5 rounded-full bg-night-900 overflow-hidden mb-4"},React.createElement("div",{className:"h-full rounded-full bg-gradient-to-r from-[#4DE9FF] via-[#35F27A] to-[#10FF61] shadow-[0_0_24px_#10FF61] transition-all",style:{width:$+"%"}}))),u)))},To=({active:i,title:s,label:x,note:S,img:u,onClick:$,disabled:tt=!1})=>React.createElement("button",{type:"button",disabled:tt,onClick:ue=>{try{ue.preventDefault(),ue.stopPropagation()}catch(Ie){}tt||$&&$(ue)},className:"w-full text-left rounded-3xl overflow-hidden mb-3 border transition-all "+(i?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"relative h-28 w-full"},React.createElement("img",{src:u,alt:s,className:"h-full w-full object-cover",loading:"lazy"}),React.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-night-950/95 via-night-950/40 to-transparent"}),i&&React.createElement("div",{className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-[#10FF61] text-night-950 flex items-center justify-center shadow-[0_0_18px_#10FF61]"},React.createElement(_,{name:"Check",size:18}))),React.createElement("div",{className:"px-4 py-3"},React.createElement("div",{className:"text-[0.85rem] font-extrabold tracking-[0.08em] text-slate-50"},ci(s)),React.createElement("div",{className:"text-[0.78rem] font-semibold text-slate-200 mt-0.5"},ci(x)),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-1"},ci(S)))),pn=({label:i,active:s,onClick:x,className:S="",disabled:u=!1})=>React.createElement("button",{type:"button",disabled:u,onClick:u?void 0:x,className:"px-3 py-1.5 rounded-full text-[0.78rem] font-semibold border transition-all "+(s?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_24px_#10FF61] ":"bg-night-950/70 text-slate-200 border-white/10 hover:border-[#10FF61] hover:shadow-[0_0_12px_#10FF61] ")+(u?"opacity-50 cursor-not-allowed ":"cursor-pointer ")+S},ci(i)),Bo=({eyebrow:i,title:s,subtitle:x,icon:S})=>React.createElement("div",{className:"mb-4"},i&&React.createElement("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-full bg-night-900 border border-neon-lime/70 text-[11px] font-mono uppercase tracking-[0.2em] text-neon-lime"},ci(i)),React.createElement("div",{className:"mt-3 flex items-start gap-3"},React.createElement("div",{className:"flex-1"},React.createElement("h1",{className:"text-[1.3rem] leading-snug font-display font-semibold text-slate-50"},ci(s)),x&&React.createElement("p",{className:"mt-1.5 text-[0.85rem] text-slate-400 leading-relaxed"},ci(x))))),No=({children:i,className:s="",...x})=>React.createElement("button",{...x,className:"w-full inline-flex items-center justify-center gap-2 rounded-2xl text-[0.98rem] font-semibold py-3 bg-[#10FF61] text-night-950 border border-[#10FF61] hover:border-[#10FF61] hover:shadow-[0_0_24px_#10FF61] hover:bg-[#10FF61] transition-all disabled:opacity-60 disabled:cursor-not-allowed "+s},i),bn=({state:i,update:s,onNext:x})=>{var z,H;var[S,u]=Ai(i.name||""),[$,tt]=Ai(i.email||""),[ue,Ie]=Ai(i.password||""),[fe,B]=Ai((z=i.newsletterOptIn)!=null?z:!0),[X,ne]=Ai(i.acceptedTerms||!1),W=!S.trim()||!$.trim()||!ue.trim()||!X,J=()=>{s({name:S.trim(),email:$.trim(),password:ue,newsletterOptIn:fe,acceptedTerms:X,signUpMethod:"email"}),x()};return React.createElement(React.Fragment,null,((H=i==null?void 0:i.coachContext)==null?void 0:H.planName)&&React.createElement("div",{className:"mb-4 p-4 rounded-3xl bg-[#10FF61]/10 border border-[#10FF61]/30"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-[#10FF61]/20 border border-[#10FF61]/30 flex items-center justify-center text-[#10FF61]"},React.createElement(_,{name:"BadgeCheck",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-mono uppercase tracking-[0.25em] text-[#10FF61]"},"Coach assigned"),React.createElement("div",{className:"text-sm font-extrabold text-white mt-1"},"Your coach has assigned: ",i.coachContext.planName),React.createElement("div",{className:"text-[12px] text-slate-300 mt-1"},i.coachContext.coachName?"Coach: "+i.coachContext.coachName+". ":"",i.coachContext.note||"We\u2019ll tailor your week around this plan and your capacity score.")))),React.createElement(Bo,{title:"Lets create your FlowOFIT profile",subtitle:"We will use this to save your progress and sync across all your devices.",icon:"UserRound"}),React.createElement("div",{className:"space-y-3 flex-1 overflow-y-auto pr-1 scroll-area"},React.createElement("div",{className:"rounded-3xl profile-card bg-midnight-900/80 border px-4 py-3.5"},React.createElement("div",{className:"space-y-2.5"},React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Your Name")),React.createElement("input",{type:"text",value:S,onChange:Ht=>u(Ht.target.value),placeholder:"Type your name here...",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Your Email address")),React.createElement("input",{type:"email",value:$,onChange:Ht=>tt(Ht.target.value),placeholder:"Type your email here...",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-[0.78rem] text-slate-300 mb-1"},React.createElement("span",{className:"font-semibold"},"Create a password")),React.createElement("input",{type:"password",value:ue,onChange:Ht=>Ie(Ht.target.value),placeholder:"At least 8 characters",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3.5 py-3 text-[0.92rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})))),React.createElement("div",{className:"flex items-start gap-2"},React.createElement("input",{id:"tos",type:"checkbox",checked:X,onChange:Ht=>ne(Ht.target.checked),className:"mt-0.5 rounded border-slate-400 text-brand focus:ring-brand/70 bg-midnight-900"}),React.createElement("label",{htmlFor:"tos",className:"text-[0.76rem] text-slate-300 leading-snug"},"I agree to FlowOFIT's ",React.createElement("span",{className:"underline"},"Terms")," and"," ",React.createElement("span",{className:"underline"},"Privacy Policy"),".")),React.createElement("div",{className:"flex items-start gap-2"},React.createElement("input",{id:"newsletter",type:"checkbox",checked:fe,onChange:Ht=>B(Ht.target.checked),className:"mt-0.5 rounded border-slate-400 text-brand focus:ring-brand/70 bg-midnight-900"}),React.createElement("label",{htmlFor:"newsletter",className:"text-[0.76rem] text-slate-300 leading-snug"},"Send me occasional tips and updates that match my goals."))),React.createElement("div",{className:"pt-4"},React.createElement(No,{disabled:W,onClick:J},"Continue",React.createElement(_,{name:"ArrowRight",size:16}))))},_n=({state:i,update:s,onNext:x})=>{var S=i.focusAreas||[],u=[{key:"FITNESS_FIRST",title:"GENERAL FITNESS",label:"Strength, Conditioning, Cardio",note:"Build strength, drop fat and feel like an athlete again.",img:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?auto=format&fit=crop&q=80&w=600"},{key:"NUTRITION_FIRST",title:"NUTRITION & HABITS",label:"Food, Energy, Lifestyle",note:"Make food and habits work around your real life, not against it.",img:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?auto=format&fit=crop&q=80&w=600"},{key:"YOGA_WELLNESS",title:"YOGA & WELLNESS",label:"Calm, Mobility, Nervous System",note:"Flows, breathwork and recovery to feel lighter and less stressed.",img:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8WU9HQXxlbnwwfHwwfHx8MA%3D%3D"}],$=tt=>{var Ie=S.includes(tt)?S.filter(B=>B!==tt):[...S,tt];var fe=null;if(Ie.length===1)fe=Ie[0];else if(Ie.length===2){var B=[...Ie].sort(),X=B.includes("FITNESS_FIRST"),ne=B.includes("NUTRITION_FIRST"),W=B.includes("YOGA_WELLNESS");X&&ne?fe="FITNESS_NUTRITION":X&&W?fe="FITNESS_YOGA":ne&&W&&(fe="NUTRITION_YOGA")}else Ie.length===3&&(fe="HYBRID_ALL");s({focusAreas:Ie,route:fe})};return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"What brings you to FlowOFIT?",subtitle:"You may select more than one that matches your goal \u2013 we\u2019ll blend them into your plan.",icon:"Compass"}),React.createElement("div",{className:"max-h-[380px] overflow-y-auto pr-1 scroll-area"},u.map(tt=>React.createElement(To,{key:tt.key,active:S.includes(tt.key),title:tt.title,label:tt.label,note:Zi(tt.note),img:tt.img,onClick:()=>$(tt.key)}))),React.createElement("div",{className:"pt-3"},React.createElement(No,{disabled:S.length===0,onClick:x},"Continue personalizing your plan",React.createElement(_,{name:"ArrowRight",size:16}))))},gr=({state:i,update:s,onNext:x})=>{var S=i.route||"HYBRID_ALL",u=i.primaryGoal||null,[$,tt]=Ai(!1),[ue,Ie]=Ai(""),fe=()=>{var J=i.focusAreas||[],z=i.primaryGoal,H=J.includes("FITNESS_FIRST"),Ht=J.includes("NUTRITION_FIRST"),Nt=J.includes("YOGA_WELLNESS"),U=["Momentum beats motivation. Give us the details and we\u2019ll build a plan that\u2019s simple, repeatable, and effective.","Consistency wins. Next, we\u2019ll tailor your roadmap so it fits busy weeks and still drives results.","No overthinking. We\u2019ll keep it efficient \u2014 tell us the nuance and we\u2019ll dial it in."],Q=["No extremes. No guilt. Next, we\u2019ll tailor habits that work in real life \u2014 meals, cravings, and all.","We\u2019ll keep food simple and sustainable. Share the nuance and we\u2019ll shape habits you can actually stick to.","Progress comes from repeatable choices. Next, we\u2019ll tailor your plan around your routine and appetite."],w=["You don\u2019t need more pressure \u2014 you need calm structure. Next, we\u2019ll tailor practices that feel lighter and steady.","Slow is strong. Share the nuance and we\u2019ll build a routine that calms your system and supports your body.","We\u2019ll keep it gentle, consistent, and grounding. Next, tell us what\u2019s real \u2014 and we\u2019ll tailor it."],L=["You don\u2019t need perfect motivation \u2014 you need a plan built around your real life. Next, give us the nuance\u2026 and we\u2019ll tailor it properly.","Small wins, stacked daily. Next, we\u2019ll blend your choices into a roadmap that feels personal \u2014 not overwhelming.","No resets. No extremes. Just a blended plan that works. Next, tell us the nuance and we\u2019ll tailor it."],ut={LOSE_FAT:["Fat loss is about consistency, not perfection. Next, we\u2019ll tailor the plan so it\u2019s easy to repeat \u2014 and it works.","We\u2019ll make this sustainable: simple structure, smart choices, and progress you can maintain."],BUILD_MUSCLE:["Muscle is built through repeatable weeks. Next, we\u2019ll tailor the plan so you can progress without burning out.","We\u2019ll keep it progressive and realistic \u2014 so strength builds week after week."],STRESS:["Calm is a skill. Next, we\u2019ll tailor your routine to reduce stress and make recovery feel automatic.","We\u2019ll build calm into your week \u2014 not as an extra task, but as the foundation."],SLEEP:["Sleep is your superpower. Next, we\u2019ll tailor routines that support deeper recovery.","We\u2019ll shape habits that help you switch off and wake up fresher."],ENERGY:["Energy comes from structure. Next, we\u2019ll tailor the plan to reduce crashes and boost daily drive.","We\u2019ll build a rhythm that keeps you switched on \u2014 not drained."],HEALTH_MARKERS:["We\u2019ll keep it evidence-led and sustainable. Next, share the nuance and we\u2019ll tailor the lifestyle pieces that move the needle."],FOOD_PEACE:["We\u2019ll keep this gentle and practical. Next, we\u2019ll tailor habits that reduce guilt and increase control."],PAIN_FREE:["We\u2019ll keep it safe and coach-like. Next, share the nuance so we can respect limits and still progress."]};var ot=[];return Nt&&!H&&!Ht?ot=w:Ht&&!H&&!Nt?ot=Q:H&&!Ht&&!Nt?ot=U:ot=L,z&&ut[z]&&(ot=ot.concat(ut[z])),H&&Ht&&!Nt&&ot.push("We\u2019ll balance training and food so they work together \u2014 not against each other."),H&&Nt&&!Ht&&ot.push("We\u2019ll blend strength with mobility and recovery so your body feels strong and calm."),Ht&&Nt&&!H&&ot.push("We\u2019ll pair calmer routines with simple food structure so stress doesn\u2019t drive your choices."),ot[Math.floor(Math.random()*ot.length)]};var B="What\u2019s your most priority goal for the next 12\u201316 weeks?",X="Target",ne=[];S==="FITNESS_FIRST"?(B="What is your North Star for this fitness journey?",X="Dumbbell",ne=[{key:"LOSE_FAT",title:"Body Recomposition",label:"Lose fat & inches",note:"Feel lighter, leaner and more athletic.",img:"https://themusclephd.com/wp-content/uploads/2021/05/shutterstock_1369044449-1200x600.jpg"},{key:"BUILD_MUSCLE",title:"Performance & Power",label:"Build muscle & strength",note:"Look and feel noticeably stronger.",img:"https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&q=80&w=600"},{key:"PERFORMANCE",title:"Sports & Performance",label:"Mobility & strength",note:"Train for a sport, race or key event.",img:"https://sportsmatik.com/uploads/misc/3_1626692453.jpg"},{key:"PAIN_FREE",title:"Move Painfree",label:"Safe & confident movement",note:"Make joints and movements feel safer.",img:"https://blog.somaiya.edu/wp-content/uploads/2023/07/Banner-Option-1.jpg"}]):S==="YOGA_WELLNESS"?(B="What is the NOISE in your life right now that you are trying to quiet down?",X="Flower2",ne=[{key:"PAIN_FREE",title:"Mobility & Comfort",label:"Ease stiffness & pain",note:"Less tightness in back, hips or shoulders.",img:"https://pmrxcontent.com/wp-content/uploads/Back-Pain-Relief-through-Yoga.jpg"},{key:"SLEEP",title:"Rest & Recovery",label:"Sleep deeper",note:"Fall asleep easier and wake up more rested.",img:"https://elev8.com/wp-content/uploads/sites/4/2024/11/17325664543981.jpg?strip=all&quality=80"},{key:"STRESS",title:"Calmer nervous system",label:"Reduce stress & anxiety",note:"Calm your system after long days.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"},{key:"ENERGY",title:"Daily Vitality",label:"Feel lighter & energised",note:"More \u201Cgood days\u201D and fewer heavy ones.",img:"https://static.toiimg.com/thumb/msid-123854125,imgsize-460969,width-400,resizemode-4/yoga.jpg"}]):S==="NUTRITION_FIRST"?(B="Are we trying to break a bad habit, or build a new lifestyle?",X="Utensils",ne=[{key:"LOSE_FAT",title:"Weight & Shape",label:"Lose body fat sustainably",note:"No extreme diets, no rebound.",img:"https://www.tigerfitness.com/cdn/shop/articles/weight-loss-1_1200x600_crop_center.jpg?v=1539974908"},{key:"ENERGY",title:"Focus & Mood",label:"Stable energy all day",note:"Fewer crashes and afternoon slumps.",img:"https://americanbehavioralclinics.com/wp-content/uploads/2025/11/Depositphotos_444847522_L.jpg"},{key:"HEALTH_MARKERS",title:"Labs & Longevity",label:"Improve health markers",note:"Support labs & long-term health.",img:"https://www.news-medical.net/images/news/ImageForNews_712324_16514604802736596.jpg"},{key:"FOOD_PEACE",title:"Habits & Headspace",label:"Peace with food",note:"Less guilt, more control and ease.",img:"https://www.eatingwell.com/thmb/m5xUzIOmhWSoXZnY-oZcO9SdArQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/article_291139_the-top-10-healthiest-foods-for-kids_-02-4b745e57928c4786a61b47d8ba920058.jpg"}]):S==="FITNESS_NUTRITION"?(B="Choose your level of mix of Training & Nutrition, so that we can blend it for you?",X="Dumbbell",ne=[{key:"LOSE_FAT",title:"Training + Meals",label:"Drop fat & reshape",note:"Lose fat with your workouts and nutrition working together.",img:"https://thumbs.dreamstime.com/b/dumbells-healthy-food-towels-fitness-health-isolated-white-background-50300700.jpg"},{key:"BUILD_MUSCLE",title:"Strength + Recovery",label:"Stronger, more athletic",note:"Build muscle while fuelling recovery and performance.",img:"https://thumbs.dreamstime.com/z/postworkout-recovery-empty-bottles-towels-dumbbell-wooden-floor-dim-light-casts-warm-glow-scene-post-exercise-370252050.jpg"},{key:"ENERGY",title:"Work, Life & Training",label:"Energy & day-to-day performance",note:"Feel switched on during the day and strong in your sessions.",img:"https://images.unsplash.com/photo-1522844990619-4951c40f7eda?auto=format&fit=crop&q=80&w=600"},{key:"HEALTH_MARKERS",title:"Health Markers + Lifestyle",label:"Training for long-term health",note:"Use both training and food to support your long-term health markers.",img:"https://thumbs.dreamstime.com/b/healthy-lifestyle-concept-diet-fitness-medicine-background-125235090.jpg"}]):S==="FITNESS_YOGA"?(B="What is your body asking for most right now?",X="Dumbbell",ne=[{key:"LOSE_FAT",title:"Body + Movement",label:"Lean, athletic & mobile",note:"Trim down while keeping joints and movement feeling good.",img:"https://media.istockphoto.com/id/636191848/photo/dumbbell-and-yoga-mat-on-wood-table.jpg?s=612x612&w=0&k=20&c=SELP8KSRmx2noiRcze_5FAgtR_RlZil84Q4Xo8s9c0Y="},{key:"BUILD_MUSCLE",title:"Strength + Mobility",label:"Strong but still fluid",note:"Build muscle while staying mobile and \u201Cun-stiff\u201D.",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR28Nq8reN-FRqLro5Yq2GOt6bDRNzyEg570Q&s"},{key:"PAIN_FREE",title:"Pain-Free Movement",label:"Train without fear of flareups",note:"Use strength + yoga to make movement feel safer and calmer.",img:"https://pmrxcontent.com/wp-content/uploads/Back-Pain-Relief-through-Yoga.jpg"},{key:"STRESS",title:"Calm + Strength",label:"Stress relief that actually sticks",note:"Blend nervous system work with training so stress doesn\u2019t pile up.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"}]):S==="NUTRITION_YOGA"?(B="What is the primary job your nutrition and lifestyle plan needs to do?",X="Utensils",ne=[{key:"LOSE_FAT",title:"Food + Nervous System",label:"Gentle, sustainable fat loss",note:"Lose weight without constantly fighting your body and stress.",img:"https://www.tigerfitness.com/cdn/shop/articles/weight-loss-1_1200x600_crop_center.jpg?v=1539974908"},{key:"SLEEP",title:"Sleep Ritual + Nutrition",label:"Sleep better from the inside out",note:"Evening routines, breathwork and food habits that support deep sleep.",img:"https://elev8.com/wp-content/uploads/sites/4/2024/11/17325664543981.jpg?strip=all&quality=80"},{key:"STRESS",title:"Cortisol + Calm",label:"On tracker stress, calmer days",note:"Nourish your body and calm your system so you don\u2019t stay wired.",img:"https://nepalyogahome.com/wp-content/uploads/2025/07/Yoga-for-Stress-Relief-1080x675.jpg"},{key:"FOOD_PEACE",title:"Habits & Headspace",label:"A calmer relationship with food",note:"Use rituals, breath and structure to feel less guilt and more control.",img:"https://www.eatingwell.com/thmb/m5xUzIOmhWSoXZnY-oZcO9SdArQ=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/article_291139_the-top-10-healthiest-foods-for-kids_-02-4b745e57928c4786a61b47d8ba920058.jpg"}]):(B="What is the foundation we are building your new body and mind upon?",X="Infinity",ne=[{key:"LOSE_FAT",title:"Hybrid Mode - Body Recomposition",label:"Recompose: leaner & athletic",note:"Lose fat while staying strong.",img:"https://barbend.com/wp-content/uploads/2023/07/body-recomposition-featured-barbend.com-1.jpg"},{key:"BUILD_MUSCLE",title:"Strength + Physique",label:"Stronger & more muscular",note:"Build an athletic frame.",img:"https://www.borntough.com/cdn/shop/articles/Best_Biceps_Workouts_with_Dumbbells_at_Home.jpg?v=1656353954"},{key:"PAIN_FREE",title:"Strength + Mobility",label:"Pain-free, fluid movement",note:"Blend strength and mobility safely.",img:"https://images.unsplash.com/photo-1575052814086-f385e2e2ad1b?auto=format&fit=crop&q=80&w=600"},{key:"ENERGY",title:"Whole-life Performance",label:"Energy & mood",note:"Support focus, mood and resilience.",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREBdauOkUWVKnvlQ9jlL4mXHrpR7sV0zxFog&s"}]);var W=J=>{s({primaryGoal:J})};return React.createElement(React.Fragment,null,React.createElement(Bo,{title:B,subtitle:"You can change this later \u2014 this just helps us shape your starting plan.",icon:X}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area"},ne.map(J=>React.createElement(To,{key:J.key,active:u===J.key,title:J.title,label:J.label,note:Zi(J.note),img:J.img,onClick:()=>W(J.key)}))),React.createElement("div",{className:"pt-3"},React.createElement(No,{disabled:!u,onClick:()=>{Ie(fe()),tt(!0)}},"Continue",React.createElement(_,{name:"ArrowRight",size:16}))),$&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] flex items-center justify-center px-4 py-6"},React.createElement("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-[2px] modal-overlay",onClick:()=>tt(!1)}),React.createElement("div",{className:"relative w-full max-w-sm modal-card"},React.createElement("div",{className:"rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/35 to-neon-lime/25 p-3.5 shadow-[0_0_28px_rgba(16,255,97,0.25)]"},React.createElement("div",{className:"rounded-3xl bg-night-950/90 border border-neon-lime/60 px-3.5 py-3"},React.createElement("div",{className:"text-[0.92rem] text-slate-50 font-semibold"},"Your choices are locked, Now lets build a roadmap to reach your goal with personalized and most relaistic plan."),React.createElement("div",{className:"mt-3 rounded-2xl bg-midnight-950/70 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.72rem] text-slate-400"},"Your focus"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},(i.focusAreas||[]).map(J=>{var H={FITNESS_FIRST:"General Fitness",NUTRITION_FIRST:"Nutrition & Habits",YOGA_WELLNESS:"Yoga & Wellness"}[J]||J;return React.createElement("span",{key:J,className:"px-2.5 py-1 rounded-2xl bg-night-950 border border-slate-600 text-[0.76rem] text-slate-100"},ci(H))})),u&&React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[0.72rem] text-slate-400"},"North Star goal"),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},React.createElement("span",{className:"px-2.5 py-1 rounded-2xl bg-night-950 border border-slate-600 text-[0.76rem] text-slate-100"},{LOSE_FAT:"Lose fat / recomposition",BUILD_MUSCLE:"Build muscle & strength",PERFORMANCE:"Sport / performance",PAIN_FREE:"Move pain-free",SLEEP:"Better sleep",STRESS:"Less stress",ENERGY:"More daily energy",HEALTH_MARKERS:"Improve health markers",FOOD_PEACE:"Peace with food"}[u]||u)))),React.createElement("div",{className:"mt-3 rounded-2xl bg-black/35 border border-white/10 px-3 py-2"},React.createElement("div",{className:"mt-1 text-[0.8rem] text-slate-300 leading-relaxed"},ci(ue))),React.createElement("div",{className:"mt-3"},React.createElement(No,{onClick:()=>{tt(!1),x()}},"Continue"),React.createElement("button",{type:"button",onClick:()=>tt(!1),className:"mt-2 w-full text-center text-[0.78rem] text-slate-300 hover:text-slate-100 transition-colors"},"Go back to make changes")))))))},Wn=({state:i,update:s,onNext:x})=>{var S=i.primaryGoal,u=i.route,[$,tt]=Ai(i.goalNotes||""),[ue,Ie]=Ai(i.goalTags||[]),[fe,B]=Ai(i.medicalConditions||"");if(!S)return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Choose a goal first",subtitle:"We\u2019ll unlock these details once your main focus is set.",icon:"AlertCircle"}),React.createElement("div",{className:"mt-auto pt-6"},React.createElement(No,{disabled:!0},"Go back and pick a primary goal")));var X=[];(u==="FITNESS_FIRST"||u==="FITNESS_NUTRITION"||u==="FITNESS_YOGA"||u==="HYBRID_ALL")&&X.push("Strength","Fat loss","Cardio","Mobility","Performance"),(u==="NUTRITION_FIRST"||u==="FITNESS_NUTRITION"||u==="NUTRITION_YOGA"||u==="HYBRID_ALL")&&X.push("Portion control","Snacking","Energy dips","Sugar cravings"),(u==="YOGA_WELLNESS"||u==="FITNESS_YOGA"||u==="NUTRITION_YOGA"||u==="HYBRID_ALL")&&X.push("Stress relief","Sleep","Back pain","Stiff hips","Recovery"),S==="LOSE_FAT"?X.push("Lose fat","Drop inches","Recomposition"):S==="BUILD_MUSCLE"?X.push("Build muscle","Strength gain","Performance"):S==="PAIN_FREE"?X.push("Move without pain","Joint friendly","Rehab safe"):S==="SLEEP"?X.push("Sleep deeper","Fall asleep faster","Wake up fresher"):S==="ENERGY"&&X.push("More daily energy","Less crashes","Focus"),X=Array.from(new Set(X));var ne=J=>{ue.includes(J)?Ie(ue.filter(z=>z!==J)):Ie([...ue,J])},W=()=>{s({goalNotes:$,goalTags:ue,medicalConditions:fe}),x()};return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Describe your goal in your own words",subtitle:"Think like you\u2019re briefing a coach for the next 12\u201316 weeks \u2013 what result should we actually chase?",icon:"Sparkles"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-midnight-900/80 border border-slate-700 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-300 mb-1.5"},"What do you want your body, energy or performance to feel like?"),React.createElement("textarea",{rows:3,value:$,onChange:J=>tt(J.target.value),placeholder:"E.g. \u201CDrop ~8 kg without feeling drained, keep strength in the gym, no knee flare-ups after 5\u2011a\u2011side.\u201D",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-2.5 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"No perfect wording needed \u2013 Type it the way you\u2019d message your coach on WhatsApp.")),X.length>0&&React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Optional: Tag your goal so the FlowOfit Pilot understands the nuance better."),React.createElement("div",{className:"flex flex-wrap gap-1.5"},X.map(J=>React.createElement(pn,{key:J,label:J,active:ue.includes(J),onClick:()=>ne(J)}))),ue.length>0&&React.createElement("p",{className:"mt-1.5 text-[0.75rem] text-slate-400"},"We\u2019ll treat these as \u201Cpriority flavours\u201D when we build your roadmap.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Any injuries, medical flags or guidelines from your doctor or physio we should respect?"),React.createElement("textarea",{rows:3,value:fe,onChange:J=>B(J.target.value),placeholder:"E.g. ACL recon 2019, recurring lower-back tightness, high blood pressure, pregnancy, \u201Cno max-effort sprints\u201D from doctor.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-2.5 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.72rem] text-slate-400"},"This doesn\u2019t replace medical advice, but it lets us keep your plan safer and more coach-like."))),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:W},"Continue",React.createElement(_,{name:"ArrowRight",size:16}))))},nr=({state:i,update:s,onNext:x})=>{var W;var[S,u]=Ai(i.activityLevel||""),[$,tt]=Ai(typeof i.deskJob=="boolean"?i.deskJob:null),[ue,Ie]=Ai(!1);no(()=>{$!==null&&Ie(!0)},[$]);var fe=[{key:"VERY_LOW",title:"Very On track Movement",subtitle:"Mostly sitting or resting outside work",icon:"\u{1F6CB}\uFE0F",neat:1},{key:"LIGHT",title:"Light Movement",subtitle:"Some walking or daily tasks, but mostly low activity",icon:"\u{1F6B6}\u200D\u2642\uFE0F",neat:1.25},{key:"MODERATE",title:"Adjusting Movement",subtitle:"Regular walking, errands, and general daily movement",icon:"\u{1F9CD}\u200D\u2642\uFE0F",neat:1.5},{key:"HIGH",title:"Recovery focus Movement",subtitle:"On your feet a lot with frequent walking",icon:"\u{1F6B6}\u200D\u2640\uFE0F",neat:1.75},{key:"VERY_HIGH",title:"Very Recovery focus Movement",subtitle:"Physically demanding days or constant movement",icon:"\u{1F3C3}\u200D\u2642\uFE0F",neat:2}],B=!S||$===null,X=()=>{var U;var J=fe.find(Q=>Q.key===S),z=(U=J==null?void 0:J.neat)!=null?U:1.5,H=$===!0?-.5:.5,Ht=z+H;var Nt="MEDIUM";Ht<=1?Nt="LOW":Ht>=2&&(Nt="HIGH"),s({activityLevel:S,deskJob:$,neatBaseline:z,deskModifier:H,dailyActivityIndex:Ht,baselinePreset:Nt}),x()},ne=((W=fe.find(J=>J.key===S))==null?void 0:W.title)||"";return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Let\u2019s understand your day-to-day",subtitle:"Exclude workouts and sports \u2014 we\u2019ll factor those in separately.",icon:"Activity"}),React.createElement("div",{className:"mb-3 rounded-3xl bg-black/25 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"text-[0.88rem] text-slate-50 font-semibold"},"Do you have a desk job?"),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},"This helps us understand how much time you typically spend sitting during work hours."),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>tt(!0),className:"text-left rounded-3xl border px-3.5 py-3 transition-all "+($===!0?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},"Yes"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-0.5"},"Mostly seated")),React.createElement("button",{type:"button",onClick:()=>tt(!1),className:"text-left rounded-3xl border px-3.5 py-3 transition-all "+($===!1?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},"No"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-0.5"},"Mostly on my feet or moving")))),$!==null&&React.createElement("div",{className:"rounded-3xl bg-black/30 border border-white/10 overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>Ie(J=>!J),className:"w-full flex items-start justify-between gap-3 px-4 py-3 text-left"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[0.88rem] font-semibold text-slate-50"},"How active are you outside of work, on most days?"),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},"This includes walking, errands, daily movement \u2014 not workouts or sports."),!ue&&React.createElement("div",{className:"mt-2 text-[0.78rem] text-slate-200"},S?React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",{className:"text-[#10FF61]"},"\u2713"),"Selected: ",React.createElement("span",{className:"font-semibold"},ci(ne))):React.createElement("span",{className:"text-slate-400"},"Tap to choose your activity level."))),React.createElement("div",{className:"shrink-0 mt-1 text-slate-300"},ue?"\u25B2":"\u25BC")),ue&&React.createElement("div",{className:"px-4 pb-4"},React.createElement("div",{className:"space-y-3 max-h-[320px] overflow-y-auto pr-1 scroll-area"},fe.map(J=>React.createElement("button",{key:J.key,type:"button",onClick:()=>u(J.key),className:"w-full text-left rounded-3xl border px-4 py-4 min-h-[104px] transition-all "+(S===J.key?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border flex items-center justify-center shrink-0 "+(S===J.key?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_18px_#10FF61]":"bg-night-950/60 text-slate-200 border-white/10")},React.createElement("span",{className:"text-[1.05rem] leading-none"},ci(J.icon))),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[0.95rem] font-semibold text-white"},ci(J.title)),React.createElement("div",{className:"text-[0.78rem] text-slate-300 mt-0.5 line-clamp-2"},ci(J.subtitle))),S===J.key&&React.createElement("div",{className:"mt-1 text-[#10FF61]"},React.createElement("span",{className:"text-[1.05rem] leading-none"},"\u2705")))))))),React.createElement("div",{className:"pt-3"},React.createElement(No,{disabled:B,onClick:X},"Continue ",React.createElement(_,{name:"ArrowRight",size:16}))))},Br=({state:i,update:s,onNext:x})=>{var[S,u]=Ai(i.sportsActivity||""),[$,tt]=Ai(i.sportsDays||""),[ue,Ie]=Ai(i.sportsHoursPerWeek||""),[fe,B]=Ai(i.sportsPain||""),X=()=>{s({sportsActivity:S,sportsDays:$,sportsHoursPerWeek:ue,sportsPain:fe}),x()},ne=["1","2","3","4","5","6","7"],W=["1\u20132","3\u20134","5\u20137","8\u201310","10+"];return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Tell us about your sport load",subtitle:"We will adapt intensity and recovery so your sport and training work together \u2014 not against each other.",icon:"Trophy"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-midnight-900/80 border border-slate-700 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Are you currently playing any sports or doing regular activities we should factor in?"),React.createElement("textarea",{rows:2,value:S,onChange:J=>u(J.target.value),placeholder:"E.g. 5-a-side football twice a week, weekend padel, weekly tennis league, recreational running.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"If nothing right now, you can leave this blank \u2013 we\u2019ll just build from scratch.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"How many days per week do you usually play or train for this sport?"),React.createElement("div",{className:"flex flex-wrap gap-1.5"},ne.map(J=>React.createElement(pn,{key:J,label:J+" d",active:$===J,onClick:()=>tt(J)}))),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"Quick tap is fine \u2013 we just need a ballpark training frequency.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Across those days, roughly how many total hours per week does that add up to?"),React.createElement("div",{className:"flex flex-wrap gap-1.5"},W.map(J=>React.createElement(pn,{key:J,label:J+" hrs",active:ue===J,onClick:()=>Ie(J)}))),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"You can refine this later \u2013 this just helps us balance training load and recovery.")),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("p",{className:"text-[0.8rem] text-slate-200 mb-1.5"},"Do you feel any pain, tightness or challenges during or right after these sports?"),React.createElement("textarea",{rows:2,value:fe,onChange:J=>B(J.target.value),placeholder:"E.g. knee niggle after football, tight lower back after long runs, shoulder pinch after serving in tennis.",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2 text-[0.8rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua resize-none"}),React.createElement("p",{className:"mt-1 text-[0.75rem] text-slate-400"},"This is about managing weekly load \u2014 not medical limits,we already have those"))),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:X},"Continue",React.createElement(_,{name:"ChevronRight",size:18,className:"ml-1"}))))},Nn=({state:i,update:s,onNext:x})=>{var S=i.focusAreas||[],u=S.length===1&&S[0]==="FITNESS_FIRST",$=S.length===1&&S[0]==="NUTRITION_FIRST",tt=S.length===1&&S[0]==="YOGA_WELLNESS",ue=u?"FITNESS":$?"NUTRITION":tt?"YOGA":"HYBRID",[Ie,fe]=Ai((i.trainingExperience==="ATHLETE"?"ADVANCED":i.trainingExperience)||""),B={FITNESS:{title:"What\u2019s your training experience?",subtitle:"So we set the right starting intensity and progression.",icon:"Dumbbell",options:[{key:"BEGINNER",title:"Beginner",subtitle:"New to structured training",icon:"Sparkles"},{key:"RETURNING",title:"Returning",subtitle:"Restarting after a break",icon:"RefreshCcw"},{key:"INTERMEDIATE",title:"Intermediate",subtitle:"Consistent with the basics",icon:"Dumbbell"},{key:"ADVANCED",title:"Advanced / Athlete",subtitle:"Recovery focus volume tolerance",icon:"Medal"}]},NUTRITION:{title:"How experienced are you with routines?",subtitle:"This helps us choose how structured your plan should be.",icon:"ClipboardList",options:[{key:"BEGINNER",title:"Starting out",subtitle:"Building your first routine",icon:"Sparkles"},{key:"RETURNING",title:"Getting back on track",subtitle:"You\u2019ve done it before",icon:"RefreshCcw"},{key:"INTERMEDIATE",title:"Mostly consistent",subtitle:"You can follow a plan",icon:"CheckCircle"},{key:"ADVANCED",title:"Very consistent",subtitle:"Strong routine + self-control",icon:"Medal"}]},YOGA:{title:"What\u2019s your movement experience?",subtitle:"So we match the flow level and keep it comfortable.",icon:"Heart",options:[{key:"BEGINNER",title:"New to yoga",subtitle:"Learning the foundations",icon:"Sparkles"},{key:"RETURNING",title:"Returning",subtitle:"Restarting your practice",icon:"RefreshCcw"},{key:"INTERMEDIATE",title:"Regular practice",subtitle:"Comfortable with common flows",icon:"Leaf"},{key:"ADVANCED",title:"Experienced",subtitle:"Complex sequences feel natural",icon:"Medal"}]},HYBRID:{title:"What\u2019s your experience level?",subtitle:"We\u2019ll blend this with your activity + sport load.",icon:"Layers",options:[{key:"BEGINNER",title:"Beginner",subtitle:"New to structured training",icon:"Sparkles"},{key:"RETURNING",title:"Returning",subtitle:"Restarting after a break",icon:"RefreshCcw"},{key:"INTERMEDIATE",title:"Intermediate",subtitle:"Consistent with the basics",icon:"Dumbbell"},{key:"ADVANCED",title:"Advanced / Athlete",subtitle:"Recovery focus volume tolerance",icon:"Medal"}]}}[ue],X=B.options,ne=!Ie,W=()=>{s({trainingExperience:Ie}),x()};return React.createElement(React.Fragment,null,React.createElement(Bo,{title:B.title,subtitle:B.subtitle,icon:B.icon}),React.createElement("div",{className:"grid grid-cols-2 gap-3"},X.map(J=>React.createElement("button",{key:J.key,type:"button",onClick:()=>fe(J.key),className:"w-full text-left rounded-3xl border px-4 py-4 min-h-[104px] transition-all "+(Ie===J.key?"bg-night-900/90 border-[#10FF61] shadow-[0_0_24px_#10FF61]":"bg-black/40 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center shrink-0 border "+(Ie===J.key?"bg-[#10FF61]/15 border-[#10FF61]/60":"bg-white/5 border-white/10")},React.createElement(_,{name:J.icon,size:18,className:Ie===J.key?"text-[#10FF61]":"text-white/70"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-semibold leading-tight"},ci(J.title)),React.createElement("div",{className:"text-white/65 text-xs mt-1 leading-snug"},ci(J.subtitle))))))),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:W,disabled:ne},"Continue",React.createElement(_,{name:"ChevronRight",size:18,className:"ml-1"}))))},fl=({state:i,update:s,onNext:x})=>{var S=i.route,u=S==="YOGA_WELLNESS",$=S==="NUTRITION_FIRST",tt=S==="FITNESS_FIRST",[ue,Ie]=Ai(i.units||"METRIC"),[fe,B]=Ai(i.age||""),[X,ne]=Ai(i.sex||i.gender||""),[W,J]=Ai(typeof i.heightCm=="number"?i.heightCm:i.height?Number(i.height):""),[z,H]=Ai(typeof i.weightKg=="number"?i.weightKg:i.weight?Number(i.weight):""),Ht=ha=>{var K=Number(ha)/2.54,aa=Math.floor(K/12),Mt=Math.round(K-aa*12);return{ft:isFinite(aa)?aa:"",inch:isFinite(Mt)?Mt:""}},Nt=ha=>Number(ha)*2.2046226218,U=ha=>Number(ha)/2.2046226218,Q=(ha,K)=>(Number(ha)*12+Number(K||0))*2.54,[w,L]=Ai(()=>W?Ht(W).ft:""),[ut,ot]=Ai(()=>W?Ht(W).inch:""),[ht,ba]=Ai(()=>{if(!z)return"";var ha=Math.round(Nt(z));return isFinite(ha)?ha:""});no(()=>{if(ue==="IMPERIAL"){if(W){var ha=Ht(W);L(ha.ft),ot(ha.inch)}else L(""),ot("");if(z){var ha=Math.round(Nt(z));ba(isFinite(ha)?ha:"")}else ba("")}},[ue]);var[et,At]=Ai((i.trainingExperience==="ATHLETE"?"ADVANCED":i.trainingExperience)||""),ma=(()=>{var ha=Array.isArray(i.focusAreas)&&i.focusAreas.length?i.focusAreas:i.route?[i.route]:[],K=ha.includes("FITNESS_FIRST"),aa=ha.includes("NUTRITION_FIRST"),Mt=ha.includes("YOGA_WELLNESS"),la="We\u2019ll match your starting plan to your level (and blend it with activity + sport load).";return aa&&!K&&!Mt?{title:"How consistent are your routines?",sub:la,labels:{BEGINNER:"Starting",RETURNING:"Returning",INTERMEDIATE:"Consistent",ADVANCED:"Very consistent"},subtitles:{BEGINNER:"New to food routines",RETURNING:"Back on track again",INTERMEDIATE:"Mostly consistent weeks",ADVANCED:"Strong structure & follow-through"}}:Mt&&!K&&!aa?{title:"What\u2019s your yoga experience?",sub:la,labels:{BEGINNER:"New",RETURNING:"Returning",INTERMEDIATE:"Regular",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to yoga practice",RETURNING:"Back after a break",INTERMEDIATE:"Practice most weeks",ADVANCED:"Confident with flows & holds"}}:K&&!aa&&!Mt?{title:"What\u2019s your training experience?",sub:"So we set your starting intensity and progression.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structured training",RETURNING:"Restarting after a break",INTERMEDIATE:"Train regularly",ADVANCED:"Recovery focus capacity / fast progress"}}:K&&aa&&!Mt?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance training + nutrition to fit your real life.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:K&&Mt&&!aa?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance training + yoga to keep you progressing safely.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:aa&&Mt&&!K?{title:"What\u2019s your experience level overall?",sub:"We\u2019ll balance routines + yoga to keep it sustainable.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}:{title:"What\u2019s your experience level overall?",sub:"We blend this with your activity + sport load to set a safe starting plan.",labels:{BEGINNER:"Beginner",RETURNING:"Returning",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},subtitles:{BEGINNER:"New to structure",RETURNING:"Back after a break",INTERMEDIATE:"Consistent most weeks",ADVANCED:"Recovery focus capacity & confidence"}}})(),Je=[{key:"BEGINNER"},{key:"RETURNING"},{key:"INTERMEDIATE"},{key:"ADVANCED"}],Oa=!fe||!X||!(ue==="METRIC"&&W&&z||ue==="IMPERIAL"&&w&&ht)||!et,He=()=>{var ha=Number(ue==="METRIC"?W:Q(w,ut)),K=Number(ue==="METRIC"?z:U(ht));s({age:fe,sex:X,gender:X,units:ue,heightCm:ha,weightKg:K,height:ha,weight:K,trainingExperience:et}),x()},Ca=Array.from({length:73},(ha,K)=>String(K+13));return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"A few quick details",subtitle:"This helps us tailor targets and keep your plan realistic.",icon:"UserRound"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Age"),React.createElement("div",{className:"w-[58%]"},React.createElement("select",{value:fe,onChange:ha=>B(ha.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-3 text-[0.9rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:""},"Select"),Ca.map(ha=>React.createElement("option",{key:ha,value:ha},ci(ha))))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Sex"),React.createElement("div",{className:"w-[58%]"},React.createElement("select",{value:X,onChange:ha=>ne(ha.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-600/80 px-3 py-3 text-[0.9rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"Female"},"Female"),React.createElement("option",{value:"Male"},"Male")))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"grid grid-cols-4 gap-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Height"),React.createElement("div",{className:"text-[0.78rem] text-slate-300 font-semibold"},"Weight"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 font-semibold"},"Units")),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("div",null,ue==="METRIC"?React.createElement("input",{inputMode:"numeric",value:W,onChange:ha=>J(ha.target.value.replace(/[^\d.]/g,"")),placeholder:"cm",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}):React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{inputMode:"numeric",value:w,onChange:ha=>L(ha.target.value.replace(/[^\d]/g,"")),placeholder:"ft",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}),React.createElement("input",{inputMode:"numeric",value:ut,onChange:ha=>ot(ha.target.value.replace(/[^\d]/g,"")),placeholder:"in",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}))),React.createElement("div",null,ue==="METRIC"?React.createElement("input",{inputMode:"numeric",value:z,onChange:ha=>H(ha.target.value.replace(/[^\d.]/g,"")),placeholder:"kg",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"}):React.createElement("input",{inputMode:"numeric",value:ht,onChange:ha=>ba(ha.target.value.replace(/[^\d.]/g,"")),placeholder:"lb",className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 placeholder:text-slate-500 focus:outline-none focus:border-neon-aqua"})),React.createElement("div",null,React.createElement("select",{value:ue,onChange:ha=>Ie(ha.target.value),className:"w-full rounded-2xl bg-night-950/90 border border-slate-700/80 px-3 py-2.5 text-[0.82rem] text-slate-50 focus:outline-none focus:border-neon-aqua"},React.createElement("option",{value:"METRIC"},"Metric"),React.createElement("option",{value:"IMPERIAL"},"Imperial"))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"text-[0.92rem] text-slate-50 font-semibold"},ci(ma.title)),React.createElement("div",{className:"text-[0.75rem] text-slate-400 mt-0.5"},ci(ma.sub)),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},Je.map(ha=>{var K;return React.createElement("button",{key:ha.key,type:"button",onClick:()=>At(ha.key),className:"rounded-3xl border px-3.5 py-3 text-left transition-all "+(et===ha.key?"bg-night-900/90 border-[#10FF61] shadow-[0_0_20px_#10FF61]":"bg-black/35 border-white/10 hover:border-[#10FF61]/70")},React.createElement("div",{className:"text-[0.85rem] font-semibold text-slate-50"},ma.labels[ha.key]),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-0.5"},((K=ma.subtitles)==null?void 0:K[ha.key])||""))})))),React.createElement("div",{className:"pt-3"},React.createElement(No,{disabled:Oa,onClick:He},"Continue ",React.createElement(_,{name:"ArrowRight",size:16}))))},ul=({state:i,update:s,onNext:x})=>{var S=i.route,u=S==="YOGA_WELLNESS",$=S==="NUTRITION_FIRST",[tt,ue]=Ai(i.days||3),[Ie,fe]=Ai(i.time||"ANY"),[B,X]=Ai(i.length||"30_45"),ne=()=>{s({days:tt,time:Ie,length:B}),x()};var W="What does a realistic week look like for you?",J="We\u2019ll build around your life, not the other way round.";u?(W="Where can calm movement realistically fit into your week?",J="We\u2019ll weave yoga, breathwork and recovery into the spaces that already exist in your life."):$&&(W="What does a realistic week of food & habits look like for you?",J="We\u2019ll match your plan to when life feels most under control, not perfectly \u201Cclean\u201D.");var z=$?"How many days per week can you be intentional with food or habits?":u?"How many days of gentle or focused practice feels realistic?":"How many focused days can you give us?",H=$?"When does your eating or routine feel most under control?":"When does your day feel most in your control?",Ht=$?"How much time can you usually give to food prep, logging or small habit work?":u?"How long can you usually give for each practice without feeling rushed?":"Typical time window for one block";return React.createElement(React.Fragment,null,React.createElement(Bo,{title:W,subtitle:J,icon:"CalendarClock"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3"},React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-center justify-between text-[0.8rem] text-slate-200 mb-1.5"},React.createElement("span",null,ci(z)),React.createElement("span",{className:"text-neon-aqua font-semibold"},tt," day",tt!==1?"s":"","/week")),React.createElement("input",{type:"range",min:"1",max:"7",value:tt,onChange:Nt=>ue(parseInt(Nt.target.value,10)),className:"w-full accent-neon-aqua"}),React.createElement("div",{className:"flex justify-between text-[0.7rem] text-slate-500 mt-1"},React.createElement("span",null,"1"),React.createElement("span",null,"3"),React.createElement("span",null,"5"),React.createElement("span",null,"7"))),React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3 space-y-2"},React.createElement("p",{className:"text-[0.8rem] text-slate-200"},ci(H)),React.createElement("div",{className:"flex gap-1.5"},[{key:"MORNING",label:"Morning"},{key:"AFTERNOON",label:"Afternoon"},{key:"EVENING",label:"Evening"},{key:"ANY",label:"No preference"}].map(Nt=>React.createElement("button",{key:Nt.key,type:"button",onClick:()=>fe(Nt.key),className:"flex-1 rounded-2xl text-[0.78rem] px-2.5 py-2 border "+(Ie===Nt.key?"border-brand bg-brand text-white":"border-white/15 bg-black/60 text-slate-200 hover:border-neon-lime")},ci(Nt.label))))),React.createElement("div",{className:"rounded-3xl bg-black/45 border border-white/10 px-3.5 py-3 space-y-2"},React.createElement("p",{className:"text-[0.8rem] text-slate-200"},ci(Ht)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},[{key:"20_30",label:"20\u201330 min"},{key:"30_45",label:"30\u201345 min"},{key:"45_60",label:"45\u201360 min"},{key:"60_PLUS",label:"60+ min"}].map(Nt=>React.createElement(pn,{key:Nt.key,label:Nt.label,active:B===Nt.key,onClick:()=>X(Nt.key)}))))),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:ne},"Continue",React.createElement(_,{name:"ArrowRight",size:16}))))},yl=({state:i,onNext:s})=>{var x=i.name||"You",S={YOGA_WELLNESS:"Yoga & Wellness",FITNESS_FIRST:"General Fitness",NUTRITION_FIRST:"Nutrition & Habits",FITNESS_NUTRITION:"Fitness + Nutrition",FITNESS_YOGA:"Fitness + Yoga & Wellness",NUTRITION_YOGA:"Yoga & Nutrition blend",HYBRID_ALL:"Full hybrid: Fitness + Yoga + Nutrition",HYBRID:"Hybrid journey"},u={LOSE_FAT:"Lose fat / recomposition",BUILD_MUSCLE:"Build muscle & strength",PERFORMANCE:"Sport or performance",PAIN_FREE:"Move without pain",SLEEP:"Better sleep",ENERGY:"Energy & mood",HEALTH_MARKERS:"Health markers",FOOD_PEACE:"Calmer relationship with food"},$={MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",ANY:"No strong preference"},tt={"20_30":"20\u201330 min","30_45":"30\u201345 min","45_60":"45\u201360 min","60_PLUS":"60+ min"},ue=S[i.route]||"Hybrid journey",Ie=u[i.primaryGoal]||"General health & fitness",fe=i.days?i.days+" day"+(i.days!==1?"s":"")+" / week":"We\u2019ll start with 3 days / week",B=$[i.time]||"We\u2019ll place sessions where they fit best",X=tt[i.length]||"Around 30\u201345 minutes",ne=i.trainingStyle||[],W=i.focusAreas||[],J=i.age,z=i.sex||i.gender,H=z,Ht=i.height,Nt=i.weight,U=i.goalNotes,Q=(ht,ba)=>!ht||ht.length===0?React.createElement("p",{className:"text-[0.78rem] text-slate-400"},ci(ba)):React.createElement("div",{className:"flex flex-wrap gap-1.5"},ht.map(et=>React.createElement("span",{key:et,className:"px-2.5 py-1 rounded-2xl bg-midnight-950 border border-slate-600 text-[0.78rem] text-slate-100"},ci(et)))),w=ne.map(ht=>ht==="HOME"?"Home-based":ht==="GYM"?"Gym":ht==="CLASSES"?"Classes / group":ht==="OUTDOOR"?"Outdoor":ht),L=W.map(ht=>ht==="FITNESS_FIRST"?"General Fitness":ht==="NUTRITION_FIRST"?"Nutrition & Habits":ht==="YOGA_WELLNESS"?"Yoga & Wellness":ht),ut=[];J&&ut.push("Age "+J),z&&ut.push(z),Ht&&ut.push(Ht+" cm"),Nt&&ut.push(Nt+" kg");var ot=()=>{s&&s()};return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Here\u2019s your FlowOFIT starting point, "+x,subtitle:"You can always fine-tune this later \u2013 this is your first, personalised version.",icon:"Sparkles"}),React.createElement("div",{className:"max-h-[360px] overflow-y-auto pr-1 scroll-area space-y-3 rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/35 to-neon-lime/25 px-3.5 py-3.5"},React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1.5"},"Overall direction"),React.createElement("p",{className:"text-[0.9rem] text-slate-100 font-medium"},ci(ue)),React.createElement("p",{className:"text-[0.8rem] text-slate-300 mt-1"},"Primary focus:"," ",React.createElement("span",{className:"text-brand font-semibold"},ci(Ie))),W.length>0&&React.createElement("p",{className:"text-[0.78rem] text-slate-400 mt-1.5"},"You told us you care most about:"," ",React.createElement("span",{className:"text-slate-100"},L.join(" \u2022 ")))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1"},"Your starting week"),React.createElement("div",{className:"grid grid-cols-3 gap-2 text-[0.78rem]"},React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Frequency"),React.createElement("p",{className:"text-slate-50 font-medium"},ci(fe))),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Best time"),React.createElement("p",{className:"text-slate-50 font-medium"},ci(B))),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-slate-700 px-2.5 py-2"},React.createElement("p",{className:"text-slate-400 mb-0.5"},"Session length"),React.createElement("p",{className:"text-slate-50 font-medium"},ci(X))))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"Context we\u2019re building around"),React.createElement("div",{className:"space-y-1.5 mt-1"},React.createElement("div",null,React.createElement("p",{className:"text-[0.75rem] text-slate-400 mb-0.5"},"Training environment"),Q(w,"We\u2019ll assume a mix you can change later.")))),React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3 space-y-1.5"},React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"Basics we're keeping in mind"),ut.length>0?React.createElement("p",{className:"text-[0.8rem] text-slate-200"},ut.join(" \u2022 ")):React.createElement("p",{className:"text-[0.78rem] text-slate-400"},"You'll be able to add more profile details later.")),U&&U.trim()&&React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-lime/60 px-3.5 py-3"},React.createElement("p",{className:"text-[0.78rem] text-slate-400 mb-1"},"In your own words"),React.createElement("p",{className:"text-[0.8rem] text-slate-200 italic"},"\u201C",U.trim(),"\u201D"))),React.createElement("div",{className:"mt-3 rounded-3xl bg-gradient-to-br from-brand/35 via-neon-aqua/20 to-neon-lime/25 px-3.5 py-3.5"},React.createElement("div",{className:"rounded-3xl bg-night-950/85 border border-neon-aqua/50 px-3.5 py-3"},React.createElement("div",{className:"flex items-start gap-2"},React.createElement("div",{className:"mt-0.5 rounded-2xl bg-midnight-950 border border-white/10 p-2"}),React.createElement("div",{className:"flex-1"},React.createElement("p",{className:"text-[0.92rem] text-slate-50 font-semibold"},"Want this plan to adapt automatically?"),React.createElement("p",{className:"mt-1 text-[0.78rem] text-slate-300 leading-relaxed"},"Connect a wearable to unlock ",React.createElement("span",{className:"text-slate-100"},"readiness\u2011based training"),", ",React.createElement("span",{className:"text-slate-100"},"sleep\u2011aware recovery"),",",React.createElement("span",{className:"text-slate-100"}," auto\u2011adjusted calories"),", ",React.createElement("span",{className:"text-slate-100"},"weekly load balancing and many more"),"."),React.createElement("p",{className:"mt-2 text-[0.72rem] text-slate-400"},"Takes ~20 seconds \u2014 you can skip and do it later."))))),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:ot},"Looks good \u2013 continue",React.createElement(_,{name:"ArrowRight",size:16}))))},Nl=({state:i,update:s,onNext:x})=>{var S=i.route||"HYBRID_ALL",u=i.wearablesConnected||[],[$,tt]=Ai(u),[ue,Ie]=Ai(i.wearablesSyncMode||"AUTO"),[fe,B]=Ai(i.wearablesMetrics||[]),[X,ne]=Ai(!1),W=[{key:"APPLE_HEALTH",title:"Apple Health",label:"iPhone + Apple Watch",note:"Best for iOS users. Imports activity, workouts, sleep, HR/HRV (device dependent).",img:"https://aroundsketch.github.io/Apple-App-Icons/App-Icon/Apple/Health/@SVG.svg"},{key:"GOOGLE_FIT",title:"Google Fit",label:"Android baseline",note:"Great starting point for Android. Steps, activity minutes, workouts (varies).",img:"https://gstatic.com/images/branding/product/1x/gfit_512dp.png"},{key:"FITBIT",title:"Fitbit",label:"Sleep + readiness style metrics",note:"Strong sleep + cardio metrics. Syncs workouts, HR, sleep stages (if available).",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZCT7hq-kAh4yr7UF9B1ZpNhlbTJ9lhl2ROg&s"},{key:"GARMIN",title:"Garmin",label:"Training load powerhouse",note:"Best for sport data: workouts, HR, VO\u2082 max, training load (if available).",img:"https://cdn.worldvectorlogo.com/logos/garmin-2.svg"},{key:"WHOOP",title:"WHOOP",label:"Recovery signals",note:"Great for recovery trends (sleep + strain). Availability depends on API access.",img:"https://play-lh.googleusercontent.com/RpXxly7Gn0C_MjCHbynE9QxhMgC2D3PI4CAC7E2ujha2GRqepYWgH9IletL1x5facA"},{key:"OURA",title:"Oura",label:"Sleep + readiness",note:"Excellent sleep + readiness. Imports sleep, HR/HRV, temperature trends (if enabled).",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQseQFOiHGWCz8HgGlyNjF1warCeg_P6qgpZQ&s"}],J=()=>{var w=Je=>(i.focusAreas||[]).includes(Je),L=w("FITNESS_FIRST")||S.includes("FITNESS"),ut=w("YOGA_WELLNESS")||S.includes("YOGA"),ot=w("NUTRITION_FIRST")||S.includes("NUTRITION"),ht=["STEPS","RESTING_HR","WORKOUTS"],ba=["ACTIVE_CALORIES","CARDIO_FITNESS_VO2","TRAINING_LOAD"],et=["HRV","SLEEP","STRESS_TREND"],At=["WEIGHT","ACTIVE_CALORIES","SLEEP"];var ma=[...ht];return L&&(ma=ma.concat(ba)),ut&&(ma=ma.concat(et)),ot&&(ma=ma.concat(At)),[...new Set(ma)]},z={STEPS:"Steps",WORKOUTS:"Workouts",RESTING_HR:"Resting HR",ACTIVE_CALORIES:"Calories burned",HRV:"HRV",SLEEP:"Sleep (duration/stages)",STRESS_TREND:"Stress / recovery trend",CARDIO_FITNESS_VO2:"VO\u2082 max / cardio fitness",TRAINING_LOAD:"Training load",WEIGHT:"Weight",ALL_SENSORS:"All available sensors"},H=w=>{B(L=>L.includes(w)?L.filter(ht=>ht!==w):w==="ALL_SENSORS"?["ALL_SENSORS"]:[...L.filter(ht=>ht!=="ALL_SENSORS"),w])},Ht=w=>{tt(L=>L.includes(w)?L.filter(ot=>ot!==w):[...L,w])},Nt=()=>{var w=J();s({wearablesConnected:$,wearablesSyncMode:ue,wearablesMetrics:w}),x()},U=J(),Q=fe.length?fe:U;return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Power up your plan with real data",subtitle:"Connect a wearable to unlock smarter adjustments week-to-week. We will keep your plan aligned with your real life.",icon:"Watch"}),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-4 py-3 mb-3"},React.createElement("div",{className:"text-[0.84rem] text-slate-100 font-semibold"},"Connect now for smarter weekly adjustments "),React.createElement("div",{className:"mt-1 text-[0.72rem] text-slate-400 leading-snug"},"Or skip and connect later in Settings.")),React.createElement("div",{className:"max-h-[260px] overflow-y-auto pr-1 scroll-area"},W.map(w=>React.createElement("div",{key:w.key,className:"rounded-3xl overflow-hidden mb-3 border border-white/10 bg-black/40"},React.createElement("div",{className:"flex gap-3 p-3"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-night-900 border border-[#10FF61]/50 flex items-center justify-center overflow-hidden"},React.createElement("img",{src:w.img,alt:Zi(w.title),className:"w-10 h-10 object-contain"})),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("div",{className:"text-[0.9rem] font-semibold text-slate-50"},Zi(w.title)),React.createElement("div",{className:"text-[0.75rem] text-slate-300"},Zi(w.label)),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},Zi(w.note))),React.createElement("button",{type:"button",onClick:()=>Ht(w.key),className:"h-fit px-3 py-2 rounded-2xl text-[0.75rem] font-semibold border transition-all "+($.includes(w.key)?"bg-[#10FF61] text-night-950 border-[#10FF61] shadow-[0_0_18px_#10FF61]":"bg-night-950/70 text-slate-200 border-white/10 hover:border-[#10FF61]/70")},$.includes(w.key)?"Connected":"Connect"))))),React.createElement("div",{className:"rounded-3xl bg-black/40 border border-white/10 px-4 py-3 mt-2"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[0.84rem] text-slate-100 font-semibold"},"What you\u2019ll unlock"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"FlowOFIT uses your wearable in the background to keep your plan realistic \u2014 even when your week changes.")),React.createElement("button",{type:"button",onClick:()=>ne(!0),className:"shrink-0 rounded-2xl px-3 py-2 text-[0.72rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all",title:"How syncing works"},"How it works")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},["Capacity Score\u2011based training","Sleep\u2011aware recovery","Auto\u2011adjusted calories","Weekly load balancing"].map(w=>React.createElement("span",{key:w,className:"inline-flex items-center rounded-full px-3 py-1 text-[0.72rem] border border-white/10 bg-night-950/70 text-slate-200"},ci(w)))),React.createElement("div",{className:"mt-2 text-[0.72rem] text-slate-400 leading-snug"},"You\u2019re always in control \u2014 disconnect anytime.")),X&&ReactDOM.createPortal(React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[9999] flex items-center justify-center px-4 py-6"},React.createElement("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-[2px] modal-overlay",onClick:()=>ne(!1)}),React.createElement("div",{className:"relative w-full max-w-sm modal-card"},React.createElement("div",{className:"rounded-3xl bg-gradient-to-br from-neon-aqua/20 via-brand/20 to-neon-lime/20 p-3.5 shadow-[0_0_28px_rgba(16,255,97,0.18)]"},React.createElement("div",{className:"rounded-3xl bg-night-950/90 border border-white/10 px-3.5 py-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-slate-50 font-semibold"},"How syncing works"),React.createElement("div",{className:"text-[0.75rem] text-slate-300 mt-1 leading-snug"},"This is the background stuff \u2014 you don\u2019t need to manage it.")),React.createElement("button",{type:"button",onClick:()=>ne(!1),className:"rounded-2xl px-3 py-2 text-[0.75rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all"},"Close")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"Permissions (OAuth)"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"In production, each provider asks for permission to read health/activity data. You can revoke access anytime.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"Update timing"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"Most wearables sync in batches (every few minutes \u2192 hours), not continuous live streaming. FlowOFIT updates your plan when new data arrives.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"What we use"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"We automatically pull the most useful signals your device supports \u2014 based on your route."),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},U.map(w=>React.createElement("span",{key:w,className:"inline-flex items-center rounded-full px-3 py-1 text-[0.72rem] border border-white/10 bg-night-950/70 text-slate-200"},z[w]||w))),React.createElement("div",{className:"mt-2 text-[0.72rem] text-slate-400 leading-snug"},"If your wearable supports advanced metrics (like calories or VO\u2082 max), we\u2019ll use them. If not, we still personalize well using steps, workouts, heart rate, and sleep/recovery.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"preview note"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"In this preview, \u201CConnect\u201D is simulated. In production, each provider requires OAuth/permissions.")),React.createElement("div",{className:"rounded-2xl bg-black/40 border border-white/10 px-3 py-2"},React.createElement("div",{className:"text-[0.78rem] text-slate-200 font-semibold"},"How FlowOFIT adapts"),React.createElement("div",{className:"text-[0.72rem] text-slate-400 mt-1 leading-snug"},"We use this data to adjust training volume, sleep\u2011aware recovery, workout load balancing, and smarter calorie targets (when supported)."))))))),document.body),React.createElement("div",{className:"pt-3 space-y-2"},React.createElement(No,{onClick:Nt},"Continue ",React.createElement(_,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>{s({wearablesConnected:[],wearablesSyncMode:ue,wearablesMetrics:Q}),x()},className:"w-full rounded-2xl py-3 text-[0.9rem] font-semibold border border-white/10 bg-black/45 text-slate-200 hover:border-[#10FF61]/60 transition-all"},"Skip for now")))},Ko=({onNext:i})=>(no(()=>{var s=setTimeout(()=>{typeof i=="function"&&i()},2200);return()=>clearTimeout(s)},[]),React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Setting up your starting week\u2026",subtitle:"We\u2019re stitching together your plan based on everything you just told us.",icon:"Cpu"}),React.createElement("div",{className:"flex flex-col items-center justify-center gap-4 max-h-[360px] min-h-[260px]"},React.createElement("div",{className:"relative"},React.createElement("div",{className:"w-24 h-24 rounded-full border border-neon-aqua/50 flex items-center justify-center bg-black/50"},React.createElement("div",{className:"w-16 h-16 rounded-full border-2 border-neon-aqua/80 flex items-center justify-center animate-spin"},React.createElement(_,{name:"Infinity",size:28,className:"text-neon-aqua"})))),React.createElement("p",{className:"text-[0.8rem] text-slate-300 text-center px-4"},"In the real app, this would take you straight into your daily tiles and roadmap.")),React.createElement("div",{className:"pt-3"},React.createElement(No,{onClick:i},"Continue to dashboard (stub)",React.createElement(_,{name:"ArrowRight",size:16}))))),il=({onStart:i})=>(React.useEffect(()=>{var s=setTimeout(()=>{i&&i()},1400);return()=>clearTimeout(s)},[i]),React.createElement("div",{className:"min-h-screen flex items-center justify-center px-6 bg-onboarding-grid bg-night-950"},React.createElement("div",{className:"max-w-sm text-center animate-step"},React.createElement("div",{className:"mb-6 flex flex-col items-center gap-3"},React.createElement("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-brand/30 to-brand-purple/20 border border-white/10 flex items-center justify-center shadow-[0_20px_60px_rgba(0,0,0,0.55)]"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-brand/15 border border-brand/30 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-brand"}))),React.createElement("div",{className:"text-xs font-mono uppercase tracking-[0.28em] text-slate-500"},"FlowOFIT")),React.createElement("h1",{className:"text-2xl font-bold text-white mb-2"},"Welcome \u2014 we\u2019re personalising your plan"),React.createElement("p",{className:"text-slate-400 text-sm leading-relaxed"},"This takes a second. We\u2019ll tailor everything to your goals and your lifestyle."),React.createElement("div",{className:"mt-6 flex items-center justify-center"},React.createElement("div",{className:"flex items-center gap-2 text-[11px] text-slate-500"},React.createElement("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-brand animate-pulse"}),"Loading your journey\u2026")))));class Cr extends React.Component{constructor(s){super(s),this.state={hasError:!1,message:""}}static getDerivedStateFromError(s){return{hasError:!0,message:s&&s.message?s.message:"Something went wrong."}}componentDidCatch(s,x){console.error("FlowOFIT UI error:",s,x)}render(){return this.state.hasError?React.createElement("div",{className:"max-w-md w-full"},React.createElement("div",{className:"rounded-3xl bg-black/50 border border-red-500/40 px-4 py-4"},React.createElement("div",{className:"text-slate-50 font-semibold"},"Something broke on this step"),React.createElement("div",{className:"text-[0.8rem] text-slate-300 mt-1"},"Try going back and continuing again. If it keeps happening, refresh the page."),React.createElement("div",{className:"mt-3 text-[0.75rem] text-red-200/80 break-words"},ci(this.state.message)))):this.props.children}}var Yn=({onComplete:i,onExistingLogin:s,onMagicLink:x})=>{var[S,u]=Ai(0),[$,tt]=Ai({}),ue=J=>tt(z=>({...z,...J})),fe=[({state:J,update:z,onNext:H})=>{var[Ht,Nt]=Ai("SIGNIN"),[U,Q]=Ai((J==null?void 0:J.email)||""),[w,L]=Ai(""),[ut,ot]=Ai("INPUT"),[ht,ba]=Ai("");var et=({children:ma})=>React.createElement("div",{className:"rounded-3xl bg-white/5 border border-white/10 p-4 shadow-[0_0_30px_rgba(16,255,97,0.06)]"},ma);var At=({active:ma,icon:Je,label:Oa,onClick:He})=>React.createElement("button",{type:"button",onClick:Ca=>{try{Ca.preventDefault(),Ca.stopPropagation()}catch(ha){}He&&He(Ca)},className:["flex-1 py-2.5 rounded-2xl border text-[0.78rem] font-semibold transition-all flex items-center justify-center gap-2",ma?"bg-white/10 border-white/20 text-white":"bg-black/20 border-white/10 text-slate-300 hover:bg-white/5 hover:border-white/15"].join(" ")},React.createElement(_,{name:Je,size:14}),ci(Oa));if(Ht==="SIGNIN")return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Sign in",subtitle:"Access your dashboard, plan, and weekly insights.",icon:"LogIn"}),React.createElement(et,null,React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-slate-400 mb-1"},"Email"),React.createElement("input",{value:U,onChange:ma=>Q(ma.target.value),type:"email",inputMode:"email",autoComplete:"email",placeholder:"name@email.com",className:"w-full rounded-2xl px-4 py-3 bg-black/20 border border-white/10 focus:outline-none focus:ring-2 focus:ring-neon-aqua/40"})),React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between text-[11px] text-slate-400 mb-1"},React.createElement("span",null,"Password"),React.createElement("button",{type:"button",onClick:()=>alert("Password reset is not wired in this build."),className:"text-neon-aqua hover:underline"},"Forgot?")),React.createElement("input",{value:w,onChange:ma=>L(ma.target.value),type:"password",autoComplete:"current-password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full rounded-2xl px-4 py-3 bg-black/20 border border-white/10 focus:outline-none focus:ring-2 focus:ring-neon-aqua/40"})),React.createElement(No,{onClick:()=>{z({authIntent:"LOGIN",email:U,authMethod:"PASSWORD"}),typeof s=="function"?s({email:U}):H()}},"Sign in",React.createElement(_,{name:"ArrowRight",size:16})),React.createElement("div",{className:"pt-3 border-t border-white/10"},React.createElement("div",{className:"text-[11px] text-slate-400 mb-2"},"New to FlowOFIT?"),React.createElement("button",{type:"button",onClick:()=>{z({authIntent:"SIGNUP",authMethod:"STANDARD",email:U}),H()},className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"UserPlus",size:16}),"Create account")),React.createElement("div",{className:"pt-3 border-t border-white/10"},React.createElement("div",{className:"text-[11px] text-slate-400 mb-2"},"Invited by a coach or organization?"),React.createElement("button",{type:"button",onClick:()=>{typeof x=="function"?x():(Nt("MAGIC"),ot("INPUT"))},className:"w-full py-3 rounded-2xl border border-neon-lime/25 bg-white/5 text-white font-semibold hover:border-neon-lime/45 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"Sparkles",size:16}),"Use magic link")))));if(Ht==="MAGIC"){if(ut==="INPUT")return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Magic link",subtitle:"Invited by a coach or gym? Paste your code to connect instantly.",icon:"Sparkles"}),React.createElement(et,null,React.createElement("div",{className:"flex gap-2 mb-3"},React.createElement(At,{icon:"LogIn",label:"Log in",onClick:()=>Nt("SIGNIN")}),React.createElement(At,{icon:"UserPlus",label:"Sign up",onClick:()=>{z({authIntent:"SIGNUP",authMethod:"STANDARD"}),H()}}),React.createElement(At,{active:!0,icon:"Sparkles",label:"Magic link",onClick:()=>{Nt("MAGIC"),ot("INPUT")}})),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Email"),React.createElement("input",{value:U,onChange:ma=>Q(ma.target.value),placeholder:"you@email.com",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"})),React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Magic link code"),React.createElement("input",{value:ht,onChange:ma=>ba(ma.target.value),placeholder:"e.g. FLOW-ABCD-1234",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"}),React.createElement("div",{className:"mt-2 text-[11px] text-slate-500"},"(preview) In production this is generated by your coach / gym tenant and verified server-side.")),React.createElement(No,{onClick:()=>ot("STATUS")},"Verify & continue",React.createElement(_,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>Nt("CHOICE"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back to options"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/30 px-3 py-2.5 text-[11px] text-slate-300 leading-relaxed"},"Magic Link can auto-link you to a coach program and unlock linked-client features."));if(ut==="STATUS")return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Verified",subtitle:"Choose what happens next (preview simulation).",icon:"ShieldCheck"}),React.createElement(et,null,React.createElement("div",{className:"space-y-3"},React.createElement("button",{type:"button",onClick:()=>{z({authIntent:"MAGIC",authMethod:"MAGIC_LINK",magicLink:ht,email:U,magicStatus:"EXISTING_USER"}),H()},className:"w-full py-3 rounded-2xl bg-white/10 border border-white/15 text-white font-semibold hover:bg-white/15 transition-colors"},"Existing user \u2014 log me in"),React.createElement("button",{type:"button",onClick:()=>ot("QUICK_SIGNUP"),className:"w-full py-3 rounded-2xl bg-[#10FF61] text-night-950 border border-[#10FF61] font-semibold hover:opacity-95 transition-opacity"},"New user \u2014 create account"),React.createElement("button",{type:"button",onClick:()=>ot("INPUT"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back"))));if(ut==="QUICK_SIGNUP")return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Create your password",subtitle:"Finish creating your account (preview).",icon:"Key"}),React.createElement(et,null,React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"block text-[0.75rem] text-slate-400 mb-1"},"Password"),React.createElement("input",{type:"password",value:w,onChange:ma=>L(ma.target.value),placeholder:"Create password",className:"w-full rounded-2xl border border-white/15 bg-night-950/70 px-4 py-3 text-slate-100 outline-none focus:border-neon-lime/60"})),React.createElement(No,{onClick:()=>{z({authIntent:"MAGIC",authMethod:"MAGIC_LINK",magicLink:ht,email:U,magicStatus:"NEW_USER_CREATED"}),H()}},"Create & continue",React.createElement(_,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>ot("STATUS"),className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors"},"Back"))))}return React.createElement(React.Fragment,null,React.createElement(Bo,{title:"Client access",subtitle:"Create an account to save your plan, dashboard, and weekly insights.",icon:"User"}),React.createElement("div",{className:"space-y-4"},React.createElement(et,null,React.createElement("div",{className:"flex gap-2 mb-3"},React.createElement(At,{active:!0,icon:"User",label:"Options",onClick:()=>Nt("CHOICE")}),React.createElement(At,{icon:"LogIn",label:"Log in",onClick:()=>{typeof s=="function"?s({email:U}):Nt("SIGNIN")}}),React.createElement(At,{icon:"Sparkles",label:"Magic link",onClick:()=>{typeof x=="function"?x():(Nt("MAGIC"),ot("INPUT"))}})),React.createElement("div",{className:"text-sm text-slate-200 font-semibold"},"Choose how you want to continue"),React.createElement("div",{className:"text-xs text-slate-400 mt-1"},"Sign up if you\u2019re new, log in if you already have an account, or use a Magic Link from your coach/gym."),React.createElement("div",{className:"mt-4 space-y-3"},React.createElement(No,{onClick:()=>{z({authIntent:"SIGNUP",authMethod:"STANDARD"}),H()}},"Create account",React.createElement(_,{name:"ArrowRight",size:16})),React.createElement("button",{type:"button",onClick:()=>{typeof s=="function"?s({email:U}):Nt("SIGNIN")},className:"w-full py-3 rounded-2xl border border-white/15 bg-white/5 text-white font-semibold hover:border-white/25 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"LogIn",size:16}),"Log in"),React.createElement("button",{type:"button",onClick:()=>{typeof x=="function"?x():(Nt("MAGIC"),ot("INPUT"))},className:"w-full py-3 rounded-2xl border border-neon-lime/25 bg-white/5 text-white font-semibold hover:border-neon-lime/45 hover:bg-white/10 transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"Sparkles",size:16}),"Use magic link"),React.createElement("div",{className:"grid grid-cols-3 gap-2 pt-2 text-[11px] text-slate-300"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(_,{name:"Lock",size:14,className:"text-neon-aqua"}),React.createElement("span",null,"Secure by design")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(_,{name:"Shield",size:14,className:"text-neon-lime"}),React.createElement("span",null,"Privacy controls")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 px-2.5 py-2 flex items-center gap-2"},React.createElement(_,{name:"Zap",size:14,className:"text-white"}),React.createElement("span",null,"Fast setup")))))))},bn,_n,gr,Wn,nr,Br,fl,ul,yl,Nl,Ko],B=fe.length;if(S===0)return React.createElement(il,{onStart:()=>u(1)});var X=fe[S-1],ne=()=>{if(S<B){u(S+1);return}i&&i($)},W=()=>{S>1&&u(S-1)};return React.createElement(Js,{stepIndex:S-1,totalSteps:B,canBack:S>1,onBack:W},React.createElement(Cr,null,React.createElement(X,{state:$,update:ue,onNext:ne})))},ml=({onNext:i,onUpdate:s,onConversionEvent:x,context:S,onExistingLogin:u,onMagicLink:$})=>React.createElement(Yn,{onComplete:ue=>{var Ie=ue.focusAreas||[],fe=Ie.includes("YOGA_WELLNESS"),B=Ie.includes("FITNESS_FIRST"),X=Ie.includes("NUTRITION_FIRST");var ne="General Fitness";fe&&!B&&!X?ne="Yoga & Wellness":X&&!B&&!fe?ne="Nutrition & Habits":B?ne="General Fitness":fe&&(ne="Yoga & Wellness");var W=Ie.length>1;if(s&&s("q1_goal",ne),s&&s("hasSecondary",W),s&&s("v10_onboarding",ue),x){var J=ue.age,z=J?J<25?"18-24":J<35?"25-34":J<45?"35-44":J<55?"45-54":"55+":null;x("IC_ONBOARD_COMPLETE",{variant:ne==="Yoga & Wellness"&&!W?"PURE_YOGA":"STANDARD",primaryGoal:ue.primaryGoal||null,secondaryGoal:W&&Ie.filter(Ht=>Ht!==(fe?"YOGA_WELLNESS":B?"FITNESS_FIRST":"NUTRITION_FIRST"))[0]||null,ageBand:z,experienceLevel:ue.experience||ue.trainingExperience||null,planType:"Independent"})}i&&i("ROUTING_ENGINE")},onExistingLogin:u,onMagicLink:$}),vr=({step:i,onNext:s,onUpdate:x,onBack:S,onHome:u,canGoBack:$})=>{var tt={onBack:S,onHome:u,canGoBack:$};window.__FOF=window.__FOF||{},window.__FOF.PRO_ROLE_KEY=window.__FOF.PRO_ROLE_KEY||"fof.pro.roleType.v1";var ue="fof.pro.primaryRole.v1",Ie=(X,ne)=>{try{ne&&localStorage.setItem(ue,String(ne)),X&&localStorage.setItem(window.__FOF.PRO_ROLE_KEY,String(X));try{window.dispatchEvent(new CustomEvent("fof:pro_role_changed",{detail:{roleType:String(X||""),primaryRole:String(ne||"")}}))}catch(W){}}catch(W){}},fe=()=>{try{return String(localStorage.getItem(ue)||"")}catch(X){return""}},B=X=>String(X||"").toUpperCase()==="TRAINER"?"TRAINER":"SPECIALIST";return i==="Pro_RoleSelect"?React.createElement(xt,{title:"Primary Expertise",step:1,total:8,...tt},React.createElement("div",{className:"grid gap-4"},[{id:"TRAINER",icon:"Dumbbell",label:"Trainer / Coach",desc:"Workout programming & tracking",color:"#3b82f6"},{id:"NUTRITION",icon:"Utensils",label:"Nutritionist",desc:"Meal planning & macros",color:"#10b981"},{id:"SMT",icon:"Activity",label:"SMT / Bodywork",desc:"Therapy & Recovery",color:"#f97316"},{id:"YOGA",icon:"Sun",label:"Yoga Instructor",desc:"Flows & Mindfulness",color:"#8b5cf6"},{id:"PHYSIO",icon:"Stethoscope",label:"Physiotherapist",desc:"Medical Rehab (Standalone)",color:"#ef4444"}].map(X=>React.createElement("button",{key:X.id,onClick:()=>{var ne=String(X.id||"").toUpperCase();Ie(B(ne),ne);try{x("role",X.id)}catch(W){}s(ne==="PHYSIO"?"PHYSIO_NOTICE":"HYBRID_CHECK")},className:"flex items-center gap-5 p-4 bg-midnight-950 border border-midnight-700 rounded-xl hover:border-brand transition-all group text-left"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-lg group-hover:scale-110 transition-transform"},React.createElement(_,{name:X.icon,size:24,color:X.color})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},ci(X.label)),React.createElement("div",{className:"text-slate-400 text-sm"},ci(X.desc))))))):i==="PHYSIO_NOTICE"?React.createElement(xt,{title:"Medical Account Notice",step:1,total:8,...tt},React.createElement("div",{className:"bg-red-500/10 border border-red-500/50 p-6 rounded-xl mb-6"},React.createElement("div",{className:"flex items-center gap-3 mb-2 text-red-400"},React.createElement(_,{name:"ShieldAlert",size:24}),React.createElement("h3",{className:"font-bold text-lg"},"Standalone Workspace")),React.createElement("p",{className:"text-sm text-slate-300"},"Physiotherapist accounts operate in a compliant, isolated medical environment. You cannot merge this account with general fitness roles later due to data privacy regulations.")),React.createElement("button",{onClick:()=>s("SO1"),className:"w-full py-4 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors"},"Acknowledge & Continue")):i==="HYBRID_CHECK"?React.createElement(xt,{title:"Hybrid Ecosystem",step:2,total:8,...tt},React.createElement("div",{className:"text-center mb-8"},React.createElement("div",{className:"w-20 h-20 bg-brand/10 rounded-full flex items-center justify-center mx-auto mb-4"},React.createElement(_,{name:"Layers",size:40,className:"text-brand"})),React.createElement("h3",{className:"text-xl font-bold mb-2"},"Add Secondary Role?"),React.createElement("p",{className:"text-slate-400 text-sm"},"Do you want to merge features? (e.g. Trainer + Nutritionist)")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("button",{onClick:()=>{var X=fe();Ie(B(X),X),x("isHybrid",!1),s("T1")},className:"py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"No, Single Role"),React.createElement("button",{onClick:()=>{var X=fe();Ie("HYBRID",X),x("isHybrid",!0),s("SEC_ROLE_SELECT")},className:"py-4 bg-brand text-white rounded-xl font-bold shadow-neon hover:bg-blue-600 transition-colors"},"Yes, Merge Access"))):i==="SEC_ROLE_SELECT"?React.createElement(xt,{title:"Select Secondary Role",step:2,total:8,...tt},React.createElement("p",{className:"text-slate-400 mb-6 text-sm"},"Choose the role to merge into your dashboard."),React.createElement("div",{className:"grid gap-4"},[{id:"NUTRITION",icon:"Utensils",label:"Nutritionist",desc:"Meal planning & macros",color:"#10b981"},{id:"SMT",icon:"Activity",label:"SMT / Bodywork",desc:"Therapy & Recovery",color:"#f97316"},{id:"YOGA",icon:"Sun",label:"Yoga Instructor",desc:"Flows & Mindfulness",color:"#8b5cf6"}].map(X=>React.createElement("button",{key:X.id,onClick:()=>{var ne=fe();Ie("HYBRID",ne),x("secondaryRole",X.id),s("T1")},className:"flex items-center gap-5 p-4 bg-midnight-950 border border-midnight-700 rounded-xl hover:border-brand transition-all group text-left"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-lg group-hover:scale-110 transition-transform"},React.createElement(_,{name:X.icon,size:24,color:X.color})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},ci(X.label)),React.createElement("div",{className:"text-slate-400 text-sm"},ci(X.desc))))))):i==="T1"||i==="SO1"?React.createElement(xt,{title:"Create Account",step:3,total:8,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Full Legal Name"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Email Address"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-4 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",type:"password",placeholder:"Password"}),React.createElement("button",{onClick:()=>s(i==="SO1"?"SO_CREDENTIALS":"T1a"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-4 hover:bg-blue-600 transition-colors"},"Create Account"))):i==="SO_CREDENTIALS"?React.createElement(xt,{title:"Verify Credentials",step:4,total:8,...tt},React.createElement("div",{className:"border-2 border-dashed border-midnight-700 p-10 rounded-xl text-center hover:bg-midnight-900 cursor-pointer mb-6 transition-colors"},React.createElement(_,{name:"UploadCloud",size:32,className:"text-slate-400 mx-auto mb-2"}),React.createElement("h3",{className:"font-bold text-white"},"Upload Medical License"),React.createElement("p",{className:"text-sm text-slate-500"},"PDF or JPG (Max 5MB)")),React.createElement("button",{onClick:()=>s("SO2_VERIFY"),className:"w-full py-4 bg-brand-red text-white font-bold rounded-xl hover:bg-red-600 transition-colors"},"Submit for Review")):i==="T1a"?React.createElement(xt,{title:"Build Profile",step:4,total:8,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex gap-4"},React.createElement("div",{className:"w-24 h-24 bg-midnight-950 rounded-xl flex items-center justify-center border border-midnight-700 text-slate-500"},React.createElement(_,{name:"Camera"})),React.createElement("div",{className:"flex-1 space-y-4"},React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Headline (e.g. HIIT Specialist)"}),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand transition-colors",placeholder:"Instagram Handle"}))),React.createElement("textarea",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white h-32 focus:outline-none focus:border-brand transition-colors",placeholder:"Bio & Specialties..."}),React.createElement("button",{onClick:()=>s("T2"),className:"w-full py-4 bg-brand text-white font-bold rounded-xl mt-2 hover:bg-blue-600 transition-colors"},"Save & Continue"))):i==="T2"?React.createElement(xt,{title:"Select Plan",step:5,total:8,...tt},React.createElement("div",{className:"grid md:grid-cols-2 gap-4"},React.createElement("div",{onClick:()=>s("T3_PROVISION"),className:"bg-midnight-950 border border-midnight-700 p-6 rounded-xl hover:border-brand cursor-pointer transition-colors"},React.createElement("h3",{className:"font-bold text-xl"},"Pro"),React.createElement("div",{className:"text-3xl font-bold text-brand my-2"},"$29",React.createElement("span",{className:"text-sm text-slate-500"},"/mo")),React.createElement("p",{className:"text-xs text-slate-400"},"Up to 50 clients.")),React.createElement("div",{onClick:()=>s("T_WL_PROMPT"),className:"bg-midnight-800 border-2 border-brand p-6 rounded-xl cursor-pointer relative shadow-neon hover:scale-105 transition-transform"},React.createElement("div",{className:"absolute top-0 right-0 bg-brand text-white text-[9px] font-bold px-3 py-1 rounded-bl-lg"},"WHITE LABEL"),React.createElement("h3",{className:"font-bold text-xl"},"Studio"),React.createElement("div",{className:"text-3xl font-bold text-white my-2"},"$79",React.createElement("span",{className:"text-sm text-slate-400"},"/mo")),React.createElement("p",{className:"text-xs text-slate-300"},"Unlimited + White Label.")))):i==="T_WL_PROMPT"?React.createElement(xt,{title:"Set up your branded app?",step:6,total:8,...tt},React.createElement("div",{className:"bg-midnight-950 border border-midnight-700 rounded-2xl p-5 mb-6"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-brand/15 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:20,className:"text-brand"})),React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},"White-Label Setup"),React.createElement("div",{className:"text-xs text-slate-400"},"Brand your app now, or come back later."))),React.createElement("div",{className:"text-sm text-slate-300 leading-relaxed"},"You can add your logo, colors, and domain from the White-Label Hub. We\u2019ll open it right after onboarding.")),React.createElement("div",{className:"grid gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{var X="FOF_TRAINER_ONBOARDING_3A_V1",ne=(()=>{try{return JSON.parse(localStorage.getItem(X)||"{}")||{}}catch(W){return{}}})();ne.whiteLabelPromptAnswered=!0,ne.whiteLabelDone=!0,ne.postOnboardingNav="WHITE_LABEL_HUB",ne.postOnboardingReason="ONB_WL_PROMPT",ne.skipBulkImportOnce=!0,ne.lastStep="WL_PROMPT_BUILD",ne.updatedAt=Date.now(),localStorage.setItem(X,JSON.stringify(ne))}catch(X){}s("T3_PROVISION")},className:"w-full py-4 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Yes \u2014 build my app"),React.createElement("button",{type:"button",onClick:()=>{try{var X="FOF_TRAINER_ONBOARDING_3A_V1",ne=(()=>{try{return JSON.parse(localStorage.getItem(X)||"{}")||{}}catch(W){return{}}})();ne.whiteLabelPromptAnswered=!0,ne.lastStep="WL_PROMPT_LATER",ne.updatedAt=Date.now(),localStorage.setItem(X,JSON.stringify(ne))}catch(X){}s("T3_PROVISION")},className:"w-full py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"Later"))):i==="T_WHITE_LABEL"?React.createElement(xt,{title:"Brand Your App",step:6,total:8,...tt},React.createElement("div",{className:"space-y-6 mb-8"},React.createElement("div",null,React.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase"},"App Name"),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl mt-1 focus:outline-none focus:border-brand",defaultValue:"Apex Performance"})),React.createElement("div",null,React.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase"},"Theme"),React.createElement("div",{className:"flex gap-2 mt-1"},["#3b82f6","#ef4444","#10b981"].map(X=>React.createElement("div",{key:X,className:"w-8 h-8 rounded-full cursor-pointer hover:scale-110 transition-transform",style:{background:X}}))))),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{onClick:()=>s("T3_PROVISION"),className:"flex-1 py-4 border border-midnight-700 rounded-xl font-bold hover:bg-midnight-800 transition-colors"},"Skip"),React.createElement("button",{onClick:()=>s("T3_PROVISION"),className:"flex-1 py-4 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Launch"))):i==="BULK_IMPORT"?React.createElement(xt,{title:"Import Clients",step:7,total:8,...tt},React.createElement("div",{className:"grid gap-4 mb-6"},React.createElement("button",{type:"button",onClick:()=>s("BI_MAPPING"),className:"flex items-center gap-4 p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all group"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-full text-brand group-hover:bg-brand group-hover:text-white transition-colors"},React.createElement(_,{name:"FileText",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white"},"Upload CSV & Bulk Import"),React.createElement("p",{className:"text-sm text-slate-300"},"Bring in your existing clients and historical data. Map columns and validate before import."))),React.createElement("button",{type:"button",onClick:()=>s("BI_PROCESS"),className:"flex items-center gap-4 p-6 bg-midnight-950 border border-midnight-700 rounded-xl text-left hover:border-brand transition-all group"},React.createElement("div",{className:"p-3 bg-midnight-800 rounded-full text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white transition-colors"},React.createElement(_,{name:"Users",size:24})),React.createElement("div",null,React.createElement("h3",{className:"font-bold text-white"},"Quick Start with Templates"),React.createElement("p",{className:"text-sm text-slate-300"},"Use smart defaults and starter templates while a deeper import runs in the background.")))),React.createElement("div",{className:"text-xs text-slate-400 text-center mt-4"},"You can always return to Bulk Import later from the System & Data area.")):i==="BI_MAPPING"?React.createElement(xt,{title:"Map Your CSV Columns",step:7,total:8,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("p",{className:"text-sm text-slate-300"},"Match the columns from your CSV file to FlowOFIT client fields. This is a one-time setup that you can reuse later."),React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-950/80 p-4"},React.createElement("div",{className:"grid grid-cols-2 text-xs text-slate-400 mb-2"},React.createElement("div",null,"CSV Column"),React.createElement("div",null,"Mapped To")),React.createElement("div",{className:"space-y-2 text-xs"},React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"full_name"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Client Name")),React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"email_address"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Email")),React.createElement("div",{className:"grid grid-cols-2 gap-2 items-center"},React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"phone"),React.createElement("div",{className:"px-2 py-1 rounded-lg bg-midnight-900 border border-midnight-700"},"Phone (Optional)"))),React.createElement("div",{className:"mt-3 text-[11px] text-slate-500"},"In the real system this table will be fully editable with dropdowns and validation.")),React.createElement("div",{className:"flex justify-between items-center text-[11px] text-slate-500"},React.createElement("span",null,"Detected rows: 120 \u2022 Duplicates will be flagged automatically."),React.createElement("button",{type:"button",className:"underline hover:text-brand",onClick:()=>S&&S()},"Back")),React.createElement("div",{className:"flex gap-3 mt-4"},React.createElement("button",{type:"button",onClick:()=>s("BI_PROCESS"),className:"flex-1 py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Confirm Mapping & Continue"),React.createElement("button",{type:"button",onClick:()=>s("T_WL_PROMPT"),className:"px-4 py-3 rounded-xl border border-slate-600 text-xs text-slate-300 hover:bg-midnight-800 transition-colors"},"Skip Import For Now")))):i==="BI_PROCESS"?React.createElement(xt,{title:"Import In Progress",step:8,total:8,...tt},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full border-2 border-emerald-400/60 border-t-transparent animate-spin"}),React.createElement("div",null,React.createElement("div",{className:"text-sm text-slate-100 font-semibold"},"Running Bulk Import"),React.createElement("div",{className:"text-xs text-slate-400"},"We are validating rows, merging duplicates and assigning to trainers."))),React.createElement("div",{className:"grid grid-cols-3 gap-3 text-center text-xs"},React.createElement("div",{className:"rounded-xl bg-midnight-950 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400 mb-1"},"Total Rows"),React.createElement("div",{className:"text-lg font-bold text-white"},"120")),React.createElement("div",{className:"rounded-xl bg-midnight-950 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400 mb-1"},"Imported"),React.createElement("div",{className:"text-lg font-bold text-emerald-400"},"112")),React.createElement("div",{className:"rounded-xl bg-midnight-950 border border-midnight-700 p-3"},React.createElement("div",{className:"text-slate-400 mb-1"},"Needs Review"),React.createElement("div",{className:"text-lg font-bold text-amber-400"},"8"))),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-midnight-700 p-4 text-xs text-slate-300"},"A detailed error report and \u201Cretry import\u201D controls will live here in the full product. For now this preview assumes the import completed successfully."),React.createElement("button",{type:"button",onClick:()=>s("T_WL_PROMPT"),className:"w-full py-3 rounded-xl bg-brand text-white font-semibold hover:bg-blue-600 transition-colors"},"Finish Setup & Continue"))):React.createElement("div",{className:"text-white p-10"},"Unknown Pro Step: ",i)},Sl=({onNavigate:i,dashboardType:s})=>{var[x,S]=Ai(!1),u="fof_dash_checklist_v1",$="fof_dash_checklist_dismissed_v1",tt=()=>{try{var z=localStorage.getItem(u);return z?JSON.parse(z):null}catch(z){return null}},[ue,Ie]=Ai(()=>{try{return localStorage.getItem($)==="1"}catch(z){return!1}}),[fe,B]=Ai(()=>tt()||{wearable:!1,schedule:!1,nutrition:!1,baseline:!1}),X=z=>{B(z);try{localStorage.setItem(u,JSON.stringify(z))}catch(H){}},ne=()=>{Ie(!0);try{localStorage.setItem($,"1")}catch(z){}},W=()=>{X({wearable:!1,schedule:!1,nutrition:!1,baseline:!1}),Ie(!1);try{localStorage.removeItem($)}catch(H){}},J=[{key:"wearable",title:"Connect a wearable",desc:"Unlock readiness + auto-adjusted plans.",icon:"Watch",cta:"Connect",onClick:()=>S(!0)},{key:"schedule",title:"Set your weekly schedule",desc:"Choose training days so your plan fits real life.",icon:"CalendarDays",cta:"Set days",onClick:()=>alert("Schedule setup \u2014 placeholder in prototype.")},{key:"nutrition",title:"Personalize nutrition",desc:"Set preferences + goals for better meal guidance.",icon:"Utensils",cta:"Set prefs",onClick:()=>alert("Nutrition preferences \u2014 placeholder in prototype.")},{key:"baseline",title:"Do a 60-second baseline check-in",desc:"Energy, soreness, sleep \u2014 improves recommendations.",icon:"ClipboardCheck",cta:"Check-in",onClick:()=>alert("Baseline check-in \u2014 placeholder in prototype.")}];return React.createElement("div",{className:"space-y-8 max-w-7xl mx-auto"},s==="INDEPENDENT"&&React.createElement("div",{className:"bg-brand-accent/10 border border-brand-accent p-4 rounded-xl text-brand-accent font-bold text-center"},"Independent Mode \u2022 ",React.createElement("button",{className:"underline"},"Connect Coach")),s==="LINKED"&&React.createElement("div",{className:"bg-brand/10 border border-brand p-4 rounded-xl text-brand font-bold text-center"},"Linked to Coach Alex"),s==="YOGA"&&React.createElement("div",{className:"bg-brand-purple/10 border border-brand-purple p-4 rounded-xl text-brand-purple font-bold text-center"},"Yoga Focus"),toast&&React.createElement("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50"},React.createElement("div",{className:"glass-panel px-4 py-3 rounded-2xl border border-white/10 shadow-lg flex items-center gap-3"},React.createElement(_,{name:"CheckCircle",size:16,className:"text-emerald-400"}),React.createElement("div",{className:"text-sm text-slate-200"},ci(toast.message)),toast.onUndo&&React.createElement("button",{type:"button",onClick:toast.onUndo,className:"ml-2 px-3 py-1.5 rounded-xl bg-midnight-900 border border-midnight-700 hover:border-brand text-slate-200 text-xs font-semibold"},"Undo"),React.createElement("button",{type:"button",onClick:()=>setToast(null),className:"ml-1 p-2 rounded-xl hover:bg-midnight-900 text-slate-400 hover:text-white",title:"Close"},React.createElement(_,{name:"X",size:14})))),s==="INDEPENDENT"&&!ue&&React.createElement("div",{className:"glass-panel p-5 rounded-2xl border border-white/10 relative"},React.createElement("button",{type:"button",onClick:ne,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center text-slate-200",title:"Dismiss"},React.createElement(_,{name:"X",size:16})),React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("div",{className:"p-3 rounded-2xl bg-[#10FF61]/10 border border-[#10FF61]/30 text-[#10FF61]"},React.createElement(_,{name:"ListChecks",size:20})),React.createElement("div",null,React.createElement("h3",{className:"font-extrabold text-white tracking-wide"},"Setup Checklist"),React.createElement("p",{className:"text-xs text-slate-400 mt-0.5"},"Finish the basics to get better recommendations (and +100 XP)."))),React.createElement("div",{className:"flex flex-col items-end gap-1 min-w-[92px]"},(()=>{var z=Object.values(fe).filter(Boolean).length,H=Object.keys(fe).length,Ht=Math.round(z/H*100);return React.createElement(React.Fragment,null,React.createElement("div",{className:"text-xs font-bold text-white"},z,"/",H),React.createElement("div",{className:"w-24 h-2 bg-midnight-800 rounded-full overflow-hidden border border-white/10"},React.createElement("div",{className:"h-full bg-[#10FF61]",style:{width:Ht+"%"}})))})(),clientMode==="LINKED"&&React.createElement("div",{ref:reqRef,className:"mt-4 rounded-2xl border border-[rgba(168,85,255,0.22)] bg-[rgba(168,85,255,0.08)] p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Plan requests"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"Linked clients: swaps/reschedules become requests your coach can approve.")),React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] border "+(requests.filter(z=>z&&z.status==="PENDING").length>0?"bg-amber-400/10 text-amber-200 border-amber-400/35":"bg-emerald-400/10 text-emerald-200 border-emerald-400/35")},requests.filter(z=>z&&z.status==="PENDING").length>0?requests.filter(z=>z&&z.status==="PENDING").length+" pending":"No pending")),React.createElement("div",{className:"mt-3 space-y-2"},!requests||requests.length===0?React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3 text-[12px] text-white/70"},"No requests yet. Open any day in the calendar and tap ",React.createElement("span",{className:"font-semibold text-white"},"\u201CAsk coach to approve\u201D"),"."):requests.slice(0,8).map(z=>{var H,Ht;return React.createElement("div",{key:z.id,className:"rounded-2xl border border-white/12 bg-white/5 p-3 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},z.kind," \u2022 ",((H=z.from)==null?void 0:H.day)||"\u2014"," ",(Ht=z.to)!=null&&Ht.day?"\u2192 "+z.to.day:""),React.createElement("div",{className:"text-[11px] text-white/70"},z.status==="PENDING"?"Pending coach approval":z.status==="APPROVED"?"Approved":"Rejected",z.ts?" \u2022 "+String(z.ts).slice(0,10):"")),z.status==="PENDING"?React.createElement("button",{type:"button",onClick:()=>approveRequest(z.id),className:"px-3 py-2 rounded-2xl border border-emerald-400/35 bg-emerald-400/10 hover:bg-emerald-400/14 text-[12px] text-white font-semibold",title:"Demo only"},"Simulate approval"):React.createElement("span",{className:"text-[9px] font-mono text-white/45"},z.status))}))))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},J.map(z=>{var H=!!fe[z.key];return React.createElement("div",{key:z.key,className:"p-4 rounded-2xl bg-black/30 border border-white/10 flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 w-9 h-9 rounded-xl flex items-center justify-center border "+(H?"bg-[#10FF61]/15 border-[#10FF61]/40 text-[#10FF61]":"bg-white/5 border-white/10 text-slate-200")},React.createElement(_,{name:H?"Check":z.icon,size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-sm font-bold text-white"},ci(z.title)),React.createElement("button",{type:"button",onClick:()=>{if(H){var Ht={...fe,[z.key]:!1};X(Ht)}else{z.onClick&&z.onClick();var Ht={...fe,[z.key]:!0};X(Ht)}},className:"px-3 py-1.5 rounded-full text-[11px] font-bold uppercase tracking-wider border transition-all "+(H?"bg-white/5 text-slate-200 border-white/10 hover:bg-white/10":"bg-[#10FF61] text-night-950 border-[#10FF61] hover:shadow-[0_0_18px_#10FF61]")},H?"Undo":z.cta)),React.createElement("button",{type:"button",onClick:()=>openInfoModal({title:z.title,subtitle:"Details",body:z.desc}),className:"mt-1 text-[12px] text-slate-400 underline underline-offset-4 hover:text-slate-200"},"Details")))})),React.createElement("div",{className:"mt-4 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:W,className:"text-[11px] text-slate-400 hover:text-slate-200 underline underline-offset-4"},"Reset checklist"),React.createElement("div",{className:"text-[9px] text-slate-500"},"Prototype-only. Completion is stored locally in your browser."))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},React.createElement("div",{className:"glass-panel p-6 rounded-2xl flex flex-col items-center"},React.createElement("div",{className:"text-3xl font-bold text-brand-green mb-1"},"94%"),React.createElement("div",{className:"text-xs font-bold text-slate-400 uppercase"},"Recovery")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl flex flex-col items-center"},React.createElement("div",{className:"text-3xl font-bold text-brand mb-1"},"14.2"),React.createElement("div",{className:"text-xs font-bold text-slate-400 uppercase"},"Strain")),React.createElement("div",{className:"glass-panel p-6 rounded-2xl flex flex-col items-center"},React.createElement("div",{className:"text-3xl font-bold text-brand-orange mb-1"},"2,450"),React.createElement("div",{className:"text-xs font-bold text-slate-400 uppercase"},"Calories"))),React.createElement("div",{className:"glass-panel p-4 rounded-2xl flex items-center justify-between border border-midnight-700"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"p-2 rounded-xl bg-emerald-500/10 text-emerald-400"},React.createElement(_,{name:"Watch",size:20})),React.createElement("div",null,React.createElement("div",{className:"font-semibold text-white"},"Wearables & Capacity Score"),React.createElement("div",{className:"text-[11px] text-slate-400"},"Powered by WearableConnectionFlow \u2022 steps, sleep, HRV"))),React.createElement("button",{type:"button",onClick:()=>S(!0),className:"px-3 py-1.5 rounded-xl bg-emerald-500/10 text-emerald-300 text-xs border border-emerald-500/40 hover:bg-emerald-500/20 hover:text-white transition-colors flex items-center gap-1"},React.createElement(_,{name:"Link2",size:14})," Manage")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-2 bg-gradient-to-br from-brand to-brand-dark p-6 rounded-2xl relative overflow-hidden group cursor-pointer shadow-neon transition-transform hover:scale-[1.01]"},React.createElement("div",{className:"relative z-10 text-white"},React.createElement("div",{className:"text-xs font-bold uppercase mb-1"},"Scheduled Today"),React.createElement("h3",{className:"text-3xl font-bold"},"Upper Power"),React.createElement("p",{className:"text-blue-100 text-sm mt-2"},"60 Min \u2022 8 Exercises")),React.createElement("div",{className:"absolute right-0 top-0 opacity-20 p-4 transform group-hover:scale-110 transition-transform"},React.createElement(_,{name:"Zap",size:120,color:"white"}))),React.createElement("div",{className:"glass-panel p-6 rounded-2xl text-white"},React.createElement("h3",{className:"font-bold mb-4"},"Quick Actions"),React.createElement("button",{className:"w-full py-3 bg-midnight-900 border border-midnight-700 rounded-xl mb-3 flex items-center justify-center gap-2 hover:border-brand transition-colors"},React.createElement(_,{name:"Utensils",size:16})," Log Meal"),React.createElement("button",{onClick:()=>i("AI_HUB"),className:"w-full py-3 bg-midnight-900 border border-midnight-700 rounded-xl flex items-center justify-center gap-2 hover:border-brand transition-colors"},React.createElement(_,{name:"Cpu",size:16})," AI Command"))))};function sl({label:i,value:s,tone:x="brand",onClick:S}){return React.createElement("button",{type:"button",onClick:u=>{try{u.preventDefault(),u.stopPropagation()}catch($){}S&&S(u)},className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[12px] shadow-sm transition "+(x==="good"?"border-emerald-400/40 bg-emerald-400/10 text-emerald-200":x==="warn"?"border-amber-400/40 bg-amber-400/10 text-amber-100":x==="bad"?"border-rose-400/40 bg-rose-400/10 text-rose-100":"border-sky-400/40 bg-sky-400/10 text-sky-100"),title:(i||"Score")+" details"},React.createElement("span",{className:"uppercase tracking-widest text-[9px] opacity-80"},i),React.createElement("span",{className:"font-semibold"},s))}var _l=({mobile:i=!1,open:s=!0,onClose:x=null,sidebarExpanded:S=!1,setSidebarExpanded:u=()=>{},view:$="",clientRecords:tt=[],onSelectClient:ue=()=>{},goView:Ie=()=>{},goBusinessHub:fe=()=>{},copyMagicLink:B=()=>{},openInfo:X=()=>{},logout:ne=null})=>{var W=i?s:S,[J,z]=React.useState(""),H=React.useRef(null),Ht=React.useRef(0);React.useLayoutEffect(()=>{var L=()=>{try{!i&&H.current&&(H.current.scrollTop=Ht.current||0)}catch(ba){}};L();var ut=requestAnimationFrame(()=>L()),ot=setTimeout(()=>L(),0),ht=setTimeout(()=>L(),60);return()=>{try{cancelAnimationFrame(ut)}catch(ba){}try{clearTimeout(ot)}catch(ba){}try{clearTimeout(ht)}catch(ba){}}},[$,i,W]);var Nt=L=>{var ut=String($||"");return L==="CLIENT_PREVIEW"?ut==="CLIENT_APP_PREVIEW":L==="REPORTS"?ut==="REPORTS"||ut.startsWith("REPORTS_")||ut.includes("REPORT"):L==="FINANCE_HUB"?ut==="FINANCE_HUB"||ut.startsWith("FINANCE_")||ut.includes("FINANCE"):L==="BUSINESS_HUB"?ut==="BUSINESS_HUB"||ut.startsWith("BUSINESS_")||ut.includes("BUSINESS"):L==="PLAN_HOME"?ut==="PLAN_HOME"||ut.startsWith("PLAN_")||ut.includes("PLAN"):L==="CLIENT_LIST"?ut==="CLIENT_LIST"||ut.startsWith("CLIENT_"):L==="ENGAGEMENT"?ut==="ENGAGEMENT"||ut==="ENGAGEMENT_HOME"||ut.startsWith("ENGAGEMENT_")||ut==="CHALLENGES"||ut==="REWARDS":ut===L},U=[{type:"section",label:"MAIN"},{id:"DASHBOARD_MODE",icon:"BarChart3",label:"Dashboard"},{id:"HUB",icon:"LayoutGrid",label:"Hub"},{id:"DAILY_HUB",icon:"Sun",label:"Triage Hub",badge:6},{id:"CLIENT_LIST",icon:"Users",label:"Clients"},{id:"PLAN_HOME",icon:"ClipboardList",label:"Plans"},{id:"CALENDAR",icon:"Calendar",label:"Calendar"},{id:"SESSION_RECON",icon:"Receipt",label:"Reconciliation"},{id:"INBOX",icon:"MessageSquare",label:"Messages",badge:3},{type:"section",label:"GROWTH / OPS"},{id:"CLIENT_TAGS",icon:"Tag",label:"Client Tags",color:"text-emerald-300"},{id:"APP_QUEUE",icon:"Inbox",label:"Applications"},{id:"MARKETPLACE",icon:"ShoppingBag",label:"Marketplace",color:"text-indigo-500"},{id:"ENGAGEMENT",icon:"Trophy",label:"Engagement OS",color:"text-amber-300"},{type:"section",label:"BUSINESS"},{id:"BUSINESS_HUB",icon:"TrendingUp",label:"Business Growth Hub"},{id:"FINANCE_HUB",icon:"CreditCard",label:"Business & Finance Hub"},{id:"REPORTS",icon:"BarChart3",label:"Reports",color:"text-sky-300"},{id:"REVIEWS",icon:"Star",label:"Review Management Dashboard"},{id:"AUTOMATION",icon:"Zap",label:"Marketing Automations",color:"text-orange-500"},{type:"section",label:"TOOLS"},{id:"AI_HUB",icon:"Sparkles",label:"AI Hub"},{id:"CONTENT_LIBRARY",icon:"Library",label:"Content Library",color:"text-sky-200"},{id:"NUTRITION_ENGINE",icon:"Utensils",label:"Nutrition Engine",color:"text-lime-300"},{id:"YOGA_WELLNESS_ENGINE",icon:"Lotus",label:"Yoga & Wellness",color:"text-fuchsia-300"},{id:"EXERCISE_LIBRARY",icon:"Dumbbell",label:"Exercise Library",color:"text-cyan-300"},{id:"MORE_TOOLS",icon:"Grid",label:"More Tools"},{id:"GHOST",icon:"Ghost",label:"Ghost Mode"},{id:"CLIENT_PREVIEW",icon:"Smartphone",label:"Client App View"},{type:"section",label:"UTILITIES"},{id:"MAGIC_LINK",icon:"Link",label:"Magic Link"},{id:"ADMIN_PORTAL",icon:"Shield",label:"Admin Portal"},{id:"HELP",icon:"HelpCircle",label:"Support"}],Q=React.useMemo(()=>{var L=String(J||"").trim().toLowerCase();if(!L)return[];var ut=[];return(tt||[]).filter(ot=>{var ht=String((ot==null?void 0:ot.name)||"").toLowerCase(),ba=String((ot==null?void 0:ot.email)||"").toLowerCase();return ht.includes(L)||ba.includes(L)}).slice(0,6).forEach(ot=>ut.push({kind:"client",id:ot.id,label:ot.name||"Client",sub:ot.status||ot.goal||"Client",client:ot})),(U||[]).filter(ot=>ot&&!ot.type&&ot.id&&ot.label).filter(ot=>String(ot.label).toLowerCase().includes(L)||String(ot.id).toLowerCase().includes(L)).slice(0,6).forEach(ot=>ut.push({kind:"nav",id:ot.id,label:ot.label,sub:"Module",nav:ot})),ut.slice(0,10)},[tt,J]),w=i?"fixed inset-y-0 left-0 z-[80] w-[82%] max-w-[320px] bg-titanium-950/95 border-r border-titanium-800 flex flex-col h-[100dvh] shrink-0 transform transition-transform duration-200 ease-out "+(s?"translate-x-0":"-translate-x-full"):"bg-titanium-950/70 border-r border-titanium-800 flex flex-col h-full shrink-0 transition-[width] duration-200 ease-out "+(W?"w-72":"w-20");return React.createElement("aside",{className:w},React.createElement("div",{className:(W?"px-5":"px-3")+" py-4 flex items-center gap-3 border-b border-titanium-800 h-16 shrink-0"},i&&React.createElement("button",{type:"button",onClick:()=>{try{x&&x()}catch(L){}},className:"mr-1 p-2 -ml-2 rounded-sm hover:bg-titanium-900 text-zinc-300",title:"Close menu"},React.createElement(_,{name:"X",size:18})),!i&&React.createElement("button",{type:"button",onClick:()=>u(L=>!L),className:"p-2 rounded-lg border border-titanium-800 hover:border-yellow-400 hover:bg-titanium-900 text-zinc-200 shrink-0 "+(W?"":"mx-auto"),title:W?"Collapse":"Expand"},React.createElement(_,{name:W?"ChevronLeft":"ChevronRight",size:18})),React.createElement("div",{className:"w-9 h-9 rounded-xl bg-yellow-400/90 flex items-center justify-center text-black font-extrabold font-mono text-lg shrink-0"},"P"),W&&React.createElement("div",{className:"min-w-0"},React.createElement("h1",{className:"text-white font-extrabold text-[12px] uppercase tracking-widest leading-none truncate"},"FlowOFIT ",React.createElement("span",{className:"text-gold-500"},"PRO")),React.createElement("p",{className:"text-[9px] text-zinc-500 font-mono uppercase truncate"},"Unified Performance Dashboard v6.1"))),React.createElement("div",{ref:H,onScroll:()=>{try{H.current&&(Ht.current=H.current.scrollTop||0)}catch(L){}},className:"flex-1 min-h-0 overflow-y-auto trainer-scroll"},React.createElement("div",{className:(W?"px-3":"px-2")+" py-2 space-y-1"},W&&React.createElement("div",{className:"pt-2 pb-3 space-y-2"},React.createElement("div",{className:"relative"},React.createElement("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"},React.createElement(_,{name:"Search",size:14})),React.createElement("input",{value:J,onChange:L=>z(L.target.value),placeholder:"Search clients or modules\u2026",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-white/5 text-[12px] text-white placeholder:text-white/35 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.25)]"})),Q.length>0&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/4 overflow-hidden"},Q.map(L=>{var ut;return React.createElement("button",{key:L.kind+"_"+L.id,type:"button",onMouseDown:ot=>{try{ot.preventDefault()}catch(ht){}},onClick:()=>{try{L.kind==="client"&&L.client?ue&&ue(L.client):L.kind==="nav"&&Ie&&Ie(L.id)}catch(ot){}try{z("")}catch(ot){}i&&x&&x()},className:"w-full flex items-center justify-between px-3 py-2 hover:bg-white/8 text-left"},React.createElement("div",{className:"flex items-center gap-2 min-w-0"},React.createElement("div",{className:"w-7 h-7 rounded-lg border border-white/10 bg-midnight-950/40 flex items-center justify-center shrink-0"},React.createElement(_,{name:L.kind==="nav"?((ut=L.nav)==null?void 0:ut.icon)||"LayoutGrid":"User",size:14,className:"text-white/70"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},L.label),React.createElement("div",{className:"text-[10px] text-white/45 truncate"},L.sub))),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/40"}))}))),U.map((L,ut)=>{if(L.type==="section")return React.createElement("div",{key:"sec_"+ut,className:W?"px-2 pt-3 pb-1":"px-2 pt-4 pb-1"},W?React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/35"},L.label):React.createElement("div",{className:"flex flex-col items-center gap-1"},React.createElement("div",{className:"h-px bg-titanium-800/80 w-full"}),React.createElement("div",{className:"text-[8px] font-mono uppercase tracking-widest text-white/30 text-center"},L.label)));if(L.type==="divider")return React.createElement("div",{key:"div_"+ut,className:"h-px bg-titanium-800 my-4 mx-2"});var ot=L.id==="CLIENT_PREVIEW",ht=Nt(L.id);return React.createElement("button",{key:L.id,type:"button",onMouseDown:ba=>{try{ba.preventDefault()}catch(et){}},onClick:()=>{try{Ht.current=H.current&&H.current.scrollTop?H.current.scrollTop:0}catch(ba){}if(L.id==="MAGIC_LINK"){Ie("MAGIC_LINKS"),i&&x&&x();return}if(L.id==="HELP"){Ie("HELP"),i&&x&&x();return}if(ot){Ie("CLIENT_APP_PREVIEW"),i&&x&&x();return}if(L.id==="AUTOMATION"){fe({section:"MA-ENTRY"}),i&&x&&x();return}if(L.id==="APP_QUEUE"){fe({section:"CRM-APPLICATIONS",filter:"APPLICATIONS"}),i&&x&&x();return}Ie(L.id),i&&x&&x()},title:W?void 0:L.label,className:"w-full flex items-center "+(W?"justify-between px-3 py-3":"justify-center p-3")+" rounded-xl transition-all group "+(ht?"bg-titanium-800 text-white border-l-2 border-yellow-400":"text-zinc-400 hover:text-white hover:bg-titanium-900")},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(_,{name:L.icon,size:18,className:L.color||(ht?"text-gold-500":"text-zinc-500 group-hover:text-zinc-300")}),W&&React.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},ci(L.label))),W&&L.badge&&React.createElement("span",{className:"text-[9px] px-1.5 py-0.5 rounded-sm font-bold "+(ht?"bg-yellow-400 text-black":"bg-titanium-800 text-zinc-400")},ci(L.badge)))}),React.createElement("div",{className:"mt-3 pt-3 border-t border-titanium-800 space-y-2"},React.createElement("button",{type:"button",onClick:()=>X("Settings","Sidebar settings / preferences \u2013 demo placeholder."),className:"w-full flex items-center "+(W?"justify-between px-3 py-2":"justify-center p-3")+" rounded-xl text-zinc-400 hover:text-white hover:bg-titanium-900",title:"Settings"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(_,{name:"Settings",size:18,className:"text-zinc-500"}),W&&React.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},"Settings")),W&&React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"})),React.createElement("button",{type:"button",onClick:()=>{try{ne&&ne()}catch(L){X("Logout","Logout handler not found.")}},className:"w-full flex items-center "+(W?"justify-between px-3 py-2":"justify-center p-3")+" rounded-xl text-zinc-400 hover:text-white hover:bg-titanium-900",title:"Logout"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(_,{name:"LogOut",size:18,className:"text-zinc-500"}),W&&React.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},"Logout")),W&&React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"})),React.createElement("div",{className:"h-3"})))))};(function(){try{if(!window.__FOF_TDEP||window.__FOF_TDEP.__PHASE_4_1)return;window.__FOF_TDEP.__PHASE_4_1=!0;var i=window.__FOF_TDEP.KEYS||(window.__FOF_TDEP.KEYS={});i.AI_SHARED_PARAMS=i.AI_SHARED_PARAMS||"fof.tdep.ai.shared_params.v1",i.AI_SHARED_PARAMS_HISTORY=i.AI_SHARED_PARAMS_HISTORY||"fof.tdep.ai.shared_params.history.v1";var s=(U,Q)=>{try{return typeof Ta=="function"?Ta(U,Q):Q}catch(w){return Q}},x=(U,Q)=>{try{return typeof ti=="function"?ti(U,Q):!1}catch(w){return!1}},S=()=>new Date().toISOString(),u=(U,Q="")=>typeof U=="string"?U:U==null?Q:String(U),$=(U,Q=null)=>{var w=Number(U);return Number.isFinite(w)?w:Q},tt=(U=[])=>Array.from(new Set((Array.isArray(U)?U:[]).map(Q=>String(Q||"").trim()).filter(Boolean))),ue=(U="")=>({schemaVersion:"1.0",clientId:String(U||""),goal:"",schedule:{sessionsPerWeek:4,preferredDays:["Mon","Tue","Thu","Sat"],timeOfDay:"Any"},equipment:[],constraints:{injuries:[],contraindications:[],notes:""},preferences:{style:"Balanced",intensity:"Auto",dislikes:[],languageTone:"Coach"},nutrition:{enabled:!1,diet:"Flexible",allergies:[],notes:""},yogaRecovery:{enabled:!1,emphasis:"Auto",notes:""},meta:{createdAt:S(),updatedAt:S(),updatedBy:"trainer_demo",version:"v1.0"}}),Ie=()=>{var U=s(i.AI_SHARED_PARAMS,{});return U&&typeof U=="object"?U:{}},fe=U=>x(i.AI_SHARED_PARAMS,U&&typeof U=="object"?U:{}),B=()=>{var U=s(i.AI_SHARED_PARAMS_HISTORY,{});return U&&typeof U=="object"?U:{}},X=U=>x(i.AI_SHARED_PARAMS_HISTORY,U&&typeof U=="object"?U:{}),ne=(U="v1.0")=>{var Q=String(U||"v1.0").match(/^v(\d+)\.(\d+)$/i);if(!Q)return"v1.0";var w=parseInt(Q[1],10),L=parseInt(Q[2],10);return`v${w}.${L+1}`},W=U=>{var ba,et;var Q=[],w=U&&typeof U=="object"?U:{},L=u(w.goal,"").trim(),ut=$((ba=w==null?void 0:w.schedule)==null?void 0:ba.sessionsPerWeek,null),ot=Array.isArray((et=w==null?void 0:w.schedule)==null?void 0:et.preferredDays)?w.schedule.preferredDays:[];return L||Q.push({field:"goal",level:"WARN",message:"Goal is missing. AI tools will default to 'general fitness'."}),(!Number.isFinite(ut)||ut<=0)&&Q.push({field:"schedule.sessionsPerWeek",level:"WARN",message:"Sessions/week missing or invalid. Default will be 4."}),ot.length||Q.push({field:"schedule.preferredDays",level:"WARN",message:"Preferred days not selected. Scheduling may be generic."}),(Array.isArray(w.equipment)?w.equipment:[]).length||Q.push({field:"equipment",level:"WARN",message:"Equipment not specified. AI may assume 'full gym' unless constrained elsewhere."}),Q},J=U=>{var Q=String(U||"").trim(),w=Ie(),L=w[Q];if(L&&typeof L=="object")return L;var ut=ue(Q);return w[Q]=ut,fe(w),ut},z=(U,Q,w={})=>{var ma,Je,Oa,He;var L=String(U||"").trim(),ut=Ie(),ot=ut[L]&&typeof ut[L]=="object"?ut[L]:ue(L),ht={...ot,...Q&&typeof Q=="object"?Q:{},clientId:L,equipment:tt(Q&&Q.equipment||ot.equipment||[]),constraints:{...ot.constraints||{},...(Q||{}).constraints&&typeof(Q||{}).constraints=="object"?(Q||{}).constraints:{}},preferences:{...ot.preferences||{},...(Q||{}).preferences&&typeof(Q||{}).preferences=="object"?(Q||{}).preferences:{}},schedule:{...ot.schedule||{},...(Q||{}).schedule&&typeof(Q||{}).schedule=="object"?(Q||{}).schedule:{}},meta:{...ot.meta||{},updatedAt:S(),updatedBy:u(w.updatedBy,u((ma=ot.meta)==null?void 0:ma.updatedBy,"trainer_demo")||"trainer_demo"),version:ne(u((Je=ot.meta)==null?void 0:Je.version,"v1.0"))}};ut[L]=ht,fe(ut);var ba=B(),et=Array.isArray(ba[L])?ba[L]:[],At={version:ht.meta.version,savedAt:ht.meta.updatedAt,savedBy:ht.meta.updatedBy,params:ht};ba[L]=[At,...et].slice(0,50),X(ba);try{(He=(Oa=window.__FOF_TDEP)==null?void 0:Oa.logEvent)==null||He.call(Oa,"ai.params.saved",{clientId:L,version:ht.meta.version,warnings:W(ht).length},{surface:"ai_hub",module:"shared_params"})}catch(Ca){}return ht},H=U=>{var Q=String(U||"").trim(),w=B();return Array.isArray(w[Q])?w[Q]:[]},Ht=(U,Q)=>{var ba,et,At;var w=String(U||"").trim(),ut=H(w).find(ma=>String((ma==null?void 0:ma.version)||"")===String(Q||""));if(!ut||!ut.params)return null;var ot=Ie(),ht={...ut.params||ue(w),meta:{...(ut.params||{}).meta||{},updatedAt:S(),updatedBy:"trainer_demo",version:ne(u((ba=(ut.params||{}).meta)==null?void 0:ba.version,"v1.0"))}};ot[w]=ht,fe(ot);try{(At=(et=window.__FOF_TDEP)==null?void 0:et.logEvent)==null||At.call(et,"ai.params.restored",{clientId:w,fromVersion:Q,toVersion:ht.meta.version},{surface:"ai_hub",module:"shared_params"})}catch(ma){}return ht},Nt=(U,Q="unknown_tool")=>{var At,ma,Je,Oa,He,Ca;var w=String(U||"").trim(),L=J(w),ut=W(L);var ot=null;try{var ha=window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||[];ot=(Array.isArray(ha)?ha:[]).find(K=>K&&String(K.id||"")===w)||null}catch(ha){}var ht=null;try{var ha=((At=window.__FOF_TDEP)==null?void 0:At.TRIAGE)||null,K=((ma=ha==null?void 0:ha.getQueue)==null?void 0:ma.call(ha,{includeSnoozed:!0,includeResolved:!1}))||((Je=ha==null?void 0:ha.getQueue)==null?void 0:Je.call(ha))||[],aa=(Array.isArray(K)?K:[]).find(Mt=>Mt&&String(Mt.clientId||"")===w);if(aa){var Mt=Array.isArray(aa.evidence)?aa.evidence:Array.isArray((Oa=aa.meta)==null?void 0:Oa.evidence)?aa.meta.evidence:[];ht={activeSignal:{title:aa.title||aa.reason||"",kind:aa.kind||aa.type||"",severity:Number.isFinite(Number(aa.severity))?Number(aa.severity):null,evidence:Mt},metrics:aa.meta&&typeof aa.meta=="object"?aa.meta:{}}}}catch(ha){}var ba=`run_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`,et={runId:ba,toolKey:String(Q||"unknown_tool"),sportContext:function(){try{var ha=__tdSafeStore.get("fof.tdep.sport_context.v1");return JSON.parse(ha||"{}")[String(U)]||null}catch(ha){return null}}(),clientId:w,capturedAt:S(),schemaVersion:L.schemaVersion||"1.0",params:JSON.parse(JSON.stringify(L)),warnings:ut,client:ot?JSON.parse(JSON.stringify(ot)):null,triage:ht};try{(Ca=(He=window.__FOF_TDEP)==null?void 0:He.logEvent)==null||Ca.call(He,"ai.params.snapshot",{runId:ba,toolKey:String(Q||"unknown_tool"),clientId:w,warnings:(ut||[]).length},{surface:"ai_engine",module:"shared_params"})}catch(ha){}return et};window.__FOF_TDEP.AI_PARAMS={DEFAULT:ue,validate:W,getSharedParams:J,setSharedParams:z,getHistory:H,restoreVersion:Ht,snapshotForExecution:Nt}}catch(i){try{console.warn("FOF-TDEP Phase 4.1 init failed",i)}catch(s){}}})(),function(){try{if(!window.__FOF_TDEP||window.__FOF_TDEP.__PHASE_4_2)return;window.__FOF_TDEP.__PHASE_4_2=!0;var i=window.__FOF_TDEP.KEYS||(window.__FOF_TDEP.KEYS={});i.AI_OUTPUTS=i.AI_OUTPUTS||"fof.tdep.ai.outputs.v1";var s=(z,H)=>{try{return typeof Ta=="function"?Ta(z,H):H}catch(Ht){return H}},x=(z,H)=>{try{return typeof ti=="function"?ti(z,H):!1}catch(Ht){return!1}},S=()=>new Date().toISOString(),u=(z,H,Ht)=>Math.max(H,Math.min(Ht,z)),$=(z="ao")=>`${z}_${Math.random().toString(16).slice(2)}_${Date.now()}`,tt=()=>{var z=s(i.AI_OUTPUTS,[]);return Array.isArray(z)?z:[]},ue=z=>x(i.AI_OUTPUTS,Array.isArray(z)?z:[]),Ie=z=>{var H=tt(),Ht=[z,...H].slice(0,500);return ue(Ht),z},fe=z=>tt().filter(H=>String(H.clientId||"")===String(z||"")),B=(z,H=null)=>{var Ht=fe(z);return(H?Ht.find(U=>String(U.toolKey||"")===String(H||"")):Ht[0])||null},X=(z,H={})=>{var Nt=tt().map(U=>String(U.id)===String(z)?{...U,...H,updatedAt:S()}:U);return ue(Nt),Nt.find(U=>String(U.id)===String(z))||null},ne=z=>Array.isArray(z)?z.map(H=>String(H)).filter(Boolean).slice(0,12):[],W=z=>{var ht,ba,et,At,ma,Je,Oa,He,Ca,ha,K,aa,Mt,la,xa,ei,di,Ua,sa,vt,Ge,$e,Xa,mi;var H=Number((Je=(ma=(et=(ht=z==null?void 0:z.client)==null?void 0:ht.capacityScoreNow)!=null?et:(ba=z==null?void 0:z.client)==null?void 0:ba.capacityScore)!=null?ma:(At=z==null?void 0:z.client)==null?void 0:At.readiness)!=null?Je:NaN),Ht=Number((Ca=(He=(Oa=z==null?void 0:z.triage)==null?void 0:Oa.activeSignal)==null?void 0:He.severity)!=null?Ca:NaN),Nt=Number((la=(Mt=(ha=z==null?void 0:z.client)==null?void 0:ha.painScore)!=null?Mt:(aa=(K=z==null?void 0:z.triage)==null?void 0:K.metrics)==null?void 0:aa.painScore)!=null?la:NaN),U=Number((sa=(Ua=(xa=z==null?void 0:z.client)==null?void 0:xa.restingHRDelta)!=null?Ua:(di=(ei=z==null?void 0:z.triage)==null?void 0:ei.metrics)==null?void 0:di.restingHRDelta)!=null?sa:NaN),Q=Number((mi=(Xa=(vt=z==null?void 0:z.client)==null?void 0:vt.missedSessions7d)!=null?Xa:($e=(Ge=z==null?void 0:z.triage)==null?void 0:Ge.metrics)==null?void 0:$e.missedSessions7d)!=null?mi:NaN);var w="MAINTAIN";Number.isFinite(H)&&H<45||Number.isFinite(Nt)&&Nt>=6||Number.isFinite(U)&&U>=8||Number.isFinite(Ht)&&Ht>=80?w="DELOAD":Number.isFinite(H)&&H>=70&&(!Number.isFinite(Ht)||Ht<=40)&&(!Number.isFinite(Nt)||Nt<=2)&&(!Number.isFinite(Q)||Q<=1)&&(w="PUSH");var L=w==="DELOAD"?{intensityModifier:.8,sessionsDelta:-1,durationDays:7}:w==="PUSH"?{intensityModifier:1.1,sessionsDelta:0,durationDays:10}:{intensityModifier:1,sessionsDelta:0,durationDays:7},ut=[];return Number.isFinite(H)&&ut.push(`Capacity Score: ${Math.round(H)}`),Number.isFinite(Ht)&&ut.push(`Triage severity: ${Math.round(Ht)}/100`),Number.isFinite(Q)&&ut.push(`Missed sessions (7d): ${Q}`),Number.isFinite(U)&&ut.push(`Resting HR delta: +${U}`),Number.isFinite(Nt)&&ut.push(`Pain score: ${Nt}/10`),{preset:w,modifiers:L,bullets:ut,explanation:w==="DELOAD"?"AI suggests a short deload to protect recovery and adherence, then reassess.":w==="PUSH"?"AI suggests a controlled progression (small intensity bump) while maintaining technique.":"AI suggests maintaining current intensity and prioritizing consistency."}},J=(z,H,Ht={})=>{var L,ut,ot,ht,ba,et,At,ma,Je,Oa,He,Ca,ha,K,aa,Mt,la,xa,ei,di,Ua,sa,vt,Ge,$e,Xa,mi,xi,rs,ct,zt,Wi,Wa,Hs,ks,so,uo,an,Qi,ui,vi,hi,ls,Bi,Pa,Ga,ca;var Nt=(L=window.__FOF_TDEP)==null?void 0:L.AI_PARAMS;if(!Nt||!H)return null;var U=Nt.snapshotForExecution(String(H),String(z||"UNKNOWN")),Q=ne(((ot=(ut=U==null?void 0:U.triage)==null?void 0:ut.activeSignal)==null?void 0:ot.evidence)||((ht=U==null?void 0:U.triage)==null?void 0:ht.evidence)||[]);var w=null;if(String(z).toUpperCase().includes("PLAN_ADJUST")){var La=W(U);w={id:$("ao"),toolKey:"PLAN_ADJUST",clientId:String(H),createdAt:S(),updatedAt:S(),status:"DRAFT",title:`Adjust Plan Intensity \u2014 ${La.preset}`,summary:La.explanation,explanation:La.explanation,evidence:Q,preset:La.preset,modifiers:La.modifiers,bullets:La.bullets,inputs:{toolKey:U.toolKey,runId:U.runId,schemaVersion:U.schemaVersion,warnings:U.warnings||[]}}}else if(String(z).toUpperCase().includes("SUMMARY"))w={id:$("ao"),toolKey:"WEEK_SUMMARY",clientId:String(H),createdAt:S(),updatedAt:S(),status:"DRAFT",title:"Weekly Summary (Coach-ready)",summary:"Auto-summary generated from shared params + recent signals (demo).",explanation:"This summary is derived from Shared Params + Triage evidence for quick coach messaging.",evidence:Q,bullets:[`Goal: ${((et=(ba=U==null?void 0:U.params)==null?void 0:ba.goal)==null?void 0:et.primary)||"\u2014"}`,`Sessions/week: ${((ma=(At=U==null?void 0:U.params)==null?void 0:At.schedule)==null?void 0:ma.sessionsPerWeek)||"\u2014"}`,`Intensity modifier: ${((Oa=(Je=U==null?void 0:U.params)==null?void 0:Je.training)==null?void 0:Oa.intensityModifier)||1}`],inputs:{toolKey:U.toolKey,runId:U.runId,schemaVersion:U.schemaVersion,warnings:U.warnings||[]}};else if(String(z).toUpperCase().includes("MEAL")||String(z).toUpperCase().includes("NUTRITION")){var La=String(((Ca=(He=U==null?void 0:U.params)==null?void 0:He.goal)==null?void 0:Ca.primary)||((ha=U==null?void 0:U.params)==null?void 0:ha.goal)||"General health"),fi=String(((aa=(K=U==null?void 0:U.params)==null?void 0:K.nutrition)==null?void 0:aa.dietType)||((la=(Mt=U==null?void 0:U.params)==null?void 0:Mt.nutrition)==null?void 0:la.diet)||"Balanced"),ms=Number(((ei=(xa=U==null?void 0:U.params)==null?void 0:xa.nutrition)==null?void 0:ei.caloriesTarget)||((Ua=(di=U==null?void 0:U.params)==null?void 0:di.nutrition)==null?void 0:Ua.calories)||NaN),ss=Math.max(2,Math.min(6,Number(((vt=(sa=U==null?void 0:U.params)==null?void 0:sa.nutrition)==null?void 0:vt.mealsPerDay)||3))),ds=Array.isArray(($e=(Ge=U==null?void 0:U.params)==null?void 0:Ge.nutrition)==null?void 0:$e.allergies)?U.params.nutrition.allergies.map(String):[],Xs=Array.isArray((mi=(Xa=U==null?void 0:U.params)==null?void 0:Xa.nutrition)==null?void 0:mi.dislikes)?U.params.nutrition.dislikes.map(String):[],Wo=Array.isArray((rs=(xi=U==null?void 0:U.params)==null?void 0:xi.nutrition)==null?void 0:rs.medical)?U.params.nutrition.medical.map(String):(zt=(ct=U==null?void 0:U.params)==null?void 0:ct.nutrition)!=null&&zt.medical?[String(U.params.nutrition.medical)]:[],Po=String(((Wa=(Wi=U==null?void 0:U.params)==null?void 0:Wi.constraints)==null?void 0:Wa.notes)||"").trim(),Eo=Number.isFinite(ms)?Math.round(ms):String(La).toLowerCase().includes("loss")||String(La).toLowerCase().includes("cut")?1900:String(La).toLowerCase().includes("gain")||String(La).toLowerCase().includes("bulk")?2600:2200,Oi={calories:Eo,protein_g:Math.round(Eo*.3/4),carbs_g:Math.round(Eo*.4/4),fats_g:Math.round(Eo*.3/9)},jo=[];ds.length&&jo.push(`Allergies declared: ${ds.join(", ")}`),Wo.length&&jo.push(`Medical/contra notes: ${Wo.join(", ")}`),String(fi).toLowerCase().includes("keto")&&(String(La).toLowerCase().includes("endurance")||String(La).toLowerCase().includes("marathon"))&&jo.push("Diet/goal mismatch: Keto + endurance goal may require coach review."),Po&&/pregnan|diabet|kidney|celiac|allerg/i.test(Po)&&jo.push("Constraint notes include health keywords \u2014 coach review required.");var to=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Rn=[{name:"Breakfast",items:["Greek yogurt + berries","Oats + chia + banana","Egg scramble + toast"]},{name:"Lunch",items:["Chicken salad bowl","Tuna wrap + greens","Lentil soup + side salad"]},{name:"Dinner",items:["Salmon + rice + veg","Turkey chili + quinoa","Tofu stir-fry + noodles"]},{name:"Snack",items:["Apple + peanut butter","Protein shake","Hummus + carrots"]}],Io=(Li,po)=>Li[Math.abs(po)%Li.length],bs=Li=>{var po=[];for(var Tn=0;Tn<ss;Tn++){var cr=Io(Rn,Li+Tn),_r=Io(cr.items,Li+Tn+1);po.push({slot:cr.name,meal:_r})}return{day:to[Li],meals:po}},Ao=to.map((Li,po)=>bs(po)),sn=Array.from(new Set(["Greek yogurt","Oats","Chia seeds","Eggs","Chicken breast","Tuna","Lentils","Salmon","Turkey mince","Tofu","Rice","Quinoa","Mixed vegetables","Leafy greens","Berries","Bananas","Apples","Peanut butter","Hummus","Carrots","Olive oil","Spices"])).slice(0,36);w={id:$("ao"),toolKey:"MEAL_PLAN",clientId:String(H),createdAt:S(),updatedAt:S(),status:jo.length?"NEEDS_ACK":"DRAFT",title:`Meal Plan \u2014 ${fi}`,summary:`7-day ${fi} plan \u2022 ~${Oi.calories} kcal/day \u2022 ${ss} meals/day`,explanation:"Generated from Shared Params nutrition constraints, goal, and triage evidence (demo).",evidence:Q,bullets:[`Goal: ${La}`,`Diet type: ${fi}`,`Calories target: ~${Oi.calories} kcal/day`,`Macros (P/C/F): ${Oi.protein_g}g / ${Oi.carbs_g}g / ${Oi.fats_g}g`,ds.length?`Avoid: ${ds.join(", ")}`:"No allergies declared",Xs.length?`Dislikes: ${Xs.join(", ")}`:"No dislikes declared"].filter(Boolean),mealPlan:{dietType:fi,goal:La,mealsPerDay:ss,macro:Oi,week:Ao,grocery:sn,prepNotes:["Batch cook protein (2\xD7/week) and roast veg (1\xD7/week).","Keep snacks pre-portioned to support adherence.","Hydration + electrolytes if training volume is high."]},safety:{warnings:jo,acknowledgedAt:null},inputs:{toolKey:U.toolKey,runId:U.runId,schemaVersion:U.schemaVersion,warnings:U.warnings||[]}}}else if(String(z).toUpperCase().includes("WORKOUT")||String(z).toUpperCase().includes("PROGRAM")){var La=String(((ks=(Hs=U==null?void 0:U.params)==null?void 0:Hs.goal)==null?void 0:ks.primary)||((so=U==null?void 0:U.params)==null?void 0:so.goal)||"General fitness"),fi=Number(((an=(uo=U==null?void 0:U.params)==null?void 0:uo.schedule)==null?void 0:an.sessionsPerWeek)||4),ms=Array.isArray((ui=(Qi=U==null?void 0:U.params)==null?void 0:Qi.schedule)==null?void 0:ui.preferredDays)?U.params.schedule.preferredDays:[],ss=String(((hi=(vi=U==null?void 0:U.params)==null?void 0:vi.preferences)==null?void 0:hi.style)||"Balanced"),ds=String(((Bi=(ls=U==null?void 0:U.params)==null?void 0:ls.preferences)==null?void 0:Bi.intensity)||"Mid"),Xs=Array.isArray((Pa=U==null?void 0:U.params)==null?void 0:Pa.equipment)?U.params.equipment.slice(0,8):[],Wo=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Eo=(()=>{var Io=ms&&ms.length?ms.filter(bs=>Wo.includes(bs)):[];return Io.length?Io.slice(0,Math.max(1,Math.min(7,fi))):Wo.slice(0,Math.max(1,Math.min(7,fi)))})(),Oi=Io=>{var bs=ss==="Strength"?"Strength":ss==="Hypertrophy"?"Hypertrophy":ss==="Endurance"?"Conditioning":ss==="Mobility"?"Mobility":"Balanced",Ao=["Full Body","Lower Body + Core","Upper Body","Posterior Chain","Conditioning + Core","Mobility + Prehab","Technique + Tempo"][Io%7];return{title:`${bs} \u2014 ${Ao}`,type:"Workout",dur:45,intensity:ds==="High"?"High":ds==="Low"?"Low":"Moderate",notes:Xs.length?`Equipment: ${Xs.join(", ")}`:"Bodyweight or available gym equipment."}},jo=Io=>{var bs={weekIndex:Io+1};return Wo.forEach(Ao=>{bs[Ao]=[]}),Eo.forEach((Ao,sn)=>{bs[Ao]=[Oi(sn+Io*fi)]}),bs},to=[0,1,2,3].map(jo),Rn={name:`${La} \u2014 4-Week Program`,meta:{goal:La,style:ss,sessionsPerWeek:fi,intensity:ds,equipment:Xs,createdFrom:"AI_HUB_SHARED_PARAMS"},weeks:to,durationWeeks:to.length};w={id:$("ao"),toolKey:"WORKOUT_PROGRAM",clientId:String(H),createdAt:S(),updatedAt:S(),status:"DRAFT",title:"Workout Program Draft (4 weeks)",summary:`Draft program generated for ${La} (${fi} sessions/week, ${ss}, intensity ${ds}).`,explanation:"This program draft is produced from Shared Params (goal, schedule, equipment, constraints) and is meant to be coach-edited before assignment.",evidence:Q,bullets:[`Goal: ${La}`,`Style: ${ss}`,`Sessions/week: ${fi}`,`Intensity: ${ds}`,`Preferred days: ${Eo&&Eo.length?Eo.join(", "):"\u2014"}`,`Equipment: ${Xs&&Xs.length?Xs.join(", "):"Bodyweight / any"}`],program:Rn,inputs:{toolKey:U.toolKey,runId:U.runId,schemaVersion:U.schemaVersion,warnings:U.warnings||[]}}}else w={id:$("ao"),toolKey:String(z||"AI_TOOL"),clientId:String(H),createdAt:S(),updatedAt:S(),status:"DRAFT",title:"AI Draft Output",summary:"Draft output generated from shared params (demo).",explanation:"Consumer tool ran with Shared Params snapshot. Phase 4.3 will formalize registry UX.",evidence:Q,bullets:[],inputs:{toolKey:U.toolKey,runId:U.runId,schemaVersion:U.schemaVersion,warnings:U.warnings||[]}};Ie(w);try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(La){}try{(ca=(Ga=window.__FOF_TDEP)==null?void 0:Ga.logEvent)==null||ca.call(Ga,"ai.output.created",{id:w.id,toolKey:w.toolKey,clientId:w.clientId,status:w.status},{surface:"ai_engine",module:"output_registry"})}catch(La){}return w};window.__FOF_TDEP.AI_OUTPUTS={getAll:tt,byClient:fe,latestForClient:B,add:Ie,markUsed:X},window.__FOF_TDEP.AI_TOOLS={runTool:J}}catch(i){try{console.warn("FOF-TDEP Phase 4.2 init failed",i)}catch(s){}}}(),function(){try{if(!window.__FOF_TDEP||window.__FOF_TDEP.__PHASE_4_3)return;window.__FOF_TDEP.__PHASE_4_3=!0;var i=window.__FOF_TDEP.AI_OUTPUTS,s=window.__FOF_TDEP.AI_TOOLS;if(!i||!s)return;var x=window.__FOF_TDEP.KEYS||(window.__FOF_TDEP.KEYS={});x.AI_OUTPUT_TEMPLATES=x.AI_OUTPUT_TEMPLATES||"fof.tdep.ai.output_templates.v1";var S=()=>new Date().toISOString(),u=(w="ao")=>`${w}_${Math.random().toString(16).slice(2)}_${Date.now()}`,$=(w,L)=>{try{return typeof Ta=="function"?Ta(w,L):L}catch(ut){return L}},tt=(w,L)=>{try{return typeof ti=="function"?ti(w,L):!1}catch(ut){return!1}},ue=w=>{var L=w&&typeof w=="object"?w:{},ut=L.rootId||L.id||u("root"),ot=Number(L.version||1),ht=L.parentId||null;return{...L,rootId:ut,version:ot,parentId:ht}},Ie=()=>{var w=i.getAll?i.getAll():[];return(Array.isArray(w)?w:[]).map(ue)},fe=w=>{try{var L=window.__FOF_TDEP.KEYS&&window.__FOF_TDEP.KEYS.AI_OUTPUTS?window.__FOF_TDEP.KEYS.AI_OUTPUTS:"fof.tdep.ai.outputs.v1";return tt(L,Array.isArray(w)?w:[])}catch(L){return!1}},B=w=>Ie().filter(L=>String(L.clientId||"")===String(w||"")),X=w=>Ie().filter(L=>String(L.rootId||"")===String(w||"")),ne=w=>X(w).sort((ut,ot)=>Number(ot.version||1)-Number(ut.version||1))[0]||null,W=(w,L={})=>{var ba,et;var ot=Ie().map(At=>String(At.id)===String(w)?{...At,...L,updatedAt:S()}:At);fe(ot);var ht=ot.find(At=>String(At.id)===String(w))||null;try{(et=(ba=window.__FOF_TDEP)==null?void 0:ba.logEvent)==null||et.call(ba,"ai.output.updated",{id:String(w),toolKey:ht==null?void 0:ht.toolKey,clientId:ht==null?void 0:ht.clientId},{surface:"ai_engine",module:"output_registry"})}catch(At){}return ht},J=w=>{var ht,ba;var L=Ie(),ut=L.find(et=>String(et.id)===String(w))||null,ot=L.filter(et=>String(et.id)!==String(w));fe(ot);try{(ba=(ht=window.__FOF_TDEP)==null?void 0:ht.logEvent)==null||ba.call(ht,"ai.output.deleted",{id:String(w),toolKey:ut==null?void 0:ut.toolKey,clientId:ut==null?void 0:ut.clientId},{surface:"ai_engine",module:"output_registry"})}catch(et){}return!0},z=(w,L={})=>{var Je,Oa;var ut=Ie(),ot=ut.find(He=>String(He.id)===String(w));if(!ot)return null;var ht=ot.rootId||ot.id,ba=ne(ht)||ot,et=Number(ba.version||1)+1,At=ue({...ba,...L,id:u("ao"),rootId:ht,parentId:ba.id,version:et,status:"DRAFT",createdAt:S(),updatedAt:S()}),ma=[At,...ut].slice(0,500);fe(ma);try{(Oa=(Je=window.__FOF_TDEP)==null?void 0:Je.logEvent)==null||Oa.call(Je,"ai.output.regenerated",{fromId:String(w),id:At.id,rootId:At.rootId,version:At.version,toolKey:At.toolKey,clientId:At.clientId},{surface:"ai_engine",module:"output_registry"})}catch(He){}return At},H=()=>{var w=$(x.AI_OUTPUT_TEMPLATES,[]);return Array.isArray(w)?w:[]},Ht=(w,L={})=>{var ba,et;if(!w)return null;var ut=H(),ot={id:u("tpl"),createdAt:S(),title:w.title||"AI Template",toolKey:w.toolKey||"AI_TOOL",payload:{summary:w.summary,explanation:w.explanation,bullets:Array.isArray(w.bullets)?w.bullets:[],program:w.program||null,mealPlan:w.mealPlan||null,safety:w.safety||null,preset:w.preset||null,modifiers:w.modifiers||null},...L},ht=[ot,...ut].slice(0,200);tt(x.AI_OUTPUT_TEMPLATES,ht);try{(et=(ba=window.__FOF_TDEP)==null?void 0:ba.logEvent)==null||et.call(ba,"ai.output.template_saved",{templateId:ot.id,toolKey:ot.toolKey},{surface:"ai_engine",module:"output_registry"})}catch(At){}return ot},Nt=(w,L=null)=>{var Ca,ha;if(!w)return!1;var ut="fof_inbox_v1";if(typeof localStorage=="undefined")return!1;var ot=String(w.clientId||(L==null?void 0:L.id)||"");if(!ot)return!1;var ht=(K,aa)=>{try{return JSON.parse(K)}catch(Mt){return aa}},ba=localStorage.getItem(ut);var et=ht(ba||"null",null);(!et||!et.threads||!et.messages)&&(et={threads:[],messages:{}});var At="t_client_"+ot;var ma=(et.threads||[]).find(K=>K.id===At);if(!ma){var K=(L==null?void 0:L.name)||"Client";ma={id:At,type:"CLIENT",clientId:ot,title:K,participants:["You",K],lastAt:Date.now(),unread:0},et.threads=[ma,...et.threads||[]],et.messages={...et.messages||{},[At]:[]}}var Je=w.toolKey==="WEEK_SUMMARY"?`Weekly check-in summary:

\u2022 ${(Array.isArray(w.bullets)?w.bullets:[]).join(`
\u2022 `)}`:w.toolKey==="PLAN_ADJUST"?`Plan adjustment suggestion (${String(w.preset||"MAINTAIN")}):
${String(w.summary||"")}`:w.toolKey==="MEAL_PLAN"?(()=>{var K=w.mealPlan||{},aa=K.macro||{},Mt=Array.isArray(K.week)?K.week:[],la=Array.isArray(K.grocery)?K.grocery:[],xa=Mt[0]||null,ei=xa?`${xa.day}: `+(Array.isArray(xa.meals)?xa.meals.map(di=>`${di.slot}\u2014${di.meal}`).join(" | "):""):"";return`Meal plan (${String(K.dietType||"Balanced")})
Calories: ~${aa.calories||"\u2014"} kcal/day
Macros (P/C/F): ${aa.protein_g||"\u2014"}g / ${aa.carbs_g||"\u2014"}g / ${aa.fats_g||"\u2014"}g

Example day:
${ei}

Grocery list:
\u2022 ${la.slice(0,18).join(`
\u2022 `)}`})():String(w.summary||w.explanation||w.title||"AI update"),Oa={id:"m_"+Date.now()+"_"+Math.random().toString(16).slice(2),from:"You",ts:Date.now(),body:Je,meta:{aiOutputId:w.id,toolKey:w.toolKey}},He=Array.isArray(et.messages[At])?et.messages[At]:[];et.messages[At]=[...He,Oa].slice(-500),et.threads=(et.threads||[]).map(K=>K.id===At?{...K,lastAt:Date.now()}:K),localStorage.setItem(ut,JSON.stringify(et));try{window.__FOF_TDEP.__pendingOpenThreadId=At,window.__FOF_TDEP.__pendingOpenThreadAt=S()}catch(K){}try{(ha=(Ca=window.__FOF_TDEP)==null?void 0:Ca.logEvent)==null||ha.call(Ca,"ai.output.sent_to_client",{id:w.id,toolKey:w.toolKey,clientId:ot,threadId:At},{surface:"ai_engine",module:"output_registry"})}catch(K){}return!0},U=(w,L=null)=>{var et,At,ma,Je,Oa,He;if(!w)return!1;var ut=String(w.clientId||(L==null?void 0:L.id)||"");if(!ut)return!1;if(String(w.toolKey||"")==="MEAL_PLAN"){var Ca="fof_td_nutrition_assign_v1",ha={id:"nut_asg_"+Date.now()+"_"+Math.random().toString(16).slice(2),clientId:ut,clientName:(L==null?void 0:L.name)||"Client",planName:w.title||"Meal Plan",mealPlan:w.mealPlan||null,schedule:{startDate:String(S()).slice(0,10),frequency:"WEEKLY"},createdAt:S(),source:"AI_OUTPUT",meta:{aiOutputId:w.id,toolKey:w.toolKey,rootId:w.rootId,version:w.version}};try{var K=localStorage.getItem(Ca),aa=K?JSON.parse(K):[],Mt=Array.isArray(aa)?aa:[];Mt.unshift(ha),localStorage.setItem(Ca,JSON.stringify(Mt.slice(0,80)))}catch(K){}try{var K=(et=window.__FOF_TDEP)==null?void 0:et.NUTRITION;K&&K.scheduleCheckin&&K.scheduleCheckin(ut,7,{reason:"MEAL_PLAN_ASSIGNED",aiOutputId:w.id})}catch(K){}try{window.dispatchEvent(new Event("fof_nutrition_assigned"))}catch(K){}try{(ma=(At=window.__FOF_TDEP)==null?void 0:At.logEvent)==null||ma.call(At,"ai.output.assigned",{id:w.id,toolKey:w.toolKey,clientId:ut,assignmentId:ha.id},{surface:"ai_engine",module:"output_registry"})}catch(K){}return!0}var ot="fof_td_planassign_v1",ht=w.toolKey==="WORKOUT_PROGRAM"?((Je=w.program)==null?void 0:Je.name)||"AI Program":w.title||"AI Plan",ba={id:"asg_"+Date.now()+"_"+Math.random().toString(16).slice(2),clientId:ut,clientName:(L==null?void 0:L.name)||"Client",planName:ht,week:null,program:w.program||null,schedule:{startDate:String(S()).slice(0,10),defaultTime:"Any",frequency:"WEEKLY"},nudges:{enabled:!1,items:[]},createdAt:S(),source:"AI_OUTPUT",meta:{aiOutputId:w.id,toolKey:w.toolKey,rootId:w.rootId,version:w.version}};try{var Ca=localStorage.getItem(ot),ha=Ca?JSON.parse(Ca):[],K=Array.isArray(ha)?ha:[];K.unshift(ba),localStorage.setItem(ot,JSON.stringify(K.slice(0,50)))}catch(Ca){}try{window.dispatchEvent(new Event("fof_plan_assigned"))}catch(Ca){}try{(He=(Oa=window.__FOF_TDEP)==null?void 0:Oa.logEvent)==null||He.call(Oa,"ai.output.assigned",{id:w.id,toolKey:w.toolKey,clientId:ut,assignmentId:ba.id},{surface:"ai_engine",module:"output_registry"})}catch(Ca){}return!0},Q=s.runTool;s.runTool=(w,L,ut={})=>{var ot=Q?Q(w,L,ut):null;if(!ot)return null;var ht=Ie(),ba=ht.find(At=>String(At.id)===String(ot.id)),et=ue({...ba||ot});if(!ba||!ba.rootId||!ba.version){var At=ht.map(ma=>String(ma.id)===String(et.id)?et:ma);fe(At)}try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(At){}return et},window.__FOF_TDEP.AI_OUTPUTS={...window.__FOF_TDEP.AI_OUTPUTS||{},getAll:Ie,byClient:B,byRoot:X,latestForRoot:ne,update:W,remove:J,regenerate:z,getTemplates:H,saveTemplate:Ht,sendToClient:Nt,assignToClient:U}}catch(i){try{console.warn("FOF-TDEP Phase 4.3 init failed",i)}catch(s){}}}(),function(){try{if(!window.__FOF_TDEP||window.__FOF_TDEP.__PHASE_5_0)return;window.__FOF_TDEP.__PHASE_5_0=!0;var i=window.__FOF_TDEP.KEYS||(window.__FOF_TDEP.KEYS={});i.NUTRITION_CHECKINS=i.NUTRITION_CHECKINS||"fof.tdep.nutrition_checkins.v1";var s=(ne,W)=>{try{return typeof Ta=="function"?Ta(ne,W):W}catch(J){return W}},x=(ne,W)=>{try{return typeof ti=="function"?ti(ne,W):!1}catch(J){return!1}},S=()=>new Date().toISOString(),u=(ne="nut")=>`${ne}_${Math.random().toString(16).slice(2)}_${Date.now()}`,$=(ne,W,J)=>Math.max(W,Math.min(J,ne)),tt=()=>{var ne=s(i.NUTRITION_CHECKINS,[]);return Array.isArray(ne)?ne:[]},ue=ne=>x(i.NUTRITION_CHECKINS,Array.isArray(ne)?ne:[]),Ie=(ne,W=7,J={})=>{var Q,w;var z=String(ne||"");if(!z)return null;var H=new Date(Date.now()+$(Number(W)||7,1,60)*864e5).toISOString(),Ht={id:u("chk"),clientId:z,type:"NUTRITION",dueAt:H,status:"SCHEDULED",createdAt:S(),updatedAt:S(),meta:J||{}},Nt=tt(),U=[Ht,...Nt].slice(0,500);ue(U);try{(w=(Q=window.__FOF_TDEP)==null?void 0:Q.logEvent)==null||w.call(Q,"nutrition.checkin.scheduled",{clientId:z,checkinId:Ht.id,dueAt:H},{surface:"ai_engine",module:"nutrition"})}catch(L){}try{window.dispatchEvent(new Event("fof_nutrition_checkin_changed"))}catch(L){}return Ht},fe=(ne,W={})=>{var Nt,U;var J=String(ne||"");if(!J)return null;var z=tt();var H=null;var Ht=z.map(Q=>String(Q.id)!==J?Q:(H={...Q,status:"COMPLETED",completedAt:S(),updatedAt:S(),payload:W||{}},H));ue(Ht);try{window.dispatchEvent(new Event("fof_nutrition_checkin_changed"))}catch(Q){}try{(U=(Nt=window.__FOF_TDEP)==null?void 0:Nt.logEvent)==null||U.call(Nt,"nutrition.checkin.completed",{checkinId:J},{surface:"ai_engine",module:"nutrition"})}catch(Q){}return H},B=(ne,W,J,z=[])=>{var ot,ht,ba;var H=(ot=window.__FOF_TDEP)==null?void 0:ot.TRIAGE;if(!H||!H.getTriageState||!H.setTriageState)return null;var Ht=H.getTriageState(),Nt=Ht&&Ht.signalsById&&typeof Ht.signalsById=="object"?Ht.signalsById:{},U=Array.isArray(Ht==null?void 0:Ht.order)?Ht.order:[],Q=`sig_nut_${String(ne)}_${String(W||"").toLowerCase().replace(/\s+/g,"_").slice(0,24)}`;if(Nt[Q])return Nt[Q];var L=(et=>{var At;try{return(At=window.__FOF_TDEP)!=null&&At.normalizeTriageSignal?window.__FOF_TDEP.normalizeTriageSignal(et):et}catch(ma){return et}})({id:Q,clientId:String(ne||""),category:"COMPLIANCE",severity:68,title:W||"Nutrition check-in due",summary:J||"Nutrition follow-up is due. Confirm adherence, appetite, and constraints.",evidence:Array.isArray(z)?z.slice(0,8):[],status:"OPEN",createdAt:S(),updatedAt:S(),recommendedActions:[{id:"open_checkin",label:"Open Nutrition Check-in",verb:"OPEN_CHECKIN",payload:{clientId:String(ne||"")}},{id:"send_msg",label:"Message client",verb:"OPEN_MESSAGES",payload:{clientId:String(ne||"")}}],meta:{source:"PHASE_5_NUTRITION",kind:"NUTRITION_CHECKIN_DUE"}}),ut={...Ht,signalsById:{...Nt,[Q]:L},order:[Q,...U.filter(et=>String(et)!==Q)].slice(0,500)};try{H.setTriageState(ut)}catch(et){}try{(ba=(ht=window.__FOF_TDEP)==null?void 0:ht.logEvent)==null||ba.call(ht,"nutrition.signal.injected",{signalId:Q,clientId:String(ne||"")},{surface:"triage",module:"engine"})}catch(et){}try{window.dispatchEvent(new Event("fof_triage_changed"))}catch(et){}return L},X=()=>{var ne=tt(),W=Date.now();ne.filter(z=>z&&z.status==="SCHEDULED"&&z.dueAt&&new Date(z.dueAt).getTime()<=W).slice(0,12).forEach(z=>{B(z.clientId,"Nutrition check-in due","Nutrition follow-up is due. Review adherence, appetite, and constraints; adjust plan if needed.",[`Check-in due: ${String(z.dueAt).slice(0,10)}`])})};window.__FOF_TDEP.NUTRITION={getCheckins:tt,scheduleCheckin:Ie,completeCheckin:fe,runDueCheckins:X};try{X()}catch(ne){}try{window.addEventListener("focus",()=>{try{X()}catch(ne){}}),window.addEventListener("fof_nutrition_checkin_changed",()=>{try{X()}catch(ne){}})}catch(ne){}}catch(i){try{console.warn("FOF-TDEP Phase 5.0 init failed",i)}catch(s){}}}();var kl=({clientId:i,clientObj:s,onApplyToParams:x,onOpenVersions:S})=>{var ba,et,At,ma;var u=typeof window!="undefined"?(ba=window.__FOF_TDEP)==null?void 0:ba.AI_OUTPUTS:null,[$,tt]=React.useState(0);React.useEffect(()=>{var Je=Oa=>{try{tt(He=>He+1)}catch(He){}};try{window.addEventListener("fof:tdstore",Je)}catch(Oa){}return()=>{try{window.removeEventListener("fof:tdstore",Je)}catch(Oa){}}},[]);var[ue,Ie]=React.useState(null),[fe,B]=React.useState(!1),[X,ne]=React.useState({title:"",summary:"",explanation:"",bulletsRaw:""}),[W,J]=React.useState(null);React.useEffect(()=>{if(!W)return;var Je=setTimeout(()=>J(null),1600);return()=>clearTimeout(Je)},[W]),React.useEffect(()=>{var Je=()=>tt(Oa=>Oa+1);try{window.addEventListener("storage",Je)}catch(Oa){}try{window.addEventListener("fof_ai_output_changed",Je)}catch(Oa){}return()=>{try{window.removeEventListener("storage",Je)}catch(Oa){}try{window.removeEventListener("fof_ai_output_changed",Je)}catch(Oa){}}},[]),React.useEffect(()=>{var Je=setInterval(()=>tt(Oa=>(Oa+1)%1e6),3e4);return()=>clearInterval(Je)},[]);var z=React.useMemo(()=>{try{if(!u||!i)return[];var Je=u.byClient?u.byClient(i):[];return(Array.isArray(Je)?Je:[]).sort((Oa,He)=>{var Ca=Date.parse(Oa.updatedAt||Oa.createdAt||0)||0;return(Date.parse(He.updatedAt||He.createdAt||0)||0)-Ca})}catch(Je){return[]}},[u,i,$]),H=React.useMemo(()=>ue&&z.find(Je=>String(Je.id)===String(ue))||null,[z,ue]),Ht=React.useMemo(()=>{try{if(!u||!(H!=null&&H.rootId))return[];var Je=u.byRoot?u.byRoot(H.rootId):[];return(Array.isArray(Je)?Je:[]).sort((Oa,He)=>Number(He.version||1)-Number(Oa.version||1))}catch(Je){return[]}},[u,H==null?void 0:H.rootId,$]),Nt=Je=>{try{Ie((Je==null?void 0:Je.id)||null),B(!1),ne({title:String((Je==null?void 0:Je.title)||""),summary:String((Je==null?void 0:Je.summary)||""),explanation:String((Je==null?void 0:Je.explanation)||""),bulletsRaw:Array.isArray(Je==null?void 0:Je.bullets)?Je.bullets.join(`
`):""})}catch(Oa){}},U=()=>{try{if(!u||!H)return;var Je=String(X.bulletsRaw||"").split(`
`).map(Oa=>Oa.trim()).filter(Boolean).slice(0,24);u.update&&u.update(H.id,{title:String(X.title||H.title||""),summary:String(X.summary||""),explanation:String(X.explanation||""),bullets:Je,status:"DRAFT_EDITED"});try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Oa){}B(!1)}catch(Je){}},Q=()=>{try{if(!u||!H)return;var Je=u.regenerate?u.regenerate(H.id,{title:String(H.title||"AI Output")+" (v"+(Number(H.version||1)+1)+")",summary:H.summary,explanation:H.explanation,bullets:Array.isArray(H.bullets)?H.bullets:[]}):null;try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Oa){}Je&&Nt(Je)}catch(Je){}},w=()=>{try{if(!u||!H)return;u.remove&&u.remove(H.id);try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Je){}Ie(null)}catch(Je){}},L=()=>{try{if(!u||!H)return;var Je=u.sendToClient?u.sendToClient(H,s):!1;J(Je?"Sent to client":"Send failed");try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Oa){}tt(Oa=>Oa+1)}catch(Je){J("Send failed")}},ut=()=>{try{if(!u||!H)return;var Je=u.assignToClient?u.assignToClient(H,s):!1;J(Je?"Assigned":"Assign failed");try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Oa){}tt(Oa=>Oa+1)}catch(Je){J("Assign failed")}},ot=()=>{try{if(!u||!H)return;var Je=u.saveTemplate?u.saveTemplate(H,{fromClientId:String(i||"")}):null;J(Je?"Template saved":"Save failed");try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Oa){}tt(Oa=>Oa+1)}catch(Je){J("Save failed")}},ht=!!(H&&String(H.status||"")==="NEEDS_ACK");return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Output Registry"),React.createElement("div",{className:"text-white font-extrabold"},"Drafts, versions, and actions"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Everything generated by AI tools lands here. You can edit, version, send, or assign.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{S&&S()}catch(Je){}},className:"px-3 py-2 rounded-xl border border-white/15 bg-white/5 text-[11px] font-mono uppercase tracking-widest text-white/80 hover:bg-white/10"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"History",size:14})," Param versions")))),W?React.createElement("div",{className:"mt-3 rounded-2xl border border-emerald-400/30 bg-emerald-400/10 p-3"},React.createElement("div",{className:"text-[12px] text-emerald-100 font-semibold"},W)):null,z!=null&&z.length?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},z.slice(0,6).map(Je=>React.createElement("button",{key:Je.id,type:"button",onClick:()=>Nt(Je),className:"text-left rounded-2xl border p-3 hover:bg-white/10 transition "+(String(ue)===String(Je.id)?"border-purple-400/40 bg-purple-500/10":"border-white/10 bg-black/20")},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},String(Je.toolKey||"AI")," \u2022 v",Number(Je.version||1)),React.createElement("div",{className:"text-white font-extrabold text-[13px] truncate"},Je.title||"AI Output"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 line-clamp-2"},Je.summary||Je.explanation||"\u2014")),React.createElement("div",{className:"shrink-0 text-[10px] text-white/45 font-mono"},Je.updatedAt?new Date(Je.updatedAt).toLocaleDateString():"")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[10px] text-white/70"},Je.status||"DRAFT"),Array.isArray(Je.evidence)&&Je.evidence.length?React.createElement("span",{className:"px-2 py-1 rounded-lg bg-emerald-500/10 border border-emerald-400/20 text-[10px] text-emerald-100/80"},"evidence \xD7",Math.min(12,Je.evidence.length)):null)))):React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"No outputs yet."),React.createElement("div",{className:"text-[11px] text-white/45 mt-1"},"Run a tool (Adjust intensity / Weekly summary / Workout program) to create your first draft.")),H?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Selected \u2022 ",String(H.toolKey||"AI")," \u2022 root ",String(H.rootId||"\u2014").slice(0,10),"\u2026"),React.createElement("div",{className:"text-white font-extrabold"},H.title),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},H.summary)),React.createElement("div",{className:"flex flex-wrap gap-2"},H.toolKey==="PLAN_ADJUST"?React.createElement("button",{type:"button",onClick:()=>{try{x&&x(H)}catch(Je){}},className:"px-3 py-2 rounded-xl bg-white text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Apply to params"):null,React.createElement("button",{type:"button",onClick:()=>B(Je=>!Je),className:"px-3 py-2 rounded-xl border border-white/15 bg-white/5 text-[11px] font-mono uppercase tracking-widest text-white/80 hover:bg-white/10"},"Edit"),React.createElement("button",{type:"button",onClick:Q,disabled:ht,className:"px-3 py-2 rounded-xl border border-white/15 bg-white/5 text-[11px] font-mono uppercase tracking-widest text-white/80 "+(ht?"opacity-50 cursor-not-allowed":"hover:bg-white/10")},"Regenerate"),React.createElement("button",{type:"button",onClick:ot,disabled:ht,className:"px-3 py-2 rounded-xl border border-white/15 bg-white/5 text-[11px] font-mono uppercase tracking-widest text-white/80 "+(ht?"opacity-50 cursor-not-allowed":"hover:bg-white/10")},"Save template"),React.createElement("button",{type:"button",onClick:L,disabled:ht,className:"px-3 py-2 rounded-xl bg-purple-400 text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest "+(ht?"opacity-50 cursor-not-allowed":"hover:brightness-110")},"Send"),React.createElement("button",{type:"button",onClick:ut,disabled:ht,className:"px-3 py-2 rounded-xl bg-yellow-400 text-black font-extrabold text-[11px] uppercase tracking-widest "+(ht?"opacity-50 cursor-not-allowed":"hover:brightness-110")},"Assign"),React.createElement("button",{type:"button",onClick:w,className:"px-3 py-2 rounded-xl border border-red-400/30 bg-red-500/10 text-[11px] font-mono uppercase tracking-widest text-red-100/80 hover:bg-red-500/15"},"Delete"))),ht?React.createElement("div",{className:"mt-3 rounded-2xl border border-amber-400/30 bg-amber-500/10 p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-amber-400/15 border border-amber-300/25 flex items-center justify-center shrink-0"},React.createElement(_,{name:"AlertTriangle",size:18,className:"text-amber-200"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-extrabold text-amber-100 uppercase tracking-widest"},"Safety gate \u2014 acknowledge to unlock"),React.createElement("div",{className:"text-[12px] text-amber-100/80 mt-1"},"This meal plan has allergy/contra indicators. Review and acknowledge before you can Send/Assign."),Array.isArray((et=H==null?void 0:H.safety)==null?void 0:et.warnings)&&H.safety.warnings.length?React.createElement("ul",{className:"mt-2 space-y-1"},H.safety.warnings.slice(0,8).map((Je,Oa)=>React.createElement("li",{key:Oa,className:"text-[12px] text-amber-100/85"},"\u2022 ",Je))):null,React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{if(!u||!H)return;u.update&&u.update(H.id,{status:"DRAFT",safety:{...H.safety||{},acknowledgedAt:new Date().toISOString()}}),J("Acknowledged \u2014 actions unlocked");try{window.dispatchEvent(new Event("fof_ai_output_changed"))}catch(Je){}tt(Je=>Je+1)}catch(Je){}},className:"px-4 py-2 rounded-xl bg-amber-300 text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Acknowledge & unlock"))))):null,fe?React.createElement("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3"},React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Title"),React.createElement("input",{value:X.title,onChange:Je=>ne(Oa=>({...Oa,title:Je.target.value})),className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}),React.createElement("div",{className:"text-[11px] text-white/60"},"Summary"),React.createElement("textarea",{value:X.summary,onChange:Je=>ne(Oa=>({...Oa,summary:Je.target.value})),rows:3,className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}),React.createElement("div",{className:"text-[11px] text-white/60"},"Explanation"),React.createElement("textarea",{value:X.explanation,onChange:Je=>ne(Oa=>({...Oa,explanation:Je.target.value})),rows:3,className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"})),React.createElement("div",{className:"space-y-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Bullets (one per line)"),React.createElement("textarea",{value:X.bulletsRaw,onChange:Je=>ne(Oa=>({...Oa,bulletsRaw:Je.target.value})),rows:8,className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:U,className:"px-4 py-2 rounded-xl bg-white text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Save edits"),React.createElement("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 rounded-xl border border-white/15 bg-white/5 text-[11px] font-mono uppercase tracking-widest text-white/80 hover:bg-white/10"},"Cancel")))):React.createElement(React.Fragment,null,Array.isArray(H==null?void 0:H.bullets)&&H.bullets.length?React.createElement("ul",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},H.bullets.slice(0,8).map((Je,Oa)=>React.createElement("li",{key:Oa,className:"text-[12px] text-white/70 px-3 py-2 rounded-xl bg-black/20 border border-white/10"},Je))):null,String((H==null?void 0:H.toolKey)||"")==="MEAL_PLAN"&&(H!=null&&H.mealPlan)?React.createElement("div",{className:"mt-4 rounded-2xl border border-emerald-400/25 bg-emerald-400/10 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-100/70"},"Meal plan details"),React.createElement("div",{className:"text-white font-extrabold"},"7-day structure + grocery list"),React.createElement("div",{className:"text-[12px] text-white/70 mt-1"},"Use Assign to deploy and trigger the nutrition follow-up check-in.")),React.createElement("div",{className:"text-[10px] font-mono text-white/55"},(ma=(At=H.mealPlan)==null?void 0:At.macro)!=null&&ma.calories?`~${H.mealPlan.macro.calories} kcal/day`:"\u2014")),React.createElement("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Week preview"),React.createElement("div",{className:"mt-2 space-y-2"},(Array.isArray(H.mealPlan.week)?H.mealPlan.week:[]).slice(0,7).map((Je,Oa)=>React.createElement("div",{key:Oa,className:"rounded-xl border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[11px] text-white/80 font-semibold"},Je.day),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},(Array.isArray(Je.meals)?Je.meals:[]).map((He,Ca)=>React.createElement("span",{key:Ca,className:"inline-flex mr-2 mb-1 px-2 py-1 rounded-lg bg-black/20 border border-white/10"},React.createElement("span",{className:"text-white/70"},He.slot,":"),"\xA0",React.createElement("span",{className:"text-white/85"},He.meal)))))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Grocery list"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(Array.isArray(H.mealPlan.grocery)?H.mealPlan.grocery:[]).slice(0,32).map((Je,Oa)=>React.createElement("span",{key:Oa,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[11px] text-white/75"},Je))),Array.isArray(H.mealPlan.prepNotes)&&H.mealPlan.prepNotes.length?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Prep notes"),React.createElement("ul",{className:"mt-2 space-y-1"},H.mealPlan.prepNotes.slice(0,6).map((Je,Oa)=>React.createElement("li",{key:Oa,className:"text-[12px] text-white/70"},"\u2022 ",Je)))):null))):null,Array.isArray(H==null?void 0:H.evidence)&&H.evidence.length?React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Evidence used"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},H.evidence.slice(0,10).map((Je,Oa)=>React.createElement("span",{key:Oa,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[11px] text-white/70"},Je)))):null),Ht.length>1?React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Versions"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Ht.slice(0,6).map(Je=>React.createElement("button",{key:Je.id,type:"button",onClick:()=>Nt(Je),className:"px-2.5 py-1.5 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(String(Je.id)===String(H.id)?"bg-purple-500/15 border-purple-400/35 text-white":"bg-white/5 border-white/10 text-white/70 hover:bg-white/10")},"v",Number(Je.version||1))))):null):null)},jl=({selectedClient:i,clientRecords:s,onSelectClient:x})=>{var aa,Mt,la,xa,ei,di,Ua,sa,vt,Ge,$e,Xa,mi,xi,rs,ct,zt,Wi;var S=Array.isArray(s)?s:window.__FOF_DEMO_CLIENTS||[],u=(S==null?void 0:S[0])||null,{density:$,isCompact:tt}=$s(),[ue,Ie]=React.useState(()=>String((i==null?void 0:i.id)||(u==null?void 0:u.id)||""||"")),[fe,B]=React.useState(null),[X,ne]=React.useState([]),[W,J]=React.useState(!1),[z,H]=React.useState(!1),[Ht,Nt]=React.useState(()=>{try{return typeof window!="undefined"&&window.__FOF_TDEP_AI_INTENT||null}catch(Wa){return null}}),[U,Q]=React.useState(null),[w,L]=React.useState(!1),ut=React.useRef(null);React.useEffect(()=>{try{var Wa=ut.current||document.getElementById("fof-output-registry");Wa&&Wa.scrollIntoView&&Wa.scrollIntoView({behavior:"instant",block:"start"})}catch(Wa){}},[]);var ot=typeof window!="undefined"?(aa=window.__FOF_TDEP)==null?void 0:aa.AI_PARAMS:null,ht=typeof window!="undefined"?(Mt=window.__FOF_TDEP)==null?void 0:Mt.TRIAGE:null,ba=typeof window!="undefined"?(la=window.__FOF_TDEP)==null?void 0:la.AI_OUTPUTS:null,et=typeof window!="undefined"?(xa=window.__FOF_TDEP)==null?void 0:xa.AI_TOOLS:null,At=React.useMemo(()=>{var Wa,Hs;try{return(((Wa=ht==null?void 0:ht.getQueue)==null?void 0:Wa.call(ht,{includeSnoozed:!0,includeResolved:!1}))||((Hs=ht==null?void 0:ht.getQueue)==null?void 0:Hs.call(ht))||[]).find(uo=>uo&&String(uo.clientId||"")===String(ue||""))||null}catch(ks){return null}},[ue]);React.useEffect(()=>{var Wa=String((i==null?void 0:i.id)||ue||(u==null?void 0:u.id)||""||"");Wa&&Wa!==ue&&Ie(Wa)},[i==null?void 0:i.id]),React.useEffect(()=>{try{var Wa=typeof window!="undefined"&&window.__FOF_TDEP_AI_INTENT||null;if(Wa){Nt(Wa);try{var ks=String((Wa==null?void 0:Wa.tool)||""),so=ks==="PLAN_ADJUST"||ks==="PLAN_ADJUST_INTENSITY"||ks==="ADJUST_PLAN",uo=String((Wa==null?void 0:Wa.clientId)||"");if(so&&et&&uo){var an=et.runTool("PLAN_ADJUST",uo,{source:"triage_action"});an&&(Q(an),L(!0),setTimeout(()=>L(!1),1600))}}catch(ks){}var Hs=String(Wa.clientId||"");if(Hs&&Hs!==ue){Ie(Hs);try{var ks=S.find(so=>String(so.id||"")===Hs);ks&&typeof x=="function"&&x(ks)}catch(ks){}}try{window.__FOF_TDEP_AI_INTENT=null}catch(ks){}}}catch(Wa){}},[]),React.useEffect(()=>{if(!ot||!ue)return;var Wa=ot.getSharedParams(ue);B(Wa),ne(ot.validate(Wa))},[ue]),React.useEffect(()=>{try{if(!ba||!ue)return;var Wa=ba.latestForClient(ue)||null;Q(Wa)}catch(Wa){}},[ue,W]),React.useEffect(()=>{if(!W)return;var Wa=setTimeout(()=>J(!1),1800);return()=>clearTimeout(Wa)},[W]);var ma=React.useMemo(()=>S.find(Wa=>String(Wa.id)===String(ue))||i||u,[ue,S,i,u]),Je=(Wa,Hs)=>{B(ks=>{var Qi;var so=ks&&typeof ks=="object"?JSON.parse(JSON.stringify(ks)):((Qi=ot==null?void 0:ot.DEFAULT)==null?void 0:Qi.call(ot,ue))||{},uo=String(Wa).split(".");var an=so;for(var ui=0;ui<uo.length-1;ui++){var vi=uo[ui];an[vi]=an[vi]&&typeof an[vi]=="object"?an[vi]:{},an=an[vi]}an[uo[uo.length-1]]=Hs;try{ne(ot.validate(so))}catch(ui){}return so})},Oa=Wa=>{var uo;var Hs=Array.isArray((uo=fe==null?void 0:fe.schedule)==null?void 0:uo.preferredDays)?fe.schedule.preferredDays.slice(0):[],so=Hs.includes(Wa)?Hs.filter(an=>an!==Wa):[...Hs,Wa];Je("schedule.preferredDays",so)},He=(Wa,Hs)=>{var an;var ks=String(Hs||"").split(",").map(Qi=>Qi.trim()).filter(Boolean),so=Wa==="equipment"?Array.isArray(fe==null?void 0:fe.equipment)?fe.equipment:[]:Array.isArray((an=fe==null?void 0:fe.preferences)==null?void 0:an.dislikes)?fe.preferences.dislikes:[],uo=Array.from(new Set([...so,...ks]));Je(Wa==="equipment"?"equipment":"preferences.dislikes",uo)},Ca=()=>{if(!ot||!ue)return;var Wa=ot.setSharedParams(ue,fe,{updatedBy:"trainer_demo"});B(Wa),ne(ot.validate(Wa)),J(!0)},ha=React.useMemo(()=>ot&&ue?ot.getHistory(ue):[],[ot,ue,W,z]),K=Wa=>{if(!ot||!ue)return;var Hs=ot.restoreVersion(ue,Wa);Hs&&(B(Hs),ne(ot.validate(Hs)),J(!0))};return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-purple-500/15 border border-purple-400/30 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-purple-200"})),React.createElement("div",null,React.createElement("h2",{className:"text-lg font-extrabold text-white"},"AI Hub"),React.createElement("p",{className:"text-[12px] text-white/55"},"Phase 4.3 \u2014 Output Registry + Shared AI Parameters (single canonical client context).")))),React.createElement("div",{className:"flex items-center gap-2"},W&&React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-500/10 border border-emerald-400/30 text-emerald-200"},"Saved"),React.createElement("button",{type:"button",onClick:()=>H(Wa=>!Wa),className:"px-3 py-2 rounded-xl border text-[11px] uppercase tracking-widest "+(z?"bg-white/8 border-white/20 text-white":"bg-white/5 border-white/10 text-white/70 hover:bg-white/8")},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"History",size:14}),"Versions")),React.createElement("button",{type:"button",onClick:Ca,className:"px-4 py-2 rounded-xl bg-yellow-400 text-black text-[11px] font-extrabold uppercase tracking-widest hover:brightness-110"},"Save Params"))),w?React.createElement("div",{className:"rounded-2xl border border-emerald-400/30 bg-emerald-400/10 p-3"},React.createElement("div",{className:"text-[12px] text-emerald-100 font-semibold"},"AI draft created"),React.createElement("div",{className:"text-[11px] text-emerald-100/70"},"A draft output was added to Output Registry for this client.")):null,ue?React.createElement("div",{id:"fof-output-registry",ref:ut,className:"rounded-3xl border border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.06)] p-1"},React.createElement(kl,{clientId:ue,clientObj:ma,onApplyToParams:Wa=>{var Hs,ks,so,uo,an;try{if(!Wa||Wa.toolKey!=="PLAN_ADJUST")return;var Qi=String((Wa==null?void 0:Wa.preset)||"MAINTAIN").toUpperCase(),ui=Wa.modifiers||{};if(Qi==="DELOAD")try{Je("preferences.intensity","Low")}catch(vi){}else if(Qi==="PUSH")try{Je("preferences.intensity","High")}catch(vi){}else try{Je("preferences.intensity","Mid")}catch(vi){}try{var vi=Number((ks=(Hs=fe==null?void 0:fe.schedule)==null?void 0:Hs.sessionsPerWeek)!=null?ks:4),hi=Math.max(1,Math.round(vi+(Number(ui.sessionsDelta)||0)));Je("schedule.sessionsPerWeek",hi)}catch(vi){}try{var vi=(so=fe==null?void 0:fe.constraints)!=null&&so.notes?String(fe.constraints.notes):"",hi=`Applied AI preset: ${Qi} (draft ${Wa.id})`,ls=vi?vi+`
`+hi:hi;Je("constraints.notes",ls)}catch(vi){}try{(an=(uo=window.__FOF_TDEP)==null?void 0:uo.logEvent)==null||an.call(uo,"ai.output.applied_to_params",{id:Wa.id,clientId:String(ue||""),preset:Qi})}catch(vi){}J(!0)}catch(Qi){}},onOpenVersions:()=>{try{H(!0)}catch(Wa){}}})):null,React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"AI tools"),React.createElement("div",{className:"text-white font-extrabold"},"Run a consumer tool (Phase 4.2)"),React.createElement("div",{className:"text-[12px] text-white/60"},"Uses Shared Params snapshot + writes draft output to Output Registry.")),React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{if(!et||!ue)return;var Wa=et.runTool("PLAN_ADJUST",ue,{source:"ai_hub"});Wa&&(Q(Wa),L(!0),setTimeout(()=>L(!1),1600))}catch(Wa){}},className:"px-4 py-2 rounded-xl bg-purple-400 text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Adjust intensity"),React.createElement("button",{type:"button",onClick:()=>{try{if(!et||!ue)return;var Wa=et.runTool("WEEK_SUMMARY",ue,{source:"ai_hub"});Wa&&(Q(Wa),L(!0),setTimeout(()=>L(!1),1600))}catch(Wa){}},className:"px-4 py-2 rounded-xl bg-white text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Weekly summary"),React.createElement("button",{type:"button",onClick:()=>{try{if(!et||!ue)return;var Wa=et.runTool("WORKOUT_PROGRAM",ue,{source:"ai_hub"});Wa&&(Q(Wa),L(!0),setTimeout(()=>L(!1),1600))}catch(Wa){}},className:"px-4 py-2 rounded-xl bg-yellow-400 text-black font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Workout program"),React.createElement("button",{type:"button",onClick:()=>{try{if(!et||!ue)return;var Wa=et.runTool("MEAL_PLAN",ue,{source:"ai_hub"});Wa&&(Q(Wa),L(!0),setTimeout(()=>L(!1),1600))}catch(Wa){}},className:"px-4 py-2 rounded-xl bg-emerald-400 text-zinc-900 font-extrabold text-[11px] uppercase tracking-widest hover:brightness-110"},"Meal plan")))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Client Context"),React.createElement("div",{className:"text-[13px] font-semibold text-white truncate"},(ma==null?void 0:ma.name)||"Select a client"),React.createElement("div",{className:"text-[11px] text-white/45 truncate"},"Capacity Score: ",React.createElement("span",{className:"text-white/80 font-semibold"},(Ua=(di=(ei=ma==null?void 0:ma.capacityScoreNow)!=null?ei:ma==null?void 0:ma.capacityScore)!=null?di:ma==null?void 0:ma.readiness)!=null?Ua:"\u2014")," \u2022 Tier: ",(ma==null?void 0:ma.tier)||"\u2014")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("select",{value:ue,onChange:Wa=>{var Hs=Wa.target.value;Ie(Hs);var ks=S.find(so=>String(so.id)===String(Hs));try{x&&ks&&x(ks)}catch(so){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"},(S||[]).map(Wa=>React.createElement("option",{key:Wa.id,value:Wa.id},Wa.name))),React.createElement("div",{className:"hidden md:block text-[10px] text-white/45 font-mono"},((sa=fe==null?void 0:fe.meta)==null?void 0:sa.version)||"v\u2014"," \u2022 ",(vt=fe==null?void 0:fe.meta)!=null&&vt.updatedAt?new Date(fe.meta.updatedAt).toLocaleString():"\u2014")))),(X==null?void 0:X.length)>0&&React.createElement("div",{className:"rounded-2xl border border-amber-400/30 bg-amber-500/10 p-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-amber-400/15 border border-amber-300/25 flex items-center justify-center shrink-0"},React.createElement(_,{name:"AlertTriangle",size:18,className:"text-amber-200"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-amber-100 uppercase tracking-widest"},"Soft Validation"),React.createElement("div",{className:"text-[12px] text-amber-100/80 mt-1"},"You can still save \u2014 these are warnings that may affect AI outputs."),React.createElement("ul",{className:"mt-2 space-y-1"},X.slice(0,6).map((Wa,Hs)=>React.createElement("li",{key:Hs,className:"text-[12px] text-amber-100/85"},React.createElement("span",{className:"font-mono text-[10px] text-amber-200/80"},Wa.field)," \u2014 ",Wa.message)))))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50 mb-3"},"Core Parameters"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Goal"),React.createElement("select",{value:(fe==null?void 0:fe.goal)||"",onChange:Wa=>Je("goal",Wa.target.value),className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"},React.createElement("option",{value:""},"\u2014 Select goal \u2014"),React.createElement("option",{value:"Fat loss"},"Fat loss"),React.createElement("option",{value:"Strength"},"Strength"),React.createElement("option",{value:"Hypertrophy"},"Hypertrophy"),React.createElement("option",{value:"Endurance"},"Endurance"),React.createElement("option",{value:"Mobility"},"Mobility"),React.createElement("option",{value:"Sport performance"},"Sport performance"),React.createElement("option",{value:"General fitness"},"General fitness"))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Sessions per week"),React.createElement("input",{type:"number",min:"1",max:"14",value:($e=(Ge=fe==null?void 0:fe.schedule)==null?void 0:Ge.sessionsPerWeek)!=null?$e:4,onChange:Wa=>Je("schedule.sessionsPerWeek",Number(Wa.target.value)),className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Time of day"),React.createElement("select",{value:((Xa=fe==null?void 0:fe.schedule)==null?void 0:Xa.timeOfDay)||"Any",onChange:Wa=>Je("schedule.timeOfDay",Wa.target.value),className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"},React.createElement("option",{value:"Any"},"Any"),React.createElement("option",{value:"Morning"},"Morning"),React.createElement("option",{value:"Afternoon"},"Afternoon"),React.createElement("option",{value:"Evening"},"Evening"))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Training style"),React.createElement("select",{value:((mi=fe==null?void 0:fe.preferences)==null?void 0:mi.style)||"Balanced",onChange:Wa=>Je("preferences.style",Wa.target.value),className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"},React.createElement("option",{value:"Balanced"},"Balanced"),React.createElement("option",{value:"Strength"},"Strength"),React.createElement("option",{value:"Hypertrophy"},"Hypertrophy"),React.createElement("option",{value:"Endurance"},"Endurance"),React.createElement("option",{value:"Mobility"},"Mobility")))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/60 mb-2"},"Preferred days"),React.createElement("div",{className:"flex flex-wrap gap-2"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(Wa=>{var ks;var Hs=(((ks=fe==null?void 0:fe.schedule)==null?void 0:ks.preferredDays)||[]).includes(Wa);return React.createElement("button",{key:Wa,type:"button",onClick:()=>Oa(Wa),className:"px-3 py-1.5 rounded-full text-[11px] border "+(Hs?"bg-purple-500/20 border-purple-400/40 text-white":"bg-white/5 border-white/10 text-white/65 hover:bg-white/8")},Wa)})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50 mb-3"},"Equipment & Constraints"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Equipment (comma separated)"),React.createElement("input",{placeholder:"e.g., Dumbbells, Bands, Bodyweight",onKeyDown:Wa=>{Wa.key==="Enter"&&(Wa.preventDefault(),He("equipment",Wa.currentTarget.value),Wa.currentTarget.value="")},className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},((fe==null?void 0:fe.equipment)||[]).slice(0,12).map((Wa,Hs)=>React.createElement("span",{key:Hs,className:"px-2 py-1 rounded-full text-[11px] bg-sky-500/10 border border-sky-400/20 text-sky-200"},Wa)),((fe==null?void 0:fe.equipment)||[]).length>12&&React.createElement("span",{className:"text-[11px] text-white/45"},"+",fe.equipment.length-12," more"))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Injuries / Contraindications"),React.createElement("textarea",{rows:4,value:((xi=fe==null?void 0:fe.constraints)==null?void 0:xi.notes)||"",onChange:Wa=>Je("constraints.notes",Wa.target.value),placeholder:"e.g., avoid deep knee flexion; shoulder impingement; no running",className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[11px] text-white/60 mb-1"},"Dislikes (comma separated)"),React.createElement("input",{placeholder:"e.g., burpees, long runs",onKeyDown:Wa=>{Wa.key==="Enter"&&(Wa.preventDefault(),He("dislikes",Wa.currentTarget.value),Wa.currentTarget.value="")},className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-midnight-950/50 text-white text-[12px] focus:outline-none focus:ring-2 focus:ring-purple-500/30"}),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(((rs=fe==null?void 0:fe.preferences)==null?void 0:rs.dislikes)||[]).slice(0,10).map((Wa,Hs)=>React.createElement("span",{key:Hs,className:"px-2 py-1 rounded-full text-[11px] bg-rose-500/10 border border-rose-400/20 text-rose-200"},Wa))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Downstream Tools (Locked)"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Phase 4.2 will wire tools to consume this shared context.")),React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full bg-white/5 border border-white/10 text-white/60 uppercase tracking-widest"},"Phase 4.2")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},[{k:"program_gen",label:"Program Generator"},{k:"adjust_plan",label:"Adjust Plan (Capacity)"},{k:"weekly_summary",label:"Summarize Week"}].map(Wa=>React.createElement("div",{key:Wa.k,className:"rounded-xl border border-white/10 bg-midnight-950/40 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},Wa.label),React.createElement("div",{className:"text-[11px] text-white/45 mt-1"},"Consumes Shared Params \u2022 writes Output Registry"),React.createElement("div",{className:"mt-2"},React.createElement("button",{type:"button",className:"w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-[11px] text-white/50 cursor-not-allowed"},"Locked"))))))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50 mb-2"},"Current Meta"),React.createElement("div",{className:"text-[12px] text-white/70"},"Version: ",React.createElement("span",{className:"font-semibold text-white"},((ct=fe==null?void 0:fe.meta)==null?void 0:ct.version)||"v\u2014")),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Updated: ",(zt=fe==null?void 0:fe.meta)!=null&&zt.updatedAt?new Date(fe.meta.updatedAt).toLocaleString():"\u2014"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"By: ",((Wi=fe==null?void 0:fe.meta)==null?void 0:Wi.updatedBy)||"\u2014"),React.createElement("div",{className:"mt-3 pt-3 border-t border-white/10"},React.createElement("div",{className:"text-[11px] text-white/60"},"Snapshot API"),React.createElement("div",{className:"text-[11px] text-white/45 mt-1 font-mono break-all"},"__FOF_TDEP.AI_PARAMS.snapshotForExecution(clientId, toolKey)"))),z&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50 mb-2"},"Version History"),ha.length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"No saved versions yet."):React.createElement("div",{className:"space-y-2"},ha.slice(0,10).map((Wa,Hs)=>React.createElement("div",{key:Hs,className:"rounded-xl border border-white/10 bg-midnight-950/40 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},Wa.version),React.createElement("button",{type:"button",onClick:()=>K(Wa.version),className:"text-[10px] px-2 py-1 rounded-full bg-white/5 border border-white/10 text-white/70 hover:bg-white/8"},"Restore")),React.createElement("div",{className:"text-[11px] text-white/45 mt-1"},Wa.savedAt?new Date(Wa.savedAt).toLocaleString():"\u2014"," \u2022 ",Wa.savedBy||"\u2014"))))))))},wr=()=>null,Gs=({onDone:i,onBack:s})=>{var[x,S]=React.useState("CONSENT"),[u,$]=React.useState(!1),[tt,ue]=React.useState(""),[Ie,fe]=React.useState([]),[B,X]=React.useState(""),ne=J=>{var H=String(J||"").split(/\r?\n/).filter(U=>U.trim().length);if(!H.length)return[];var Ht=H[0].split(",").map(U=>U.trim()),Nt=[];for(var U=1;U<H.length;U++){var Q=H[U].split(","),w={};Ht.forEach((L,ut)=>{w[L]=(Q[ut]||"").trim()}),Nt.push(w)}return Nt},W=async J=>{try{X("");var z=J.target.files&&J.target.files[0];if(!z)return;ue(z.name||"file.csv");var H=await z.text(),Ht=ne(H);fe(Ht);try{localStorage.setItem("FOF_IMPORT_DRAFT_V1",JSON.stringify({fileName:z.name,rows:Ht,at:Date.now()}))}catch(Nt){}S("REVIEW")}catch(z){X("Could not read CSV. Please try again.")}};return React.createElement("div",{className:"p-4 space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/10",onClick:()=>{try{s&&s()}catch(J){}}},"Back"),React.createElement("div",{className:"text-sm opacity-70"},"Bulk Import"),React.createElement("div",{style:{width:64}})),x==="CONSENT"&&React.createElement("div",{className:"rounded-2xl p-4 bg-white/5 border border-white/10 space-y-3"},React.createElement("div",{className:"text-lg font-semibold"},"Consent"),React.createElement("div",{className:"text-sm opacity-80"},"Confirm you have permission to upload client data (names/emails) for onboarding."),React.createElement("label",{className:"flex items-start gap-2 text-sm"},React.createElement("input",{type:"checkbox",checked:u,onChange:J=>$(!!J.target.checked)}),React.createElement("span",{className:"opacity-90"},"I confirm I have consent to upload this data.")),React.createElement("button",{className:"w-full rounded-2xl p-3 border "+(u?"bg-white/10 border-white/10 hover:bg-white/15":"bg-white/5 border-white/5 opacity-50"),disabled:!u,onClick:()=>{try{S("UPLOAD")}catch(J){}}},"Continue")),x==="UPLOAD"&&React.createElement("div",{className:"rounded-2xl p-4 bg-white/5 border border-white/10 space-y-3"},React.createElement("div",{className:"text-lg font-semibold"},"Upload CSV"),React.createElement("div",{className:"text-sm opacity-80"},"Choose a CSV file. First row should contain headers."),React.createElement("input",{type:"file",accept:".csv,text/csv",onChange:W}),tt?React.createElement("div",{className:"text-xs opacity-70"},"Selected: ",tt):null,B?React.createElement("div",{className:"text-sm text-red-300"},B):null),x==="REVIEW"&&React.createElement("div",{className:"rounded-2xl p-4 bg-white/5 border border-white/10 space-y-3"},React.createElement("div",{className:"text-lg font-semibold"},"Review"),React.createElement("div",{className:"text-sm opacity-80"},Ie.length," rows loaded."),React.createElement("div",{className:"max-h-56 overflow-auto rounded-xl border border-white/10 bg-black/20"},React.createElement("table",{className:"w-full text-xs"},React.createElement("thead",{className:"sticky top-0 bg-black/40"},React.createElement("tr",null,Object.keys(Ie[0]||{row:"row"}).slice(0,6).map(J=>React.createElement("th",{key:J,className:"text-left px-2 py-2 font-semibold opacity-80"},J)))),React.createElement("tbody",null,Ie.slice(0,10).map((J,z)=>React.createElement("tr",{key:z,className:"border-t border-white/5"},Object.keys(Ie[0]||{row:"row"}).slice(0,6).map(H=>React.createElement("td",{key:H,className:"px-2 py-2 opacity-85"},String(J[H]||"")))))))),React.createElement("button",{className:"w-full rounded-2xl p-3 bg-white/10 hover:bg-white/15 border border-white/10",onClick:()=>{try{i&&i()}catch(J){}}},"Finish")))},Kn=({onNavigate:i,conversionAnalytics:s,openPlanAssigner:x})=>{var[S,u]=React.useState("DASHBOARD"),[$,tt]=React.useState(null),[ue,Ie]=React.useState("CAMPAIGNS");window.__FOF=window.__FOF||{},window.__FOF.PRO_ROLE_KEY=window.__FOF.PRO_ROLE_KEY||"fof.pro.roleType.v1",window.__FOF=window.__FOF||{},window.__FOF.readProRole=window.__FOF.readProRole||(()=>{try{var o=String(localStorage.getItem(window.__FOF.PRO_ROLE_KEY)||"").toUpperCase();return o==="SPECIALIST"||o==="HYBRID"||o==="TRAINER"?o:"TRAINER"}catch(o){return"TRAINER"}});var[fe,B]=React.useState(()=>window.__FOF.readProRole());React.useEffect(()=>{var o=()=>{try{B(window.__FOF.readProRole())}catch(d){}};try{window.addEventListener("fof:pro_role_changed",o)}catch(d){}try{window.addEventListener("storage",d=>{String((d==null?void 0:d.key)||"")===window.__FOF.PRO_ROLE_KEY&&o()})}catch(d){}try{window.__FOF_SET_PRO_ROLE_TYPE=d=>{try{localStorage.setItem(window.__FOF.PRO_ROLE_KEY,String(d||"").toUpperCase())}catch(m){}try{window.dispatchEvent(new CustomEvent("fof:pro_role_changed"))}catch(m){}}}catch(d){}return()=>{try{window.removeEventListener("fof:pro_role_changed",o)}catch(d){}}},[]);var X="fof.specialist.banner.dismissed.v1",[ne,W]=React.useState(()=>{try{return String(localStorage.getItem(X)||"")==="1"}catch(o){return!1}}),J=()=>{try{localStorage.setItem(X,"1")}catch(o){}try{W(!0)}catch(o){}},z=React.useMemo(()=>({HUB:"#/hub",MAIN_HUB:"#/hub",DASHBOARD_MODE:"#/dashboard"}),[]);React.useEffect(()=>{try{var o=String(window.location&&window.location.hash||"").toLowerCase();if(o.startsWith("#magic-login"))try{var d=o.split("?")[1]||"",E=new URLSearchParams(d).get("token");if(E){tt(String(E)),u("MAGIC_LOGIN");return}}catch(d){}if(o.includes("/dashboard")){u("DASHBOARD_MODE");return}if(o.includes("/hub")){u("HUB");return}if(!o){window.location.hash=z.DASHBOARD_MODE,u("DASHBOARD_MODE");return}window.location.hash=z.DASHBOARD_MODE,u("DASHBOARD_MODE")}catch(o){}},[]);var H=React.useRef(!1);React.useEffect(()=>{try{if(!window.__FOF_FLAGS||!window.__FOF_FLAGS.ONBOARDING_3A||H.current)return;var o=window.__FOF_ONB3A&&window.__FOF_ONB3A.get?window.__FOF_ONB3A.get():null;if(!o)return;o.firstLoginDone||S!=="BUSINESS_SETUP_WIZARD"&&S!=="T_SETUP_TASKS"&&(H.current=!0,setTimeout(()=>{try{u("BUSINESS_SETUP_WIZARD")}catch(d){}},0))}catch(o){}},[S]);var Ht=React.useRef(!1);React.useEffect(()=>{try{if(Ht.current||!window.__FOF_FLAGS||!window.__FOF_FLAGS.ONBOARDING_3A)return;var o=window.__FOF_ONB3A&&window.__FOF_ONB3A.get?window.__FOF_ONB3A.get():null;if(!o||!o.firstLoginDone||!(S==="DASHBOARD_MODE"||S==="DASHBOARD"||S==="HUB"||S==="MAIN_HUB"))return;Ht.current=!0,setTimeout(()=>{try{var m=window.__FOF&&window.__FOF.readProRole?window.__FOF.readProRole():String(fe||"TRAINER").toUpperCase();u(m==="SPECIALIST"||m==="HYBRID"?"SPECIALIST_TRIAGE":"DAILY_HUB")}catch(m){try{u("DAILY_HUB")}catch(E){}}},0)}catch(o){}},[S,fe]),React.useEffect(()=>{try{var o=z[String(S||"").toUpperCase()];if(!o)return;String(window.location&&window.location.hash||"")!==o&&(window.location.hash=o)}catch(o){}},[S,z]),React.useEffect(()=>{try{S==="CHALLENGES"?Ie("CAMPAIGNS"):S==="REWARDS"?Ie("REWARDS"):S==="ENGAGEMENT"&&!ue&&Ie("CAMPAIGNS")}catch(o){}},[S,ue]);var[Nt,U]=React.useState(0),[Q,w]=React.useState(null),L=React.useMemo(()=>({DENSITY:"fof.lpcc.hub.density.v1",PERSONAL:"fof.lpcc.hub.personalization.v1"}),[]),[ut,ot]=React.useState(()=>{try{return String(localStorage.getItem("fof.lpcc.hub.density.v1")||"").toUpperCase()==="COMPACT"?"COMPACT":"COMFORTABLE"}catch(o){return"COMFORTABLE"}}),[ht,ba]=React.useState(()=>{try{var o=localStorage.getItem("fof.lpcc.hub.personalization.v1"),d=o?JSON.parse(o):null;return{highlights:(d==null?void 0:d.highlights)!==!1,smartCopy:(d==null?void 0:d.smartCopy)!==!1,smartOrdering:(d==null?void 0:d.smartOrdering)!==!1}}catch(o){return{highlights:!0,smartCopy:!0,smartOrdering:!0}}});React.useEffect(()=>{try{localStorage.setItem(L.DENSITY,ut)}catch(o){}},[ut,L]),React.useEffect(()=>{try{localStorage.setItem(L.PERSONAL,JSON.stringify(ht||{}))}catch(o){}},[ht,L]),React.useEffect(()=>{S==="FINANCE_HUB"&&U(o=>o+1)},[S,ue]);var et=React.useCallback(()=>{try{typeof ta=="function"&&ta("Logout","You have been logged out (demo).")}catch(o){}try{localStorage&&localStorage.clear&&localStorage.clear()}catch(o){}try{sessionStorage&&sessionStorage.clear&&sessionStorage.clear()}catch(o){}try{window.location&&window.location.reload&&window.location.reload()}catch(o){}},[]);React.useEffect(()=>{var o=E=>{try{var g=(E==null?void 0:E.detail)||{},f=g==null?void 0:g.view;if(!f)return;var F=typeof es=="function"?es(f,g):{view:f,route:(g==null?void 0:g.route)||null,reason:null};try{F&&F.view==="BUSINESS_HUB"&&F.route&&typeof Mt=="function"&&Mt(F.route)}catch(D){}u(F.view)}catch(g){}},d=()=>{try{Go()}catch(E){}},m=E=>{try{var g=(E==null?void 0:E.detail)||{};w(g),u("P1_EXPORT")}catch(g){}};return window.addEventListener("fof:navigate",o),window.addEventListener("fof:navigate_back",d),window.addEventListener("fof:open_export",m),()=>{window.removeEventListener("fof:navigate",o),window.removeEventListener("fof:navigate_back",d),window.removeEventListener("fof:open_export",m)}},[]),React.useEffect(()=>{var o=m=>{try{if(!m)return!1;var E=String(m.tagName||"").toUpperCase();if(E==="INPUT"||E==="TEXTAREA"||E==="SELECT"||m.isContentEditable)return!0}catch(E){}return!1},d=m=>{try{if(o(document.activeElement))return;(m.ctrlKey||m.metaKey)&&(m.key==="k"||m.key==="K")&&(m.preventDefault(),window.dispatchEvent(new CustomEvent("fof:openPalette")))}catch(E){}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]);try{window.__fofSetView=o=>u(o)}catch(o){}var[At,ma]=React.useState("TRAINER"),[Je,Oa]=React.useState([]),He=(o,d={})=>{try{Oa(m=>[...m,{view:S,businessHubRoute:aa}])}catch(m){}try{u(o==="ENGAGEMENT"?"ENGAGEMENT_HOME":o==="CHALLENGES"?"ENGAGEMENT_CAMPAIGNS":o==="REWARDS"?"ENGAGEMENT_REWARDS":o)}catch(m){}try{o==="BUSINESS_HUB"&&d&&d.businessHubRoute&&Mt(d.businessHubRoute)}catch(m){}},Ca=!!(Je&&Je.length>0),ha=()=>{try{Oa(o=>{var d=(o||[]).slice(),m=d.pop();try{m&&m.businessHubRoute&&Mt(m.businessHubRoute),m&&m.view&&u(m.view)}catch(E){}return d})}catch(o){}},K=()=>{try{Oa([])}catch(o){}try{u("HUB")}catch(o){}},[aa,Mt]=React.useState(()=>({section:"BH-ENTRY",sub:null,filter:null})),la=o=>{try{Mt({section:o&&o.section?o.section:"BH-ENTRY",sub:o&&o.sub?o.sub:null,filter:o&&o.filter?o.filter:null})}catch(d){}try{He("BUSINESS_HUB")}catch(d){}},[xa,ei]=React.useState(()=>window.matchMedia?window.matchMedia("(max-width: 768px)").matches:window.innerWidth<=768),[di,Ua]=React.useState(!1),[sa,vt]=React.useState(()=>{try{return JSON.parse(localStorage.getItem("fof_sidebar_expanded")||"false")}catch(o){return!0}});React.useEffect(()=>{try{localStorage.setItem("fof_sidebar_expanded",JSON.stringify(sa))}catch(o){}},[sa]),React.useEffect(()=>{var o=window.matchMedia?window.matchMedia("(max-width: 768px)"):null,d=E=>ei(!!(E&&E.matches));o&&o.addEventListener?o.addEventListener("change",d):o&&o.addListener&&o.addListener(d);var m=()=>{try{ei(window.innerWidth<=768)}catch(E){}};return window.addEventListener("resize",m),()=>{o&&o.removeEventListener?o.removeEventListener("change",d):o&&o.removeListener&&o.removeListener(d),window.removeEventListener("resize",m)}},[]),React.useEffect(()=>{xa||Ua(!1)},[xa]);var[Ge,$e]=React.useState("GRACE"),[Xa,mi]=React.useState(!1),[xi,rs]=React.useState(()=>{try{return localStorage.getItem("fof_pay_banner_dismissed")==="1"}catch(o){return!1}}),[ct,zt]=React.useState(null),[Wi,Wa]=React.useState(null),[Hs,ks]=React.useState(null),[so,uo]=React.useState(!1),[an,Qi]=React.useState(null),[ui,vi]=React.useState("SOURCE"),[hi,ls]=React.useState("BUILD"),[Bi,Pa]=React.useState("CLIENTS"),[Ga,ca]=React.useState("GRID"),[La,fi]=React.useState("ACTIVE");React.useEffect(()=>{try{if(La!=="NEW_LEADS")return;window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_HUB",route:{bhPage:"CRM_PIPELINE",filter:"LEADS",from:"CLIENT_LEADS_AUTO"}}}))}catch(o){}},[La]);var[ms,ss]=React.useState("APPLICATIONS"),[ds,Xs]=React.useState(null),Wo=o=>new Date(Date.now()-o*864e5).toISOString(),Po=typeof window!="undefined"&&(window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS)?window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS:[],Eo="fof.trainer.clients.custom.v1",[Oi,jo]=React.useState(()=>{var o=Array.isArray(Po)?Po:[],d=(()=>{try{var F=typeof Ta=="function"?Ta(Eo,"[]"):localStorage.getItem(Eo)||"[]",D=JSON.parse(F);return Array.isArray(D)?D:[]}catch(F){return[]}})(),m=(F,D=0)=>{var k,T,he,oe,ke,Re;return{...F,id:String(F.id||F.clientId||"c_custom_"+D+"_"+Math.random().toString(16).slice(2)),name:String(F.name||"Client"),email:F.email?String(F.email):F.contactEmail?String(F.contactEmail):"",phone:F.phone?String(F.phone):F.contactPhone?String(F.contactPhone):"",tier:String(F.tier||"PAID"),tags:Array.isArray(F.tags)?F.tags:[],segment:String(F.segment||"ACTIVE"),status:String(F.status||"Active"),readiness:Number((he=(T=(k=F.capacityScoreNow)!=null?k:F.capacityScore)!=null?T:F.readiness)!=null?he:60),capacityScore:Number((Re=(ke=(oe=F.capacityScoreNow)!=null?oe:F.capacityScore)!=null?ke:F.readiness)!=null?Re:60),capacityTrend:String(F.capacityTrend||(D%3===0?"DOWN":D%3===1?"UP":"STABLE")),createdAt:F.createdAt||F.created_at||new Date().toISOString()}},E=o.length>=25?o.map((F,D)=>m(F,D)):Array.from({length:25}).map((F,D)=>m({id:`c${D+1}`,name:`Client ${D+1}`,tier:D%3===0?"FREE":D%3===1?"TRIAL":"PAID",tags:["LINKED"],segment:D<10?"ATTENTION":"ACTIVE",status:D<10?"Needs Attention":"Active",adherence7d:D<10?.45:.8,capacityScoreNow:D<10?40:70,lastCheckInAt:Wo(D<10?18:2),readiness:D<10?40:70,capacityScore:D<10?40:70,capacityTrend:D%3===0?"DOWN":D%3===1?"UP":"STABLE"},D)),g=new Set,f=[];return(d||[]).slice().reverse().forEach((F,D)=>{var k=m(F,D);g.has(k.id)||(g.add(k.id),f.push(k))}),E.forEach(F=>{g.has(F.id)||(g.add(F.id),f.push(F))}),f});React.useEffect(()=>{try{window.__FOF_DEBUG_CLIENTS=Oi}catch(o){}try{window.__FOF_TDEP&&window.__FOF_TDEP.TRIAGE&&typeof window.__FOF_TDEP.TRIAGE.runTriage=="function"&&(window.__FOF_DEBUG_TRIAGE=window.__FOF_TDEP.TRIAGE.runTriage({clients:Array.isArray(Oi)&&Oi.length>=7?Oi:[],source:"auto_client_state"}))}catch(o){}},[Oi]);var[to,Rn]=React.useState([{id:"g1",name:"Fat Loss Cohort",type:"Cohort",members:["c1","c3"]},{id:"g2",name:"Corporate Wellness \u2013 Team A",type:"Corporate",members:["c2"]}]),[Io,bs]=React.useState([{id:"a1",name:"Rami Haddad",goal:"Lose fat",status:"NEW",source:"Client Application"},{id:"a2",name:"Noura Ahmed",goal:"Build muscle",status:"CONTACTED",source:"Client Application"},{id:"a3",name:"Saeed Khan",goal:"Recomp",status:"TRIAL",source:"Client Application"}]),Ao=(o,d)=>bs(m=>m.map(E=>E.id===o?{...E,status:d}:E)),sn=o=>{var d={id:"c_"+o.id,name:o.name,status:"Active",segment:"ACTIVE",tags:["New Lead"],readiness:60,capacityScore:60,capacityTrend:"STABLE"};jo(m=>[d,...m]),bs(m=>m.filter(E=>E.id!==o.id)),zt(d),uo(!0);try{fi("NEW_LEADS"),ss("APPLICATIONS")}catch(m){}u("CLIENT_ACTION_MODE")},Li=o=>{bs(d=>d.filter(m=>m.id!==o.id));try{fi("NEW_LEADS"),ss("APPLICATIONS")}catch(d){}try{ks(null)}catch(d){}try{u("CLIENT_LIST")}catch(d){}},[po,Tn]=React.useState(null),[cr,_r]=React.useState(!1),[$o,Vo]=React.useState(!1),[xn,Xn]=React.useState(null),[Fi,ws]=React.useState(null),[mo,fs]=React.useState(null),[Mo,Di]=React.useState(null),[dn,An]=React.useState(!1),[Hr,Wr]=React.useState("ALL"),[On,zn]=React.useState(null),[xl,qr]=React.useState(!1),[hl,Sn]=React.useState(!1),[Be,Ia]=React.useState(null),[q,Ea]=React.useState("TODAY"),[Ts,bo]=React.useState(!1),[Fo,Ss]=React.useState(!1),[Cn,zs]=React.useState("ACTIVE"),[So,mn]=React.useState(!1),[Yi,js]=React.useState([{time:"09:15",trigger:"AI Churn",action:"Sent Promo"},{time:"08:00",trigger:"Missed Workout",action:"Sent Nudge"}]),[Qo,zo]=React.useState({name:"",goal:"",freq:"",teaserGenerated:!1}),[ur,Tr]=React.useState(null),Oo=React.useRef(["HUB"]),Ls=React.useRef("HUB");React.useEffect(()=>{var o=Oo.current;o[o.length-1]!==S&&o.push(S),S!=="FOCUS"&&(Ls.current=S)},[S,ue]),React.useEffect(()=>{if(typeof document=="undefined"||S!=="HUB"||At!=="TRAINER")return;var o=document.querySelector("[data-trainer-mainhub-root]");if(!o)return;var d=null;var m=Array.from(o.children);m.forEach(T=>{T.setAttribute("draggable","true"),T.classList.add("td-draggable-panel")});var E=function(T){d=this,this.classList.add("td-dragging"),T.dataTransfer.effectAllowed="move"},g=function(){this.classList.remove("td-dragging"),m.forEach(T=>T.classList.remove("td-drag-over")),d=null},f=function(T){return T.preventDefault(),T.dataTransfer.dropEffect="move",!1},F=function(){!d||this===d||this.classList.add("td-drag-over")},D=function(){this.classList.remove("td-drag-over")},k=function(T){if(T.stopPropagation(),!d||this===d)return!1;this.classList.remove("td-drag-over");var he=Array.from(o.children),oe=he.indexOf(d),ke=he.indexOf(this);return oe<ke?o.insertBefore(d,this.nextSibling):o.insertBefore(d,this),!1};return m.forEach(T=>{T.addEventListener("dragstart",E),T.addEventListener("dragend",g),T.addEventListener("dragover",f),T.addEventListener("dragenter",F),T.addEventListener("dragleave",D),T.addEventListener("drop",k)}),()=>{m.forEach(T=>{T.removeAttribute("draggable"),T.classList.remove("td-draggable-panel","td-dragging","td-drag-over"),T.removeEventListener("dragstart",E),T.removeEventListener("dragend",g),T.removeEventListener("dragover",f),T.removeEventListener("dragenter",F),T.removeEventListener("dragleave",D),T.removeEventListener("drop",k)})}},[S,At]);var Go=()=>{var o=Oo.current;if(o.length>1){o.pop();var d=o[o.length-1]||"HUB";u(d)}else u("HUB")},vo=()=>{u("HUB")},xo=()=>{if(S==="FOCUS"){var o=Ls.current||"HUB";u(o)}else u("FOCUS")},cn=()=>{var o="https://flowofit.app/magic/trainer-demo",d=()=>{try{Bt("magic_link.copied",{linkType:"trainer_demo"})}catch(m){}ta("Magic link copied","The magic link has been copied to your clipboard.")};navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(o).then(d).catch(()=>{ta("Magic link",o)}):ta("Magic link",o)},wa=()=>{try{Bt("billing.dunning.opened",{source:"payment_banner"})}catch(o){}ta("Dunning triage","This opens the billing recovery / dunning triage workspace.")},ho=(o,d={})=>{try{Bt("module.proxy.opened",{module:o})}catch(m){}try{if(o==="DunningFlow_DF_Entry"){if(typeof window.__fofOpenFinanceHub=="function"){window.__fofOpenFinanceHub("DUNNING",d);return}try{localStorage.setItem("fof.finance.hub.target.v1",JSON.stringify({page:"DUNNING",payload:d,ts:Date.now()}))}catch(m){}window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"FINANCE_HUB"}}));return}if(o==="DunningFlow_DF_Log_Offline_Modal"){var m={...d||{},openOfflineModal:!0};if(typeof window.__fofOpenFinanceHub=="function"){window.__fofOpenFinanceHub("OFFLINE-LEDGER",m);return}try{localStorage.setItem("fof.finance.hub.target.v1",JSON.stringify({page:"OFFLINE-LEDGER",payload:m,ts:Date.now()}))}catch(E){}window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"FINANCE_HUB"}}));return}}catch(m){}ta("Open module","This would open: "+o)},Xi=o=>{console.log("Consent logged mode:",o)},gs=()=>{if(Ge==="OK"||xi)return null;var o=Ge==="BLOCKED",d=o?"Account Blocked":"Payment Reminder",m=o?"Update payment to unlock tools.":"Your payment is in grace period. Please update details.",E=()=>{try{rs(!0)}catch(f){}try{localStorage.setItem("fof_pay_banner_dismissed","1")}catch(f){}};React.useEffect(()=>{var f=setTimeout(()=>{try{E()}catch(F){}},9e3);return()=>{try{clearTimeout(f)}catch(F){}}},[Ge]);var g=()=>{try{if(o)wa();else{ho("BusinessFinanceHub_BFH1");try{$e("OK")}catch(f){}}}catch(f){}E()};return React.createElement("div",{className:"fixed top-3 right-3 z-[90] w-[360px] max-w-[92vw]"},React.createElement("div",{className:"rounded-xl border shadow-xl backdrop-blur px-4 py-3 "+(o?"border-red-500/40 bg-red-950/70":"border-amber-400/30 bg-zinc-950/70")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 h-9 w-9 rounded-lg flex items-center justify-center "+(o?"bg-red-500/15":"bg-amber-400/15")},React.createElement(_,{name:o?"Slash":"AlertTriangle",size:18,className:o?"text-red-300":"text-amber-300"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[12px] font-mono uppercase tracking-[0.28em] text-white/60"},"Dunning"),React.createElement("div",{className:"text-[14px] font-semibold text-white leading-snug"},d),React.createElement("div",{className:"text-[12px] text-white/70 mt-0.5 leading-snug"},m),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:g,className:"px-3 py-1.5 rounded-lg text-[12px] font-semibold "+(o?"bg-red-500/20 hover:bg-red-500/30 text-red-50 border border-red-500/30":"bg-amber-400/20 hover:bg-amber-400/30 text-amber-50 border border-amber-400/30")},"Update"),React.createElement("button",{type:"button",onClick:E,className:"px-3 py-1.5 rounded-lg text-[12px] font-semibold bg-white/5 hover:bg-white/10 text-white/80 border border-white/10"},"Later"))),React.createElement("button",{type:"button",onClick:E,className:"p-1.5 rounded-lg hover:bg-white/10 text-white/70",title:"Dismiss"},React.createElement(_,{name:"X",size:16})))))},Do=()=>React.createElement("div",{className:"px-3 md:px-5 py-1 border-b border-titanium-800 bg-titanium-950/40 backdrop-blur shrink-0"},React.createElement("div",{className:"flex items-center gap-2"},xa&&React.createElement("button",{type:"button",onClick:()=>Ua(!0),className:"p-1.5 rounded-sm bg-titanium-900/60 border border-titanium-800 hover:border-yellow-400 text-zinc-200 shrink-0",title:"Menu"},React.createElement(_,{name:"Menu",size:18})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white leading-tight truncate"},ci(S==="CLIENT_DETAIL"||S==="CLIENT_ACTION_MODE"?"Client":S==="PLAN_HOME"?"Plans":S==="CALENDAR"?"Calendar":S==="INBOX"?"Messages":S==="DAILY_HUB"?"Triage Hub":S==="CLIENT_LIST"?"Clients":S==="DASHBOARD_MODE"?"Dashboard":S==="HUB"||S==="MAIN_HUB"?"Hub":S==="ENGAGEMENT_OS"?"Engagement OS":"Workspace"))),React.createElement("div",{className:"flex-1"}),React.createElement("div",{className:"flex items-center gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:()=>ta("Search","Global search (clients, plans, sessions) \u2013 demo placeholder."),className:"p-1.5 rounded-sm bg-titanium-900/60 border border-titanium-800 hover:border-titanium-600 text-zinc-200",title:"Search"},React.createElement(_,{name:"Search",size:16})),React.createElement("button",{type:"button",onClick:()=>u("ADD_CLIENT"),className:"px-3 py-1.5 rounded-sm bg-titanium-900/60 border border-titanium-800 hover:border-yellow-400 text-white text-[11px] font-bold uppercase tracking-wide inline-flex items-center gap-2",title:"Add Client"},React.createElement(_,{name:"UserPlus",size:16,className:"text-gold-500"}),React.createElement("span",{className:"hidden md:inline"},"Add")),React.createElement("button",{type:"button",onClick:()=>u("CALENDAR"),className:"px-3 py-1.5 rounded-sm bg-titanium-900/60 border border-titanium-800 hover:border-yellow-400 text-white text-[11px] font-bold uppercase tracking-wide inline-flex items-center gap-2",title:"Book Session"},React.createElement(_,{name:"Plus",size:16,className:"text-gold-500"}),React.createElement("span",{className:"hidden md:inline"},"Book")),React.createElement("button",{type:"button",onClick:()=>ta("Account","Account / notifications / profile \u2013 demo placeholder."),className:"p-1.5 rounded-sm bg-titanium-900/60 border border-titanium-800 hover:border-titanium-600 text-zinc-200",title:"Account"},React.createElement(_,{name:"User",size:16}))))),ir=()=>{if(!Fi)return null;var o={ON_PLATFORM:"On-Platform Invite Consent",MANUAL:"Manual Data Entry Consent",OFF_PLATFORM:"Off-Platform Magic Link Consent"},d={ON_PLATFORM:"I confirm I have the client's consent to send app invite and store their health data in FlowOFIT.",MANUAL:"I confirm I have this client's permission to manually log their private health data in FlowOFIT.",OFF_PLATFORM:"I confirm I have consent to send a magic link invite to this client using their email or phone."},m=()=>{Xi(mo||Fi),mo==="MANUAL"?(alert("Consent logged (DataPrivacyGDPR_DP_Log). Open Manually_Log_Data."),u("MANUAL_LOG")):mo==="ON_PLATFORM"?alert("Consent logged (DataPrivacyGDPR_DP_Log). Open TD_Invite (invite form)."):mo==="OFF_PLATFORM"&&(alert("Consent logged (DataPrivacyGDPR_DP_Log). Sending Magic Link."),Ia(!0)),ws(null),fs(null)};return React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/70 flex items-center justify-center z-50"},React.createElement("div",{className:"bg-titanium-900 border border-gold-600 rounded-sm p-6 w-full max-w-md"},React.createElement("h3",{className:"text-white font-bold text-sm uppercase mb-3"},o[mo||Fi]||"Data Privacy / Consent"),React.createElement("p",{className:"text-xs text-zinc-300 mb-4"},d[mo||Fi]),React.createElement("p",{className:"text-[9px] text-zinc-500 mb-4"},"Flow: ",mo==="MANUAL"?"TD_Manual_Consent_NEW \u2192 DataPrivacyGDPR_DP_Log \u2192 Manually_Log_Data":mo==="OFF_PLATFORM"?"TD_Invite_Off_Platform_Consent_NEW \u2192 DataPrivacyGDPR_DP_Log \u2192 TD_Send_Magic_Link \u2192 TD_Magic_Link_Sent":"TD_Invite_Consent_NEW \u2192 DataPrivacyGDPR_DP_Log \u2192 TD_Invite"),React.createElement("div",{className:"flex justify-end gap-2 mt-4"},React.createElement("button",{onClick:()=>{ws(null),fs(null)},className:"px-3 py-2 text-[11px] uppercase text-zinc-400 bg-titanium-950 border border-titanium-700 rounded-sm hover:text-white"},"Cancel"),React.createElement("button",{onClick:m,className:"px-3 py-2 text-[11px] uppercase text-black bg-yellow-400 rounded-sm font-bold"},"I Confirm"))))},Dr=()=>{if(!$o)return null;var o=()=>{Xn("DONE"),setTimeout(()=>{Xn(null),Vo(!1)},800)};return React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/70 flex items-center justify-center z-50"},React.createElement("div",{className:"bg-titanium-900 border border-titanium-700 rounded-sm p-6 w-full max-w-lg space-y-4"},React.createElement("h3",{className:"text-sm font-bold text-white uppercase tracking-widest border-b border-titanium-700 pb-2"},"Manage Client Files"),React.createElement("p",{className:"text-[11px] text-zinc-400"},"Attach and scan client documents as per TD_Files_Upload, TD_Files_Scan_NEW, TD_Files_Done."),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("button",{onClick:()=>{Xn("UPLOAD"),alert("TD_Files_Upload: select PDF/Image \u2013 preview stub."),o()},className:"p-4 bg-titanium-950 border border-titanium-700 rounded-sm text-left text-xs text-zinc-300 hover:border-yellow-400"},React.createElement(_,{name:"Upload",size:16,className:"mb-2"}),React.createElement("div",{className:"font-bold text-white text-sm"},"Upload Document"),React.createElement("div",{className:"text-[9px] text-zinc-500"},"TD_Files_Upload \u2192 TD_Files_Done")),React.createElement("button",{onClick:()=>{Xn("SCAN"),alert("TD_Files_Scan_NEW: AI-OCR scanning \u2013 paid_feature_scanner stub."),o()},className:"p-4 bg-titanium-950 border border-titanium-700 rounded-sm text-left text-xs text-zinc-300 hover:border-rose-500"},React.createElement(_,{name:"Scan",size:16,className:"mb-2"}),React.createElement("div",{className:"font-bold text-white text-sm"},"Scan Document (AI-OCR)"),React.createElement("div",{className:"text-[9px] text-zinc-500"},"TD_Files_Scan_NEW \u2192 TD_Files_Done"))),xn==="DONE"&&React.createElement("div",{className:"text-[11px] text-emerald-400 font-mono"},"TD_Files_Done \u2013 document attached to client profile. Returning to Action_Menu\u2026"),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{onClick:()=>{Xn(null),Vo(!1)},className:"px-3 py-2 text-[11px] uppercase text-zinc-400 bg-titanium-950 border border-titanium-700 rounded-sm hover:text-white"},"Close"))))},rr=()=>Fo?React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/70 flex items-center justify-center z-50"},React.createElement("div",{className:"bg-titanium-900 border border-titanium-700 rounded-sm p-6 w-full max-w-sm"},React.createElement("h3",{className:"text-sm font-bold text-white uppercase mb-4"},"Change Client Status"),React.createElement("select",{className:"w-full bg-titanium-950 border border-titanium-600 text-xs text-zinc-200 rounded-sm p-2 mb-4",value:Cn,onChange:o=>zs(o.target.value)},React.createElement("option",{value:"ACTIVE"},"Active"),React.createElement("option",{value:"PAUSED"},"Paused"),React.createElement("option",{value:"OFFBOARD"},"Offboard / Ended"),React.createElement("option",{value:"AT_RISK"},"At Risk")),React.createElement("div",{className:"flex justify-end gap-2"},React.createElement("button",{onClick:()=>Ss(!1),className:"px-3 py-2 text-[11px] uppercase text-zinc-400 bg-titanium-950 border border-titanium-700 rounded-sm hover:text-white"},"Cancel"),React.createElement("button",{onClick:()=>{alert("Status set to "+Cn+"."),Ss(!1)},className:"px-3 py-2 text-[11px] uppercase bg-yellow-400 text-black rounded-sm font-bold"},"Save")))):null,mr=()=>So?React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/70 flex items-center justify-center z-50"},React.createElement("div",{className:"bg-titanium-900 border border-titanium-700 rounded-sm p-6 w-full max-w-lg"},React.createElement("h3",{className:"text-sm font-bold text-white uppercase mb-3"},"Annotation Tools (TD3_Annotate)"),React.createElement("p",{className:"text-[11px] text-zinc-400 mb-2"},"Add overlays / comments on charts, readiness metrics, and plan timelines."),React.createElement("textarea",{className:"w-full h-40 bg-titanium-950 border border-titanium-600 text-xs text-zinc-200 rounded-sm p-3 mb-4",placeholder:"Type notes, tags, or annotations\u2026"}),React.createElement("div",{className:"flex justify-end gap-2"},React.createElement("button",{onClick:()=>mn(!1),className:"px-3 py-2 text-[11px] uppercase text-zinc-400 bg-titanium-950 border border-titanium-700 rounded-sm hover:text-white"},"Close"),React.createElement("button",{onClick:()=>{alert("Annotation saved (TD3_Annotate)."),mn(!1)},className:"px-3 py-2 text-[11px] uppercase bg-yellow-400 text-black rounded-sm font-bold"},"Save")))):null,kr=[{id:1,time:"07:00",label:"1:1 PT \u2022 Sarah Johnson",type:"Personal Training",location:"Flow Studio A",status:"Confirmed"},{id:2,time:"09:30",label:"Online Check-in \u2022 Mark L",type:"Video Check-in",location:"Zoom",status:"Confirmed"},{id:3,time:"12:00",label:"Group Class \u2022 Lunch Burn",type:"Group Session",location:"Studio B",status:"Almost Full"},{id:4,time:"16:30",label:"Assessment \u2022 Emily R",type:"Movement Screen",location:"Clinic Room",status:"New"},{id:5,time:"19:00",label:"Hybrid Client \u2022 Remote Program Review",type:"Programming",location:"App Only",status:"Remote"}],hn={checkinsDue:3,programUpdates:1,paymentsDue:2},Un=({icon:o,title:d,subtitle:m,cta:E="Open",onClick:g})=>React.createElement("button",{type:"button",onClick:f=>{f.stopPropagation(),g&&g()},className:"group w-full rounded-2xl border border-white/10 bg-white/5 p-4 text-left transition hover:bg-white/10 active:scale-[0.99]"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/12 bg-black/25 flex items-center justify-center"},React.createElement(_,{name:o,size:18,className:"text-white/80"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"truncate text-sm font-semibold text-white"},d),m?React.createElement("div",{className:"mt-0.5 truncate text-xs text-white/60"},m):null),React.createElement("div",{className:"text-xs text-white/60 group-hover:text-white/85"},E," \u2192"))),Ln=({density:o="COMFORTABLE",hubFocus:d="TODAY",smartCopy:m=!0,attentionTotal:E,dueCount:g,sessionsToday:f,unreadMessages:F,alerts:D,dueClients:k=[],setView:T,setSelectedClient:he})=>{var[oe,ke]=React.useState(""),[Re,Me]=React.useState(!1),Et=React.useMemo(()=>[{key:"/triage",label:"Open AI Triage",hint:"Daily Workflow queue",run:()=>T("DAILY_HUB")},{key:"/calendar",label:"Open Calendar",hint:"Schedule & bookings",run:()=>T("CALENDAR")},{key:"/inbox",label:"Open Inbox",hint:"Reply to clients",run:()=>T("INBOX")},{key:"/clients",label:"Open Client Management",hint:"All clients",run:()=>T("CLIENT_LIST")},{key:"/program",label:"Generate Program",hint:"AI program generator",run:()=>T("PLAN_AI_GENERATOR")}],[T]),ya=React.useMemo(()=>{var I=String(oe||"").trim().toLowerCase();return I?Et.filter(te=>(te.key+" "+te.label+" "+te.hint).toLowerCase().includes(I)):Et},[oe,Et]),Ct=()=>{try{var I=String(oe||"").trim();if(!I){T("DAILY_HUB");return}var te=I.toLowerCase(),Ce=Et.find(ye=>te===ye.key||te.startsWith(ye.key+" "))||ya[0];if(Ce&&typeof Ce.run=="function"){Ce.run();return}var C=te.replace(/^\//,"").trim();if(C&&(k!=null&&k.length)){var ye=k.find(le=>String((le==null?void 0:le.name)||"").toLowerCase().includes(C));if(ye){try{he==null||he(ye)}catch(le){}T("CLIENT_ACTION_MODE");return}}T("DAILY_HUB")}catch(I){try{T("DAILY_HUB")}catch(te){}}},Jt=I=>{var te=Number(I==null?void 0:I.readiness);return Number.isFinite(te)?te<55?{t:"HIGH",cls:"border-red-400/20 bg-red-500/10 text-red-100"}:te<70?{t:"MID",cls:"border-amber-400/20 bg-amber-500/10 text-amber-100"}:{t:"LOW",cls:"border-emerald-400/20 bg-emerald-500/10 text-emerald-100"}:{t:"MED",cls:"border-amber-400/20 bg-amber-500/10 text-amber-100"}},Ye=vs(ts,"COMFORTABLE")||"COMFORTABLE",Tt=String(Ye||"").toUpperCase()==="COMPACT",_t=React.useMemo(()=>{if(!m)return"What should I do next?";var I=String(d||"TODAY").toUpperCase();return I==="RISK"?"What needs attention now?":I==="WEEK"?"What should I plan this week?":"What should I do next?"},[m,d]),P=React.useMemo(()=>{if(!m)return"{subcopy}";var I=String(d||"TODAY").toUpperCase();return I==="RISK"?"Ranked by risk. Triage first, then message or assign from the feed.":I==="WEEK"?"Scan the week, resolve blockers, and assign programs without leaving the Hub.":"Ranked priorities + one-tap commands. Triage, message, or assign in seconds."},[m,d]);return React.createElement("div",{className:"rounded-3xl border border-[rgba(77,233,255,0.28)] bg-[rgba(77,233,255,0.06)] overflow-hidden"},React.createElement("div",{className:(Tt?"p-3 md:p-4":"p-4 md:p-5")+" border-b border-white/10"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-10 h-10 rounded-2xl bg-[rgba(77,233,255,0.14)] border border-[rgba(77,233,255,0.25)] flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-cyan-200"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/60 font-bold"},"AI TRIAGE COMMAND"),React.createElement("div",{className:"text-white font-extrabold tracking-tight "+(Tt?"text-[15px]":"text-[16px]")},_t))),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},"Ranked priorities + one-tap commands. Hub stays radar-only; execution happens inside Daily Workflow.")),React.createElement("div",{className:"shrink-0 text-right"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/50 font-bold"},"Attention"),React.createElement("div",{className:"mt-1 text-5xl font-mono font-black text-white leading-none"},E),React.createElement("button",{type:"button",onClick:()=>T("DAILY_HUB"),className:"mt-2 inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-white/5 border border-white/12 hover:bg-white/10 text-[11px] text-white/85"},"Open triage ",React.createElement(_,{name:"ChevronRight",size:14})))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},g," client signals"),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},f," sessions today"),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},F," messages"),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},D," system"))),React.createElement("div",{className:(Tt?"p-3 md:p-4":"p-4 md:p-5")+" grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-7"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Command"),React.createElement("div",{className:"mt-2 relative"},React.createElement("div",{className:"flex items-center gap-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/30 px-3 py-2.5"},React.createElement(_,{name:"TerminalSquare",size:16,className:"text-white/60"}),React.createElement("input",{value:oe,onChange:I=>{ke(I.target.value),Me(!0)},onFocus:()=>Me(!0),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),Me(!1),Ct()),I.key==="Escape"&&Me(!1)},placeholder:"Type /triage, /calendar, /inbox, /clients, /program\u2026",className:"flex-1 bg-transparent outline-none text-[12px] text-white placeholder:text-white/35"}),React.createElement("button",{type:"button",onMouseDown:I=>{try{I.preventDefault()}catch(te){}},onClick:()=>{Me(!1),Ct()},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/80"},"Run")),Re&&React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-[#05080f] shadow-2xl overflow-hidden"},React.createElement("div",{className:"px-3 py-2 text-[10px] font-mono uppercase tracking-widest text-white/40 border-b border-white/10"},"Suggestions"),React.createElement("div",{className:"max-h-[220px] overflow-y-auto"},ya.slice(0,8).map(I=>React.createElement("button",{key:I.key,type:"button",onMouseDown:te=>{try{te.preventDefault()}catch(Ce){}},onClick:()=>{try{ke(I.key)}catch(te){}Me(!1);try{I.run()}catch(te){}},className:"w-full flex items-center justify-between gap-3 px-3 py-3 hover:bg-white/6 text-left"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},I.key," \u2014 ",I.label),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},I.hint)),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"}))),ya.length===0?React.createElement("div",{className:"px-3 py-3 text-[12px] text-white/50"},"No matches."):null),React.createElement("div",{className:"px-3 py-2 border-t border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[10px] text-white/40"},"Enter to run \u2022 Esc to close"),React.createElement("button",{type:"button",onMouseDown:I=>{try{I.preventDefault()}catch(te){}},onClick:()=>Me(!1),className:"px-2 py-1 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/60"},"Close")))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},[{label:"Open triage",run:()=>T("DAILY_HUB"),tone:"bg-white/5 hover:bg-white/10 border-white/12"},{label:"Calendar",run:()=>T("CALENDAR"),tone:"bg-white/5 hover:bg-white/10 border-white/12"},{label:"Inbox",run:()=>T("INBOX"),tone:"bg-white/5 hover:bg-white/10 border-white/12"},{label:"Client list",run:()=>T("CLIENT_LIST"),tone:"bg-white/5 hover:bg-white/10 border-white/12"}].map(I=>React.createElement("button",{key:I.label,type:"button",onClick:I.run,className:`px-3 py-2 rounded-2xl border ${I.tone} text-[10px] font-mono uppercase tracking-widest text-white/80`},I.label)))),React.createElement("div",{className:"lg:col-span-5"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Top signals"),React.createElement("button",{type:"button",onClick:()=>T("DAILY_HUB"),className:"text-[10px] font-mono uppercase tracking-widest text-white/55 hover:text-white"},"View all \u2192")),React.createElement("div",{className:"mt-2 space-y-2"},(Array.isArray(k)?k:[]).slice(0,3).map(I=>{var te=Jt(I);return React.createElement("button",{key:(I==null?void 0:I.id)||(I==null?void 0:I.name),type:"button",onClick:()=>{try{he==null||he(I)}catch(Ce){}try{T("CLIENT_ACTION_MODE")}catch(Ce){}},className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},(I==null?void 0:I.name)||"Client"),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},((I==null?void 0:I.tags)||[]).slice(0,2).join(" \u2022 ")||(I==null?void 0:I.program)||(I==null?void 0:I.plan)||"\u2014")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:`px-2 py-1 rounded-full border text-[10px] font-mono uppercase tracking-widest ${te.cls}`},te.t),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"})))}),!k||k.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"No active client signals. Open Daily Workflow to review upcoming check-ins and sessions."):null))))},Pr=({density:o="COMFORTABLE",personal:d={highlights:!0,smartCopy:!0,smartOrdering:!0},clientRecords:m,setView:E,setSelectedClient:g,openAssign:f})=>{var C,ye,le,O,qe,Pt,Za,Ma,$a;var F=typeof window!="undefined"?(C=window.__FOF_TDEP)==null?void 0:C.TRIAGE:null,D=String(o||"").toUpperCase()==="COMPACT",[k,T]=React.useState(0);React.useEffect(()=>{var Yt=setInterval(()=>T(it=>(it+1)%1e6),3e4);return()=>clearInterval(Yt)},[]);var[he,oe]=React.useState({urgent:!0,attention:!0,ontrack:!1}),[ke,Re]=React.useState({open:!1,client:null,signal:null}),Me=Date.now(),Et=Yt=>{if(!Yt)return null;var it=new Date(Yt).getTime()-Me;if(!Number.isFinite(it))return null;if(it<=0)return"0m";var Ut=Math.ceil(it/6e4);if(Ut<60)return`${Ut}m`;var ce=Math.floor(Ut/60),Vt=Ut%60;return`${ce}h ${Vt}m`},ya=Yt=>(Array.isArray(m)?m:[]).find(Ut=>String(Ut.id)===String(Yt))||null,Ct=React.useMemo(()=>{try{return F!=null&&F.getQueue?F.getQueue({includeSnoozed:!0,includeResolved:!1})||[]:[]}catch(Yt){return[]}},[F,k]),Jt=React.useMemo(()=>{var Yt=(Ct||[]).map(ce=>{var Vt=String((ce==null?void 0:ce.status)||"OPEN").toUpperCase(),Fe=ya(ce==null?void 0:ce.clientId),v=typeof(ce==null?void 0:ce.score)=="number"?ce.score:typeof(ce==null?void 0:ce.severityScore)=="number"?ce.severityScore:null,Te=String((ce==null?void 0:ce.severity)||(ce==null?void 0:ce.level)||"").toUpperCase(),Se=Te==="HIGH"||Te==="URGENT"||typeof v=="number"&&v>=80||String((ce==null?void 0:ce.urgency)||"").toUpperCase()==="HIGH",yt=Vt==="SNOOZED",St=yt?"SNOOZED":Se?"OVERDUE":Vt||"OPEN",za=(ce==null?void 0:ce.reason)||(ce==null?void 0:ce.summary)||(ce==null?void 0:ce.title)||(ce==null?void 0:ce.label)||"Needs attention",Xe=(ce==null?void 0:ce.snoozedUntil)||(ce==null?void 0:ce.snoozeUntil)||(ce==null?void 0:ce.snoozed_until)||(ce==null?void 0:ce.snooze_until)||null,dt=yt?Et(Xe):null;return{id:ce==null?void 0:ce.id,clientId:ce==null?void 0:ce.clientId,client:Fe,signal:ce,group:Se?"urgent":"attention",status:Vt,chip:St,reason:za,untilISO:Xe,countdown:dt}});d&&d.smartOrdering!==!1&&Yt.sort((ce,Vt)=>{var Fe=String(ce.status||"").toUpperCase(),v=String(Vt.status||"").toUpperCase(),Te=Fe==="SNOOZED"?2:1,Se=v==="SNOOZED"?2:1;if(Te!==Se)return Te-Se;var yt=ce.group==="urgent"?0:1,St=Vt.group==="urgent"?0:1;if(yt!==St)return yt-St;var za=ce.untilISO?new Date(ce.untilISO).getTime():0,Xe=Vt.untilISO?new Date(Vt.untilISO).getTime():0;return za&&Xe?za-Xe:0});var it=new Set(Yt.map(ce=>String(ce.clientId))),Ut=(Array.isArray(m)?m:[]).filter(ce=>(ce.tags||[]).includes("Linked")).filter(ce=>!it.has(String(ce.id))).slice(0,12).map(ce=>({id:`ontrack_${ce.id}`,clientId:ce.id,client:ce,signal:null,group:"ontrack",status:"ON_TRACK",chip:"ON TRACK",reason:"No issues flagged",untilISO:null,countdown:null}));return{urgent:Yt.filter(ce=>ce.group==="urgent"),attention:Yt.filter(ce=>ce.group==="attention"),ontrack:Ut}},[Ct,m,k]),Ye=Yt=>{var it=String(Yt||"").toUpperCase();return it.includes("SNOOZ")?"border-amber-400/35 bg-amber-500/10 text-amber-200":it.includes("OVER")||it.includes("URGENT")?"border-red-400/35 bg-red-500/10 text-red-200":it.includes("RISK")?"border-orange-400/35 bg-orange-500/10 text-orange-200":it.includes("TRACK")?"border-emerald-400/35 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/75"},Tt=Yt=>{try{if(!(Yt!=null&&Yt.client))return;g(Yt.client);try{localStorage.setItem("fof_inbox_open_thread",String(Yt.client.id))}catch(it){}E("INBOX")}catch(it){}},_t=Yt=>{try{if(!(Yt!=null&&Yt.client))return;f==null||f(Yt.client)}catch(it){}},P=(Yt,it=60)=>{try{if(!(F!=null&&F.updateSignal)||!(Yt!=null&&Yt.id))return;var Ut=new Date(Date.now()+it*6e4).toISOString();F.updateSignal(Yt.id,{status:"SNOOZED",snoozedUntil:Ut},"SNOOZE"),T(ce=>(ce+1)%1e6)}catch(Ut){}},I=Yt=>{try{if(!(F!=null&&F.updateSignal)||!(Yt!=null&&Yt.id))return;F.updateSignal(Yt.id,{status:"RESOLVED"},"RESOLVE"),T(it=>(it+1)%1e6)}catch(it){}},te=({row:Yt})=>{var it=Yt.client||{},Ut=it.name||it.fullName||it.displayName||`Client ${Yt.clientId||""}`,ce=()=>Re({open:!0,client:Yt.client||null,signal:Yt.signal||null});return React.createElement("div",{className:"group flex items-center gap-3 rounded-2xl border bg-black/20 hover:bg-black/30 transition-colors "+(D?"px-3 py-2":"px-3 py-2.5")+" "+(d&&d.highlights!==!1&&String(Yt.chip||"").toUpperCase().includes("OVER")?"border-red-400/25":d&&d.highlights!==!1&&String(Yt.chip||"").toUpperCase().includes("SNOOZ")?"border-amber-400/25":"border-white/10")},React.createElement("button",{type:"button",onClick:ce,className:"flex-1 min-w-0 text-left"},React.createElement("div",{className:"flex items-center gap-2 min-w-0"},React.createElement("div",{className:"w-8 h-8 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement("span",{className:"text-[11px] font-mono text-white/70"},(Ut||"C").slice(0,1).toUpperCase())),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},Ut),React.createElement("div",{className:"shrink-0 inline-flex items-center gap-1 px-2 py-0.5 rounded-xl border text-[10px] font-mono "+Ye(Yt.chip)},React.createElement("span",null,Yt.chip),Yt.countdown&&React.createElement("span",{className:"text-white/65"},"\xB7 ",Yt.countdown))),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/65 truncate"},Yt.reason)))),React.createElement("div",{className:"shrink-0 flex items-center gap-1"},React.createElement("button",{type:"button",onClick:()=>Tt(Yt),className:(D?"w-8 h-8":"w-9 h-9")+" rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center",title:"Message"},React.createElement(_,{name:"MessageCircle",size:16,className:"text-white/80"})),React.createElement("button",{type:"button",onClick:()=>_t(Yt),className:(D?"w-8 h-8":"w-9 h-9")+" rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center",title:"Assign"},React.createElement(_,{name:"ClipboardList",size:16,className:"text-white/80"})),React.createElement("button",{type:"button",onClick:()=>P(Yt,60),className:(D?"w-8 h-8":"w-9 h-9")+" rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center",title:"Snooze 1h"},React.createElement(_,{name:"Clock",size:16,className:"text-white/80"})),React.createElement("button",{type:"button",onClick:()=>I(Yt),className:(D?"w-8 h-8":"w-9 h-9")+" rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center",title:"Done"},React.createElement(_,{name:"Check",size:16,className:"text-white/80"}))))},Ce=({keyName:Yt,title:it,subtitle:Ut,rows:ce,expanded:Vt})=>React.createElement("div",{"data-feed-group":Yt==="urgent"?"URGENT":Yt==="attention"?"ATTENTION":Yt==="track"?"ONTRACK":null,className:"rounded-3xl border border-white/10 bg-black/25"},React.createElement("button",{type:"button",onClick:()=>oe(v=>({...v,[Yt]:!v[Yt]})),className:(D?"w-full px-3 py-2.5":"w-full px-4 py-3")+" flex items-center justify-between"},React.createElement("div",{className:"text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-mono"},it),React.createElement("div",{className:"px-2 py-0.5 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono text-white/70"},ce.length)),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Ut)),React.createElement(_,{name:Vt?"ChevronUp":"ChevronDown",size:18,className:"text-white/45"})),Vt&&React.createElement("div",{className:"px-3 pb-3 space-y-2"},ce.length?ce.map(v=>React.createElement(te,{key:v.id,row:v})):React.createElement("div",{className:"px-3 py-5 text-[12px] text-white/55"},"Nothing here right now.")));return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-end justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-mono"},"PRIORITY ACTION FEED"),React.createElement("div",{className:"mt-1 text-white font-extrabold tracking-tight text-[16px] md:text-[18px]"},"Do 3 actions without leaving the Hub")),React.createElement("button",{type:"button",onClick:()=>E("DAILY_HUB"),className:"shrink-0 inline-flex items-center gap-2 px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white"},React.createElement(_,{name:"Sparkles",size:16,className:"text-cyan-200"}),"Open Daily Workflow")),React.createElement(Ce,{keyName:"urgent",title:"\u{1F534} Urgent",subtitle:"Expanded. Handle these first.",rows:Jt.urgent,expanded:he.urgent}),React.createElement(Ce,{keyName:"attention",title:"\u{1F7E0} Needs attention",subtitle:"Expanded. Keep moving the queue.",rows:Jt.attention,expanded:he.attention}),React.createElement(Ce,{keyName:"ontrack",title:"\u{1F7E2} On track",subtitle:"Collapsed. Clients with no current flags.",rows:Jt.ontrack,expanded:he.ontrack}),ke.open&&React.createElement("div",{className:"fixed inset-0 z-[80]"},React.createElement("button",{type:"button",className:"absolute inset-0 bg-black/65",onClick:()=>Re({open:!1,client:null,signal:null})}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0"},React.createElement("div",{className:"mx-auto max-w-2xl rounded-t-3xl border border-white/10 bg-[#070a12] shadow-2xl"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-start justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold tracking-tight text-[16px] truncate"},((ye=ke.client)==null?void 0:ye.name)||((le=ke.client)==null?void 0:le.fullName)||"Client"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},((O=ke.signal)==null?void 0:O.reason)||((qe=ke.signal)==null?void 0:qe.summary)||"Quick context")),React.createElement("button",{className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center",onClick:()=>Re({open:!1,client:null,signal:null}),type:"button"},React.createElement(_,{name:"X",size:18,className:"text-white/75"}))),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/50 font-mono"},"Last workout"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-bold"},((Pt=ke.client)==null?void 0:Pt.lastWorkout)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/50 font-mono"},"Last check-in"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-bold"},((Za=ke.client)==null?void 0:Za.lastCheckin)||((Ma=ke.client)==null?void 0:Ma.lastCheckIn)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/50 font-mono"},"Quick note"),React.createElement("div",{className:"mt-1 text-[13px] text-white font-bold truncate"},(($a=ke.client)==null?void 0:$a.note)||"\u2014"))),React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{var Yt;Re({open:!1,client:null,signal:null}),Tt({client:ke.client,id:(Yt=ke.signal)==null?void 0:Yt.id,signal:ke.signal})},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white inline-flex items-center gap-2"},React.createElement(_,{name:"MessageCircle",size:16,className:"text-white/80"})," Message"),React.createElement("button",{type:"button",onClick:()=>{Re({open:!1,client:null,signal:null}),f==null||f(ke.client)},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white inline-flex items-center gap-2"},React.createElement(_,{name:"ClipboardList",size:16,className:"text-white/80"})," Assign"),React.createElement("button",{type:"button",onClick:()=>{g(ke.client),E("CLIENT_ACTION_MODE"),Re({open:!1,client:null,signal:null})},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white inline-flex items-center gap-2"},React.createElement(_,{name:"User",size:16,className:"text-white/80"})," View profile"),React.createElement("button",{type:"button",onClick:()=>{g(ke.client),E("LOG"),Re({open:!1,client:null,signal:null})},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white inline-flex items-center gap-2"},React.createElement(_,{name:"Dumbbell",size:16,className:"text-white/80"})," Log")))))))},Cl=({density:o="COMFORTABLE",bookings:d=[],deadlines:m=null,onOpenSession:E,onOpenCalendar:g,onAction:f})=>{var[F,D]=React.useState("NEXT"),k=new Date,T=k.getHours()*60+k.getMinutes(),he=I=>{try{var Ce=String(I||"").trim().match(/^(\d{1,2}):(\d{2})$/);if(!Ce)return null;var C=Math.max(0,Math.min(23,parseInt(Ce[1],10))),ye=Math.max(0,Math.min(59,parseInt(Ce[2],10)));return C*60+ye}catch(te){return null}},oe=React.useMemo(()=>[...d||[]].map(I=>({...I,_mins:he(I.time)})).filter(I=>I._mins!==null).sort((I,te)=>I._mins-te._mins),[d]),ke=React.useMemo(()=>oe.filter(I=>I._mins>=T-20),[oe,T]),Re=React.useMemo(()=>ke.find(I=>I._mins>=T)||ke[0]||null,[ke,T]),Me=React.useMemo(()=>oe.filter(I=>I._mins>=T).length,[oe,T]),Et=React.useMemo(()=>oe.find(te=>Math.abs(te._mins-T)<=15)||null,[oe,T]),ya=React.useMemo(()=>oe.filter(te=>te._mins>=T).slice(0,3),[oe,T]),Ct=React.useMemo(()=>{var I=oe.filter(le=>le._mins>=T).slice(0,6);if(I.length===0)return null;var te=21*60,Ce=[{start:T,end:I[0]._mins}];for(var le=0;le<I.length-1;le++)Ce.push({start:I[le]._mins+60,end:I[le+1]._mins});Ce.push({start:I[I.length-1]._mins+60,end:te});var C=Ce.find(le=>le.end-le.start>=60);if(!C)return null;var ye=le=>{var O=Math.floor(le/60),qe=le%60,Pt=Za=>String(Za).padStart(2,"0");return`${Pt(O)}:${Pt(qe)}`};return{...C,label:`${ye(C.start)}\u2013${ye(C.start+60)}`}},[oe,T]),Jt=m||{checkinsDue:0,programUpdates:0,paymentsDue:0},Ye=!!(Jt.checkinsDue||Jt.programUpdates||Jt.paymentsDue),Tt=I=>`px-2.5 py-1 rounded-full border text-[11px] ${I?"border-white/15 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"}`,_t=(I,te="default")=>React.createElement("button",{key:I.id,onClick:()=>E==null?void 0:E(I),className:["shrink-0 rounded-full border px-3 py-1.5 text-[12px] inline-flex items-center gap-2",te==="highlight"?"border-emerald-400/25 bg-emerald-400/10 text-emerald-50 hover:bg-emerald-400/15":"border-white/10 bg-white/5 text-white/85 hover:bg-white/10"].join(" "),title:"Open session preview"},React.createElement("span",{className:"font-medium"},I.time),React.createElement("span",{className:"text-white/70"},I.title||"Session")),P=F==="NOW"?Et?[Et]:Re?[Re]:[]:F==="NEXT"?Re?[Re]:[]:ya;return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 "+(String(o||"").toUpperCase()==="COMPACT"?"p-2.5 md:p-3":"p-3 md:p-4")},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},"Today"),React.createElement("div",{className:"ml-1 flex items-center gap-1 rounded-full border border-white/10 bg-white/5 p-1"},React.createElement("button",{className:Tt(F==="NOW"),onClick:()=>D("NOW")},"Now"),React.createElement("button",{className:Tt(F==="NEXT"),onClick:()=>D("NEXT")},"Next"),React.createElement("button",{className:Tt(F==="LATER"),onClick:()=>D("LATER")},"Later")),React.createElement("div",{className:"hidden sm:flex items-center gap-2 ml-2 text-[12px] text-white/70"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement("span",{className:"h-1.5 w-1.5 rounded-full bg-white/40"}),"Remaining: ",React.createElement("span",{className:"text-white/90 font-semibold"},Me)),(Ct==null?void 0:Ct.label)&&React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-400/20 bg-emerald-400/10 px-2 py-0.5 text-emerald-50"},React.createElement("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-300/80"}),"Free slot ",Ct.label))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>g==null?void 0:g(),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-1.5 text-[12px] text-white inline-flex items-center gap-2",title:"Open Calendar"},React.createElement(_,{name:"Calendar",size:16,className:"text-white/80"}),"Open Calendar"),React.createElement("button",{onClick:()=>f==null?void 0:f("MESSAGE"),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-2.5 py-1.5 text-[12px] text-white/90 inline-flex items-center gap-2",title:"Quick message (stub)"},React.createElement(_,{name:"MessageCircle",size:16,className:"text-white/80"}),"Msg"),React.createElement("button",{onClick:()=>f==null?void 0:f("DONE"),className:"hidden md:inline-flex rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-2.5 py-1.5 text-[12px] text-white/90 items-center gap-2",title:"Mark next item done (stub)"},React.createElement(_,{name:"CheckCircle2",size:16,className:"text-white/80"}),"Done"))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar"},P.length===0?React.createElement("div",{className:"text-[12px] text-white/60"},"No upcoming sessions."):React.createElement(React.Fragment,null,P.map((I,te)=>_t(I,te===0&&F!=="LATER"?"highlight":"default")),F==="LATER"&&(Ct==null?void 0:Ct.label)&&React.createElement("span",{className:"shrink-0 rounded-full border border-emerald-400/20 bg-emerald-400/10 px-3 py-1.5 text-[12px] text-emerald-50"},"Free slot ",Ct.label)),Ye&&React.createElement("div",{className:"ml-2 flex items-center gap-2"},Jt.checkinsDue?React.createElement("button",{onClick:()=>f==null?void 0:f("CHECKINS"),className:"shrink-0 rounded-full border border-rose-400/20 bg-rose-400/10 px-3 py-1.5 text-[12px] text-rose-50"},Jt.checkinsDue," check-ins due"):null,Jt.programUpdates?React.createElement("button",{onClick:()=>f==null?void 0:f("PROGRAMS"),className:"shrink-0 rounded-full border border-amber-400/20 bg-amber-400/10 px-3 py-1.5 text-[12px] text-amber-50"},Jt.programUpdates," program updates"):null,Jt.paymentsDue?React.createElement("button",{onClick:()=>f==null?void 0:f("PAYMENTS"),className:"shrink-0 rounded-full border border-sky-400/20 bg-sky-400/10 px-3 py-1.5 text-[12px] text-sky-50"},Jt.paymentsDue," payments"):null)),React.createElement("div",{className:"hidden lg:flex items-center gap-2 shrink-0"},React.createElement("button",{onClick:()=>Re?E==null?void 0:E(Re):f==null?void 0:f("START_SESSION"),className:"rounded-full border border-emerald-400/20 bg-emerald-400/10 hover:bg-emerald-400/15 px-3 py-1.5 text-[12px] text-emerald-50 inline-flex items-center gap-2",title:"Start session (routes to session / stub)"},React.createElement(_,{name:"Play",size:16,className:"text-emerald-100/90"}),"Start"),React.createElement("button",{onClick:()=>f==null?void 0:f("ATTENDANCE"),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-1.5 text-[12px] text-white/90 inline-flex items-center gap-2",title:"Mark attendance (stub)"},React.createElement(_,{name:"UserCheck",size:16,className:"text-white/80"}),"Attendance"),React.createElement("button",{onClick:()=>f==null?void 0:f("NOTE"),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-1.5 text-[12px] text-white/90 inline-flex items-center gap-2",title:"Quick note (stub)"},React.createElement(_,{name:"StickyNote",size:16,className:"text-white/80"}),"Note"),React.createElement("button",{onClick:()=>f==null?void 0:f("RESCHEDULE"),className:"rounded-full border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-1.5 text-[12px] text-white/90 inline-flex items-center gap-2",title:"Reschedule (stub)"},React.createElement(_,{name:"Clock",size:16,className:"text-white/80"}),"Reschedule"))),React.createElement("div",{className:"mt-2 sm:hidden flex items-center gap-2 text-[12px] text-white/70"},React.createElement("span",null,"Remaining: ",React.createElement("span",{className:"text-white/90 font-semibold"},Me)),(Ct==null?void 0:Ct.label)&&React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-400/20 bg-emerald-400/10 px-2 py-0.5 text-emerald-50"},"Free slot ",Ct.label)))},ld=({open:o,session:d,onClose:m,onOpenCalendar:E})=>{if(!o)return null;var g=d||{};return React.createElement("div",{className:"fixed inset-0 z-[90]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:m}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 p-4"},React.createElement("div",{className:"max-w-2xl mx-auto rounded-3xl border border-white/12 bg-[#05080f] shadow-2xl overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-mono"},"Session preview"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[14px] truncate"},g.label||"Session"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},g.time,g.type?` \xB7 ${g.type}`:"",g.location?` \xB7 ${g.location}`:""),g.status&&React.createElement("div",{className:"mt-2 inline-flex px-2 py-0.5 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono text-white/70"},g.status)),React.createElement("button",{type:"button",onClick:m,className:"w-10 h-10 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center"},React.createElement(_,{name:"X",size:18,className:"text-white/70"}))),React.createElement("div",{className:"p-4 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/55"},"Summary only \u2014 open Calendar for full details."),React.createElement("button",{type:"button",onClick:E,className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 text-[11px] text-white/80"},"Open Calendar \u2192")))))};function dd({needsReply:o=[],checkinsToReview:d=[],onOpenInbox:m,onOpenMessage:E,onOpenCheckin:g}){var{density:f,isCompact:F}=$s(),D=({title:k,items:T,onTap:he})=>React.createElement("div",{className:"flex-1 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[13px] tracking-wide text-white/70 font-semibold"},k),React.createElement("div",{className:"text-[12px] text-white/35"},Math.min(T.length,3)," / ",T.length)),React.createElement("div",{className:"mt-3 space-y-2"},(T||[]).slice(0,3).map((oe,ke)=>React.createElement("button",{key:ke,onClick:()=>he(oe),className:"w-full text-left rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 flex items-center gap-3"},React.createElement("div",{className:"w-9 h-9 rounded-2xl border border-white/10 bg-black/35 flex items-center justify-center"},React.createElement(_,{name:"MessageCircle",size:16,className:"text-white/70"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[13px] text-white font-semibold truncate"},oe.client),React.createElement("div",{className:"text-[12px] text-white/55 truncate"},oe.preview)),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"}))),(!T||T.length===0)&&React.createElement("div",{className:"rounded-2xl border border-white/8 bg-black/15 px-3 py-2 text-[12px] text-white/45"},"Nothing here right now.")),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/35"},"Quick reply chips (stub)"),React.createElement("div",{className:"flex gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-xl border border-white/10 bg-black/20 text-[11px] text-white/55"},"\u{1F44D}"),React.createElement("span",{className:"px-2 py-1 rounded-xl border border-white/10 bg-black/20 text-[11px] text-white/55"},"On it"),React.createElement("span",{className:"px-2 py-1 rounded-xl border border-white/10 bg-black/20 text-[11px] text-white/55"},"Done"))));return React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 "+(String(f||"").toUpperCase()==="COMPACT"?"p-3":"p-4")},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"Inbox",size:18,className:"text-cyan-200"}),React.createElement("div",{className:"text-[14px] text-white font-semibold"},"Messages & Check-ins")),React.createElement("button",{onClick:m,className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 text-[12px] text-white/80"},"Open Inbox")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(D,{title:"Needs reply",items:o,onTap:E}),React.createElement(D,{title:"Check-ins to review",items:d,onTap:g})))}var Yr=({open:o,item:d,onClose:m,onOpenInbox:E})=>o?React.createElement("div",{className:"fixed inset-0 z-[90]"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:m}),React.createElement("div",{className:"absolute left-0 right-0 bottom-0 mx-auto max-w-[720px] px-3 pb-3"},React.createElement("div",{className:"rounded-[28px] border border-white/12 bg-[#0b0d10] shadow-2xl overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[14px] text-white font-semibold truncate"},(d==null?void 0:d.client)||"Conversation"),React.createElement("div",{className:"text-[12px] text-white/55 truncate"},"Preview drawer (routes optional)")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:E,className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 text-[12px] text-white/80"},"Open Inbox"),React.createElement("button",{onClick:m,className:"w-10 h-10 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 flex items-center justify-center"},React.createElement(_,{name:"X",size:18,className:"text-white/70"})))),React.createElement("div",{className:"p-4 space-y-3 max-h-[55vh] overflow-y-auto"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/70"},(d==null?void 0:d.preview)||"No message preview."),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{className:"flex-1 px-3 py-3 rounded-2xl border border-white/10 bg-black/25 text-[13px] text-white placeholder:text-white/35 outline-none",placeholder:"Type a quick reply\u2026 (stub)"}),React.createElement("button",{className:"px-4 py-3 rounded-2xl bg-cyan-500/20 border border-cyan-300/20 text-[13px] text-cyan-100 hover:bg-cyan-500/25"},"Send")))))):null,Qn=({values:o=[]})=>{var E=Math.max(1,...o),g=Math.min(0,...o),f=Math.max(1,E-g),F=o.map((D,k)=>{var T=k/Math.max(1,o.length-1)*72,he=20-(D-g)/f*20;return`${T.toFixed(1)},${he.toFixed(1)}`}).join(" ");return React.createElement("svg",{width:72,height:20,viewBox:"0 0 72 20",className:"opacity-90"},React.createElement("polyline",{points:F,fill:"none",stroke:"currentColor",strokeWidth:"2"}))},Kr=({perf:o=[],finance:d=[],onOpenReports:m,onOpenFinance:E})=>{var g=({label:f,value:F,spark:D,onClick:k,icon:T})=>React.createElement("button",{onClick:k,className:"flex-1 min-w-[160px] rounded-3xl border border-white/10 bg-black/20 hover:bg-black/28 p-4 text-left flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white/55"},f),React.createElement("div",{className:"text-[18px] text-white font-semibold leading-tight"},F)),React.createElement("div",{className:"flex items-center gap-3 text-white/55"},React.createElement("div",{className:"text-white/60"},React.createElement(Qn,{values:D})),React.createElement("div",{className:"w-9 h-9 rounded-2xl border border-white/10 bg-black/25 flex items-center justify-center"},React.createElement(_,{name:T,size:16,className:"text-white/75"}))));return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] text-white font-semibold flex items-center gap-2"},React.createElement(_,{name:"Activity",size:18,className:"text-cyan-200"}),"Performance Snapshot"),React.createElement("button",{onClick:m,className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 text-[12px] text-white/80"},"Reports")),React.createElement("div",{className:"mt-3 flex gap-3 overflow-x-auto no-scrollbar"},o.map((f,F)=>React.createElement(g,{key:F,label:f.label,value:f.value,spark:f.spark,onClick:m,icon:f.icon||"BarChart3"})))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] text-white font-semibold flex items-center gap-2"},React.createElement(_,{name:"CreditCard",size:18,className:"text-cyan-200"}),"Finance Signals"),React.createElement("button",{onClick:E,className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/25 hover:bg-black/35 text-[12px] text-white/80"},"Finance")),React.createElement("div",{className:"mt-3 flex gap-3 overflow-x-auto no-scrollbar"},d.map((f,F)=>React.createElement(g,{key:F,label:f.label,value:f.value,spark:f.spark,onClick:E,icon:f.icon||"DollarSign"})))))},Il=({density:o="COMFORTABLE",chips:d=[],onTap:m})=>React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[14px] text-white font-semibold flex items-center gap-2"},React.createElement(_,{name:"PieChart",size:18,className:"text-cyan-200"}),"Client Radar"),React.createElement("div",{className:"text-[12px] text-white/35"},"Segmentation overview")),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-5 gap-2"},d.slice(0,10).map((E,g)=>React.createElement("button",{key:g,onClick:()=>m(E),className:"rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 px-3 py-2 text-left"},React.createElement("div",{className:"text-[12px] text-white/55"},E.label),React.createElement("div",{className:"text-[18px] text-white font-semibold leading-tight"},E.count))))),$r=({onClick:o,label:d="Back"})=>React.createElement("button",{onClick:o,className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-black/20 px-3 py-2 text-[13px] text-slate-300 hover:bg-black/30 hover:text-white transition-colors",type:"button"},React.createElement(_,{name:"ArrowLeft",size:16}),React.createElement("span",{className:"truncate"},d)),or=({onBack:o,hubDensity:d="COMFORTABLE",setHubDensity:m,hubPersonal:E={highlights:!0,smartCopy:!0,smartOrdering:!0},setHubPersonal:g})=>React.createElement("div",{className:"space-y-6"},React.createElement($r,{onClick:o}),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-5"},React.createElement("div",{className:"text-[14px] font-semibold text-white"},"Settings"),React.createElement("div",{className:"mt-1 text-[12px] text-white/45"},"Lightweight controls (prototype-safe)."),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Notifications"),React.createElement("div",{className:"mt-1 text-[11px] text-white/40"},"Prefs stored locally (stub wiring)."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px]"},"Email"),React.createElement("button",{className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px]"},"Push"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Appearance"),React.createElement("div",{className:"mt-1 text-[11px] text-white/40"},"Density affects Hub spacing + control sizes (stored locally)."),React.createElement("div",{className:"mt-3 inline-flex rounded-2xl border border-white/10 bg-white/5 p-1"},[{key:"COMFORTABLE",label:"Comfortable"},{key:"COMPACT",label:"Compact"}].map(f=>React.createElement("button",{key:f.key,type:"button",onClick:()=>{try{m&&m(f.key)}catch(F){}},className:"px-3 py-1.5 rounded-xl text-[10px] font-mono uppercase tracking-widest transition-colors "+(String(d||"").toUpperCase()===f.key?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5")},f.label))),React.createElement("div",{className:"mt-3 text-[10px] text-white/35"},"Theme is fixed to dark in this prototype (safe lock).")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-4"},React.createElement("div",{className:"text-[12px] text-white/70"},"Personalization"),React.createElement("div",{className:"mt-1 text-[11px] text-white/40"},"Smart ordering + highlights for the Hub feed (stored locally)."),React.createElement("div",{className:"mt-3 space-y-2"},[{key:"highlights",label:"Highlights",desc:"Color accents for urgent / snoozed rows"},{key:"smartOrdering",label:"Smart ordering",desc:"Keep urgent & open items above snoozed"},{key:"smartCopy",label:"Smart copy",desc:"Contextual headline based on focus toggle"}].map(f=>{var F=E&&E[f.key]!==!1;return React.createElement("button",{key:f.key,type:"button",onClick:()=>{try{var D={...E||{}};D[f.key]=!F,g&&g(D)}catch(D){}},className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 px-3 py-2.5 text-left"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white font-semibold"},f.label),React.createElement("div",{className:"text-[11px] text-white/45 truncate"},f.desc)),React.createElement("div",{className:"shrink-0 px-2 py-1 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+(F?"border-emerald-400/25 bg-emerald-500/10 text-emerald-200":"border-white/12 bg-white/5 text-white/60")},F?"On":"Off"))})))))),rn=({onGo:o})=>React.createElement("div",{className:"sticky bottom-0 z-[40] pt-3 pb-[max(env(safe-area-inset-bottom),12px)]"},React.createElement("div",{className:"rounded-[28px] border border-white/12 bg-black/50 backdrop-blur-xl px-3 py-2 flex items-center justify-between gap-1"},[{key:"CLIENT_LIST",label:"Clients",icon:"Users"},{key:"CALENDAR",label:"Calendar",icon:"Calendar"},{key:"REPORTS",label:"Reports",icon:"BarChart3"},{key:"FINANCE_HUB",label:"Finance",icon:"DollarSign"},{key:"CONTENT_LIBRARY",label:"Library",icon:"BookOpen"},{key:"SETTINGS",label:"Settings",icon:"Settings"}].map(m=>React.createElement("button",{key:m.key,onClick:()=>o(m.key),className:"flex-1 min-w-0 rounded-2xl hover:bg-white/5 px-2 py-2 flex flex-col items-center gap-1"},React.createElement("div",{className:"w-9 h-9 rounded-2xl border border-white/10 bg-black/25 flex items-center justify-center"},React.createElement(_,{name:m.icon,size:16,className:"text-white/75"})),React.createElement("div",{className:"text-[11px] text-white/70 truncate"},m.label))))),sr=({hubDensity:o="STANDARD",hubPersonal:d=null,go:m})=>{var g=String(o||"STANDARD").toUpperCase()==="COMPACT",[f,F]=React.useState(null),[D,k]=React.useState(()=>{try{return localStorage.getItem("FOF_DASH_RANGE")||"7D"}catch(ra){return"7D"}});React.useEffect(()=>{try{localStorage.setItem("FOF_DASH_RANGE",D)}catch(ra){}},[D]);var T=()=>f?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/35 "+(g?"p-3":"p-4")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},f.sectionLabel),React.createElement("div",{className:"mt-1 text-[15px] font-semibold text-white/90"},f.title)),React.createElement("button",{type:"button",onClick:()=>F(null),className:"shrink-0 px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Close")),React.createElement("div",{className:"mt-3 space-y-2"},(f.lines||[]).map((ra,Ti)=>React.createElement("div",{key:Ti,className:"text-[13px] text-white/70 leading-relaxed"},"\u2022 ",ra))),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{var ra=f.fullRoute;F(null),ra&&m&&m(ra)},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Open full"))):null,he=Array.isArray(window.__FOF_UNIVERSAL_CLIENTS)?window.__FOF_UNIVERSAL_CLIENTS:window.__FOF_DEMO_CLIENTS||[],oe=he.filter(ra=>String(ra.segment||"").toUpperCase()!=="ATTENTION").length,ke=he.filter(ra=>String(ra.segment||"").toUpperCase()==="ATTENTION").length,Re=Math.max(2,Math.min(12,he.length%9+3)),Me=1840+he.length*23,Et=420+he.length%7*15,ya=12,Ct=he.length%3===0?"Ahead":he.length%3===1?"On Track":"At Risk",Jt=Math.max(55,Math.min(95,70+he.length%9*3)),Ye=D==="TODAY"?"Today":D==="30D"?"Last 30 days":"Last 7 days",Tt=D==="TODAY"?"today":D==="30D"?"30d":"7d",_t=D==="TODAY"?Re:D==="30D"?Re*18+6:Re*5+2,P=D==="TODAY"?Et:D==="30D"?Me*4:Me,I=Math.round(P*.18),te=24+he.length%10*3,Ce=Math.max(6,Math.round(te*.35)),C=Math.max(3,Math.round(Ce*.55)),ye=te?Math.round(C/te*100):0,le=ra=>{try{var Ti=new Date(ra).getTime();return Ti?Math.floor((Date.now()-Ti)/864e5):null}catch(Ti){return null}},O=he.filter(ra=>{var Ti=le(ra.lastCheckInAt);return Ti!=null&&Ti>=7}).length,qe=Math.max(0,Math.min(12,he.length*3%7+1)),Pt=Math.max(0,Math.min(12,ke+(he.length%4===0?1:0))),Za=({title:ra,value:Ti,sub:Ee,tone:ae="default"})=>React.createElement("div",{className:"rounded-2xl border p-3 "+(ae==="lime"?"border-[rgba(16,255,97,0.25)] bg-[rgba(16,255,97,0.06)]":ae==="violet"?"border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.06)]":"border-white/10 bg-white/5")},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},ra),React.createElement("div",{className:"mt-1 font-semibold "+(g?"text-[18px]":"text-[22px]")},Ti),Ee?React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},Ee):null),Ma=({title:ra,value:Ti,sub:Ee,cta:ae="Open",tone:Ot="default",onOpen:xe,onCta:p,onClick:R})=>{var Ve=xe||R||null,pa=p||xe||R||null,qt=!!Ve;return React.createElement("div",{role:qt?"button":void 0,tabIndex:qt?0:void 0,onClick:Ve||void 0,onKeyDown:ka=>{Ve&&(ka.key==="Enter"||ka.key===" ")&&(ka.preventDefault(),Ve())},className:"rounded-2xl border p-3 transition "+(qt?"cursor-pointer hover:bg-white/8 active:scale-[0.99] ":"")+(Ot==="amber"?"border-[rgba(245,158,11,0.28)] bg-[rgba(245,158,11,0.06)]":Ot==="violet"?"border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.06)]":Ot==="lime"?"border-[rgba(16,255,97,0.25)] bg-[rgba(16,255,97,0.06)]":Ot==="cyan"?"border-[rgba(77,233,255,0.28)] bg-[rgba(77,233,255,0.06)]":"border-white/10 bg-white/5")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},ra),React.createElement("div",{className:"mt-1 font-semibold "+(g?"text-[18px]":"text-[20px]")},Ti),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/55"},Ee)),React.createElement("button",{type:"button",onClick:ka=>{ka.stopPropagation(),pa&&pa()},disabled:!pa,className:"shrink-0 px-3 py-2 rounded-xl border text-[12px] "+(pa?"":"opacity-50 cursor-not-allowed ")+(Ot==="amber"?"border-[rgba(245,158,11,0.25)] bg-[rgba(245,158,11,0.12)] hover:bg-[rgba(245,158,11,0.16)] text-white/90":Ot==="violet"?"border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.16)] text-white/90":Ot==="lime"?"border-[rgba(16,255,97,0.22)] bg-[rgba(16,255,97,0.12)] hover:bg-[rgba(16,255,97,0.16)] text-white/90":Ot==="cyan"?"border-[rgba(77,233,255,0.30)] bg-[rgba(77,233,255,0.12)] hover:bg-[rgba(77,233,255,0.16)] text-white/90":"border-white/12 bg-white/5 hover:bg-white/10 text-white/85"),title:ae},ae)))},$a=({icon:ra,label:Ti,meta:Ee,onClick:ae,tone:Ot="default"})=>React.createElement("button",{type:"button",onClick:ae,className:"text-left rounded-2xl border p-3 hover:bg-white/10 transition-colors "+(Ot==="lime"?"border-[rgba(16,255,97,0.22)] bg-[rgba(16,255,97,0.05)]":Ot==="violet"?"border-[rgba(168,85,255,0.22)] bg-[rgba(168,85,255,0.05)]":"border-white/10 bg-white/5")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center border "+(Ot==="lime"?"border-[rgba(16,255,97,0.30)] bg-[rgba(16,255,97,0.10)]":Ot==="violet"?"border-[rgba(168,85,255,0.30)] bg-[rgba(168,85,255,0.10)]":"border-white/12 bg-white/5")},React.createElement(_,{name:ra,size:18,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-semibold text-white"},Ti),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},Ee))),React.createElement(_,{name:"ChevronRight",size:18,className:"text-white/60"}))),Yt=ra=>{try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(Number(ra)||0)}catch(Ti){return`$${Math.round(Number(ra)||0)}`}},it=({pct:ra=0,label:Ti="",sub:Ee=""})=>{var xe=2*Math.PI*34,p=Math.max(0,Math.min(100,Number(ra)||0)),R=p/100*xe;return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 flex items-center gap-3"},React.createElement("svg",{width:86,height:86,viewBox:"0 0 86 86",className:"shrink-0"},React.createElement("g",{transform:`translate(${86/2} ${86/2})`},React.createElement("circle",{r:34,fill:"none",stroke:"rgba(255,255,255,0.10)",strokeWidth:"8"}),React.createElement("circle",{r:34,fill:"none",stroke:"rgba(77,233,255,0.95)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${R} ${xe-R}`,transform:"rotate(-90)"}),React.createElement("text",{x:"0",y:"6",textAnchor:"middle",fontSize:"16",fill:"rgba(255,255,255,0.92)",fontWeight:"700"},Math.round(p),"%"))),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},Ti),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/85 font-semibold truncate"},Ee)))},Ut=new Date,ce=Ut.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),Vt=Ut.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),Fe=[18,22,19,26,31,28,34],v=[12,11,14,16,15,18,20],Te=[3,4,4,5,6,5,7],Se=React.useMemo(()=>{try{var ra=window.__FOF_TDEP&&window.__FOF_TDEP.TRIAGE&&typeof window.__FOF_TDEP.TRIAGE.getQueue=="function"?window.__FOF_TDEP.TRIAGE.getQueue()||[]:[];return Array.isArray(ra)?ra:[]}catch(ra){return[]}},[]),yt=React.useMemo(()=>{try{if(Se.length)return[];var ra=(he||[]).slice(0,6),Ti=new Date().toISOString(),Ee=(ae,Ot,xe,p,R)=>{var Ve,pa;return{id:`seed_${ae}`,clientId:((Ve=ra[ae%ra.length])==null?void 0:Ve.id)||`c${ae+1}`,clientName:((pa=ra[ae%ra.length])==null?void 0:pa.name)||`Client ${ae+1}`,type:Ot,severity:xe,status:"OPEN",confidence:.8,evidence:R,createdAt:Ti,ts:Ti,title:p,summary:R}};return[Ee(0,"CHECKIN_OVERDUE","HIGH","Check-in overdue","No check-in for 10+ days; adherence slipping."),Ee(1,"MISSED_SESSIONS","MID","Missed sessions","3 missed sessions in the last 7 days."),Ee(2,"RECOVERY_FLAG","HIGH","Recovery flag","HR up + sleep down; suggest deload.")]}catch(ra){return[]}},[Se,he]),St=Se.length?Se:yt,[za,Xe]=React.useState("OPEN"),[dt,Qt]=React.useState(D||"7D"),[yi,zi]=React.useState("ALL"),[os,as]=React.useState("ALL"),[ro,n]=React.useState("PRIORITY"),[y,be]=React.useState(""),ie=React.useMemo(()=>{var ra=new Set;return(St||[]).forEach(Ti=>{Ti&&Ti.type&&ra.add(String(Ti.type))}),["ALL",...Array.from(ra).slice(0,20)]},[St]),Dt=ra=>String(ra||"").toUpperCase()==="HIGH"?3:String(ra||"").toUpperCase()==="MID"?2:String(ra||"").toUpperCase()==="LOW"?1:0,b=ra=>String(ra||"OPEN").toUpperCase(),We=ra=>{try{var Ti=Date.parse(ra||"")||0;if(!Ti)return!0;var Ee=Date.now();return dt==="TODAY"?Ee-Ti<=864e5:dt==="30D"?Ee-Ti<=30*864e5:Ee-Ti<=7*864e5}catch(Ti){return!0}},da=React.useMemo(()=>{var ra=String(y||"").trim().toLowerCase();var Ti=(St||[]).slice();if(Ti=Ti.filter(Ee=>{var ae=b(Ee.status);if(za!=="ALL"&&ae!==za||yi!=="ALL"&&String(Ee.severity||"").toUpperCase()!==yi||os!=="ALL"&&String(Ee.type||"")!==os)return!1;var Ot=Ee.ts||Ee.createdAt||Ee.updatedAt||"";return!(!We(Ot)||ra&&!`${Ee.clientName||""} ${Ee.title||""} ${Ee.summary||""} ${Ee.type||""} ${Ee.evidence||""}`.toLowerCase().includes(ra))}),ro==="NEWEST")Ti.sort((Ee,ae)=>(Date.parse(ae.ts||ae.createdAt||"")||0)-(Date.parse(Ee.ts||Ee.createdAt||"")||0));else{var Ee=ae=>ae==="OPEN"?4:ae==="IN_PROGRESS"?3:ae==="SNOOZED"?2:ae==="RESOLVED"?1:0;Ti.sort((ae,Ot)=>{var xe=Dt(ae.severity),p=Dt(Ot.severity);if(p!==xe)return p-xe;var R=Ee(b(ae.status)),Ve=Ee(b(Ot.status));return Ve!==R?Ve-R:(Date.parse(Ot.ts||Ot.createdAt||"")||0)-(Date.parse(ae.ts||ae.createdAt||"")||0)})}return Ti.slice(0,20)},[St,za,dt,yi,os,ro,y]),ii=(ra,Ti={})=>{try{if(!ra)return;window.__FOF_TDEP&&window.__FOF_TDEP.TRIAGE&&typeof window.__FOF_TDEP.TRIAGE.updateSignal=="function"&&window.__FOF_TDEP.TRIAGE.updateSignal(ra,Ti)}catch(Ee){}try{if(!Se.length)try{window.__fofToast&&window.__fofToast("Updated (demo)")}catch(Ee){}}catch(Ee){}},Kt=he.filter(ra=>String(ra.segment||"").toUpperCase()==="ATTENTION").slice(0,6),Na=[{k:"OVERDUE",icon:"BellRing",title:"Overdue check-ins",meta:`${O} clients past ${Tt}`,detail:O?"Send nudge templates + review adherence notes.":"All caught up.",cta:"Open triage",on:()=>m&&m("DAILY_HUB"),tone:O?"amber":"default"},{k:"FOLLOW",icon:"ClipboardList",title:"Follow-ups",meta:`${Pt} to action`,detail:"Quick follow-ups: plan edits, soreness flags, missed sessions.",cta:"Review",on:()=>m&&m("DAILY_HUB"),tone:Pt?"violet":"default"},{k:"INBOX",icon:"MessageSquare",title:"Inbox",meta:`${qe} unread`,detail:"Reply fast to reduce churn risk.",cta:"Open inbox",on:()=>m&&m("INBOX"),tone:qe?"cyan":"default"}];return React.createElement("div",{className:"px-4 md:px-6 py-5 "+(g?"space-y-3":"space-y-4")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Trainer dashboard \u2022 ",ce," \u2022 ",Vt),React.createElement("div",{className:"mt-1 text-[11px] font-mono text-emerald-300/80"},"BUILD: DASHREAL v4 \u2022 dashRange enabled"),React.createElement("div",{className:"mt-1 text-[22px] md:text-[28px] font-semibold text-white"},"Operations overview"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Prioritized work, client risk, and business health \u2014 not a menu.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>m&&m("CLIENT_LIST"),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Add / Manage clients"),React.createElement("button",{type:"button",onClick:()=>m&&m("CALENDAR"),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Schedule"),React.createElement("button",{type:"button",onClick:()=>m&&m("HUB"),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85",title:"Back to Hub"},"Hub"))),React.createElement("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4"},React.createElement(Za,{title:`Sessions (${Tt})`,value:_t,sub:`${Ye} \u2022 Scheduled (demo)`,tone:"violet"}),React.createElement(Za,{title:"Active clients",value:oe,sub:`${ke} need attention`,tone:"lime"}),React.createElement(Za,{title:`Revenue (${Tt})`,value:Yt(P),sub:`${Ct} \u2022 Forecast`,tone:"default"}),React.createElement(Za,{title:"Outstanding",value:Yt(I),sub:"Invoices + pending (demo)",tone:"default"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"B1 \u2014 Ops Feed"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/85"},"Operational Queue"),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},"Filters apply deterministically. Actions write back to TRIAGE when available.")),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("select",{value:za,onChange:ra=>Xe(ra.target.value),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80"},["OPEN","IN_PROGRESS","SNOOZED","RESOLVED","ALL"].map(ra=>React.createElement("option",{key:ra,value:ra},ra.replace("_"," ")))),React.createElement("select",{value:dt,onChange:ra=>Qt(ra.target.value),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80"},["TODAY","7D","30D"].map(ra=>React.createElement("option",{key:ra,value:ra},ra))),React.createElement("select",{value:yi,onChange:ra=>zi(ra.target.value),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80"},["ALL","HIGH","MID","LOW"].map(ra=>React.createElement("option",{key:ra,value:ra},ra))),React.createElement("select",{value:os,onChange:ra=>as(ra.target.value),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80"},(ie||["ALL"]).map(ra=>React.createElement("option",{key:ra,value:ra},ra==="ALL"?"All types":ra))),React.createElement("select",{value:ro,onChange:ra=>n(ra.target.value),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80"},React.createElement("option",{value:"PRIORITY"},"Priority"),React.createElement("option",{value:"NEWEST"},"Newest")),React.createElement("input",{value:y,onChange:ra=>be(ra.target.value),placeholder:"Search client / summary",className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/80 placeholder:text-white/40 w-48"}),React.createElement("button",{type:"button",onClick:()=>m&&m("DAILY_HUB"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Open Triage Hub"))),React.createElement("div",{className:"mt-3 space-y-2"},da&&da.length?da.map(ra=>{var Ti=b(ra.status),Ee=String(ra.severity||"").toUpperCase()||"MID",ae=ra.ts||ra.createdAt||"",Ot=Ee==="HIGH"?"border-red-400/25 bg-red-500/10 text-red-200":Ee==="MID"?"border-amber-400/25 bg-amber-500/10 text-amber-200":"border-emerald-400/25 bg-emerald-500/10 text-emerald-200";return React.createElement("div",{key:ra.id||ra.clientId+"_"+ra.type,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[13px] font-semibold text-white"},ra.clientName||"Client"),React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full border "+Ot},Ee),React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full border border-white/10 text-white/60"},String(ra.type||"").replaceAll("_"," ")||"Signal"),React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full border border-white/10 text-white/50"},Ti.replace("_"," ")),ae?React.createElement("span",{className:"text-[10px] text-white/45 font-mono"},String(ae).slice(0,16).replace("T"," ")):null),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},ra.title||ra.summary||ra.evidence||"Operational item"),ra.summary&&ra.title?React.createElement("div",{className:"mt-0.5 text-[12px] text-white/55"},ra.summary):null),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{if(ra.clientId){var xe=(he||[]).find(p=>String(p.id)===String(ra.clientId));if(xe)try{window.__FOF_SELECTED_CLIENT=xe}catch(p){}}}catch(xe){}m&&m("AI_HUB")},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Open"),React.createElement("button",{type:"button",onClick:()=>ii(ra.id,{status:"IN_PROGRESS"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/75"},"In prog"),React.createElement("button",{type:"button",onClick:()=>ii(ra.id,{status:"SNOOZED",snoozedUntil:new Date(Date.now()+60*60*1e3).toISOString()}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/75"},"Snooze 1h"),React.createElement("button",{type:"button",onClick:()=>ii(ra.id,{status:"RESOLVED",resolvedAt:new Date().toISOString()}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] text-white/75"},"Resolve"))))}):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/60"},"No items match these filters."))),React.createElement("div",{className:"grid gap-3 grid-cols-1 lg:grid-cols-3"},React.createElement("div",{className:"lg:col-span-2 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Action feed"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/80"},"Work the list. Keep clients on track.")),React.createElement("button",{type:"button",onClick:()=>m&&m("DAILY_HUB"),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Open triage hub")),React.createElement("div",{className:"mt-3 space-y-2"},Na.map(ra=>React.createElement("div",{key:ra.k,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0 flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/10 bg-black/25 flex items-center justify-center shrink-0"},React.createElement(_,{name:ra.icon,size:18,className:"text-white/80"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-semibold text-white truncate"},ra.title),React.createElement("div",{className:"mt-0.5 text-[12px] text-white/60"},ra.meta),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},ra.detail))),React.createElement("button",{type:"button",onClick:ra.on,className:"shrink-0 px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},ra.cta)),ra.k==="FOLLOW"&&Kt.length?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},Kt.slice(0,4).map(Ti=>React.createElement("button",{key:Ti.id,type:"button",onClick:()=>m&&m("CLIENT_LIST"),className:"text-left rounded-xl border border-white/10 bg-black/20 hover:bg-black/28 p-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},Ti.name),React.createElement("span",{className:"text-[10px] font-mono px-2 py-0.5 rounded-full border border-purple-400/30 bg-purple-500/10 text-white/80"},"ATTN")),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55 truncate"},Ti.status||"Needs attention")))):null)))),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Health"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/80"},"Snapshot")),React.createElement("button",{type:"button",onClick:()=>m&&m("FINANCE_HUB"),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Business")),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement(it,{pct:Jt,label:"Capacity score",sub:"Roster readiness (demo)"}),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Sessions trend"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/85 font-semibold"},"7-day")),React.createElement("div",{className:"text-white/70"},React.createElement(Qn,{values:Fe})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Revenue trend"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/85 font-semibold"},"7-day")),React.createElement("div",{className:"text-white/70"},React.createElement(Qn,{values:v})))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Pipeline"),React.createElement("div",{className:"mt-0.5 text-[13px] text-white/85 font-semibold"},"Leads \u2192 Consult \u2192 Active"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Ye," \u2022 ",ye,"% conversion (demo)")),React.createElement("div",{className:"text-white/70"},React.createElement(Qn,{values:Te}))),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"flex items-center justify-between text-[12px]"},React.createElement("span",{className:"text-white/70"},"Leads"),React.createElement("span",{className:"text-white/85 font-semibold"},te)),React.createElement("div",{className:"h-2 rounded-full bg-black/40 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/15",style:{width:"100%"}})),React.createElement("div",{className:"flex items-center justify-between text-[12px]"},React.createElement("span",{className:"text-white/70"},"Consults booked"),React.createElement("span",{className:"text-white/85 font-semibold"},Ce)),React.createElement("div",{className:"h-2 rounded-full bg-black/40 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/15",style:{width:`${Math.round(Ce/Math.max(1,te)*100)}%`}})),React.createElement("div",{className:"flex items-center justify-between text-[12px]"},React.createElement("span",{className:"text-white/70"},"Converted (active)"),React.createElement("span",{className:"text-white/85 font-semibold"},C)),React.createElement("div",{className:"h-2 rounded-full bg-black/40 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/15",style:{width:`${Math.round(C/Math.max(1,te)*100)}%`}})),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>m&&m("CLIENT_LIST"),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/35 hover:bg-black/45 text-[12px] text-white/85"},"View leads"),React.createElement("button",{type:"button",onClick:()=>m&&m("CALENDAR"),className:"px-3 py-2 rounded-xl border border-white/10 bg-black/35 hover:bg-black/45 text-[12px] text-white/85"},"Schedule consult")))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Tools"),React.createElement("div",{className:"text-[11px] text-white/45"},"Compact launcher")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("button",{onClick:()=>m&&m("CLIENT_LIST"),className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 p-2 text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"Users",size:16,className:"text-white/80"}),React.createElement("div",{className:"text-[12px] text-white/85 font-semibold"},"Clients")),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55"},"Roster")),React.createElement("button",{onClick:()=>m&&m("CALENDAR"),className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 p-2 text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"Calendar",size:16,className:"text-white/80"}),React.createElement("div",{className:"text-[12px] text-white/85 font-semibold"},"Calendar")),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55"},"Bookings")),React.createElement("button",{onClick:()=>m&&m("PLAN_HOME"),className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 p-2 text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"ClipboardList",size:16,className:"text-white/80"}),React.createElement("div",{className:"text-[12px] text-white/85 font-semibold"},"Plans")),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55"},"Queue")),React.createElement("button",{onClick:()=>m&&m("FINANCE_HUB"),className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 p-2 text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"Banknote",size:16,className:"text-white/80"}),React.createElement("div",{className:"text-[12px] text-white/85 font-semibold"},"Finance")),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/55"},"Billing"))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Next: real data wiring (sessions, payments, leads) + personalization + deeper drill-downs.")))))},zl=({hubDensity:o="COMFORTABLE",hubPersonal:d={highlights:!0,smartCopy:!0,smartOrdering:!0}})=>{var m=Oi.filter(it=>(it.tags||[]).includes("Linked")),E=Oi.filter(it=>it.segment==="ATTENTION"||typeof it.readiness=="number"&&it.readiness<60),g=kr.length,f=3,F=1,D=(Oi||[]).slice(0,5).map((it,Ut)=>({id:it.id||Ut,client:it.name||`Client ${Ut+1}`,preview:Ut===0?"Can we adjust tomorrow\u2019s session time?":Ut===1?"Quick question about macros for today.":"Need help with my plan for the weekend."})),k=(Oi||[]).slice(2,7).map((it,Ut)=>({id:(it.id||Ut)+"_ci",client:it.name||`Client ${Ut+1}`,preview:Ut===0?"Weekly check-in submitted \u2022 soreness high":Ut===1?"Progress update \u2022 weight down 0.6kg":"Mood low \u2022 sleep inconsistent"})),T=[{label:"Compliance trend",value:"78%",spark:[62,66,64,68,71,73,78],icon:"TrendingUp"},{label:"Active clients",value:"24",spark:[18,19,20,22,23,24,24],icon:"Users"},{label:"Revenue trend",value:"AED 14.2k",spark:[9,10,11,10,12,13,14],icon:"DollarSign"}],he=[{label:"This month",value:"AED 14.2k",spark:[7,8,9,10,11,12,14],icon:"Wallet"},{label:"Outstanding",value:"6 payments",spark:[8,7,7,6,6,6,6],icon:"Receipt"},{label:"Forecast vs target",value:"92%",spark:[85,86,88,89,90,91,92],icon:"Target"}],oe=[{key:"ACTIVE",label:"Active",count:(Oi||[]).length},{key:"RISK",label:"At Risk",count:Math.min((E||[]).length,9)},{key:"SNOOZED",label:"Snoozed",count:2},{key:"TRIAL",label:"New / Trial",count:3},{key:"DONE",label:"Completed today",count:5}],[ke,Re]=React.useState({open:!1,item:null}),[Me,Et]=React.useState({open:!1,item:null}),[ya,Ct]=React.useState(!1),[Jt,Ye]=React.useState(null),[Tt,_t]=React.useState(()=>{try{var it=JSON.parse(localStorage.getItem("fof.tdep.library.assignments.v1")||"[]");return Array.isArray(it)?it:[]}catch(it){return[]}}),[P,I]=React.useState("TODAY"),[te,Ce]=React.useState(!1),[C,ye]=React.useState(""),[le,O]=React.useState(!1),[qe,Pt]=React.useState({open:!1,session:null}),Za=React.useMemo(()=>{try{var it=new Date;return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(it)}catch(it){return"Today"}},[]),Ma=React.useMemo(()=>{var it=new Date().getHours();return it<12?"Good morning":it<17?"Good afternoon":"Good evening"},[]),$a=React.useMemo(()=>{var it=(C||"").trim().toLowerCase();if(!it)return[];var ce=(Array.isArray(Oi)?Oi:[]).map(Vt=>{var Fe=String(Vt.name||Vt.fullName||"").toLowerCase(),v=(Vt.tags||[]).join(" ").toLowerCase(),Te=(Vt.program||Vt.plan||Vt.goal||"").toString().toLowerCase(),yt=[Fe,v,Te].join(" ").includes(it);return{c:Vt,hit:yt,name:Fe}}).filter(Vt=>Vt.hit);return ce.sort((Vt,Fe)=>Vt.name>Fe.name?1:Vt.name<Fe.name?-1:0),ce.slice(0,12).map(Vt=>Vt.c)},[C]);React.useEffect(()=>{try{localStorage.setItem("fof.tdep.library.assignments.v1",JSON.stringify(Tt||[]))}catch(it){}},[Tt]);var Yt=Math.min(99,E.length+g+f+F);return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll "+(o==="COMPACT"?"p-3 md:p-4":"p-4 md:p-6")},React.createElement("div",{className:"max-w-6xl mx-auto "+(o==="COMPACT"?"space-y-4":"space-y-6")},React.createElement("div",{className:"sticky top-0 z-30 -mx-4 md:-mx-6 px-4 md:px-6 pt-2 pb-3 bg-gradient-to-b from-[#05080f] via-[#05080f]/95 to-transparent"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/25 backdrop-blur p-3 md:p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-mono"},Za),React.createElement("div",{className:"mt-1 text-white font-extrabold tracking-tight text-[16px] md:text-[18px]"},Ma,", Coach"),React.createElement("div",{className:"mt-3 inline-flex rounded-2xl border border-white/10 bg-white/5 p-1"},[{key:"TODAY",label:"Today"},{key:"WEEK",label:"This Week"},{key:"RISK",label:"At Risk"}].map(it=>React.createElement("button",{key:it.key,type:"button",onClick:()=>I(it.key),className:"px-3 py-1.5 rounded-xl text-[10px] font-mono uppercase tracking-widest transition-colors "+(P===it.key?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5")},it.label)))),React.createElement("div",{className:"shrink-0 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>O(it=>!it),className:"w-11 h-11 rounded-2xl border border-white/10 bg-[rgba(77,233,255,0.10)] hover:bg-[rgba(77,233,255,0.14)] flex items-center justify-center",title:"Quick actions"},React.createElement(_,{name:"Plus",size:18,className:"text-cyan-100"})))),React.createElement("div",{className:"mt-3 relative"},React.createElement("div",{className:"flex items-center gap-2 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/25 px-3 py-2.5"},React.createElement(_,{name:"Search",size:16,className:"text-white/60"}),React.createElement("input",{value:C,onChange:it=>{ye(it.target.value),Ce(!0)},onFocus:()=>Ce(!0),placeholder:"Search clients / tags / programs",className:"flex-1 bg-transparent outline-none text-[12px] text-white placeholder:text-white/35"}),C?React.createElement("button",{type:"button",onMouseDown:it=>{try{it.preventDefault()}catch(Ut){}},onClick:()=>{try{ye("")}catch(it){}},className:"px-2 py-1 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/60"},"Clear"):React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/40"},"\u2318K")),te&&React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-[#05080f] shadow-2xl overflow-hidden"},C.trim()===""?React.createElement("div",{className:"px-3 py-3 text-[12px] text-white/50"},"Type to search clients. Results stay on the Hub."):$a.length===0?React.createElement("div",{className:"px-3 py-3 text-[12px] text-white/50"},"No matches."):React.createElement("div",{className:"max-h-[260px] overflow-y-auto"},$a.map(it=>React.createElement("button",{key:it.id||it.name,type:"button",onMouseDown:Ut=>{try{Ut.preventDefault()}catch(ce){}},onClick:()=>{try{zt(it)}catch(Ut){}try{u("CLIENT_ACTION_MODE")}catch(Ut){}Ce(!1)},className:"w-full flex items-center justify-between gap-3 px-3 py-3 hover:bg-white/6 text-left"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[13px] truncate"},it.name||"Client"),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},(it.tags||[]).slice(0,3).join(" \u2022 ")||it.program||it.plan||it.goal||"\u2014")),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/35"})))),React.createElement("div",{className:"px-3 py-2 border-t border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[10px] text-white/40"},"Press Esc to close"),React.createElement("button",{type:"button",onMouseDown:it=>{try{it.preventDefault()}catch(Ut){}},onClick:()=>Ce(!1),className:"px-2 py-1 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/60"},"Close")))),le&&React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/35 p-2"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},[{label:"New message",icon:"MessageSquare",action:()=>{O(!1),u("INBOX")}},{label:"Open calendar",icon:"Calendar",action:()=>{O(!1),u("CALENDAR")}},{label:"Client list",icon:"Users",action:()=>{O(!1),u("CLIENT_LIST")}},{label:"AI triage",icon:"Bell",action:()=>{O(!1),u("DAILY_HUB")}}].map(it=>React.createElement("button",{key:it.label,type:"button",onClick:it.action,className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 px-3 py-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-8 h-8 rounded-xl border border-white/10 bg-white/5 flex items-center justify-center"},React.createElement(_,{name:it.icon,size:16,className:"text-white/80"})),React.createElement("div",{className:"text-[12px] text-white font-semibold"},it.label)),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/40"}))))))),React.createElement(Ln,{density:o,hubFocus:P,smartCopy:!!(d!=null&&d.smartCopy),attentionTotal:Yt,dueCount:E.length,sessionsToday:g,unreadMessages:f,alerts:F,dueClients:E,setView:u,setSelectedClient:zt}),React.createElement(Cl,{density:o,bookings:kr,deadlines:hn,onOpenSession:it=>Pt({open:!0,session:it}),onOpenCalendar:()=>u("CALENDAR"),onAction:it=>{var Ut={MESSAGE:"Quick message",DONE:"Marked done",START_SESSION:"Start session",ATTENDANCE:"Attendance",NOTE:"Quick note",RESCHEDULE:"Reschedule",CHECKINS:"Check-ins due",PROGRAMS:"Program updates",PAYMENTS:"Payments"}[it]||it;setToast(Ut)}}),React.createElement(Pr,{density:o,personal:d,clientRecords:Oi,setView:u,setSelectedClient:zt,openAssign:it=>Et({open:!0,item:it})}),React.createElement(dd,{density:o,needsReply:D,checkinsToReview:k,onOpenInbox:()=>u("INBOX"),onOpenMessage:it=>Re({open:!0,item:it}),onOpenCheckin:it=>Re({open:!0,item:it})}),React.createElement(Yr,{open:ke.open,item:ke.item,onClose:()=>Re({open:!1,item:null}),onOpenInbox:()=>{Re({open:!1,item:null}),u("INBOX")}}),React.createElement(Kr,{density:o,perf:T,finance:he,onOpenReports:()=>u("REPORTS"),onOpenFinance:()=>u("FINANCE_HUB")}),React.createElement(Il,{density:o,chips:oe,onTap:it=>{if(it&&(it.key==="AT_RISK"||it.key==="RISK")){try{var Ut=document.querySelector('[data-feed-group="URGENT"]');Ut&&Ut.scrollIntoView({behavior:"smooth",block:"start"})}catch(Ut){}return}try{u("CLIENT_LIST")}catch(Ut){}}}),React.createElement(ld,{open:qe.open,session:qe.session,onClose:()=>Pt({open:!1,session:null}),onOpenCalendar:()=>{Pt({open:!1,session:null}),u("CALENDAR")}}),React.createElement("details",{className:"rounded-3xl border border-white/10 bg-black/20"},React.createElement("summary",{className:"cursor-pointer list-none px-4 py-3 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-mono"},"More dashboards"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Sessions, clients, tools \u2014 expand if needed.")),React.createElement(_,{name:"ChevronDown",size:18,className:"text-white/45"})),React.createElement("div",{className:"px-0 pb-4"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-4 rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Today\u2019s Sessions"),React.createElement("div",{className:"text-[11px] text-white/55"},"Schedule (stub \u2192 calendar)")),React.createElement("button",{type:"button",onClick:()=>u("CALENDAR"),className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Calendar")),React.createElement("div",{className:"p-3 space-y-2"},(kr||[]).slice(0,3).map(it=>React.createElement("button",{key:it.id||it.time,type:"button",onClick:()=>u("CALENDAR"),className:"w-full flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 p-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},it.label||it.title),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},it.location||it.meta||"")),React.createElement("div",{className:"text-[11px] text-white/55 font-mono"},it.time))))),React.createElement("div",{className:"lg:col-span-4 rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Unread Messages"),React.createElement("div",{className:"text-[11px] text-white/55"},"Inbox (stub \u2192 messages)")),React.createElement("button",{type:"button",onClick:()=>u("INBOX"),className:"px-3 py-2 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Inbox")),React.createElement("div",{className:"p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] text-white/70"},"You have"),React.createElement("div",{className:"text-white font-black text-2xl font-mono"},f)),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Open messages to reply, mark complete, and keep client momentum high."),React.createElement("button",{type:"button",onClick:()=>u("INBOX"),className:"mt-4 w-full rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30 px-3 py-2 text-[11px] text-white/80"},"Go to Inbox \u2192"))),React.createElement("div",{className:"lg:col-span-4 rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-3 border-b border-white/10"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Quick Actions"),React.createElement("div",{className:"text-[11px] text-white/55"},"Common actions \u2022 fast")),React.createElement("div",{className:"p-3 grid grid-cols-1 gap-3"},React.createElement(Un,{icon:"UserPlus",title:"Add Client",desc:"Create a new client record.",onClick:()=>u("ADD_CLIENT")}),React.createElement(Un,{icon:"Wand2",title:"Generate Program",desc:"AI program generator (save \u2192 assign).",onClick:()=>u("PLAN_AI_GENERATOR")}),React.createElement(Un,{icon:"Library",title:"Open Library",desc:"Templates, exercises, programs, cues.",onClick:()=>u("EXERCISE_LIBRARY")})))))),React.createElement(rn,{onGo:it=>u(it)}),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("button",{type:"button",onClick:()=>u("CLIENT_LIST"),className:"text-left rounded-sm border border-titanium-800 bg-titanium-950/40 hover:bg-titanium-950/60 transition-colors p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-bold"},"Clients"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},"Client Management"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},Oi.length," total \u2022 ",E.length," need attention")),React.createElement("div",{className:"w-9 h-9 rounded-sm bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:"Users",size:18,className:"text-white/70"})))),React.createElement("button",{type:"button",onClick:()=>u("CALENDAR"),className:"text-left rounded-sm border border-titanium-800 bg-titanium-950/40 hover:bg-titanium-950/60 transition-colors p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-bold"},"Calendar"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},"Sessions & bookings"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},g," sessions today")),React.createElement("div",{className:"w-9 h-9 rounded-sm bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:"Calendar",size:18,className:"text-white/70"})))),React.createElement("button",{type:"button",onClick:()=>u("INBOX"),className:"text-left rounded-sm border border-titanium-800 bg-titanium-950/40 hover:bg-titanium-950/60 transition-colors p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-bold"},"Messages"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},"Inbox"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},f," unread")),React.createElement("div",{className:"w-9 h-9 rounded-sm bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:"MessageSquare",size:18,className:"text-white/70"}))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("button",{type:"button",onClick:()=>{try{S==="FINANCE_HUB"&&U(it=>it+1)}catch(it){}u("FINANCE_HUB")},className:"text-left rounded-sm border border-titanium-800 bg-titanium-950/30 hover:bg-titanium-950/50 transition-colors p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-bold"},"Business status"),React.createElement("div",{className:"mt-1 text-[13px] font-bold text-white"},"Billing & operations"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Status: OK (demo) \u2022 ",F," alert")),React.createElement(_,{name:"DollarSign",size:18,className:"text-white/60"}))),React.createElement("button",{type:"button",onClick:()=>u("MORE_TOOLS"),className:"text-left rounded-sm border border-titanium-800 bg-titanium-950/30 hover:bg-titanium-950/50 transition-colors p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.24em] text-white/55 font-bold"},"Tools"),React.createElement("div",{className:"mt-1 text-[13px] font-bold text-white"},"More tools"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Imports \u2022 automation \u2022 marketplace (demo)")),React.createElement(_,{name:"Wrench",size:18,className:"text-white/60"}))))))},ql=()=>{var za;var o=typeof window!="undefined"?(za=window.__FOF_TDEP)==null?void 0:za.TRIAGE:null,[d,m]=React.useState(0);React.useEffect(()=>{var Xe=()=>m(zi=>(zi+1)%1e6),dt=()=>Xe(),Qt=zi=>{try{var os=String((zi==null?void 0:zi.key)||"");(os.startsWith("fof.tdep.triage_")||os==="fof_inbox_v1"||os==="fof.tdep.action_log.v1")&&Xe()}catch(os){}};try{window.addEventListener("fof:triage_updated",dt)}catch(zi){}try{window.addEventListener("storage",Qt)}catch(zi){}var yi=setInterval(Xe,3e4);return()=>{try{window.removeEventListener("fof:triage_updated",dt)}catch(zi){}try{window.removeEventListener("storage",Qt)}catch(zi){}clearInterval(yi)}},[]);var E=React.useMemo(()=>{var Xe=new Map;(Oi||[]).forEach(dt=>Xe.set(dt.id,dt));try{var dt=window.__FOF_DEMO_CLIENTS;Array.isArray(dt)&&dt.forEach(Qt=>{Qt&&Qt.id&&!Xe.has(Qt.id)&&Xe.set(Qt.id,Qt)})}catch(dt){}return Xe},[Oi]),g=React.useMemo(()=>{var Xe;try{return((Xe=o==null?void 0:o.getQueue)==null?void 0:Xe.call(o,{includeSnoozed:!0,includeResolved:!0}))||[]}catch(dt){return[]}},[o,d,E]),f=React.useMemo(()=>{var Xe;try{return((Xe=o==null?void 0:o.getTriageState)==null?void 0:Xe.call(o))||{}}catch(dt){return{}}},[o,d]);React.useEffect(()=>{try{if(!(o!=null&&o.getTriageState)||!(o!=null&&o.setTriageState))return;var Xe=o.getTriageState()||{},dt=Xe.signalsById||{},Qt=Date.now();var yi=!1;var zi={...dt};if(Object.values(dt).forEach(as=>{if(!as||!as.id)return;var ro=String(as.status||"").toUpperCase(),n=as.snoozedUntil||as.snoozeUntil||as.snoozed_until||as.snooze_until||null;if((ro==="SNOOZED"||n)&&n){var y=new Date(n).getTime();Number.isFinite(y)&&y<=Qt&&(yi=!0,zi[as.id]={...as,status:"OPEN",snoozedUntil:null,snoozeUntil:null,snoozed_until:null,snooze_until:null,updatedAt:new Date().toISOString()})}}),!yi)return;var os=Array.isArray(Xe.order)?Xe.order.slice():[];Object.values(zi).forEach(as=>{!as||!as.id||String(as.status||"").toUpperCase()!=="RESOLVED"&&!os.includes(as.id)&&os.unshift(as.id)}),o.setTriageState({...Xe,signalsById:zi,order:os,updatedAt:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("fof:triage_updated",{detail:{type:"SNOOZE_EXPIRED_UI"}}))}catch(as){}}catch(Xe){}},[o,d]);var[F,D]=React.useState(()=>({q:"",type:"ALL",status:"OPEN",minSev:0})),[k,T]=React.useState("PRIORITY"),[he,oe]=React.useState("CARDS"),[ke,Re]=React.useState(()=>new Set),Me=Xe=>{Re(dt=>{var Qt=new Set(dt||[]);return Qt.has(Xe)?Qt.delete(Xe):Qt.add(Xe),Qt})},Et=()=>Re(new Set),[ya,Ct]=React.useState(()=>new Set),Jt=Xe=>{Ct(dt=>{var Qt=new Set(dt||[]);return Qt.has(Xe)?Qt.delete(Xe):Qt.add(Xe),Qt})},Ye=()=>Ct(new Set),Tt=(Xe=60)=>{try{var dt=Array.from(ya||[]);if(!dt.length)return;dt.forEach(Qt=>{var yi;try{(yi=o==null?void 0:o.snoozeSignal)==null||yi.call(o,Qt,Xe)}catch(zi){}});try{ye(`Snoozed ${dt.length} item(s) for ${Xe}m`,"info")}catch(Qt){}Ye()}catch(dt){}},_t=()=>{try{var Xe=Array.from(ya||[]);if(!Xe.length)return;Xe.forEach(dt=>{var Qt;try{(Qt=o==null?void 0:o.markInProgress)==null||Qt.call(o,dt)}catch(yi){}});try{ye(`Marked ${Xe.length} item(s) as in progress`,"info")}catch(dt){}Ye()}catch(Xe){}},P=()=>{try{var Xe=Array.from(ya||[]);if(!Xe.length)return;Xe.forEach(dt=>{var Qt;try{(Qt=o==null?void 0:o.resolveSignal)==null||Qt.call(o,dt,"BULK_RESOLVE")}catch(yi){}});try{ye(`Resolved ${Xe.length} item(s)`,"success")}catch(dt){}Ye()}catch(Xe){}},I=React.useMemo(()=>{var Xe=String((F==null?void 0:F.q)||"").trim().toLowerCase(),dt=String((F==null?void 0:F.type)||"ALL").toUpperCase(),Qt=String((F==null?void 0:F.status)||"OPEN").toUpperCase(),yi=Math.max(0,Math.min(100,Number((F==null?void 0:F.minSev)||0))),zi=ie=>(ie==null?void 0:ie.snoozedUntil)||(ie==null?void 0:ie.snoozeUntil)||(ie==null?void 0:ie.snoozed_until)||(ie==null?void 0:ie.snooze_until)||null,os=ie=>{var Dt=String((ie==null?void 0:ie.status)||"OPEN").toUpperCase(),b=zi(ie);return Dt==="SNOOZED"||b?"SNOOZED":Dt==="IN_PROGRESS"||Dt==="INPROGRESS"?"IN_PROGRESS":Dt==="RESOLVED"?"RESOLVED":"OPEN"},as=(Array.isArray(g)?g:[]).filter(ie=>{if(Number((ie==null?void 0:ie.severity)||0)<yi)return!1;if(dt!=="ALL"){var We=String((ie==null?void 0:ie.type)||"").toUpperCase();if(dt==="OTHER"){if(["CHURN","COMPLIANCE","INJURY_RISK","OPPORTUNITY"].includes(We))return!1}else if(We!==dt)return!1}var b=os(ie);if(Qt==="OPEN"){if(b==="RESOLVED")return!1}else if(Qt!=="ALL"&&b!==Qt)return!1;if(Xe){var We=ie!=null&&ie.clientId&&E.get(ie.clientId)||null;if(![We==null?void 0:We.name,ie==null?void 0:ie.title,ie==null?void 0:ie.summary,Array.isArray(ie==null?void 0:ie.evidence)?ie.evidence.join(" "):""].filter(Boolean).join(" ").toLowerCase().includes(Xe))return!1}return!0}),ro=String(k||"PRIORITY").toUpperCase();if(ro==="PRIORITY")return as;var n=as.map((ie,Dt)=>({s:ie,i:Dt})),y=(ie,Dt=0)=>{var b=Number(ie);return Number.isFinite(b)?b:Dt},be=ie=>{try{var Dt=new Date(ie).getTime();return Number.isFinite(Dt)?Dt:0}catch(Dt){return 0}};return n.sort((ie,Dt)=>{var b=ie.s,We=Dt.s,da=y(b==null?void 0:b.severity,0),ii=y(We==null?void 0:We.severity,0),jt=be((b==null?void 0:b.updatedAt)||(b==null?void 0:b.createdAt)||0),Kt=be((We==null?void 0:We.updatedAt)||(We==null?void 0:We.createdAt)||0),Na=be(zi(b)||0),ra=be(zi(We)||0),Ti=!!zi(b),Ee=!!zi(We);switch(ro){case"SEVERITY_ASC":return da!==ii?da-ii:Kt-jt;case"SEVERITY_DESC":return da!==ii?ii-da:Kt-jt;case"SNOOZE_ENDING":return Ti!==Ee?Ee?1:-1:Na!==ra?Na-ra:Kt-jt;case"OLDEST":return jt!==Kt?jt-Kt:ii-da;case"NEWEST":default:return jt!==Kt?Kt-jt:ii-da}}),n.map(ie=>ie.s)},[g,F,E,k]),te=()=>{try{return new Date().toISOString()}catch(Xe){return String(Date.now())}},[Ce,C]=React.useState([]),ye=(Xe,dt="info")=>{var Qt=`t_${Date.now()}_${Math.random().toString(16).slice(2)}`,yi={id:Qt,msg:String(Xe||""),kind:dt,ts:Date.now()};React.useEffect(()=>{try{window.__FOF_PUSH_TOAST=ye}catch(os){}var zi=os=>{try{var as=os&&os.detail?os.detail:{},ro=as.message||as.msg||as.text||"Done",n=as.kind||"info";ye(ro,n)}catch(as){}};return window.addEventListener("fof:toast",zi),()=>window.removeEventListener("fof:toast",zi)},[]),C(zi=>[yi,...zi||[]].slice(0,4)),setTimeout(()=>{C(zi=>(zi||[]).filter(os=>os.id!==Qt))},2400)},le=Xe=>{try{return(typeof Xe=="number"?new Date(Xe):new Date(Xe)).toLocaleString([],{weekday:"short",hour:"2-digit",minute:"2-digit"})}catch(dt){return""}},O=Xe=>{try{var dt=typeof Xe=="number"?Xe:new Date(Xe).getTime(),Qt=Math.max(0,dt-Date.now()),yi=Math.round(Qt/6e4);if(yi<=1)return"<1m";var zi=Math.floor(yi/(60*24)),os=Math.floor((yi-zi*60*24)/60),as=yi-zi*60*24-os*60;return zi>0?`${zi}d ${os}h`:os>0?`${os}h ${as}m`:`${as}m`}catch(dt){return""}},qe=Xe=>{var dt=Number(Xe||0);return dt>=85?{badge:"border-red-400/40 bg-red-500/10 text-red-200",dot:"bg-red-400"}:dt>=65?{badge:"border-orange-400/40 bg-orange-500/10 text-orange-200",dot:"bg-orange-400"}:dt>=45?{badge:"border-amber-400/40 bg-amber-500/10 text-amber-200",dot:"bg-amber-400"}:{badge:"border-emerald-400/40 bg-emerald-500/10 text-emerald-200",dot:"bg-emerald-400"}},Pt=Xe=>{var dt=String(Xe||"").toUpperCase();return dt==="CHURN"?{label:"Check-in risk",icon:"UserX",pill:"border-red-400/25 bg-red-500/10 text-red-200"}:dt==="COMPLIANCE"?{label:"Adherence drop",icon:"CheckCircle2",pill:"border-amber-400/25 bg-amber-500/10 text-amber-200"}:dt==="INJURY_RISK"?{label:"Recovery / fatigue",icon:"Activity",pill:"border-orange-400/25 bg-orange-500/10 text-orange-200"}:dt==="OPPORTUNITY"?{label:"Opportunity",icon:"Sparkles",pill:"border-emerald-400/25 bg-emerald-500/10 text-emerald-200"}:{label:dt||"Signal",icon:"BellRing",pill:"border-white/15 bg-white/5 text-white/80"}},Za=Xe=>{var dt=typeof Xe=="number"?Xe:Number(Xe||0);return dt>=80?{label:"High",tone:"text-emerald-300",dot:"bg-emerald-400"}:dt>=65?{label:"OK",tone:"text-amber-300",dot:"bg-amber-400"}:dt>=50?{label:"Low",tone:"text-orange-300",dot:"bg-orange-400"}:{label:"Critical",tone:"text-red-300",dot:"bg-red-400"}},Ma=(Xe,dt=null)=>{var n,y,be;var Qt="fof_inbox_v1";if(!Xe||typeof localStorage=="undefined")return null;var yi=(ie,Dt)=>{try{return JSON.parse(ie)}catch(b){return Dt}},zi=localStorage.getItem(Qt);var os=yi(zi||"null",null);(!os||!os.threads||!os.messages)&&(os={threads:[],messages:{}});var as="t_client_"+Xe;if(!(os.threads||[]).find(ie=>ie.id===as)){var ie=E.get(Xe)||{name:"Client"},Dt={id:as,type:"CLIENT",clientId:Xe,title:ie.name,participants:["You",ie.name],lastAt:Date.now(),unread:0};os.threads=[Dt,...os.threads||[]],os.messages={...os.messages||{},[as]:[{id:"m_seed",from:"You",ts:Date.now(),body:"Hey! Quick note from your coach."}]},localStorage.setItem(Qt,JSON.stringify(os));try{Bt("trainer.inbox.thread_created",{type:"CLIENT",clientId:Xe,source:"daily_workflow"})}catch(b){}}try{if(dt&&dt.id){var ie=localStorage.getItem(Qt);var Dt=yi(ie||"null",null);(!Dt||!Dt.threads||!Dt.messages)&&(Dt={threads:[],messages:{}});var b=(Dt.threads||[]).findIndex(We=>We.id===as);if(b>=0){var We=Dt.threads[b]||{},da={id:String(dt.id),type:String(dt.type||""),severity:String(dt.severity||""),confidence:Number(dt.confidence||0),summary:String(dt.summary||""),evidence:Array.isArray(dt.evidence)?dt.evidence.slice(0,8):[]};Dt.threads[b]={...We,linkedTriageId:da.id,triageMeta:{type:da.type,severity:da.severity,confidence:da.confidence,summary:da.summary}};var ii="m_triage_"+da.id,jt=Array.isArray((n=Dt.messages)==null?void 0:n[as])?Dt.messages[as].slice():[];jt.some(Na=>String(Na.id||"")===ii)||(jt.push({id:ii,from:"System",ts:Date.now(),body:`Linked to TRIAGE: [${da.type}] \u2022 Severity: ${da.severity} \u2022 Confidence: ${(da.confidence*100).toFixed(0)}%
Reason: ${da.summary}`}),Dt.messages={...Dt.messages||{},[as]:jt}),localStorage.setItem(Qt,JSON.stringify(Dt))}window.__FOF_TDEP=window.__FOF_TDEP||{},window.__FOF_TDEP.__pendingOpenThreadTriage=dt?{id:String(dt.id),type:String(dt.type||""),severity:String(dt.severity||""),confidence:Number(dt.confidence||0),summary:String(dt.summary||"")}:null;try{(be=(y=window.__FOF_TDEP)==null?void 0:y.logEvent)==null||be.call(y,"triage.open_thread",{signalId:String(dt.id),clientId:String(Xe)},{surface:"triage",module:"linkage"})}catch(We){}}}catch(ie){}try{window.__FOF_TDEP=window.__FOF_TDEP||{},window.__FOF_TDEP.__pendingOpenThreadId=as,window.__FOF_TDEP.__pendingOpenThreadAt=te()}catch(ie){}return as},$a=Xe=>{var dt=E.get(Xe);dt&&zt&&zt(dt),u("CLIENT_ACTION_MODE")},Yt=Xe=>{var dt=E.get(Xe);dt&&zt&&zt(dt),u("READINESS_DETAIL")},it=(Xe,dt=null)=>{var Qt=E.get(Xe);Qt&&zt&&zt(Qt),Ma(Xe,dt),u("INBOX")},Ut=Xe=>{var dt;try{if(!Xe)return;(dt=o==null?void 0:o.markInProgress)==null||dt.call(o,Xe),m(Qt=>(Qt+1)%1e6),ye("Marked as in progress","success")}catch(Qt){ye("Could not update status","error")}},ce=(Xe,dt)=>{var Qt;try{if(!Xe)return;(Qt=o==null?void 0:o.snoozeSignal)==null||Qt.call(o,Xe,dt),m(yi=>(yi+1)%1e6),ye(`Snoozed for ${dt} min`,"warn")}catch(yi){ye("Could not snooze item","error")}},Vt=Xe=>{var dt;try{if(!Xe)return;(dt=o==null?void 0:o.resolveSignal)==null||dt.call(o,Xe),m(Qt=>(Qt+1)%1e6),ye("Resolved and removed from queue","success")}catch(Qt){ye("Could not resolve item","error")}},Fe=({icon:Xe,title:dt,desc:Qt,onClick:yi})=>React.createElement("button",{type:"button",onClick:yi,className:"text-left rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 p-4 flex gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center shrink-0"},React.createElement(_,{name:Xe,size:18,className:"text-white/80"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[12px]"},dt),React.createElement("div",{className:"text-[11px] text-white/55"},Qt))),v=typeof window!="undefined"?window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||[]:[],Te=v&&v[0]?v[0]:null,Se=v&&v[1]?v[1]:null,yt=[{time:"10:00",title:`${Te?Te.name:"Client"} \u2014 Strength`,meta:"Gym floor",action:()=>u("CALENDAR")},{time:"14:30",title:`${Se?Se.name:"Client"} \u2014 Rehab`,meta:"Recovery focus",action:()=>u("CALENDAR")},{time:"18:00",title:"Group: Fat Loss Cohort",meta:"Online",action:()=>u("CALENDAR")}],St=React.useMemo(()=>{try{var Xe=typeof localStorage!="undefined"?localStorage.getItem("fof_inbox_v1"):null,dt=Xe?JSON.parse(Xe):null;return((dt==null?void 0:dt.threads)||[]).reduce((yi,zi)=>yi+((zi.unread||0)>0?1:0),0)}catch(Xe){return 0}},[d]);return React.createElement("div",{className:"space-y-5"},Ce.length?React.createElement("div",{className:"fixed top-4 right-4 z-[9999] space-y-2"},Ce.map(Xe=>React.createElement("div",{key:Xe.id,className:"max-w-[340px] rounded-2xl border px-3 py-2 shadow-xl backdrop-blur "+(Xe.kind==="success"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-50":Xe.kind==="warn"?"border-amber-400/30 bg-amber-500/10 text-amber-50":Xe.kind==="error"?"border-red-400/30 bg-red-500/10 text-red-50":"border-white/15 bg-black/40 text-white")},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest opacity-70"},Xe.kind==="success"?"Done":Xe.kind==="warn"?"Update":Xe.kind==="error"?"Error":"Info"),React.createElement("div",{className:"text-[12px] font-semibold"},Xe.msg)))):null,React.createElement("div",{className:"flex items-end justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Daily Workflow"),React.createElement("div",{className:"text-white font-extrabold text-[18px]"},"Coach Operating System"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Prioritized actions driven by ",React.createElement("span",{className:"text-white font-semibold"},"Unified AI Triage")," \u2022 Readiness = Capacity Score")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap justify-end"},React.createElement("button",{type:"button",onClick:()=>u("HUB"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Home"),React.createElement("button",{type:"button",onClick:()=>ta("Triage rules","Triage rules are active and enforced system-wide. Advanced SLA and threshold configuration will be available in a future admin configuration phase."),className:"px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] font-mono uppercase tracking-widest text-emerald-100"},"Rules"))),React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 lg:col-span-12 rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-red-400/20 bg-red-500/10 flex items-center justify-center"},React.createElement(_,{name:"BellRing",size:18,className:"text-red-200"})),React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Attention Required"),React.createElement("div",{className:"text-[11px] text-white/55"},"Ranked by severity \xD7 confidence \xD7 recency"))),React.createElement("div",{className:"text-[11px] text-white/55 font-mono"},I.length," shown \u2022 ",g.length," total")),React.createElement("div",{className:"p-3 border-b border-white/10 bg-black/10"},React.createElement("div",{className:"flex flex-wrap items-center gap-2 justify-between"},React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("div",{className:"relative"},React.createElement("input",{value:F.q,onChange:Xe=>D(dt=>({...dt||{},q:Xe.target.value})),placeholder:"Search client / signal\u2026",className:"w-[220px] max-w-[70vw] px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white placeholder:text-white/35 outline-none focus:border-white/25"}),React.createElement("div",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white/35"},React.createElement(_,{name:"Search",size:14}))),React.createElement("select",{value:F.type,onChange:Xe=>D(dt=>({...dt||{},type:Xe.target.value})),className:"px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"ALL"},"All types"),React.createElement("option",{value:"CHURN"},"Churn"),React.createElement("option",{value:"COMPLIANCE"},"Compliance"),React.createElement("option",{value:"INJURY_RISK"},"Injury risk"),React.createElement("option",{value:"OPPORTUNITY"},"Opportunity"),React.createElement("option",{value:"OTHER"},"Other")),React.createElement("select",{value:F.status,onChange:Xe=>D(dt=>({...dt||{},status:Xe.target.value})),className:"px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"OPEN"},"Open"),React.createElement("option",{value:"IN_PROGRESS"},"In progress"),React.createElement("option",{value:"SNOOZED"},"Snoozed"),React.createElement("option",{value:"RESOLVED"},"Resolved"),React.createElement("option",{value:"ALL"},"All statuses")),React.createElement("select",{value:k,onChange:Xe=>T(Xe.target.value),className:"px-3 py-2 rounded-2xl border border-white/12 bg-black/30 text-[12px] text-white outline-none focus:border-white/25"},React.createElement("option",{value:"PRIORITY"},"Sort: Priority"),React.createElement("option",{value:"SEVERITY_DESC"},"Sort: Severity (high\u2192low)"),React.createElement("option",{value:"SEVERITY_ASC"},"Sort: Severity (low\u2192high)"),React.createElement("option",{value:"SNOOZE_ENDING"},"Sort: Snooze ending soon"),React.createElement("option",{value:"NEWEST"},"Sort: Newest"),React.createElement("option",{value:"OLDEST"},"Sort: Oldest")),React.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-2xl border border-white/12 bg-black/30"},React.createElement("span",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},"Min sev"),React.createElement("input",{type:"range",min:"0",max:"100",value:F.minSev,onChange:Xe=>D(dt=>({...dt||{},minSev:Number(Xe.target.value||0)})),className:"w-[120px]"}),React.createElement("span",{className:"text-[11px] text-white/80 font-mono w-[32px] text-right"},Math.round(Number(F.minSev||0)))),React.createElement("button",{type:"button",onClick:()=>D({q:"",type:"ALL",status:"OPEN",minSev:0}),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/70"},"Clear")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex items-center rounded-2xl border border-white/12 bg-black/30 overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>{oe("CARDS"),Et()},className:"px-3 py-2 text-[11px] font-mono uppercase tracking-widest "+(he==="CARDS"?"bg-white/10 text-white":"text-white/60 hover:text-white"),title:"Card view"},"Cards"),React.createElement("div",{className:"w-px self-stretch bg-white/10"}),React.createElement("button",{type:"button",onClick:()=>{oe("LIST")},className:"px-3 py-2 text-[11px] font-mono uppercase tracking-widest "+(he==="LIST"?"bg-white/10 text-white":"text-white/60 hover:text-white"),title:"List view"},"List")),React.createElement("div",{className:"text-[11px] text-white/45 font-mono"},"Showing ",I.length," / ",g.length)))),ya&&ya.size>0?React.createElement("div",{className:"mx-4 mt-4 rounded-3xl border border-white/12 bg-black/25 p-3 flex flex-wrap items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"px-2.5 py-1 rounded-full bg-white/10 border border-white/10 text-[11px] text-white/80 font-mono uppercase tracking-widest"},ya.size," selected"),React.createElement("button",{type:"button",onClick:Ye,className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 text-[12px] text-white/70 hover:bg-white/10"},"Clear")),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-[11px] text-white/45 font-mono mr-1"},"Bulk"),React.createElement("button",{type:"button",onClick:()=>Tt(60),className:"px-3 py-1.5 rounded-2xl border border-sky-400/20 bg-sky-500/10 text-[12px] text-sky-100 hover:bg-sky-500/15 inline-flex items-center gap-2"},React.createElement(_,{name:"Timer",size:14})," Snooze 1h"),React.createElement("button",{type:"button",onClick:()=>Tt(240),className:"px-3 py-1.5 rounded-2xl border border-sky-400/20 bg-sky-500/10 text-[12px] text-sky-100 hover:bg-sky-500/15 inline-flex items-center gap-2"},React.createElement(_,{name:"Timer",size:14})," Snooze 4h"),React.createElement("button",{type:"button",onClick:()=>Tt(1440),className:"px-3 py-1.5 rounded-2xl border border-sky-400/20 bg-sky-500/10 text-[12px] text-sky-100 hover:bg-sky-500/15 inline-flex items-center gap-2"},React.createElement(_,{name:"Timer",size:14})," Snooze 1d"),React.createElement("button",{type:"button",onClick:_t,className:"px-3 py-1.5 rounded-2xl border border-amber-400/20 bg-amber-500/10 text-[12px] text-amber-100 hover:bg-amber-500/15 inline-flex items-center gap-2"},React.createElement(_,{name:"Activity",size:14})," In progress"),React.createElement("button",{type:"button",onClick:P,className:"px-3 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 text-[12px] text-emerald-100 hover:bg-emerald-500/15 inline-flex items-center gap-2"},React.createElement(_,{name:"CheckCircle2",size:14})," Resolve"))):null,React.createElement("div",{className:"p-4 space-y-3"},I.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"You\u2019re clear \u{1F3AF}"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"No urgent items right now. Use Quick Actions below to plan ahead.")):I.slice(0,50).map(Xe=>{var be;var dt=Pt(Xe.type),Qt=qe(Xe.severity),yi=Xe.clientId&&E.get(Xe.clientId)||null,zi=(be=yi==null?void 0:yi.capacityScoreNow)!=null?be:yi==null?void 0:yi.readiness,os=Za(zi),as=String(Xe.status||"OPEN"),ro=String(as||"OPEN").toUpperCase()==="INPROGRESS"?"IN_PROGRESS":String(as||"OPEN").toUpperCase(),n=Xe.snoozedUntil||Xe.snoozeUntil||Xe.snoozed_until||Xe.snooze_until||Xe.meta&&(Xe.meta.snoozedUntil||Xe.meta.snoozeUntil)||null,y=()=>Xe.type==="INJURY_RISK"?()=>Yt(Xe.clientId):Xe.type==="COMPLIANCE"?()=>$a(Xe.clientId):Xe.type==="CHURN"?()=>it(Xe.clientId,Xe):Xe.type==="OPPORTUNITY"?()=>$a(Xe.clientId):()=>$a(Xe.clientId);return he==="LIST"?React.createElement("div",{key:Xe.id,className:"rounded-2xl border border-white/12 bg-black/20 px-3 py-2"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"pt-1"},React.createElement("input",{type:"checkbox",checked:ya.has(Xe.id),onChange:()=>Jt(Xe.id),className:"h-4 w-4 accent-white","aria-label":"Select"})),React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[13px] truncate"},yi?yi.name:Xe.title||"Action needed"),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},Xe.title||"Review and take the next best action.")),React.createElement("div",{className:"shrink-0 flex items-center gap-2 flex-wrap justify-end"},React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border text-[9px] font-mono uppercase tracking-widest "+Qt.badge},React.createElement("span",{className:"w-1.5 h-1.5 rounded-full "+Qt.dot}),"Sev ",Math.round(Number(Xe.severity||0))),React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border border-white/12 bg-white/5 text-[9px] font-mono uppercase tracking-widest text-white/70"},n?"SNOOZED":ro),n?React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border border-sky-400/20 bg-sky-500/10 text-[9px] font-mono uppercase tracking-widest text-sky-100"},O(n)," left"):null)),React.createElement("div",{className:"mt-2 flex items-center justify-between gap-2"},React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border text-[9px] font-mono uppercase tracking-widest "+dt.pill},React.createElement(_,{name:dt.icon,size:13,className:"text-white/80"}),dt.label),React.createElement("button",{type:"button",onClick:()=>Me(Xe.id),className:"px-2.5 py-1 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/75 inline-flex items-center gap-2"},ke.has(Xe.id)?"Hide":"Details",React.createElement(_,{name:"ChevronDown",size:14,className:"transition-transform "+(ke.has(Xe.id)?"rotate-180":"")}))),ke.has(Xe.id)?React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/10 overflow-hidden"},React.createElement("div",{className:"p-3"},React.createElement("div",{className:"grid grid-cols-12 gap-3"},React.createElement("div",{className:"col-span-12 md:col-span-8 min-w-0"},Xe.evidence&&Xe.evidence.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Evidence"),React.createElement("ul",{className:"mt-2 space-y-1"},Xe.evidence.slice(0,3).map((ie,Dt)=>React.createElement("li",{key:Dt,className:"text-[11px] text-white/70"},React.createElement("span",{className:"text-white/50"},"\u2022")," ",ie)))):null),yi?React.createElement("div",{className:"col-span-12 md:col-span-4"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2.5 h-full"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Client snapshot"),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Capacity"),React.createElement("div",{className:"text-[11px] font-mono "+os.tone},React.createElement("span",{className:"inline-block w-1.5 h-1.5 rounded-full mr-1 "+os.dot}),Math.round(Number(zi||0)),"/100 ",os.label)),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Adherence (7d)"),React.createElement("div",{className:"text-[11px] text-white/80 font-mono"},Math.round(Number(yi.adherence7d||0)),"%")),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Last check-in"),React.createElement("div",{className:"text-[11px] text-white/80 font-mono"},yi.lastCheckInAt?le(yi.lastCheckInAt):"\u2014")))):null)),React.createElement("div",{className:"px-3 py-2 border-t border-white/10 bg-black/10 flex flex-wrap items-center gap-2 justify-between"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:y(),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/80"},"Open"),React.createElement("button",{type:"button",onClick:()=>{try{if(Xe.clientId){var ie=E.get(Xe.clientId);ie&&zt&&zt(ie)}}catch(ie){}try{u("AI_HUB")}catch(ie){}},className:"px-2.5 py-1.5 rounded-2xl border border-purple-400/20 bg-purple-500/10 hover:bg-purple-500/15 text-[10px] font-mono uppercase tracking-widest text-purple-100"},"AI Hub"),Xe.clientId?React.createElement("button",{type:"button",onClick:()=>it(Xe.clientId,Xe),className:"px-2.5 py-1.5 rounded-2xl border border-sky-400/20 bg-sky-500/10 hover:bg-sky-500/15 text-[10px] font-mono uppercase tracking-widest text-sky-100"},"Message"):null,React.createElement("button",{type:"button",onClick:()=>Ut(Xe.id),className:"px-2.5 py-1.5 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[10px] font-mono uppercase tracking-widest text-amber-100"},"In progress"),React.createElement("button",{type:"button",onClick:()=>ce(Xe.id,60),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Snooze 60m")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Vt(Xe.id),className:"px-2.5 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Resolve")))):null))):React.createElement("div",{key:Xe.id,className:"rounded-3xl border border-white/12 bg-black/20 overflow-hidden"},React.createElement("div",{className:"p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0 flex items-start gap-3"},React.createElement("label",{className:"mt-0.5 inline-flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:ya.has(Xe.id),onChange:()=>Jt(Xe.id),className:"h-4 w-4 accent-white"}),React.createElement("span",{className:"text-[10px] text-white/55 font-mono uppercase tracking-widest"},"Select")),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[13px] truncate"},yi?yi.name:Xe.title||"Action needed"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},Xe.title||"Review and take the next best action."))),React.createElement("div",{className:"shrink-0 flex items-center gap-2 flex-wrap justify-end"},React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border text-[9px] font-mono uppercase tracking-widest "+Qt.badge},React.createElement("span",{className:"w-1.5 h-1.5 rounded-full "+Qt.dot}),"Severity ",Math.round(Number(Xe.severity||0))),React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border border-white/12 bg-white/5 text-[9px] font-mono uppercase tracking-widest text-white/70"},"Confidence ",Math.round(Number(Xe.confidence||0)*100),"%"),React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border border-white/12 bg-white/5 text-[9px] font-mono uppercase tracking-widest text-white/70"},n?"SNOOZED":ro),n?React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border border-sky-400/20 bg-sky-500/10 text-[9px] font-mono uppercase tracking-widest text-sky-100"},"Snoozed \u2022 ",O(n)," left",React.createElement("span",{className:"text-sky-100/70 normal-case tracking-normal font-sans"},"(until ",le(n),")")):null)),React.createElement("div",{className:"mt-2 flex items-center gap-2 flex-wrap"},React.createElement("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full border text-[9px] font-mono uppercase tracking-widest "+dt.pill},React.createElement(_,{name:dt.icon,size:13,className:"text-white/80"}),dt.label)),React.createElement("div",{className:"mt-2 grid grid-cols-12 gap-3"},React.createElement("div",{className:"col-span-12 md:col-span-8 min-w-0"},Xe.evidence&&Xe.evidence.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Evidence"),React.createElement("ul",{className:"mt-2 space-y-1"},Xe.evidence.slice(0,3).map((ie,Dt)=>React.createElement("li",{key:Dt,className:"text-[11px] text-white/70"},React.createElement("span",{className:"text-white/50"},"\u2022")," ",ie)))):null),yi?React.createElement("div",{className:"col-span-12 md:col-span-4"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2.5 h-full"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Client snapshot"),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Capacity"),React.createElement("div",{className:"text-[11px] font-mono "+os.tone},React.createElement("span",{className:"inline-block w-1.5 h-1.5 rounded-full mr-1 "+os.dot}),Math.round(Number(zi||0)),"/100 ",os.label)),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Adherence (7d)"),React.createElement("div",{className:"text-[11px] text-white/80 font-mono"},Math.round(Number(yi.adherence7d||0)),"%")),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/60"},"Last check-in"),React.createElement("div",{className:"text-[11px] text-white/80 font-mono"},yi.lastCheckInAt?le(yi.lastCheckInAt):"\u2014")))):null)),React.createElement("div",{className:"p-3 border-t border-white/10 bg-black/10 flex flex-wrap items-center gap-2 justify-between"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:y(),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/80"},"Open"),React.createElement("button",{type:"button",onClick:()=>{try{if(Xe.clientId){var ie=E.get(Xe.clientId);ie&&zt&&zt(ie)}}catch(ie){}try{u("AI_HUB")}catch(ie){}},className:"px-2.5 py-1.5 rounded-2xl border border-purple-400/20 bg-purple-500/10 hover:bg-purple-500/15 text-[10px] font-mono uppercase tracking-widest text-purple-100"},"AI Hub"),Xe.clientId?React.createElement("button",{type:"button",onClick:()=>it(Xe.clientId,Xe),className:"px-2.5 py-1.5 rounded-2xl border border-sky-400/20 bg-sky-500/10 hover:bg-sky-500/15 text-[10px] font-mono uppercase tracking-widest text-sky-100"},"Message"):null,React.createElement("button",{type:"button",onClick:()=>Ut(Xe.id),className:"px-2.5 py-1.5 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[10px] font-mono uppercase tracking-widest text-amber-100"},"In progress"),React.createElement("button",{type:"button",onClick:()=>ce(Xe.id,60),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Snooze 60m")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Vt(Xe.id),className:"px-2.5 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Resolve"))))})),React.createElement("div",{className:"p-4 border-t border-white/10 flex items-center justify-between gap-3 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>u("CLIENT_LIST"),className:"text-[11px] text-white/75 hover:text-white underline underline-offset-4"},"Open client list"),React.createElement("div",{className:"text-[11px] text-white/45 font-mono"},"Engine: FOF-TDEP TRIAGE v1 \u2022 Events logged to ActionLog v1")))))},lr=()=>{var jt,Kt,Na,ra,Ti,Ee,ae,Ot;var o="fof_inbox_v1",d=(xe,p)=>{try{return JSON.parse(xe)}catch(R){return p}},m=()=>{var xe=typeof localStorage!="undefined"?localStorage.getItem(o):null,p=d(xe||"null",null);if(p&&p.threads&&p.messages)return p;var R=(Oi||[]).slice(0,6),Ve=Date.now(),pa=[{id:"t_team",type:"TEAM",title:"Ops / Support",participants:["You","Support"],lastAt:Ve-36e5,unread:1,pinned:!0},{id:"t_system",type:"SYSTEM",title:"System Alerts",participants:["FlowOFit"],lastAt:Ve-72e5,unread:2,pinned:!0},...R.map((pi,cs)=>({id:"t_client_"+pi.id,type:"CLIENT",clientId:pi.id,title:pi.name,participants:["You",pi.name],lastAt:Ve-(cs+1)*54e5,unread:cs===0?1:0,pinned:!1}))],qt={};pa.forEach(pi=>{if(pi.type==="CLIENT"){var cs=(Oi||[]).find(Gi=>Gi.id===pi.clientId)||{name:"Client"};qt[pi.id]=[{id:"m1",from:cs.name,ts:pi.lastAt-3e5,body:"Hey coach \u2014 quick question about this week\u2019s plan."},{id:"m2",from:"You",ts:pi.lastAt-18e4,body:"Of course. What\u2019s up? (This is a demo thread.)"}]}else pi.type==="TEAM"?qt[pi.id]=[{id:"m1",from:"Support",ts:pi.lastAt-24e4,body:"New ticket: client can\u2019t see their updated plan. Want us to nudge them to refresh?"},{id:"m2",from:"You",ts:pi.lastAt-12e4,body:"Yes please \u2014 also ask for device + app version."}]:qt[pi.id]=[{id:"m1",from:"FlowOFit",ts:pi.lastAt-6e5,body:"2 clients have not checked in this week (Capacity compliance risk)."},{id:"m2",from:"FlowOFit",ts:pi.lastAt-3e5,body:"Billing warning: 1 subscription will retry in 24h."}]});var ka={threads:pa,messages:qt};return typeof localStorage!="undefined"&&localStorage.setItem(o,JSON.stringify(ka)),ka},[E,g]=React.useState(()=>m()),[f,F]=React.useState(""),[D,k]=React.useState("ALL"),[T,he]=React.useState(()=>{var xe;return((xe=m().threads[0])==null?void 0:xe.id)||null});React.useEffect(()=>{var xe,p;try{var R=typeof window!="undefined"?(xe=window.__FOF_TDEP)==null?void 0:xe.__pendingOpenThreadId:null;if(R){he(R);try{k("ALL")}catch(Ve){}try{F("")}catch(Ve){}try{var Ve=typeof window!="undefined"?(p=window.__FOF_TDEP)==null?void 0:p.__pendingOpenThreadTriage:null;Ve&&Ve.id&&(g(pa=>{var qt=(pa.threads||[]).map(ka=>ka.id!==R?ka:{...ka,linkedTriageId:String(Ve.id),triageMeta:{type:String(Ve.type||""),severity:String(Ve.severity||""),confidence:Number(Ve.confidence||0),summary:String(Ve.summary||"")}});return{...pa,threads:qt}}),typeof window!="undefined"&&window.__FOF_TDEP&&(window.__FOF_TDEP.__pendingOpenThreadTriage=null))}catch(Ve){}typeof window!="undefined"&&window.__FOF_TDEP&&(window.__FOF_TDEP.__pendingOpenThreadId=null)}}catch(R){}},[]);var[oe,ke]=React.useState(""),Re="fof.tdep.msg_templates.v1",Me=["ALL","CHECK-IN","COMPLIANCE","CHURN","PROGRAM","NUTRITION","GENERAL","CUSTOM"],Et=(xe,p={})=>{try{window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.track=="function"?window.FOF_EVENT_LOG_V1.track(xe,{...p||{},surface:"INBOX",phase:"2.3"}):typeof Bt=="function"&&Bt(xe,{...p||{},surface:"INBOX",phase:"2.3"})}catch(R){}},ya=React.useCallback(()=>[{id:"tpl_chk_1",title:"Weekly check-in (sleep/soreness/stress)",category:"CHECK-IN",body:`Quick check-in please:
\u2022 Sleep (hrs + quality 1\u201310)
\u2022 Soreness (1\u201310)
\u2022 Stress (1\u201310)
\u2022 Steps / activity
Reply in 1 message \u{1F64C}`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_comp_1",title:"Compliance nudge (missed sessions)",category:"COMPLIANCE",body:`I noticed a couple sessions were missed. No stress \u2014 var\u2019s adjust.
What got in the way (time/energy/soreness/other)?
Reply with 1\u20132 constraints and I\u2019ll adapt the plan.`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_churn_1",title:"Churn risk save (re-engage)",category:"CHURN",body:`I\u2019m checking in because your activity dropped recently.
Do you want:
A) easier week (lighter plan)
B) short 20\u201330 min sessions
C) pause + restart date
Reply A/B/C and I\u2019ll set it up.`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_prog_1",title:"Program explanation (why this week)",category:"PROGRAM",body:`This week is built to:
1) build consistency
2) manage fatigue
3) progress safely
If any movement feels off, tell me which exercise + pain scale (0\u201310) and I\u2019ll swap it.`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_nut_1",title:"Nutrition adherence (simple reset)",category:"NUTRITION",body:`Let\u2019s do a simple reset for 48 hours:
\u2022 Protein each meal
\u2022 2L water
\u2022 8k steps
\u2022 1 veggie serving per meal
Send me your next 2 meals and I\u2019ll adjust.`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_gen_1",title:"Keep it light this week",category:"GENERAL",body:`Nice \u2014 var\u2019s keep it light this week.
I\u2019ll dial intensity down and focus on consistency. \u2705`,usageCount:0,lastUsedAt:null,createdAt:Date.now()},{id:"tpl_gen_2",title:"Booked call confirmation",category:"GENERAL",body:`Booked \u2014 see you on the call.
Bring any constraints (time, equipment, pain/soreness) so we can tailor the next block.`,usageCount:0,lastUsedAt:null,createdAt:Date.now()}],[]),[Ct,Jt]=React.useState(()=>{try{var xe=wt(Re,null);if(Array.isArray(xe)&&xe.length)return xe}catch(xe){}return ya()});React.useEffect(()=>{try{na(Re,Ct)}catch(xe){}},[JSON.stringify(Ct||[])]);var[Ye,Tt]=React.useState(!1),[_t,P]=React.useState("ALL"),[I,te]=React.useState(!1),[Ce,C]=React.useState(""),[ye,le]=React.useState("GENERAL"),[O,qe]=React.useState(""),[Pt,Za]=React.useState(null),[Ma,$a]=React.useState(null);React.useEffect(()=>{if(I)try{qe(String(oe||"")),Ce||C("New template")}catch(xe){}},[I]);var Yt=xe=>{try{var p=String(xe||"");Jt(R=>(R||[]).map(Ve=>Ve.id===p?{...Ve,usageCount:(Ve.usageCount||0)+1,lastUsedAt:Date.now()}:Ve))}catch(p){}},it=React.useMemo(()=>{var xe=Array.isArray(Ct)?Ct.slice():[];return _t==="ALL"?xe:xe.filter(p=>String(p.category||"").toUpperCase()===String(_t||"").toUpperCase())},[JSON.stringify(Ct||[]),_t]),Ut=React.useMemo(()=>{var ka,pi;var xe=[{id:"qr_ok",label:"Acknowledge",text:"Got it \u2705 Thanks for the update.",hint:"Simple acknowledgment"},{id:"qr_q1",label:"Ask 1 constraint",text:"What\u2019s the #1 constraint right now (time/energy/soreness/other)?",hint:"Get constraints fast"},{id:"qr_scale",label:"Pain scale",text:"On a scale 0\u201310, what\u2019s the discomfort/pain level, and where exactly?",hint:"Safety check"},{id:"qr_sched",label:"Schedule",text:"What time of day is most realistic for training this week?",hint:"Time alignment"}],p=Qt||null,R=String((p==null?void 0:p.type)||((ka=St==null?void 0:St.triageMeta)==null?void 0:ka.type)||"").toUpperCase(),Ve=String((p==null?void 0:p.severity)||((pi=St==null?void 0:St.triageMeta)==null?void 0:pi.severity)||"").toUpperCase(),pa=xe.slice();R.includes("CHURN")&&pa.unshift({id:"qr_churn_a",label:"Re-engage options",text:`Want me to set:
A) easier week
B) short sessions
C) pause + restart date
Reply A/B/C.`,hint:"Churn save"},{id:"qr_churn_b",label:"Micro-goal",text:"Let\u2019s pick ONE micro-goal for 3 days (10\u201320 min). What feels doable?",hint:"Reduce friction"}),(R.includes("COMP")||R.includes("COMPLIANCE"))&&pa.unshift({id:"qr_comp_a",label:"Missed sessions",text:"No stress \u2014 consistency beats perfection. What caused the misses?",hint:"Compliance recovery"},{id:"qr_comp_b",label:"Adjust plan",text:"I can adjust the plan (volume/intensity/time). Which should I change first?",hint:"Offer adaptation"}),(R.includes("INJ")||R.includes("PAIN"))&&pa.unshift({id:"qr_inj_a",label:"Safety check",text:`Let\u2019s keep this safe. Stop any painful movement. Tell me:
1) exact location
2) pain 0\u201310
3) what triggers it.`,hint:"Injury protocol"}),(R.includes("ENGAGE")||R.includes("INACTIVE"))&&pa.unshift({id:"qr_eng_a",label:"Restart today",text:"Can we restart with a quick 15\u201320 min session today? I\u2019ll keep it simple.",hint:"Re-activation"}),Ve==="HIGH"&&pa.unshift({id:"qr_hi",label:"High priority",text:"I\u2019m prioritizing this today. Reply with your availability and I\u2019ll act immediately.",hint:"High severity"});var qt=new Set;return pa.filter(cs=>qt.has(cs.id)?!1:(qt.add(cs.id),!0))},[St==null?void 0:St.id,JSON.stringify((St==null?void 0:St.triageMeta)||{}),Qt==null?void 0:Qt.id,Qt==null?void 0:Qt.type,Qt==null?void 0:Qt.severity,Fe]),[ce,Vt]=React.useState("CHAT"),[Fe,v]=React.useState(0);React.useEffect(()=>{var xe=()=>v(Ve=>(Ve+1)%1e6),p=Ve=>{try{var pa=String((Ve==null?void 0:Ve.key)||"");(pa.startsWith("fof.tdep.triage_")||pa==="fof.tdep.action_log.v1")&&xe()}catch(pa){}};try{window.addEventListener("storage",p)}catch(Ve){}var R=setInterval(()=>xe(),4e3);return()=>{try{window.removeEventListener("storage",p)}catch(Ve){}clearInterval(R)}},[]),React.useEffect(()=>{typeof localStorage!="undefined"&&localStorage.setItem(o,JSON.stringify(E))},[E]);var Te=xe=>{g(p=>{var pa,qt;var R=(p.threads||[]).map(ka=>ka.id===xe?{...ka,pinned:!ka.pinned}:ka),Ve={...p,threads:R};try{(qt=(pa=window.__FOF_TDEP)==null?void 0:pa.logEvent)==null||qt.call(pa,"trainer.inbox.thread_pinned_toggled",{threadId:xe,pinned:!!(R.find(ka=>ka.id===xe)||{}).pinned},{surface:"inbox",module:"comms"})}catch(ka){}return Ve})},Se=React.useMemo(()=>{var xe=new Map;return(Oi||[]).forEach(p=>xe.set(p.id,p)),xe},[Oi]),yt=React.useMemo(()=>{var xe=String(f||"").trim().toLowerCase();return(E.threads||[]).filter(p=>D==="UNREAD"?(p.unread||0)>0:D==="CLIENTS"?p.type==="CLIENT":D==="TEAM"?p.type==="TEAM":D==="SYSTEM"?p.type==="SYSTEM":!0).filter(p=>{if(!xe)return!0;var R=String(p.title||"").toLowerCase(),Ve=(p.participants||[]).join(" ").toLowerCase();return R.includes(xe)||Ve.includes(xe)}).slice().sort((p,R)=>(R.pinned?1:0)-(p.pinned?1:0)||(R.lastAt||0)-(p.lastAt||0))},[E,f,D]),St=React.useMemo(()=>(E.threads||[]).find(xe=>xe.id===T)||yt[0]||null,[E,T,yt]),za=React.useMemo(()=>{var xe;return St?((xe=E.messages)==null?void 0:xe[St.id])||[]:[]},[E,St]),Xe=typeof window!="undefined"?(jt=window.__FOF_TDEP)==null?void 0:jt.TRIAGE:null,dt=typeof window!="undefined"?(Kt=window.__FOF_TDEP)==null?void 0:Kt.logEvent:null,Qt=React.useMemo(()=>{var xe,p;try{var R=St==null?void 0:St.linkedTriageId;if(!R)return null;var Ve=(xe=Xe==null?void 0:Xe.getTriageState)==null?void 0:xe.call(Xe);return((p=Ve==null?void 0:Ve.signalsById)==null?void 0:p[R])||null}catch(R){return null}},[St,Fe]),yi=String((Qt==null?void 0:Qt.status)||(St!=null&&St.linkedTriageId?"OPEN":"")).toUpperCase();React.useEffect(()=>{St&&(St.unread||0)>0&&g(xe=>({...xe,threads:(xe.threads||[]).map(p=>p.id===St.id?{...p,unread:0}:p)}))},[T]);var zi=()=>{var xe=String(oe||"").trim();if(!xe||!St)return;var p=(Qt==null?void 0:Qt.id)||(St==null?void 0:St.linkedTriageId)||null,R={id:"m_"+Math.random().toString(16).slice(2),from:"You",ts:Date.now(),body:xe,meta:{templateId:Pt||null,quickReplyId:Ma||null,triageId:p}};g(Ve=>{var pa={...Ve.messages||{}},qt=Array.isArray(pa[St.id])?pa[St.id].slice():[];qt.push(R),pa[St.id]=qt;var ka=(Ve.threads||[]).map(pi=>pi.id===St.id?{...pi,lastAt:R.ts}:pi);return{...Ve,messages:pa,threads:ka}}),ke(""),Za(null),$a(null);try{Bt("trainer.inbox.message_sent",{threadType:St.type,threadId:St.id})}catch(Ve){}try{Et("message_sent",{threadId:St.id,threadType:St.type,triageId:p,templateId:R.meta.templateId,quickReplyId:R.meta.quickReplyId})}catch(Ve){}},[os,as]=React.useState(!1),[ro,n]=React.useState(""),[y,be]=React.useState(!1),ie=()=>{var xe;try{if(!(Qt!=null&&Qt.id))return;(xe=Xe==null?void 0:Xe.markInProgress)==null||xe.call(Xe,Qt.id);try{dt==null||dt("triage.mark_in_progress",{signalId:String(Qt.id),threadId:String((St==null?void 0:St.id)||"")},{surface:"inbox",module:"thread"})}catch(p){}try{Bt("trainer.inbox.triage_mark_in_progress",{signalId:String(Qt.id)})}catch(p){}}catch(p){}},Dt=()=>{var xe;try{if(!(Qt!=null&&Qt.id))return;(xe=Xe==null?void 0:Xe.resolveSignal)==null||xe.call(Xe,Qt.id,"RESOLVED_FROM_INBOX_THREAD");try{dt==null||dt("triage.resolve",{signalId:String(Qt.id),threadId:String((St==null?void 0:St.id)||""),note:String(ro||"")},{surface:"inbox",module:"thread"})}catch(p){}try{Bt("trainer.inbox.triage_resolved",{signalId:String(Qt.id)})}catch(p){}as(!1),n("");try{k("ALL")}catch(p){}try{F("")}catch(p){}}catch(p){}},b=xe=>{var p;try{if(!(Qt!=null&&Qt.id))return;var R=Number(xe||0);if(!R||R<5)return;(p=Xe==null?void 0:Xe.snoozeSignal)==null||p.call(Xe,Qt.id,R);try{dt==null||dt("triage.snooze",{signalId:String(Qt.id),minutes:R,threadId:String((St==null?void 0:St.id)||"")},{surface:"inbox",module:"thread"})}catch(Ve){}try{Bt("trainer.inbox.triage_snoozed",{signalId:String(Qt.id),minutes:R})}catch(Ve){}be(!1);try{k("ALL")}catch(Ve){}try{F("")}catch(Ve){}}catch(R){}},We=()=>{var qt;var xe=ct&&ct.id?ct.id:((qt=(Oi||[])[0])==null?void 0:qt.id)||null;if(!xe)return ta("No clients","Add a client first.");var p=Se.get(xe)||{name:"Client"},R="t_client_"+xe;if((E.threads||[]).find(ka=>ka.id===R))return he(R);var pa={id:R,type:"CLIENT",clientId:xe,title:p.name,participants:["You",p.name],lastAt:Date.now(),unread:0};g(ka=>({...ka,threads:[pa,...ka.threads||[]],messages:{...ka.messages||{},[R]:[{id:"m1",from:"You",ts:Date.now(),body:"Hey! Welcome \u2014 here are next steps."}]}})),he(R);try{Bt("trainer.inbox.thread_created",{type:"CLIENT",clientId:xe})}catch(ka){}},da=xe=>{try{return new Date(xe).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(p){return""}},ii=({t:xe})=>{var p=xe.id===T,R=(xe.unread||0)>0?React.createElement("span",{className:"ml-auto px-2 py-0.5 rounded-full text-[10px] font-mono border border-sky-400/40 bg-sky-500/10 text-sky-100"},xe.unread):React.createElement("span",{className:"ml-auto"}),Ve=xe.type==="CLIENT"?"User":xe.type==="TEAM"?"Users":"Bell",pa=xe.type==="CLIENT"?(Se.get(xe.clientId)||{}).segment?Se.get(xe.clientId).segment:"Client thread":xe.type==="TEAM"?"Internal":"Automations";return React.createElement("div",{className:"w-full rounded-2xl border p-3 flex items-center gap-3 "+(p?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.08)]":"border-white/10 bg-black/20 hover:bg-black/30")},React.createElement("div",{role:"button",tabIndex:0,onClick:()=>he(xe.id),onKeyDown:qt=>{(qt.key==="Enter"||qt.key===" ")&&he(xe.id)},className:"flex items-center gap-3 flex-1 min-w-0"},React.createElement("div",{className:"h-9 w-9 rounded-2xl border border-white/10 bg-black/40 flex items-center justify-center"},React.createElement(_,{name:Ve,className:"w-4 h-4 text-white/80"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-bold text-white truncate"},xe.title),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},pa))),React.createElement("button",{type:"button",onClick:()=>Te(xe.id),className:"px-2 py-1 rounded-xl border text-[11px] font-bold "+(xe.pinned?"border-amber-400/40 bg-amber-500/10 text-amber-100":"border-white/10 bg-black/30 text-white/70 hover:text-white"),title:xe.pinned?"Unpin":"Pin"},xe.pinned?"Pinned":"Pin"),R)};return React.createElement("div",{className:"space-y-5"},React.createElement("div",{className:"flex items-end justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.22em] text-white/50 font-bold"},"Messages"),React.createElement("div",{className:"text-2xl font-extrabold text-white"},"Unified Message Board"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"One inbox for client chats + internal support + system alerts. Built for future multi-pro (trainer + nutritionist + physio).")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:We,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"Plus",size:16})," New client chat"),React.createElement("button",{type:"button",onClick:()=>ta("Roadmap: multi-pro","Next: add \u201CParticipants\u201D to threads so multiple pros can collaborate (trainer + nutritionist + physio), plus roles, mentions, assignments, and shared notes per client."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/70"},"Roadmap ",React.createElement(_,{name:"Users",size:16,className:"inline"})))),React.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4"},React.createElement("div",{className:"xl:col-span-4 rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex-1 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:f,onChange:xe=>F(xe.target.value),placeholder:"Search threads\u2026",className:"w-full pl-9 pr-3 py-2 rounded-2xl border border-white/12 bg-white/5 text-[12px] text-white outline-none"})),React.createElement("button",{type:"button",onClick:()=>{F(""),k("ALL")},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/70",title:"Clear"},"Clear")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},[{k:"ALL",label:"All"},{k:"UNREAD",label:"Unread"},{k:"CLIENTS",label:"Clients"},{k:"TEAM",label:"Team"},{k:"SYSTEM",label:"System"}].map(xe=>React.createElement("button",{key:xe.k,type:"button",onClick:()=>k(xe.k),className:"px-3 py-1.5 rounded-full border text-[11px] "+(D===xe.k?"border-sky-400/40 bg-sky-500/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},xe.label))),React.createElement("div",{className:"mt-4 space-y-2 max-h-[62vh] overflow-auto pr-1"},yt.some(xe=>xe.pinned)?React.createElement("div",{className:"text-[11px] tracking-wider uppercase text-white/45 px-1"},"Pinned"):null,yt.filter(xe=>xe.pinned).map(xe=>React.createElement(ii,{key:xe.id,t:xe})),yt.some(xe=>xe.pinned)?React.createElement("div",{className:"mt-3 text-[11px] tracking-wider uppercase text-white/45 px-1"},"All Threads"):null,yt.filter(xe=>!xe.pinned).map(xe=>React.createElement(ii,{key:xe.id,t:xe})),yt.length===0?React.createElement("div",{className:"text-[12px] text-white/55 p-3"},"No threads match your search."):null)),React.createElement("div",{className:"xl:col-span-8 rounded-3xl border border-white/12 bg-white/5 p-4 flex flex-col min-h-[70vh]"},St?React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-start justify-between gap-3 pb-3 border-b border-white/10"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-extrabold text-[14px] truncate"},St.title),React.createElement("div",{className:"text-[11px] text-white/60 mt-1"},St.type==="CLIENT"?"Client thread \u2022 ":St.type==="TEAM"?"Internal thread \u2022 ":"System thread \u2022 ","Last activity: ",da(St.lastAt||Date.now())),St.linkedTriageId?React.createElement("div",{className:"mt-2 rounded-2xl border border-white/12 bg-black/25 p-3"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-2.5 h-2.5 rounded-full "+(yi==="RESOLVED"?"bg-emerald-400":yi==="IN_PROGRESS"?"bg-amber-400":yi==="SNOOZED"?"bg-sky-400":"bg-red-400")}),React.createElement("div",{className:"text-[11px] font-extrabold text-white/85"},"Linked Triage",React.createElement("span",{className:"ml-2 text-white/55 font-mono"},"[",String((Qt==null?void 0:Qt.type)||((Na=St==null?void 0:St.triageMeta)==null?void 0:Na.type)||"").toUpperCase(),"]")),React.createElement("div",{className:"text-[10px] text-white/55 font-mono"},"Sev ",String((Qt==null?void 0:Qt.severity)||((ra=St==null?void 0:St.triageMeta)==null?void 0:ra.severity)||"\u2014")," \u2022 Conf ",Math.round(((ae=(Ee=Qt==null?void 0:Qt.confidence)!=null?Ee:(Ti=St==null?void 0:St.triageMeta)==null?void 0:Ti.confidence)!=null?ae:0)*100),"%"),React.createElement("div",{className:"text-[10px] text-white/55 font-mono"},"\u2022 ",yi||"OPEN")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:ie,className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75",disabled:!(Qt!=null&&Qt.id)},"Mark in-progress"),React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>be(xe=>!xe),className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75",disabled:!(Qt!=null&&Qt.id)},"Snooze"),y?React.createElement("div",{className:"absolute right-0 mt-2 w-44 rounded-2xl border border-white/12 bg-zinc-950 p-2 shadow-2xl"},React.createElement("button",{type:"button",onClick:()=>b(60),className:"w-full text-left px-3 py-2 rounded-xl hover:bg-white/10 text-[11px] text-white/80"},"1 hour"),React.createElement("button",{type:"button",onClick:()=>b(240),className:"w-full text-left px-3 py-2 rounded-xl hover:bg-white/10 text-[11px] text-white/80"},"4 hours"),React.createElement("button",{type:"button",onClick:()=>b(1440),className:"w-full text-left px-3 py-2 rounded-xl hover:bg-white/10 text-[11px] text-white/80"},"1 day")):null),React.createElement("button",{type:"button",onClick:()=>as(!0),className:"px-3 py-1.5 rounded-full border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] text-emerald-200 font-bold",disabled:!(Qt!=null&&Qt.id)},"Resolve"))),React.createElement("div",{className:"mt-2 text-[12px] text-white/75 whitespace-pre-wrap leading-relaxed"},(Qt==null?void 0:Qt.summary)||((Ot=St==null?void 0:St.triageMeta)==null?void 0:Ot.summary)||"\u2014")):null,os?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[9999] flex items-center justify-center bg-black/70 modal-overlay"},React.createElement("div",{className:"w-[92vw] max-w-lg rounded-3xl border border-white/12 bg-zinc-950 p-4 shadow-2xl modal-card"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[13px] font-extrabold text-white/90"},"Resolve linked triage"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Optional note will be saved to triage history + ActionLog.")),React.createElement("button",{type:"button",onClick:()=>{as(!1)},className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Close")),React.createElement("div",{className:"mt-3"},React.createElement("textarea",{value:ro,onChange:xe=>n(xe.target.value),rows:3,placeholder:"e.g., Messaged client and scheduled check-in.",className:"w-full rounded-2xl border border-white/12 bg-black/30 p-3 text-[12px] text-white/85 outline-none focus:border-emerald-400/50"})),React.createElement("div",{className:"mt-3 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{as(!1),n("")},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Cancel"),React.createElement("button",{type:"button",onClick:Dt,className:"px-3 py-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/15 hover:bg-emerald-500/20 text-[11px] text-emerald-200 font-extrabold"},"Resolve")))):null,St.type==="CLIENT"?React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{var xe=Se.get(St.clientId);xe&&(zt(xe),u("CLIENT_ACTION_MODE"))},className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Open client ",React.createElement(_,{name:"ChevronRight",size:14,className:"inline"})),React.createElement("button",{type:"button",onClick:()=>u("CALENDAR"),className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75"},"Book session ",React.createElement(_,{name:"Calendar",size:14,className:"inline"})),React.createElement("button",{type:"button",onClick:()=>ta("Assign multiple pros (next)","Future: add Nutritionist/Physio/Yoga pros into this thread, with roles, mentions, and shared notes."),className:"px-3 py-1.5 rounded-full border border-violet-400/30 bg-violet-500/10 hover:bg-violet-500/20 text-[11px] text-white/80"},"Add pro ",React.createElement(_,{name:"UserPlus",size:14,className:"inline"}))):null),React.createElement("div",{className:"flex items-center gap-2"},["CHAT","NOTES"].map(xe=>React.createElement("button",{key:xe,type:"button",onClick:()=>Vt(xe),className:"px-3 py-2 rounded-2xl border text-[11px] "+(ce===xe?"border-sky-400/40 bg-sky-500/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},xe==="CHAT"?"Chat":"Notes")))),ce==="NOTES"?React.createElement("div",{className:"flex-1 mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"Shared notes (future)"),React.createElement("div",{className:"text-[12px] text-white/60 mt-2"},"This will become the \u201Cshared workspace\u201D for multiple pros (trainer + nutritionist + physio): check-in summary, injuries, contraindications, plan rationale, and audit trail."),React.createElement("div",{className:"mt-3 text-[11px] text-white/50"},"For now we keep the demo simple: messaging only.")):React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-1 mt-4 rounded-2xl border border-white/12 bg-white/5 p-4 overflow-auto"},React.createElement("div",{className:"space-y-3"},za.map(xe=>{var p=xe.from==="You";return React.createElement("div",{key:xe.id,className:"flex "+(p?"justify-end":"justify-start")},React.createElement("div",{className:"max-w-[85%] rounded-2xl border p-3 "+(p?"border-sky-400/30 bg-sky-500/10":"border-white/12 bg-white/5")},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[11px] font-bold text-white/85"},xe.from),React.createElement("div",{className:"text-[10px] font-mono text-white/45"},da(xe.ts))),React.createElement("div",{className:"mt-1 text-[12px] text-white/80 whitespace-pre-wrap leading-relaxed"},xe.body)))}))),React.createElement("div",{className:"mt-3 flex items-end gap-2"},React.createElement("div",{className:"flex-1"},React.createElement("textarea",{value:oe,onChange:xe=>ke(xe.target.value),rows:2,placeholder:"Write a message\u2026 (Enter = new line, use Send)",className:"w-full rounded-2xl border border-white/12 bg-white/5 px-3 py-2 text-[12px] text-white outline-none"}),React.createElement("div",{className:"mt-2 space-y-2"},React.createElement("div",{className:"flex flex-wrap gap-2"},(Ut||[]).slice(0,6).map(xe=>React.createElement("button",{key:xe.id,type:"button",onClick:()=>{try{var p=String(oe||"").trim().length?String(oe||"").trim()+`

`+xe.text:xe.text;ke(p),$a(xe.id),Za(null),Et("quick_reply_used",{quickReplyId:xe.id,threadId:St==null?void 0:St.id,triageId:(Qt==null?void 0:Qt.id)||(St==null?void 0:St.linkedTriageId)||null})}catch(p){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75",title:xe.hint||"Quick reply"},React.createElement("span",{className:"font-mono uppercase tracking-widest text-[10px] text-white/60 mr-1"},"Quick"),React.createElement("span",{className:"line-clamp-1"},xe.label))),(Ut||[]).length===0?React.createElement("div",{className:"text-[11px] text-white/45"},"No quick replies for this context."):null),React.createElement("div",{className:"flex flex-wrap gap-2 items-center"},React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>{try{Tt(xe=>!xe),Et("template_picker_opened",{threadId:St==null?void 0:St.id})}catch(xe){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/75 inline-flex items-center gap-2"},React.createElement(_,{name:"Sparkles",size:14,className:"text-white/70"}),"Templates",React.createElement(_,{name:Ye?"ChevronUp":"ChevronDown",size:14,className:"text-white/60"})),Ye?React.createElement("div",{className:"absolute z-[80] mt-2 w-[360px] max-w-[85vw] rounded-3xl border border-white/10 bg-titanium-950 shadow-[0_28px_90px_rgba(0,0,0,0.7)] p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Saved templates"),React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Insert into composer")),React.createElement("button",{type:"button",onClick:()=>Tt(!1),className:"px-2 py-1 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Close")),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Me.map(xe=>React.createElement("button",{key:xe,type:"button",onClick:()=>P(xe),className:"px-2.5 py-1.5 rounded-xl border text-[10px] font-mono uppercase tracking-widest "+(_t===xe?"border-[rgba(77,233,255,0.55)] bg-[rgba(77,233,255,0.16)] text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-white/70")},xe))),React.createElement("div",{className:"mt-3 max-h-[260px] overflow-auto trainer-scroll space-y-2 pr-1"},(it||[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/55"},"No templates in ",React.createElement("span",{className:"text-white/80 font-bold"},_t),". Save one from the composer."):it.map(xe=>React.createElement("button",{key:xe.id,type:"button",onClick:()=>{try{ke(p=>{var R=String(p||"").trim();return R?R+`

`+String(xe.body||""):String(xe.body||"")}),Za(xe.id),$a(null),Yt(xe.id),Et("template_inserted",{templateId:xe.id,category:xe.category,threadId:St==null?void 0:St.id,triageId:(Qt==null?void 0:Qt.id)||(St==null?void 0:St.linkedTriageId)||null}),Tt(!1)}catch(p){}},className:"w-full text-left rounded-2xl border border-white/10 bg-black/20 hover:bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90 truncate"},xe.title),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},xe.category," \u2022 used ",xe.usageCount||0,"\xD7")),React.createElement("div",{className:"shrink-0 px-2 py-1 rounded-xl border border-white/10 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Insert")),React.createElement("div",{className:"mt-2 text-[11px] text-white/60 line-clamp-2"},String(xe.body||""))))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Tt(!1),te(!0),Et("template_save_opened",{threadId:St==null?void 0:St.id})}catch(xe){}},className:"px-3 py-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 hover:bg-emerald-500/20 text-[11px] font-mono uppercase tracking-widest text-emerald-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Plus",size:14}),"Save from composer"),React.createElement("button",{type:"button",onClick:()=>{try{Jt(ya()),Et("template_reset",{})}catch(xe){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/65"},"Reset defaults"))):null),React.createElement("button",{type:"button",onClick:()=>{try{te(!0),Et("template_save_opened",{threadId:St==null?void 0:St.id})}catch(xe){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/70 inline-flex items-center gap-2"},React.createElement(_,{name:"Bookmark",size:14,className:"text-white/70"}),"Save as Template"),React.createElement("button",{type:"button",onClick:()=>ta("Attachments","Attachment uploads are stubbed in this prototype. In production: files, images, PDFs, and voice notes attach to the thread with storage + permissions.",{module:"inbox",status:"stub"}),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] text-white/70"},"Attach ",React.createElement(_,{name:"Paperclip",size:14,className:"inline"}))),I?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[999] flex items-center justify-center bg-black/55 p-4 modal-overlay",onMouseDown:()=>te(!1)},React.createElement("div",{className:"w-full max-w-xl glass-panel rounded-3xl p-6 border border-midnight-700 bg-midnight-900 modal-card",onMouseDown:xe=>xe.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono text-slate-400 uppercase tracking-widest"},"Phase 2.3"),React.createElement("h3",{className:"text-lg font-bold text-white"},"Save Message Template"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Templates are insert-only (editable before send). Usage is logged.")),React.createElement("button",{onClick:()=>te(!1),className:"p-2 rounded-xl hover:bg-midnight-800 text-slate-400 hover:text-white"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Title"),React.createElement("input",{value:Ce,onChange:xe=>C(xe.target.value),placeholder:"e.g., Weekly check-in reminder",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90 outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Category"),React.createElement("select",{value:ye,onChange:xe=>le(xe.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90 outline-none"},Me.map(xe=>React.createElement("option",{key:xe,value:xe},xe)))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Body (from composer)"),React.createElement("textarea",{value:O,onChange:xe=>qe(xe.target.value),rows:6,className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90 outline-none"}),React.createElement("div",{className:"mt-1 text-[10px] text-white/45"},"Tip: keep it short. Trainer can edit before sending."))),React.createElement("div",{className:"mt-5 flex items-center justify-end gap-2"},React.createElement("button",{onClick:()=>te(!1),className:"px-4 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white/80 text-sm font-semibold"},"Cancel"),React.createElement("button",{onClick:()=>{try{var xe=String(Ce||"").trim(),p=String(O||"").trim();if(!xe||!p)return;var R="tpl_"+Math.random().toString(16).slice(2),Ve=[{id:R,title:xe,category:ye,body:p,usageCount:0,lastUsedAt:null,createdAt:Date.now()},...Ct||[]];Jt(Ve);try{na(Re,Ve)}catch(pa){}Et("template_saved",{templateId:R,category:ye}),te(!1)}catch(xe){}},className:"px-4 py-2 rounded-xl bg-brand text-white text-sm font-semibold hover:bg-brand/90 inline-flex items-center gap-2"},React.createElement(_,{name:"Save",size:16}),"Save Template")))):null)),React.createElement("button",{type:"button",onClick:zi,className:"px-4 py-3 rounded-2xl border border-sky-400/40 bg-sky-500/15 hover:bg-sky-500/20 text-[12px] text-white font-extrabold inline-flex items-center gap-2"},React.createElement(_,{name:"Send",size:16})," Send")))):React.createElement("div",{className:"flex-1 flex items-center justify-center text-white/60 text-[12px]"},"Select a thread."))),React.createElement("div",{className:"text-[11px] text-white/45"},"Note: This is a unified inbox scaffold. Next we\u2019ll add: unread rules, mentions, assignments, multi-pro participants, and client \u201Cquick actions\u201D directly in-thread."))},ia="fof.trainer.client_tags.v1",Es="fof.trainer.client_tag_assign.v1",Ro=(o,d={})=>{try{if(window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.track=="function"){window.FOF_EVENT_LOG_V1.track(o,d);return}}catch(m){}try{typeof Bt=="function"&&Bt(o,d)}catch(m){}},un=(o,d)=>{try{if(typeof Ta=="function")return Ta(o,d)}catch(m){}try{var m=localStorage.getItem(o);if(!m)return d;var E=JSON.parse(m);return E==null?d:E}catch(m){return d}},Jo=(o,d)=>{try{if(typeof ti=="function")return ti(o,d)}catch(m){}try{return localStorage.setItem(o,JSON.stringify(d)),!0}catch(m){return!1}},kn=()=>{var o=Date.now();return[{id:"tag_active",name:"Active",color:"emerald",createdAt:o,updatedAt:o},{id:"tag_churn_risk",name:"Churn Risk",color:"rose",createdAt:o,updatedAt:o},{id:"tag_injury_watch",name:"Injury Watch",color:"amber",createdAt:o,updatedAt:o},{id:"tag_vip",name:"VIP",color:"violet",createdAt:o,updatedAt:o},{id:"tag_strength",name:"Strength",color:"sky",createdAt:o,updatedAt:o}]},ln=o=>{var d=Array.isArray(o)?o:[];return d.length?d.map(m=>({id:String(m.id||"tag_"+Math.random().toString(16).slice(2)),name:String(m.name||"Tag"),color:String(m.color||"zinc"),createdAt:Number(m.createdAt||Date.now()),updatedAt:Number(m.updatedAt||Date.now()),rule:m.rule||null})):kn()},fn=o=>{var d={},m=o&&typeof o=="object"?o:{};return Object.keys(m).forEach(E=>{var g=Array.isArray(m[E])?m[E]:[];d[String(E)]=Array.from(new Set(g.map(String))).filter(Boolean)}),d},oo=o=>{var d=String(o||"zinc"),m={emerald:"border-emerald-400/30 bg-emerald-500/10 text-emerald-100",rose:"border-rose-400/30 bg-rose-500/10 text-rose-100",amber:"border-amber-400/30 bg-amber-500/10 text-amber-100",sky:"border-sky-400/30 bg-sky-500/10 text-sky-100",violet:"border-violet-400/30 bg-violet-500/10 text-violet-100",cyan:"border-cyan-400/30 bg-cyan-500/10 text-cyan-100",zinc:"border-white/12 bg-white/5 text-white/80"};return m[d]||m.zinc},Zn=()=>{var[o,d]=React.useState(()=>ln(un(ia,null))),[m,E]=React.useState(()=>fn(un(Es,{})));React.useEffect(()=>{try{Jo(ia,o)}catch(ke){}},[JSON.stringify(o||[])]),React.useEffect(()=>{try{Jo(Es,m)}catch(ke){}},[JSON.stringify(m||{})]),React.useEffect(()=>{try{if(!(Array.isArray(o)?o:[]).some(Re=>String((Re==null?void 0:Re.name)||"").trim().toLowerCase()==="vip"||String((Re==null?void 0:Re.id)||"")==="tag_vip")){var Re=Date.now(),Me={id:"tag_vip",name:"VIP",color:"violet",createdAt:Re,updatedAt:Re,rule:null};d(Et=>ln([...Array.isArray(Et)?Et:[],Me]))}}catch(ke){}try{var ke="tag_vip",Re=fn(un(Es,m||{}));if(!Object.keys(Re||{}).some(Et=>(Re[Et]||[]).includes(ke))){var Et=[];try{Et=typeof window!="undefined"&&Array.isArray(window.__crm_records)?window.__crm_records:[]}catch(Ct){}if((!Et||!Et.length)&&typeof demoClients=="function")try{Et=demoClients(10)||[]}catch(Ct){Et=[]}var ya=(Array.isArray(Et)?Et:[]).map(Ct=>String(Ct.id||Ct.clientId||Ct.email||Ct.name||"")).filter(Boolean).slice(0,2);ya.length&&E(Ct=>{var Jt=fn(Ct||{});return ya.forEach(Ye=>{var Tt=Array.isArray(Jt[Ye])?Jt[Ye]:[];Tt.includes(ke)||(Jt[Ye]=Tt.concat([ke]))}),Ro("trainer.tag.seeded_vip",{clients:ya.length}),Jt})}}catch(ke){}},[]);var g=React.useMemo(()=>{var ke={};return(o||[]).forEach(Re=>{Re&&Re.id&&(ke[String(Re.id)]=Re)}),ke},[JSON.stringify(o||[])]),f=React.useCallback(ke=>{try{var Re=String(ke||"");var Me=0;return Object.keys(m||{}).forEach(Et=>{(m[Et]||[]).includes(Re)&&Me++}),Me}catch(Re){return 0}},[JSON.stringify(m||{})]),F=React.useCallback(ke=>{var Re=String(ke||""),Me=m&&m[Re]?m[Re]:[];return Array.isArray(Me)?Me:[]},[JSON.stringify(m||{})]),D=React.useCallback((ke,Re)=>{var Me=String(ke||""),Et=String(Re||"");!Me||!Et||E(ya=>{var Ct=fn(ya||{}),Jt=Array.isArray(Ct[Me])?Ct[Me]:[],Ye=Jt.includes(Et);return Ct[Me]=Ye?Jt.filter(Tt=>Tt!==Et):Array.from(new Set([...Jt,Et])),Ro(Ye?"trainer.tag.unassigned":"trainer.tag.assigned",{clientId:Me,tagId:Et}),Ct})},[]),k=React.useCallback((ke,Re=[])=>{var Me=String(ke||"");if(!Me)return;var Et=Array.isArray(Re)?Re.map(ya=>String(ya)).filter(Boolean):[];Et.length&&E(ya=>{var Ct=fn(ya||{});return Et.forEach(Jt=>{var Ye=Array.isArray(Ct[Jt])?Ct[Jt]:[];Ye.includes(Me)||(Ct[Jt]=Array.from(new Set([...Ye,Me])))}),Ro("trainer.tag.bulk_assigned",{tagId:Me,clientCount:Et.length}),Ct})},[]),T=React.useCallback((ke,Re)=>{var Me=String(ke||""),Et=String(Re||"").trim();!Me||!Et||d(ya=>{var Ct=(Array.isArray(ya)?ya.slice():[]).map(Jt=>String(Jt.id)!==Me?Jt:{...Jt,name:Et,updatedAt:Date.now()});return Ro("trainer.tag.renamed",{tagId:Me,name:Et}),Ct})},[]),he=React.useCallback(({name:ke,color:Re})=>{var Me=String(ke||"").trim();if(!Me)return null;try{var Jt=Me.toLowerCase();if((Array.isArray(o)?o:[]).some(Tt=>String(Tt&&Tt.name?Tt.name:"").trim().toLowerCase()===Jt))return{error:"DUPLICATE"}}catch(Jt){}var Et=Date.now(),ya="tag_"+Math.random().toString(16).slice(2)+"_"+Et,Ct={id:ya,name:Me,color:String(Re||"zinc"),createdAt:Et,updatedAt:Et,rule:null};return d(Jt=>{var Ye=ln([...Array.isArray(Jt)?Jt:[],Ct]);return Ro("trainer.tag.created",{tagId:ya,name:Me,color:Ct.color}),Ye}),Ct},[JSON.stringify(o||[])]),oe=React.useCallback(ke=>{var Re=String(ke||"");Re&&(d(Me=>{var Et=(Array.isArray(Me)?Me:[]).filter(ya=>String(ya.id)!==Re);return Et.length?Et:kn()}),E(Me=>{var Et=fn(Me||{});return Object.keys(Et).forEach(ya=>{Et[ya]=(Et[ya]||[]).filter(Ct=>String(Ct)!==Re)}),Ro("trainer.tag.deleted",{tagId:Re}),Et}))},[]);return{tags:o,setTags:d,byId:g,assignments:m,setAssignments:E,assignedCount:f,getClientTagIds:F,toggleClientTag:D,assignTagToClients:k,renameTag:T,addTag:he,deleteTag:oe}};function Or({data:o,onClose:d,actions:m}){if(!o)return null;var E=Array.isArray(m)?m:[];return React.createElement("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4",onMouseDown:()=>{try{d&&d()}catch(g){}}},React.createElement("div",{className:"w-full max-w-lg rounded-3xl border border-white/10 bg-[#0b1020] shadow-[0_35px_90px_rgba(0,0,0,0.75)]",onMouseDown:g=>g.stopPropagation()},React.createElement("div",{className:"p-5 border-b border-white/10"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.25em] text-white/55"},"Confirmation"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},Zi(o&&o.title||"Confirm")),o&&o.subtitle?React.createElement("div",{className:"mt-1 text-sm text-white/70"},Zi(o.subtitle)):null),React.createElement("div",{className:"p-5 max-h-[65vh] overflow-auto"},React.createElement("div",{className:"text-sm text-white/85 whitespace-pre-wrap leading-relaxed"},Zi(o&&o.body||"")),o&&o.meta?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/25 p-3 text-[11px] text-white/60"},React.createElement("div",{className:"font-mono uppercase tracking-widest text-white/50 mb-2"},"Details"),React.createElement("pre",{className:"whitespace-pre-wrap"},Zi(typeof o.meta=="string"?o.meta:JSON.stringify(o.meta,null,2)))):null),React.createElement("div",{className:"p-5 border-t border-white/10 flex items-center justify-end gap-2"},E.map((g,f)=>React.createElement("button",{key:f,type:"button",onMouseDown:F=>{F.preventDefault(),F.stopPropagation();try{g&&g.onClick&&g.onClick()}catch(D){}},className:"px-4 py-2 rounded-2xl border text-[12px] font-bold "+((g&&g.tone)==="primary"?"border-emerald-400/35 bg-emerald-500/15 hover:bg-emerald-500/22 text-emerald-100":(g&&g.tone)==="danger"?"border-rose-400/30 bg-rose-500/12 hover:bg-rose-500/18 text-rose-100":"border-white/12 bg-white/5 hover:bg-white/10 text-white/80")},Zi(g&&g.label||"OK"))))))}var Yo=({setView:o})=>{var d=Zn(),[m,E]=React.useState(""),[g,f]=React.useState(()=>d.tags&&d.tags[0]?d.tags[0].id:null),[F,D]=React.useState(""),[k,T]=React.useState(!1),[he,oe]=React.useState(""),[ke,Re]=React.useState("emerald"),[Me,Et]=React.useState(null),[ya,Ct]=React.useState(null),[Jt,Ye]=React.useState(null),Tt=React.useCallback(()=>{try{Jt&&typeof Jt.undo=="function"&&Jt.undo()}catch(it){}try{Ye(null)}catch(it){}},[Jt]),[_t,P]=React.useState(!1),[I,te]=React.useState(""),[Ce,C]=React.useState(()=>({})),[ye,le]=React.useState(""),[O,qe]=React.useState(!1);React.useEffect(()=>{try{_t||qe(!1)}catch(it){}},[_t]);var Pt=React.useMemo(()=>{try{return((Array.isArray(window.__FOF_UNIVERSAL_CLIENTS)&&window.__FOF_UNIVERSAL_CLIENTS.length?window.__FOF_UNIVERSAL_CLIENTS:Array.isArray(window.__FOF_DEMO_CLIENTS)&&window.__FOF_DEMO_CLIENTS.length?window.__FOF_DEMO_CLIENTS:Array.isArray(Oi)?Oi:[])||[]).map(Ut=>({id:String(Ut.id||Ut.clientId||Ut.email||Ut.phone||Ut.name||""),name:String(Ut.name||Ut.clientName||Ut.email||"Unknown"),email:String(Ut.email||""),tier:Ut.tier})).filter(Ut=>Ut.id&&Ut.name)}catch(it){return[]}},[JSON.stringify((window.__FOF_UNIVERSAL_CLIENTS||[]).map(it=>it.id||it.clientId||it.email||it.phone||it.name)),JSON.stringify(Oi||[])]),Za=React.useMemo(()=>{var it=String(I||"").trim().toLowerCase();return it?(Pt||[]).filter(Ut=>String(Ut.name||"").toLowerCase().includes(it)||String(Ut.email||"").toLowerCase().includes(it)||String(Ut.id||"").toLowerCase().includes(it)):Pt},[I,JSON.stringify(Pt||[])]);React.useEffect(()=>{try{!g&&d.tags&&d.tags[0]&&f(d.tags[0].id)}catch(it){}},[JSON.stringify(d.tags||[]),g]);var Ma=React.useMemo(()=>{var it=String(m||"").trim().toLowerCase(),Ut=d.tags||[];return it?Ut.filter(ce=>String(ce.name||"").toLowerCase().includes(it)):Ut},[m,JSON.stringify(d.tags||[])]),$a=React.useMemo(()=>d.byId&&g?d.byId[String(g)]:null,[g,JSON.stringify(d.byId||{})]);React.useEffect(()=>{try{D($a?$a.name:"")}catch(it){}},[g,$a&&$a.name]);var Yt=["emerald","sky","violet","cyan","amber","rose","zinc"];return React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement(Or,{data:Me,onClose:()=>Et(null),actions:Me&&Me._actions?Me._actions:[{label:"Close",onClick:()=>Et(null)}]}),React.createElement(Or,{data:ya,onClose:()=>Ct(null),actions:(()=>{var it=[];return ya&&ya.undoable&&Jt&&it.push({label:"Undo",tone:"danger",onClick:()=>{try{Tt()}catch(Ut){}Ct(null)}}),it.push({label:"Close",tone:"neutral",onClick:()=>Ct(null)}),it})()}),React.createElement("div",{className:"flex items-center justify-between gap-3 mb-4"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.25em] text-white/55"},"Phase 6.1"),React.createElement("h2",{className:"text-lg font-extrabold text-white"},"Client Tags"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Create, manage, and assign tags. Tags are used for bulk actions and challenges in Phase 6.2/6.3.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{o&&o("CLIENT_LIST")}catch(it){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Back to Clients"),React.createElement("button",{type:"button",onClick:()=>{T(!0),oe(""),Re("emerald"),Ro("trainer.tag.create_opened",{})},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"+ New Tag"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-4 flex-1 min-h-0"},React.createElement("div",{className:"glass-panel border border-white/10 rounded-3xl p-4 min-h-0 flex flex-col"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"relative flex-1"},React.createElement("input",{value:m,onChange:it=>E(it.target.value),placeholder:"Search tags\u2026",className:"w-full px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-white text-[12px]"}),React.createElement("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-60"},React.createElement(_,{name:"Search",size:16})))),React.createElement("div",{className:"mt-3 space-y-2 overflow-auto trainer-scroll pr-1"},(Ma||[]).map(it=>{var Ut=String(it.id)===String(g),ce=d.assignedCount(it.id);return React.createElement("button",{key:it.id,type:"button",onClick:()=>{f(it.id),Ro("trainer.tag.selected",{tagId:it.id})},className:"w-full text-left rounded-2xl border px-3 py-3 transition-colors "+(Ut?"border-white/25 bg-white/8":"border-white/10 bg-white/3 hover:bg-white/6")},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full border text-[10px] font-mono "+oo(it.color)},React.createElement(_,{name:"Tag",size:12}),React.createElement("span",{className:"truncate"},Zi(it.name))),React.createElement("div",{className:"text-[10px] font-mono text-white/55"},ce," client",ce===1?"":"s")),it.rule?React.createElement("div",{className:"mt-2 text-[11px] text-white/55 line-clamp-2"},"Auto-rule: ",Zi(JSON.stringify(it.rule))):React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Manual tag"))}),(Ma||[]).length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/3 p-4 text-sm text-white/60"},"No tags match your search."):null),React.createElement("div",{className:"mt-3 text-[10px] text-white/45"},"Tip: In Phase 6.2, you\u2019ll select a tag to run bulk actions (message / assign / enroll).")),React.createElement("div",{className:"glass-panel border border-white/10 rounded-3xl p-5 min-h-0 overflow-auto trainer-scroll"},$a?React.createElement("div",null,React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.25em] text-white/55"},"Tag"),React.createElement("div",{className:"mt-1 inline-flex items-center gap-2 px-2 py-1 rounded-full border text-[10px] font-mono w-fit ",style:{}},React.createElement("span",{className:"inline-flex items-center gap-2 "+oo($a.color)},React.createElement(_,{name:"Tag",size:12}),React.createElement("span",{className:"font-bold"},Zi($a.name))))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{confirm("Delete this tag? It will be removed from all clients.")&&(d.deleteTag($a.id),f(null))},className:"px-3 py-2 rounded-xl bg-rose-500/10 border border-rose-400/30 hover:bg-rose-500/20 text-rose-100 text-[11px] font-mono uppercase tracking-widest"},"Delete"))),React.createElement("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Rename"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("input",{value:F,onChange:it=>D(it.target.value),className:"flex-1 px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-white text-[12px]"}),React.createElement("button",{type:"button",onClick:()=>d.renameTag($a.id,F),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Save"))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Color"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},Yt.map(it=>React.createElement("button",{key:it,type:"button",onClick:()=>{d.setTags(Ut=>(Array.isArray(Ut)?Ut:[]).map(ce=>String(ce.id)===String($a.id)?{...ce,color:it,updatedAt:Date.now()}:ce)),Ro("trainer.tag.color_changed",{tagId:$a.id,color:it})},className:"px-2 py-1 rounded-full border text-[10px] font-mono "+oo(it)+($a.color===it?" ring-1 ring-white/30":"")},it))))),React.createElement("div",{className:"mt-5 rounded-3xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Assign"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Assign ",React.createElement("span",{className:"font-bold text-white"},Zi($a.name))," to one or more clients right here.")),React.createElement("button",{type:"button",onClick:()=>{try{P(!0)}catch(it){}},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Assign to Clients"))),React.createElement("div",{className:"mt-5 rounded-3xl border border-white/10 bg-white/3 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Assigned clients"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},d.assignedCount($a.id)," clients currently have this tag.")),React.createElement("button",{type:"button",onClick:()=>ta("Phase 6.1 \u2014 Client Tag Assignment",`Assign tags from:
\u2022 Clients list (chips)
\u2022 Client detail (tag picker)

Phase 6.2 will add Bulk Actions using these tags.`,{tagId:$a.id}),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"How it works"))),React.createElement("div",{className:"mt-4 text-[11px] text-white/55"},"Auto-tag rules are planned (optional) but remain OFF by default in Phase 6.1.")):React.createElement("div",{className:"text-white/70"},"Select a tag to edit."))),_t?React.createElement("div",{className:"fixed inset-0 z-[96] bg-black/70 flex items-center justify-center p-4 modal-overlay",onMouseDown:()=>P(!1)},React.createElement("div",{className:"w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0b1020] p-5 modal-card",onMouseDown:it=>it.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Assign Tag"),React.createElement("div",{className:"text-lg font-extrabold text-white mt-1"},Zi($a?$a.name:"Tag")),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Select one or more clients and assign this tag immediately.")),React.createElement("button",{className:"p-2 rounded-xl hover:bg-white/10",onClick:()=>P(!1)},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("input",{value:I,onChange:it=>te(it.target.value),placeholder:"Search clients\u2026",className:"flex-1 px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-white text-[12px]"}),React.createElement("div",{className:"min-w-[220px]"},React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>qe(it=>!it),className:"w-full text-left px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 text-[12px]",title:"Quick pick (shows existing tags)"},"Quick pick\u2026"),O?React.createElement("div",{className:"absolute z-[80] mt-2 w-full max-h-[260px] overflow-auto rounded-2xl border border-white/12 bg-zinc-950/95 backdrop-blur shadow-2xl trainer-scroll"},(Za||[]).length===0?React.createElement("div",{className:"p-3 text-sm text-white/60"},"No clients found."):(Za||[]).map(it=>{var Ut=String(it.id),ce=d&&d.getClientTagIds?d.getClientTagIds(Ut)||[]:[];return React.createElement("button",{key:Ut,type:"button",onClick:()=>{le(""),C(Vt=>({...Vt||{},[Ut]:!0})),qe(!1)},className:"w-full text-left px-3 py-2 border-b border-white/5 last:border-b-0 hover:bg-white/5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},Zi(it.name)),React.createElement("div",{className:"text-[11px] text-white/50 truncate"},Zi(it.email?it.email:"ID: "+Ut))),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},ce.length?ce.slice(0,6).map(Vt=>{var Fe=d&&d.byId?d.byId[String(Vt)]:null;return Fe?React.createElement("span",{key:String(Vt),className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[10px] font-mono uppercase tracking-wider "+oo(Fe.color||"zinc")},Zi(Fe.name)):null}):React.createElement("span",{className:"text-[10px] text-white/40"},"No tags")))})):null)),React.createElement("button",{type:"button",onClick:()=>{var it={};(Za||[]).forEach(Ut=>{it[String(Ut.id)]=!0}),C(it)},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Select All"),React.createElement("button",{type:"button",onClick:()=>C({}),className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Clear")),React.createElement("div",{className:"mt-4 max-h-[48vh] overflow-auto trainer-scroll pr-1 rounded-2xl border border-white/10 bg-black/20"},(Za||[]).length===0?React.createElement("div",{className:"p-4 text-sm text-white/60"},"No clients found."):(Za||[]).map(it=>React.createElement("label",{key:String(it.id),className:"flex items-center gap-3 px-4 py-3 border-b border-white/5 last:border-b-0 hover:bg-white/5 cursor-pointer"},React.createElement("input",{type:"checkbox",checked:!!Ce[String(it.id)],onChange:Ut=>{var ce=String(it.id);C(Vt=>({...Vt||{},[ce]:Ut.target.checked}))}}),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"font-bold text-white truncate"},Zi(it.name)),React.createElement("div",{className:"text-[11px] text-white/50 truncate"},Zi(it.email?it.email:"ID: "+String(it.id))),React.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},(d&&d.getClientTagIds?d.getClientTagIds(String(it.id))||[]:[]).slice(0,6).map(Ut=>{var ce=d&&d.byId?d.byId[String(Ut)]:null;return ce?React.createElement("span",{key:String(Ut),className:"inline-flex items-center gap-1 text-[9px] px-2 py-0.5 rounded-full border uppercase tracking-wider "+oo(ce.color||"zinc")},Zi(ce.name)):null})))))),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-3"},React.createElement("div",{className:"text-xs text-white/60"},"Selected: ",React.createElement("span",{className:"font-bold text-white"},Object.values(Ce||{}).filter(Boolean).length)),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>P(!1),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{try{var it=Object.keys(Ce||{}).filter(Ut=>Ce[Ut]);if(!it.length)return alert("Select at least one client.");$a&&$a.id&&d.assignTagToClients?d.assignTagToClients(String($a.id),it):it.forEach(Ut=>{try{d.toggleClientTag(String(Ut),String($a.id))}catch(ce){}}),P(!1),C({}),te("")}catch(it){}},className:"px-3 py-2 rounded-xl bg-emerald-500/15 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Assign Selected"))))):null,k?React.createElement("div",{className:"fixed inset-0 z-[95] bg-black/60 flex items-center justify-center p-4 modal-overlay",onMouseDown:()=>T(!1)},React.createElement("div",{className:"w-full max-w-lg rounded-3xl border border-white/12 bg-[#0b1020] p-5 modal-card",onMouseDown:it=>it.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Create Tag"),React.createElement("div",{className:"text-lg font-extrabold text-white mt-1"},"New Client Tag")),React.createElement("button",{className:"p-2 rounded-xl hover:bg-white/10 text-white/70",onClick:()=>T(!1)},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Name"),React.createElement("input",{value:he,onChange:it=>oe(it.target.value),placeholder:"e.g., Ramadan Plan",className:"mt-2 w-full px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-white text-[12px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Color"),React.createElement("select",{value:ke,onChange:it=>Re(it.target.value),className:"mt-2 w-full px-3 py-2 rounded-2xl border border-white/10 bg-black/30 text-white text-[12px]"},Yt.map(it=>React.createElement("option",{key:it,value:it},it))))),React.createElement("div",{className:"mt-4 flex items-center justify-between gap-2"},React.createElement("div",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full border text-[10px] font-mono "+oo(ke)},React.createElement(_,{name:"Tag",size:12}),React.createElement("span",null,he?Zi(he):"Preview")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>T(!1),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white text-[11px] font-mono uppercase tracking-widest"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{var it=d.addTag({name:he,color:ke});if(!it)return alert("Please enter a tag name.");if(it&&it.error==="DUPLICATE")return alert("That tag already exists. Please use a unique name.");f(it.id),T(!1)},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Create"))),React.createElement("div",{className:"mt-4 text-[11px] text-white/55"},"Tags are local to this prototype storage. In production, they\u2019ll be tenant-scoped with RBAC and audit log."))):null)},gn=({setView:o})=>{var d=typeof window!="undefined"&&window.__FOF_BULK_CTX?window.__FOF_BULK_CTX:{createdAt:Date.now(),tagFilter:"ALL",segment:"ALL",clientIds:[],clientsSnapshot:[]},m=React.useMemo(()=>(Array.isArray(d.clientsSnapshot)?d.clientsSnapshot.slice():[]).map(Te=>({id:String(Te.id||Te.clientId||Te.email||Te.phone||Te.name||""),name:Te.name||Te.fullName||"Client",email:Te.email||"",status:Te.status||"",tagsText:Te.tagsText||Te.tags||Te.tagNames||[]})).filter(Te=>Te.id),[d&&d.createdAt]),[E,g]=React.useState(""),[f,F]=React.useState(()=>{var v=Array.isArray(d.clientIds)&&d.clientIds.length?d.clientIds.map(String):m.map(Te=>Te.id);return Array.from(new Set(v))}),[D,k]=React.useState("MESSAGE"),[T,he]=React.useState(""),[oe,ke]=React.useState(""),[Re,Me]=React.useState(""),[Et,ya]=React.useState(""),[Ct,Jt]=React.useState(0),[Ye,Tt]=React.useState(null),[_t,P]=React.useState(null),[I,te]=React.useState(null),Ce=({data:v,onClose:Te,actions:Se})=>v?React.createElement("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4",onMouseDown:Te},React.createElement("div",{className:"w-full max-w-lg rounded-3xl border border-white/10 bg-[#0b1020] shadow-[0_35px_90px_rgba(0,0,0,0.75)]",onMouseDown:yt=>yt.stopPropagation()},React.createElement("div",{className:"p-5 border-b border-white/10"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.25em] text-white/55"},"Confirmation"),React.createElement("div",{className:"mt-1 text-lg font-extrabold text-white"},Zi(v.title||"Confirm")),v.subtitle?React.createElement("div",{className:"mt-1 text-sm text-white/70"},Zi(v.subtitle)):null),React.createElement("div",{className:"p-5 max-h-[65vh] overflow-auto"},React.createElement("div",{className:"text-sm text-white/85 whitespace-pre-wrap leading-relaxed"},Zi(v.body||"")),v.meta?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/25 p-3 text-[11px] text-white/60"},React.createElement("div",{className:"font-mono uppercase tracking-widest text-white/50 mb-2"},"Details"),React.createElement("pre",{className:"whitespace-pre-wrap"},Zi(typeof v.meta=="string"?v.meta:JSON.stringify(v.meta,null,2)))):null),React.createElement("div",{className:"p-5 border-t border-white/10 flex items-center justify-end gap-2"},(Se||[]).map((yt,St)=>React.createElement("button",{key:St,type:"button",onClick:yt.onClick,className:"px-4 py-2 rounded-2xl border text-[12px] font-bold "+(yt.tone==="primary"?"border-emerald-400/35 bg-emerald-500/15 hover:bg-emerald-500/22 text-emerald-100":yt.tone==="danger"?"border-rose-400/30 bg-rose-500/12 hover:bg-rose-500/18 text-rose-100":"border-white/12 bg-white/5 hover:bg-white/10 text-white/80")},Zi(yt.label||"OK")))))):null,C=v=>{try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:{message:v}}))}catch(Te){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{message:v}}))}catch(Te){}try{console.log("[FOF Toast]",v)}catch(Te){}},ye=(v,Te={})=>{try{window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.track=="function"&&window.FOF_EVENT_LOG_V1.track(v,{...Te,targetCount:f.length,tagFilter:d.tagFilter||"ALL"})}catch(Se){}},le=React.useMemo(()=>{var v=String(E||"").trim().toLowerCase();return v?m.filter(Te=>String(Te.name||"").toLowerCase().includes(v)||String(Te.email||"").toLowerCase().includes(v)||String(Te.id||"").toLowerCase().includes(v)):m},[m,E]),O=React.useMemo(()=>new Set((f||[]).map(String)),[f]),qe=v=>{var Te=String(v);F(Se=>{var yt=Array.isArray(Se)?Se.slice():[],St=yt.indexOf(Te);return St>=0?yt.splice(St,1):yt.push(Te),yt})},Pt=()=>{var v=le.map(Te=>Te.id);F(Te=>{var Se=new Set((Te||[]).map(String));return v.forEach(yt=>Se.add(String(yt))),Array.from(Se)})},Za=()=>F([]),Ma=()=>{try{var v=m.filter(St=>O.has(St.id)),Te=new Blob([JSON.stringify({exportedAt:Date.now(),tagFilter:d.tagFilter||"ALL",segment:d.segment||"ALL",targets:v},null,2)],{type:"application/json"}),Se=URL.createObjectURL(Te),yt=document.createElement("a");yt.href=Se,yt.download=`flowofit_bulk_export_${Date.now()}.json`,document.body.appendChild(yt),yt.click(),yt.remove(),URL.revokeObjectURL(Se),ye("bulk_export_segment",{}),C(`Exported ${v.length} clients.`)}catch(v){C("Export failed.")}},$a=(v,Te)=>{var Se=m.filter(Xe=>O.has(Xe.id));if(!Se.length)return C("0 clients selected.");var yt=v==="PROGRAM"?"__FOF_BULK_PROGRAMS_V1":"__FOF_BULK_MEALS_V1",St=(()=>{try{return JSON.parse(localStorage.getItem(yt)||"{}")||{}}catch(Xe){return{}}})(),za={...St};Se.forEach(Xe=>{za[Xe.id]={name:Te,at:Date.now()}});try{localStorage.setItem(yt,JSON.stringify(za))}catch(Xe){}Tt({kind:v,key:yt,prev:St,next:za,label:Te,ids:Se.map(Xe=>Xe.id)}),ye(v==="PROGRAM"?"bulk_plan_assigned":"bulk_mealplan_assigned",{label:Te}),C(`${v==="PROGRAM"?"Assigned program":"Assigned meal plan"} to ${Se.length} clients.`)},Yt=()=>{if(Ye){if(Ye.kind==="ENROLL_CHALLENGE"){try{var v=typeof window!="undefined"&&window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null,Te=Array.isArray(Ye.pairs)?Ye.pairs:[];v&&typeof v.removeEnrollment=="function"&&Te.forEach(Se=>{try{v.removeEnrollment(String(Se.campaignId||""),String(Se.clientId||""),{mode:"undo"})}catch(yt){}})}catch(v){}ye("bulk_undo",{kind:"ENROLL_CHALLENGE",campaignId:Ye.campaignId}),C("Undone: Challenge enrollment."),Tt(null);return}try{Ye.key&&localStorage.setItem(Ye.key,JSON.stringify(Ye.prev))}catch(v){}ye("bulk_undo",{kind:Ye.kind}),C(`Undone: ${Ye.kind==="PROGRAM"?"Program assignment":"Meal plan assignment"}.`),Tt(null)}},it=()=>{try{var v=typeof window!="undefined"&&window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null,Te=v&&typeof v._dump=="function"?v._dump():null;var Se=Te&&Array.isArray(Te.campaigns)?Te.campaigns.slice():v&&typeof v.listCampaigns=="function"?v.listCampaigns()||[]:[];if(!Array.isArray(Se)||Se.length===0)try{var St=JSON.parse(localStorage.getItem("__FOF_CHALLENGES_V1")||"[]")||[];Array.isArray(St)&&St.length&&(Se=St.map(za=>({id:String(za&&za.id||""),name:String(za&&za.name||"Challenge"),metric:String(za&&za.metric||"STEPS"),status:String(za&&za.status||"DRAFT"),createdAt:Number(za&&za.createdAt)||0})).filter(za=>za.id))}catch(St){}return(Se||[]).filter(St=>String(St&&St.status||"DRAFT").toUpperCase()!=="ARCHIVED")}catch(v){return[]}},Ut=()=>{var Te;var v=m.filter(Se=>O.has(Se.id)).length;if(!v)return{ok:!1,message:"0 clients selected."};if(D==="MESSAGE")return String(T||"").trim()?(ye("bulk_message_sent",{textLen:String(T||"").length}),he(""),{ok:!0,message:`Queued message to ${v} clients.`}):{ok:!1,message:"Write a message first."};if(D==="PROGRAM"){var Se=String(oe||"").trim()||"Program";try{$a("PROGRAM",Se)}catch(yt){}return{ok:!0,message:`Assigned \u201C${Se}\u201D to ${v} client(s).`,undoable:!0}}if(D==="MEAL"){var Se=String(Re||"").trim()||"Meal Plan";try{$a("MEAL",Se)}catch(yt){}return{ok:!0,message:`Assigned \u201C${Se}\u201D to ${v} client(s).`,undoable:!0}}if(D==="CHALLENGE"){var Se=it(),yt=String(Et||String(((Te=Se[0])==null?void 0:Te.id)||"")).trim(),St=(Se||[]).find(ie=>String(ie.id)===yt)||Se[0]||null,za=St?String(St.id):"";if(!za)return{ok:!1,message:"No challenges exist yet. Create one in Engagement OS \u2192 Campaigns, then refresh and try again."};var Xe=typeof window!="undefined"&&window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null,dt=Xe&&typeof Xe._dump=="function"?Xe._dump():null,Qt=dt&&Array.isArray(dt.enrollments)?dt.enrollments:[],yi=m.filter(ie=>O.has(ie.id)).map(ie=>String(ie.id)),zi=d&&d.tagFilter&&d.tagFilter!=="ALL"?"tag":"bulk",os=zi==="tag"?String(d.tagFilter):null,as=new Set((Qt||[]).filter(ie=>String(ie.campaignId)===za&&String(ie.status||"ENROLLED")==="ENROLLED").map(ie=>String(ie.clientId))),ro=yi.filter(ie=>!as.has(String(ie))),n=Xe&&typeof Xe.enroll=="function"?Xe.enroll(za,ro,{mode:zi,tagId:os}):{ok:!1,count:0},y=n&&n.ok?ro.slice(0,Math.max(0,Number(n.count)||0)).map(ie=>({campaignId:za,clientId:ie})):[];try{var ie="__FOF_CHALLENGES_V1",Dt=JSON.parse(localStorage.getItem(ie)||"[]")||[];if(Array.isArray(Dt)&&Dt.length){var b=Dt.findIndex(We=>String(We&&We.id)===String(za));if(b>=0){var We=Dt[b]||{},da=new Set((We.enrolledClientIds||We.enrolled||[]).map(String));(ro||[]).forEach(Kt=>da.add(String(Kt)));var ii={...We,enrolledClientIds:Array.from(da)},jt={...ii.points||{}};(ro||[]).forEach(Kt=>{var Na=String(Kt);typeof jt[Na]!="number"&&(jt[Na]=0)}),ii.points=jt,Dt[b]=ii,localStorage.setItem(ie,JSON.stringify(Dt))}}}catch(ie){}Tt({kind:"ENROLL_CHALLENGE",campaignId:za,label:St&&St.name?String(St.name):"Challenge",pairs:y}),ye("bulk_challenge_enrolled",{campaignId:za,label:St&&St.name?String(St.name):"Challenge",mode:zi,tagId:os});var be=Number(n&&n.count||0);return{ok:!0,message:`Enrolled ${be} new client(s) into \u201C${St&&St.name?String(St.name):"Challenge"}\u201D.`,undoable:be>0}}if(D==="EXPORT"){try{Ma()}catch(Se){}return{ok:!0,message:"Export prepared."}}return{ok:!1,message:"Nothing to confirm."}},ce=()=>{var za;var v=m.filter(Xe=>O.has(Xe.id)).length,Te=d&&d.tagFilter&&d.tagFilter!=="ALL";var Se="Confirm action",yt="",St=null;if(!v)return Se="No clients selected",yt="Select at least one client to proceed.",P({title:Se,body:yt,meta:St});if(D==="MESSAGE")Se="Send bulk message",yt=`You are about to queue a message to ${v} client(s).

Message preview:
${String(T||"").trim()||"\u2014"}`,St={recipients:v,source:Te?`Tag segment (${String(d.tagFilter)})`:"Manual selection"};else if(D==="PROGRAM"){var Xe=String(oe||"").trim()||"Program";Se="Assign program",yt=`Assign \u201C${Xe}\u201D to ${v} client(s)?`,St={program:Xe,recipients:v}}else if(D==="MEAL"){var Xe=String(Re||"").trim()||"Meal Plan";Se="Assign meal plan",yt=`Assign \u201C${Xe}\u201D to ${v} client(s)?`,St={mealPlan:Xe,recipients:v}}else if(D==="CHALLENGE"){var Xe=it(),dt=String(Et||String(((za=Xe[0])==null?void 0:za.id)||"")).trim(),Qt=(Xe||[]).find(zi=>String(zi.id)===dt)||Xe[0]||null,yi=Qt?String(Qt.name||"Challenge"):"Challenge";Se="Enroll in challenge",yt=`Enroll ${v} client(s) into \u201C${yi}\u201D?

Only new enrollments will be added. You can undo this action immediately after.`,St={challenge:yi,recipients:v,source:Te?`Tag segment (${String(d.tagFilter)})`:"Manual selection"}}else D==="EXPORT"&&(Se="Export segment",yt=`Export ${v} selected client(s) as JSON?`,St={recipients:v});P({title:Se,body:yt,meta:St,_actions:[{label:"Cancel",tone:"neutral",onClick:()=>P(null)},{label:"Confirm",tone:"primary",onClick:()=>{P(null);var Xe=Ut();te({title:Xe&&Xe.ok?"Done":"Could not complete",body:Xe&&Xe.message?Xe.message:"\u2014",meta:Xe&&Xe.ok&&St||null,undoable:!!(Xe&&Xe.undoable)})}}]})},Vt=m.length,Fe=m.filter(v=>O.has(v.id)).length;return React.createElement("div",{className:"h-full w-full flex flex-col"},React.createElement(Ce,{data:_t,onClose:()=>P(null),actions:_t&&_t._actions?_t._actions:[{label:"Close",onClick:()=>P(null)}]}),React.createElement(Ce,{data:I,onClose:()=>te(null),actions:(()=>{var v=[];return I&&I.undoable&&Ye&&v.push({label:"Undo",tone:"danger",onClick:()=>{try{Yt()}catch(Te){}te(null)}}),v.push({label:"Close",tone:"neutral",onClick:()=>te(null)}),v})()}),React.createElement("div",{className:"sticky top-0 z-20 bg-zinc-950/80 backdrop-blur border-b border-white/10"},React.createElement("div",{className:"px-4 py-3 flex items-center gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_BULK_CTX=null}catch(v){}try{o("CLIENT_LIST")}catch(v){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-sm"},"\u2190 Back"),React.createElement("div",{className:"flex flex-col"},React.createElement("div",{className:"text-lg font-semibold text-white"},"Bulk Actions"),React.createElement("div",{className:"text-xs text-white/60"},"Target set: ",React.createElement("span",{className:"text-white/90"},Vt)," \u2022 Selected: ",React.createElement("span",{className:"text-white/90"},Fe),d.tagFilter&&d.tagFilter!=="ALL"?React.createElement("span",{className:"text-white/40"}," \u2022 Tag: ",String(d.tagFilter)):null,d.segment&&d.segment!=="ALL"?React.createElement("span",{className:"text-white/40"}," \u2022 Segment: ",String(d.segment)):null)),React.createElement("div",{className:"ml-auto flex items-center gap-2"},Ye?React.createElement("button",{type:"button",onClick:Yt,className:"px-3 py-2 rounded-xl bg-amber-500/15 border border-amber-400/25 text-amber-100 text-xs font-mono uppercase tracking-widest hover:bg-amber-500/20"},"Undo"):null,React.createElement("button",{type:"button",onMouseDown:v=>{try{v.preventDefault(),v.stopPropagation()}catch(Te){}try{ce&&ce()}catch(Te){console.warn("[FOF] Confirm error",Te)}},className:"px-3 py-2 rounded-xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-xs font-mono uppercase tracking-widest hover:bg-emerald-500/20"},"Confirm")))),React.createElement("div",{className:"flex-1 min-h-0 grid grid-cols-12 gap-4 p-4"},React.createElement("div",{className:"col-span-4 lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col min-h-0"},React.createElement("div",{className:"px-3 py-2 border-b border-white/10 text-xs font-mono uppercase tracking-widest text-white/60"},"Actions"),React.createElement("div",{className:"p-2 flex flex-col gap-2"},[["MESSAGE","Send Message","Compose and queue a message"],["PROGRAM","Assign Program","Assign a program label (prototype-safe)"],["MEAL","Assign Meal Plan","Assign a meal plan label (prototype-safe)"],["CHALLENGE","Enroll Challenge","Enroll target set into a challenge"],["EXPORT","Export Segment","Download JSON snapshot"]].map(([v,Te,Se])=>React.createElement("button",{key:v,type:"button",onClick:()=>k(v),className:"w-full text-left px-3 py-2 rounded-xl border "+(D===v?"bg-sky-500/10 border-sky-400/30 text-sky-100":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10")},React.createElement("div",{className:"text-sm font-semibold"},Te),React.createElement("div",{className:"text-[11px] text-white/50"},Se))))),React.createElement("div",{className:"col-span-8 lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col min-h-0"},React.createElement("div",{className:"px-3 py-2 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Targets"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:Pt,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70 hover:bg-white/10"},"Select all visible"),React.createElement("button",{type:"button",onClick:Za,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70 hover:bg-white/10"},"Clear"))),React.createElement("div",{className:"p-3 flex flex-col gap-2 min-h-0"},React.createElement("input",{value:E,onChange:v=>g(v.target.value),placeholder:"Search clients...",className:"w-full rounded-xl bg-black/30 border border-white/10 px-3 py-2 text-sm text-white placeholder:text-white/40 outline-none focus:border-sky-400/30"}),React.createElement("div",{className:"flex-1 min-h-0 overflow-auto rounded-xl border border-white/10 divide-y divide-white/10"},le.map(v=>React.createElement("label",{key:v.id,className:"px-3 py-2 flex items-center gap-3 cursor-pointer hover:bg-white/5"},React.createElement("input",{type:"checkbox",checked:O.has(v.id),onChange:()=>qe(v.id)}),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("div",{className:"text-sm text-white truncate"},v.name),React.createElement("div",{className:"text-xs text-white/50 truncate"},v.email||`ID: ${v.id}`)))),le.length?null:React.createElement("div",{className:"px-3 py-6 text-center text-sm text-white/60"},"No clients match.")))),React.createElement("div",{className:"col-span-12 lg:col-span-5 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col min-h-0"},React.createElement("div",{className:"px-3 py-2 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Configure"),React.createElement("div",{className:"text-xs text-white/60"},"Selected: ",React.createElement("span",{className:"text-white/90"},Fe))),React.createElement("div",{className:"p-3 flex-1 min-h-0 overflow-auto flex flex-col gap-3"},D==="MESSAGE"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Message"),React.createElement("div",{className:"text-xs text-white/60 mb-2"},"Queues a message to selected clients."),React.createElement("textarea",{value:T,onChange:v=>he(v.target.value),rows:7,placeholder:"Write your message...",className:"w-full rounded-xl bg-black/30 border border-white/10 p-3 text-sm text-white placeholder:text-white/40 outline-none focus:border-sky-400/30"})):null,D==="PROGRAM"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Assign Program"),React.createElement("div",{className:"text-xs text-white/60 mb-2"},"Stores assignment locally (prototype-safe). Supports Undo."),React.createElement("input",{value:oe,onChange:v=>ke(v.target.value),placeholder:"Program name (e.g., Strength Block A)",className:"w-full rounded-xl bg-black/30 border border-white/10 px-3 py-2 text-sm text-white placeholder:text-white/40 outline-none focus:border-sky-400/30"})):null,D==="MEAL"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Assign Meal Plan"),React.createElement("div",{className:"text-xs text-white/60 mb-2"},"Stores assignment locally (prototype-safe). Supports Undo."),React.createElement("input",{value:Re,onChange:v=>Me(v.target.value),placeholder:"Meal plan name (e.g., Cut - High Protein)",className:"w-full rounded-xl bg-black/30 border border-white/10 px-3 py-2 text-sm text-white placeholder:text-white/40 outline-none focus:border-sky-400/30"})):null,D==="CHALLENGE"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Enroll in Challenge"),React.createElement("div",{className:"text-xs text-white/60 mb-2"},"Phase 6.3.3: enroll selected clients into an existing challenge campaign (persists + undo supported)."),(()=>{var St;var v=typeof window!="undefined"&&window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null,Te=v&&typeof v._dump=="function"?v._dump():null;var Se=Te&&Array.isArray(Te.campaigns)?Te.campaigns.slice():v&&typeof v.listCampaigns=="function"?v.listCampaigns()||[]:[];if(!Array.isArray(Se)||Se.length===0)try{var za=JSON.parse(localStorage.getItem("__FOF_CHALLENGES_V1")||"[]")||[];if(Array.isArray(za)&&za.length){var Xe=za.map(dt=>({id:String(dt&&dt.id||""),name:String(dt&&dt.name||"Challenge"),metric:String(dt&&dt.metric||"STEPS"),status:String(dt&&dt.status||"DRAFT"),createdAt:Number(dt&&dt.createdAt)||0})).filter(dt=>dt.id);Se=Xe;try{v&&typeof v.createCampaign=="function"&&Xe.forEach(dt=>{try{v.createCampaign({id:dt.id,name:dt.name,metric:dt.metric,status:dt.status||"DRAFT"})}catch(Qt){}})}catch(dt){}}}catch(za){}var yt=Se.filter(za=>String(za&&za.status||"DRAFT").toUpperCase()!=="ARCHIVED");return yt.length?React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("select",{value:Et||String(((St=yt[0])==null?void 0:St.id)||""),onChange:za=>ya(za.target.value),className:"w-full rounded-xl bg-black/30 border border-white/10 px-3 py-2 text-sm text-white outline-none focus:border-sky-400/30"},yt.map(za=>React.createElement("option",{key:za.id,value:za.id},za.name," \u2022 ",String(za.metric||"STEPS")))),React.createElement("div",{className:"text-[11px] text-white/50"},"Source: ",d&&d.tagFilter&&d.tagFilter!=="ALL"?`Tag segment (${String(d.tagFilter)})`:"Bulk/Manual selection"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Jt(za=>za+1)}catch(za){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-sm text-white/80 hover:bg-white/10"},"Refresh challenges list"),React.createElement("div",{className:"text-[11px] text-white/40"},"If you just created a challenge, tap refresh."))):React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-sm text-white"},"No challenges found"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Create a challenge in ",React.createElement("span",{className:"text-white/80"},"Engagement OS \u2192 Campaigns")," (Phase 6.4), then return here to enroll by tag."),React.createElement("button",{type:"button",onClick:()=>{try{o("ENGAGEMENT_CAMPAIGNS")}catch(za){}},className:"mt-3 px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-sm text-white/80 hover:bg-white/10"},"Open Engagement OS"))})()):null,D==="EXPORT"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Export Segment"),React.createElement("div",{className:"text-xs text-white/60"},"Downloads JSON snapshot of selected clients."),React.createElement("button",{type:"button",onClick:Ma,className:"mt-3 px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-sm text-white/80 hover:bg-white/10"},"Download JSON")):null,React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Preview"),React.createElement("div",{className:"text-xs text-white/60 mb-2"},"First ",Math.min(15,Fe)," selected clients"),React.createElement("div",{className:"rounded-xl border border-white/10 divide-y divide-white/10 overflow-hidden"},m.filter(v=>O.has(v.id)).slice(0,15).map(v=>React.createElement("div",{key:v.id,className:"px-3 py-2 flex items-center justify-between"},React.createElement("div",{className:"flex flex-col"},React.createElement("div",{className:"text-sm text-white"},v.name),React.createElement("div",{className:"text-xs text-white/50"},v.email||`ID: ${v.id}`)),React.createElement("div",{className:"text-[11px] text-white/40"},v.status||""))),Fe?null:React.createElement("div",{className:"px-3 py-6 text-center text-sm text-white/60"},"No selected clients.")))))))};(function(){try{if(window.__FOF_CHALLENGES_V2)return;var o={keys:{campaigns:"fof_td_ch_campaigns_v2",enrollments:"fof_td_ch_enrollments_v2",events:"fof_td_ch_events_v2",snapshots:"fof_td_ch_snapshots_v2",meta:"fof_td_ch_meta_v2"},limits:{events:2500,snapshots:600,enrollments:6e3,campaigns:1e3},schemaVersion:2},d=(_t,P)=>{try{var I=JSON.parse(_t);return I==null?P:I}catch(I){return P}},m=(_t,P)=>d(localStorage.getItem(_t)||"",P),E=(_t,P)=>{try{localStorage.setItem(_t,JSON.stringify(P))}catch(I){}},g=()=>Date.now(),f=_t=>{try{return new Date(_t||Date.now()).toISOString().slice(0,10)}catch(P){return"1970-01-01"}},F=_t=>`${_t}_${Math.random().toString(16).slice(2)}_${Date.now()}`,D=(_t,P={})=>{try{window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.track=="function"&&window.FOF_EVENT_LOG_V1.track(_t,P)}catch(I){}try{window.dispatchEvent(new CustomEvent("flowofit:event",{detail:{name:_t,payload:P}}))}catch(I){}},k=()=>({campaigns:m(o.keys.campaigns,[]),enrollments:m(o.keys.enrollments,[]),events:m(o.keys.events,[]),snapshots:m(o.keys.snapshots,[]),meta:m(o.keys.meta,{schemaVersion:0})}),T=_t=>{E(o.keys.campaigns,(_t.campaigns||[]).slice(0,o.limits.campaigns)),E(o.keys.enrollments,(_t.enrollments||[]).slice(0,o.limits.enrollments)),E(o.keys.events,(_t.events||[]).slice(-o.limits.events)),E(o.keys.snapshots,(_t.snapshots||[]).slice(-o.limits.snapshots)),E(o.keys.meta,_t.meta||{schemaVersion:o.schemaVersion})},he=_t=>{var P=String(_t||"STEPS").toUpperCase();return["STEPS","WORKOUTS","CHECKINS","MINUTES","DISTANCE"].includes(P)?P:"STEPS"},oe=()=>{var _t=k();if(Number(_t.meta&&_t.meta.schemaVersion)===o.schemaVersion)return _t;var I=m("__FOF_CHALLENGES_V1",[]),te=[],Ce=[],C=[],ye=[];if(Array.isArray(I)&&I.length){I.forEach(Pt=>{var Za=String(Pt&&Pt.id||"")||F("ch"),Ma=Number(Pt&&Pt.createdAt)||g(),$a=Number(Pt&&Pt.startAt)||Ma,Yt=Number(Pt&&Pt.endAt)||$a+14*24*60*60*1e3,it=he(Pt&&Pt.metric),Ut=Array.isArray(Pt&&Pt.enrolledTagIds)?Pt.enrolledTagIds.map(String):[];te.push({id:Za,schemaVersion:2,name:String(Pt&&Pt.name||"Challenge"),metric:it,scoring:{mode:"SUM",unit:it==="STEPS"?"steps":"units",pointsPerUnit:1,caps:{perDay:null}},window:{kind:"FIXED",startAt:$a,endAt:Yt,tz:"Asia/Dubai"},visibility:{mode:"PRIVATE"},createdAt:Ma,createdBy:{trainerId:"t_demo",name:"You"},status:"LIVE",tags:{enrolledTagIds:Ut},stats:{enrolledCount:0,activeCount:0,completedCount:0}});var ce=Array.isArray(Pt&&Pt.enrolledClientIds)?Pt.enrolledClientIds.map(String):[],Vt=Pt&&Pt.points&&typeof Pt.points=="object"?Pt.points:{};ce.forEach(v=>{var Te=typeof Vt[v]=="number"?Vt[v]:0;Ce.push({id:F("en"),campaignId:Za,clientId:String(v),joinedAt:Ma,leftAt:null,status:"ENROLLED",source:{mode:"migrated",tagId:null},score:{total:Te,byDay:{}},lastActivityAt:null})}),(Array.isArray(Pt&&Pt.updates)?Pt.updates:[]).slice(-200).forEach(v=>{C.push({id:F("ev"),ts:Number(v&&v.at)||Ma,name:"challenge.v1_update",campaignId:Za,clientId:v&&v.meta&&v.meta.clientId?String(v.meta.clientId):null,payload:{by:v&&v.by,delta:v&&v.delta,meta:v&&v.meta},ctx:{tz:"Asia/Dubai"}})})});var qe={};Ce.forEach(Pt=>{qe[Pt.campaignId]=(qe[Pt.campaignId]||0)+1}),te.forEach(Pt=>{Pt.stats={...Pt.stats||{},enrolledCount:qe[Pt.id]||0,activeCount:qe[Pt.id]||0}}),C.push({id:F("ev"),ts:g(),name:"challenge.migrated_v1_to_v2",campaignId:null,clientId:null,payload:{count:I.length},ctx:{tz:"Asia/Dubai"}}),D("challenge_migrated_v1_to_v2",{count:I.length})}var le={schemaVersion:2,migratedFromV1At:g(),lastSnapshotAt:null,lastEventAt:g()},O={campaigns:te,enrollments:Ce,events:C,snapshots:ye,meta:le};return T(O),O},ke=()=>oe(),Re=(_t={})=>{var P=ke(),I=String(_t.id||F("ch")),te=(P.campaigns||[]).find(Pt=>Pt.id===I),Ce=te?te.createdAt:Number(_t.createdAt)||g(),C=Number(_t.startAt)||te&&te.window&&te.window.startAt||Ce,ye=Number(_t.endAt)||te&&te.window&&te.window.endAt||C+14*24*60*60*1e3,le=he(_t.metric||te&&te.metric),O={id:I,schemaVersion:2,name:String(_t.name||te&&te.name||"Challenge"),metric:le,scoring:te&&te.scoring||{mode:"SUM",unit:le==="STEPS"?"steps":"units",pointsPerUnit:1,caps:{perDay:null}},window:{kind:"FIXED",startAt:C,endAt:ye,tz:"Asia/Dubai"},visibility:te&&te.visibility||{mode:"PRIVATE"},createdAt:Ce,createdBy:te&&te.createdBy||{trainerId:"t_demo",name:"You"},status:String(_t.status||te&&te.status||"DRAFT").toUpperCase(),tags:te&&te.tags||{enrolledTagIds:[]},stats:te&&te.stats||{enrolledCount:0,activeCount:0,completedCount:0}},qe=(P.campaigns||[]).filter(Pt=>Pt.id!==I);return qe.unshift(O),P.campaigns=qe,P.events=(P.events||[]).concat([{id:F("ev"),ts:g(),name:"challenge.created_or_updated",campaignId:I,clientId:null,payload:{metric:le,status:O.status},ctx:{tz:"Asia/Dubai"}}]),P.meta={...P.meta||{},schemaVersion:2,lastEventAt:g()},T(P),O},Me=(_t,P={})=>{var I=ke(),te=String(_t||""),Ce=(I.campaigns||[]).find(ye=>ye.id===te);if(!Ce)return null;var C={...Ce,...P};return I.campaigns=(I.campaigns||[]).map(ye=>ye.id===te?C:ye),I.events=(I.events||[]).concat([{id:F("ev"),ts:g(),name:"challenge.updated",campaignId:te,clientId:null,payload:{patchKeys:Object.keys(P||{})},ctx:{tz:"Asia/Dubai"}}]),I.meta={...I.meta||{},lastEventAt:g()},T(I),C},Et=_t=>Me(_t,{status:"ARCHIVED"}),ya=(_t,P=[],I={})=>{var te=ke(),Ce=String(_t||""),C=Array.from(new Set((P||[]).map(String))).filter(Boolean);if(!Ce||!C.length)return{ok:!1,count:0};var ye=te.enrollments||[],le=new Set(ye.filter(qe=>qe.campaignId===Ce).map(qe=>`${qe.campaignId}::${qe.clientId}`)),O=[];if(C.forEach(qe=>{var Pt=`${Ce}::${qe}`;le.has(Pt)||O.push({id:F("en"),campaignId:Ce,clientId:qe,joinedAt:g(),leftAt:null,status:"ENROLLED",source:{mode:String(I.mode||"manual"),tagId:I.tagId?String(I.tagId):null},score:{total:0,byDay:{}},lastActivityAt:null})}),te.enrollments=ye.concat(O),O.length){te.events=(te.events||[]).concat(O.map(Pt=>({id:F("ev"),ts:g(),name:"challenge.enrolled",campaignId:Ce,clientId:Pt.clientId,payload:{source:Pt.source},ctx:{tz:"Asia/Dubai"}})));var qe=(te.campaigns||[]).find(Pt=>Pt.id===Ce);if(qe){var Pt=(te.enrollments||[]).filter(Za=>Za.campaignId===Ce&&Za.status==="ENROLLED").length;qe.stats={...qe.stats||{},enrolledCount:Pt,activeCount:Pt}}te.meta={...te.meta||{},lastEventAt:g()},T(te)}return{ok:!0,count:O.length}},Ct=(_t,P,I={})=>{var te=ke(),Ce=String(_t||""),C=String(P||"");var ye=0;if(te.enrollments=(te.enrollments||[]).map(le=>le.campaignId===Ce&&le.clientId===C&&le.status==="ENROLLED"?(ye++,{...le,status:"REMOVED",leftAt:g(),source:le.source||{mode:"manual",tagId:null}}):le),ye){te.events=(te.events||[]).concat([{id:F("ev"),ts:g(),name:"challenge.removed",campaignId:Ce,clientId:C,payload:{meta:I},ctx:{tz:"Asia/Dubai"}}]);var le=(te.campaigns||[]).find(O=>O.id===Ce);if(le){var O=(te.enrollments||[]).filter(qe=>qe.campaignId===Ce&&qe.status==="ENROLLED").length;le.stats={...le.stats||{},enrolledCount:O,activeCount:O}}te.meta={...te.meta||{},lastEventAt:g()},T(te)}return{ok:!!ye,changed:ye}},Jt=(_t,P,I=0,te={})=>{var Ce=ke(),C=String(_t||""),ye=String(P||""),le=Number(I)||0;if(!C||!ye||!le)return{ok:!1};var O=f(g());var qe=!1;return Ce.enrollments=(Ce.enrollments||[]).map(Pt=>{if(Pt.campaignId===C&&Pt.clientId===ye&&Pt.status==="ENROLLED"){var Za={...Pt.score&&Pt.score.byDay||{}};Za[O]=(typeof Za[O]=="number"?Za[O]:0)+le;var Ma=typeof Pt.score&&typeof Pt.score.total=="number"?Pt.score.total+le:(Number(Pt.score&&Pt.score.total)||0)+le;return qe=!0,{...Pt,score:{total:Ma,byDay:Za},lastActivityAt:g()}}return Pt}),qe&&(Ce.events=(Ce.events||[]).concat([{id:F("ev"),ts:g(),name:"challenge.progress",campaignId:C,clientId:ye,payload:{delta:le,day:O,meta:te},ctx:{tz:"Asia/Dubai"}}]),Ce.meta={...Ce.meta||{},lastEventAt:g()},T(Ce)),{ok:qe}},Ye=(_t,P)=>{var I=ke(),te=String(_t||""),Ce=String(P||f(g())),C=(I.enrollments||[]).filter(qe=>qe.campaignId===te&&qe.status==="ENROLLED").map(qe=>{var Pt=qe.score&&qe.score.byDay||{},Za=Ce==="TOTAL"?Number(qe.score&&qe.score.total)||0:Number(Pt[Ce])||0;return{clientId:qe.clientId,score:Za}});C.sort((qe,Pt)=>Pt.score-qe.score||String(qe.clientId).localeCompare(String(Pt.clientId)));var ye=C.map((qe,Pt)=>({...qe,rank:Pt+1})),le={id:F("snap"),campaignId:te,day:Ce==="TOTAL"?f(g()):Ce,createdAt:g(),ranks:ye,totals:{participants:C.length}},O=(I.snapshots||[]).filter(qe=>!(qe.campaignId===te&&qe.day===le.day));return I.snapshots=O.concat([le]),I.meta={...I.meta||{},lastSnapshotAt:g()},T(I),le},Tt=(_t,P="TOTAL")=>{var I=ke(),te=String(_t||"");if(!te)return[];if(P==="TOTAL"){var ye=(I.enrollments||[]).filter(le=>le.campaignId===te&&le.status==="ENROLLED").map(le=>({clientId:le.clientId,score:Number(le.score&&le.score.total)||0}));return ye.sort((le,O)=>O.score-le.score||String(le.clientId).localeCompare(String(O.clientId))),ye.map((le,O)=>({...le,rank:O+1}))}var Ce=String(P),C=(I.snapshots||[]).find(ye=>ye.campaignId===te&&ye.day===Ce);return C&&Array.isArray(C.ranks)?C.ranks:Ye(te,Ce).ranks};window.__FOF_CHALLENGES_V2={version:"6.3.1",keys:o.keys,ensureV2:oe,listCampaigns:()=>ke().campaigns||[],getCampaign:_t=>(ke().campaigns||[]).find(P=>P.id===String(_t))||null,createCampaign:_t=>({ok:!0,campaign:Re(_t||{})}),updateCampaign:(_t,P)=>({ok:!!Me(_t,P||{}),campaign:Me(_t,P||{})}),archiveCampaign:_t=>({ok:!!Et(_t),campaign:Et(_t)}),enrollClients:(_t,P,I)=>ya(_t,P,I||{}),removeEnrollment:Ct,addProgress:Jt,computeSnapshot:Ye,getLeaderboard:Tt,_dump:()=>ke()},window.__FOF_CH_DEBUG={resetV2:()=>(Object.values(o.keys).forEach(_t=>{try{localStorage.removeItem(_t)}catch(P){}}),!0),reMigrateFromV1:()=>{try{localStorage.removeItem(o.keys.meta)}catch(_t){}return oe()}},oe()}catch(o){console.warn("FOF Phase 6.3.1 foundations install failed:",o)}})();var qn=({setView:o,hideTopBar:d=!1})=>{var m="__FOF_CHALLENGES_V1",E=()=>{try{return JSON.parse(localStorage.getItem(m)||"[]")||[]}catch(ae){return[]}},g=ae=>{try{localStorage.setItem(m,JSON.stringify(ae||[]))}catch(Ot){}},f=typeof Zn=="function"?Zn():{tags:[],assignments:{},getClientTagIds:()=>[],toggleClientTag:()=>{}},F=React.useMemo(()=>{var ae=window.__FOF_UNIVERSAL_CLIENTS||window.__FOF_DEMO_CLIENTS||window.__FOF_CLIENTS||[];return(Array.isArray(ae)?ae:[]).map(xe=>({id:String(xe.id||xe.clientId||xe.email||xe.phone||xe.name||""),name:xe.name||xe.fullName||"Client",email:xe.email||"",status:xe.status||""})).filter(xe=>xe.id)},[]),[D,k]=React.useState(E),[T,he]=React.useState(()=>E()[0]&&E()[0].id?E()[0].id:null),[oe,ke]=React.useState(!1),[Re,Me]=React.useState(""),[Et,ya]=React.useState("ALL"),[Ct,Jt]=React.useState("OVERVIEW"),[Ye,Tt]=React.useState(!1),[_t,P]=React.useState(null),[I,te]=React.useState(!1),[Ce,C]=React.useState(""),[ye,le]=React.useState("WORKOUTS"),[O,qe]=React.useState(14),[Pt,Za]=React.useState(1);React.useEffect(()=>{var ae=()=>{try{Za(1),ke(!0)}catch(Ot){}};try{window.addEventListener("flowofit:engagement:newCampaign",ae)}catch(Ot){}return()=>{try{window.removeEventListener("flowofit:engagement:newCampaign",ae)}catch(Ot){}}},[]);var Ma=Ce,$a=C,Yt=ye,it=le,Ut=O,ce=qe,Vt=ae=>{try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:{message:ae}}))}catch(Ot){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:{message:ae}}))}catch(Ot){}try{console.log("[FOF Toast]",ae)}catch(Ot){}},Fe=(ae,Ot={})=>{try{window.FOF_EVENT_LOG_V1&&typeof window.FOF_EVENT_LOG_V1.track=="function"&&window.FOF_EVENT_LOG_V1.track(ae,Ot)}catch(xe){}};React.useEffect(()=>{g(D)},[D]),React.useEffect(()=>{try{Jt("OVERVIEW")}catch(ae){}},[T]);var v=React.useMemo(()=>D.find(ae=>ae.id===T)||null,[D,T]),Te=ae=>{try{var Ot=Date.now(),xe=Number(ae&&(ae.startAt||ae.createdAt))||0,p=Number(ae&&ae.endAt)||0,R=String(ae&&ae.status||"").toUpperCase();return R&&["DRAFT","LIVE","ENDED"].includes(R)?R:p&&Ot>=p?"ENDED":xe&&Ot<xe?"DRAFT":"LIVE"}catch(Ot){return String(ae&&ae.status||"LIVE").toUpperCase()||"LIVE"}},Se=()=>{try{return{HISTORY:(window.__FOF_TDEP&&window.__FOF_TDEP.KEYS?window.__FOF_TDEP.KEYS:{}).TRIAGE_HISTORY||"fof.tdep.triage_history.v1"}}catch(ae){return{HISTORY:"fof.tdep.triage_history.v1"}}},yt=ae=>{try{var Ot=Se().HISTORY,p=(JSON.parse(localStorage.getItem(Ot)||"[]")||[]).concat([ae]).slice(-1200);localStorage.setItem(Ot,JSON.stringify(p))}catch(Ot){}},St=ae=>{try{var Ot=window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null;if(!Ot)return String(ae&&ae.id||"");if(typeof Ot.getCampaign=="function"?Ot.getCampaign(String(ae.id)):null)return String(ae.id);var p=typeof Ot.listCampaigns=="function"?Ot.listCampaigns()||[]:[],R=String(ae&&ae.name||"").trim().toLowerCase(),Ve=p.find(pa=>String(pa&&pa.name||"").trim().toLowerCase()===R);return String(Ve&&Ve.id||ae&&ae.id||"")}catch(Ot){return String(ae&&ae.id||"")}},za=ae=>{try{var Ot=window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null;if(Ot&&typeof Ot.getLeaderboard=="function"){var xe=St(ae),p=Ot.getLeaderboard(xe,"TOTAL")||[];if(p.length)return p.map(R=>({clientId:String(R.clientId),score:Number(R.score)||0,rank:Number(R.rank)||0}))}}catch(Ot){}try{var Ot=(ae.enrolledClientIds||[]).map(String),xe=ae.points||{},p=Ot.map(R=>({clientId:R,score:Number(xe[R])||0}));return p.sort((R,Ve)=>Ve.score-R.score||R.clientId.localeCompare(Ve.clientId)),p.map((R,Ve)=>({...R,rank:Ve+1}))}catch(Ot){return[]}},Xe=ae=>{var Ot=za(ae);var xe=(ae.enrolledClientIds||[]).length;try{var qt=window.__FOF_CHALLENGES_V2?window.__FOF_CHALLENGES_V2:null;if(qt&&qt._dump){var ka=St(ae),pi=qt._dump(),Gi=(pi&&pi.enrollments?pi.enrollments:[]).filter(pe=>pe.campaignId===String(ka)&&pe.status==="ENROLLED").length;Gi&&(xe=Gi)}}catch(qt){}var p=Ot.filter(qt=>Number(qt.score||0)>0),R=xe?Math.round(p.length/xe*100):0,Ve=Ot.slice(0,3),pa=Ot.filter(qt=>Number(qt.score||0)<=0);return{campaignId:String(ae.id),name:ae.name,metric:ae.metric,enrolledCount:xe,participatedCount:p.length,participationPct:R,top3:Ve,dropoffs:pa,generatedAt:Date.now()}},dt=ae=>{try{var Ot=Date.now(),xe={id:"tri_evt_ch_done_"+Math.random().toString(16).slice(2)+"_"+Ot,type:"challenge.completion_summary",at:Ot,campaignId:ae.campaignId,payload:{name:ae.name,metric:ae.metric,enrolledCount:ae.enrolledCount,participatedCount:ae.participatedCount,participationPct:ae.participationPct},meta:{source:"challenges_6.3.6",severity:"info"}};yt(xe),(ae.top3||[]).forEach(p=>{yt({id:"tri_evt_ch_win_"+p.clientId+"_"+Ot,type:"challenge.top_performer",at:Ot,clientId:String(p.clientId),campaignId:ae.campaignId,payload:{rank:p.rank,score:p.score,metric:ae.metric},meta:{source:"challenges_6.3.6",severity:"positive"}})}),(ae.dropoffs||[]).forEach(p=>{yt({id:"tri_evt_ch_drop_"+p.clientId+"_"+Ot,type:"challenge.dropoff",at:Ot,clientId:String(p.clientId),campaignId:ae.campaignId,payload:{score:p.score,metric:ae.metric,recommendedNext:"send_nudge"},meta:{source:"challenges_6.3.6",severity:"risk"}})});try{window.__FOF_TDEP&&typeof window.__FOF_TDEP.logEvent=="function"&&window.__FOF_TDEP.logEvent("challenges.completion_summary_written",{campaignId:ae.campaignId},{surface:"engagement",module:"challenges"})}catch(p){}}catch(Ot){}},Qt=async()=>{var ae;if(v)try{te(!0);try{if(Te(v)!=="ENDED"){var R=Date.now();k(Ve=>Ve.map(pa=>pa.id===v.id?{...pa,status:"ENDED",endAt:Math.min(Number(pa.endAt||R),R)||R}:pa));try{window.__FOF_CHALLENGES_V2&&typeof window.__FOF_CHALLENGES_V2.updateCampaign=="function"&&window.__FOF_CHALLENGES_V2.updateCampaign(v.id,{status:"ENDED",window:{...((ae=window.__FOF_CHALLENGES_V2.getCampaign(v.id))==null?void 0:ae.window)||{},endAt:R}})}catch(Ve){}}}catch(p){}var Ot=(D||[]).find(p=>p.id===v.id)||v,xe=Xe(Ot);P(xe),Tt(!0),dt(xe)}finally{te(!1)}},yi=React.useMemo(()=>{var ae=(D||[]).slice();var Ot=String(Re||"").trim().toLowerCase();Ot&&(ae=ae.filter(p=>String(p.name||"").toLowerCase().includes(Ot)));var xe=String(Et||"ALL").toUpperCase();return xe!=="ALL"&&(ae=ae.filter(p=>String(Te(p)||"LIVE").toUpperCase()===xe)),ae.sort((p,R)=>(R.createdAt||0)-(p.createdAt||0)),ae},[D,Re,Et]),zi=()=>{var ae=String(Ce||"").trim();if(!ae)return Vt("Enter a challenge name.");var Ot=Math.max(1,Math.min(90,parseInt(O||14,10)||14)),xe=Date.now(),p=xe+Ot*24*60*60*1e3,R={id:"ch_"+Math.random().toString(16).slice(2)+"_"+xe,name:ae,metric:ye,createdAt:xe,startAt:xe,endAt:p,enrolledClientIds:[],enrolledTagIds:[],points:{},updates:[]};try{window.__FOF_CHALLENGES_V2&&typeof window.__FOF_CHALLENGES_V2.createCampaign=="function"&&window.__FOF_CHALLENGES_V2.createCampaign({id:R.id,name:R.name,metric:R.metric,createdAt:R.createdAt,startAt:R.startAt,endAt:R.endAt,status:"DRAFT"})}catch(Ve){}k(Ve=>[R,...Array.isArray(Ve)?Ve:[]]),he(R.id),ke(!1),C(""),le("WORKOUTS"),qe(14),Fe("challenge_created",{id:R.id,name:R.name,metric:R.metric,days:Ot}),Vt("Challenge created.")},os=ae=>{if(ae&&confirm("Delete this challenge?")){k(Ot=>(Array.isArray(Ot)?Ot:[]).filter(xe=>xe.id!==ae)),T===ae&&he(null),Fe("challenge_deleted",{id:ae});try{window.__FOF_CHALLENGES_V2&&window.__FOF_CHALLENGES_V2.archiveCampaign&&window.__FOF_CHALLENGES_V2.archiveCampaign(ae)}catch(Ot){}Vt("Challenge deleted.")}},as=(ae,Ot={})=>{if(!v)return Vt("Select a challenge first.");var xe=Array.from(new Set((ae||[]).map(String))).filter(Boolean);if(!xe.length)return Vt("No clients selected.");k(p=>(Array.isArray(p)?p:[]).map(R=>{if(R.id!==v.id)return R;var Ve=new Set((R.enrolledClientIds||[]).map(String));xe.forEach(ka=>Ve.add(ka));var pa={...R,enrolledClientIds:Array.from(Ve)},qt={...pa.points||{}};return xe.forEach(ka=>{typeof qt[ka]!="number"&&(qt[ka]=0)}),pa.points=qt,pa.updates=[...pa.updates||[],{at:Date.now(),by:"enroll",delta:0,meta:Ot}],pa}));try{window.__FOF_CHALLENGES_V2&&window.__FOF_CHALLENGES_V2.enrollClients&&window.__FOF_CHALLENGES_V2.enrollClients(v.id,xe,Ot)}catch(p){}Fe("challenge_enrolled",{challengeId:v.id,count:xe.length,...Ot}),Vt(`Enrolled ${xe.length} clients.`)},ro=ae=>{var Ot=String(ae||"").trim();if(!Ot)return;var xe=F.filter(p=>(f.getClientTagIds?f.getClientTagIds(p.id):[]).includes(Ot)).map(p=>p.id);as(xe,{mode:"tag",tagId:Ot}),k(p=>(Array.isArray(p)?p:[]).map(R=>{if(!v||R.id!==v.id)return R;var Ve=new Set((R.enrolledTagIds||[]).map(String));return Ve.add(Ot),{...R,enrolledTagIds:Array.from(Ve)}}));try{if(window.__FOF_CHALLENGES_V2&&window.__FOF_CHALLENGES_V2.updateCampaign&&v){var p=(window.__FOF_CHALLENGES_V2.getCampaign?window.__FOF_CHALLENGES_V2.getCampaign(v.id):null)||null,R=p&&p.tags&&Array.isArray(p.tags.enrolledTagIds)?p.tags.enrolledTagIds.map(String):[],Ve=Array.from(new Set(R.concat([String(Ot)]))).filter(Boolean);window.__FOF_CHALLENGES_V2.updateCampaign(v.id,{tags:{enrolledTagIds:Ve}})}}catch(p){}},n=ae=>{if(!v)return;var Ot=String(ae||"");k(xe=>(Array.isArray(xe)?xe:[]).map(p=>{if(p.id!==v.id)return p;var R=(p.enrolledClientIds||[]).map(String).filter(pa=>pa!==Ot),Ve={...p.points||{}};return delete Ve[Ot],{...p,enrolledClientIds:R,points:Ve,updates:[...p.updates||[],{at:Date.now(),by:"remove",delta:0,meta:{clientId:Ot}}]}})),Fe("challenge_remove_client",{challengeId:v.id,clientId:Ot});try{window.__FOF_CHALLENGES_V2&&window.__FOF_CHALLENGES_V2.removeEnrollment&&window.__FOF_CHALLENGES_V2.removeEnrollment(v.id,Ot,{mode:"manual"})}catch(xe){}Vt("Removed client from challenge.")},y=()=>{if(!v)return;var ae=(v.enrolledClientIds||[]).map(String);if(!ae.length)return Vt("No enrolled clients.");var Ot=Date.now(),xe=[],p={...v.points||{}};ae.forEach(R=>{var Ve=v.metric==="STEPS"?500:(v.metric==="CHECKINS",1),qt=(v.metric==="STEPS"?Math.floor(500+Math.random()*2e3):Math.random()>.45?1:0)||Ve;p[R]=(typeof p[R]=="number"?p[R]:0)+qt,xe.push({at:Ot,by:"simulate",delta:qt,meta:{clientId:R}})}),k(R=>(Array.isArray(R)?R:[]).map(Ve=>Ve.id!==v.id?Ve:{...Ve,points:p,updates:[...Ve.updates||[],...xe]}));try{window.__FOF_CHALLENGES_V2&&(xe.forEach(R=>{var Ve=R&&R.meta&&R.meta.clientId?String(R.meta.clientId):null;Ve&&window.__FOF_CHALLENGES_V2.addProgress(v.id,Ve,Number(R.delta)||0,{by:"simulate"})}),window.__FOF_CHALLENGES_V2.computeSnapshot(v.id,new Date().toISOString().slice(0,10)))}catch(R){}Fe("challenge_progress_updated",{challengeId:v.id,metric:v.metric,clients:ae.length}),Vt("Progress updated.")},be=(ae,Ot,xe={})=>{if(!v)return;var p=String(ae||"").trim(),R=Number(Ot)||0;if(!p||!Number.isFinite(R)||R===0)return;var pa={ts:new Date().toISOString(),delta:R,meta:{...xe||{},clientId:p,by:"trainer"}};k(qt=>(Array.isArray(qt)?qt:[]).map(ka=>{if(ka.id!==v.id)return ka;var pi={...ka.points||{}},cs=Number(pi[p])||0;return pi[p]=cs+R,{...ka,points:pi,updates:[...ka.updates||[],pa]}}));try{window.__FOF_CHALLENGES_V2&&(window.__FOF_CHALLENGES_V2.addProgress(v.id,p,R,{...xe||{},by:"trainer"}),window.__FOF_CHALLENGES_V2.computeSnapshot(v.id,new Date().toISOString().slice(0,10)))}catch(qt){}try{Fe("challenge_progress_manual",{challengeId:v.id,clientId:p,delta:R,metric:v.metric})}catch(qt){}},ie=React.useMemo(()=>{if(!v)return[];var ae=v.points||{},Ot=(v.enrolledClientIds||[]).map(xe=>({...F.find(R=>R.id===String(xe))||{id:String(xe),name:"Client",email:""},score:typeof ae[String(xe)]=="number"?ae[String(xe)]:0}));return Ot.sort((xe,p)=>(p.score||0)-(xe.score||0)),Ot},[v,F,D]),Dt=ae=>ae==="STEPS"?"Steps":ae==="CHECKINS"?"Check-ins":"Workouts",b=React.useMemo(()=>{if(!v)return null;var ae=(v.endAt||Date.now())-Date.now();return Math.max(0,Math.ceil(ae/(24*60*60*1e3)))},[v,D]),[We,da]=React.useState(!1),[ii,jt]=React.useState(""),[Kt,Na]=React.useState([]),ra=ae=>{var Ot=String(ae);Na(xe=>{var p=Array.isArray(xe)?xe.slice():[],R=p.indexOf(Ot);return R>=0?p.splice(R,1):p.push(Ot),p})},Ti=React.useMemo(()=>{var ae=String(ii||"").trim().toLowerCase();return ae?F.filter(Ot=>String(Ot.name||"").toLowerCase().includes(ae)||String(Ot.email||"").toLowerCase().includes(ae)||String(Ot.id||"").toLowerCase().includes(ae)):F},[F,ii]),Ee=React.useMemo(()=>new Set((v&&v.enrolledClientIds||[]).map(String)),[v,D]);return React.createElement("div",{className:"h-full w-full flex flex-col overflow-hidden"},!d&&React.createElement("div",{className:"h-12 shrink-0 px-4 border-b border-white/10 bg-zinc-950/55 backdrop-blur flex items-center gap-3"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Campaigns"),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ke(!0),className:"px-3 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80"},"New"))),React.createElement("div",{className:"flex-1 min-h-0 flex overflow-hidden"},React.createElement("aside",{className:"w-[320px] shrink-0 border-r border-white/10 bg-white/[0.04] flex flex-col min-h-0"},React.createElement("div",{className:"px-4 py-2 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/60"},"Campaigns"),React.createElement("button",{type:"button",onClick:()=>{C(""),le("WORKOUTS"),qe(14),Za(1),ke(!0)},className:"px-2.5 py-1.5 rounded-sm text-[11px] font-semibold border border-sky-400/25 bg-sky-500/10 text-sky-100 hover:bg-sky-500/15"},"New")),React.createElement("div",{className:"mt-2"},React.createElement("input",{value:String(Re||""),onChange:ae=>Me(ae.target.value),placeholder:"Search campaigns\u2026",className:"w-full px-3 py-2 rounded-sm bg-white/5 border border-white/10 text-white text-[12px] placeholder:text-white/35 focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement("div",{className:"mt-2 flex items-center gap-2"},["ALL","DRAFT","LIVE","ENDED"].map(ae=>React.createElement("button",{key:ae,type:"button",onClick:()=>ya(ae),className:"px-2 py-1 rounded-sm text-[11px] border "+(Et===ae?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},ae==="ALL"?"All":ae.charAt(0)+ae.slice(1).toLowerCase()))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Templates"),React.createElement("div",{className:"text-[10px] text-white/35"},"Quick start")),React.createElement("div",{className:"mt-2 flex gap-2 overflow-x-auto trainer-scroll pb-1"},[{name:"Steps Sprint",metric:"STEPS",days:14,note:"Steps"},{name:"Workout Streak",metric:"WORKOUTS",days:7,note:"Workouts"},{name:"Check-in Consistency",metric:"CHECKINS",days:10,note:"Check-ins"}].map(ae=>React.createElement("button",{key:ae.name,type:"button",onClick:()=>{C(ae.name),le(ae.metric),qe(ae.days),Za(2),ke(!0)},className:"shrink-0 text-left px-3 py-2 rounded-sm border border-white/10 bg-white/5 hover:bg-white/10",style:{minWidth:150}},React.createElement("div",{className:"text-[12px] font-semibold text-white/90"},ae.name),React.createElement("div",{className:"text-[11px] text-white/50"},ae.note," \u2022 ",ae.days,"d")))))),React.createElement("div",{className:"flex-1 min-h-0 overflow-y-auto trainer-scroll divide-y divide-white/10"},D.length?yi.map(ae=>React.createElement("button",{key:ae.id,type:"button",onClick:()=>he(ae.id),className:"w-full text-left px-4 py-2.5 hover:bg-white/5 "+(T===ae.id?"bg-white/6":"")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},ae.name||"Untitled campaign"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},React.createElement("span",{className:"text-white/70"},ae.metric||"Metric"),React.createElement("span",{className:"text-white/25"}," \u2022 "),React.createElement("span",null,(ae.enrolledClientIds||[]).length," enrolled"))),React.createElement("div",{className:"shrink-0"},React.createElement("span",{className:"px-2 py-1 rounded-full text-[10px] font-mono uppercase tracking-widest border border-white/10 bg-white/5 text-white/60"},Te(ae)))))):React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-white font-semibold"},"No campaigns"),React.createElement("div",{className:"text-white/60 text-sm mt-1"},"Create your first campaign to begin."),React.createElement("button",{type:"button",onClick:()=>ke(!0),className:"mt-4 px-3 py-2 rounded-sm border border-sky-400/25 bg-sky-500/10 text-sky-100 text-xs font-mono uppercase tracking-widest hover:bg-sky-500/15"},"New campaign"))),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 flex items-center justify-between text-[11px] text-white/55"},React.createElement("button",{type:"button",onClick:()=>{try{__FOF_CH_DEBUG&&__FOF_CH_DEBUG.reMigrateFromV1&&__FOF_CH_DEBUG.reMigrateFromV1(),Vt("Re-migrated V1 \u2192 V2")}catch(ae){Vt("Remigrate failed")}},className:"px-2.5 py-1.5 rounded-sm bg-white/5 border border-white/10 hover:bg-white/10 text-white/70"},"Remigrate"),React.createElement("div",{className:"text-white/35"},"Phase 6.3.1"))),React.createElement("section",{className:"flex-1 min-w-0 flex flex-col overflow-hidden"},v?React.createElement(React.Fragment,null,React.createElement("div",{className:"h-12 shrink-0 px-4 border-b border-white/10 bg-zinc-950/35 flex items-center gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},v.name),React.createElement("div",{className:"text-[11px] text-white/55"},v.metric," \u2022 ",(v.enrolledClientIds||[]).length," enrolled")),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>da(!0),className:"px-3 py-1.5 rounded-sm text-[12px] border border-emerald-400/25 bg-emerald-500/10 text-emerald-100 hover:bg-emerald-500/15"},"Enroll"),React.createElement("select",{defaultValue:"",onChange:ae=>{var Ot=ae.target.value;Ot&&(ro(Ot),ae.target.value="")},className:"px-3 py-1.5 rounded-sm bg-white/5 border border-white/10 text-white/80 text-[12px] hover:bg-white/10"},React.createElement("option",{value:""},"By tag\u2026"),(f.tags||[]).map(ae=>React.createElement("option",{key:ae.id,value:ae.id},ae.label||ae.name||ae.id))),React.createElement("div",{className:"flex items-center rounded-2xl border border-white/12 bg-black/30 overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>{setViewMode("CARDS"),collapseAll()},className:"px-3 py-2 text-[12px] font-mono uppercase tracking-widest "+(viewMode==="CARDS"?"bg-white/10 text-white":"text-white/60 hover:text-white"),title:"Card view"},"Cards"),React.createElement("div",{className:"w-px self-stretch bg-white/10"}),React.createElement("button",{type:"button",onClick:()=>{setViewMode("LIST")},className:"px-3 py-2 text-[12px] font-mono uppercase tracking-widest "+(viewMode==="LIST"?"bg-white/10 text-white":"text-white/60 hover:text-white"),title:"List view"},"List")),React.createElement("button",{type:"button",onClick:()=>y(),className:"px-3 py-1.5 rounded-sm text-[12px] border border-amber-400/25 bg-amber-500/10 text-amber-100 hover:bg-amber-500/15"},"Simulate"),React.createElement("button",{type:"button",onClick:()=>os(v.id),className:"px-3 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/70",title:"Delete campaign"},"Delete"))),React.createElement("div",{className:"flex-1 min-h-0 overflow-y-auto trainer-scroll"},React.createElement("div",{className:"sticky top-0 z-10 border-b border-white/10 bg-zinc-950/55 backdrop-blur"},React.createElement("div",{className:"px-4 py-3 flex items-center gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] text-white/55"},"Status: ",React.createElement("span",{className:"text-white/85 font-mono uppercase tracking-widest"},Te(v)),React.createElement("span",{className:"text-white/25"}," \u2022 "),React.createElement("span",{className:"text-white/70"},(()=>{try{var ae=new Date(Number(v.startAt||v.createdAt||0)),Ot=new Date(Number(v.endAt||0));return v.endAt?ae.toLocaleDateString()+" \u2192 "+Ot.toLocaleDateString():""}catch(ae){return""}})()))),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Qt(),disabled:I,className:"px-3 py-1.5 rounded-sm text-[12px] border border-indigo-400/25 bg-indigo-500/10 text-indigo-100 hover:bg-indigo-500/15 "+(I?"opacity-50 cursor-not-allowed":""),title:"Completion summary + triage hooks"},"Completion"),["OVERVIEW","PROGRESS","LEADERBOARD"].map(ae=>React.createElement("button",{key:ae,type:"button",onClick:()=>Jt(ae),className:"px-3 py-1.5 rounded-sm text-[12px] border "+(Ct===ae?"border-white/25 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},ae.charAt(0)+ae.slice(1).toLowerCase()))))),React.createElement("div",{className:"p-4"},Ct==="OVERVIEW"?React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 xl:col-span-5 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Summary"),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Metric"),React.createElement("div",{className:"mt-1 text-[13px] text-white/85 font-semibold"},String(v.metric||"WORKOUTS"))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Enrolled"),React.createElement("div",{className:"mt-1 text-[13px] text-white/85 font-semibold"},(v.enrolledClientIds||[]).length)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Progress updates"),React.createElement("div",{className:"mt-1 text-[13px] text-white/85 font-semibold"},(v.updates||[]).length)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Tags linked"),React.createElement("div",{className:"mt-1 text-[13px] text-white/85 font-semibold"},(v.enrolledTagIds||[]).length))),React.createElement("div",{className:"mt-4 text-[12px] text-white/60 leading-relaxed"},"Use ",React.createElement("span",{className:"text-white/80 font-semibold"},"Progress")," to manually update client scores, and ",React.createElement("span",{className:"text-white/80 font-semibold"},"Leaderboard")," to review rankings."),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Jt("PROGRESS")}catch(ae){}},className:"px-3 py-2 rounded-sm text-[12px] border border-emerald-400/25 bg-emerald-500/10 text-emerald-100 hover:bg-emerald-500/15"},"Open Progress"),React.createElement("button",{type:"button",onClick:()=>{try{Jt("LEADERBOARD")}catch(ae){}},className:"px-3 py-2 rounded-sm text-[12px] border border-amber-400/25 bg-amber-500/10 text-amber-100 hover:bg-amber-500/15"},"Open Leaderboard"))),React.createElement("div",{className:"col-span-12 xl:col-span-7 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Enrollment (read-only)"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Enrolled clients: ",React.createElement("span",{className:"text-white/85 font-semibold"},(v.enrolledClientIds||[]).length)),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Enrolled via tags"),(v.enrolledTagIds||[]).length?React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(v.enrolledTagIds||[]).map(ae=>{var Ot=(f.tags||[]).find(p=>String(p.id)===String(ae)),xe=Ot&&(Ot.label||Ot.name)?String(Ot.label||Ot.name):String(ae);return React.createElement("span",{key:String(ae),className:"px-2 py-1 rounded-full text-[11px] border border-white/10 bg-white/5 text-white/70"},xe)})):React.createElement("div",{className:"mt-2 text-[12px] text-white/45"},"No tag-based cohorts linked yet.")),React.createElement("div",{className:"mt-4 rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Last activity"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70"},(()=>{try{var ae=v.updates||[];if(!ae.length)return"No progress updates yet.";var Ot=ae[ae.length-1]||{};return`Last update: ${new Date(Number(Ot.at||0)).toLocaleString()} (${String(Ot.by||"update")})`}catch(ae){return"No progress updates yet."}})())))):Ct==="PROGRESS"?React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col min-h-[420px]"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Enrollment"),React.createElement("div",{className:"text-[11px] text-white/45 mt-1"},"Manage who is participating.")),React.createElement("div",{className:"text-[11px] text-white/55"},(v.enrolledClientIds||[]).length," enrolled")),React.createElement("div",{className:"flex-1 min-h-0 overflow-y-auto trainer-scroll divide-y divide-white/10"},(v.enrolledClientIds||[]).length?(v.enrolledClientIds||[]).map(ae=>{var Ot=F.find(Ve=>String(Ve.id)===String(ae))||{id:String(ae),name:"Client",email:""},xe=v.points&&typeof v.points[String(ae)]=="number"?v.points[String(ae)]:0,p=v.metric==="STEPS"?500:1,R=v.metric==="STEPS"?2e3:v.metric==="CHECKINS"?3:5;return React.createElement("div",{key:String(ae),className:"px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},Ot.name),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},Ot.email||Ot.status||"")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[11px] text-white/55"},"Score: ",React.createElement("span",{className:"text-white/85"},xe)),React.createElement("button",{type:"button",onClick:()=>be(ae,p),className:"px-2.5 py-1.5 rounded-sm border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono",title:"Add progress"},"+",p),React.createElement("button",{type:"button",onClick:()=>be(ae,R),className:"px-2.5 py-1.5 rounded-sm border border-emerald-400/20 bg-emerald-500/5 hover:bg-emerald-500/10 text-emerald-100/90 text-[11px] font-mono",title:"Add progress"},"+",R),React.createElement("button",{type:"button",onClick:()=>n(ae),className:"px-2.5 py-1.5 rounded-sm bg-white/5 border border-white/10 hover:bg-white/10 text-white/70 text-[11px]"},"Remove")))}):React.createElement("div",{className:"p-4 text-sm text-white/60"},"No one enrolled yet. Click \u201CEnroll\u201D.")))):React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col min-h-[420px]"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60"},"Leaderboard"),React.createElement("div",{className:"text-[11px] text-white/45 mt-1"},"Ranked by total score.")),React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},v.metric)),React.createElement("div",{className:"flex-1 min-h-0 overflow-y-auto trainer-scroll divide-y divide-white/10"},(()=>{var ae=(v.enrolledClientIds||[]).map(String),Ot=v.points||{},xe=ae.map(p=>({cid:p,score:typeof Ot[p]=="number"?Ot[p]:0,name:(F.find(R=>String(R.id)===String(p))||{}).name||"Client "+p})).sort((p,R)=>R.score-p.score);return xe.length?xe.map((p,R)=>React.createElement("div",{key:p.cid,className:"px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-xs font-mono text-white/70"},R+1),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},p.name),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Total: ",React.createElement("span",{className:"text-white/80"},p.score)))),React.createElement("div",{className:"text-[11px] text-white/55"},p.score))):React.createElement("div",{className:"p-4 text-sm text-white/60"},"No leaderboard yet \u2014 enroll clients and simulate progress.")})())))))):React.createElement("div",{className:"flex-1 min-h-0 flex items-center justify-center p-10 text-center"},React.createElement("div",{className:"max-w-md"},React.createElement("div",{className:"text-white text-lg font-semibold"},"Select a campaign"),React.createElement("div",{className:"text-white/60 text-sm mt-2"},"Choose a campaign on the left to manage enrollment and leaderboards."),React.createElement("div",{className:"mt-5 flex items-center justify-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ke(!0),className:"px-3 py-2 rounded-sm border border-sky-400/25 bg-sky-500/10 text-sky-100 text-xs font-mono uppercase tracking-widest hover:bg-sky-500/15"},"New campaign")))))),oe&&React.createElement("div",{className:"fixed inset-0 z-[95] bg-black/60 flex items-center justify-center p-4 modal-overlay",onMouseDown:()=>ke(!1)},React.createElement("div",{className:"w-full max-w-2xl rounded-2xl border border-white/10 bg-zinc-950/90 backdrop-blur overflow-hidden modal-card",onMouseDown:ae=>ae.stopPropagation()},React.createElement("div",{className:"px-5 py-4 border-b border-white/10 flex items-start gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Create campaign"),React.createElement("div",{className:"text-base font-semibold text-white"},"Challenge Builder")),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ke(!1),className:"px-2.5 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80"},"Close"))),React.createElement("div",{className:"px-5 py-3 border-b border-white/10 flex items-center gap-2"},React.createElement("div",{className:"px-2.5 py-1 rounded-sm text-[11px] border "+(Pt===1?"border-sky-400/30 bg-sky-500/10 text-sky-100":"border-white/10 bg-white/5 text-white/60")},"1 \u2022 Basics"),React.createElement("div",{className:"text-white/30"},"\u2192"),React.createElement("div",{className:"px-2.5 py-1 rounded-sm text-[11px] border "+(Pt===2?"border-sky-400/30 bg-sky-500/10 text-sky-100":"border-white/10 bg-white/5 text-white/60")},"2 \u2022 Review"),React.createElement("div",{className:"ml-auto text-[11px] text-white/50"},"Phase 6.3.2 (safe builder)")),React.createElement("div",{className:"max-h-[70vh] overflow-y-auto trainer-scroll"},Pt===1&&React.createElement("div",{className:"p-5 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Campaign name"),React.createElement("input",{value:String(Ce||""),onChange:ae=>C(ae.target.value),placeholder:"e.g., January Consistency Sprint",className:"mt-2 w-full px-3 py-2 rounded-sm bg-white/5 border border-white/10 text-white text-[13px] placeholder:text-white/35 focus:outline-none focus:ring-2 focus:ring-white/10"})),React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Metric"),React.createElement("select",{value:String(ye||"WORKOUTS"),onChange:ae=>le(ae.target.value),className:"mt-2 w-full px-3 py-2 rounded-sm bg-white/5 border border-white/10 text-white text-[13px] focus:outline-none"},React.createElement("option",{value:"WORKOUTS"},"Workouts"),React.createElement("option",{value:"STEPS"},"Steps"),React.createElement("option",{value:"CHECKINS"},"Check-ins"),React.createElement("option",{value:"MINUTES"},"Minutes"),React.createElement("option",{value:"DISTANCE"},"Distance"))),React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-white/60 font-mono uppercase tracking-widest"},"Duration (days)"),React.createElement("input",{type:"number",min:"3",max:"90",value:Number(O||14),onChange:ae=>qe(Math.max(3,Math.min(90,Number(ae.target.value||14)))),className:"mt-2 w-full px-3 py-2 rounded-sm bg-white/5 border border-white/10 text-white text-[13px] focus:outline-none"})),React.createElement("div",{className:"md:col-span-2 rounded-xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Builder notes"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70 leading-relaxed"},"This is the safe Phase 6.3.2 builder. Next steps (later phases): enrollment rules, scoring caps, teams, proof requirements, and automation hooks."))),Pt===2&&React.createElement("div",{className:"p-5"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Preview"),React.createElement("div",{className:"mt-2 text-lg font-semibold text-white"},Ce||"Untitled Campaign"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Metric: ",React.createElement("span",{className:"text-white/85 font-semibold"},String(ye||"WORKOUTS"))," \u2022 Duration: ",React.createElement("span",{className:"text-white/85 font-semibold"},Number(O||14)," days")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Enrollment"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Manual + Tags (Phase 6.3.3)")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Leaderboard"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Total score (V2 snapshots)")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Signals"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Events stream ready")))))),React.createElement("div",{className:"px-5 py-4 border-t border-white/10 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Za(Math.max(1,Pt-1)),disabled:Pt===1,className:"px-3 py-2 rounded-sm text-[12px] border "+(Pt===1?"border-white/5 bg-white/5 text-white/30":"border-white/10 bg-white/5 hover:bg-white/10 text-white/80")},"Back"),React.createElement("div",{className:"ml-auto flex items-center gap-2"},Pt===1?React.createElement("button",{type:"button",onClick:()=>Za(2),className:"px-3 py-2 rounded-sm text-[12px] border border-sky-400/25 bg-sky-500/10 text-sky-100 hover:bg-sky-500/15"},"Review"):React.createElement("button",{type:"button",onClick:()=>{var ae=String(Ce||"").trim()||"Untitled Campaign";try{C(ae)}catch(Ot){}try{zi()}catch(Ot){}ke(!1),Za(1)},className:"px-3 py-2 rounded-sm text-[12px] border border-emerald-400/25 bg-emerald-500/10 text-emerald-100 hover:bg-emerald-500/15"},"Create Campaign"))))),We?React.createElement("div",{className:"fixed inset-0 z-[80] bg-black/60 flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-2xl rounded-2xl border border-white/10 bg-zinc-950/90 backdrop-blur overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Enroll clients"),React.createElement("button",{type:"button",onClick:()=>{da(!1),Na([])},className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 text-white/70 text-sm"},"\u2715")),React.createElement("div",{className:"p-4"},React.createElement("div",{className:"text-xs text-white/60 mb-3"},"Select clients to enroll into this campaign."),React.createElement("div",{className:"max-h-[50vh] overflow-auto divide-y divide-white/10 rounded-xl border border-white/10"},F.map(ae=>{var Ot=Kt.includes(String(ae.id));return React.createElement("label",{key:ae.id,className:"px-3 py-3 flex items-center justify-between gap-3 hover:bg-white/5 cursor-pointer"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},ae.name),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},ae.email||ae.status||"")),React.createElement("input",{type:"checkbox",checked:Ot,onChange:()=>{Na(xe=>{var p=new Set(xe||[]);return p.has(String(ae.id))?p.delete(String(ae.id)):p.add(String(ae.id)),Array.from(p)})}}))}))),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-xs text-white/60"},"Selected: ",React.createElement("span",{className:"text-white/90"},Kt.length)),React.createElement("button",{type:"button",onClick:()=>{as(Kt,{mode:"manual"}),da(!1),Na([])},className:"px-3 py-2 rounded-xl bg-emerald-500/15 border border-emerald-400/25 text-emerald-100 text-sm hover:bg-emerald-500/20"},"Enroll Selected")))):null,Ye&&_t?React.createElement("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4",onMouseDown:()=>{try{Tt(!1)}catch(ae){}}},React.createElement("div",{className:"w-full max-w-3xl rounded-2xl border border-white/15 bg-zinc-950/95 backdrop-blur shadow-2xl overflow-hidden",onMouseDown:ae=>{try{ae.stopPropagation()}catch(Ot){}}},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},"Completion Summary"),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},_t.name," \u2022 ",_t.metric)),React.createElement("button",{type:"button",onClick:()=>Tt(!1),className:"px-3 py-1.5 rounded-sm bg-white/5 border border-white/10 hover:bg-white/10 text-white/70 text-[12px]"},"Close")),React.createElement("div",{className:"max-h-[70vh] overflow-y-auto trainer-scroll p-4"},React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 md:col-span-4 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Participation"),React.createElement("div",{className:"mt-2 text-3xl font-semibold text-white"},_t.participationPct,"%"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},_t.participatedCount," of ",_t.enrolledCount," participated"),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"(Hooks written into Triage history \u2014 no scoring changes)")),React.createElement("div",{className:"col-span-12 md:col-span-8 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Top performers"),(_t.top3||[]).length?React.createElement("div",{className:"mt-3 space-y-2"},(_t.top3||[]).map(ae=>{var Ot=F.find(xe=>String(xe.id)===String(ae.clientId))||{name:"Client",id:String(ae.clientId)};return React.createElement("div",{key:String(ae.clientId),className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/20 px-3 py-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},"#",ae.rank," ",Ot.name),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},Ot.id)),React.createElement("div",{className:"text-[12px] text-white/80 font-mono"},ae.score))})):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"No scores yet.")),React.createElement("div",{className:"col-span-12 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Drop-offs (recommended: send nudge)"),(_t.dropoffs||[]).length?React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},(_t.dropoffs||[]).slice(0,12).map(ae=>{var Ot=F.find(xe=>String(xe.id)===String(ae.clientId))||{name:"Client",id:String(ae.clientId)};return React.createElement("div",{key:String(ae.clientId),className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2 flex items-center justify-between"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] text-white/85 font-semibold truncate"},Ot.name),React.createElement("div",{className:"text-[11px] text-white/50 truncate"},Ot.id)),React.createElement("div",{className:"text-[11px] text-white/55 font-mono"},"0"))})):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"None \u2014 everyone participated \u{1F389}"),(_t.dropoffs||[]).length>12?React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Showing first 12 drop-offs."):null))),React.createElement("div",{className:"px-4 py-3 border-t border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/50"},"Generated: ",(()=>{try{return new Date(Number(_t.generatedAt||Date.now())).toLocaleString()}catch(ae){return""}})()),React.createElement("button",{type:"button",onClick:()=>{try{Tt(!1),o&&o("triage")}catch(ae){}},className:"px-3 py-1.5 rounded-sm text-[12px] border border-amber-400/25 bg-amber-500/10 text-amber-100 hover:bg-amber-500/15",title:"Open Triage to review events"},"Go to Triage")))):null)};var Rl=()=>{var o=b=>b==="ACTIVE"?"Active":b==="ATTENTION"?"Needs Attention":b==="NEW_LEADS"?"Leads":b,d=b=>React.createElement("button",{onClick:()=>fi(b),className:"px-3 py-2 text-[11px] font-bold uppercase rounded-sm border transition-colors "+(La===b?"bg-white/10 border-white/20 text-white":"bg-titanium-900 border-titanium-700 text-zinc-400 hover:text-white")},o(b)),m=b=>React.createElement("button",{onClick:()=>{Pa(b),Xs(null)},className:"px-4 py-2 text-[11px] font-extrabold tracking-wider uppercase rounded-full border transition-all duration-200 "+(Bi===b?"bg-[rgba(16,255,97,0.12)] border-[rgba(16,255,97,0.40)] text-white shadow-[0_0_0_1px_rgba(16,255,97,0.12),0_10px_24px_rgba(0,0,0,0.35)]":"bg-white/5 border-white/12 text-white/70 hover:text-white hover:bg-white/10 hover:border-white/20")},b==="CLIENTS"?"Clients":"Groups"),E=Oi.filter(b=>b.segment===La),g=Io,f=typeof Zn=="function"?Zn():{tags:[],byId:{},assignments:{},getClientTagIds:()=>[],toggleClientTag:()=>{}},[F,D]=React.useState("ALL"),[k,T]=React.useState(!1),[he,oe]=React.useState("ALL"),[ke,Re]=React.useState("ALL"),[Me,Et]=React.useState("ALL"),[ya,Ct]=React.useState(!1),Jt=b=>{try{var We=new Date(b).getTime();return!We||isNaN(We)?9999:Math.floor((Date.now()-We)/864e5)}catch(We){return 9999}},Ye=b=>{var We=Jt((b==null?void 0:b.lastCheckInAt)||(b==null?void 0:b.lastActiveAt)||(b==null?void 0:b.updatedAt)),da=Number((b==null?void 0:b.adherence7d)||0);return We<=7&&da>=.65?"ON_TRACK":We<=14&&da>=.45?"NEEDS_NUDGE":We<=21?"AT_RISK":"DORMANT"},Tt=b=>{var da,ii,jt;var We=Number((jt=(ii=(da=b==null?void 0:b.readiness)!=null?da:b==null?void 0:b.capacity)!=null?ii:b==null?void 0:b.capacityScore)!=null?jt:0);return We>=70?"HIGH":We>=45?"MID":"LOW"},_t=b=>{try{var We=typeof Vn=="function"?Vn(b):null;if(!We)return"NEVER";var da=typeof En=="function"?En(We):String((We==null?void 0:We.status)||""),ii=String(da||"").toLowerCase();return ii==="expired"||ii==="revoked"?"EXPIRED":"ACTIVE"}catch(We){return"NEVER"}},P=React.useMemo(()=>{var b=Array.isArray(E)?E.slice():[];try{if(!ya)return b;he&&he!=="ALL"&&(b=b.filter(We=>Ye(We)===he)),ke&&ke!=="ALL"&&(b=b.filter(We=>Tt(We)===ke)),Me&&Me!=="ALL"&&(b=b.filter(We=>_t(We)===Me))}catch(We){}return b},[n,he,ke,Me]),[I,te]=React.useState(!1),[Ce,C]=React.useState(!1),[ye,le]=React.useState([]),[O,qe]=React.useState({open:!1,kind:null}),[Pt,Za]=React.useState(""),[Ma,$a]=React.useState({templateId:"",startDate:"",durationDays:28,calories:"",protein:"",carbs:"",fat:""}),[Yt,it]=React.useState({flowId:"",startDate:"",durationDays:28,freqPerWeek:3,intensityCap:"FLOW"}),[Ut,ce]=React.useState(null),Vt=React.useMemo(()=>{try{return n||[]}catch(b){return[]}},[F,n]),Fe=b=>String(b&&(b.id||b.clientId||b.email||b.phone||b.name)||"").trim(),v=b=>{var We=String(b);le(da=>{var ii=Array.isArray(da)?da.slice():[],jt=ii.indexOf(We);return jt>=0?ii.splice(jt,1):ii.push(We),ii})},Te=()=>{try{le((Vt||[]).map(b=>String(b.id)))}catch(b){}},Se=()=>{try{le([])}catch(b){}},yt=b=>{qe({open:!0,kind:b||"MENU"})},St=()=>{qe({open:!1,kind:null})},za=b=>{try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:{message:b||"Done"}}))}catch(We){alert(b||"Done")}},Xe=(b,We)=>{try{window.FOF_EVENT_LOG_V1&&window.FOF_EVENT_LOG_V1.track&&window.FOF_EVENT_LOG_V1.track(b,We||{})}catch(da){}},dt=()=>{try{return new Date().toISOString().slice(0,10)}catch(b){return"2026-01-02"}},Qt=(b,We)=>{try{var da=localStorage.getItem(b);return da?JSON.parse(da):We||[]}catch(da){return We||[]}},yi=React.useMemo(()=>{var b=Qt("fof.td.nutrition.plan_templates.v1",[]);return Array.isArray(b)?b:[]},[O==null?void 0:O.open,O==null?void 0:O.kind]),zi=React.useMemo(()=>{var b=Qt("fof.td.yoga.flows.v1",[]);return Array.isArray(b)?b:[]},[O==null?void 0:O.open,O==null?void 0:O.kind]),os=()=>{var b=O==null?void 0:O.kind,We=Array.isArray(ye)?ye.slice():[],da=(Array.isArray(Vt)?Vt:[]).map(Kt=>Fe(Kt)).filter(Boolean),ii=We.length?We:da,jt=Array.from(new Set(ii.map(Kt=>String(Kt))));if(!jt.length)return za("No clients in current filter.");try{if(b==="MESSAGE"){var Kt=String(Pt||"").trim();return Kt?(Xe("bulk_message_sent",{count:jt.length,tagId:F}),ce({kind:b,uniq:jt,meta:{text:Kt}}),St(),Za(""),za(`Message queued to ${jt.length} client(s).`)):za("Enter a message.")}if(b==="ASSIGN_PLAN"){var Kt="fof_td_bulk_planassign_v1",Na=localStorage.getItem(Kt),ra=Na?JSON.parse(Na):[],Ti={ts:Date.now(),tagId:F,ids,planName:"Assigned Program (Bulk)"};return localStorage.setItem(Kt,JSON.stringify([Ti].concat(ra||[]).slice(0,50))),Xe("bulk_plan_assigned",{count:ids.length,tagId:F}),ce({kind:b,ids,meta:{key:Kt,prevRaw:Na}}),St(),za(`Program assigned to ${ids.length} client(s).`)}if(b==="ASSIGN_NUTRITION"){var Kt=String((Ma==null?void 0:Ma.templateId)||"");if(!Kt)return za("Pick a nutrition template.");var Na=(yi||[]).find(Ve=>String(Ve.id)===Kt)||null,ra=String((Ma==null?void 0:Ma.startDate)||dt()),Ti=Math.max(1,Number((Ma==null?void 0:Ma.durationDays)||28)),Ee={calories:Ma!=null&&Ma.calories?Number(Ma.calories):null,protein:Ma!=null&&Ma.protein?Number(Ma.protein):null,carbs:Ma!=null&&Ma.carbs?Number(Ma.carbs):null,fat:Ma!=null&&Ma.fat?Number(Ma.fat):null},ae="fof.td.nutrition.assignments.v1",Ot=localStorage.getItem(ae),xe=Ot?JSON.parse(Ot):[],p=new Date().toISOString(),R=(ids||[]).map(Ve=>({id:`nut_asn_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(Ve),templateId:Kt,templateName:String((Na==null?void 0:Na.name)||(Na==null?void 0:Na.title)||"Nutrition Template"),startDate:ra,durationDays:Ti,macroOverride:function(){try{if(Ma&&Ma.aiPerClient&&window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"){var pa=(Vt||[]).find(pi=>String(pi.id)===String(Ve))||{},qt=Na&&(Na.macroOverride||Na.macros)?Na.macroOverride||Na.macros:Ee||{},ka=window.__FOF.AI.suggestMacroOverride(pa||{},qt||{});return{calories:ka.calories,protein:ka.protein,carbs:ka.carbs,fat:ka.fat}}}catch(pa){}return Ee}(),status:"ACTIVE",createdAt:p,source:"BULK"}));localStorage.setItem(ae,JSON.stringify([...R||[],...xe||[]].slice(0,5e3))),Xe("bulk_nutrition_assigned",{count:ids.length,tagId:F,templateId:Kt}),ce({kind:b,ids,meta:{key:ae,prevRaw:Ot}}),St();try{window.dispatchEvent(new StorageEvent("storage",{key:ae}))}catch(Ve){}return za(`Nutrition plan assigned to ${ids.length} client(s).`)}if(b==="ASSIGN_YOGA"){var Kt=String((Yt==null?void 0:Yt.flowId)||"");if(!Kt)return za("Pick a yoga flow.");var Na=(zi||[]).find(pa=>String(pa.id)===Kt)||null,ra=String((Yt==null?void 0:Yt.startDate)||dt()),Ti=Math.max(1,Number((Yt==null?void 0:Yt.durationDays)||28)),Ee=Math.max(1,Math.min(14,Number((Yt==null?void 0:Yt.freqPerWeek)||3))),ae=String((Yt==null?void 0:Yt.intensityCap)||"FLOW"),Ot="fof.td.yoga.assignments.v1",xe=localStorage.getItem(Ot),p=xe?JSON.parse(xe):[],R=new Date().toISOString(),Ve=(ids||[]).map(pa=>({id:`yoga_asn_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(pa),flowId:Kt,flowName:String((Na==null?void 0:Na.name)||(Na==null?void 0:Na.title)||"Yoga Flow"),startDate:ra,durationDays:Ti,freqPerWeek:function(){try{if(Yt&&Yt.aiPerClient&&window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"){var qt=(Vt||[]).find(cs=>String(cs.id)===String(pa))||{},ka={freqPerWeek:Ee,intensityCap:ae},pi=window.__FOF.AI.suggestYogaAssignment(qt||{},Na||{},ka);return Number(pi.freqPerWeek||Ee)}}catch(qt){}return Ee}(),intensityCap:function(){try{if(Yt&&Yt.aiPerClient&&window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"){var qt=(Vt||[]).find(cs=>String(cs.id)===String(pa))||{},ka={freqPerWeek:Ee,intensityCap:ae},pi=window.__FOF.AI.suggestYogaAssignment(qt||{},Na||{},ka);return String(pi.intensityCap||ae).toUpperCase()}}catch(qt){}return String(ae).toUpperCase()}(),status:"ACTIVE",createdAt:R,source:"BULK"}));localStorage.setItem(Ot,JSON.stringify([...Ve||[],...p||[]].slice(0,5e3))),Xe("bulk_yoga_assigned",{count:ids.length,tagId:F,flowId:Kt}),ce({kind:b,ids,meta:{key:Ot,prevRaw:xe}}),St();try{window.dispatchEvent(new StorageEvent("storage",{key:Ot}))}catch(pa){}return za(`Yoga flow assigned to ${ids.length} client(s).`)}if(b==="ENROLL_CHALLENGE")return Xe("bulk_challenge_enrolled",{count:ids.length,tagId:F}),ce({kind:b,ids,meta:{}}),St(),za(`Enrolled ${ids.length} client(s) (Challenge stub).`);if(b==="EXPORT"){var Kt=(Vt||[]).filter(Ee=>ids.includes(String(Ee.id))),Na={exportedAt:new Date().toISOString(),tagId:F,count:Kt.length,clients:Kt},ra=new Blob([JSON.stringify(Na,null,2)],{type:"application/json"}),Ti=document.createElement("a");return Ti.href=URL.createObjectURL(ra),Ti.download=`fof_segment_${String(F)}_${Date.now()}.json`,document.body.appendChild(Ti),Ti.click(),Ti.remove(),Xe("bulk_export_segment",{count:ids.length,tagId:F}),ce({kind:b,ids,meta:{}}),St(),za(`Exported ${Kt.length} client(s).`)}}catch(Kt){console.warn("Bulk action failed",Kt),za("Bulk action failed.")}},as=()=>{var b,We;try{var da=Ut;if(!da)return za("Nothing to undo.");if(da.kind==="ASSIGN_PLAN"||da.kind==="ASSIGN_NUTRITION"||da.kind==="ASSIGN_YOGA"){var ii=(b=da==null?void 0:da.meta)==null?void 0:b.key;return ii&&typeof((We=da==null?void 0:da.meta)==null?void 0:We.prevRaw)!="undefined"&&localStorage.setItem(ii,da.meta.prevRaw),Xe("bulk_undo",{kind:da.kind,count:(da.ids||[]).length,tagId:F}),ce(null),za("Undone.")}za("Undo not available for this action.")}catch(da){za("Undo failed.")}},ro=({clients:b=[],getClientById:We,targetIds:da=[],nutTemplates:ii=[],yogaFlows:jt=[],onClose:Kt,toast:Na})=>{var[ra,Ti]=React.useState(""),[Ee,ae]=React.useState(""),[Ot,xe]=React.useState((()=>{try{return new Date().toISOString().slice(0,10)}catch(Gi){return""}})()),[p,R]=React.useState(28),[Ve,pa]=React.useState([]),qt=Gi=>{try{return We&&We(Gi)||(Array.isArray(b)?b.find(pe=>String(pe.id)===String(Gi)):null)||null}catch(pe){return null}},ka=()=>{try{var Gi=Array.from(new Set((da||[]).map(Ns=>String(Ns)).filter(Boolean)));if(!Gi.length){Na&&Na("No clients in target set.");return}var pe=(ii||[]).find(Ns=>String(Ns.id)===String(ra))||null,Sa=(jt||[]).find(Ns=>String(Ns.id)===String(Ee))||null,Ji=pe&&(pe.macroOverride||pe.macros)?pe.macroOverride||pe.macros:{calories:2e3,protein:140,carbs:200,fat:60},wo=Gi.map(Ns=>{var Us=qt(Ns)||{id:Ns},Uo=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"?window.__FOF.AI.suggestMacroOverride(Us,Ji):Ji,hr=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"?window.__FOF.AI.suggestYogaAssignment(Us,Sa||{},{freqPerWeek:3,intensityCap:"FLOW"}):{freqPerWeek:3,intensityCap:"FLOW"};return{id:String(Ns),name:Us.name||Us.fullName||Us.email||"Client "+String(Ns).slice(-4),macros:Uo,yoga:hr}});pa(wo),Na&&Na("AI Coach: recommendations generated.")}catch(Gi){console.warn("AI Coach gen failed",Gi),Na&&Na("AI Coach generation failed.")}},pi=()=>{try{if(!ra){Na&&Na("Pick a nutrition template first.");return}if(!Ve.length){Na&&Na("Generate recommendations first.");return}var Gi=(ii||[]).find(Ns=>String(Ns.id)===String(ra))||null,pe="fof.td.nutrition.assignments.v1",Sa=JSON.parse(localStorage.getItem(pe)||"[]")||[],Ji=new Date().toISOString(),wo=Ve.map(Ns=>({id:`nut_ai_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(Ns.id),templateId:String(ra),templateName:String((Gi==null?void 0:Gi.name)||(Gi==null?void 0:Gi.title)||"Nutrition Template"),startDate:String(Ot),durationDays:Math.max(1,Number(p||28)),macroOverride:Ns.macros,status:"ACTIVE",createdAt:Ji,source:"AI_COACH"}));localStorage.setItem(pe,JSON.stringify([...wo||[],...Sa||[]].slice(0,5e3)));try{window.dispatchEvent(new StorageEvent("storage",{key:pe}))}catch(Ns){}Na&&Na("AI Coach: nutrition assignments applied.")}catch(Gi){console.warn(Gi),Na&&Na("Apply nutrition failed.")}},cs=()=>{try{if(!Ee){Na&&Na("Pick a yoga flow first.");return}if(!Ve.length){Na&&Na("Generate recommendations first.");return}var Gi=(jt||[]).find(Ns=>String(Ns.id)===String(Ee))||null,pe="fof.td.yoga.assignments.v1",Sa=JSON.parse(localStorage.getItem(pe)||"[]")||[],Ji=new Date().toISOString(),wo=Ve.map(Ns=>{var Us,Uo;return{id:`yoga_ai_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(Ns.id),flowId:String(Ee),flowName:String((Gi==null?void 0:Gi.name)||(Gi==null?void 0:Gi.title)||"Yoga Flow"),startDate:String(Ot),durationDays:Math.max(1,Number(p||28)),freqPerWeek:Math.max(1,Math.min(14,Number(((Us=Ns.yoga)==null?void 0:Us.freqPerWeek)||3))),intensityCap:String(((Uo=Ns.yoga)==null?void 0:Uo.intensityCap)||"FLOW"),status:"ACTIVE",createdAt:Ji,source:"AI_COACH"}});localStorage.setItem(pe,JSON.stringify([...wo||[],...Sa||[]].slice(0,5e3)));try{window.dispatchEvent(new StorageEvent("storage",{key:pe}))}catch(Ns){}Na&&Na("AI Coach: yoga assignments applied.")}catch(Gi){console.warn(Gi),Na&&Na("Apply yoga failed.")}};return React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-sm text-white/80"},"AI Coach Panel"),React.createElement("div",{className:"text-xs text-white/60"},"Generate personalized recommendations for the target set and apply as trainer-side assignments.")),React.createElement("button",{type:"button",onClick:Kt,className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 text-xs hover:bg-white/10"},"Close")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Nutrition template"),React.createElement("select",{value:ra,onChange:Gi=>Ti(Gi.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"},React.createElement("option",{value:""},"Select template\u2026"),(ii||[]).slice(0,500).map(Gi=>React.createElement("option",{key:Gi.id,value:Gi.id},Gi.name||Gi.title||"Template "+Gi.id)))),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Yoga flow"),React.createElement("select",{value:Ee,onChange:Gi=>ae(Gi.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"},React.createElement("option",{value:""},"Select flow\u2026"),(jt||[]).slice(0,500).map(Gi=>React.createElement("option",{key:Gi.id,value:Gi.id},Gi.name||Gi.title||"Flow "+Gi.id)))),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Start date"),React.createElement("input",{type:"date",value:Ot,onChange:Gi=>xe(Gi.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(p||28),onChange:Gi=>R(Number(Gi.target.value||28)),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"}))),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:ka,className:"px-4 py-2 rounded-2xl bg-fuchsia-500/20 border border-fuchsia-400/30 text-fuchsia-100"},"Generate recommendations"),React.createElement("button",{type:"button",onClick:pi,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100"},"Apply Nutrition"),React.createElement("button",{type:"button",onClick:cs,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100"},"Apply Yoga")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60 mb-2"},"Preview (first 12)"),!Ve||Ve.length===0?React.createElement("div",{className:"text-xs text-white/55"},"Generate recommendations to preview personalized macros + yoga schedule."):React.createElement("div",{className:"space-y-2"},Ve.slice(0,12).map(Gi=>{var pe,Sa,Ji,wo,Ns,Us;return React.createElement("div",{key:Gi.id,className:"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white font-semibold truncate"},Gi.name),React.createElement("div",{className:"text-[11px] text-white/60"},"Macros: ",Math.round(((pe=Gi.macros)==null?void 0:pe.calories)||0)," kcal \u2022 P ",Math.round(((Sa=Gi.macros)==null?void 0:Sa.protein)||0)," \u2022 C ",Math.round(((Ji=Gi.macros)==null?void 0:Ji.carbs)||0)," \u2022 F ",Math.round(((wo=Gi.macros)==null?void 0:wo.fat)||0))),React.createElement("div",{className:"text-[11px] text-white/70 whitespace-nowrap"},"Yoga: ",((Ns=Gi.yoga)==null?void 0:Ns.freqPerWeek)||3,"x/wk \u2022 cap ",String(((Us=Gi.yoga)==null?void 0:Us.intensityCap)||"FLOW")))}),Ve.length>12?React.createElement("div",{className:"text-[11px] text-white/45"},"\u2026and ",Ve.length-12," more"):null)))},n=React.useMemo(()=>{try{if(F==="ALL")return E;var b=f.assignments||{};return(E||[]).filter(We=>(b[String(We.id)]||[]).includes(String(F)))}catch(b){return E}},[E,F,JSON.stringify(f.assignments||{})]),y=React.useMemo(()=>{var b=Array.isArray(n)?n:[],We=Date.now(),da=Kt=>{try{var Na=new Date(Kt).getTime();return!Na||isNaN(Na)?9999:Math.floor((We-Na)/864e5)}catch(Na){return 9999}},ii=Kt=>{var Na=da((Kt==null?void 0:Kt.lastCheckInAt)||(Kt==null?void 0:Kt.lastActiveAt)||(Kt==null?void 0:Kt.updatedAt)),ra=Number((Kt==null?void 0:Kt.adherence7d)||0);return Na<=7&&ra>=.65?"ON_TRACK":Na<=14&&ra>=.45?"NEEDS_NUDGE":Na<=21?"AT_RISK":"DORMANT"},jt={ON_TRACK:0,NEEDS_NUDGE:0,AT_RISK:0,DORMANT:0,total:b.length};return b.forEach(Kt=>{jt[ii(Kt)]=(jt[ii(Kt)]||0)+1}),jt},[n]),be=b=>b==="emerald"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-100":b==="amber"?"border-amber-400/30 bg-amber-500/10 text-amber-100":b==="rose"?"border-rose-400/30 bg-rose-500/10 text-rose-100":"border-white/10 bg-white/5 text-white/80",ie="fof_td_planassign_v1",Dt=React.useMemo(()=>{try{var b=localStorage.getItem(ie),We=b?JSON.parse(b):[];return Array.isArray(We)?We.slice().reverse().slice(0,8):[]}catch(b){return[]}},[]);return React.createElement("div",{className:"h-full flex flex-col"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-5"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-bold text-white font-mono uppercase"},"Client Management"),React.createElement("div",{className:"text-xs text-zinc-500 mt-1"},"Applications are now inside ",React.createElement("span",{className:"text-zinc-300"},"New Leads"),".")),React.createElement("div",{className:"flex items-center gap-2"},m("CLIENTS"),m("GROUPS"),React.createElement("button",{type:"button",onClick:()=>{try{u("ADD_CLIENT")}catch(b){}},className:"ml-2 px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] font-extrabold text-emerald-100"},"+ Add client"),React.createElement("div",{className:"ml-2 flex items-center gap-2"},React.createElement("select",{value:F,onChange:b=>{try{D(b.target.value),Ro("trainer.tags.filter_changed",{tagId:b.target.value})}catch(We){}},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"},React.createElement("option",{value:"ALL"},"All tags"),(f.tags||[]).map(b=>React.createElement("option",{key:b.id,value:b.id},b.name))),React.createElement("button",{type:"button",onClick:()=>{try{u("CLIENT_TAGS")}catch(b){}},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Manage Tags"),React.createElement("button",{type:"button",onClick:()=>{try{if(I){te(!1);try{Se&&Se()}catch(b){}try{qe({open:!1,kind:null})}catch(b){}}else{te(!0);try{C(!1)}catch(b){}}try{Ro("trainer.client_mgmt.bulk_mode.toggled",{on:!I})}catch(b){}}catch(b){}},className:I?"px-3 py-2 rounded-xl bg-red-500/10 border border-red-400/20 hover:bg-red-500/20 text-red-100 text-[11px] font-mono uppercase tracking-widest":"px-3 py-2 rounded-xl bg-fuchsia-500/10 border border-fuchsia-400/20 hover:bg-fuchsia-500/20 text-fuchsia-100 text-[11px] font-mono uppercase tracking-widest"},I?"Exit Bulk":"Bulk Mode"),React.createElement("button",{type:"button",onClick:()=>{try{te(!I),I||le([])}catch(b){console.warn("bulk mode toggle failed",b)}},className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(I?"bg-fuchsia-500/15 border-fuchsia-400/25 text-fuchsia-100 hover:bg-fuchsia-500/25":"bg-white/5 border-white/10 text-white/80 hover:bg-white/10"),title:"Enable bulk actions for nutrition, yoga, and AI Coach"},I?"Bulk Mode: ON":"Bulk Mode"),React.createElement("button",{type:"button",onClick:()=>{try{var b=(n||[]).slice(),We={createdAt:Date.now(),tagFilter:F||"ALL",clientCount:b.length,clientIds:b.map(da=>da.id),clientsSnapshot:b.map(da=>({id:da.id,name:da.name||da.fullName||"Client",email:da.email||"",status:da.status||""}))};window.__FOF_BULK_CTX=We;try{u("BULK_ACTIONS")}catch(da){}try{C(!1),te(!1)}catch(da){}}catch(b){}},className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 text-sky-100 text-[11px] font-mono uppercase tracking-wider hover:bg-sky-500/20 "+((n||[]).length===0?"opacity-50 cursor-not-allowed":""),title:F==="ALL"?"Bulk actions for the current filter (All tags)":"Bulk actions for this tag segment"},"Bulk Actions")),Ce?React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-4 w-full rounded-3xl border border-white/10 bg-white/5 p-4 max-h-[70vh] overflow-auto"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{C(!1),te(!1),le([]),qe({open:!1,kind:null}),Za("")}catch(b){}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 text-sm"},"\u2190 Back"),React.createElement("div",{className:"flex flex-col"},React.createElement("div",{className:"text-lg font-semibold text-white"},"Bulk Actions"),React.createElement("div",{className:"text-xs text-white/60"},"Target: ",(()=>{try{var b=Array.isArray(ye)?ye.slice():[],We=(Array.isArray(Vt)?Vt:[]).map(ii=>Fe(ii)).filter(Boolean),da=b.length?b:We;return Array.from(new Set(da.map(ii=>String(ii)))).length}catch(b){return 0}})()," client(s)",F&&F!=="ALL"?` \u2022 Segment: ${__tagFilterLabel||F}`:"")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Te()}catch(b){}},className:"px-3 py-2 rounded-2xl bg-sky-500/10 border border-sky-400/20 text-sky-100 text-sm"},"Select All"),React.createElement("button",{type:"button",onClick:()=>{try{Se()}catch(b){}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 text-sm"},"Clear"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 max-h-[56vh] overflow-auto"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60 mb-2"},"Actions"),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"MESSAGE"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Send Message"),React.createElement("div",{className:"text-xs text-white/60"},"Compose once, send to target segment.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"ASSIGN_PROGRAM"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Assign Program"),React.createElement("div",{className:"text-xs text-white/60"},"Apply a program assignment record.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"ASSIGN_NUTRITION"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Assign Nutrition Plan"),React.createElement("div",{className:"text-xs text-white/60"},"Pick a template, set dates, optional macro overrides.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"ASSIGN_YOGA"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Assign Yoga Flow"),React.createElement("div",{className:"text-xs text-white/60"},"Pick a flow, set frequency and intensity cap.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"AI_COACH"}),className:"px-3 py-2 rounded-xl border border-fuchsia-400/20 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"AI Coach Panel"),React.createElement("div",{className:"text-xs text-white/60"},"Personalize nutrition + yoga for each client and draft nudges.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"AI_COACH"}),className:"px-3 py-2 rounded-xl border border-fuchsia-400/20 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"AI Coach Panel"),React.createElement("div",{className:"text-xs text-white/60"},"Generate personalized nutrition + yoga recommendations for the target set.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"AI_COACH"}),className:"px-3 py-2 rounded-xl border border-fuchsia-400/20 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"AI Coach Panel"),React.createElement("div",{className:"text-xs text-white/60"},"Personalize nutrition + yoga assignments and draft nudges.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"ENROLL_CHALLENGE"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Enroll Challenge"),React.createElement("div",{className:"text-xs text-white/60"},"Wire enrollment (stub action).")),React.createElement("button",{type:"button",onClick:()=>qe({open:!1,kind:"EXPORT"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Export Segment"),React.createElement("div",{className:"text-xs text-white/60"},"Download JSON for selected clients.")))),React.createElement("div",{className:"lg:col-span-2 rounded-2xl border border-white/10 bg-black/20 p-3 max-h-[56vh] overflow-auto"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60 mb-2"},"Action"),(O==null?void 0:O.kind)==="MESSAGE"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Message"),React.createElement("textarea",{value:Pt,onChange:b=>Za(b.target.value),placeholder:"Write your message\u2026",className:"w-full min-h-[120px] rounded-2xl bg-black/40 border border-white/10 p-3 text-white placeholder:text-white/40"}),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs text-white/60"},"Will send to the current target set."),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"MESSAGE"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm & Send"))):(O==null?void 0:O.kind)==="ASSIGN_PROGRAM"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Assign Program"),React.createElement("div",{className:"text-xs text-white/60"},"Prototype-safe assignment record will be written to localStorage."),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"ASSIGN_PROGRAM"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm Assign")):(O==null?void 0:O.kind)==="ASSIGN_NUTRITION"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Assign Nutrition Plan"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Template"),React.createElement("select",{value:Ma.templateId,onChange:b=>$a(We=>({...We||{},templateId:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"},React.createElement("option",{value:""},"Select template\u2026"),(yi||[]).slice(0,500).map(b=>React.createElement("option",{key:b.id,value:b.id},b.name||b.title||"Template "+b.id)))),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Start date"),React.createElement("input",{type:"date",value:Ma.startDate||dt(),onChange:b=>$a(We=>({...We||{},startDate:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(Ma.durationDays||28),onChange:b=>$a(We=>({...We||{},durationDays:Number(b.target.value||28)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Macro overrides (optional)"),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Ma==null?void 0:Ma.templateId)||""),We=(yi||[]).find(Na=>String(Na.id)===b)||null,da=We&&(We.macroOverride||We.macros)?We.macroOverride||We.macros:{},ii=Array.isArray(ye)&&ye.length?String(ye[0]):Array.isArray(Vt)&&Vt[0]?String(Fe(Vt[0])):"",jt=(Vt||[]).find(Na=>String(Fe(Na))===String(ii))||null,Kt=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"?window.__FOF.AI.suggestMacroOverride(jt||{},da||{}):da||{};$a(Na=>({...Na||{},calories:Kt.calories,protein:Kt.protein,carbs:Kt.carbs,fat:Kt.fat})),za("AI: macro overrides suggested.")}catch(b){console.warn(b),za("AI failed.")}},className:"mt-2 px-3 py-2 rounded-2xl bg-fuchsia-500/15 border border-fuchsia-400/25 text-fuchsia-100 text-[10px] font-mono uppercase tracking-widest hover:bg-fuchsia-500/25"},"AI Suggest Macros"),React.createElement("div",{className:"mt-1 grid grid-cols-4 gap-2"},React.createElement("input",{placeholder:"Cal",value:Ma.calories,onChange:b=>$a(We=>({...We||{},calories:b.target.value})),className:"px-2 py-2 rounded-xl bg-black/40 border border-white/10 text-white text-xs"}),React.createElement("input",{placeholder:"P",value:Ma.protein,onChange:b=>$a(We=>({...We||{},protein:b.target.value})),className:"px-2 py-2 rounded-xl bg-black/40 border border-white/10 text-white text-xs"}),React.createElement("input",{placeholder:"C",value:Ma.carbs,onChange:b=>$a(We=>({...We||{},carbs:b.target.value})),className:"px-2 py-2 rounded-xl bg-black/40 border border-white/10 text-white text-xs"}),React.createElement("input",{placeholder:"F",value:Ma.fat,onChange:b=>$a(We=>({...We||{},fat:b.target.value})),className:"px-2 py-2 rounded-xl bg-black/40 border border-white/10 text-white text-xs"})))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"flex items-center gap-2 text-[11px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Ma.aiPerClient,onChange:b=>$a(We=>({...We||{},aiPerClient:!!b.target.checked}))}),"AI personalize per client"),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Ma==null?void 0:Ma.templateId)||""),We=(yi||[]).find(jt=>String(jt.id)===b)||null,da=We&&(We.macroOverride||We.macros)?We.macroOverride||We.macros:{calories:2e3,protein:140,carbs:200,fat:60},ii=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"?window.__FOF.AI.suggestMacroOverride({goal:"mixed",tags:["segment"]},da):da;$a(jt=>({...jt||{},calories:ii.calories,protein:ii.protein,carbs:ii.carbs,fat:ii.fat})),za&&za("AI: Prefilled macro overrides (avg).")}catch(b){console.warn(b),za&&za("AI failed.")}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"AI Prefill")),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs text-white/60"},"Writes per-client assignments (trainer-side only)."),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"ASSIGN_NUTRITION"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm Assign"))):(O==null?void 0:O.kind)==="ASSIGN_YOGA"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Assign Yoga Flow"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Flow"),React.createElement("select",{value:Yt.flowId,onChange:b=>it(We=>({...We||{},flowId:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"},React.createElement("option",{value:""},"Select flow\u2026"),(zi||[]).slice(0,500).map(b=>React.createElement("option",{key:b.id,value:b.id},b.name||b.title||"Flow "+b.id)))),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Start date"),React.createElement("input",{type:"date",value:Yt.startDate||dt(),onChange:b=>it(We=>({...We||{},startDate:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(Yt.durationDays||28),onChange:b=>it(We=>({...We||{},durationDays:Number(b.target.value||28)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Frequency / week"),React.createElement("input",{type:"number",min:"1",max:"14",value:String(Yt.freqPerWeek||3),onChange:b=>it(We=>({...We||{},freqPerWeek:Number(b.target.value||3)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-white/60"},"Intensity cap"),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Yt==null?void 0:Yt.flowId)||""),We=(zi||[]).find(Na=>String(Na.id)===b)||null,da=Array.isArray(ye)&&ye.length?String(ye[0]):Array.isArray(Vt)&&Vt[0]?String(Fe(Vt[0])):"",ii=(Vt||[]).find(Na=>String(Fe(Na))===String(da))||null,jt={freqPerWeek:(Yt==null?void 0:Yt.freqPerWeek)||3,intensityCap:(Yt==null?void 0:Yt.intensityCap)||"FLOW"},Kt=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"?window.__FOF.AI.suggestYogaAssignment(ii||{},We||{},jt):jt;it(Na=>({...Na||{},freqPerWeek:Kt.freqPerWeek,intensityCap:String(Kt.intensityCap||"FLOW").toUpperCase()})),za("AI: yoga parameters suggested.")}catch(b){console.warn(b),za("AI failed.")}},className:"mt-2 px-3 py-2 rounded-2xl bg-fuchsia-500/15 border border-fuchsia-400/25 text-fuchsia-100 text-[10px] font-mono uppercase tracking-widest hover:bg-fuchsia-500/25"},"AI Suggest Yoga"),React.createElement("select",{value:Yt.intensityCap||"FLOW",onChange:b=>it(We=>({...We||{},intensityCap:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-black/40 border border-white/10 text-white"},["GENTLE","FLOW","POWER"].map(b=>React.createElement("option",{key:b,value:b},b))))),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs text-white/60"},"Writes per-client assignments (trainer-side only)."),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"flex items-center gap-2 text-[11px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Yt.aiPerClient,onChange:b=>it(We=>({...We||{},aiPerClient:!!b.target.checked}))}),"AI personalize per client"),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Yt==null?void 0:Yt.flowId)||""),We=(zi||[]).find(jt=>String(jt.id)===b)||null,da={freqPerWeek:Number(Yt.freqPerWeek||3),intensityCap:String(Yt.intensityCap||"FLOW")},ii=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"?window.__FOF.AI.suggestYogaAssignment({goal:"mixed",tags:["segment"]},We||{},da):da;it(jt=>({...jt||{},freqPerWeek:Number(ii.freqPerWeek||3),intensityCap:String(ii.intensityCap||"FLOW").toUpperCase()})),za&&za("AI: Prefilled yoga settings (avg).")}catch(b){console.warn(b),za&&za("AI failed.")}},className:"px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"AI Prefill")),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"ASSIGN_YOGA"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm Assign"))):(O==null?void 0:O.kind)==="AI_COACH"?React.createElement(ro,{clients:Vt||[],getClientById:b=>{try{return(clients||[]).find(We=>String(We.id)===String(b))||null}catch(We){return null}},targetIds:Array.isArray(ye)&&ye.length?ye:Array.isArray(Vt)?(Vt||[]).map(b=>Fe(b)).filter(Boolean):[],nutTemplates:yi||[],yogaFlows:zi||[],onClose:()=>{try{qe({open:!1,kind:"AI_COACH"})}catch(b){}},toast:za}):(O==null?void 0:O.kind)==="ENROLL_CHALLENGE"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Enroll Challenge"),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"ENROLL_CHALLENGE"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm Enroll")):(O==null?void 0:O.kind)==="EXPORT"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-sm text-white/80"},"Export Segment"),React.createElement("button",{type:"button",onClick:()=>{try{qe({open:!0,kind:"EXPORT"}),os()}catch(b){}},className:"px-4 py-2 rounded-2xl bg-sky-500/20 border border-sky-400/30 text-sky-100"},"Confirm Export")):React.createElement("div",{className:"text-sm text-white/60"},"Pick an action on the left."),React.createElement("div",{className:"mt-4 border-t border-white/10 pt-3"},React.createElement("div",{className:"text-xs font-mono uppercase tracking-widest text-white/60 mb-2"},"Preview"),React.createElement("div",{className:"max-h-[240px] overflow-auto space-y-2 pr-1"},(()=>{try{var b=Array.isArray(ye)?ye.slice():[],We=Array.isArray(Vt)?Vt:[],da=b.length?b:We.map(Kt=>Fe(Kt)).filter(Boolean),ii=Array.from(new Set(da.map(Kt=>String(Kt)))).slice(0,50),jt=new Map((We||[]).map(Kt=>[Fe(Kt),Kt]));return ii.map(Kt=>{var Na=jt.get(Kt)||{name:Kt,id:Kt};return React.createElement("div",{key:Kt,className:"flex items-center justify-between rounded-xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"text-sm text-white"},Na.name||Na.fullName||Kt),React.createElement("div",{className:"text-xs text-white/50"},Na.email||Na.phone||`ID: ${Kt}`))})}catch(b){return null}})())))))):null,I&&!Ce?React.createElement("div",{className:"mt-3 w-full flex flex-wrap items-center justify-between gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-[11px] text-zinc-300 font-mono uppercase tracking-wider"},"Bulk mode \u2022 ",(ye||[]).length?(ye||[]).length:(Vt||[]).length,"/",(Vt||[]).length," selected"),React.createElement("button",{type:"button",onClick:Te,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[11px] text-white hover:bg-white/10"},"Select all"),React.createElement("button",{type:"button",onClick:Se,className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-[11px] text-white hover:bg-white/10"},"Clear"),Ut?React.createElement("button",{type:"button",onClick:as,className:"px-2 py-1 rounded-lg bg-amber-500/10 border border-amber-400/20 text-[11px] text-amber-100 hover:bg-amber-500/20"},"Undo"):null),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>yt("MESSAGE"),className:"px-3 py-1.5 rounded-xl bg-indigo-500/10 border border-indigo-400/20 text-indigo-100 text-[11px] font-mono uppercase tracking-wider hover:bg-indigo-500/20"},"Message"),React.createElement("button",{type:"button",onClick:()=>yt("ASSIGN_PLAN"),className:"px-3 py-1.5 rounded-xl bg-emerald-500/10 border border-emerald-400/20 text-emerald-100 text-[11px] font-mono uppercase tracking-wider hover:bg-emerald-500/20"},"Assign Program"),React.createElement("button",{type:"button",onClick:()=>yt("ASSIGN_NUTRITION"),className:"px-3 py-1.5 rounded-xl bg-fuchsia-500/10 border border-fuchsia-400/20 text-fuchsia-100 text-[11px] font-mono uppercase tracking-wider hover:bg-fuchsia-500/20"},"Assign Nutrition"),React.createElement("button",{type:"button",onClick:()=>yt("ASSIGN_YOGA"),className:"px-3 py-1.5 rounded-xl bg-violet-500/10 border border-violet-400/20 text-violet-100 text-[11px] font-mono uppercase tracking-wider hover:bg-violet-500/20"},"Assign Yoga"),React.createElement("button",{type:"button",onClick:()=>yt("AI_COACH"),className:"px-3 py-1.5 rounded-xl bg-fuchsia-500/15 border border-fuchsia-400/25 text-fuchsia-100 text-[11px] font-mono uppercase tracking-wider hover:bg-fuchsia-500/25"},"AI Coach"),React.createElement("button",{type:"button",onClick:()=>yt("ENROLL_CHALLENGE"),className:"px-3 py-1.5 rounded-xl bg-cyan-500/10 border border-cyan-400/20 text-cyan-100 text-[11px] font-mono uppercase tracking-wider hover:bg-cyan-500/20"},"Enroll Challenge"),React.createElement("button",{type:"button",onClick:()=>yt("EXPORT"),className:"px-3 py-1.5 rounded-xl bg-white/5 border border-white/10 text-white text-[11px] font-mono uppercase tracking-wider hover:bg-white/10"},"Export"),React.createElement("button",{type:"button",onClick:()=>{te(!1),Se()},className:"px-3 py-1.5 rounded-xl bg-red-500/10 border border-red-400/20 text-red-100 text-[11px] font-mono uppercase tracking-wider hover:bg-red-500/20"},"Exit"))):null,Dt&&Dt.length>0&&React.createElement("button",{type:"button",onClick:()=>{try{Bt("trainer.client_mgmt.assigned_plans.opened",{count:Dt.length})}catch(We){}var b=(Dt||[]).map((We,da)=>{var ii=String(We.createdAt||"").slice(0,10)||"\u2014",jt=We.schedule&&We.schedule.defaultTime?We.schedule.defaultTime:"\u2014";return`${da+1}. ${We.planName||"Plan"}  \u2022  ${ii}  \u2022  ${jt}`}).join(`
`);ta("Assigned plans (demo)",b||"No assigned plans yet.")},className:"px-3 py-2 rounded-full border border-white/15 bg-white/5 hover:bg-white/10 text-[11px] font-extrabold uppercase tracking-wider text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"ClipboardList",size:14}),"Assigned (",Dt.length,")"),React.createElement("div",{className:"w-px h-6 bg-white/10 mx-1"}),React.createElement("div",{className:"flex rounded-full border border-white/15 overflow-hidden"},React.createElement("button",{type:"button",onClick:()=>ca("GRID"),className:"px-3 py-2 text-[11px] font-extrabold uppercase tracking-wider "+(Ga==="GRID"?"bg-white/12 text-white":"bg-transparent text-white/60 hover:text-white")},"Grid"),React.createElement("button",{type:"button",onClick:()=>ca("LIST"),className:"px-3 py-2 text-[11px] font-extrabold uppercase tracking-wider "+(Ga==="LIST"?"bg-white/12 text-white":"bg-transparent text-white/60 hover:text-white")},"List")))),Bi==="CLIENTS"&&React.createElement("div",{className:"mb-4 rounded-3xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border p-3 "+be("emerald"),title:"Clients with recent check-ins and good adherence (7d)"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"On track"),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold"},y.ON_TRACK," ",React.createElement("span",{className:"text-[11px] font-mono opacity-70"},"/ ",y.total))),React.createElement("div",{className:"rounded-2xl border p-3 "+be("amber"),title:"Slightly dropping engagement \u2014 likely needs a nudge"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Needs nudge"),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold"},y.NEEDS_NUDGE)),React.createElement("div",{className:"rounded-2xl border p-3 "+be("rose"),title:"At-risk \u2014 low adherence or no recent check-in"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"At-risk"),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold"},y.AT_RISK)),React.createElement("div",{className:"rounded-2xl border p-3 "+be("zinc"),title:"Dormant \u2014 no check-in for 21+ days"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Dormant"),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold"},y.DORMANT)))),Bi==="CLIENTS"&&React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>T(b=>!b),className:"px-3 py-2 rounded-full border text-[11px] font-extrabold uppercase tracking-wider "+(k?"bg-white/10 border-white/20 text-white":"bg-white/5 border-white/15 text-white/80 hover:bg-white/10"),title:"Smart filters"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"Sliders",size:14}),"Filters",React.createElement("span",{className:"text-white/40"},"\u2022"),React.createElement("span",{className:"text-white/70"},(P||[]).length," / ",(E||[]).length))),he!=="ALL"||ke!=="ALL"||Me!=="ALL"?React.createElement("button",{type:"button",onClick:()=>{oe("ALL"),Re("ALL"),Et("ALL"),Ct(!1)},className:"px-3 py-2 rounded-full bg-rose-500/10 border border-rose-400/20 text-rose-100 text-[11px] font-extrabold uppercase tracking-wider hover:bg-rose-500/15"},"Clear"):null,React.createElement("div",{className:"flex-1"}),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{oe("NEEDS_NUDGE"),T(!0),Ct(!0)},className:"px-3 py-2 rounded-full bg-amber-500/10 border border-amber-400/20 text-amber-100 text-[11px] font-extrabold uppercase tracking-wider hover:bg-amber-500/15"},"Needs nudge"),React.createElement("button",{type:"button",onClick:()=>{oe("AT_RISK"),T(!0),Ct(!0)},className:"px-3 py-2 rounded-full bg-rose-500/10 border border-rose-400/20 text-rose-100 text-[11px] font-extrabold uppercase tracking-wider hover:bg-rose-500/15"},"At\u2011risk"),React.createElement("button",{type:"button",onClick:()=>{Et("ACTIVE"),T(!0),Ct(!0)},className:"px-3 py-2 rounded-full bg-cyan-500/10 border border-cyan-400/20 text-cyan-100 text-[11px] font-extrabold uppercase tracking-wider hover:bg-cyan-500/15"},"Magic link active"))),k?React.createElement("div",{className:"mt-3 rounded-3xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60 mb-1"},"Engagement"),React.createElement("select",{value:he,onChange:b=>{oe(b.target.value),Ct(!0)},className:"w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[12px]"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"ON_TRACK"},"On track"),React.createElement("option",{value:"NEEDS_NUDGE"},"Needs nudge"),React.createElement("option",{value:"AT_RISK"},"At\u2011risk"),React.createElement("option",{value:"DORMANT"},"Dormant")),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Derived from lastCheckInAt + 7\u2011day adherence (demo thresholds).")),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60 mb-1"},"Capacity"),React.createElement("select",{value:ke,onChange:b=>{Re(b.target.value),Ct(!0)},className:"w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[12px]"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"HIGH"},"High (\u226570)"),React.createElement("option",{value:"MID"},"Mid (45\u201369)"),React.createElement("option",{value:"LOW"},"Low (<45)")),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Uses Capacity/Readiness value shown on the client card.")),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60 mb-1"},"Magic Link"),React.createElement("select",{value:Me,onChange:b=>{Et(b.target.value),Ct(!0)},className:"w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[12px]"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"ACTIVE"},"Active (sent/opened/activated)"),React.createElement("option",{value:"EXPIRED"},"Expired / revoked"),React.createElement("option",{value:"NEVER"},"Never issued")),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Based on the latest magic link per client.")))):null),React.createElement("div",{className:"flex items-center gap-2 mb-4"},d("ACTIVE"),d("ATTENTION"),d("NEW_LEADS"),React.createElement("div",{className:"flex-1"}),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("select",{value:Mo||"",onChange:b=>Di(b.target.value||null),className:"bg-titanium-900 border border-titanium-700 text-[11px] text-zinc-300 px-3 py-2 rounded-sm"},React.createElement("option",{value:""},"Bulk Actions"),React.createElement("option",{value:"IMPORT"},"Import"),React.createElement("option",{value:"EXPORT"},"Export")),React.createElement("button",{onClick:()=>{Mo==="IMPORT"&&alert("Bulk Import Wizard (stub)."),Mo==="EXPORT"&&alert("Export CSV (stub).")},className:"px-4 py-2 bg-titanium-800 border border-titanium-700 text-[11px] font-bold text-zinc-300 uppercase rounded-sm"},"Apply"))),La==="NEW_LEADS"&&Bi==="CLIENTS"&&React.createElement("div",{className:"flex items-center gap-2 mb-4"},React.createElement("div",{className:"text-[11px] text-zinc-400"},"Client Management \u2192 Leads is a shortcut (single CRM owner: Business Hub)."),React.createElement("div",{className:"flex-1"}),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_HUB",route:{bhPage:"CRM_PIPELINE",filter:"LEADS",from:"CLIENT_LEADS"}}}))}catch(b){}},className:"px-3 py-2 text-[11px] font-bold uppercase rounded-sm border border-white/20 bg-white/10 text-white hover:bg-white/15"},"Open CRM Pipeline"),React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("fof:navigate",{detail:{view:"BUSINESS_HUB",route:{bhPage:"CRM_APPLICATIONS",filter:"APPLICATIONS",from:"CLIENT_LEADS"}}}))}catch(b){}},className:"px-3 py-2 text-[11px] font-bold uppercase rounded-sm border border-titanium-700 bg-titanium-900 text-zinc-300 hover:text-white"},"Open CRM Applications")),React.createElement("div",{className:"flex-1 bg-titanium-900 border border-titanium-800 rounded-sm p-4 overflow-auto"},Bi==="GROUPS"?React.createElement("div",{className:Ga==="GRID"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-3":"space-y-2"},to.map(b=>React.createElement("div",{role:"button",tabIndex:0,key:b.id,onClick:()=>Xs(b),className:"card glass p-5 text-left rounded-3xl border border-white/12 bg-white/5 hover:bg-white/8 hover:border-white/20 transition-all duration-200 shadow-[0_12px_32px_rgba(0,0,0,0.35)]"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},b.name),React.createElement("div",{className:"text-xs text-zinc-500 mt-1"},b.type," \u2022 ",b.members.length," members")),React.createElement("span",{className:"text-[9px] px-2 py-1 rounded-sm bg-white/10 text-zinc-300 uppercase"},"Group")),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement("button",{onClick:We=>{We.stopPropagation(),alert("Assign plan to group (stub).")},className:"px-3 py-2 bg-titanium-800 border border-titanium-700 text-[11px] font-bold text-zinc-300 uppercase rounded-sm"},"Assign plan"),React.createElement("button",{onClick:We=>{We.stopPropagation(),alert("Message group (stub).")},className:"px-3 py-2 bg-titanium-800 border border-titanium-700 text-[11px] font-bold text-zinc-300 uppercase rounded-sm"},"Message"),React.createElement("button",{onClick:We=>{We.stopPropagation(),u("CALENDAR")},className:"px-3 py-2 bg-titanium-800 border border-titanium-700 text-[11px] font-bold text-zinc-300 uppercase rounded-sm"},"Book"))))):React.createElement(React.Fragment,null,La==="NEW_LEADS"?React.createElement("div",{className:"p-4 rounded-3xl border border-white/10 bg-white/3"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold uppercase tracking-[0.22em] text-white/80"},"Leads & Applications"),React.createElement("div",{className:"text-sm text-zinc-400 mt-1"},"Phase 0 routing: Client Management is a ",React.createElement("span",{className:"text-white/70 font-semibold"},"summary + deep-link"),". CRM ownership lives in ",React.createElement("span",{className:"text-white/70 font-semibold"},"Business Growth Hub \u2192 CRM Pipeline"),"."),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-500"},"LOCK R-2: no duplicate CRM. Use the buttons below to open the authoritative CRM views.")),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[11px] text-zinc-500"},"Applications"),React.createElement("div",{className:"text-2xl font-extrabold text-white"},g.length),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Leads"),React.createElement("div",{className:"text-2xl font-extrabold text-white"},E.length))),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>{la({section:"CRM-PIPELINE",filter:"ALL"})},className:"px-4 py-2 rounded-sm bg-titanium-800 border border-titanium-700 text-[11px] font-extrabold uppercase tracking-wider text-white hover:border-emerald-400/60"},"Open CRM Pipeline"),React.createElement("button",{type:"button",onClick:()=>{la({section:"CRM-APPLICATIONS",filter:"APPLICATIONS"})},className:"px-4 py-2 rounded-sm bg-titanium-800 border border-titanium-700 text-[11px] font-extrabold uppercase tracking-wider text-white hover:border-sky-400/60"},"View Applications (CRM)"),React.createElement("button",{type:"button",onClick:()=>{la({section:"CRM-CONVERT",filter:"CONVERT"})},className:"px-4 py-2 rounded-sm bg-emerald-600/20 border border-emerald-600/40 text-[11px] font-extrabold uppercase tracking-wider text-emerald-200 hover:border-emerald-300"},"Convert Lead \u2192 Client"))):React.createElement("div",null,Ga==="LIST"&&React.createElement("div",{className:"hidden md:grid grid-cols-[minmax(240px,1.2fr)_minmax(260px,1.6fr)_minmax(240px,1fr)] gap-3 px-3 py-2 mb-2 rounded-2xl border border-white/10 bg-white/4 text-[9px] uppercase tracking-[0.22em] text-white/55 font-extrabold"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",null,"Client"),React.createElement("span",{className:"opacity-40"},"\u2022"),React.createElement("span",null,"Status")),React.createElement("div",{className:"text-center"},"Signals"),React.createElement("div",{className:"text-right pr-1"},"Actions")),React.createElement("div",{className:Ga==="GRID"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3":"divide-y divide-white/10 rounded-3xl border border-white/10 bg-white/3 overflow-hidden"},(P||[]).map(b=>{var We=b.readiness>=70?"good":b.readiness>=45?"warn":"bad";return Ga==="LIST"?React.createElement(()=>React.createElement("div",{role:"button",tabIndex:0,key:b.id,onClick:jt=>{if(I){try{jt.preventDefault(),jt.stopPropagation()}catch(Kt){}v(b.id);return}jt&&jt.target&&jt.target.closest&&jt.target.closest("[data-no-nav]")||(zt(b),uo(!1),u("CLIENT_ACTION_MODE"))},className:"px-3 py-3 hover:bg-white/6 transition-colors"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(240px,1.2fr)_minmax(260px,1.6fr)_minmax(240px,1fr)] gap-3 items-center"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},I?React.createElement("input",{type:"checkbox",checked:(ye||[]).includes(String(b.id)),onChange:jt=>{try{jt.stopPropagation()}catch(Kt){}v(b.id)},onClick:jt=>{try{jt.stopPropagation()}catch(Kt){}},className:"w-4 h-4 rounded border-white/20 bg-white/5 accent-white",title:"Select client"}):null,React.createElement("div",{className:"w-9 h-9 rounded-2xl bg-white/6 border border-white/10 flex items-center justify-center shrink-0"},React.createElement("span",{className:"text-[12px] font-extrabold text-white"},(b.name||"C").trim().slice(0,1))),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"font-bold text-white truncate"},b.name)),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-0.5 truncate"},b.status," \u2022 Segment: ",La,React.createElement("div",{className:"mt-1 flex flex-wrap gap-1","data-no-nav":!0},(f.getClientTagIds(String(b.id))||[]).slice(0,4).map(jt=>{var Kt=(f.byId||{})[String(jt)];return Kt?React.createElement("span",{key:String(jt),className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[10px] font-mono "+oo(Kt.color),title:"Remove tag",onClick:Na=>{try{Na.preventDefault(),Na.stopPropagation()}catch(ra){}}},React.createElement("span",{className:"truncate"},Zi(Kt.name)),React.createElement("button",{type:"button",className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full bg-black/20 border border-white/10 hover:bg-black/40",onClick:Na=>{try{Na.preventDefault(),Na.stopPropagation()}catch(ra){}f.toggleClientTag(String(b.id),String(jt))},"aria-label":"Remove tag"},React.createElement("span",{className:"text-[10px] leading-none"},"\xD7"))):null}),(f.getClientTagIds(String(b.id))||[]).length>4?React.createElement("span",{className:"px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-[10px] font-mono text-white/70"},"+",(f.getClientTagIds(String(b.id))||[]).length-4):null,(f.tags||[]).length?React.createElement("span",{className:"ml-1 inline-flex items-center gap-1 text-[10px] font-mono text-white/40"},React.createElement(_,{name:"Plus",size:12}),React.createElement("select",{value:"",onChange:jt=>{var Kt=jt.target.value;Kt&&(f.toggleClientTag(String(b.id),String(Kt)),jt.target.value="")},className:"ml-1 px-2 py-0.5 rounded-full bg-black/30 border border-white/10 text-white text-[10px]",onClick:jt=>{try{jt.preventDefault(),jt.stopPropagation()}catch(Kt){}}},React.createElement("option",{value:""},"Add tag\u2026"),(f.tags||[]).map(jt=>React.createElement("option",{key:jt.id,value:jt.id},jt.name)))):null)))),React.createElement("div",{className:"flex items-center justify-center md:justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-1 flex-wrap justify-center md:justify-start"},(()=>{var jt=f&&f.getClientTagIds?f.getClientTagIds(String(b.id))||[]:[],Kt=jt.length?jt.map(ra=>({id:String(ra),...f&&f.byId?f.byId[String(ra)]||{}:{}})).filter(ra=>ra&&ra.name):Array.isArray(b.tags)?b.tags.map(ra=>({id:null,name:String(ra),color:"zinc"})):[],Na=Kt.slice(0,3);return React.createElement(React.Fragment,null,Na.map(ra=>React.createElement("span",{key:ra.id||ra.name,className:"inline-flex items-center gap-1 text-[9px] px-2 py-0.5 rounded-full border uppercase tracking-wider "+oo(ra.color||"zinc")},React.createElement("span",{className:"font-bold"},ra.name),ra.id?React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:Ti=>{Ti.preventDefault(),Ti.stopPropagation()},onClick:Ti=>{Ti.preventDefault(),Ti.stopPropagation();try{f.toggleClientTag(String(b.id),String(ra.id))}catch(Ee){}},className:"ml-0.5 opacity-80 hover:opacity-100",title:"Remove tag"},React.createElement(_,{name:"X",size:10})):null)),Kt.length>3?React.createElement("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-white/10 text-zinc-300 uppercase tracking-wider"},"+",Kt.length-3):null)})()),React.createElement("div",{className:"flex items-center justify-center md:justify-end gap-2"},React.createElement(sl,{label:"Capacity",value:b.readiness,tone:We,onClick:()=>{zt(b),u("READINESS_DETAIL")}}),React.createElement("span",{className:"hidden lg:inline-flex text-[9px] px-2 py-0.5 rounded-full bg-white/8 border border-white/10 text-white/70 uppercase tracking-wider whitespace-nowrap"},"Last sync: ",b.lastSync||"\u2014"))),React.createElement("div",{className:"flex items-center justify-start md:justify-end gap-2 flex-wrap"},React.createElement(Sr,{client:b,label:"Send Magic Link",className:"px-3 py-1.5 !rounded-full !text-[9px] !uppercase !tracking-wider"}),React.createElement(Rr,{client:b,hideWhenNone:!0}),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("READINESS_DETAIL");try{Bt("trainer.client.quick_action",{action:"review_capacity",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Review capacity"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("CLIENT_CRM");try{Bt("trainer.client.quick_action",{action:"open_crm",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full border border-cyan-400/20 bg-cyan-500/10 hover:bg-cyan-500/15 hover:border-cyan-300/30 text-[9px] font-extrabold uppercase tracking-wider text-cyan-50 shadow-sm"},"Records"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),x(b);try{Bt("trainer.client.quick_action",{action:"assign_plan",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Assign plan"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("INBOX");try{Bt("trainer.client.quick_action",{action:"message",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Message"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("CALENDAR");try{Bt("trainer.client.quick_action",{action:"book_session",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Book session")))),{key:b.id||b.email||b.phone||b.name}):React.createElement(()=>React.createElement("div",{role:"button",tabIndex:0,key:b.id,onClick:jt=>{jt&&jt.target&&jt.target.closest&&jt.target.closest("[data-no-nav]")||(zt(b),uo(!1),u("CLIENT_ACTION_MODE"))},className:"card glass text-left border border-white/12 bg-white/5 hover:bg-white/8 hover:border-white/20 transition-all duration-200 shadow-[0_12px_32px_rgba(0,0,0,0.35)] p-3 rounded-2xl"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"font-bold text-white"},b.name),React.createElement("div",{className:"text-xs text-zinc-500 mt-1"},b.status," \u2022 Capacity Score ",b.readiness),React.createElement("div",{className:"mt-2 flex items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-1 flex-wrap"},(()=>{var jt=f&&f.getClientTagIds?f.getClientTagIds(String(b.id))||[]:[],Kt=jt.length?jt.map(ra=>({id:String(ra),...f&&f.byId?f.byId[String(ra)]||{}:{}})).filter(ra=>ra&&ra.name):Array.isArray(b.tags)?b.tags.map(ra=>({id:null,name:String(ra),color:"zinc"})):[],Na=Kt.slice(0,2);return React.createElement(React.Fragment,null,Na.map(ra=>React.createElement("span",{key:ra.id||ra.name,className:"inline-flex items-center gap-1 text-[9px] px-2 py-0.5 rounded-full border uppercase tracking-wider "+oo(ra.color||"zinc")},React.createElement("span",{className:"font-bold"},ra.name),ra.id?React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:Ti=>{Ti.preventDefault(),Ti.stopPropagation()},onClick:Ti=>{Ti.preventDefault(),Ti.stopPropagation();try{f.toggleClientTag(String(b.id),String(ra.id))}catch(Ee){}},className:"ml-0.5 opacity-80 hover:opacity-100",title:"Remove tag"},React.createElement(_,{name:"X",size:10})):null)),Kt.length>2?React.createElement("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-white/10 text-zinc-300 uppercase tracking-wider"},"+",Kt.length-2):null)})()),React.createElement(sl,{label:"Capacity",value:b.readiness,tone:b.readiness>=70?"good":b.readiness>=45?"warn":"bad",onClick:()=>{zt(b),u("READINESS_DETAIL")}}))),React.createElement("span",{className:"text-[9px] px-2 py-1 rounded-sm bg-white/10 text-zinc-300 uppercase"},La)),React.createElement("div",{className:"mt-4 pt-3 border-t border-white/10 flex flex-wrap gap-2"},React.createElement(Sr,{client:b,label:"Send Magic Link",className:"px-3 py-1.5 !rounded-full !text-[9px] !uppercase !tracking-wider"}),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),x(b);try{Bt("trainer.client.quick_action",{action:"assign_plan",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Assign plan"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("READINESS_DETAIL");try{Bt("trainer.client.quick_action",{action:"review_readiness",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Review readiness"),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("INBOX");try{Bt("trainer.client.quick_action",{action:"message",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Message"),React.createElement("div",{className:"flex-1"}),React.createElement("button",{type:"button","data-no-nav":!0,onMouseDown:jt=>{jt.preventDefault(),jt.stopPropagation()},onClick:jt=>{jt.preventDefault(),jt.stopPropagation(),zt(b),u("CALENDAR");try{Bt("trainer.client.quick_action",{action:"book_session",client_id:b.id})}catch(Kt){}},className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/12 hover:bg-white/10 hover:border-white/20 text-[9px] font-extrabold uppercase tracking-wider text-white/90 shadow-sm"},"Book session"))),{key:b.id||b.email||b.phone||b.name})}))))),O&&O.open?React.createElement("div",{className:"fixed inset-0 z-[999] flex items-end md:items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:St}),React.createElement("div",{className:"relative w-full md:max-w-lg rounded-t-3xl md:rounded-3xl border border-white/10 bg-zinc-900 p-4 md:p-5 shadow-2xl max-h-[85vh] overflow-hidden flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400 font-mono uppercase tracking-wider"},"Bulk Action"),React.createElement("div",{className:"text-white font-semibold"},O.kind==="MENU"?"Bulk Actions":O.kind==="MESSAGE"?"Send Message":O.kind==="ASSIGN_PLAN"?"Assign Program":O.kind==="ASSIGN_NUTRITION"?"Assign Nutrition Plan":O.kind==="ASSIGN_YOGA"?"Assign Yoga Flow":O.kind==="AI_COACH"?"AI Coach Panel":O.kind==="ENROLL_CHALLENGE"?"Enroll Challenge":O.kind==="EXPORT"?"Export Segment":"Bulk"),React.createElement("div",{className:"text-[12px] text-zinc-400 mt-1"},"Target: ",React.createElement("span",{className:"text-zinc-200"},(ye||[]).length?(ye||[]).length:(Vt||[]).length)," client(s) in current filter.")),React.createElement("button",{type:"button",onClick:St,className:"px-2 py-1 rounded-xl bg-white/5 border border-white/10 text-white text-[12px] hover:bg-white/10"},"Close")),React.createElement("div",{className:"mt-3 flex items-center gap-2 overflow-x-auto"},React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"ASSIGN_NUTRITION"}),className:"shrink-0 px-3 py-2 rounded-2xl border text-[12px] font-medium "+(O.kind==="ASSIGN_NUTRITION"?"border-fuchsia-400/30 bg-fuchsia-500/15 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},"Nutrition"),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"ASSIGN_YOGA"}),className:"shrink-0 px-3 py-2 rounded-2xl border text-[12px] font-medium "+(O.kind==="ASSIGN_YOGA"?"border-fuchsia-400/30 bg-fuchsia-500/15 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},"Yoga"),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"AI_COACH"}),className:"shrink-0 px-3 py-2 rounded-2xl border text-[12px] font-medium "+(O.kind==="AI_COACH"?"border-fuchsia-400/30 bg-fuchsia-500/15 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},"AI Coach"),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"MENU"}),className:"shrink-0 px-3 py-2 rounded-2xl border text-[12px] font-medium "+(O.kind==="MENU"||O.kind==="MESSAGE"||O.kind==="EXPORT"?"border-white/15 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},"More")),React.createElement("div",{className:"mt-4 space-y-3 overflow-auto flex-1 pr-1"},O.kind==="MENU"?React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"ASSIGN_NUTRITION"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Assign Nutrition Plan"),React.createElement("div",{className:"text-xs text-white/60"},"Pick a template, dates, and optional macro overrides.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"ASSIGN_YOGA"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Assign Yoga Flow"),React.createElement("div",{className:"text-xs text-white/60"},"Pick a flow, set frequency and intensity cap.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"AI_COACH"}),className:"px-3 py-2 rounded-xl border border-fuchsia-400/20 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"AI Coach Panel"),React.createElement("div",{className:"text-xs text-white/60"},"Personalize nutrition + yoga per client and draft nudges.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"MESSAGE"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left"},React.createElement("div",{className:"text-sm font-medium text-white"},"Send Message"),React.createElement("div",{className:"text-xs text-white/60"},"Queue a message to selected clients.")),React.createElement("button",{type:"button",onClick:()=>qe({open:!0,kind:"EXPORT"}),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-left md:col-span-2"},React.createElement("div",{className:"text-sm font-medium text-white"},"Export Segment"),React.createElement("div",{className:"text-xs text-white/60"},"Download JSON of current filtered segment."))):null,O.kind==="MESSAGE"?React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-zinc-300 mb-1"},"Message"),React.createElement("textarea",{value:Pt,onChange:b=>Za(b.target.value),rows:4,className:"w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px] outline-none focus:ring-2 focus:ring-white/10",placeholder:"Write a message to selected clients\u2026"})):null,O.kind==="ASSIGN_NUTRITION"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-[12px] text-zinc-300"},"Assign Nutrition Plan (trainer-side)"),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Template"),React.createElement("select",{value:Ma.templateId,onChange:b=>$a(We=>({...We||{},templateId:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"},React.createElement("option",{value:""},"Select template\u2026"),(yi||[]).slice(0,500).map(b=>React.createElement("option",{key:b.id,value:b.id},b.name||b.title||"Template "+b.id)))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Start date"),React.createElement("input",{type:"date",value:Ma.startDate||dt(),onChange:b=>$a(We=>({...We||{},startDate:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(Ma.durationDays||28),onChange:b=>$a(We=>({...We||{},durationDays:Number(b.target.value||28)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] text-white/80 font-semibold"},"Macro overrides"),React.createElement("div",{className:"text-[11px] text-white/50"},"Optional. AI can prefill from template + client goal.")),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Ma==null?void 0:Ma.templateId)||""),We=(yi||[]).find(Na=>String(Na.id)===b)||null,da=We&&(We.macroOverride||We.macros)?We.macroOverride||We.macros:{calories:2e3,protein:150,carbs:200,fat:70},ii=Array.isArray(ye)&&ye.length?String(ye[0]):Array.isArray(Vt)&&Vt[0]?String(Fe(Vt[0])):"",jt=(Vt||[]).find(Na=>String(Fe(Na))===String(ii))||{},Kt=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"?window.__FOF.AI.suggestMacroOverride(jt||{},da||{}):da;$a(Na=>({...Na||{},calories:Kt.calories,protein:Kt.protein,carbs:Kt.carbs,fat:Kt.fat})),za("AI: macro overrides suggested.")}catch(b){console.warn(b),za("AI failed.")}},className:"px-3 py-2 rounded-xl bg-fuchsia-500/15 border border-fuchsia-400/25 text-fuchsia-100 text-[11px] font-mono uppercase tracking-widest hover:bg-fuchsia-500/25"},"AI Suggest Macros")),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("input",{placeholder:"Calories",value:Ma.calories,onChange:b=>$a(We=>({...We||{},calories:b.target.value})),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}),React.createElement("input",{placeholder:"Protein",value:Ma.protein,onChange:b=>$a(We=>({...We||{},protein:b.target.value})),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}),React.createElement("input",{placeholder:"Carbs",value:Ma.carbs,onChange:b=>$a(We=>({...We||{},carbs:b.target.value})),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}),React.createElement("input",{placeholder:"Fat",value:Ma.fat,onChange:b=>$a(We=>({...We||{},fat:b.target.value})),className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"})),React.createElement("label",{className:"mt-3 flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Ma.aiPerClient,onChange:b=>$a(We=>({...We||{},aiPerClient:!!b.target.checked}))}),"AI personalize per client (writes per-client overrides)"))):null,O.kind==="ASSIGN_YOGA"?React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"text-[12px] text-zinc-300"},"Assign Yoga Flow (trainer-side)"),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Flow"),React.createElement("select",{value:Yt.flowId,onChange:b=>it(We=>({...We||{},flowId:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"},React.createElement("option",{value:""},"Select flow\u2026"),(zi||[]).slice(0,500).map(b=>React.createElement("option",{key:b.id,value:b.id},b.name||b.title||"Flow "+b.id)))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Start date"),React.createElement("input",{type:"date",value:Yt.startDate||dt(),onChange:b=>it(We=>({...We||{},startDate:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(Yt.durationDays||28),onChange:b=>it(We=>({...We||{},durationDays:Number(b.target.value||28)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Frequency / week"),React.createElement("input",{type:"number",min:"1",max:"14",value:String(Yt.freqPerWeek||3),onChange:b=>it(We=>({...We||{},freqPerWeek:Number(b.target.value||3)})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-zinc-400"},"Intensity cap"),React.createElement("select",{value:String(Yt.intensityCap||"FLOW").toUpperCase(),onChange:b=>it(We=>({...We||{},intensityCap:b.target.value})),className:"mt-1 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[13px]"},["GENTLE","FLOW","POWER"].map(b=>React.createElement("option",{key:b,value:b},b))))),React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!Yt.aiPerClient,onChange:b=>it(We=>({...We||{},aiPerClient:!!b.target.checked}))}),"AI personalize per client"),React.createElement("button",{type:"button",onClick:()=>{try{var b=String((Yt==null?void 0:Yt.flowId)||""),We=(zi||[]).find(Na=>String(Na.id)===b)||{},da=Array.isArray(ye)&&ye.length?String(ye[0]):Array.isArray(Vt)&&Vt[0]?String(Fe(Vt[0])):"",ii=(Vt||[]).find(Na=>String(Fe(Na))===String(da))||{},jt={freqPerWeek:Number(Yt.freqPerWeek||3),intensityCap:String(Yt.intensityCap||"FLOW")},Kt=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"?window.__FOF.AI.suggestYogaAssignment(ii||{},We||{},jt):jt;it(Na=>({...Na||{},freqPerWeek:Number(Kt.freqPerWeek||jt.freqPerWeek),intensityCap:String(Kt.intensityCap||jt.intensityCap).toUpperCase()})),za("AI: yoga settings suggested.")}catch(b){console.warn(b),za("AI failed.")}},className:"px-3 py-2 rounded-xl bg-fuchsia-500/15 border border-fuchsia-400/25 text-fuchsia-100 text-[11px] font-mono uppercase tracking-widest hover:bg-fuchsia-500/25"},"AI Suggest Yoga"))):null,O.kind==="AI_COACH"?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement(ro,{clients:Vt||[],getClientById:b=>(Vt||[]).find(We=>String(Fe(We))===String(b)),targetIds:Array.isArray(ye)&&ye.length?ye:(Vt||[]).map(b=>Fe(b)),nutTemplates:yi||[],yogaFlows:zi||[],onClose:St,toast:za})):null),React.createElement("div",{className:"pt-3 mt-3 sticky bottom-0 border-t border-white/10 bg-zinc-900/80 backdrop-blur-sm flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:St,className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px] hover:bg-white/10"},"Cancel"),O.kind!=="MENU"&&O.kind!=="AI_COACH"?React.createElement("button",{type:"button",onClick:os,className:"px-4 py-2 rounded-xl bg-emerald-500/15 border border-emerald-400/20 text-emerald-100 text-[12px] font-mono uppercase tracking-wider hover:bg-emerald-500/25"},O.kind==="MESSAGE"?"Send":O.kind==="EXPORT"?"Download":O.kind==="ASSIGN_NUTRITION"||O.kind==="ASSIGN_YOGA"?"Assign":"Confirm"):null))):null)},Mr="fof_td_clientPlans_v1",Fr=typeof Fr!="undefined"&&Fr?Fr:function(o){try{return o&&(o.id||o.clientId||o.uid||o.email||o.phone||o.name)||null}catch(d){return null}};try{typeof window!="undefined"&&(window.__fofGetClientId=Fr)}catch(o){}var on=typeof on!="undefined"&&on?on:function(){var o=new Map,d="__fof_test__",m=k=>{try{return k.setItem(d,"1"),k.removeItem(d),!0}catch(T){return!1}},E=(()=>{try{return typeof window!="undefined"&&window.localStorage&&m(window.localStorage)}catch(k){return!1}})(),g=(()=>{try{return typeof window!="undefined"&&window.sessionStorage&&m(window.sessionStorage)}catch(k){return!1}})();return{get:k=>{try{if(E){var T=window.localStorage.getItem(k);if(T!=null)return T}}catch(T){}try{if(g){var T=window.sessionStorage.getItem(k);if(T!=null)return T}}catch(T){}return o.has(k)?o.get(k):null},set:(k,T)=>{var he=!1;try{E&&(window.localStorage.setItem(k,T),he=!0)}catch(oe){}try{!he&&g&&(window.sessionStorage.setItem(k,T),he=!0)}catch(oe){}return he||(o.set(k,T),he=!0),he},remove:k=>{try{E&&window.localStorage.removeItem(k)}catch(T){}try{g&&window.sessionStorage.removeItem(k)}catch(T){}o.delete(k)},lsOk:E,ssOk:g}}();try{typeof window!="undefined"&&(window.__tdSafeStore=on)}catch(o){}var Tl="fof.td.flags.v1",Er=typeof Er!="undefined"&&Er?Er:function(){try{var o=on.get(Tl);if(o){var d=JSON.parse(o||"{}")||{};return{nutritionEngineEnabled:d.nutritionEngineEnabled!==!1,yogaWellnessEnabled:d.yogaWellnessEnabled!==!1,wellnessEnabled:d.wellnessEnabled!==!1}}}catch(o){}return{nutritionEngineEnabled:!0,yogaWellnessEnabled:!0,wellnessEnabled:!0}},xr=typeof xr!="undefined"&&xr?xr:function(o){try{var m={...Er(),...o||{}};on.set(Tl,JSON.stringify(m));try{typeof window!="undefined"&&(window.__TD_FLAGS=m)}catch(E){}return m}catch(d){return Er()}};try{typeof window!="undefined"&&(window.__TD_FLAGS=Er())}catch(o){}var Jr="fof.tdep.assess.templates.v1",jr="fof.tdep.assess.assignments.v1",$l="fof.tdep.assess.records.v1",Ol=()=>{try{return new Date().toISOString()}catch(o){return String(Date.now())}},Ll=(o="ass")=>`${o}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`,xd=()=>[{id:"tpl_movement_screen_v1",name:"Movement Screen (Basic)",sportId:"GENERAL",category:"MOVEMENT",fields:[{key:"overhead_squat",label:"Overhead squat quality (1\u201310)",type:"number",unit:"/10"},{key:"hip_hinge",label:"Hip hinge quality (1\u201310)",type:"number",unit:"/10"},{key:"ankle_mobility",label:"Ankle mobility (1\u201310)",type:"number",unit:"/10"},{key:"t_spine",label:"T-spine mobility (1\u201310)",type:"number",unit:"/10"},{key:"pain_notes",label:"Pain notes",type:"text",unit:""}]},{id:"tpl_running_baseline_v1",name:"Running Baseline",sportId:"RUNNING",category:"PERFORMANCE",fields:[{key:"5k_time",label:"5K time",type:"text",unit:"mm:ss"},{key:"weekly_mileage",label:"Weekly mileage",type:"number",unit:"km"},{key:"rpe_easy",label:"Easy run RPE (1\u201310)",type:"number",unit:"/10"},{key:"hr_z2",label:"Avg HR in Z2",type:"number",unit:"bpm"}]},{id:"tpl_football_speed_v1",name:"Speed + Power Check",sportId:"FOOTBALL",category:"SPEED",fields:[{key:"sprint_20m",label:"20m sprint",type:"number",unit:"sec"},{key:"sprint_40m",label:"40m sprint",type:"number",unit:"sec"},{key:"vertical_jump",label:"Vertical jump",type:"number",unit:"cm"},{key:"hamstring_tightness",label:"Hamstring tightness (1\u201310)",type:"number",unit:"/10"}]},{id:"tpl_cycling_power_v1",name:"Cycling Power Snapshot",sportId:"CYCLING",category:"POWER",fields:[{key:"ftp",label:"FTP",type:"number",unit:"watts"},{key:"tss_week",label:"Last 7d TSS",type:"number",unit:""},{key:"cadence",label:"Avg cadence",type:"number",unit:"rpm"},{key:"rpe_hard",label:"Hard session RPE (1\u201310)",type:"number",unit:"/10"}]},{id:"tpl_crossfit_capacity_v1",name:"CrossFit Capacity Check",sportId:"CROSSFIT",category:"CAPACITY",fields:[{key:"metcon_time",label:"Benchmark Metcon time",type:"text",unit:"mm:ss"},{key:"pullups_max",label:"Max pull-ups",type:"number",unit:"reps"},{key:"thruster_1rm",label:"Thruster 1RM",type:"number",unit:"kg"},{key:"shoulder_status",label:"Shoulder status (1\u201310)",type:"number",unit:"/10"}]}],Dl=(o,d)=>{try{var m=on.get(o);if(!m)return d;var E=JSON.parse(m);return E==null?d:E}catch(m){return d}},gl=(o,d)=>{try{on.set(o,JSON.stringify(d))}catch(m){}};(()=>{try{var o=Dl(Jr,null);(!o||Array.isArray(o)&&o.length===0||typeof o=="object"&&!Array.isArray(o)&&Object.keys(o).length===0)&&gl(Jr,xd()),Dl(jr,null)||gl(jr,[]),Dl($l,null)||gl($l,{})}catch(o){}})();var er=()=>Dl(Jr,[]),hd=()=>Dl(jr,[]),zd=()=>Dl($l,{}),Ds=o=>{var E,g;var m=(er()||[]).filter(f=>f&&f.id!==o.id);m.unshift(o),gl(Jr,m);try{(g=(E=window.__FOF_TDEP)==null?void 0:E.logEvent)==null||g.call(E,"assessment.template.upsert",{templateId:o.id,sportId:o.sportId,name:o.name})}catch(f){}},Jl=o=>{var m,E;var d=er();gl(Jr,(d||[]).filter(g=>g&&g.id!==o));try{(E=(m=window.__FOF_TDEP)==null?void 0:m.logEvent)==null||E.call(m,"assessment.template.delete",{templateId:String(o)})}catch(g){}},qd=({clientId:o,templateId:d,dueAt:m=null,note:E=""})=>{var T,he;var f=(er()||[]).find(oe=>oe&&oe.id===d)||null,F={id:Ll("asgn"),clientId:String(o),templateId:String(d),templateName:f?f.name:"Assessment",sportId:f?f.sportId:"GENERAL",status:"PENDING",dueAt:m,note:String(E||""),createdAt:Ol()},D=hd(),k=[F,...D||[]];gl(jr,k);try{(he=(T=window.__FOF_TDEP)==null?void 0:T.logEvent)==null||he.call(T,"assessment.assigned",{assignmentId:F.id,clientId:String(o),templateId:String(d)})}catch(oe){}return F},Dn=o=>{var E,g;var m=(hd()||[]).map(f=>f&&f.id===o?{...f,status:"COMPLETED",completedAt:Ol()}:f);gl(jr,m);try{(g=(E=window.__FOF_TDEP)==null?void 0:E.logEvent)==null||g.call(E,"assessment.assignment.completed",{assignmentId:String(o)})}catch(f){}},Xo=({clientId:o,templateId:d,values:m,notes:E="",assignmentId:g=null})=>{var ke,Re;var F=(er()||[]).find(Me=>Me&&Me.id===d)||null,D={id:Ll("asr"),clientId:String(o),templateId:String(d),templateName:F?F.name:"Assessment",sportId:F?F.sportId:"GENERAL",takenAt:Ol(),values:m||{},notes:String(E||""),assignmentId:g?String(g):null},k=zd(),T=String(o),he=Array.isArray(k[T])?k[T]:[],oe={...k,[T]:[D,...he]};gl($l,oe),g&&Dn(String(g));try{(Re=(ke=window.__FOF_TDEP)==null?void 0:ke.logEvent)==null||Re.call(ke,"assessment.recorded",{recordId:D.id,clientId:T,templateId:String(d)})}catch(Me){}return D},$d=o=>{var d=String(o);return(hd()||[]).filter(m=>m&&String(m.clientId)===d).slice(0,50)},Ad=o=>{var d=zd(),m=String(o);return(Array.isArray(d[m])?d[m]:[]).slice(0,100)},Jd=o=>{var d=String(o||"GENERAL"),m=er()||[],E=m.filter(D=>D&&String(D.sportId||"GENERAL")===d),g=m.filter(D=>D&&String(D.sportId||"GENERAL")==="GENERAL"),f=[],F=new Set;return[...E,...g].forEach(D=>{!D||F.has(D.id)||(F.add(D.id),f.push(D))}),f.slice(0,50)},nc=({open:o,mode:d="ASSIGN",clientId:m,sportId:E="GENERAL",templateId:g="",assignmentId:f=null,onClose:F,onSaved:D})=>{var[k,T]=React.useState(g||""),[he,oe]=React.useState(""),[ke,Re]=React.useState(""),[Me,Et]=React.useState({}),[ya,Ct]=React.useState("");React.useEffect(()=>{o&&(T(g||""),Et({}),Ct(""),Re(""))},[o,g]);var Jt=React.useMemo(()=>Jd(E),[E]),Ye=(Jt||[]).find(te=>te&&te.id===k)||null;if(!o)return null;var Tt=()=>{var Ce,C;if(!k){try{ta("Missing template","Select an assessment template to assign.")}catch(ye){}return}var te=qd({clientId:m,templateId:k,dueAt:he?new Date(he).toISOString():null,note:ke});try{(C=(Ce=window.__FOF_EVENT_LOG_V1)==null?void 0:Ce.push)==null||C.call(Ce,{type:"assessment.assigned",ts:Ol(),clientId:String(m),payload:{assignmentId:te.id,templateId:k,templateName:te.templateName}})}catch(ye){}try{D&&D()}catch(ye){}},_t=()=>{var Ce,C;if(!k){try{ta("Missing template","Select an assessment template before recording results.")}catch(ye){}return}var te=Xo({clientId:m,templateId:k,values:Me,notes:ya,assignmentId:f});try{(C=(Ce=window.__FOF_EVENT_LOG_V1)==null?void 0:Ce.push)==null||C.call(Ce,{type:"assessment.recorded",ts:Ol(),clientId:String(m),payload:{recordId:te.id,templateId:k,templateName:te.templateName}})}catch(ye){}try{D&&D()}catch(ye){}},P=d==="ASSIGN"?"Assign assessment":"Record assessment result",I=d==="ASSIGN"?"Assign":"Save result";return React.createElement("div",{className:"fixed inset-0 z-[80] flex items-center justify-center px-4"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:F}),React.createElement("div",{className:"relative w-full max-w-2xl rounded-3xl border border-white/15 bg-zinc-950/95 backdrop-blur-xl p-5 max-h-[85vh] overflow-y-auto"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},P),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Sport defaults: ",React.createElement("span",{className:"text-white/80 font-semibold"},String(E||"GENERAL")))),React.createElement("button",{onClick:F,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Close")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Template"),React.createElement("select",{value:k,onChange:te=>T(te.target.value),className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white"},React.createElement("option",{value:""},"Select\u2026"),(Jt||[]).map(te=>React.createElement("option",{key:te.id,value:te.id},te.name," (",te.sportId||"GENERAL",")"))),d==="ASSIGN"?React.createElement(React.Fragment,null,React.createElement("div",{className:"mt-4 text-[10px] font-mono uppercase tracking-widest text-white/50"},"Due date (optional)"),React.createElement("input",{type:"date",value:he,onChange:te=>oe(te.target.value),className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white"}),React.createElement("div",{className:"mt-4 text-[10px] font-mono uppercase tracking-widest text-white/50"},"Note"),React.createElement("textarea",{value:ke,onChange:te=>Re(te.target.value),rows:3,className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white",placeholder:"Optional instructions for the client\u2026"})):React.createElement("div",{className:"mt-4 text-[11px] text-white/55"},"Record results below. If this was from a pending assignment, it will be marked completed.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Fields"),Ye?React.createElement("div",{className:"mt-3 space-y-2"},(Ye.fields||[]).map(te=>React.createElement("div",{key:te.key,className:"flex items-center gap-2"},React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-[11px] text-white/70 truncate"},te.label),te.type==="text"?React.createElement("input",{type:"text",value:Me[te.key]||"",onChange:Ce=>Et(C=>({...C,[te.key]:Ce.target.value})),className:"mt-1 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white",placeholder:te.unit?`e.g., ${te.unit}`:"Enter\u2026"}):React.createElement("input",{type:"number",value:Me[te.key]||"",onChange:Ce=>Et(C=>({...C,[te.key]:Ce.target.value})),className:"mt-1 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white",placeholder:te.unit?te.unit:""})),te.unit?React.createElement("div",{className:"text-[11px] text-white/45 whitespace-nowrap"},te.unit):null)),React.createElement("div",{className:"mt-3 text-[10px] font-mono uppercase tracking-widest text-white/50"},"Notes"),React.createElement("textarea",{value:ya,onChange:te=>Ct(te.target.value),rows:3,className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white",placeholder:"Observations, pain, context\u2026"})):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"Select a template to see fields."))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{onClick:F,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Cancel"),React.createElement("button",{onClick:d==="ASSIGN"?Tt:_t,className:"px-4 py-2 rounded-2xl border border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.15)] hover:bg-[rgba(77,233,255,0.22)] text-[12px] font-extrabold text-white"},I))))},rc=({open:o,sportId:d="GENERAL",onClose:m})=>{var[E,g]=React.useState(()=>er()),[f,F]=React.useState(null);if(React.useEffect(()=>{o&&g(er())},[o]),!o)return null;var D=()=>{F({id:Ll("tpl"),name:"",sportId:String(d||"GENERAL"),category:"CUSTOM",fields:[{key:"metric_1",label:"Metric 1",type:"number",unit:""}]})},k=()=>{if(!f||!String(f.name||"").trim()){try{ta("Missing name","Give this assessment template a name.")}catch(T){}return}Ds({...f,name:String(f.name).trim()}),g(er()),F(null)};return React.createElement("div",{className:"fixed inset-0 z-[85] flex items-center justify-center px-4"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:m}),React.createElement("div",{className:"relative w-full max-w-3xl rounded-3xl border border-white/15 bg-zinc-950/95 backdrop-blur-xl p-5 max-h-[85vh] overflow-y-auto"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Assessment Templates"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Build template forms. Defaults biased by sport context.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:D,className:"px-3 py-2 rounded-2xl border border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.14)] hover:bg-[rgba(77,233,255,0.20)] text-[11px] font-extrabold text-white"},"New"),React.createElement("button",{onClick:m,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Close"))),f?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Name"),React.createElement("input",{value:f.name,onChange:T=>F(he=>({...he,name:T.target.value})),className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white",placeholder:"e.g., Jump Test Battery"}),React.createElement("div",{className:"mt-4 text-[10px] font-mono uppercase tracking-widest text-white/50"},"Sport"),React.createElement("select",{value:f.sportId,onChange:T=>F(he=>({...he,sportId:T.target.value})),className:"mt-2 w-full rounded-xl bg-black/40 border border-white/10 px-3 py-2 text-[13px] text-white"},["GENERAL","RUNNING","FOOTBALL","CYCLING","CROSSFIT","SOCCER","BODYBUILDING","POWERLIFTING","HYROX","YOGA"].map(T=>React.createElement("option",{key:T,value:T},T)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Fields"),React.createElement("div",{className:"mt-2 space-y-2"},(f.fields||[]).map((T,he)=>React.createElement("div",{key:he,className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"grid grid-cols-12 gap-2"},React.createElement("input",{className:"col-span-6 rounded-lg bg-black/40 border border-white/10 px-2 py-1 text-[12px] text-white",value:T.label||"",onChange:oe=>F(ke=>{var Re=[...ke.fields||[]];return Re[he]={...Re[he],label:oe.target.value,key:Re[he].key||"field_"+he},{...ke,fields:Re}}),placeholder:"Label"}),React.createElement("input",{className:"col-span-3 rounded-lg bg-black/40 border border-white/10 px-2 py-1 text-[12px] text-white",value:T.unit||"",onChange:oe=>F(ke=>{var Re=[...ke.fields||[]];return Re[he]={...Re[he],unit:oe.target.value},{...ke,fields:Re}}),placeholder:"Unit"}),React.createElement("select",{className:"col-span-2 rounded-lg bg-black/40 border border-white/10 px-2 py-1 text-[12px] text-white",value:T.type||"number",onChange:oe=>F(ke=>{var Re=[...ke.fields||[]];return Re[he]={...Re[he],type:oe.target.value},{...ke,fields:Re}})},React.createElement("option",{value:"number"},"Number"),React.createElement("option",{value:"text"},"Text")),React.createElement("button",{className:"col-span-1 text-rose-200 text-[12px]",onClick:()=>F(oe=>{var ke=[...oe.fields||[]];return ke.splice(he,1),{...oe,fields:ke}})},"\u2715"))))),React.createElement("button",{onClick:()=>F(T=>({...T,fields:[...T.fields||[],{key:Ll("f"),label:"New field",type:"number",unit:""}]})),className:"mt-3 px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"+ Add field"))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{onClick:()=>F(null),className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Back"),React.createElement("button",{onClick:k,className:"px-4 py-2 rounded-2xl border border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.15)] hover:bg-[rgba(77,233,255,0.22)] text-[12px] font-extrabold text-white"},"Save"))):React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},(E||[]).slice(0,30).map(T=>React.createElement("div",{key:T.id,className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold truncate"},T.name),React.createElement("div",{className:"text-[10px] text-white/45 mt-1 font-mono uppercase tracking-widest"},T.sportId||"GENERAL"," \u2022 ",(T.fields||[]).length," fields")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>F(JSON.parse(JSON.stringify(T))),className:"px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Edit"),React.createElement("button",{onClick:()=>{Jl(T.id),g(er())},className:"px-3 py-2 rounded-xl border border-rose-400/20 bg-rose-500/10 hover:bg-rose-500/15 text-[11px] font-bold text-rose-200"},"Delete"))))))))},lc=()=>{if(!ct)return null;var o=typeof Zn=="function"?Zn():{tags:[],byId:{},getClientTagIds:()=>[],toggleClientTag:()=>{}},d=React.useMemo(()=>[],[ct]),m="FOF_TD_SESSIONS_V1",E="FOF_TD_BOOKING_PREFILL_V1",g=(Ye,Tt)=>{try{var _t=JSON.parse(localStorage.getItem(Ye)||"null");return _t!=null?_t:Tt}catch(_t){return Tt}},f=(Ye,Tt)=>{try{localStorage.setItem(Ye,JSON.stringify(Tt))}catch(_t){}try{window.dispatchEvent(new Event("fof_sessions_changed_v1"))}catch(_t){}},F=(()=>{try{var Ye=React.useMemo(()=>{try{return JSON.parse(localStorage.getItem(m)||"[]")||[]}catch(le){return[]}},[]),Tt=React.useMemo(()=>{var le=String((ct==null?void 0:ct.id)||(ct==null?void 0:ct.clientId)||"");return(Ye||[]).filter(O=>String((O==null?void 0:O.clientId)||(O==null?void 0:O.cid)||(O==null?void 0:O.client)||"")===le)},[Ye,ct]),_t=React.useMemo(()=>{try{return(Tt||[]).map(O=>{var qe=(O==null?void 0:O.when)||(O==null?void 0:O.date)||(O==null?void 0:O.start)||(O==null?void 0:O.at)||(O==null?void 0:O.ts)||(O==null?void 0:O.completedAt)||(O==null?void 0:O.createdAt)||null,Pt=qe?new Date(qe):null;return Pt&&!isNaN(Pt.getTime())?Pt:null}).filter(Boolean).sort((O,qe)=>qe.getTime()-O.getTime())[0]||null}catch(le){return null}},[Tt]),P=React.useMemo(()=>{if(!_t)return null;try{return Math.floor((Date.now()-_t.getTime())/864e5)}catch(le){return null}},[_t]),I=React.useMemo(()=>{var le=P;return le==null?{label:"\u2014",tone:"neutral",hint:"No activity detected yet"}:le<=7?{label:"Active",tone:"good",hint:"Recent activity within 7 days"}:le<=14?{label:"Nudge",tone:"brand",hint:"Light inactivity (7\u201314 days)"}:le<=30?{label:"At-risk",tone:"warn",hint:"Prolonged inactivity (14\u201330 days)"}:{label:"Dormant",tone:"bad",hint:"No activity in 30+ days"}},[P]),te=React.useMemo(()=>Array.isArray(d)&&d.length>0?{label:"Assigned",tone:"good",hint:"Client has assigned plan(s)"}:{label:"None",tone:"warn",hint:"No plan assigned (demo)"},[d]),Ce=React.useMemo(()=>{var le=String((ct==null?void 0:ct.financial)||"").toUpperCase();return le?le==="OK"||le==="PAID"?{label:"OK",tone:"good",hint:"No billing flags"}:{label:"Attention",tone:"warn",hint:"Billing may need review"}:{label:"\u2014",tone:"neutral",hint:"Billing not set"}},[ct]),C=React.useMemo(()=>{if(!_t)return{label:"\u2014",sub:"No recent activity",tone:"neutral"};var le=P;return{label:"Session",sub:le==null?"":le===0?"today":`${le}d ago`,tone:le!=null&&le<=7?"good":le!=null&&le<=30?"warn":"bad"}},[_t,P]),ye=le=>le==="good"?"border-emerald-400/35 bg-emerald-400/10 text-emerald-100":le==="warn"?"border-amber-400/35 bg-amber-400/10 text-amber-100":le==="bad"?"border-rose-400/35 bg-rose-400/10 text-rose-100":le==="brand"?"border-cyan-400/35 bg-cyan-400/10 text-cyan-50":"border-white/12 bg-white/5 text-white/80";return typeof Fr=="function"?Fr(ct):(ct==null?void 0:ct.id)||(ct==null?void 0:ct.clientId)||(ct==null?void 0:ct.email)||(ct==null?void 0:ct.name)||null}catch(Ye){return null}})(),[D,k]=React.useState(()=>{var Ye=g(m,[]);return Array.isArray(Ye)?Ye:[]});React.useEffect(()=>{var Ye=()=>{var Tt=g(m,[]);Array.isArray(Tt)&&k(Tt)};try{window.addEventListener("storage",Ye)}catch(Tt){}try{window.addEventListener("fof_sessions_changed_v1",Ye)}catch(Tt){}return()=>{try{window.removeEventListener("storage",Ye)}catch(Tt){}try{window.removeEventListener("fof_sessions_changed_v1",Ye)}catch(Tt){}}},[]);var T=React.useMemo(()=>{var Ye=Array.isArray(D)?D:[],Tt=String(F||""),_t=Ye.filter(P=>{if(!P)return!1;var I=String(P.clientId||""),te=String(P.clientName||"");return!!(Tt&&I&&I===Tt||Tt&&!I&&String((ct==null?void 0:ct.name)||"")&&te&&te.toLowerCase()===String((ct==null?void 0:ct.name)||"").toLowerCase())});return _t.sort((P,I)=>{var te=Date.parse(P.startISO||P.start||"")||0,Ce=Date.parse(I.startISO||I.start||"")||0;return te-Ce}),_t},[D,F,ct]),he=Date.now(),oe=React.useMemo(()=>(T||[]).filter(Ye=>{var Tt=Date.parse(Ye.startISO||Ye.start||"")||0;return!Tt||String(Ye.status||"BOOKED").toUpperCase()==="CANCELLED"?!1:Tt>=he-5*60*1e3}).slice(0,6),[T,he]),ke=React.useMemo(()=>{var Ye=(T||[]).slice().filter(Tt=>{var _t=Date.parse(Tt.startISO||Tt.start||"")||0;return _t&&_t<he+3e5});return Ye.sort((Tt,_t)=>(Date.parse(_t.startISO||_t.start||"")||0)-(Date.parse(Tt.startISO||Tt.start||"")||0)),Ye.slice(0,12)},[T,he]),Re=React.useMemo(()=>(T||[]).filter(Ye=>String(Ye.status||"").toUpperCase()==="NO_SHOW").length,[T]),Me=React.useMemo(()=>(T||[]).filter(Ye=>{var Tt=String(Ye.status||"").toUpperCase();return Tt==="COMPLETED"||Tt==="ATTENDED"}).length,[T]),Et=oe&&oe.length?oe[0]:null,ya=Ye=>{try{var Tt=new Date(Ye);if(isNaN(Tt.getTime()))return"";var _t=String(Tt.getDate()).padStart(2,"0"),P=String(Tt.getMonth()+1).padStart(2,"0"),I=String(Tt.getHours()).padStart(2,"0"),te=String(Tt.getMinutes()).padStart(2,"0");return`${_t}/${P} ${I}:${te}`}catch(Tt){return""}},Ct=(Ye,Tt)=>{try{var _t=g(m,[]),P=Array.isArray(_t)?_t.slice():[],I=P.findIndex(te=>te&&te.id===Ye);if(I<0)return;P[I]={...P[I],...Tt||{}},f(m,P),k(P);try{toast("Session updated")}catch(te){}}catch(_t){}};return React.createElement("div",{className:"h-full flex flex-col space-y-4"},React.createElement("button",{onClick:()=>u("CLIENT_LIST"),className:"text-zinc-500 text-xs font-bold uppercase hover:text-white flex items-center gap-2 w-fit"},React.createElement(_,{name:"ArrowLeft",size:12})," Back to Clients"),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Clients \u2022 Booking-aware"),React.createElement("div",{className:"mt-1 text-white font-extrabold tracking-tight text-[16px]"},"Upcoming sessions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Timeline is derived from Calendar A sessions (FOF_TD_SESSIONS_V1).")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{var Ye=new Date,Tt=Ye.getMinutes(),_t=Tt<30?30:60;Ye.setMinutes(Tt<30?30:0,0,0),_t===60&&Tt>=30&&Ye.setHours(Ye.getHours()+1);var P={clientId:F||null,clientName:(ct==null?void 0:ct.name)||(ct==null?void 0:ct.email)||"Client",service:"PT Session",location:"In-person",status:"BOOKED",price:250,currency:"AED",startISO:Et&&Et.startISO?(()=>{try{var I=new Date(Et.startISO);return isNaN(I.getTime())?Ye.toISOString():(I.setDate(I.getDate()+7),I.toISOString())}catch(I){return Ye.toISOString()}})():Ye.toISOString(),durationMin:60,reminder:!0,notes:""};localStorage.setItem(E,JSON.stringify(P))}catch(Ye){}try{u("CALENDAR")}catch(Ye){}try{toast("Calendar opened \u2014 draft prepared")}catch(Ye){}},className:"px-3 py-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/12 hover:bg-emerald-500/18 text-emerald-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Calendar",size:14}),"Book next session"),React.createElement("button",{type:"button",onClick:()=>u("CALENDAR"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-white/75 text-[11px] font-mono uppercase tracking-widest"},"Open Calendar"))),React.createElement("div",{className:"mt-4 space-y-2"},!oe||oe.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/55"},"No upcoming sessions found for this client. Use ",React.createElement("span",{className:"text-white/80 font-semibold"},"Book next session")," to schedule quickly."):React.createElement("div",{className:"space-y-2"},oe.map(Ye=>{var Tt=String(Ye.status||"BOOKED").toUpperCase(),_t=Tt==="BOOKED"?"border-sky-400/25 bg-sky-500/10 text-sky-100":Tt==="COMPLETED"||Tt==="ATTENDED"?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":Tt==="NO_SHOW"?"border-rose-400/25 bg-rose-500/10 text-rose-100":Tt==="CANCELLED"?"border-white/15 bg-white/5 text-white/65":"border-white/15 bg-white/5 text-white/70";return React.createElement("div",{key:Ye.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-white font-extrabold text-[13px] truncate"},ya(Ye.startISO||Ye.start)),React.createElement("span",{className:"px-2 py-0.5 rounded-full border text-[10px] font-mono uppercase tracking-widest "+_t},Tt),Ye.service?React.createElement("span",{className:"px-2 py-0.5 rounded-full border border-white/12 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/70"},String(Ye.service)):null,Ye.location?React.createElement("span",{className:"px-2 py-0.5 rounded-full border border-white/12 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-white/70"},String(Ye.location)):null),Ye.notes?React.createElement("div",{className:"mt-2 text-[12px] text-white/60 line-clamp-2"},String(Ye.notes)):React.createElement("div",{className:"mt-2 text-[12px] text-white/45"},"No notes.")),React.createElement("div",{className:"shrink-0 flex flex-col items-end gap-2"},React.createElement("div",{className:"text-[12px] text-white/75 font-semibold"},Ye.price!=null?`${Number(Ye.price)||0} ${String(Ye.currency||"AED")}`:""),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{localStorage.setItem("FOF_TD_BOOKING_PREFILL_V1",JSON.stringify({...Ye||{},id:Ye.id||null}))}catch(P){}try{u("CALENDAR")}catch(P){}},className:"px-2.5 py-1.5 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/75"},"Edit"),Tt==="BOOKED"?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>Ct(Ye.id,{status:"COMPLETED"}),className:"px-2.5 py-1.5 rounded-xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Mark completed"),React.createElement("button",{type:"button",onClick:()=>Ct(Ye.id,{status:"NO_SHOW"}),className:"px-2.5 py-1.5 rounded-xl border border-rose-400/25 bg-rose-500/10 hover:bg-rose-500/15 text-[10px] font-mono uppercase tracking-widest text-rose-100"},"No-show")):null))))})))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Session stats"),React.createElement("div",{className:"mt-1 text-white font-extrabold tracking-tight text-[16px]"},"Attendance"),React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Completed"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},Me)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"No-shows"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},Re))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/65"},"Policy: No-show is tracked per session status (",React.createElement("span",{className:"font-mono text-white/75"},"NO_SHOW"),") and can be changed from the timeline/history.")),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] font-semibold text-white/75 mb-2"},"Recent history"),React.createElement("div",{className:"space-y-2 max-h-[260px] overflow-auto trainer-scroll pr-1"},!ke||ke.length===0?React.createElement("div",{className:"text-[12px] text-white/45"},"No past sessions for this client yet."):ke.map(Ye=>{var Tt=String(Ye.status||"BOOKED").toUpperCase(),_t=Tt==="COMPLETED"||Tt==="ATTENDED"?"border-emerald-400/25 bg-emerald-500/10 text-emerald-100":Tt==="NO_SHOW"?"border-rose-400/25 bg-rose-500/10 text-rose-100":Tt==="CANCELLED"?"border-white/15 bg-white/5 text-white/65":"border-white/15 bg-white/5 text-white/70";return React.createElement("div",{key:Ye.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90 truncate"},ya(Ye.startISO||Ye.start)),React.createElement("div",{className:"mt-1 text-[11px] text-white/55 truncate"},String(Ye.service||"Session")," \u2022 ",String(Ye.location||"\u2014"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"px-2 py-0.5 rounded-full border text-[10px] font-mono uppercase tracking-widest "+_t},Tt))),React.createElement("div",{className:"mt-2 flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>Ct(Ye.id,{status:"COMPLETED"}),className:"px-2.5 py-1.5 rounded-xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Completed"),React.createElement("button",{type:"button",onClick:()=>Ct(Ye.id,{status:"NO_SHOW"}),className:"px-2.5 py-1.5 rounded-xl border border-rose-400/25 bg-rose-500/10 hover:bg-rose-500/15 text-[10px] font-mono uppercase tracking-widest text-rose-100"},"No-show"),React.createElement("button",{type:"button",onClick:()=>Ct(Ye.id,{status:"CANCELLED"}),className:"px-2.5 py-1.5 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Cancelled")))}))))),React.createElement("div",{className:"glass-panel border border-white/10 rounded-3xl p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Client Tags"),React.createElement("div",{className:"text-xs text-white/60 mt-1"},"Used for bulk actions + challenges (Phase 6.2/6.3).")),React.createElement("button",{type:"button",onClick:()=>{try{u("CLIENT_TAGS")}catch(Ye){}},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/30 hover:bg-emerald-500/20 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Manage")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},(o.getClientTagIds(String(ct.id))||[]).length===0?React.createElement("div",{className:"text-[12px] text-white/50"},"No tags yet."):(o.getClientTagIds(String(ct.id))||[]).map(Ye=>{var Tt=(o.byId||{})[String(Ye)];return Tt?React.createElement("span",{key:String(Ye),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border text-[10px] font-mono hover:bg-white/8 "+oo(Tt.color),onClick:_t=>{try{_t.preventDefault(),_t.stopPropagation()}catch(P){}},title:"Tag"},React.createElement("span",{className:"truncate"},Zi(Tt.name)),React.createElement("button",{type:"button",className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full bg-black/20 border border-white/10 hover:bg-black/40",onClick:_t=>{try{_t.preventDefault(),_t.stopPropagation()}catch(P){}o.toggleClientTag(String(ct.id),String(Ye))},"aria-label":"Remove tag",title:"Remove tag"},React.createElement("span",{className:"text-[10px] leading-none"},"\xD7"))):null})),(o.tags||[]).length?React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Add tag"),React.createElement("select",{value:"",onChange:Ye=>{var Tt=Ye.target.value;Tt&&(o.toggleClientTag(String(ct.id),String(Tt)),Ye.target.value="")},className:"px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"},React.createElement("option",{value:""},"Select\u2026"),(o.tags||[]).map(Ye=>React.createElement("option",{key:Ye.id,value:Ye.id},Ye.name)))):null),React.createElement("div",{className:"bg-titanium-800 border border-titanium-700 p-6 rounded-sm flex justify-between items-start"},React.createElement("div",null,React.createElement("h1",{className:"text-2xl font-bold text-white mb-1"},ci(ct.name)),React.createElement("div",{className:"text-xs font-mono text-zinc-500"},"ID: #88293 \u2022 PROG: HYPERTROPHY A"),React.createElement("div",{className:"mt-2 text-[9px] text-zinc-400"},"Financial Status:"," ",ct.financial==="OK"?"Payment Active":"Payment Issue"),React.createElement("div",{className:"mt-4 rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-white/5 to-white/3 p-3.5 shadow-[0_0_0_1px_rgba(255,255,255,0.06)]"},React.createElement("div",{className:"flex items-center justify-between gap-3 mb-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/70"},"Status intelligence"),React.createElement("div",{className:"text-[10px] text-white/45"},"Derived \u2022 no actions")),React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border p-3 "+__cdTone(__cd_engagement.tone),title:__cd_engagement.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Engagement"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold"},__cd_engagement.label),React.createElement("div",{className:"mt-0.5 text-[10px] text-white/55"},__cd_daysSince==null?"":__cd_daysSince===0?"today":`${__cd_daysSince}d since`)),React.createElement("div",{className:"rounded-2xl border p-3 "+__cdTone(__cd_plan.tone),title:__cd_plan.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Plan"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold"},__cd_plan.label),React.createElement("div",{className:"mt-0.5 text-[10px] text-white/55"},Array.isArray(d)?`${d.length} item${d.length===1?"":"s"}`:"\u2014")),React.createElement("div",{className:"rounded-2xl border p-3 "+__cdTone(__cd_lastActionLabel.tone),title:"Most recent logged session / activity (demo)"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Last action"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold"},__cd_lastActionLabel.label),React.createElement("div",{className:"mt-0.5 text-[10px] text-white/55"},__cd_lastActionLabel.sub)),React.createElement("div",{className:"rounded-2xl border p-3 "+__cdTone(__cd_billing.tone),title:__cd_billing.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Billing"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold"},__cd_billing.label),React.createElement("div",{className:"mt-0.5 text-[10px] text-white/55"},String((ct==null?void 0:ct.financial)||"\u2014")))))),React.createElement("div",{className:"flex flex-col items-end gap-2"},React.createElement(Sr,{client:ct}),React.createElement("div",{className:"mt-2"},React.createElement(Rr,{client:ct,hideWhenNone:!0})),ct.financial==="OK"?React.createElement("div",{className:"px-3 py-1 bg-emerald-600 text-white text-[9px] font-bold uppercase rounded-sm tracking-widest"},"Payment Active"):React.createElement("div",{className:"px-3 py-1 bg-red-600 text-white text-[9px] font-bold uppercase rounded-sm tracking-widest flex items-center gap-1"},React.createElement(_,{name:"AlertTriangle",size:10})," Payment Failed"),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{u("CLIENT_CRM")}catch(Ye){}},className:"px-3 py-2 rounded-sm bg-titanium-900 border border-cyan-500/30 hover:border-cyan-300/50 hover:bg-cyan-500/10 text-cyan-100 text-[10px] font-extrabold uppercase tracking-widest inline-flex items-center gap-2",title:"Open Records (CRM)"},React.createElement(_,{name:"Folder",size:14,className:"text-cyan-200"}),React.createElement("span",{className:"hidden sm:inline"},"Records")),React.createElement("button",{className:"p-2 bg-titanium-900 border border-titanium-600 hover:text-white text-zinc-400 rounded-sm"},React.createElement(_,{name:"MessageSquare",size:16})),React.createElement("button",{className:"p-2 bg-titanium-900 border border-titanium-600 hover:text-white text-zinc-400 rounded-sm",onClick:()=>mn(!0)},React.createElement(_,{name:"PenTool",size:16}))))),React.createElement("div",{className:"bg-titanium-900/60 border border-white/10 rounded-sm px-4 py-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"ClipboardList",size:16}),React.createElement("div",{className:"text-[11px] font-extrabold uppercase tracking-wider text-white/90"},"Assigned Plans"),React.createElement("div",{className:"text-[10px] text-white/60"},"(",d.length,")")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{className:"px-3 py-1 rounded-full border border-white/15 bg-white/5 hover:bg-white/10 text-[10px] font-bold text-white/80",onClick:()=>{if(!d.length){ta("Assigned Plans",`No plans assigned to this client yet.

Go to: Sidebar \u2192 Plan Builder \u2192 Select client \u2192 Assign plan + nudges.`);return}var Ye=d.map((Tt,_t)=>{var P=String(Tt.createdAt||"").slice(0,10)||"\u2014",I=Tt.schedule&&Tt.schedule.defaultTime?Tt.schedule.defaultTime:"\u2014",te=Tt.nudges&&Array.isArray(Tt.nudges.items)?Tt.nudges.items.length:Tt.nudges&&Array.isArray(Tt.nudges)?Tt.nudges.length:0;return`${_t+1}. ${Tt.planName||"Plan"}  \u2022 ${P}  \u2022 time ${I}  \u2022 nudges ${te}`}).join(`
`);ta("Assigned Plans",Ye)}},"View"),React.createElement("button",{className:"px-3 py-1 rounded-full border border-white/15 bg-white/5 hover:bg-white/10 text-[10px] font-bold text-white/80",onClick:()=>{x(ct)}},"How"))),d.length?React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2"},d.slice(0,3).map((Ye,Tt)=>React.createElement("div",{key:Ye.id||Tt,className:"rounded-sm border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"text-[11px] font-bold text-white/90 truncate"},Ye.planName||"Plan"),React.createElement("div",{className:"mt-1 text-[10px] text-white/60 flex items-center justify-between"},React.createElement("span",null,String(Ye.createdAt||"").slice(0,10)||"\u2014"),React.createElement("span",{className:"uppercase tracking-wider"},Ye.schedule&&Ye.schedule.defaultTime?Ye.schedule.defaultTime:"\u2014"))))):React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"No plans assigned yet. Use ",React.createElement("span",{className:"text-white/80 font-bold"},"Sidebar \u2192 Plan Builder")," to assign.")),React.createElement("div",{className:"bg-titanium-900/60 border border-lime-400/20 rounded-sm px-4 py-3"},(()=>{var Ye=Fr(ct);var Tt=[],_t=0;try{var P=on.get(Mr)||window.__FOF_ASSIGN_MEM_RAW||null||window.__FOF_ASSIGN_MEM_RAW||null,I=P?JSON.parse(P):[];Tt=(Array.isArray(I)?I:[]).filter(te=>te&&te.clientId===Ye),Tt.sort((te,Ce)=>String(Ce.createdAt||"").localeCompare(String(te.createdAt||"")))}catch(P){}return React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(_,{name:"Layers",size:16}),React.createElement("div",{className:"text-[11px] font-extrabold uppercase tracking-wider text-white/90"},"Assigned Plans (V1)"),React.createElement("div",{className:"text-[10px] text-white/60"},"(",Tt.length,")")),React.createElement("div",{className:"text-[10px] text-white/60"},"Preview is read-only"),React.createElement("div",{className:"text-[10px] text-white/40"},"debug: cid=",Ye||"null"," \u2022 stored=",_t)),Tt.length?React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2"},Tt.slice(0,3).map((P,I)=>React.createElement("div",{key:P.instanceId||I,className:"rounded-sm border border-white/10 bg-white/5 px-3 py-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-bold text-white/90 truncate"},P.planName||"Plan"),React.createElement("div",{className:"text-[10px] font-extrabold text-lime-200"},"v",P.version||1)),React.createElement("div",{className:"mt-1 text-[10px] text-white/60 flex items-center justify-between"},React.createElement("span",null,String(P.createdAt||"").slice(0,10)||"\u2014"),React.createElement("button",{className:"px-2 py-0.5 rounded-full border border-white/15 bg-white/5 hover:bg-white/10 text-[10px] font-bold text-white/80",onClick:()=>{Wa(P),u("PLAN_INSTANCE_PREVIEW")}},"Preview"))))):React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"No V1 plans assigned yet. Go to ",React.createElement("span",{className:"text-white/80 font-bold"},"Plan Builder \u2192 Plan V1")," and click ",React.createElement("span",{className:"text-lime-200 font-bold"},"Assign to client"),"."))})()),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 flex-1 overflow-hidden"},React.createElement("div",{className:"lg:col-span-2 space-y-4 overflow-y-auto trainer-scroll pr-2"},React.createElement("div",{className:"bg-titanium-900 border border-titanium-800 p-4 rounded-sm flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement(_,{name:"Watch",className:"text-teal-500"}),React.createElement("div",null,React.createElement("div",{className:"text-sm font-bold text-white"},"Wearable sync status"),React.createElement("div",{className:"text-[9px] text-zinc-500 uppercase"},"Garmin Connect \u2022 Last sync 12m ago"))),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-xl font-bold text-white font-mono"},"14.2"),React.createElement("div",{className:"text-[9px] text-zinc-500 uppercase"},"Strain"))),React.createElement("div",{className:"bg-gradient-to-r from-titanium-800 to-titanium-900 border border-titanium-700 p-4 rounded-sm"},React.createElement("h3",{className:"text-xs font-bold text-teal-400 uppercase tracking-widest mb-4 flex items-center gap-2"},React.createElement(_,{name:"Sparkles",size:12})," Predictive analytics"),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"bg-titanium-950/50 p-3 rounded-sm border border-titanium-800"},React.createElement("div",{className:"text-zinc-500 text-[9px] uppercase font-bold"},"Nutrition predictions"),React.createElement("div",{className:"text-white font-mono font-bold text-lg"},"Recovery focus adherence (92%)")),React.createElement("div",{className:"bg-titanium-950/50 p-3 rounded-sm border border-titanium-800"},React.createElement("div",{className:"text-zinc-500 text-[9px] uppercase font-bold"},"Performance Projection"),React.createElement("div",{className:"text-white font-mono font-bold text-lg"},"Squat 1RM +5kg")))),React.createElement("div",{className:"bg-titanium-900 border border-titanium-800 p-4 rounded-sm"},React.createElement("h3",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest mb-2"},"Linked client readiness"),React.createElement("div",{className:"flex gap-4 text-xs text-zinc-500"},React.createElement("div",{className:"flex flex-col"},React.createElement("span",{className:"font-bold text-white"},"88%"),React.createElement("span",null,"Sleep Quality")),React.createElement("div",{className:"flex flex-col"},React.createElement("span",{className:"font-bold text-white"},"65ms"),React.createElement("span",null,"HRV")),React.createElement("div",{className:"flex flex-col"},React.createElement("span",{className:"font-bold text-green-500"},"On track"),React.createElement("span",null,"Stress"))),React.createElement("div",{className:"mt-2 text-[9px] text-zinc-500"},"Feeds into PeriodizationPlanner_PP1 and EC_Churn risk scores."),React.createElement("div",{className:"mt-1 text-[9px] text-zinc-500"},"LinkedClientDailyUse_LC_PT_Plan \u2013 updates PT plan suggestions based on readiness."))),React.createElement("div",{className:"bg-titanium-800 border border-titanium-700 p-4 rounded-sm flex flex-col h-full overflow-hidden"},React.createElement("h3",{className:"text-white font-bold text-xs uppercase border-b border-titanium-600 pb-2 mb-2 tracking-widest"},"Action Menu (Action_Menu)"),React.createElement("div",{className:"space-y-2 overflow-y-auto trainer-scroll pr-1 flex-1"},React.createElement("button",{onClick:()=>{vi("SOURCE"),ls("BUILD"),u("PLAN_HOME")},className:"w-full p-3 bg-yellow-500 hover:bg-yellow-400 text-black font-bold rounded-sm text-left flex items-center gap-3 text-sm"},React.createElement(_,{name:"Edit",size:16})," Modify Plan"),React.createElement("button",{onClick:()=>qr(!0),className:"w-full p-3 bg-titanium-900 hover:bg-titanium-700 text-orange-400 font-bold rounded-sm text-left flex items-center gap-3 text-sm border border-titanium-700"},React.createElement(_,{name:"Activity",size:16})," Log Bodywork / SOAP Note"),React.createElement("button",{onClick:()=>u("INBOX"),className:"w-full p-3 bg-titanium-900 hover:bg-titanium-700 text-zinc-300 font-bold rounded-sm text-left flex items-center gap-3 text-sm border border-titanium-700"},React.createElement(_,{name:"MessageCircle",size:16})," Communicate (Unified Inbox)"),React.createElement("button",{onClick:()=>alert("TD_3D_Form_Review_NEW \u2013 preview: open 3D replay viewer."),className:"w-full p-3 bg-titanium-900 hover:bg-titanium-700 text-purple-400 font-bold rounded-sm text-left flex items-center gap-3 text-sm border border-titanium-700"},React.createElement(_,{name:"Box",size:16})," Review 3D Form Replay"),React.createElement("button",{onClick:()=>alert("TD_Print \u2013 generating PDF summary."),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-300 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"FileText",size:14})," Generate Printable PDF"),React.createElement("button",{onClick:()=>Vo(!0),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-300 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"Folder",size:14})," Manage Client Files"),React.createElement("button",{onClick:()=>Ss(!0),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-500 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"UserCheck",size:14})," Change Client Status"),React.createElement("button",{onClick:()=>{alert("TD_Alert_Resolved \u2013 alert resolved and removed from AI triage."),u("HUB")},className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-500 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"XCircle",size:14})," Dismiss Alert / Log"),React.createElement("button",{onClick:()=>ho("DunningFlow_DF_Log_Offline_Modal"),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-500 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"DollarSign",size:14})," Log Offline Payment"),React.createElement("button",{onClick:()=>{fs("OFF_PLATFORM"),ws(!0)},className:"w-full p-2 bg-titanium-900 hover:bg-titanium-700 text-zinc-500 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"Send",size:14})," Invite Off-Platform Client (Magic Link)"),Be&&React.createElement("div",{className:"text-[9px] text-emerald-400 font-mono"},"Invite Sent!"),React.createElement("button",{onClick:()=>ho("CollabHub_CHub1"),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-800 rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"Users",size:14})," Open Collab Hub (CollabHub_CHub1)"),React.createElement("button",{onClick:()=>alert("SpecialistDailyWorkflow_SDW_Referral_In \u2013 referral to specialist created (stub)."),className:"w-full p-2 bg-titanium-900 hover:bg-titanium-800 rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-titanium-700"},React.createElement(_,{name:"Activity",size:14})," Refer to Specialist (SpecialistDailyWorkflow_SDW_Referral_In)"),React.createElement("button",{onClick:()=>confirm("Are you sure? This triggers Admin_Offboarding_Flow_AOF1 (stub)."),className:"w-full p-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 font-bold rounded-sm text-left flex items-center gap-3 text-xs uppercase border border-red-900/50 mt-4"},React.createElement(_,{name:"UserMinus",size:14})," Offboard Client (Admin_Offboarding_Flow_AOF1)")))))},dc=({selectedClient:o,setView:d})=>{var Ot,xe;var m="FOF_TD_SESSIONS_V1",E="FOF_TD_AVAIL_BLOCKS_V1",g=(p,R)=>{try{var Ve=JSON.parse(localStorage.getItem(p)||"null");return Ve!=null?Ve:R}catch(Ve){return R}},f=(p,R)=>{try{localStorage.setItem(p,JSON.stringify(R))}catch(Ve){}try{window.dispatchEvent(new Event("fof_sessions_changed_v1"))}catch(Ve){}},F=p=>String(p).padStart(2,"0"),D=p=>p instanceof Date?p:p?new Date(p):new Date,k=p=>{var R=D(p);return new Date(R.getFullYear(),R.getMonth(),R.getDate())},T=(p,R)=>{var Ve=new Date(p);return Ve.setDate(Ve.getDate()+R),Ve},he=(p,R)=>{var Ve=new Date(p);return Ve.setMinutes(Ve.getMinutes()+R),Ve},oe=p=>p.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),ke=p=>p.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[Re,Me]=React.useState(()=>{try{return localStorage.getItem("FOF_TD_CAL_VIEWMODE")||"WEEK"}catch(p){return"WEEK"}});React.useEffect(()=>{try{localStorage.setItem("FOF_TD_CAL_VIEWMODE",Re)}catch(p){}},[Re]);var[Et,ya]=React.useState(()=>{try{return localStorage.getItem("FOF_DASH_RANGE")||"7D"}catch(p){return"7D"}});React.useEffect(()=>{try{localStorage.setItem("FOF_DASH_RANGE",Et)}catch(p){}},[Et]);var[Ct,Jt]=React.useState(()=>k(new Date)),[Ye,Tt]=React.useState(""),[_t,P]=React.useState("ALL"),[I,te]=React.useState("ALL"),[Ce,C]=React.useState(()=>{var p=g(m,[]);if(Array.isArray(p)&&p.length)return p;var R=k(new Date),Ve=[{id:"sess_"+Math.random().toString(16).slice(2),clientName:"Aisha M.",clientId:"c_aisha",service:"PT Session",location:"In-person",status:"BOOKED",price:250,currency:"AED",startISO:he(T(R,0),8*60+30).toISOString(),durationMin:60,notes:"Focus: squat technique + core stability.",reminder:!0},{id:"sess_"+Math.random().toString(16).slice(2),clientName:"Omar K.",clientId:"c_omar",service:"Online Coaching",location:"Zoom",status:"BOOKED",price:180,currency:"AED",startISO:he(T(R,0),12*60).toISOString(),durationMin:45,notes:"Check-in: weekly plan adjustments.",reminder:!0},{id:"sess_"+Math.random().toString(16).slice(2),clientName:"Maya R.",clientId:"c_maya",service:"Assessment",location:"In-person",status:"COMPLETED",price:300,currency:"AED",startISO:he(T(R,-1),18*60).toISOString(),durationMin:60,notes:"Baseline strength + mobility screen.",reminder:!1}];return f(m,Ve),Ve});React.useEffect(()=>{var p=()=>{var R=g(m,[]);Array.isArray(R)&&C(R)};try{window.addEventListener("storage",p)}catch(R){}try{window.addEventListener("fof_sessions_changed_v1",p)}catch(R){}return()=>{try{window.removeEventListener("storage",p)}catch(R){}try{window.removeEventListener("fof_sessions_changed_v1",p)}catch(R){}}},[]);var ye=React.useMemo(()=>["PT Session","Online Coaching","Assessment","Group Class","Physio","Nutrition Consult"],[]),le=React.useMemo(()=>[{id:"tpl_pt60",name:"PT \u2022 60m",service:"PT Session",durationMin:60,price:250,location:"In-person",capacity:1},{id:"tpl_pt45",name:"PT \u2022 45m",service:"PT Session",durationMin:45,price:200,location:"In-person",capacity:1},{id:"tpl_online45",name:"Online \u2022 45m",service:"Online Coaching",durationMin:45,price:180,location:"Zoom",capacity:1},{id:"tpl_assess75",name:"Assessment \u2022 75m",service:"Assessment",durationMin:75,price:300,location:"In-person",capacity:1},{id:"tpl_group50",name:"Group Class \u2022 50m",service:"Group Class",durationMin:50,price:60,location:"Studio",capacity:12},{id:"tpl_nutri30",name:"Nutrition \u2022 30m",service:"Nutrition Consult",durationMin:30,price:150,location:"Online",capacity:1}],[]),O=React.useMemo(()=>[{id:"ALL",label:"All"},{id:"BOOKED",label:"Booked"},{id:"COMPLETED",label:"Completed"},{id:"CANCELLED",label:"Cancelled"},{id:"NO_SHOW",label:"No-show"}],[]),qe=(p,R,Ve)=>{var pa=new Date(p.startISO).getTime();return pa>=R.getTime()&&pa<Ve.getTime()},Pt=React.useMemo(()=>{var p=(Ye||"").trim().toLowerCase();return Ce.filter(R=>_t!=="ALL"&&R.status!==_t||I!=="ALL"&&R.service!==I?!1:p?(R.clientName||"").toLowerCase().includes(p)||(R.service||"").toLowerCase().includes(p)||(R.location||"").toLowerCase().includes(p):!0).sort((R,Ve)=>new Date(R.startISO).getTime()-new Date(Ve.startISO).getTime())},[Ce,Ye,_t,I]),Za=React.useMemo(()=>{if(Re==="DAY"){var R=k(Ct);return{start:R,end:T(R,1)}}if(Re==="MONTH"){var R=new Date(Ct.getFullYear(),Ct.getMonth(),1),Ve=new Date(Ct.getFullYear(),Ct.getMonth()+1,1);return{start:R,end:Ve}}if(Re==="AGENDA"){var R=k(Ct);return{start:R,end:T(R,30)}}var p=k($a);return{start:p,end:T(p,7)}},[Re,Ct,$a]),Ma=React.useMemo(()=>{var cs;var p=Za.start,R=Za.end,Ve=(Array.isArray(Ce)?Ce:[]).filter(Gi=>qe(Gi,p,R)),pa=Ve.filter(Gi=>Gi.status==="BOOKED"),qt=Ve.filter(Gi=>Gi.status==="COMPLETED"),ka=Ve.filter(Gi=>Gi.status==="CANCELLED"||Gi.status==="NO_SHOW"),pi=Gi=>Gi.reduce((pe,Sa)=>pe+(Number(Sa.price)||0),0);return{bookedCount:pa.length,completedCount:qt.length,cancelledCount:ka.length,bookedValue:pi(pa),completedValue:pi(qt),currency:((cs=Ve[0])==null?void 0:cs.currency)||"AED"}},[Ce,Za]),$a=React.useMemo(()=>{var p=k(Ct),R=p.getDay(),Ve=R===0?-6:1-R;return T(p,Ve)},[Ct]),Yt=React.useMemo(()=>Array.from({length:7},(p,R)=>T($a,R)),[$a]),[it,Ut]=React.useState(null),ce=React.useMemo(()=>Ce.find(p=>p.id===it)||null,[Ce,it]),[Vt,Fe]=React.useState(!1),[v,Te]=React.useState(null),[Se,yt]=React.useState(()=>g(E,[])),[St,za]=React.useState(!1),[Xe,dt]=React.useState(null),Qt="FOF_TD_BOOKING_PREFILL_V1";React.useEffect(()=>{try{var p=localStorage.getItem(Qt);if(!p)return;var R=JSON.parse(p||"null");if(!R||typeof R!="object")return;localStorage.removeItem(Qt);try{if(R.startISO){var Ve=new Date(R.startISO);isNaN(Ve.getTime())||Jt(Ve)}}catch(Ve){}Te(Ve=>({...Ve||{},id:null,clientName:R.clientName||(o==null?void 0:o.name)||(o==null?void 0:o.email)||"",clientId:R.clientId||(o?o.id||o.clientId||o.email||o.name:null),service:R.service||"PT Session",location:R.location||"In-person",status:R.status||"BOOKED",price:R.price!=null?R.price:250,currency:R.currency||"AED",startISO:R.startISO||new Date().toISOString(),durationMin:R.durationMin||60,notes:R.notes||"",reminder:R.reminder!=null?R.reminder:!0,attendees:Array.isArray(R.attendees)?R.attendees:[]})),Fe(!0)}catch(p){}},[]);var yi=p=>{var R=k(Ct),Ve=(p==null?void 0:p.start)||he(R,12*60),pa=(p==null?void 0:p.end)||he(Ve,60);dt({id:null,startISO:Ve.toISOString(),endISO:pa.toISOString(),reason:(p==null?void 0:p.reason)||"Unavailable"}),za(!0)},zi=()=>{if(!Xe)return;var p={...Xe},R=new Date(p.startISO),Ve=new Date(p.endISO);if(isNaN(R.getTime())||isNaN(Ve.getTime())||Ve.getTime()<=R.getTime()){alert("Invalid block range.");return}var pa=Array.isArray(Se)?[...Se]:[];p.id||(p.id="blk_"+Math.random().toString(16).slice(2));var qt=pa.findIndex(ka=>ka.id===p.id);qt>=0?pa[qt]=p:pa.push(p),yt(pa),f(E,pa),za(!1),dt(null)},os=p=>{if(!p||!confirm("Remove this blocked time?"))return;var R=(Array.isArray(Se)?Se:[]).filter(Ve=>Ve.id!==p);yt(R),f(E,R)},as=(p,R)=>{var Ve=new Date(p),pa=he(Ve,R||60);return(Array.isArray(Se)?Se:[]).some(qt=>{var ka=new Date(qt.startISO),pi=new Date(qt.endISO);return Ve<pi&&pa>ka})},ro=p=>{var qt,ka,pi,cs;var R=k(Ct),pa=((p==null?void 0:p.start)||he(R,9*60)).toISOString();Te({id:null,seriesId:(p==null?void 0:p.seriesId)||null,templateId:(p==null?void 0:p.templateId)||"",clientName:(p==null?void 0:p.clientName)||"",clientId:(p==null?void 0:p.clientId)||null,service:(p==null?void 0:p.service)||"PT Session",location:(p==null?void 0:p.location)||"In-person",status:(p==null?void 0:p.status)||"BOOKED",price:(qt=p==null?void 0:p.price)!=null?qt:250,currency:(p==null?void 0:p.currency)||"AED",startISO:pa,durationMin:(ka=p==null?void 0:p.durationMin)!=null?ka:60,capacity:(pi=p==null?void 0:p.capacity)!=null?pi:((p==null?void 0:p.service)||"PT Session")==="Group Class"?12:1,attendees:Array.isArray(p==null?void 0:p.attendees)?p.attendees:[],recurrence:(p==null?void 0:p.recurrence)||{freq:"NONE",count:8},notes:(p==null?void 0:p.notes)||"",reminder:(cs=p==null?void 0:p.reminder)!=null?cs:!0}),Fe(!0)},n=p=>{Te({...p}),Fe(!0)},y=()=>{var Gi,pe;if(!v)return;var p={...v};if(!p.clientName||!String(p.clientName).trim()){alert("Client name is required.");return}if(!p.startISO){alert("Start time is required.");return}var R=new Date(p.startISO);if(isNaN(R.getTime())){alert("Invalid start date/time.");return}if((!p.durationMin||p.durationMin<15)&&(p.durationMin=60),(!p.capacity||p.capacity<1)&&(p.capacity=1),Array.isArray(p.attendees)||(p.attendees=[]),as(p.startISO,p.durationMin)){alert("This time is blocked/unavailable. Remove the block or pick another slot.");return}var Ve=Array.isArray(Ce)?[...Ce]:[],pa=Sa=>{var Ji=Ve.findIndex(wo=>wo.id===Sa.id);Ji>=0?Ve[Ji]=Sa:Ve.push(Sa)},qt=Sa=>{var Ji={...Sa};return Ji.id||(Ji.id="sess_"+Math.random().toString(16).slice(2)),Ji},ka=p.recurrence&&p.recurrence.freq?p.recurrence.freq:"NONE",pi=Math.max(1,parseInt(((Gi=p.recurrence)==null?void 0:Gi.count)||8,10)||8);if(!p.id&&ka!=="NONE"){var Sa="ser_"+Math.random().toString(16).slice(2),Ji=ka==="WEEKLY"?7:ka==="BIWEEKLY"?14:null;var wo=new Date(p.startISO);for(var Ns=0;Ns<pi;Ns++){var Us=qt({...p,id:null,seriesId:Sa,occurrence:Ns+1,startISO:wo.toISOString()});if(pa(Us),ka==="MONTHLY"){var Uo=new Date(wo);Uo.setMonth(Uo.getMonth()+1),wo=Uo}else wo=T(wo,Ji||7)}f(m,Ve),Ut(((pe=Ve[Ve.length-1])==null?void 0:pe.id)||null),Fe(!1),Te(null);return}var cs=qt(p);pa(cs),f(m,Ve),Ut(cs.id),Fe(!1),Te(null)},be=p=>{if(!p||!confirm("Delete this session?"))return;var R=(Array.isArray(Ce)?Ce:[]).filter(Ve=>Ve.id!==p);f(m,R),Ut(null)},ie=React.useMemo(()=>{if(Re==="DAY")return ke(Ct);if(Re==="AGENDA")return"Agenda";if(Re==="MONTH")return Ct.toLocaleDateString(void 0,{month:"long",year:"numeric"});var p=T($a,6);return`${$a.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${p.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}`},[Re,Ct,$a]),Dt=()=>Jt(k(new Date)),b=p=>{Jt(Re==="DAY"?T(Ct,p):Re==="MONTH"?new Date(Ct.getFullYear(),Ct.getMonth()+p,1):T(Ct,p*7))},We=({value:p,onPick:R})=>{var Ve=p.getFullYear(),pa=p.getMonth(),ka=(new Date(Ve,pa,1).getDay()+6)%7,pi=new Date(Ve,pa+1,0).getDate(),cs=[];for(var pe=0;pe<ka;pe++)cs.push(null);for(var pe=1;pe<=pi;pe++)cs.push(new Date(Ve,pa,pe));for(;cs.length%7!==0;)cs.push(null);var Gi=(pe,Sa)=>pe&&Sa&&pe.getFullYear()===Sa.getFullYear()&&pe.getMonth()===Sa.getMonth()&&pe.getDate()===Sa.getDate();return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("div",{className:"text-xs uppercase tracking-wider text-white/60"},p.toLocaleDateString(void 0,{month:"long",year:"numeric"})),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{onClick:()=>R(new Date(Ve,pa-1,1)),className:"px-2 py-1 rounded-lg border border-white/10 hover:bg-white/10 text-white/70 text-xs"},"\u2039"),React.createElement("button",{onClick:()=>R(new Date(Ve,pa+1,1)),className:"px-2 py-1 rounded-lg border border-white/10 hover:bg-white/10 text-white/70 text-xs"},"\u203A"))),React.createElement("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-white/40 mb-1"},["M","T","W","T","F","S","S"].map(pe=>React.createElement("div",{key:pe,className:"text-center"},pe))),React.createElement("div",{className:"grid grid-cols-7 gap-1"},cs.map((pe,Sa)=>React.createElement("button",{key:Sa,disabled:!pe,onClick:()=>pe&&R(pe),className:pe?Gi(pe,p)?"h-8 rounded-lg bg-white/15 border border-white/20 text-white text-xs":"h-8 rounded-lg border border-white/10 hover:bg-white/10 text-white/70 text-xs":"h-8 rounded-lg opacity-0"},pe?pe.getDate():""))))},da=({id:p,label:R})=>React.createElement("button",{onClick:()=>Me(p),className:"px-3 py-1.5 rounded-xl text-xs border "+(Re===p?"bg-white/15 border-white/20 text-white":"border-white/10 text-white/70 hover:bg-white/10")},R),ii=({active:p,children:R,onClick:Ve})=>React.createElement("button",{onClick:Ve,className:"px-2.5 py-1 rounded-xl text-xs border "+(p?"bg-white/15 border-white/20 text-white":"border-white/10 text-white/70 hover:bg-white/10")},R),jt=({s:p})=>{var R=new Date(p.startISO),Ve=he(R,p.durationMin||60),pa=`${F(R.getHours())}:${F(R.getMinutes())}\u2013${F(Ve.getHours())}:${F(Ve.getMinutes())}`,qt=p.status==="COMPLETED"?"bg-emerald-500/15 border-emerald-500/25 text-emerald-200":p.status==="CANCELLED"?"bg-red-500/15 border-red-500/25 text-red-200":p.status==="NO_SHOW"?"bg-amber-500/15 border-amber-500/25 text-amber-200":"bg-sky-500/15 border-sky-500/25 text-sky-200";return React.createElement("button",{onClick:()=>{Ut(p.id)},className:"w-full text-left rounded-2xl border p-3 hover:bg-white/5 "+qt},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},p.clientName),React.createElement("div",{className:"text-xs text-white/70 truncate"},p.service," \u2022 ",p.location)),React.createElement("div",{className:"text-xs text-white/70 whitespace-nowrap"},pa)),p.notes?React.createElement("div",{className:"mt-2 text-xs text-white/60 line-clamp-2"},p.notes):null)},Kt=React.useMemo(()=>Array.from({length:17},(p,R)=>6+R),[]),Na=React.useMemo(()=>{var p=k($a),R=T(p,7);return Pt.filter(Ve=>qe(Ve,p,R))},[Pt,$a]),ra=p=>{var R=k(p),Ve=T(R,1);return Pt.filter(pa=>qe(pa,R,Ve))},Ti=p=>{var R=p.getHours()+p.getMinutes()/60;return Math.max(0,(R-6)*52)},Ee=p=>Math.max(28,p/60*52),ae=(p,R)=>{var Ve=new Date(p.getFullYear(),p.getMonth(),p.getDate(),R,0,0,0);ro({start:Ve})};return React.createElement("div",{className:"w-full"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-lg font-semibold text-white"},"Sessions"),React.createElement("span",{className:"text-[10px] px-2 py-1 rounded-full border border-white/10 text-white/60"},"Booking \u2022 Calendar")),React.createElement("div",{className:"text-xs text-white/60 mt-1 truncate"},"Manage bookings like PTminder / Mindbody: quick book, week grid, agenda, session drawer."),React.createElement("div",{className:"mt-2 flex flex-wrap items-center gap-2"},React.createElement("div",{className:"text-[11px] px-2 py-1 rounded-full border border-white/10 text-white/60"},"Range: ",React.createElement("span",{className:"text-white/80 font-medium"},ie)),React.createElement("div",{className:"text-[11px] px-2 py-1 rounded-full border border-white/10 text-white/60"},"Booked: ",React.createElement("span",{className:"text-white/80 font-medium"},Ma.bookedCount)," \u2022 ",Ma.currency," ",React.createElement("span",{className:"text-white/80 font-medium"},Math.round(Ma.bookedValue))),React.createElement("div",{className:"text-[11px] px-2 py-1 rounded-full border border-white/10 text-white/60"},"Completed: ",React.createElement("span",{className:"text-white/80 font-medium"},Ma.completedCount)," \u2022 ",Ma.currency," ",React.createElement("span",{className:"text-white/80 font-medium"},Math.round(Ma.completedValue))),Ma.cancelledCount?React.createElement("div",{className:"text-[11px] px-2 py-1 rounded-full border border-white/10 text-white/50"},"Cancelled/No-show: ",React.createElement("span",{className:"text-white/70 font-medium"},Ma.cancelledCount)):null)),React.createElement("div",{className:"flex items-center gap-2 flex-wrap justify-start md:justify-end"},React.createElement("div",{className:"flex items-center gap-1 rounded-2xl border border-white/10 bg-black/20 p-1"},React.createElement(da,{id:"DAY",label:"Day"}),React.createElement(da,{id:"WEEK",label:"Week"}),React.createElement(da,{id:"MONTH",label:"Month"}),React.createElement(da,{id:"AGENDA",label:"Agenda"})),React.createElement("button",{onClick:Dt,className:"px-3 py-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"Today"),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{onClick:()=>b(-1),className:"px-3 py-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"\u2039"),React.createElement("button",{onClick:()=>b(1),className:"px-3 py-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"\u203A")),React.createElement("button",{onClick:()=>ro(),className:"px-4 py-2 rounded-2xl bg-white/15 hover:bg-white/20 border border-white/20 text-white text-xs font-semibold"},"+ New Session"),React.createElement("button",{onClick:()=>yi(),className:"px-4 py-2 rounded-2xl bg-black/25 hover:bg-white/10 border border-white/10 text-white/80 text-xs font-semibold",title:"Block time (unavailable)"},"Block Time"))),React.createElement("div",{className:"mt-3 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},React.createElement("div",{className:"text-sm text-white/80"},ie),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"relative"},React.createElement("input",{value:Ye,onChange:p=>Tt(p.target.value),placeholder:"Search client, service, location\u2026",className:"w-64 max-w-[70vw] px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none focus:border-white/20"})),React.createElement("select",{value:I,onChange:p=>te(p.target.value),className:"px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},React.createElement("option",{value:"ALL"},"All services"),ye.map(p=>React.createElement("option",{key:p,value:p},p))),React.createElement("div",{className:"flex items-center gap-1"},O.map(p=>React.createElement(ii,{key:p.id,active:_t===p.id,onClick:()=>P(p.id)},p.label)))))),React.createElement("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-[320px_1fr_360px] gap-4"},React.createElement("div",{className:"space-y-4"},React.createElement(We,{value:Ct,onPick:p=>Jt(k(p))}),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-xs uppercase tracking-wider text-white/60 mb-2"},"Quick actions"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{onClick:()=>ro({service:"Assessment",durationMin:60}),className:"p-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"New Assessment"),React.createElement("button",{onClick:()=>ro({service:"Online Coaching",location:"Zoom",durationMin:45,price:180}),className:"p-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"Quick Zoom")),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Tip: click an empty time slot in Week/Day view to quick-book at that time.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-xs uppercase tracking-wider text-white/60 mb-2"},"Utilization (stub)"),React.createElement("div",{className:"text-sm text-white/80"},Pt.length," sessions match filters"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Future: trainer availability blocks, room/equipment capacity, class caps."))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 overflow-hidden"},Re==="AGENDA"?React.createElement("div",{className:"p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Agenda"),React.createElement("div",{className:"text-xs text-white/60"},"Sorted by time")),React.createElement("div",{className:"mt-3 space-y-2"},Pt.length?Pt.map(p=>React.createElement(jt,{key:p.id,s:p})):React.createElement("div",{className:"p-6 rounded-2xl border border-white/10 bg-black/20 text-white/70 text-sm"},"No sessions match your filters."))):Re==="MONTH"?React.createElement("div",{className:"p-4"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Month view"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"This prototype uses the mini-month picker (left) as the primary month navigation. Select a date there, then use Week/Day to book into time slots."),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/15 p-4 text-white/70 text-sm"},"Coming next: full month grid with session chips + drag/drop.")):Re==="DAY"?React.createElement("div",{className:"p-0"},React.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10"},React.createElement("div",{className:"text-sm font-semibold text-white"},ke(Ct)),React.createElement("button",{onClick:()=>ro({start:he(k(Ct),9*60)}),className:"px-3 py-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"+ Book")),React.createElement("div",{className:"relative",style:{height:17*52+24}},Kt.map(p=>React.createElement("div",{key:p,className:"absolute left-0 right-0",style:{top:(p-6)*52}},React.createElement("div",{className:"flex"},React.createElement("div",{className:"w-16 text-[11px] text-white/45 px-3 py-1"},F(p),":00"),React.createElement("div",{className:"flex-1 border-t border-white/10"})),React.createElement("button",{onClick:()=>ae(Ct,p),className:"absolute left-16 right-3 h-[48px] -mt-[24px] rounded-2xl border border-transparent hover:border-white/10 hover:bg-white/5",style:{top:0},"aria-label":"Quick book"}))),React.createElement("div",{className:"absolute left-16 right-3 top-0 bottom-0"},ra(Ct).map(p=>{var R=new Date(p.startISO),Ve=Ti(R),pa=Ee(p.durationMin||60),qt=p.status==="COMPLETED"?"bg-emerald-500/15 border-emerald-500/25":p.status==="CANCELLED"?"bg-red-500/15 border-red-500/25":p.status==="NO_SHOW"?"bg-amber-500/15 border-amber-500/25":"bg-sky-500/15 border-sky-500/25";return React.createElement("button",{key:p.id,onClick:()=>Ut(p.id),className:"absolute left-0 right-0 rounded-2xl border p-3 text-left hover:bg-white/5 "+qt,style:{top:Ve+12,height:pa}},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},p.clientName),React.createElement("div",{className:"text-[11px] text-white/70 whitespace-nowrap"},F(R.getHours()),":",F(R.getMinutes()))),React.createElement("div",{className:"text-xs text-white/70 truncate"},p.service," \u2022 ",p.location))})))):React.createElement("div",{className:"p-0"},React.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Week schedule"),React.createElement("div",{className:"text-xs text-white/60"},"Click empty slots to quick-book")),React.createElement("div",{className:"grid grid-cols-[64px_repeat(7,1fr)]"},React.createElement("div",{className:"border-r border-white/10 bg-black/15"}),Yt.map((p,R)=>React.createElement("div",{key:R,className:"px-2 py-2 border-r border-white/10 bg-black/15"},React.createElement("div",{className:"text-xs text-white/70"},p.toLocaleDateString(void 0,{weekday:"short"})),React.createElement("div",{className:"text-sm font-semibold text-white"},p.getDate()))),React.createElement("div",{className:"border-r border-white/10 bg-black/10"},Kt.map(p=>React.createElement("div",{key:p,className:"h-[52px] px-2 flex items-start pt-2 text-[11px] text-white/45 border-t border-white/10"},F(p),":00"))),Yt.map((p,R)=>React.createElement("div",{key:R,className:"relative border-r border-white/10 bg-black/5",style:{height:Kt.length*52}},Kt.map(Ve=>React.createElement("button",{key:Ve,onClick:()=>ae(p,Ve),className:"absolute left-0 right-0 border-t border-white/10 hover:bg-white/5",style:{top:(Ve-6)*52,height:52},"aria-label":"Quick book"})),Na.filter(Ve=>{var pa=new Date(Ve.startISO);return pa.getFullYear()===p.getFullYear()&&pa.getMonth()===p.getMonth()&&pa.getDate()===p.getDate()}).map(Ve=>{var pa=new Date(Ve.startISO),qt=Ti(pa),ka=Ee(Ve.durationMin||60),pi=Ve.status==="COMPLETED"?"bg-emerald-500/15 border-emerald-500/25":Ve.status==="CANCELLED"?"bg-red-500/15 border-red-500/25":Ve.status==="NO_SHOW"?"bg-amber-500/15 border-amber-500/25":"bg-sky-500/15 border-sky-500/25";return React.createElement("button",{key:Ve.id,onClick:cs=>{cs.preventDefault(),cs.stopPropagation(),Ut(Ve.id)},className:"absolute left-2 right-2 rounded-2xl border p-2 text-left hover:bg-white/5 "+pi,style:{top:qt+12,height:ka}},React.createElement("div",{className:"text-xs font-semibold text-white truncate"},Ve.clientName),React.createElement("div",{className:"text-[11px] text-white/70 truncate"},Ve.service),React.createElement("div",{className:"text-[10px] text-white/60 mt-1"},F(pa.getHours()),":",F(pa.getMinutes())))})))))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Session details"),ce?React.createElement("button",{onClick:()=>Ut(null),className:"text-xs text-white/60 hover:text-white/80"},"Close"):null),ce?React.createElement("div",{className:"mt-3 space-y-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/15 p-3"},React.createElement("div",{className:"text-lg font-semibold text-white"},ce.clientName),React.createElement("div",{className:"text-xs text-white/70 mt-1"},ce.service," \u2022 ",ce.location),React.createElement("div",{className:"text-xs text-white/60 mt-2"},new Date(ce.startISO).toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," \u2022 ",ce.durationMin," min")),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/15 p-3"},React.createElement("div",{className:"text-[11px] text-white/50 uppercase"},"Status"),React.createElement("div",{className:"text-sm text-white/85 mt-1"},ce.status)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/15 p-3"},React.createElement("div",{className:"text-[11px] text-white/50 uppercase"},"Price"),React.createElement("div",{className:"text-sm text-white/85 mt-1"},ce.currency," ",ce.price))),ce.notes?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/15 p-3"},React.createElement("div",{className:"text-[11px] text-white/50 uppercase"},"Notes"),React.createElement("div",{className:"text-sm text-white/80 mt-1 whitespace-pre-wrap"},ce.notes)):null,React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{onClick:()=>n(ce),className:"px-3 py-2 rounded-2xl border border-white/10 hover:bg-white/10 text-white/80 text-xs"},"Edit"),React.createElement("button",{onClick:()=>be(ce.id),className:"px-3 py-2 rounded-2xl border border-red-500/30 bg-red-500/10 hover:bg-red-500/15 text-red-200 text-xs"},"Delete")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/10 p-3 text-[11px] text-white/55"},"Next: payments/invoices, automated reminders, recurring bookings, staff/room availability, client self-booking links.")):React.createElement("div",{className:"mt-3 p-4 rounded-2xl border border-white/10 bg-black/15 text-white/70 text-sm"},"Select a session from the calendar/agenda to see details here.")),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-xs uppercase tracking-wider text-white/60"},"Operations"),React.createElement("div",{className:"mt-2 text-sm text-white/80"},"Use this page for ",React.createElement("span",{className:"text-white font-semibold"},"booking")," only. Keep \u201CHub\u201D as tools; keep \u201CTriage Hub\u201D for alerts.")))),Vt&&v?React.createElement("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:()=>{Fe(!1),Te(null)}}),React.createElement("div",{className:"relative w-full max-w-2xl rounded-3xl border border-white/10 bg-[#0b0f16] shadow-2xl"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},v.id?"Edit session":"New session"),React.createElement("button",{onClick:()=>{Fe(!1),Te(null)},className:"text-xs text-white/60 hover:text-white/80"},"Close")),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Template"),React.createElement("select",{value:v.templateId||"",onChange:p=>{var R=p.target.value,Ve=(le||[]).find(pa=>pa.id===R);Te(pa=>pa&&(Ve?{...pa,templateId:R,service:Ve.service,durationMin:Ve.durationMin,price:Ve.price,location:Ve.location,capacity:Ve.capacity}:{...pa,templateId:R}))},className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},React.createElement("option",{value:""},"Custom"),(le||[]).map(p=>React.createElement("option",{key:p.id,value:p.id},p.name)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Status"),React.createElement("select",{value:v.status||"BOOKED",onChange:p=>Te(R=>({...R,status:p.target.value})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},React.createElement("option",{value:"BOOKED"},"Booked"),React.createElement("option",{value:"COMPLETED"},"Completed"),React.createElement("option",{value:"CANCELLED"},"Cancelled"),React.createElement("option",{value:"NO_SHOW"},"No-show")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Client"),React.createElement("input",{value:v.clientName||"",onChange:p=>Te(R=>({...R,clientName:p.target.value})),placeholder:"Client name",className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none focus:border-white/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Service"),React.createElement("select",{value:v.service||"PT Session",onChange:p=>Te(R=>({...R,service:p.target.value})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},(ye||[]).map(p=>React.createElement("option",{key:p,value:p},p)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Location"),React.createElement("input",{value:v.location||"",onChange:p=>Te(R=>({...R,location:p.target.value})),placeholder:"In-person / Zoom / Studio",className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none focus:border-white/20"})),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Price"),React.createElement("input",{type:"number",value:Number(v.price||0),onChange:p=>Te(R=>({...R,price:Number(p.target.value||0)})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Currency"),React.createElement("input",{value:v.currency||"AED",onChange:p=>Te(R=>({...R,currency:p.target.value})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"})))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Date"),(()=>{var p=new Date(v.startISO),R=`${p.getFullYear()}-${F(p.getMonth()+1)}-${F(p.getDate())}`;return React.createElement("input",{type:"date",value:R,onChange:Ve=>{var[pa,qt,ka]=(Ve.target.value||"").split("-").map(Gi=>parseInt(Gi,10)),pi=new Date(v.startISO),cs=new Date(pa||pi.getFullYear(),qt?qt-1:pi.getMonth(),ka||pi.getDate(),pi.getHours(),pi.getMinutes(),0,0);Te(Gi=>({...Gi,startISO:cs.toISOString()}))},className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"})})()),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Start"),(()=>{var p=new Date(v.startISO),R=`${F(p.getHours())}:${F(p.getMinutes())}`;return React.createElement("input",{type:"time",value:R,onChange:Ve=>{var[pa,qt]=(Ve.target.value||"").split(":").map(cs=>parseInt(cs,10)),ka=new Date(v.startISO),pi=new Date(ka.getFullYear(),ka.getMonth(),ka.getDate(),pa||0,qt||0,0,0);Te(cs=>({...cs,startISO:pi.toISOString()}))},className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"})})()),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Duration"),React.createElement("select",{value:v.durationMin||60,onChange:p=>Te(R=>({...R,durationMin:parseInt(p.target.value,10)})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},[30,45,50,60,75,90,120].map(p=>React.createElement("option",{key:p,value:p},p," min"))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Capacity"),React.createElement("input",{type:"number",min:"1",value:v.capacity||1,onChange:p=>Te(R=>({...R,capacity:Math.max(1,parseInt(p.target.value||"1",10)||1)})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"}),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},"Use >1 for group sessions.")),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Recurring"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("select",{value:((Ot=v.recurrence)==null?void 0:Ot.freq)||"NONE",onChange:p=>Te(R=>({...R,recurrence:{...R.recurrence||{},freq:p.target.value}})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"},React.createElement("option",{value:"NONE"},"No repeat"),React.createElement("option",{value:"WEEKLY"},"Weekly"),React.createElement("option",{value:"BIWEEKLY"},"Bi-weekly"),React.createElement("option",{value:"MONTHLY"},"Monthly")),React.createElement("select",{value:((xe=v.recurrence)==null?void 0:xe.count)||8,onChange:p=>Te(R=>({...R,recurrence:{...R.recurrence||{},count:parseInt(p.target.value,10)}})),className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none",title:"How many occurrences to create"},[4,6,8,12,16].map(p=>React.createElement("option",{key:p,value:p},p," occurrences")))),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},"Recurring creates a series when you save a new session."))),(v.capacity||1)>1?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-xs font-semibold text-white/80"},"Attendance"),React.createElement("div",{className:"text-[11px] text-white/50"},(v.attendees||[]).length,"/",v.capacity," booked")),React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("input",{placeholder:"Add attendee name",className:"flex-1 px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none",value:v.__newAttendee||"",onChange:p=>Te(R=>({...R,__newAttendee:p.target.value}))}),React.createElement("button",{className:"px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 border border-white/10 text-white/80 text-xs",onClick:p=>{p.preventDefault(),p.stopPropagation();var R=String(v.__newAttendee||"").trim();R&&Te(Ve=>{var pa=Array.isArray(Ve.attendees)?[...Ve.attendees]:[];return pa.length>=(Ve.capacity||1)?{...Ve,__newAttendee:""}:(pa.push({name:R,status:"BOOKED"}),{...Ve,attendees:pa,__newAttendee:""})})}},"Add")),React.createElement("div",{className:"mt-2 space-y-1"},(v.attendees||[]).map((p,R)=>React.createElement("div",{key:R,className:"flex items-center justify-between gap-2 px-2 py-1 rounded-xl bg-white/5 border border-white/10"},React.createElement("div",{className:"text-xs text-white/80 truncate"},p.name||p),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("select",{value:p.status||"BOOKED",onChange:Ve=>{var pa=Ve.target.value;Te(qt=>{var ka=[...qt.attendees||[]];return ka[R]={...ka[R]||{},status:pa},{...qt,attendees:ka}})},className:"px-2 py-1 rounded-xl bg-black/25 border border-white/10 text-white/70 text-[11px] outline-none"},React.createElement("option",{value:"BOOKED"},"Booked"),React.createElement("option",{value:"ATTENDED"},"Attended"),React.createElement("option",{value:"NO_SHOW"},"No-show"),React.createElement("option",{value:"CANCELLED"},"Cancelled")),React.createElement("button",{className:"text-[11px] text-white/50 hover:text-white/80",onClick:Ve=>{Ve.preventDefault(),Ve.stopPropagation(),Te(pa=>{var qt=[...pa.attendees||[]];return qt.splice(R,1),{...pa,attendees:qt}})}},"Remove")))))):null,React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Notes"),React.createElement("textarea",{value:v.notes||"",onChange:p=>Te(R=>({...R,notes:p.target.value})),rows:3,className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none focus:border-white/20",placeholder:"Session focus, injuries, prep\u2026"})),React.createElement("label",{className:"flex items-center gap-2 text-xs text-white/70"},React.createElement("input",{type:"checkbox",checked:!!v.reminder,onChange:p=>Te(R=>({...R,reminder:p.target.checked}))}),"Send reminder"),as(v.startISO,v.durationMin)?React.createElement("div",{className:"text-xs text-amber-200 bg-amber-500/10 border border-amber-500/20 rounded-2xl px-3 py-2"},"This slot overlaps a blocked time. Choose another slot or remove the block."):null),React.createElement("div",{className:"p-4 border-t border-white/10 flex items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},v.id?React.createElement("button",{onClick:()=>be(v.id),className:"px-3 py-2 rounded-2xl bg-red-500/15 hover:bg-red-500/20 border border-red-500/20 text-red-200 text-xs"},"Delete"):null,v.seriesId?React.createElement("span",{className:"text-[11px] px-2 py-1 rounded-full border border-white/10 text-white/60"},"Series: ",String(v.seriesId).slice(-6)):null),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>{Fe(!1),Te(null)},className:"px-3 py-2 rounded-2xl bg-black/25 hover:bg-white/10 border border-white/10 text-white/70 text-xs"},"Cancel"),React.createElement("button",{onClick:y,className:"px-4 py-2 rounded-2xl bg-white/15 hover:bg-white/20 border border-white/20 text-white text-xs font-semibold"},"Save"))))):null,St&&Xe?React.createElement("div",{className:"fixed inset-0 z-[998] flex items-center justify-center p-4"},React.createElement("div",{className:"absolute inset-0 bg-black/70",onClick:()=>{za(!1),dt(null)}}),React.createElement("div",{className:"relative w-full max-w-xl rounded-3xl border border-white/10 bg-[#0b0f16] shadow-2xl"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold text-white"},Xe.id?"Edit blocked time":"Block time"),React.createElement("button",{onClick:()=>{za(!1),dt(null)},className:"text-xs text-white/60 hover:text-white/80"},"Close")),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Start"),React.createElement("input",{type:"datetime-local",value:(()=>{var p=new Date(Xe.startISO);return`${p.getFullYear()}-${F(p.getMonth()+1)}-${F(p.getDate())}T${F(p.getHours())}:${F(p.getMinutes())}`})(),onChange:p=>{var R=new Date(p.target.value);dt(Ve=>({...Ve,startISO:R.toISOString()}))},className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"End"),React.createElement("input",{type:"datetime-local",value:(()=>{var p=new Date(Xe.endISO);return`${p.getFullYear()}-${F(p.getMonth()+1)}-${F(p.getDate())}T${F(p.getHours())}:${F(p.getMinutes())}`})(),onChange:p=>{var R=new Date(p.target.value);dt(Ve=>({...Ve,endISO:R.toISOString()}))},className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"}))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/50 uppercase mb-1"},"Reason"),React.createElement("input",{value:Xe.reason||"",onChange:p=>dt(R=>({...R,reason:p.target.value})),placeholder:"Unavailable / PTO / Travel / Admin\u2026",className:"w-full px-3 py-2 rounded-2xl bg-black/25 border border-white/10 text-white/80 text-xs outline-none"}))),React.createElement("div",{className:"p-4 border-t border-white/10 flex items-center justify-between gap-2"},React.createElement("div",null,Xe.id?React.createElement("button",{onClick:()=>os(Xe.id),className:"px-3 py-2 rounded-2xl bg-red-500/15 hover:bg-red-500/20 border border-red-500/20 text-red-200 text-xs"},"Remove"):null),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>{za(!1),dt(null)},className:"px-3 py-2 rounded-2xl bg-black/25 hover:bg-white/10 border border-white/10 text-white/70 text-xs"},"Cancel"),React.createElement("button",{onClick:zi,className:"px-4 py-2 rounded-2xl bg-white/15 hover:bg-white/20 border border-white/20 text-white text-xs font-semibold"},"Save Block"))))):null)},cc=()=>{var hr,Xr,Qr,Zr,Pl,Ml,Fl;var o="fof_td_planbuilder_v1",d="fof_td_planassign_v1",m=React.useMemo(()=>[{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"},{key:"sun",label:"Sun"}],[]),E=ea,g=()=>{var l={};return m.forEach(A=>{l[A.key]=[]}),l},f="fof_td_planDraft_v1";var F="fof_td_clientPlans_v1",D=(()=>{var l=new Map,A="__fof_test__",Ze=_s=>{try{return _s.setItem(A,"1"),_s.removeItem(A),!0}catch(en){return!1}},Ue=(()=>{try{return Ze(window.localStorage)}catch(_s){return!1}})(),It=_s=>_s&&(_s.id||_s.clientId||_s.uid||_s.email||_s.name)?_s.id||_s.clientId||_s.uid||_s.email||_s.name:null,va=(()=>{try{return Ze(window.sessionStorage)}catch(_s){return!1}})();return{get:_s=>{try{if(Ue){var en=window.localStorage.getItem(_s);if(en!=null)return en}}catch(en){}try{if(va){var en=window.sessionStorage.getItem(_s);if(en!=null)return en}}catch(en){}return l.has(_s)?l.get(_s):null},set:(_s,en)=>{var dr=!1;try{Ue&&(window.localStorage.setItem(_s,en),dr=!0)}catch(el){}try{va&&(window.sessionStorage.setItem(_s,en),dr=!0)}catch(el){}dr||l.set(_s,en);try{((Ue?window.localStorage.getItem(_s):null)||(va?window.sessionStorage.getItem(_s):null))==null&&dr&&l.set(_s,en)}catch(el){}return dr},remove:_s=>{try{Ue&&window.localStorage.removeItem(_s)}catch(en){}try{va&&window.sessionStorage.removeItem(_s)}catch(en){}l.delete(_s)},lsOk:Ue,ssOk:va}})();var[k,T]=React.useState(()=>{try{return D.get("fof_td_plan_builder_mode")||"TEMPLATE"}catch(l){return"TEMPLATE"}}),he=l=>{try{D.set("fof_td_plan_builder_mode",String(l||""))}catch(A){}T(l)},[oe,ke]=React.useState(((hr=E[0])==null?void 0:hr.id)||""),[Re,Me]=React.useState(()=>g()),[Et,ya]=React.useState("Week Plan"),[Ct,Jt]=React.useState({startDate:"",timezone:"",defaultTime:"18:00"}),[Ye,Tt]=React.useState({enabled:!0,morning:!0,missedByEvening:!0,lowCapacityAutoSwap:!1}),_t=()=>({planId:`pd_${Date.now()}`,name:"Program Draft (V2)",meta:{goal:"FITNESS",level:"BEGINNER",tags:[]},weeks:[{weekIndex:0,days:m.map((l,A)=>({dayIndex:A,dayKey:l.key,label:l.label,status:"TRAIN",sessions:[]}))}],updatedAt:new Date().toISOString(),schemaVersion:1}),[P,I]=React.useState(()=>{try{var l=D.get(f);if(!l)return _t();var A=JSON.parse(l);if(A&&Array.isArray(A.weeks))return A}catch(l){}return _t()}),[te,Ce]=React.useState(0),[C,ye]=React.useState(0),[le,O]=React.useState(!1),[qe,Pt]=React.useState(!1),[Za,Ma]=React.useState({}),[$a,Yt]=React.useState({name:"",sets:3,reps:10,load:0,rest:90,notes:""}),it=React.useRef(null),Ut=React.useRef(null),[ce,Vt]=React.useState(null),[Fe,v]=React.useState(null),[Te,Se]=React.useState(null),[yt,St]=React.useState(null),za=l=>{try{return JSON.parse(JSON.stringify(l))}catch(A){return l}};React.useEffect(()=>{try{var l={...P||{},updatedAt:new Date().toISOString(),schemaVersion:1};D.set(f,JSON.stringify(l))}catch(l){}},[P]),React.useEffect(()=>{var l=()=>{try{var A={...P||{},updatedAt:new Date().toISOString(),schemaVersion:1};D.set(f,JSON.stringify(A))}catch(A){}};return window.addEventListener("beforeunload",l),()=>window.removeEventListener("beforeunload",l)},[P]);var Xe=()=>(P.weeks||[])[te]||(P.weeks||[])[0],dt=()=>{var l=Xe(),A=l&&l.days?l.days:[];return A[C]||A[0]||null},Qt=l=>{I(A=>{var Ze={...A||{}},Ue=Array.isArray(Ze.weeks)?Ze.weeks.slice():[],It={...Ue[te]||Ue[0]||{weekIndex:te,days:[]}},va=Array.isArray(It.days)?It.days.slice():[],ji=va[C]||va[0]||null;if(!ji)return A;var ao=typeof l=="function"?l(ji):l;return va[C]=ao,It.days=va,Ue[te]=It,Ze.weeks=Ue,Ze})},yi=l=>{Qt(A=>({...A,status:l}))},zi=()=>{try{var l=dt();if(!l)return;var A={status:l.status||"TRAIN",sessions:za(l.sessions||[])};St(A),openToast("Copied",`Copied ${l.label||"day"} (${(l.sessions||[]).length} sessions).`)}catch(l){}},os=(l=C)=>{try{if(!yt){openToast("Nothing to paste","Copy a day first.");return}I(A=>{var Ze=za(A||{}),Ue=Array.isArray(Ze.weeks)?Ze.weeks:[],It=Ue[te]||Ue[0];if(!It||!Array.isArray(It.days))return A;var va=It.days.slice(),ji=va[l];return ji?(va[l]={...ji,status:yt.status||ji.status||"TRAIN",sessions:za(yt.sessions||[])},Ue[te]={...It,days:va},Ze.weeks=Ue,Ze):A}),openToast("Pasted","Day overwritten from clipboard.")}catch(A){}},as=()=>{try{var l=C,A=Math.min(l+1,6);if(A===l){openToast("Duplicate","You are already on the last day.");return}var Ze=dt();if(!Ze)return;var Ue={status:Ze.status||"TRAIN",sessions:za(Ze.sessions||[])};St(Ue),ye(A),setTimeout(()=>{try{os(A)}catch(It){}},0),openToast("Duplicated",`Duplicated to ${m[A]&&m[A].label?m[A].label:"next day"}.`)}catch(l){}},ro=()=>{try{I(A=>{var Ze=JSON.parse(JSON.stringify(A||{})),Ue=Array.isArray(Ze.weeks)?Ze.weeks:[],It=Ue[te]||Ue[0];if(!It)return A;var va=JSON.parse(JSON.stringify(It)),ji=Ue.length;return va.weekIndex=ji,Ue.push(va),Ze.weeks=Ue,Ze.updatedAt=new Date().toISOString(),Ze.schemaVersion=2,Ze});var l=(P.weeks||[]).length;Ce(l),ye(0);try{openToast("Week duplicated",`Duplicated Week ${te+1} \u2192 Week ${l+1}.`)}catch(A){}}catch(l){}},y=()=>{try{if((P.weeks||[]).length<=1){try{openToast("Cannot delete","A program must have at least 1 week.")}catch(Ze){}return}if(!window.confirm(`Delete Week ${te+1}? This cannot be undone.`))return;I(Ze=>{var Ue=JSON.parse(JSON.stringify(Ze||{})),It=Array.isArray(Ue.weeks)?Ue.weeks:[];return It.splice(te,1),It.forEach((va,ji)=>{va.weekIndex=ji}),Ue.weeks=It,Ue.updatedAt=new Date().toISOString(),Ue.schemaVersion=2,Ue}),Ce(Math.max(0,te-1)),ye(0)}catch(l){}},be=l=>{I(A=>{var Ze=JSON.parse(JSON.stringify(A||{})),Ue=Array.isArray(Ze.weeks)?Ze.weeks:[],It=Ue[te]||Ue[0];return It?((It.days||[]).forEach(va=>{(va.sessions||[]).forEach(ji=>{(ji.blocks||[]).forEach(ao=>{(ao.exercises||[]).forEach(Qs=>{try{l(Qs)}catch(_s){}})})})}),It._weekFlags={...It._weekFlags||{},touchedAt:new Date().toISOString()},Ue[te]=It,Ze.weeks=Ue,Ze.updatedAt=new Date().toISOString(),Ze.schemaVersion=2,Ze):A})},ie=()=>{be(l=>{l.sets=Math.max(1,Number(l.sets||0)+1)});try{openToast("Progression","Applied +1 set to all exercises in this week.")}catch(l){}},Dt=()=>{be(l=>{l.reps=Math.max(1,Number(l.reps||0)+2)});try{openToast("Progression","Applied +2 reps to all exercises in this week.")}catch(l){}},b=()=>{try{be(l=>{var A=Number(l.sets||0),Ze=Number(l.reps||0);!Number.isNaN(A)&&A>0&&(l.sets=Math.max(1,Math.round(A*.8))),!Number.isNaN(Ze)&&Ze>0&&(l.reps=Math.max(1,Math.round(Ze*.8)));try{var Ue=(l.load||"").toString().trim(),It=parseFloat(Ue);Ue!==""&&!Number.isNaN(It)&&isFinite(It)&&(l.load=String(Math.max(0,Math.round(It*.9*10)/10)))}catch(Ue){}}),I(l=>{var A=JSON.parse(JSON.stringify(l||{})),Ze=Array.isArray(A.weeks)?A.weeks:[],Ue=Ze[te]||Ze[0];return Ue?(Ue._weekFlags={...Ue._weekFlags||{},deload:!0,deloadAt:new Date().toISOString()},Ze[te]=Ue,A.weeks=Ze,A.updatedAt=new Date().toISOString(),A.schemaVersion=2,A):l});try{openToast("Deload","Applied \u221220% volume to this week and marked it as DELOAD.")}catch(l){}}catch(l){}},We=()=>{var l=`sess_${Date.now()}_${Math.random().toString(16).slice(2,6)}`;Qt(A=>({...A,sessions:[...A.sessions||[],{sessionId:l,name:`Session ${(A.sessions||[]).length+1}`,blocks:[{blockId:`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,blockType:"Strength",exercises:[]}]}]}))},da=l=>{Qt(A=>({...A,sessions:(A.sessions||[]).filter(Ze=>Ze.sessionId!==l)}))},ii=(l,A)=>{Qt(Ze=>({...Ze,sessions:(Ze.sessions||[]).map(Ue=>Ue.sessionId===l?{...Ue,name:A}:Ue)}))},jt=(l,A="single")=>{var Ze=A||"single",Ue=Ze==="single"?1:3;Qt(It=>({...It,sessions:(It.sessions||[]).map(va=>va.sessionId!==l?va:{...va,blocks:[...va.blocks||[],{blockId:`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,blockType:"Strength",blockKind:Ze,rounds:Ue,exercises:[]}]})}))},Kt=(l,A)=>{Qt(Ze=>({...Ze,sessions:(Ze.sessions||[]).map(Ue=>Ue.sessionId!==l?Ue:{...Ue,blocks:(Ue.blocks||[]).filter(It=>It.blockId!==A)})}))},Na=(l,A,Ze)=>{Qt(Ue=>({...Ue,sessions:(Ue.sessions||[]).map(It=>It.sessionId!==l?It:{...It,blocks:(It.blocks||[]).map(va=>va.blockId===A?{...va,blockType:Ze}:va)})}))},ra=(l,A,Ze)=>{Qt(Ue=>({...Ue,sessions:(Ue.sessions||[]).map(It=>It.sessionId!==l?It:{...It,blocks:(It.blocks||[]).map(va=>{if(va.blockId!==A)return va;var ji=Ze||"single",ao=ji==="single"?1:Number(va.rounds||3)||3;return{...va,blockKind:ji,rounds:ao}})})}))},Ti=(l,A,Ze)=>{var Ue=Math.max(1,Number(Ze||1)||1);Qt(It=>({...It,sessions:(It.sessions||[]).map(va=>va.sessionId!==l?va:{...va,blocks:(va.blocks||[]).map(ji=>ji.blockId===A?{...ji,rounds:Ue}:ji)})}))},Ee=(l,A,Ze)=>{var It={exerciseId:Ze.exerciseId||Ze.id||`ex_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,name:Ze.name||Ze.title||"Exercise",sets:Number(Ze.sets||3),reps:Number(Ze.reps||10),rest:Number(Ze.rest||90),load:Ze.load==null||Ze.load===""?0:Number(Ze.load),notes:Ze.notes||""};Qt(va=>({...va,sessions:(va.sessions||[]).map(ji=>ji.sessionId!==l?ji:{...ji,blocks:(ji.blocks||[]).map(ao=>ao.blockId!==A?ao:{...ao,exercises:[...ao.exercises||[],It]})})}))},ae=(l,A,Ze)=>{Qt(Ue=>({...Ue,sessions:(Ue.sessions||[]).map(It=>It.sessionId!==l?It:{...It,blocks:(It.blocks||[]).map(va=>va.blockId!==A?va:{...va,exercises:(va.exercises||[]).filter(ji=>ji.exerciseId!==Ze)})})}))},Ot=(l,A,Ze,Ue)=>{Qt(It=>({...It,sessions:(It.sessions||[]).map(va=>va.sessionId!==l?va:{...va,blocks:(va.blocks||[]).map(ji=>{if(ji.blockId!==A)return ji;var ao=(ji.exercises||[]).slice(),Qs=ao.findIndex(dr=>dr.exerciseId===Ze);if(Qs<0)return ji;var _s=Qs+Ue;if(_s<0||_s>=ao.length)return ji;var en=ao[Qs];return ao[Qs]=ao[_s],ao[_s]=en,{...ji,exercises:ao}})})}))},xe=(l,A,Ze)=>{var Ue=Array.isArray(l)?l.slice():[],It=Number(A),va=Number(Ze);if(!Number.isFinite(It)||!Number.isFinite(va)||It===va||It<0||It>=Ue.length||va<0||va>=Ue.length)return Ue;var[ji]=Ue.splice(It,1);return Ue.splice(va,0,ji),Ue},p=(l,A,Ze,Ue)=>{Qt(It=>({...It,sessions:(It.sessions||[]).map(va=>va.sessionId!==l?va:{...va,blocks:(va.blocks||[]).map(ji=>ji.blockId!==A?ji:{...ji,exercises:xe(ji.exercises||[],Ze,Ue)})})}))},R=(l,A,Ze)=>{Qt(Ue=>({...Ue,sessions:(Ue.sessions||[]).map(It=>It.sessionId!==l?It:{...It,blocks:xe(It.blocks||[],A,Ze)})}))},Ve=()=>{var l=ce;if(!(!l||!l.kind||!l.sessionId)){if(l.kind==="EX"){Qt(A=>({...A,sessions:(A.sessions||[]).map(Ze=>Ze.sessionId!==l.sessionId?Ze:{...Ze,blocks:(Ze.blocks||[]).map(Ue=>{if(Ue.blockId!==l.blockId)return Ue;var It=(Ue.exercises||[]).slice(),va=It.findIndex(Qs=>Qs.exerciseId===l.exerciseId);if(va<0)return Ue;var ao={...It[va]||{},exerciseId:`ex_${Date.now()}_${Math.random().toString(16).slice(2,6)}`};return It.splice(va+1,0,ao),{...Ue,exercises:It}})})}));return}if(l.kind==="BLOCK"){Qt(A=>({...A,sessions:(A.sessions||[]).map(Ze=>{if(Ze.sessionId!==l.sessionId)return Ze;var Ue=(Ze.blocks||[]).slice(),It=Ue.findIndex(Qs=>Qs.blockId===l.blockId);if(It<0)return Ze;var va=Ue[It],ji=`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,ao={...va||{},blockId:ji,exercises:(va.exercises||[]).map(Qs=>({...Qs||{},exerciseId:`ex_${Date.now()}_${Math.random().toString(16).slice(2,6)}`}))};return Ue.splice(It+1,0,ao),{...Ze,blocks:Ue}})}));return}}},pa=()=>{var l=ce;if(!(!l||!l.kind||!l.sessionId)){if(l.kind==="EX"){ae(l.sessionId,l.blockId,l.exerciseId),Vt(null);return}if(l.kind==="BLOCK"){Kt(l.sessionId,l.blockId),Vt(null);return}}},qt=l=>{var A=l&&l.tagName?l.tagName.toLowerCase():"";return A==="input"||A==="textarea"||A==="select"||l&&l.isContentEditable};React.useEffect(()=>{var l=A=>{try{var Ze=it&&it.current?it.current:null;if(!Ze)return;var Ue=document.activeElement;if(!(Ze.contains(Ue)||Ue===document.body)||qt(Ue))return;var va=(A.key||"").toLowerCase();if(va==="d"&&!A.metaKey&&!A.ctrlKey&&!A.altKey){A.preventDefault(),Ve();return}if((va==="delete"||va==="backspace")&&!A.metaKey&&!A.ctrlKey){A.preventDefault(),pa();return}if(A.key==="/"&&!A.metaKey&&!A.ctrlKey&&!A.altKey){A.preventDefault(),Pt(!0),setTimeout(()=>{try{Ut.current&&Ut.current.focus()}catch(ji){}},30);return}}catch(Ze){}};return window.addEventListener("keydown",l,!0),()=>window.removeEventListener("keydown",l,!0)},[ce,qe]);var ka=(l,A,Ze,Ue)=>{Qt(It=>({...It,sessions:(It.sessions||[]).map(va=>va.sessionId!==l?va:{...va,blocks:(va.blocks||[]).map(ji=>ji.blockId!==A?ji:{...ji,exercises:(ji.exercises||[]).map(ao=>ao.exerciseId===Ze?{...ao,...Ue||{}}:ao)})})}))},pi=l=>{if(!l)return;var A=`sess_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,Ze=(l.type||"").toLowerCase().includes("mob")?"Mobility":(l.type||"").toLowerCase().includes("cond")?"Conditioning":"Strength",It=(Array.isArray(l.exercises)?l.exercises:[]).map((va,ji)=>({exerciseId:va.exerciseId||va.id||`ex_${Date.now()}_${ji}`,name:va.name||va.title||"Exercise",sets:Number(va.sets||3),reps:Number(va.reps||10),rest:Number(va.rest||90),notes:va.notes||""}));Qt(va=>({...va,sessions:[...va.sessions||[],{sessionId:A,name:l.title||l.name||"Session",blocks:[{blockId:`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,blockType:Ze,exercises:It}],_src:l._src||"template",_tplId:l.id||""}]}));try{Bt("trainer.planbuilder.v1.template.inserted",{sid:A,src:l._src||"template"})}catch(va){}};React.useEffect(()=>{try{var l=localStorage.getItem(o);if(!l)return;var A=JSON.parse(l);A&&A.draftWeek&&Me(A.draftWeek),A&&A.draftName&&ya(A.draftName),A&&A.selectedTemplateId&&ke(A.selectedTemplateId),A&&A.schedule&&Jt(A.schedule),A&&A.nudges&&Tt(A.nudges)}catch(l){}},[]),React.useEffect(()=>{try{localStorage.setItem(o,JSON.stringify({draftName:Et,draftWeek:Re,selectedTemplateId:oe,schedule:Ct,nudges:Ye,programDraftV1:P||null,programDurationWeeks:P&&Array.isArray(P.weeks)?P.weeks.length:1}))}catch(l){}},[Et,Re,oe,Ct,Ye,P]);var cs=l=>{var A=E.find(Ue=>Ue.id===l);if(!A)return;var Ze=g();Object.keys(A.sessions||{}).forEach(Ue=>{Ze[Ue]=(A.sessions[Ue]||[]).map(It=>({...It,_src:"template"}))}),Me(Ze),ya(A.name),he("BUILD");try{Bt("trainer.planbuilder.template.applied",{tplId:l})}catch(Ue){}},Gi=(l,A)=>{Me(Ze=>{var Ue={...Ze},It=Array.isArray(Ue[l])?Ue[l].slice():[];return It.some(va=>va.id===A.id)||It.push({...A}),Ue[l]=It,Ue})},pe=(l,A)=>{Me(Ze=>{var Ue={...Ze};return Ue[l]=(Ue[l]||[]).filter(It=>It.id!==A),Ue})},Sa=(l,A,Ze)=>{if(l===A)return;var Ue=(Re[l]||[]).find(It=>It.id===Ze);Ue&&(pe(l,Ze),Gi(A,Ue))},Ji=(l,A)=>{try{l.dataTransfer.setData("text/plain",JSON.stringify(A)),l.dataTransfer.effectAllowed="move"}catch(Ze){}},wo=(l,A)=>{l.preventDefault();try{var Ze=l.dataTransfer.getData("text/plain");if(!Ze)return;var Ue=JSON.parse(Ze);Ue&&Ue.kind==="POOL_SESSION"?Gi(A,Ue.session):Ue&&Ue.kind==="DAY_SESSION"&&Sa(Ue.fromDay,A,Ue.sessionId);try{Bt("trainer.planbuilder.session.dropped",{dayKey:A})}catch(It){}}catch(Ze){}},Ns=React.useMemo(()=>{var l=E.find(It=>It.id===oe)||E[0],A=[],Ze=new Set;if(Object.values(l&&l.sessions?l.sessions:{}).forEach(It=>{(It||[]).forEach(va=>{Ze.has(va.id)||(Ze.add(va.id),A.push({...va,_src:"template"}))})}),A.length===0)return[{id:"s_strength",title:"Strength Session",type:"Strength",dur:50,intensity:"Moderate"},{id:"s_cardio",title:"Cardio Session",type:"Conditioning",dur:30,intensity:"Easy"},{id:"s_mob",title:"Mobility",type:"Mobility",dur:20,intensity:"Easy"}];var Ue=[];try{var It=localStorage.getItem("fof_td_custom_sessions_v1"),va=It?JSON.parse(It):[];Ue=Array.isArray(va)?va:[]}catch(It){}return(Ue||[]).forEach(It=>{!It||!It.id||Ze.has(It.id)||(Ze.add(It.id),A.push({...It,_src:"custom"}))}),A},[E,oe]),Us=()=>{if(!ct){ta("Select a client","Pick a client from the dropdown on this page (or Client Management). Then tap Assign.");return}var l={id:`asg_${Date.now()}`,clientId:ct.id,clientName:ct.name||ct.email||"Client",planName:Et,week:Re,schedule:Ct,nudges:Ye,createdAt:new Date().toISOString()};try{var A=localStorage.getItem(d),Ze=A?JSON.parse(A):[],It=(Array.isArray(Ze)?Ze:[]).filter(va=>!(va.clientId===l.clientId&&va.planName===l.planName));It.unshift(l),localStorage.setItem(d,JSON.stringify(It.slice(0,50)))}catch(A){}try{Bt("trainer.planbuilder.assigned",{client:l.clientId})}catch(A){}ta("Assigned",`Assigned \u201C${l.planName}\u201D to ${l.clientName}.

Next: schedule + nudges are stored (demo).`)};return React.createElement("div",{className:"h-full flex flex-col"},React.createElement("div",{className:"mb-4 border-b border-titanium-700 pb-3"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-cyan-400/25 to-indigo-500/25 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:"Wand2",size:18,className:"text-cyan-200"})),React.createElement("div",null,React.createElement("h2",{className:"text-[16px] md:text-[18px] font-extrabold text-white tracking-wide"},"Plan Builder"),React.createElement("div",{className:"text-[11px] text-white/55"},"Templates \u2192 build week \u2192 assign + nudges"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{Bt("trainer.exercise_library.open",{from:"planbuilder"})}catch(l){}try{var l=dt&&dt();var A=window.__FOF_QA_TARGET||null;if(!A||!A.sessionId||!A.blockId){var Ze=`sess_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,Ue=`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`;if(l){var va=Array.isArray(l.sessions)&&l.sessions.length>0?l.sessions[0]:null,ji=va&&Array.isArray(va.blocks)?va.blocks[0]:null;va&&ji?A={sessionId:va.sessionId,blockId:ji.blockId}:(Qt(ao=>{var Qs=Array.isArray(ao.sessions)?ao.sessions.slice():[];if(Qs.length===0)Qs.push({sessionId:Ze,name:`Session ${Qs.length+1}`,blocks:[{blockId:Ue,blockType:"Strength",blockKind:"single",rounds:1,exercises:[]}]});else{var _s={...Qs[0]||{}},en=Array.isArray(_s.blocks)?_s.blocks.slice():[];en.length===0&&en.push({blockId:Ue,blockType:"Strength",blockKind:"single",rounds:1,exercises:[]}),_s.blocks=en,_s.sessionId||(_s.sessionId=Ze),_s.name||(_s.name="Session 1"),Qs[0]=_s}return{...ao,sessions:Qs}}),A={sessionId:va&&va.sessionId?va.sessionId:Ze,blockId:ji&&ji.blockId?ji.blockId:Ue})}else{var It=window.__FOF_PB_ENSURE_TARGET?window.__FOF_PB_ENSURE_TARGET():null;It&&It.ok&&(A=It.target)}}A&&A.sessionId&&A.blockId?window.__FOF_PB_SET_TARGET&&window.__FOF_PB_SET_TARGET(A):window.__FOF_PB_ENSURE_TARGET&&window.__FOF_PB_ENSURE_TARGET()}catch(l){}try{u("EXERCISE_LIBRARY")}catch(l){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-[11px] font-extrabold text-white/80 inline-flex items-center gap-2",title:"Open Exercise Library"},React.createElement(_,{name:"Dumbbell",size:14,className:"text-white/70"}),"Exercise Library"),React.createElement("button",{type:"button",onClick:()=>{try{Bt("trainer.planbuilder.ai.open",{from:"planbuilder"})}catch(l){}try{u("PLAN_AI_GENERATOR")}catch(l){}},className:"px-3 py-2 rounded-xl border border-cyan-400/20 bg-cyan-400/10 hover:bg-cyan-400/15 text-[11px] font-extrabold text-cyan-100 inline-flex items-center gap-2",title:"Generate a week plan using AI"},React.createElement(_,{name:"Sparkles",size:14,className:"text-cyan-200"}),"Generate with AI"),React.createElement("button",{type:"button",onClick:()=>{Me(g()),ya("Week Plan"),he("TEMPLATE");try{localStorage.removeItem(o)}catch(l){}try{Bt("trainer.planbuilder.reset",{})}catch(l){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-[11px] font-semibold text-white/85"},"Reset draft"))),React.createElement("div",{className:"mt-3 flex flex-col lg:flex-row lg:items-center gap-3"},React.createElement("div",{className:"inline-flex rounded-2xl border border-white/10 bg-white/[0.03] p-1 gap-1"},[{id:"TEMPLATE",label:"Templates",icon:"LayoutGrid"},{id:"V1_PLAN",label:"Plan V1",icon:"Layers"},{id:"BUILD",label:"Legacy week",icon:"CalendarRange"},{id:"ASSIGN",label:"Assign + nudges",icon:"Send"}].map(l=>React.createElement("button",{type:"button",key:l.id,onClick:()=>he(l.id),className:"px-3 py-1.5 rounded-xl text-[10px] font-semibold flex items-center gap-2 transition "+(k===l.id?"bg-white/10 text-white border border-white/15":"text-white/70 hover:text-white hover:bg-white/[0.05] border border-transparent")},React.createElement(_,{name:l.icon,size:14,className:k===l.id?"text-cyan-200":"text-white/60"}),l.label))),React.createElement("div",{className:"lg:ml-auto flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Client"),React.createElement("select",{value:ct&&ct.id||"",onChange:l=>{var A=l.target.value;if(!A){try{zt(null)}catch(Ue){}return}var Ze=(Array.isArray(Oi)?Oi:[]).find(Ue=>Ue.id===A);if(Ze)try{zt(Ze)}catch(Ue){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-zinc-100"},React.createElement("option",{value:""},"Select client\u2026"),(Array.isArray(Oi)?Oi:[]).map(l=>React.createElement("option",{key:l.id,value:l.id},l.name||l.email||"Client"))),React.createElement("div",{className:"px-3 py-2 rounded-xl border text-[11px] "+(ct?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/[0.03] text-white/60")},ct?`Selected: ${ct.name||ct.email}`:"No client selected")))),React.createElement("div",{className:"hidden"},ui,hi),React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll pr-1"},k==="TEMPLATE"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},E.map(l=>React.createElement("button",{type:"button",key:l.id,onClick:()=>{ke(l.id),cs(l.id)},className:"p-4 rounded-sm border text-left transition-colors "+(oe===l.id?"border-yellow-400 bg-yellow-400/10":"border-titanium-700 bg-titanium-900 hover:bg-titanium-800")},React.createElement("div",{className:"text-white font-bold"},l.name),React.createElement("div",{className:"text-xs text-zinc-500 mt-1"},l.desc),React.createElement("div",{className:"mt-3 text-[10px] text-zinc-400 uppercase font-mono font-bold tracking-wider"},"Tap to apply")))),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900 text-xs text-zinc-400"},"Templates are the fastest \u201CBuild a week plan fast\u201D entry. You can still customize day-by-day after applying.")),k==="V1_PLAN"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Draft (V1) name"),React.createElement("input",{value:(P==null?void 0:P.name)||"Plan Draft (V1)",onChange:l=>I(A=>({...A||{},name:l.target.value})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"}),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Structure lock: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},"Week \u2192 Day \u2192 Session \u2192 Block \u2192 Exercise")),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Storage: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},D.lsOk?"localStorage":D.ssOk?"sessionStorage":"in-memory (no persistence)"))),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{O(!0)},className:"px-4 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase",title:"Insert a saved Session Template into the selected day"},"+ Insert session template"),React.createElement("button",{type:"button",onClick:()=>{Pt(!0)},className:"px-4 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase",title:"Quick add an exercise into a block (manual entry)"},"+ Quick add exercise"),React.createElement("button",{type:"button",onClick:()=>{var l=null;try{if(!ct){ta("Assign plan","Select a client first (Client selector in top bar).");return}var A=Fr(ct),Ue=D.get(F)||window.__FOF_ASSIGN_MEM_RAW||null||window.__FOF_ASSIGN_MEM_RAW||null;var It=[];try{It=Ue?JSON.parse(Ue):[]}catch(ao){It=[]}It=Array.isArray(It)?It:[];var ji=It.filter(ao=>ao&&ao.clientId===A).length+1;l={instanceId:`pi_${Date.now()}`,clientId:A,clientName:ct.name||A,version:ji,planName:P&&P.name?P.name:"Plan Draft (V1)",createdAt:new Date().toISOString(),draftSnapshot:JSON.parse(JSON.stringify(P||{})),schemaVersion:1},It.push(l);try{D.set(F,JSON.stringify(It))}catch(ao){window.__FOF_ASSIGN_MEM_RAW=JSON.stringify(It),window.__FOF_ASSIGN_MEM=It}try{window.dispatchEvent(new CustomEvent("fof_assignments_changed_v1"))}catch(ao){}ta("Assigned",`Assigned to ${ct.name||A} \u2022 v${ji}.

Go to Client Detail \u2192 Assigned Plans (V1) \u2192 Preview.`)}catch(A){try{if(!ct){ta("Assign plan","Select a client first (Client selector in top bar).");return}var Ze=Fr(ct);var Ue=window.__FOF_ASSIGN_MEM_RAW||null,It=[];try{It=Ue?JSON.parse(Ue):[]}catch(Qs){It=[]}It=Array.isArray(It)?It:[];var ji=It.filter(Qs=>Qs&&Qs.clientId===Ze).length+1,ao={instanceId:`pi_${Date.now()}`,clientId:Ze,clientName:ct.name||Ze,version:ji,planName:P&&P.name?P.name:"Plan Draft (V1)",createdAt:new Date().toISOString(),draftSnapshot:JSON.parse(JSON.stringify(P||{})),schemaVersion:1,_storageMode:"memory"};It.push(ao),window.__FOF_ASSIGN_MEM_RAW=JSON.stringify(It),window.__FOF_ASSIGN_MEM=It;try{window.dispatchEvent(new CustomEvent("fof_assignments_changed_v1"))}catch(Qs){}ta("Assigned (memory)",`Storage is blocked here, so this assignment is saved in memory only (it may disappear if you refresh).

Assigned to ${ct.name||Ze} \u2022 v${ji}.
Go to Client Detail \u2192 Assigned Plans (V1) \u2192 Preview.`)}catch(Ze){ta("Assign plan","Failed to assign. Storage is blocked in this environment. If you opened via file://, use a local server (http://localhost) for persistence.")}}},className:"px-4 py-2 rounded-sm border border-lime-400/30 bg-lime-400/10 hover:bg-lime-400/15 text-lime-100 text-xs font-extrabold uppercase",title:"Create an immutable plan instance for the selected client"},"Assign to client"),React.createElement("button",{type:"button",onClick:()=>{try{D.set(f,JSON.stringify(_t()))}catch(l){}I(_t()),Ce(0),ye(0);try{Bt("trainer.planbuilder.v1.reset",{})}catch(l){}},className:"px-4 py-2 rounded-sm border border-red-500/40 bg-red-500/10 hover:bg-red-500/15 text-red-200 text-xs font-bold uppercase"},"Reset V1")))),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Week"),React.createElement("div",{className:"mt-1 flex items-center gap-2"},React.createElement("select",{value:te,onChange:l=>Ce(Number(l.target.value||0)),className:"bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-xs text-zinc-200"},(P.weeks||[]).map((l,A)=>React.createElement("option",{key:A,value:A},"Week ",A+1))),React.createElement("button",{type:"button",onClick:()=>{I(l=>{var A={...l||{}},Ze=Array.isArray(A.weeks)?A.weeks.slice():[],Ue=Ze.length;return Ze.push({weekIndex:Ue,days:m.map((It,va)=>({dayIndex:va,dayKey:It.key,label:It.label,status:"TRAIN",sessions:[]}))}),A.weeks=Ze,A}),Ce((P.weeks||[]).length),ye(0)},className:"px-3 py-2 rounded-sm border border-emerald-500/40 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-200 text-xs font-bold uppercase"},"+ Add week"),React.createElement("button",{type:"button",onClick:ro,className:"px-3 py-2 rounded-sm border border-yellow-400/40 bg-yellow-400/10 hover:bg-yellow-400/15 text-yellow-200 text-xs font-bold uppercase",title:"Duplicate the current week to the next week"},"Duplicate \u2192 Next"),React.createElement("button",{type:"button",onClick:y,disabled:(P.weeks||[]).length<=1,className:"px-3 py-2 rounded-sm border text-xs font-bold uppercase "+((P.weeks||[]).length<=1?"border-white/10 bg-white/[0.02] text-white/30 cursor-not-allowed":"border-red-500/40 bg-red-500/10 hover:bg-red-500/15 text-red-200"),title:"Delete current week"},"Delete week"))),React.createElement("div",{className:"text-[11px] text-zinc-500"},"Selected day: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},dt()&&dt().label?dt().label:"\u2014"),React.createElement("span",{className:"mx-2 text-zinc-700"},"\u2022"),"Sessions: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},dt()&&(dt().sessions||[]).length||0)),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Week actions"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Program meta"),React.createElement("select",{value:P.meta&&P.meta.goal?P.meta.goal:"FITNESS",onChange:l=>I(A=>({...A||{},meta:{...(A==null?void 0:A.meta)||{},goal:String(l.target.value||"FITNESS")}})),className:"bg-black/30 border border-titanium-700 rounded-sm px-2 py-2 text-xs text-zinc-200"},React.createElement("option",{value:"FITNESS"},"Fitness"),React.createElement("option",{value:"STRENGTH"},"Strength"),React.createElement("option",{value:"FAT_LOSS"},"Fat loss"),React.createElement("option",{value:"REHAB"},"Rehab"),React.createElement("option",{value:"HYBRID"},"Hybrid")),React.createElement("select",{value:P.meta&&P.meta.level?P.meta.level:"BEGINNER",onChange:l=>I(A=>({...A||{},meta:{...(A==null?void 0:A.meta)||{},level:String(l.target.value||"BEGINNER")}})),className:"bg-black/30 border border-titanium-700 rounded-sm px-2 py-2 text-xs text-zinc-200"},React.createElement("option",{value:"BEGINNER"},"Beginner"),React.createElement("option",{value:"INTERMEDIATE"},"Intermediate"),React.createElement("option",{value:"ADVANCED"},"Advanced"))),React.createElement("button",{type:"button",onClick:ie,className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"+1 set"),React.createElement("button",{type:"button",onClick:Dt,className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"+2 reps"),React.createElement("button",{type:"button",onClick:b,className:"px-3 py-2 rounded-sm border border-sky-500/40 bg-sky-500/10 hover:bg-sky-500/15 text-sky-200 text-xs font-bold uppercase"},"Deload \u221220%"),(Qr=(Xr=Xe())==null?void 0:Xr._weekFlags)!=null&&Qr.deload?React.createElement("span",{className:"px-2 py-1 rounded-sm border border-sky-500/30 bg-sky-500/10 text-[10px] font-mono text-sky-200"},"DELOAD"):null),React.createElement("div",{className:"text-[11px] text-zinc-500"})),React.createElement("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-7 gap-2"},(((Zr=Xe())==null?void 0:Zr.days)||[]).map((l,A)=>{var Ze=A===C,Ue=l.status||"TRAIN",It=Ue==="OFF"?"bg-zinc-500/10 border-zinc-500/30 text-zinc-300":Ue==="REST"?"bg-sky-500/10 border-sky-500/30 text-sky-200":"bg-emerald-500/10 border-emerald-500/30 text-emerald-200";return React.createElement("button",{key:l.dayKey||A,type:"button",onClick:()=>ye(A),className:"p-3 rounded-sm border text-left transition-colors "+(Ze?"border-yellow-400 bg-yellow-400/10":"border-titanium-700 bg-black/20 hover:bg-black/30")},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"text-white text-xs font-bold uppercase"},l.label),React.createElement("div",{className:"px-2 py-0.5 rounded-sm border text-[10px] font-mono font-bold "+It},Ue)),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},(l.sessions||[]).length," session(s)"),React.createElement("div",{className:"mt-1 text-[10px] text-zinc-600"},(l.sessions||[]).reduce((va,ji)=>va+((ji.blocks||[]).length||0),0)," block(s)"))}))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-1 p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Day settings"),React.createElement("div",{className:"mt-3 flex items-center gap-2"},[{id:"TRAIN",label:"Training",cls:"border-emerald-500/40 bg-emerald-500/10 text-emerald-200"},{id:"REST",label:"Rest",cls:"border-sky-500/40 bg-sky-500/10 text-sky-200"},{id:"OFF",label:"Off",cls:"border-zinc-500/40 bg-zinc-500/10 text-zinc-300"}].map(l=>{var A;return React.createElement("button",{key:l.id,type:"button",onClick:()=>yi(l.id),className:"px-3 py-2 rounded-sm border text-xs font-bold uppercase "+((((A=dt())==null?void 0:A.status)||"TRAIN")===l.id?l.cls:"border-white/10 bg-white/[0.03] text-white/70 hover:bg-white/[0.06]")},l.label)})),React.createElement("div",{className:"mt-4"},React.createElement("button",{type:"button",onClick:We,className:"w-full px-3 py-2 rounded-sm border border-yellow-400/50 bg-yellow-400/10 text-gold-300 text-xs font-bold uppercase"},"+ Add session"),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Sessions contain blocks. Blocks contain exercises. No exercise can exist outside a block.")),React.createElement("div",{className:"mt-4 rounded-sm border border-titanium-700 bg-black/20 p-3"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Day tools (Step 2)"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("button",{type:"button",onClick:zi,className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"Copy"),React.createElement("button",{type:"button",onClick:as,className:"px-3 py-2 rounded-sm border border-emerald-500/40 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-200 text-xs font-bold uppercase"},"Duplicate \u2192 Next"),React.createElement("button",{type:"button",onClick:()=>os(C),className:"px-3 py-2 rounded-sm border text-xs font-bold uppercase "+(yt?"border-yellow-400/50 bg-yellow-400/10 hover:bg-yellow-400/15 text-yellow-200":"border-white/10 bg-white/[0.02] text-white/40 cursor-not-allowed"),disabled:!yt},"Paste")),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Clipboard: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},yt?`${(yt.sessions||[]).length} sessions`:"empty"))),React.createElement("div",{className:"mt-4 rounded-sm border border-titanium-700 bg-black/20 p-3"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Quick actions"),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Need real exercises? Use Exercise Library \u2192 build a Session Template \u2192 insert it here."),React.createElement("button",{type:"button",onClick:()=>{try{u("EXERCISE_LIBRARY")}catch(l){}},className:"mt-3 w-full px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"Open Exercise Library"))),React.createElement("div",{className:"lg:col-span-2 p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Sessions"),React.createElement("div",{className:"mt-1 text-xs text-zinc-400"},((Pl=dt())==null?void 0:Pl.label)||"Day"," \u2022 ",((Ml=dt())==null?void 0:Ml.status)||"TRAIN")),React.createElement("button",{type:"button",onClick:()=>O(!0),className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"+ Insert template")),dt()&&(dt().sessions||[]).length===0?React.createElement("div",{className:"mt-3 text-[12px] text-zinc-500 border border-dashed border-titanium-700 rounded-sm p-4"},"No sessions yet. Tap \u201CAdd session\u201D or \u201CInsert template\u201D."):React.createElement("div",{className:"mt-3 space-y-3"},(((Fl=dt())==null?void 0:Fl.sessions)||[]).map(l=>React.createElement("div",{key:l.sessionId,className:"rounded-sm border border-titanium-700 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Session"),React.createElement("input",{value:l.name||"",onChange:A=>ii(l.sessionId,A.target.value),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"}),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},(l.blocks||[]).length," block(s) \u2022 source: ",React.createElement("span",{className:"text-zinc-200"},l._src||"manual"))),React.createElement("button",{type:"button",onClick:()=>da(l.sessionId),className:"px-3 py-2 rounded-sm border border-red-500/40 bg-red-500/10 hover:bg-red-500/15 text-red-200 text-xs font-bold uppercase"},"Remove")),React.createElement("div",{className:"mt-3 space-y-3"},(l.blocks||[]).map((A,Ze)=>React.createElement("div",{key:A.blockId,onMouseDown:()=>Vt({kind:"BLOCK",sessionId:l.sessionId,blockId:A.blockId}),onDragOver:Ue=>{!Fe||Fe.kind!=="BLOCK"||Fe.sessionId!==l.sessionId||(Ue.preventDefault(),Se({kind:"BLOCK",sessionId:l.sessionId,overIndex:Ze}))},onDrop:Ue=>{if(!Fe||Fe.kind!=="BLOCK"||Fe.sessionId!==l.sessionId)return;Ue.preventDefault();var It=Fe.fromIndex,va=Ze;v(null),Se(null),It!==va&&R(l.sessionId,It,va)},className:"rounded-sm border bg-titanium-900/40 p-3 transition-colors "+(ce&&ce.kind==="BLOCK"&&ce.blockId===A.blockId?"border-yellow-400/60 ring-1 ring-yellow-400/20 ":"border-titanium-700 ")+(Te&&Te.kind==="BLOCK"&&Te.sessionId===l.sessionId&&Te.overIndex===Ze?"bg-yellow-400/5 ":"")},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{draggable:!0,onDragStart:Ue=>{try{Ue.dataTransfer.effectAllowed="move",Ue.dataTransfer.setData("text/plain",JSON.stringify({kind:"BLOCK",sessionId:l.sessionId,fromIndex:Ze}))}catch(It){}v({kind:"BLOCK",sessionId:l.sessionId,fromIndex:Ze}),Se(null)},onDragEnd:()=>{v(null),Se(null)},className:"h-8 w-8 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/70 flex items-center justify-center cursor-grab active:cursor-grabbing",title:"Drag block"},"\u2261"),React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Block"),React.createElement("select",{value:A.blockType||"Strength",onChange:Ue=>Na(l.sessionId,A.blockId,Ue.target.value),className:"bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-xs text-zinc-200"},["Strength","Conditioning","Mobility"].map(Ue=>React.createElement("option",{key:Ue,value:Ue},Ue)))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.__FOF_QA_TARGET={sessionId:l.sessionId,blockId:A.blockId},window.__FOF_PB_SET_TARGET&&window.__FOF_PB_SET_TARGET({sessionId:l.sessionId,blockId:A.blockId})}catch(Ue){}try{u("EXERCISE_LIBRARY")}catch(Ue){}},className:"px-3 py-2 rounded-sm border border-cyan-400/25 bg-cyan-400/10 hover:bg-cyan-400/15 text-cyan-100 text-xs font-bold uppercase",title:"Open Exercise Library for this block"},"Exercise Library"),React.createElement("button",{type:"button",onClick:()=>{Pt(!0),window.__FOF_QA_TARGET={sessionId:l.sessionId,blockId:A.blockId};try{window.__FOF_PB_SET_TARGET&&window.__FOF_PB_SET_TARGET({sessionId:l.sessionId,blockId:A.blockId})}catch(Ue){}},className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase",title:"Quick add without leaving the builder"},"+ Quick add"),React.createElement("button",{type:"button",onClick:()=>Kt(l.sessionId,A.blockId),className:"px-3 py-2 rounded-sm border border-red-500/40 bg-red-500/10 hover:bg-red-500/15 text-red-200 text-xs font-bold uppercase"},"Remove block"))),React.createElement("div",{className:"mt-3"},(A.exercises||[]).length===0?React.createElement("div",{className:"text-[12px] text-zinc-500 border border-dashed border-titanium-700 rounded-sm p-3"},"No exercises in this block yet."):React.createElement("div",{className:"space-y-2"},(A.exercises||[]).map((Ue,It)=>React.createElement("div",{key:Ue.exerciseId,onMouseDown:()=>Vt({kind:"EX",sessionId:l.sessionId,blockId:A.blockId,exerciseId:Ue.exerciseId}),onDragOver:va=>{!Fe||Fe.kind!=="EX"||Fe.sessionId!==l.sessionId||Fe.blockId!==A.blockId||(va.preventDefault(),Se({kind:"EX",sessionId:l.sessionId,blockId:A.blockId,overIndex:It}))},onDrop:va=>{if(!Fe||Fe.kind!=="EX"||Fe.sessionId!==l.sessionId||Fe.blockId!==A.blockId)return;va.preventDefault();var ji=Fe.fromIndex,ao=It;v(null),Se(null),ji!==ao&&p(l.sessionId,A.blockId,ji,ao)},className:"p-3 rounded-sm border transition-colors "+(ce&&ce.kind==="EX"&&ce.exerciseId===Ue.exerciseId?"border-yellow-400/60 ring-1 ring-yellow-400/20 bg-black/35 ":"border-titanium-700 bg-black/25 ")+(Te&&Te.kind==="EX"&&Te.sessionId===l.sessionId&&Te.blockId===A.blockId&&Te.overIndex===It?"bg-yellow-400/5 ":"")},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"text-white text-xs font-bold truncate"},A.blockKind&&A.blockKind!=="single"?`A${It+1} \u2022 `:"",Ue.name),React.createElement("div",{className:"mt-2 grid grid-cols-4 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Sets"),React.createElement("input",{type:"number",value:Ue.sets,onChange:va=>ka(l.sessionId,A.blockId,Ue.exerciseId,{sets:Number(va.target.value||0)}),className:"mt-1 w-full bg-black/30 border border-titanium-700 rounded-sm px-2 py-1 text-[12px] text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Reps"),React.createElement("input",{type:"number",value:Ue.reps,onChange:va=>ka(l.sessionId,A.blockId,Ue.exerciseId,{reps:Number(va.target.value||0)}),className:"mt-1 w-full bg-black/30 border border-titanium-700 rounded-sm px-2 py-1 text-[12px] text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Load"),React.createElement("input",{type:"number",value:Ue.load==null?0:Ue.load,onChange:va=>ka(l.sessionId,A.blockId,Ue.exerciseId,{load:Number(va.target.value||0)}),className:"mt-1 w-full bg-black/30 border border-titanium-700 rounded-sm px-2 py-1 text-[12px] text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Rest"),React.createElement("input",{type:"number",value:Ue.rest,onChange:va=>ka(l.sessionId,A.blockId,Ue.exerciseId,{rest:Number(va.target.value||0)}),className:"mt-1 w-full bg-black/30 border border-titanium-700 rounded-sm px-2 py-1 text-[12px] text-zinc-100"}))),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Notes"),React.createElement("input",{value:Ue.notes||"",onChange:va=>ka(l.sessionId,A.blockId,Ue.exerciseId,{notes:va.target.value}),className:"mt-1 w-full bg-black/30 border border-titanium-700 rounded-sm px-2 py-1 text-[12px] text-zinc-100",placeholder:"optional"}))),React.createElement("div",{className:"flex flex-col items-center gap-1 shrink-0"},React.createElement("span",{draggable:!0,onDragStart:va=>{try{va.dataTransfer.effectAllowed="move",va.dataTransfer.setData("text/plain",JSON.stringify({kind:"EX",sessionId:l.sessionId,blockId:A.blockId,fromIndex:It}))}catch(ji){}v({kind:"EX",sessionId:l.sessionId,blockId:A.blockId,fromIndex:It}),Se(null)},onDragEnd:()=>{v(null),Se(null)},className:"h-8 w-8 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/70 flex items-center justify-center cursor-grab active:cursor-grabbing",title:"Drag exercise"},"\u2261"),React.createElement("button",{type:"button",onClick:()=>Ot(l.sessionId,A.blockId,Ue.exerciseId,-1),className:"h-8 w-8 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/70",title:"Move up"},"\u2191"),React.createElement("button",{type:"button",onClick:()=>Ot(l.sessionId,A.blockId,Ue.exerciseId,1),className:"h-8 w-8 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/70",title:"Move down"},"\u2193"),React.createElement("button",{type:"button",onClick:()=>ae(l.sessionId,A.blockId,Ue.exerciseId),className:"h-8 w-8 rounded-sm border border-red-500/40 bg-red-500/10 hover:bg-red-500/15 text-red-200",title:"Remove"},"\u2715"))),React.createElement("div",{className:"mt-2 text-[11px] text-zinc-500"},"Preview: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},Ue.sets,"\xD7",Ue.reps)," \u2022 load ",React.createElement("span",{className:"text-zinc-200 font-semibold"},Ue.load==null?0:Ue.load)," \u2022 rest ",React.createElement("span",{className:"text-zinc-200 font-semibold"},Ue.rest,"s"))))))))),React.createElement("div",{className:"mt-3 flex items-center gap-2"},React.createElement("select",{value:Za&&Za[l.sessionId]?Za[l.sessionId]:"single",onChange:A=>Ma(Ze=>({...Ze||{},[l.sessionId]:A.target.value})),className:"bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-xs text-zinc-200",title:"Choose block kind (PBEF Step 3)"},React.createElement("option",{value:"single"},"Single"),React.createElement("option",{value:"superset"},"Superset"),React.createElement("option",{value:"circuit"},"Circuit"),React.createElement("option",{value:"timed"},"Timed")),React.createElement("button",{type:"button",onClick:()=>jt(l.sessionId,Za&&Za[l.sessionId]?Za[l.sessionId]:"single"),className:"flex-1 px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"+ Add block"))))),React.createElement("div",{className:"mt-4 p-3 rounded-sm border border-titanium-700 bg-black/20"},React.createElement("div",{className:"text-[11px] text-zinc-500"},"Validation rules: no Exercise outside a Block \u2022 no Block outside a Session \u2022 no Session outside a Day.")))),le&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[90] bg-black/70 flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-3xl rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"p-4 border-b border-titanium-700 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Insert Session Template"),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},"Adds a new session into the selected day (with 1 block + exercises if available).")),React.createElement("button",{type:"button",onClick:()=>O(!1),className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"Close")),React.createElement("div",{className:"p-4 max-h-[70vh] overflow-y-auto trainer-scroll"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ns.map(l=>React.createElement("button",{key:l.id,type:"button",onClick:()=>{pi(l),O(!1)},className:"p-3 rounded-sm border border-titanium-700 bg-black/25 hover:bg-black/35 text-left"},React.createElement("div",{className:"text-white text-xs font-bold"},l.title),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},l.type," \u2022 ",l.dur,"m \u2022 ",l.intensity," \u2022 source: ",l._src||"template"),React.createElement("div",{className:"text-[10px] text-zinc-600 mt-1"},Array.isArray(l.exercises)?`${l.exercises.length} exercise(s)`:"No exercise list (template-only)")))),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-500"},"Tip: Session Templates saved from Exercise Library include exercises, sets/reps/rest, and notes.")))),qe&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[90] bg-black/70 flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-xl rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"p-4 border-b border-titanium-700 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold"},"Quick Add Exercise"),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},"Adds into the last \u201CAdd exercise\u201D target block (or first session/block).")),React.createElement("button",{type:"button",onClick:()=>{Pt(!1),window.__FOF_QA_TARGET=null},className:"px-3 py-2 rounded-sm border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-white/85 text-xs font-bold uppercase"},"Close")),React.createElement("div",{className:"p-4 space-y-3"},React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Exercise name"),React.createElement("input",{ref:Ut,value:$a.name,onChange:l=>Yt(A=>({...A||{},name:l.target.value})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100",placeholder:"e.g., Back Squat"})),React.createElement("div",{className:"grid grid-cols-4 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Sets"),React.createElement("input",{type:"number",value:$a.sets,onChange:l=>Yt(A=>({...A||{},sets:Number(l.target.value||0)})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Reps"),React.createElement("input",{type:"number",value:$a.reps,onChange:l=>Yt(A=>({...A||{},reps:Number(l.target.value||0)})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Load"),React.createElement("input",{type:"number",value:$a.load,onChange:l=>Yt(A=>({...A||{},load:Number(l.target.value||0)})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"})),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Rest (s)"),React.createElement("input",{type:"number",value:$a.rest,onChange:l=>Yt(A=>({...A||{},rest:Number(l.target.value||0)})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"}))),React.createElement("div",null,React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Notes"),React.createElement("input",{value:$a.notes,onChange:l=>Yt(A=>({...A||{},notes:l.target.value})),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100",placeholder:"optional"})),React.createElement("div",{className:"flex items-center justify-end gap-2 pt-2"},React.createElement("button",{type:"button",onClick:()=>{var l=dt(),Ze=(l&&l.sessions?l.sessions:[])[0],Ue=Ze&&(Ze.blocks||[])[0],It=window.__FOF_QA_TARGET||(Ze&&Ue?{sessionId:Ze.sessionId,blockId:Ue.blockId}:null);if(!It){ta("No target block","Add a session first, then tap \u201CAdd exercise\u201D on a specific block.");return}if(!$a.name){ta("Missing name","Enter an exercise name.");return}Ee(It.sessionId,It.blockId,{name:$a.name,sets:$a.sets,reps:$a.reps,load:$a.load,rest:$a.rest,notes:$a.notes}),Yt({name:"",sets:3,reps:10,load:0,rest:90,notes:""}),Pt(!1),window.__FOF_QA_TARGET=null},className:"px-4 py-2 rounded-sm border border-emerald-500/40 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-200 text-xs font-bold uppercase"},"Add")),React.createElement("div",{className:"pt-2 text-[11px] text-zinc-500"},"For real exercise metadata, open Exercise Library and build Session Templates."))))),k==="BUILD"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4"},React.createElement("div",{className:"lg:col-span-1 space-y-3"},React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Template pool"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("select",{value:oe,onChange:l=>{ke(l.target.value)},className:"w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-xs text-zinc-200"},E.map(l=>React.createElement("option",{key:l.id,value:l.id},l.name)))),React.createElement("button",{type:"button",onClick:()=>cs(oe),className:"w-full mt-2 px-3 py-2 rounded-sm border border-yellow-400/50 bg-yellow-400/10 text-gold-300 text-xs font-bold uppercase"},"Apply template to draft"),React.createElement("div",{className:"mt-3 text-[11px] text-zinc-500"},"Drag sessions into a day (desktop) or tap a session to add to ",React.createElement("span",{className:"text-zinc-300 font-semibold"},"Mon")," then move (mobile-friendly).")),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Sessions"),React.createElement("div",{className:"mt-3 space-y-2"},Ns.map(l=>React.createElement("div",{key:l.id,draggable:!0,onDragStart:A=>Ji(A,{kind:"POOL_SESSION",session:l}),className:"p-3 rounded-sm border border-titanium-700 bg-black/20 hover:bg-black/30 cursor-grab active:cursor-grabbing",onClick:()=>{Gi("mon",l)}},React.createElement("div",{className:"text-white text-xs font-bold"},l.title),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},l.type," \u2022 ",l.dur,"m \u2022 ",l.intensity)))))),React.createElement("div",{className:"lg:col-span-3 space-y-3"},React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Draft name"),React.createElement("input",{value:Et,onChange:l=>ya(l.target.value),className:"mt-2 w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100"})),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>he("ASSIGN"),className:"px-4 py-2 rounded-sm border border-emerald-500/50 bg-emerald-500/10 text-emerald-300 text-xs font-bold uppercase"},"Next: Assign")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3"},m.map(l=>React.createElement("div",{key:l.key,onDragOver:A=>A.preventDefault(),onDrop:A=>wo(A,l.key),className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900 min-h-[140px]"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-bold text-xs uppercase"},l.label),React.createElement("div",{className:"text-[10px] text-zinc-500"},(Re[l.key]||[]).length," items")),React.createElement("div",{className:"mt-3 space-y-2"},(Re[l.key]||[]).length===0?React.createElement("div",{className:"text-[11px] text-zinc-600 border border-dashed border-titanium-700 rounded-sm p-3"},"Drop here / tap sessions to add"):(Re[l.key]||[]).map(A=>React.createElement("div",{key:A.id,draggable:!0,onDragStart:Ze=>Ji(Ze,{kind:"DAY_SESSION",fromDay:l.key,sessionId:A.id}),className:"p-3 rounded-sm border border-titanium-700 bg-black/20"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-white text-xs font-bold"},A.title),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-1"},A.type," \u2022 ",A.dur,"m \u2022 ",A.intensity)),React.createElement("div",{className:"flex flex-col gap-1"},React.createElement("button",{type:"button",onClick:()=>pe(l.key,A.id),className:"px-2 py-1 rounded-sm border border-red-500/40 bg-red-500/10 text-[10px] text-red-300 font-mono font-bold uppercase"},"Remove"),React.createElement("button",{type:"button",onClick:()=>ta("Move session",`Mobile friendly move:

1) Tap day to move to.

Current: ${l.label}`),className:"px-2 py-1 rounded-sm border border-white/10 bg-white/5 text-[10px] text-zinc-200 font-mono font-bold uppercase"},"Move"))))))))),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900 text-[11px] text-zinc-400"},"Drag & drop is enabled (desktop). On phones, use the \u201CRemove\u201D + \u201CMove\u201D flow (demo-safe) to avoid touch-drag glitches."))),k==="ASSIGN"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Assign to client"),React.createElement("div",{className:"mt-2 text-white font-bold"},Et),React.createElement("div",{className:"mt-1 text-xs text-zinc-500"},ct?`Target: ${ct.name||ct.email}`:"No client selected yet."),React.createElement("button",{type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),Us()},className:"w-full mt-3 px-4 py-3 rounded-sm border border-emerald-500/50 bg-emerald-500/10 text-emerald-200 font-bold uppercase"},"Assign plan + save schedule + nudges")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Schedule"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("label",{className:"block text-[11px] text-zinc-400"},"Start date (demo)"),React.createElement(nn,{value:Ct.startDate,onChange:l=>Jt({...Ct,startDate:l}),inputClassName:"w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100",placeholder:"YYYY-MM-DD"}),React.createElement("label",{className:"block text-[11px] text-zinc-400"},"Default time"),React.createElement(Bn,{value:Ct.defaultTime,onChange:l=>Jt({...Ct,defaultTime:l}),inputClassName:"w-full bg-black/30 border border-titanium-700 rounded-sm px-3 py-2 text-sm text-zinc-100",stepMin:15}),React.createElement("div",{className:"text-[11px] text-zinc-500 mt-2"},"In production: this would connect to Calendar & Bookings."))),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[9px] uppercase tracking-[0.28em] text-zinc-500 font-bold"},"Auto-nudges"),React.createElement("label",{className:"flex items-center gap-2 text-xs text-zinc-300"},React.createElement("input",{type:"checkbox",checked:Ye.enabled,onChange:l=>Tt({...Ye,enabled:l.target.checked})}),"Enabled")),React.createElement("div",{className:"mt-3 space-y-2 text-sm"},React.createElement("label",{className:"flex items-center gap-2 text-zinc-200"},React.createElement("input",{type:"checkbox",checked:Ye.morning,onChange:l=>Tt({...Ye,morning:l.target.checked})}),"Morning reminder (day-of)"),React.createElement("label",{className:"flex items-center gap-2 text-zinc-200"},React.createElement("input",{type:"checkbox",checked:Ye.missedByEvening,onChange:l=>Tt({...Ye,missedByEvening:l.target.checked})}),"If not done by evening \u2192 nudge"),React.createElement("label",{className:"flex items-center gap-2 text-zinc-200"},React.createElement("input",{type:"checkbox",checked:Ye.lowCapacityAutoSwap,onChange:l=>Tt({...Ye,lowCapacityAutoSwap:l.target.checked})}),"Low Capacity \u2192 suggest swap (AI tier)"),React.createElement("div",{className:"mt-3 p-3 rounded-sm border border-white/10 bg-white/5 text-[11px] text-zinc-300"},React.createElement("div",{className:"font-mono font-bold uppercase text-[10px] text-zinc-400 mb-1"},"Preview"),Ye.enabled?React.createElement("ul",{className:"list-disc list-inside space-y-1"},Ye.morning?React.createElement("li",null,"Morning reminder at ",Ct.defaultTime||"18:00"," (demo)"):null,Ye.missedByEvening?React.createElement("li",null,"Missed-session nudge at 21:00 (demo)"):null,Ye.lowCapacityAutoSwap?React.createElement("li",null,"Capacity dip \u2192 suggest moving hard session (demo)"):null):React.createElement("div",{className:"text-zinc-500"},"Nudges disabled."))))),React.createElement("div",{className:"p-4 rounded-sm border border-titanium-700 bg-titanium-900 text-[11px] text-zinc-400"},"No duplicates guarantee: assignments are stored as ",React.createElement("span",{className:"text-zinc-200 font-semibold"},"one")," latest plan per client + planName combination (latest overwrites)."))))};(function(){var o="fof_td_planDraft_v1",d="fof_td_pb_target_v1",m=(g,f)=>{try{return g?JSON.parse(g):f}catch(F){return f}},E=(g,f)=>{try{return localStorage.setItem(g,JSON.stringify(f)),!0}catch(F){return!1}};window.__FOF_PB_SET_TARGET=function(g){try{var f=g&&typeof g=="object"?g:null;if(!f||!f.sessionId||!f.blockId)return!1;var F={sessionId:String(f.sessionId),blockId:String(f.blockId),ts:Date.now()};return E(d,F),!0}catch(f){return!1}},window.__FOF_PB_ENSURE_TARGET=function(){try{var g=m(localStorage.getItem(d),null);if(g&&g.sessionId&&g.blockId)return{ok:!0,target:g};var f=m(localStorage.getItem(o),null);(!f||!Array.isArray(f.weeks))&&(f={planId:`pd_${Date.now()}`,name:"Program Draft (V2)",meta:{goal:"FITNESS",level:"BEGINNER",tags:[]},weeks:[{weekIndex:0,days:[{dayIndex:0,dayKey:"mon",label:"Mon",status:"TRAIN",sessions:[]},{dayIndex:1,dayKey:"tue",label:"Tue",status:"TRAIN",sessions:[]},{dayIndex:2,dayKey:"wed",label:"Wed",status:"TRAIN",sessions:[]},{dayIndex:3,dayKey:"thu",label:"Thu",status:"TRAIN",sessions:[]},{dayIndex:4,dayKey:"fri",label:"Fri",status:"TRAIN",sessions:[]},{dayIndex:5,dayKey:"sat",label:"Sat",status:"TRAIN",sessions:[]},{dayIndex:6,dayKey:"sun",label:"Sun",status:"TRAIN",sessions:[]}]}],updatedAt:new Date().toISOString(),schemaVersion:1});var F={...f||{},updatedAt:new Date().toISOString(),schemaVersion:f.schemaVersion||1},D=Array.isArray(F.weeks)?F.weeks.slice():[],k={...D[0]||{weekIndex:0,days:[]}},T=Array.isArray(k.days)?k.days.slice():[],he={...T[0]||{dayIndex:0,dayKey:"mon",label:"Mon",status:"TRAIN",sessions:[]}},oe=Array.isArray(he.sessions)?he.sessions.slice():[];var ke=oe[0];if(ke){var Et=Array.isArray(ke.blocks)?ke.blocks.slice():[];if(!Et[0]){var ya=`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`;Et.push({blockId:ya,blockType:"Strength",blockKind:"single",rounds:1,exercises:[]})}ke={...ke||{},blocks:Et},oe[0]=ke}else{var Et=`sess_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,ya=`blk_${Date.now()}_${Math.random().toString(16).slice(2,6)}`;ke={sessionId:Et,name:"Session 1",blocks:[{blockId:ya,blockType:"Strength",blockKind:"single",rounds:1,exercises:[]}]},oe.push(ke)}he.sessions=oe,T[0]=he,k.days=T,D[0]=k,F.weeks=D,E(o,F);var Re=oe[0]&&Array.isArray(oe[0].blocks)?oe[0].blocks[0]:null,Me={sessionId:String(oe[0].sessionId),blockId:String(Re&&Re.blockId?Re.blockId:"")};return!Me.sessionId||!Me.blockId?{ok:!1,reason:"NO_TARGET"}:(window.__FOF_PB_SET_TARGET&&window.__FOF_PB_SET_TARGET(Me),{ok:!0,target:Me})}catch(g){return{ok:!1,reason:"ERROR"}}},window.__FOF_PB_ADD_EXERCISE=function(g){try{var f=m(localStorage.getItem(d),null);if(!f||!f.sessionId||!f.blockId)try{var oe=window.__FOF_PB_ENSURE_TARGET?window.__FOF_PB_ENSURE_TARGET():null;oe&&oe.ok&&oe.target&&(f=oe.target)}catch(oe){}if(!f||!f.sessionId||!f.blockId)return{ok:!1,reason:"NO_TARGET"};var F=m(localStorage.getItem(o),null);if(!F||!Array.isArray(F.weeks))return{ok:!1,reason:"NO_DRAFT"};var D={exerciseId:String(g&&(g.id||g.exerciseId)?g.id||g.exerciseId:`ex_${Date.now()}_${Math.random().toString(16).slice(2,6)}`),name:String(g&&(g.name||g.title)?g.name||g.title:"Exercise"),sets:Number(g&&(g.sets||g.defaultSets)||3),reps:Number(g&&(g.reps||g.defaultReps)||10),rest:Number(g&&(g.rest||g.restSec||g.defaultRest)||90),notes:String(g&&g.notes?g.notes:"")};var k=!1;var T={...F||{},updatedAt:new Date().toISOString(),schemaVersion:F.schemaVersion||1},he=(T.weeks||[]).map(oe=>{var ke={...oe||{}};return ke.days=(ke.days||[]).map(Re=>{var Me={...Re||{}};return Me.sessions=(Me.sessions||[]).map(Et=>{if(!Et||String(Et.sessionId)!==String(f.sessionId))return Et;var ya={...Et||{}};return ya.blocks=(ya.blocks||[]).map(Ct=>{if(!Ct||String(Ct.blockId)!==String(f.blockId))return Ct;var Jt={...Ct||{}};return Jt.exercises=[...Jt.exercises||[],D],k=!0,Jt}),ya}),Me}),ke});if(T.weeks=he,!k){try{var oe=window.__FOF_PB_ENSURE_TARGET?window.__FOF_PB_ENSURE_TARGET():null,ke=oe&&oe.ok?oe.target:null;if(ke&&ke.sessionId&&ke.blockId&&(String(ke.sessionId)!==String(f.sessionId)||String(ke.blockId)!==String(f.blockId))){E(d,{sessionId:String(ke.sessionId),blockId:String(ke.blockId),ts:Date.now()});var Re=window.__FOF_PB_ADD_EXERCISE.__retrying?null:(window.__FOF_PB_ADD_EXERCISE.__retrying=!0,window.__FOF_PB_ADD_EXERCISE(g));if(window.__FOF_PB_ADD_EXERCISE.__retrying=!1,Re&&Re.ok)return Re}}catch(oe){}return{ok:!1,reason:"TARGET_NOT_FOUND"}}return E(o,T),{ok:!0}}catch(f){return{ok:!1,reason:"ERROR"}}},window.__FOF_PB_IMPORT_WEEK=function(g){try{var f=g&&typeof g=="object"?g:null,F=f&&f.week?f.week:null;if(!F||!Array.isArray(F.days))return{ok:!1,reason:"NO_WEEK"};var D=`pd_${Date.now()}`,k=String(f&&f.name?f.name:"AI Draft"),T=f&&f.meta&&typeof f.meta=="object"?f.meta:{},he={planId:D,name:k,meta:T,weeks:[{...F,weekIndex:0}],updatedAt:new Date().toISOString(),schemaVersion:1};E(o,he);try{var oe=(he.weeks[0].days||[]).find(Me=>Me&&Array.isArray(Me.sessions)&&Me.sessions.length)||he.weeks[0].days[0],ke=oe&&Array.isArray(oe.sessions)?oe.sessions[0]:null,Re=ke&&Array.isArray(ke.blocks)?ke.blocks[0]:null;ke&&Re&&ke.sessionId&&Re.blockId?window.__FOF_PB_SET_TARGET&&window.__FOF_PB_SET_TARGET({sessionId:String(ke.sessionId),blockId:String(Re.blockId)}):window.__FOF_PB_ENSURE_TARGET&&window.__FOF_PB_ENSURE_TARGET()}catch(oe){}return{ok:!0}}catch(f){return{ok:!1,reason:"ERROR"}}}})();var uc=()=>{var o="fof_exercise_library_v1",d="fof_td_custom_sessions_v1",m="fof_td_exlib_favs_v1",E="fof_td_exlib_usage_v1",g="fof_td_exlib_notes_v1",f=(Ee="")=>String(Ee).toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,60),F=React.useMemo(()=>[{name:"Back Squat",category:"Strength",muscle:"Legs",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["squat","glutes","quads"],cues:["Brace, ribs down","Sit between hips","Drive mid-foot"],contraindications:["Acute knee pain"]},{name:"Front Squat",category:"Strength",muscle:"Legs",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["squat","quads"],cues:["Elbows high","Full foot","Keep torso tall"],contraindications:["Wrist pain"]},{name:"Deadlift",category:"Strength",muscle:"Posterior Chain",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["hinge","back"],cues:["Wedge hips","Push floor away","Lock lats"],contraindications:["Acute low-back pain"]},{name:"Romanian Deadlift",category:"Strength",muscle:"Posterior Chain",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["hinge","hamstrings"],cues:["Soft knees","Hinge back","Keep lats tight"],contraindications:["Acute low-back pain"]},{name:"Trap Bar Deadlift",category:"Strength",muscle:"Posterior Chain",equipment:"Trap Bar",level:"Beginner",mechanics:"Compound",tags:["hinge","power"],cues:["Chest up","Drive through heels","Stand tall"],contraindications:["Acute low-back pain"]},{name:"Bench Press",category:"Strength",muscle:"Chest",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["push","pecs"],cues:["Shoulders down/back","Touch lower chest","Press to lockout"],contraindications:["Shoulder impingement"]},{name:"Incline Bench Press",category:"Strength",muscle:"Chest",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["push","upper chest"],cues:["45\xB0 bench max","Control down","Drive evenly"],contraindications:["Shoulder impingement"]},{name:"Overhead Press",category:"Strength",muscle:"Shoulders",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["press","delts"],cues:["Glutes tight","Bar path straight","Head through"],contraindications:["Shoulder impingement"]},{name:"Pull-Up",category:"Strength",muscle:"Back",equipment:"Bodyweight",level:"Intermediate",mechanics:"Compound",tags:["pull","lats"],cues:["Ribs down","Pull elbows to pockets","Full hang control"],contraindications:["Elbow tendinopathy"]},{name:"Chin-Up",category:"Strength",muscle:"Back",equipment:"Bodyweight",level:"Intermediate",mechanics:"Compound",tags:["pull","biceps"],cues:["Squeeze glutes","Drive elbows down","Control descent"],contraindications:["Elbow tendinopathy"]},{name:"Barbell Row",category:"Strength",muscle:"Back",equipment:"Barbell",level:"Intermediate",mechanics:"Compound",tags:["row","lats"],cues:["Hinge set","Row to lower ribs","No jerking"],contraindications:["Low-back strain"]},{name:"1-Arm Dumbbell Row",category:"Strength",muscle:"Back",equipment:"Dumbbell",level:"Beginner",mechanics:"Compound",tags:["row","lats"],cues:["Row to hip","Pause at top","Flat back"],contraindications:["Low-back strain"]},{name:"Dumbbell Bench Press",category:"Hypertrophy",muscle:"Chest",equipment:"Dumbbell",level:"Beginner",mechanics:"Compound",tags:["push","pecs"],cues:["Wrists stacked","Stretch under control","Press together"],contraindications:["Shoulder impingement"]},{name:"Incline Dumbbell Press",category:"Hypertrophy",muscle:"Chest",equipment:"Dumbbell",level:"Beginner",mechanics:"Compound",tags:["upper chest"],cues:["Neutral grip if needed","Slow down","Press up/back"],contraindications:["Shoulder impingement"]},{name:"Cable Fly",category:"Hypertrophy",muscle:"Chest",equipment:"Cable",level:"Beginner",mechanics:"Isolation",tags:["pecs","stretch"],cues:["Soft elbows","Hug the tree","Control end range"],contraindications:["Shoulder pain"]},{name:"Lateral Raise",category:"Hypertrophy",muscle:"Shoulders",equipment:"Dumbbell",level:"Beginner",mechanics:"Isolation",tags:["delts"],cues:["Lead with elbows","Slight lean","No swinging"],contraindications:["Shoulder pain"]},{name:"Face Pull",category:"Hypertrophy",muscle:"Upper Back",equipment:"Cable",level:"Beginner",mechanics:"Isolation",tags:["rear delts","posture"],cues:["Pull to eyes","Externally rotate","Pause"],contraindications:["Shoulder pain"]},{name:"Lat Pulldown",category:"Hypertrophy",muscle:"Back",equipment:"Machine",level:"Beginner",mechanics:"Compound",tags:["pull","lats"],cues:["Elbows to ribs","No momentum","Control eccentric"],contraindications:[]},{name:"Seated Cable Row",category:"Hypertrophy",muscle:"Back",equipment:"Cable",level:"Beginner",mechanics:"Compound",tags:["row"],cues:["Tall chest","Row to navel","Slow return"],contraindications:[]},{name:"Biceps Curl",category:"Hypertrophy",muscle:"Arms",equipment:"Dumbbell",level:"Beginner",mechanics:"Isolation",tags:["biceps"],cues:["Elbows pinned","Full range","No swinging"],contraindications:["Elbow tendinopathy"]},{name:"Triceps Pushdown",category:"Hypertrophy",muscle:"Arms",equipment:"Cable",level:"Beginner",mechanics:"Isolation",tags:["triceps"],cues:["Elbows tucked","Extend fully","Control up"],contraindications:["Elbow pain"]},{name:"Leg Press",category:"Hypertrophy",muscle:"Legs",equipment:"Machine",level:"Beginner",mechanics:"Compound",tags:["quads","glutes"],cues:["Mid-foot","Depth within control","No butt-wink"],contraindications:["Knee pain"]},{name:"Leg Extension",category:"Hypertrophy",muscle:"Legs",equipment:"Machine",level:"Beginner",mechanics:"Isolation",tags:["quads"],cues:["Pause at top","Control down","No hip lift"],contraindications:["Knee pain"]},{name:"Hamstring Curl",category:"Hypertrophy",muscle:"Posterior Chain",equipment:"Machine",level:"Beginner",mechanics:"Isolation",tags:["hamstrings"],cues:["Full squeeze","Slow eccentric","Neutral hips"],contraindications:[]},{name:"Calf Raise",category:"Hypertrophy",muscle:"Calves",equipment:"Machine",level:"Beginner",mechanics:"Isolation",tags:["calves"],cues:["Full stretch","Pause top","Don\u2019t bounce"],contraindications:["Achilles tendinopathy"]},{name:"Assault Bike Intervals",category:"Conditioning",muscle:"Full Body",equipment:"Machine",level:"Beginner",mechanics:"Cardio",tags:["interval","hiit"],cues:["Relax shoulders","Smooth cadence","Hit target watts"],contraindications:["Cardio contraindication"]},{name:"Row Erg Intervals",category:"Conditioning",muscle:"Full Body",equipment:"Machine",level:"Beginner",mechanics:"Cardio",tags:["interval"],cues:["Legs-drive","Tall posture","Finish with arms"],contraindications:["Low-back pain"]},{name:"Run (Zone 2)",category:"Conditioning",muscle:"Lower Body",equipment:"Bodyweight",level:"Beginner",mechanics:"Cardio",tags:["zone2","aerobic"],cues:["Nasal breathing","Easy pace","Consistent stride"],contraindications:["Knee pain"]},{name:"Farmer Carry",category:"Conditioning",muscle:"Full Body",equipment:"Dumbbell",level:"Beginner",mechanics:"Carry",tags:["grip","core"],cues:["Tall posture","Short steps","Brace"],contraindications:["Acute low-back pain"]},{name:"Sled Push",category:"Conditioning",muscle:"Lower Body",equipment:"Sled",level:"Intermediate",mechanics:"Power",tags:["sled","anaerobic"],cues:["Forward lean","Drive knees","Short steps"],contraindications:["Knee pain"]},{name:"Plank",category:"Core",muscle:"Core",equipment:"Bodyweight",level:"Beginner",mechanics:"Isometric",tags:["anti-extension"],cues:["Squeeze glutes","Neutral neck","Breathe behind brace"],contraindications:[]},{name:"Dead Bug",category:"Core",muscle:"Core",equipment:"Bodyweight",level:"Beginner",mechanics:"Control",tags:["core","coordination"],cues:["Low back down","Slow limbs","Exhale"],contraindications:[]},{name:"Side Plank",category:"Core",muscle:"Core",equipment:"Bodyweight",level:"Beginner",mechanics:"Isometric",tags:["anti-lateral flexion"],cues:["Hips forward","Long line","Breathe"],contraindications:[]},{name:"World\u2019s Greatest Stretch",category:"Mobility",muscle:"Hips",equipment:"Bodyweight",level:"Beginner",mechanics:"Mobility",tags:["hips","t-spine"],cues:["Long exhale","Rotate gently","Stay tall"],contraindications:[]},{name:"90/90 Hip Switches",category:"Mobility",muscle:"Hips",equipment:"Bodyweight",level:"Beginner",mechanics:"Mobility",tags:["rotation"],cues:["Sit tall","Slow transitions","No pinching"],contraindications:[]},{name:"Thoracic Open Books",category:"Mobility",muscle:"Upper Back",equipment:"Bodyweight",level:"Beginner",mechanics:"Mobility",tags:["t-spine"],cues:["Breathe","Rotate slowly","Keep knees stacked"],contraindications:[]},{name:"Glute Bridge",category:"Rehab",muscle:"Glutes",equipment:"Bodyweight",level:"Beginner",mechanics:"Activation",tags:["glutes"],cues:["Ribs down","Posterior tilt","Squeeze at top"],contraindications:["Acute low-back pain"]},{name:"Clamshell",category:"Rehab",muscle:"Hips",equipment:"Mini Band",level:"Beginner",mechanics:"Activation",tags:["glute med"],cues:["Keep pelvis stacked","Slow reps","Feel side glute"],contraindications:[]},{name:"Scapular Wall Slide",category:"Rehab",muscle:"Shoulders",equipment:"Bodyweight",level:"Beginner",mechanics:"Control",tags:["scapula","posture"],cues:["Ribs down","Slide up","No shrug"],contraindications:["Shoulder pain"]}],[]),D=React.useMemo(()=>{var Ee=F.slice(),ae=[{suffix:" (Tempo 3-1-1)",addTags:["tempo"],level:"Intermediate"},{suffix:" (Paused)",addTags:["pause"],level:"Intermediate"},{suffix:" (Low Impact)",addTags:["low-impact"],level:"Beginner"},{suffix:" (Band Assisted)",addTags:["assisted"],level:"Beginner"},{suffix:" (Single-Leg)",addTags:["unilateral"],level:"Intermediate"},{suffix:" (Kettlebell)",addTags:["kb"],equipment:"Kettlebell"},{suffix:" (Cable)",addTags:["cable"],equipment:"Cable"},{suffix:" (Machine)",addTags:["machine"],equipment:"Machine"}],Ot=(R,Ve)=>{var pa=ae[Ve%ae.length]||null,qt=pa?`${R.name}${pa.suffix}`:R.name,ka=pa&&pa.equipment?pa.equipment:R.equipment,pi=pa&&pa.level?pa.level:R.level,cs=Array.from(new Set([...R.tags||[],...pa&&pa.addTags?pa.addTags:[]]));return{id:`ex_${f(qt)}_${String(Ve+1).padStart(3,"0")}`,name:qt,category:R.category,muscle:R.muscle,equipment:ka,level:pi,mechanics:R.mechanics,tags:cs,cues:R.cues||[],contraindications:R.contraindications||[],media:"",createdBy:"system",isCustom:!1}},xe=[];var p=0;for(;xe.length<150;){var R=Ee[p%Ee.length];xe.push(Ot(R,p)),p+=1}return xe},[F]),[k,T]=React.useState(""),[he,oe]=React.useState("ALL"),[ke,Re]=React.useState("ALL"),[Me,Et]=React.useState("ALL"),[ya,Ct]=React.useState("ALL"),[Jt,Ye]=React.useState(""),[Tt,_t]=React.useState({open:!1,item:null}),[P,I]=React.useState(!1),[te,Ce]=React.useState(()=>_e([]));React.useEffect(()=>{try{ve(te)}catch(Ee){}},[te]),React.useEffect(()=>{if(!Jt)return;var Ee=setTimeout(()=>Ye(""),1800);return()=>clearTimeout(Ee)},[Jt]);var C=()=>{try{var Ee=localStorage.getItem("fof_td_pb_target_v1"),ae=Ee?JSON.parse(Ee):null;if(!ae||!ae.sessionId||!ae.blockId)return"Target: not set";var Ot=localStorage.getItem("fof_td_planDraft_v1"),xe=Ot?JSON.parse(Ot):null;var p="",R="",Ve="";if(xe&&Array.isArray(xe.weeks))for(var qt of xe.weeks||[])for(var ka of qt.days||[])for(var pi of ka.sessions||[]){if(String(pi.sessionId)!==String(ae.sessionId))continue;p=ka.label||ka.dayKey||"",R=pi.name||"Session";var cs=pi.blocks||[],Gi=(cs||[]).findIndex(wo=>String(wo.blockId)===String(ae.blockId)),pe=Gi>=0?cs[Gi]:null,Sa=pe&&pe.blockKind?pe.blockKind:"single",Ji=Sa==="single"?"Single":Sa==="superset"?"Superset":Sa==="circuit"?"Circuit":"Timed";Ve=pe?(pe.blockType?`${pe.blockType} `:"")+`${Ji} Block`:"Block",pe&&Sa!=="single"&&(Ve+=` \u2022 ${Number(pe.rounds||3)}R`),Gi>=0&&(Ve+=` ${Gi+1}`);break}var pa=[];return p&&pa.push(p),R&&pa.push(R),Ve&&pa.push(Ve),pa.length?`Target: ${pa.join(" \u2022 ")}`:"Target: set (block)"}catch(Ee){return"Target: not set"}},[ye,le]=React.useState(()=>{try{var Ee=localStorage.getItem(o),ae=Ee?JSON.parse(Ee):null,Ot=Array.isArray(ae)?ae:[],xe=new Map;return[...D,...Ot].forEach(p=>{p&&p.id&&xe.set(p.id,p)}),Array.from(xe.values())}catch(Ee){return D}});React.useEffect(()=>{try{localStorage.setItem(o,JSON.stringify(ye))}catch(Ee){}},[ye]);var O=(Ee,ae)=>{try{var Ot=localStorage.getItem(Ee);if(!Ot)return ae;var xe=JSON.parse(Ot);return xe==null?ae:xe}catch(Ot){return ae}},qe=(Ee,ae)=>{try{localStorage.setItem(Ee,JSON.stringify(ae))}catch(Ot){}},[Pt,Za]=React.useState(()=>new Set(O(m,[]))),[Ma,$a]=React.useState(()=>O(E,{})||{}),[Yt,it]=React.useState(()=>O(g,{})||{});React.useEffect(()=>{qe(m,Array.from(Pt||[]))},[Pt]),React.useEffect(()=>{qe(E,Ma||{})},[Ma]),React.useEffect(()=>{qe(g,Yt||{})},[Yt]);var Ut=Ee=>{Ee&&Za(ae=>{var Ot=new Set(ae||[]);Ot.has(Ee)?Ot.delete(Ee):Ot.add(Ee);try{Bt("trainer.exercise_library.exercise.favorited",{id:Ee,on:Ot.has(Ee)})}catch(xe){}return Ot})},ce=Ee=>{Ee&&$a(ae=>{var Ot={...ae||{}},xe=Ot[Ee]||{count:0,last:0};return Ot[Ee]={count:(xe.count||0)+1,last:Date.now()},Ot})},Vt=Ee=>{var ae=String((Ee==null?void 0:Ee.name)||"").toLowerCase(),Ot=((Ee==null?void 0:Ee.tags)||[]).map(p=>String(p||"").toLowerCase()),xe=[ae,...Ot].join(" ");return/(carry|farmer|suitcase)/.test(xe)?"Carry":/(deadlift|hinge|rdl|romanian|good morning|hip hinge|swing)/.test(xe)?"Hinge":/(row|pull|pulldown|chin|lat|face pull)/.test(xe)?"Pull":/(press|bench|push|dip|overhead|shoulder press|incline)/.test(xe)?"Push":/(mobility|stretch|yoga|flow|warm up|cool down)/.test(xe)?"Mobility":"Other"},Fe=["ALL","Push","Pull","Hinge","Carry","Mobility","Other"],v=[{id:"RELEVANCE",label:"Relevance"},{id:"FAVORITES",label:"Favorites"},{id:"MOST_USED",label:"Most used"},{id:"RECENT",label:"Recent"},{id:"AZ",label:"A \u2192 Z"}],[Te,Se]=React.useState("ALL"),[yt,St]=React.useState("RELEVANCE"),[za,Xe]=React.useState(()=>{var Ee;return((Ee=D[0])==null?void 0:Ee.id)||""}),dt=React.useMemo(()=>(ye||[]).find(Ee=>Ee.id===za)||null,[ye,za]),Qt=React.useMemo(()=>["ALL",...Array.from(new Set((ye||[]).map(Ee=>Ee.category).filter(Boolean))).sort()],[ye]),yi=React.useMemo(()=>["ALL",...Array.from(new Set((ye||[]).map(Ee=>Ee.muscle).filter(Boolean))).sort()],[ye]),zi=React.useMemo(()=>["ALL",...Array.from(new Set((ye||[]).map(Ee=>Ee.equipment).filter(Boolean))).sort()],[ye]),os=React.useMemo(()=>["ALL",...Array.from(new Set((ye||[]).map(Ee=>Ee.level).filter(Boolean))).sort()],[ye]),as=React.useMemo(()=>{var Ee=String(k||"").trim().toLowerCase();return(ye||[]).filter(p=>!(!p||he!=="ALL"&&p.category!==he||ke!=="ALL"&&p.muscle!==ke||Me!=="ALL"&&p.equipment!==Me||ya!=="ALL"&&p.level!==ya||Te!=="ALL"&&Vt(p)!==Te||Ee&&![p.name,p.category,p.muscle,p.equipment,p.level,p.mechanics,Vt(p),...p.tags||[]].join(" ").toLowerCase().includes(Ee))).map(p=>{var R=(Ma||{})[p.id]||{count:0,last:0},Ve=(Pt||new Set).has(p.id);return{ex:p,u:R,isFav:Ve}}).sort((p,R)=>{if(yt==="FAVORITES")return p.isFav!==R.isFav?p.isFav?-1:1:(R.u.last||0)-(p.u.last||0);if(yt==="MOST_USED"){var Ve=(R.u.count||0)-(p.u.count||0);return Ve||(R.u.last||0)-(p.u.last||0)}if(yt==="RECENT"){var Ve=(R.u.last||0)-(p.u.last||0);return Ve||(R.u.count||0)-(p.u.count||0)}return yt==="AZ"?String(p.ex.name||"").localeCompare(String(R.ex.name||"")):0}).map(p=>p.ex)},[ye,k,he,ke,Me,ya,Te,yt,Pt,Ma]),[ro,n]=React.useState([]),y=Ee=>{Ee&&n(ae=>{if((ae||[]).some(xe=>xe.exId===Ee.id))return ae;try{ce(Ee.id)}catch(xe){}return[...ae||[],{exId:Ee.id,sets:3,reps:10,restSec:90,notes:""}]})},be=Ee=>n(ae=>(ae||[]).filter(Ot=>Ot.exId!==Ee)),ie=(Ee,ae)=>n(Ot=>(Ot||[]).map(xe=>xe.exId===Ee?{...xe,...ae}:xe)),[Dt,b]=React.useState("Custom Session"),We=React.useMemo(()=>{var Ee=(ro||[]).length;return Ee?Math.max(20,Math.min(90,Ee*6)):0},[ro]),da=()=>{if(!ro||ro.length===0){ta("Pick exercises","Select at least 1 exercise, then Save Session Template.");return}var ae={id:`cs_${Date.now()}`,title:Dt||"Custom Session",type:"Strength",dur:We,intensity:"Moderate",exercises:ro.map(Ot=>{var xe=(ye||[]).find(p=>p.id===Ot.exId);return{id:Ot.exId,name:xe?xe.name:"Exercise",sets:Ot.sets,reps:Ot.reps,restSec:Ot.restSec,notes:Ot.notes||""}})};try{var Ot=localStorage.getItem(d),xe=Ot?JSON.parse(Ot):[],R=(Array.isArray(xe)?xe:[]).filter(Ve=>!(Ve&&Ve.title&&Ve.title===ae.title));R.unshift(ae),localStorage.setItem(d,JSON.stringify(R.slice(0,80)))}catch(Ot){}try{Bt("trainer.exercise_library.session.saved",{count:ro.length})}catch(Ot){}ta("Saved",`Saved \u201C${ae.title}\u201D as a Session Template.

You can now use it inside Plan Builder \u2192 Pool (it will appear automatically).`),n([]),b("Custom Session")},[ii,jt]=React.useState(!1),[Kt,Na]=React.useState({name:"",category:"Strength",muscle:"",equipment:"",level:"Beginner",mechanics:"Compound",tags:"",cues:"",contraindications:""}),ra=()=>{var Ee=String(Kt.name||"").trim();if(!Ee){ta("Missing name","Please enter an exercise name.");return}var ae=`ex_custom_${Date.now()}`,Ot={id:ae,name:Ee,category:Kt.category||"Strength",muscle:Kt.muscle||"General",equipment:Kt.equipment||"Other",level:Kt.level||"Beginner",mechanics:Kt.mechanics||"Compound",tags:String(Kt.tags||"").split(",").map(xe=>xe.trim()).filter(Boolean),cues:String(Kt.cues||"").split(`
`).map(xe=>xe.trim()).filter(Boolean),contraindications:String(Kt.contraindications||"").split(`
`).map(xe=>xe.trim()).filter(Boolean),media:"",createdBy:"trainer",isCustom:!0};le(xe=>[Ot,...xe||[]]),Xe(ae),jt(!1),Na({name:"",category:"Strength",muscle:"",equipment:"",level:"Beginner",mechanics:"Compound",tags:"",cues:"",contraindications:""});try{Bt("trainer.exercise_library.exercise.created",{})}catch(xe){}},Ti=Ee=>{var Ot;var ae=(ye||[]).find(xe=>xe.id===Ee);if(ae){if(!ae.isCustom){ta("Protected","Seed exercises cannot be deleted in V1.");return}le(xe=>(xe||[]).filter(p=>p.id!==Ee)),Xe(((Ot=D[0])==null?void 0:Ot.id)||"");try{Bt("trainer.exercise_library.exercise.deleted",{})}catch(xe){}}};return React.createElement("div",{className:"flex-1 overflow-hidden"},React.createElement("div",{className:"h-full flex flex-col"},React.createElement("div",{className:"px-6 py-5 border-b border-white/10 bg-midnight-950/60"},React.createElement("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"h-10 w-10 rounded-2xl bg-cyan-400/10 border border-cyan-400/20 flex items-center justify-center"},React.createElement(_,{name:"Dumbbell",size:18,className:"text-cyan-200"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Step 2"),React.createElement("h2",{className:"text-[18px] font-extrabold text-white"},"Exercise Library V1.5"),React.createElement("div",{className:"text-[11px] text-white/55"},"Search \u2192 favorite \u2192 pick \u2192 save reusable session templates (feeds Plan Builder pool)"))),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{u("PLAN_BUILDER")}catch(Ee){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-[11px] font-extrabold text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"ClipboardList",size:14,className:"text-white/70"}),"Back to Plan Builder"),React.createElement("div",{className:"px-3 py-2 rounded-xl border border-cyan-400/15 bg-cyan-400/5 text-[11px] font-semibold text-cyan-100/90"},C()),React.createElement("button",{type:"button",onClick:()=>{try{var Ee=window.__FOF_PB_ENSURE_TARGET?window.__FOF_PB_ENSURE_TARGET():null;Ee&&Ee.ok?Ye("Target created (Mon \u2022 Session 1)"):Ye("Could not create target")}catch(Ee){Ye("Could not create target")}},className:"px-3 py-2 rounded-xl border border-cyan-400/20 bg-cyan-400/10 hover:bg-cyan-400/15 text-[11px] font-extrabold text-cyan-100 inline-flex items-center gap-2",title:"Auto-create a default target if none exists"},React.createElement(_,{name:"Target",size:14,className:"text-cyan-200"}),"Auto-target"),React.createElement("button",{type:"button",onClick:()=>jt(!0),className:"px-3 py-2 rounded-xl border border-cyan-400/25 bg-cyan-400/10 hover:bg-cyan-400/15 text-[11px] font-extrabold text-cyan-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Plus",size:14,className:"text-cyan-200"}),"New exercise"),React.createElement("button",{type:"button",onClick:()=>ta("How this feeds Plan Builder",`In V1, Exercise Library builds \u201CSession Templates\u201D by selecting exercises and saving.

Plan Builder reads saved Session Templates from localStorage (fof_td_custom_sessions_v1) and shows them in the pool.

V2 will add full workout composition (supersets/circuits), progression rules, and per-client auto-regression by Capacity Zone.`),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/[0.04] hover:bg-white/[0.07] text-[11px] font-extrabold text-white/75 inline-flex items-center gap-2"},React.createElement(_,{name:"Info",size:14,className:"text-white/70"}),"How it works")))),React.createElement("div",{className:"flex-1 overflow-hidden"},React.createElement("div",{className:"h-full max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-4 p-4"},React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 p-4 overflow-y-auto trainer-scroll"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Search"),React.createElement("div",{className:"mt-2 relative"},React.createElement("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40"},React.createElement(_,{name:"Search",size:14})),React.createElement("input",{value:k,onChange:Ee=>T(Ee.target.value),placeholder:"Back squat, hamstrings, machine\u2026",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90 placeholder:text-white/35 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.18)]"})),React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Category"),React.createElement("select",{value:he,onChange:Ee=>oe(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},Qt.map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Level"),React.createElement("select",{value:ya,onChange:Ee=>Ct(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},os.map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",{className:"col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Muscle"),React.createElement("select",{value:ke,onChange:Ee=>Re(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},yi.map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",{className:"col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Equipment"),React.createElement("select",{value:Me,onChange:Ee=>Et(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},zi.map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee))))),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Movement"),React.createElement("select",{value:Te,onChange:Ee=>Se(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},Fe.map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",{className:"col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Sort"),React.createElement("select",{value:yt,onChange:Ee=>St(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"},v.map(Ee=>React.createElement("option",{key:Ee.id,value:Ee.id},Ee.label))))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Results"),React.createElement("div",{className:"text-[12px] font-extrabold text-white mt-0.5"},as.length," exercises")),React.createElement("button",{type:"button",onClick:()=>{T(""),oe("ALL"),Re("ALL"),Et("ALL"),Ct("ALL"),Se("ALL"),St("RELEVANCE")},className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/75"},"Reset")),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Tip: open an exercise \u2192 \u201CAdd to session builder\u201D."))),React.createElement("div",{className:"lg:col-span-5 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Exercises"),React.createElement("div",{className:"text-[11px] text-white/55"},he==="ALL"?"All categories":he)),React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll"},as.length===0?React.createElement("div",{className:"p-5 text-[12px] text-white/60"},"No matches. Try clearing filters."):as.map(Ee=>{var Ot,xe;var ae=Ee.id===za;return React.createElement("button",{key:Ee.id,type:"button",onClick:()=>Xe(Ee.id),className:"w-full text-left px-4 py-3 border-b border-white/5 hover:bg-white/5 transition-colors "+(ae?"bg-white/10":"")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[13px] font-extrabold text-white truncate"},Ee.name),React.createElement("div",{className:"text-[11px] text-white/55 mt-0.5 truncate"},Ee.muscle," \u2022 ",Ee.equipment," \u2022 ",Ee.mechanics)),React.createElement("div",{className:"flex items-center gap-1.5 shrink-0"},React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-white/70"},Ee.category),React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-white/70"},Vt(Ee)),(((Ot=(Ma||{})[Ee.id])==null?void 0:Ot.count)||0)>0?React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-white/70"},(xe=(Ma||{})[Ee.id])==null?void 0:xe.count,"\xD7"):null,Ee.isCustom?React.createElement("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-cyan-400/20 bg-cyan-400/10 text-cyan-100"},"Custom"):null,React.createElement("button",{type:"button",onClick:p=>{p.preventDefault(),p.stopPropagation();try{var R=window.__FOF_PB_ADD_EXERCISE?window.__FOF_PB_ADD_EXERCISE(Ee):{ok:!1,reason:"NO_BRIDGE"};if(R&&R.ok){try{ce(Ee.id)}catch(Ve){}Ye("Added to Plan Builder")}else Ye("Select a block in Plan Builder first")}catch(R){Ye("Could not add")}},className:"ml-1 h-7 w-7 rounded-xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 flex items-center justify-center text-emerald-100",title:"Add to Plan Builder"},React.createElement(_,{name:"Plus",size:14})),React.createElement("button",{type:"button",onClick:p=>{p.preventDefault(),p.stopPropagation(),Ut(Ee.id)},className:"ml-1 h-7 w-7 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center "+((Pt||new Set).has(Ee.id)?"text-amber-200":"text-white/55"),title:(Pt||new Set).has(Ee.id)?"Unfavorite":"Favorite"},React.createElement(_,{name:"Star",size:14})))))}))),React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 overflow-hidden flex flex-col"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Details"),dt?React.createElement("div",{className:"flex items-center gap-2"},dt.isCustom?React.createElement("button",{type:"button",onClick:()=>Ti(dt.id),className:"px-3 py-1.5 rounded-full border border-red-400/20 bg-red-500/10 hover:bg-red-500/15 text-[11px] font-bold text-red-200 inline-flex items-center gap-2"},React.createElement(_,{name:"Trash2",size:14})," Delete"):null,React.createElement("button",{type:"button",onClick:()=>y(dt),className:"px-3 py-1.5 rounded-full border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] font-bold text-emerald-200 inline-flex items-center gap-2"},React.createElement(_,{name:"Plus",size:14})," Add"),React.createElement("button",{type:"button",onClick:()=>_t({open:!0,item:{id:dt.id,type:"EXERCISE",title:dt.name,name:dt.name}}),className:"px-3 py-1.5 rounded-full border border-sky-400/20 bg-sky-500/10 hover:bg-sky-500/15 text-[11px] font-bold text-sky-200 inline-flex items-center gap-2"},React.createElement(_,{name:"Send",size:14})," Assign"),React.createElement("button",{type:"button",onClick:()=>I(!0),className:"px-3 py-1.5 rounded-full border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-bold text-amber-100 inline-flex items-center gap-2"},React.createElement(_,{name:"History",size:14})," History")):null),React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-4 space-y-4"},dt?React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},dt.name),React.createElement("button",{type:"button",onClick:()=>Ut(dt.id),className:"h-8 w-8 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center "+((Pt||new Set).has(dt.id)?"text-amber-200":"text-white/55"),title:(Pt||new Set).has(dt.id)?"Unfavorite":"Favorite"},React.createElement(_,{name:"Star",size:14}))),React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},dt.category," \u2022 ",Vt(dt)," \u2022 ",dt.muscle," \u2022 ",dt.equipment," \u2022 ",dt.level," \u2022 ",dt.mechanics)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Coaching cues"),React.createElement("ul",{className:"mt-2 space-y-1"},(dt.cues||[]).length?(dt.cues||[]).map((Ee,ae)=>React.createElement("li",{key:ae,className:"text-[12px] text-white/75"},"\u2022 ",Ee)):React.createElement("li",{className:"text-[12px] text-white/55"},"\u2014"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Contraindications"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70"},(dt.contraindications||[]).length?(dt.contraindications||[]).join(" \u2022 "):"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Tags"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},(dt.tags||[]).length?(dt.tags||[]).map((Ee,ae)=>React.createElement("span",{key:ae,className:"text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-white/70"},Ee)):React.createElement("span",{className:"text-[12px] text-white/55"},"\u2014")))):React.createElement("div",{className:"text-[12px] text-white/60"},"Select an exercise from the list."),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Coach notes"),React.createElement("div",{className:"text-[10px] text-white/40"},"Private")),React.createElement("textarea",{value:String((Yt||{})[dt.id]||""),onChange:Ee=>it(ae=>({...ae||{},[dt.id]:Ee.target.value})),placeholder:"Add private coaching notes (e.g., regressions, setup cues, client-specific warnings)\u2026",className:"mt-2 w-full min-h-[72px] px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90 placeholder:text-white/35 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.18)]"}),React.createElement("div",{className:"mt-2 text-[10px] text-white/45"},"Saved locally on this device.")),React.createElement("div",{className:"pt-2 border-t border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Session builder"),React.createElement("div",{className:"text-[12px] font-extrabold text-white mt-0.5"},ro.length," selected")),React.createElement("button",{type:"button",onClick:()=>n([]),className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/70"},"Clear")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-wide text-white/40"},"Session name"),React.createElement("input",{value:Dt,onChange:Ee=>b(Ee.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"}),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},"Estimated duration: ",We?`${We} min`:"\u2014")),React.createElement("div",{className:"mt-3 space-y-2"},ro.length===0?React.createElement("div",{className:"text-[12px] text-white/55 border border-dashed border-white/10 rounded-2xl p-3"},"Add exercises from Details \u2192 \u201CAdd\u201D."):ro.map(Ee=>{var ae=(ye||[]).find(Ot=>Ot.id===Ee.exId);return React.createElement("div",{key:Ee.exId,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},ae?ae.name:"Exercise"),React.createElement("div",{className:"text-[11px] text-white/55 truncate"},ae?`${ae.muscle} \u2022 ${ae.equipment}`:"")),React.createElement("button",{type:"button",onClick:()=>be(Ee.exId),className:"p-1.5 rounded-lg hover:bg-white/10 text-white/55"},React.createElement(_,{name:"X",size:14}))),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Sets"),React.createElement("input",{type:"number",min:"1",value:Ee.sets,onChange:Ot=>ie(Ee.exId,{sets:Number(Ot.target.value||1)}),className:"mt-1 w-full px-2 py-1.5 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Reps"),React.createElement("input",{type:"number",min:"1",value:Ee.reps,onChange:Ot=>ie(Ee.exId,{reps:Number(Ot.target.value||1)}),className:"mt-1 w-full px-2 py-1.5 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Rest (s)"),React.createElement("input",{type:"number",min:"0",value:Ee.restSec,onChange:Ot=>ie(Ee.exId,{restSec:Number(Ot.target.value||0)}),className:"mt-1 w-full px-2 py-1.5 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90"}))),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Notes"),React.createElement("input",{value:Ee.notes,onChange:Ot=>ie(Ee.exId,{notes:Ot.target.value}),className:"mt-1 w-full px-2 py-1.5 rounded-xl border border-white/10 bg-titanium-950/70 text-[12px] text-white/90",placeholder:"Tempo, RPE, cues\u2026"})))})),React.createElement("button",{type:"button",onClick:da,className:"mt-3 w-full px-4 py-2.5 rounded-2xl border border-emerald-400/25 bg-emerald-500/12 hover:bg-emerald-500/18 text-[12px] font-extrabold text-emerald-100 inline-flex items-center justify-center gap-2"},React.createElement(_,{name:"Save",size:16,className:"text-emerald-200"}),"Save Session Template")))))),ii&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[90] bg-black/60 flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-xl rounded-2xl border border-white/10 bg-titanium-950 shadow-[0_20px_60px_rgba(0,0,0,0.65)] overflow-hidden"},React.createElement("div",{className:"px-5 py-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"New exercise"),React.createElement("button",{type:"button",onClick:()=>jt(!1),className:"p-2 rounded-lg hover:bg-white/10 text-white/60"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"p-5 space-y-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Name"),React.createElement("input",{value:Kt.name,onChange:Ee=>Na(ae=>({...ae,name:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., Seated DB Shoulder Press"})),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Category"),React.createElement("select",{value:Kt.category,onChange:Ee=>Na(ae=>({...ae,category:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90"},["Strength","Conditioning","Mobility","Core","Yoga"].map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Level"),React.createElement("select",{value:Kt.level,onChange:Ee=>Na(ae=>({...ae,level:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90"},["Beginner","Intermediate","Advanced"].map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee))))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Muscle"),React.createElement("input",{value:Kt.muscle,onChange:Ee=>Na(ae=>({...ae,muscle:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:"Chest / Back / Legs"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Equipment"),React.createElement("input",{value:Kt.equipment,onChange:Ee=>Na(ae=>({...ae,equipment:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:"Dumbbell / Cable / Machine"}))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Mechanics"),React.createElement("select",{value:Kt.mechanics,onChange:Ee=>Na(ae=>({...ae,mechanics:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90"},["Compound","Isolation","Isometric","Cardio","Control"].map(Ee=>React.createElement("option",{key:Ee,value:Ee},Ee)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Tags (comma separated)"),React.createElement("input",{value:Kt.tags,onChange:Ee=>Na(ae=>({...ae,tags:Ee.target.value})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:"push, shoulder, hypertrophy"}))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Cues (one per line)"),React.createElement("textarea",{value:Kt.cues,onChange:Ee=>Na(ae=>({...ae,cues:Ee.target.value})),rows:3,className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:`Set scapula
Elbows 45\xB0
Control eccentric`})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase text-white/40"},"Contraindications (one per line)"),React.createElement("textarea",{value:Kt.contraindications,onChange:Ee=>Na(ae=>({...ae,contraindications:Ee.target.value})),rows:2,className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:`Acute shoulder pain
Post-surgery restrictions`})),React.createElement("div",{className:"flex items-center justify-end gap-2 pt-2"},React.createElement("button",{type:"button",onClick:()=>jt(!1),className:"px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/75"},"Cancel"),React.createElement("button",{type:"button",onClick:ra,className:"px-4 py-2 rounded-xl border border-cyan-400/25 bg-cyan-400/12 hover:bg-cyan-400/18 text-[12px] font-extrabold text-cyan-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Plus",size:14})," Create")))))),React.createElement(je,{open:!!Tt.open,item:Tt.item,onClose:()=>_t({open:!1,item:null}),onConfirm:Ee=>{try{Ce(ae=>{var Ot=Array.isArray(ae)?ae.slice(0):[];return[Ee,...Ot].slice(0,500)});try{M(Ae,Ee)}catch(ae){}_t({open:!1,item:null}),Ye("Assigned to client")}catch(ae){}}}),React.createElement(re,{open:!!P,onClose:()=>I(!1),assignments:te.filter(Ee=>String(Ee.itemType||"")==="EXERCISE"),onUndo:Ee=>{try{Ce(ae=>Array.isArray(ae)?ae.filter(Ot=>Ot&&Ot.id!==Ee):[])}catch(ae){}Ye("Assignment removed")}}),Jt?React.createElement("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[120] px-4 py-2 rounded-full border border-white/10 bg-black/70 text-[12px] font-extrabold text-white shadow-[0_10px_30px_rgba(0,0,0,0.6)]"},Jt):null)},mc=()=>{var os,as,ro;var o="fof_td_planassign_v1",d="fof_td_planbuilder_v1",m="fof_td_planbuilder_custom_templates_v1",E="fof_td_planbuilder_audit_v1",g=(n,y)=>wt(n,y),f=(n,y)=>na(n,y),F="ASSIGN",[D,k]=React.useState(()=>ds?"GROUP":"CLIENT"),[T,he]=React.useState(()=>ct&&(ct.id||ct.name)?ct.id||ct.name:"");React.useEffect(()=>{try{ds&&D==="GROUP"&&he(ds.id),ct&&D==="CLIENT"&&he(ct.id)}catch(n){}},[ct,ds]);var[oe,ke]=React.useState(()=>g(m,[])),Re=React.useMemo(()=>[...ea,...Array.isArray(oe)?oe:[]],[oe]),Me=React.useMemo(()=>{try{var n=localStorage.getItem(d);if(!n)return null;var y=JSON.parse(n);return y?{name:y.draftName||"Last draft",week:y.draftWeek||null,program:y.programDraftV1||null,programWeeksCount:y.programWeeksCount||(y.programDraftV1&&Array.isArray(y.programDraftV1.weeks)?y.programDraftV1.weeks.length:null),programMeta:y.programMeta||y.programDraftV1&&y.programDraftV1.meta||null,schedule:y.schedule||null,nudges:y.nudges||null}:null}catch(n){return null}},[F]),Et="fof_td_ai_last_tpl_v1",ya=(()=>{try{return wt(Et,"")||""}catch(n){return""}})();React.useEffect(()=>{try{ya&&si(Et)}catch(n){}},[]);var[Ct,Jt]=React.useState(()=>{var n;return ya||(Me?"LAST_DRAFT":((n=Re[0])==null?void 0:n.id)||"")}),[Ye,Tt]=React.useState(()=>{var n;return Me?Me.name||"Last draft":((n=Re[0])==null?void 0:n.name)||"Plan"}),[_t,P]=React.useState(()=>new Date().toISOString().slice(0,10)),[I,te]=React.useState("07:00"),[Ce,C]=React.useState(!0),[ye,le]=React.useState(0);React.useEffect(()=>{try{le(0)}catch(n){}},[Ct]);var[O,qe]=React.useState(0);React.useEffect(()=>{var n=()=>qe(y=>y+1);return window.addEventListener("fof_plan_assigned",n),()=>window.removeEventListener("fof_plan_assigned",n)},[]);var Pt=React.useMemo(()=>D!=="CLIENT"?null:(Oi||[]).find(n=>n.id===T)||null,[D,T,Oi]),Za=React.useMemo(()=>D!=="GROUP"?null:(to||[]).find(n=>n.id===T)||null,[D,T,to]),Ma=React.useMemo(()=>D!=="GROUP"||!Za?[]:(Za.members||[]).slice(),[D,Za]),$a=n=>{var y=[{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"},{key:"sun",label:"Sun"}],be={};y.forEach(b=>{be[b.label]=[]});var ie=(Re||[]).find(b=>b.id===n)||(Re||[])[0],Dt=ie&&ie.sessions?ie.sessions:{};return y.forEach(b=>{var We=Dt[b.key]||[];be[b.label]=(We||[]).map((da,ii)=>({id:da.id||`${n}_${b.key}_${ii}`,title:da.title||"Session",type:da.type||"Workout",dur:typeof da.dur=="number"?da.dur:45,intensity:da.intensity||"Moderate"}))}),be},Yt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],it=()=>{var n={};return Yt.forEach(y=>{n[y]=[]}),n},Ut=n=>{var y=it();try{(Array.isArray(n==null?void 0:n.days)?n.days:[]).forEach(ie=>{var Dt=ie.label||ie.dayLabel||ie.name||"",b=Yt.includes(Dt)?Dt:null,We=Array.isArray(ie.sessions)?ie.sessions:[];b&&(y[b]=We.map((da,ii)=>({id:da.sessionId||da.id||`${b}_${ii}`,title:da.name||da.title||"Session",type:da.type||"Workout",dur:Number(da.dur||da.duration||45),intensity:da.intensity||"Moderate"})))})}catch(be){}return y},ce=React.useMemo(()=>{try{if(Ct==="LAST_DRAFT"&&Me&&Me.program&&Array.isArray(Me.program.weeks)){var ie=Me.program.weeks.map(Ut),Dt=Me.program.meta||Me.programMeta||{};return{name:Me.name||"Last draft",meta:Dt,weeks:ie,durationWeeks:ie.length||1,source:"LAST_DRAFT"}}var n=(Re||[]).find(ie=>ie.id===Ct)||(Re||[])[0],y=$a(Ct),be=n&&n.meta?n.meta:{};return{name:n&&n.name?n.name:Ye||"Plan",meta:be,weeks:[y],durationWeeks:1,source:"TEMPLATE"}}catch(n){var y=$a(Ct);return{name:Ye||"Plan",meta:{},weeks:[y],durationWeeks:1,source:"TEMPLATE"}}},[Ct,Me,Re,Ye]),Vt=()=>{var n=ce&&Array.isArray(ce.weeks)?ce.weeks:[];return n[ye]||n[0]||$a(Ct)};React.useEffect(()=>{try{if(Ct==="LAST_DRAFT"&&Me)Tt(Me.name||"Last draft");else{var n=Re.find(y=>y.id===Ct)||Re[0];n&&Tt(n.name||"Plan")}}catch(n){}try{le(0)}catch(n){}},[Ct]);var Fe=React.useMemo(()=>{var n=Vt();return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(be=>({d:be,sessions:Array.isArray(n==null?void 0:n[be])?n[be]:[]}))},[Ct,Me,Re,O,ye]),v=ce&&ce.durationWeeks?Number(ce.durationWeeks):1,Te=n=>{try{return n.toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})}catch(y){return String(n)}},Se=React.useMemo(()=>{try{return new Date(String(_t||"").slice(0,10)+"T00:00:00")}catch(n){return new Date}},[_t]),yt=React.useMemo(()=>{try{var n=new Date(Se);return n.setDate(n.getDate()+v*7-1),n}catch(n){return Se}},[Se,v]),St=React.useMemo(()=>{try{var n=ce&&Array.isArray(ce.weeks)?ce.weeks:[];var y=0;n.forEach(ie=>{Yt.forEach(Dt=>{y+=Array.isArray(ie==null?void 0:ie[Dt])?ie[Dt].length:0})});var be=n.length?Math.round(y/n.length*10)/10:y;return{totalWorkouts:y,avgPerWeek:be}}catch(n){return{totalWorkouts:0,avgPerWeek:0}}},[ce]),za=React.useMemo(()=>{var n=g(o,[]);return Array.isArray(n)?n:[]},[O]),Xe=React.useMemo(()=>{if(D==="CLIENT")return za.filter(y=>String(y.clientId)===String(T));var n=new Set(Ma.map(String));return za.filter(y=>n.has(String(y.clientId)))},[za,D,T,Ma]),dt=n=>{try{var y=g(E,[]),be=Array.isArray(y)?y:[];be.unshift({id:"aud_"+Date.now(),at:new Date().toISOString(),actor:Ci,...n}),f(E,be.slice(0,200))}catch(y){}},Qt=n=>{if(!n)return;var y={startDate:_t,defaultTime:I,frequency:"WEEKLY"},be=Ce?{enabled:!0,items:["hydration","sleep"]}:{enabled:!1,items:[]},ie=Vt(),Dt=ce&&Array.isArray(ce.weeks)?{name:ce.name||Ye||"Plan",meta:ce.meta||{},weeks:ce.weeks,durationWeeks:v,assignedWeekIndex:ye}:null,b={id:"asg_"+Date.now()+"_"+Math.random().toString(16).slice(2),clientId:n.id||n.name||"",clientName:n.name||"Client",planName:Ye||"Plan",week:ie,program:Dt,schedule:y,nudges:be,createdAt:new Date().toISOString(),source:Ct};try{var We=localStorage.getItem(o),da=We?JSON.parse(We):[],jt=(Array.isArray(da)?da:[]).filter(Kt=>!(String(Kt.clientId)===String(b.clientId)&&String(Kt.planName)===String(b.planName)));jt.unshift(b),localStorage.setItem(o,JSON.stringify(jt.slice(0,50)))}catch(We){}dt({type:"ASSIGN",entity:"plan_assignment",clientId:b.clientId,clientName:b.clientName,planName:b.planName,source:b.source});try{window.dispatchEvent(new Event("fof_plan_assigned"))}catch(We){}try{ta("Assigned",`Assigned \u201C${b.planName}\u201D to ${b.clientName}.`)}catch(We){}},yi=()=>{if(D==="CLIENT")return Qt(Pt);var n=(Oi||[]).filter(y=>Ma.includes(y.id));if(!n.length)return ta("No members","This group has no members (demo).");n.forEach(Qt);try{ta("Assigned to group",`Assigned \u201C${Ye||"Plan"}\u201D to ${n.length} members.`)}catch(y){}},zi=()=>{try{if(D==="CLIENT"&&Pt&&zt(Pt),D==="GROUP"&&Ma[0]){var n=(Oi||[]).find(y=>y.id===Ma[0]);n&&zt(n)}}catch(n){}u("CALENDAR")};return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-6xl mx-auto space-y-5"},React.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase tracking-[0.28em] text-zinc-500"},"Plans"),React.createElement("h2",{className:"text-2xl font-extrabold text-white mt-1"},"Assign Plan"),React.createElement("div",{className:"text-[12px] text-zinc-400 mt-1"},"Select a client or group \u2192 choose a template or last draft \u2192 assign (and optionally add schedule + nudges)."))),F==="BUILD"?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"text-[12px] text-white/70"},"Use the original Plan Builder (unchanged) to craft a week, save drafts/templates, generate AI weeks, and audit edits."),React.createElement("button",{type:"button",onClick:()=>ls("ASSIGN"),className:"px-4 py-2 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85"},"Back to Assign")),React.createElement(Jn,null)):React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Target"),React.createElement("div",{className:"text-[13px] font-extrabold text-white mt-0.5"},"Who are we assigning to?")),React.createElement("div",{className:"inline-flex rounded-full border border-white/10 bg-white/5 p-1"},React.createElement("button",{type:"button",onClick:()=>{var n;k("CLIENT"),he((ct==null?void 0:ct.id)||((n=Oi==null?void 0:Oi[0])==null?void 0:n.id)||"")},className:"px-3 py-1.5 rounded-full text-[11px] font-extrabold "+(D==="CLIENT"?"bg-white/10 text-white":"text-white/70 hover:text-white")},"Client"),React.createElement("button",{type:"button",onClick:()=>{var n;k("GROUP"),he((ds==null?void 0:ds.id)||((n=to==null?void 0:to[0])==null?void 0:n.id)||"")},className:"px-3 py-1.5 rounded-full text-[11px] font-extrabold "+(D==="GROUP"?"bg-white/10 text-white":"text-white/70 hover:text-white")},"Group"))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Select"),D==="CLIENT"?React.createElement("select",{value:T,onChange:n=>{he(n.target.value);var y=(Oi||[]).find(be=>be.id===n.target.value);try{zt(y||null)}catch(be){}},className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},React.createElement("option",{value:""},"\u2014 Select client \u2014"),(Oi||[]).map(n=>React.createElement("option",{key:n.id,value:n.id},n.name))):React.createElement("select",{value:T,onChange:n=>{he(n.target.value);var y=(to||[]).find(be=>be.id===n.target.value);try{Xs(y||null)}catch(be){}},className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},React.createElement("option",{value:""},"\u2014 Select group \u2014"),(to||[]).map(n=>React.createElement("option",{key:n.id,value:n.id},n.name))),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},D==="CLIENT"?Pt?`Capacity ${Pt.readiness} \u2022 ${((os=Pt.tags)==null?void 0:os.join(" / "))||"\u2014"}`:"Pick a client":Za?`${(Za.members||[]).length} members`:"Pick a group",D==="CLIENT"&&Pt?React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{zt(Pt)}catch(n){}u("CLIENT_ACTION_MODE")},className:"px-3 py-2 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"User",size:14})," Open client"),React.createElement("button",{type:"button",onClick:()=>{try{zt(Pt)}catch(n){}u("CALENDAR")},className:"px-3 py-2 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"Calendar",size:14})," View calendar")):null)),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Plan source"),React.createElement("select",{value:Ct,onChange:n=>Jt(n.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},Me?React.createElement("option",{value:"LAST_DRAFT"},"Last draft from Builder"):null,Re.map(n=>React.createElement("option",{key:n.id,value:n.id},n.name))),React.createElement("div",{className:"mt-2 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{u("PLAN_AI_GENERATOR")}catch(n){}},className:"px-3 py-1.5 rounded-full border border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] hover:bg-[rgba(16,255,97,0.16)] text-[11px] font-bold text-white"},"Generate with AI (inside Builder)")))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Assignment name"),React.createElement("input",{value:Ye,onChange:n=>Tt(n.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90",placeholder:"e.g., Hypertrophy A"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Start date"),React.createElement(nn,{value:_t,onChange:P,className:"",inputClassName:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"}))),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"flex items-center gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Default time"),React.createElement(Bn,{value:I,onChange:te,className:"",inputClassName:"mt-1 w-[140px] px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90",stepMin:15})),React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/80 mt-4"},React.createElement("input",{type:"checkbox",checked:Ce,onChange:n=>C(n.target.checked)}),"Auto-nudges")),React.createElement("button",{type:"button",onClick:yi,className:"px-4 py-2 rounded-full border border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] hover:bg-[rgba(77,233,255,0.18)] text-[12px] font-extrabold text-white inline-flex items-center gap-2"},React.createElement(_,{name:"CheckCircle",size:14})," Assign now")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Program Overview"),React.createElement("div",{className:"text-[14px] font-extrabold text-white mt-1 truncate"},Ye||(ce==null?void 0:ce.name)||"Plan"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65 flex flex-wrap gap-x-3 gap-y-1"},React.createElement("span",null,"Duration: ",React.createElement("span",{className:"text-white/85 font-bold"},v)," week",v===1?"":"s"),React.createElement("span",null,"Workouts: ",React.createElement("span",{className:"text-white/85 font-bold"},St.totalWorkouts)),React.createElement("span",null,"Avg/week: ",React.createElement("span",{className:"text-white/85 font-bold"},St.avgPerWeek))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Goal: ",React.createElement("span",{className:"text-white/75 font-semibold"},String(((as=ce==null?void 0:ce.meta)==null?void 0:as.goal)||"\u2014")),React.createElement("span",{className:"mx-2 text-white/30"},"\u2022"),"Level: ",React.createElement("span",{className:"text-white/75 font-semibold"},String(((ro=ce==null?void 0:ce.meta)==null?void 0:ro.level)||"\u2014")))),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[11px] text-white/55"},"Week 1 starts"),React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},Te(Se)),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Ends"),React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},Te(yt)))),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},((ce==null?void 0:ce.weeks)||[]).map((n,y)=>React.createElement("button",{key:y,type:"button",onClick:()=>le(y),className:"px-3 py-1.5 rounded-full border text-[11px] font-extrabold "+(y===ye?"border-cyan-400/50 bg-cyan-400/15 text-cyan-100":"border-white/12 bg-white/5 text-white/75 hover:bg-white/10")},"W",y+1))),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Click a week to preview below (read-only).")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-titanium-950/50 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Preview week"),React.createElement("div",{className:"text-[11px] text-white/60"},"Based on current source selection")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},Fe.map(n=>React.createElement("div",{key:n.d,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-white/70"},n.d),React.createElement("div",{className:"text-[11px] text-white/60"},(n.sessions||[]).length," items")),React.createElement("div",{className:"mt-2 space-y-1"},(n.sessions||[]).slice(0,3).map((y,be)=>React.createElement("div",{key:be,className:"text-[12px] text-white/85 flex items-center justify-between gap-2"},React.createElement("div",{className:"truncate"},y.title||"Session"),React.createElement("div",{className:"text-[11px] text-white/55 shrink-0"},y.dur||y.duration||45,"m"))),(n.sessions||[]).length>3?React.createElement("div",{className:"text-[11px] text-white/50"},"+",(n.sessions||[]).length-3," more\u2026"):null,(n.sessions||[]).length===0?React.createElement("div",{className:"text-[11px] text-white/40"},"Rest / empty"):null)))))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono font-bold uppercase text-zinc-400"},"Review"),React.createElement("div",{className:"text-[13px] font-extrabold text-white mt-0.5"},"Recent assignments")),React.createElement("button",{type:"button",onClick:()=>qe(n=>n+1),className:"px-3 py-2 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Refresh")),React.createElement("div",{className:"mt-3 space-y-2 max-h-[420px] overflow-y-auto trainer-scroll pr-1"},Xe.length?Xe.slice(0,12).map(n=>React.createElement("div",{key:n.id,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},n.planName||"Plan"),React.createElement("div",{className:"text-[11px] text-white/60 truncate"},n.clientName||n.clientId)),React.createElement("div",{className:"text-[10px] text-white/45 font-mono"},String(n.createdAt||"").slice(0,10))),React.createElement("div",{className:"mt-2 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{var y=(Oi||[]).find(be=>String(be.id)===String(n.clientId));y&&zt(y)}catch(y){}u("CALENDAR")},className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"View calendar"),React.createElement("button",{type:"button",onClick:()=>ta("Plan details","In production this opens the client plan timeline, adherence, and version history."),className:"px-3 py-1.5 rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Review plan")))):React.createElement("div",{className:"text-[12px] text-white/55"},"No assignments found for this ",D.toLowerCase()," yet. Assign one and it will show here."))))))},pc=({setView:o})=>{var d=ce=>{try{if(typeof o=="function")return o(ce),!0}catch(Vt){}try{if(typeof window!="undefined"&&typeof window.__FOF_SET_VIEW=="function")return window.__FOF_SET_VIEW(ce),!0}catch(Vt){}return!1},m="fof_td_ai_last_tpl_v1",E="fof_td_planbuilder_custom_templates_v1",g=ct&&ct.name?ct.name:"No client selected",[f,F]=React.useState("Build strength"),[D,k]=React.useState(3),[T,he]=React.useState(55),[oe,ke]=React.useState({gym:!0,dumbbells:!1,bands:!1,bodyweight:!1,cardio:!1}),[Re,Me]=React.useState({upper:!0,lower:!0,core:!0,conditioning:!1}),[Et,ya]=React.useState(""),[Ct,Jt]=React.useState(null),[Ye,Tt]=React.useState(""),_t=React.useRef(null),P=(ce,Vt,Fe)=>Fe({...ce,[Vt]:!ce[Vt]}),I=({label:ce,active:Vt,onClick:Fe})=>React.createElement("button",{type:"button",onClick:Fe,className:"px-3 py-1.5 rounded-full text-[11px] font-extrabold border "+(Vt?"border-lime-400/40 bg-lime-400/10 text-lime-100":"border-white/12 bg-white/5 text-white/80 hover:bg-white/10")},ce),te=React.useMemo(()=>({upper:[{id:"ex_bench",name:"Bench Press",tags:["upper","push"]},{id:"ex_db_press",name:"DB Shoulder Press",tags:["upper","push"]},{id:"ex_row",name:"Seated Row",tags:["upper","pull"]},{id:"ex_lat_pd",name:"Lat Pulldown",tags:["upper","pull"]},{id:"ex_pushup",name:"Push-up",tags:["upper","push","bodyweight"]},{id:"ex_facepull",name:"Face Pull",tags:["upper","pull"]}],lower:[{id:"ex_back_squat",name:"Back Squat",tags:["lower"]},{id:"ex_rdl",name:"Romanian Deadlift",tags:["lower","hinge"]},{id:"ex_split_squat",name:"Split Squat",tags:["lower"]},{id:"ex_leg_press",name:"Leg Press",tags:["lower"]},{id:"ex_glute_bridge",name:"Glute Bridge",tags:["lower","bodyweight"]},{id:"ex_calf_raise",name:"Calf Raise",tags:["lower"]}],core:[{id:"ex_plank",name:"Plank",tags:["core","bodyweight"]},{id:"ex_deadbug",name:"Dead Bug",tags:["core","bodyweight"]},{id:"ex_pallof",name:"Pallof Press",tags:["core"]},{id:"ex_side_plank",name:"Side Plank",tags:["core","bodyweight"]}],conditioning:[{id:"ex_rower",name:"Row Erg (Intervals)",tags:["conditioning","cardio"]},{id:"ex_assault",name:"Air Bike (Intervals)",tags:["conditioning","cardio"]},{id:"ex_run",name:"Run (Tempo)",tags:["conditioning","cardio"]},{id:"ex_kb_swings",name:"KB Swings",tags:["conditioning"]},{id:"ex_burpees",name:"Burpees",tags:["conditioning","bodyweight"]}],mobility:[{id:"ex_hip_flow",name:"Hip Mobility Flow",tags:["mobility"]},{id:"ex_thoracic",name:"T-Spine Opener",tags:["mobility"]},{id:"ex_band_pullaparts",name:"Band Pull-Aparts",tags:["mobility","bands"]}]}),[]),Ce=(ce,Vt=[])=>{var Fe=Array.isArray(ce)?ce:[],v=Fe.filter(Se=>Se&&!Vt.includes(Se.id)),Te=v.length?v:Fe;return Te.length?Te[Math.floor(Math.random()*Te.length)]:null},C=ce=>ce==="lower"?"Hard":ce==="conditioning"?"Moderate":ce==="core"?"Easy":"Moderate",ye=(ce,Vt,Fe={})=>{var v=!!Fe.beginner,Te=Fe.avoid||[],Se=Ce(te[ce]||[],Te)||{id:`ex_${ce}_${Vt}`,name:"Exercise"},yt=ce==="conditioning"?1:3,St=ce==="conditioning"?0:10,za=v?Math.min(3,yt):yt,Xe=ce==="conditioning"?0:v?8:St,dt=ce==="conditioning"?60:v?90:75;return{exerciseId:Se.id||`ex_${Date.now()}_${Vt}`,name:Se.name||"Exercise",sets:za,reps:Xe,rest:dt,notes:ce==="conditioning"?v?"Intervals: 30s on / 60s off \xD7 6":"Intervals: 40s on / 40s off \xD7 8":""}},le=(ce={})=>{var Vt=["mon","tue","wed","thu","fri","sat","sun"],Fe=Math.max(1,Math.min(7,Number(D)||3)),Te={1:["wed"],2:["mon","thu"],3:["mon","wed","fri"],4:["mon","tue","thu","fri"],5:["mon","tue","wed","thu","sat"],6:["mon","tue","wed","thu","fri","sat"],7:["mon","tue","wed","thu","fri","sat","sun"]}[Fe]||Vt.slice(0,Fe),Se=[];return Re.upper&&Se.push("upper"),Re.lower&&Se.push("lower"),Re.core&&Se.push("core"),Re.conditioning&&Se.push("conditioning"),Se.length===0&&Se.push("upper","lower","core"),{weekIndex:0,days:Vt.map((St,za)=>{var Xe=Te.includes(St),dt=St.charAt(0).toUpperCase()+St.slice(1,3);if(!Xe)return{dayIndex:za,dayKey:St,label:dt,status:"REST",sessions:[]};var Qt=Se[Te.indexOf(St)%Se.length]||"upper",yi=`sess_${Date.now()}_${St}_${Math.random().toString(16).slice(2,6)}`,zi=`blk_${Date.now()}_${St}_a_${Math.random().toString(16).slice(2,6)}`,os=!!ce.beginner,as=ye(Qt,0,{beginner:os}),ro=Qt==="conditioning"?null:ye(Qt,1,{beginner:os,avoid:[as&&as.exerciseId?as.exerciseId:""]}),n=[{blockId:zi,blockType:Qt==="conditioning"?"Conditioning":Qt==="core"?"Mobility":"Strength",blockKind:"single",rounds:1,exercises:Qt==="conditioning"?[as].filter(Boolean):[as,ro].filter(Boolean)}];return(Qt==="upper"||Qt==="lower")&&n.push({blockId:`blk_${Date.now()}_${St}_b_${Math.random().toString(16).slice(2,6)}`,blockType:"Mobility",blockKind:"single",rounds:1,exercises:[ye("core",0,{beginner:os}),ye("mobility",1,{beginner:os})].slice(0,2)}),{dayIndex:za,dayKey:St,label:dt,status:"TRAIN",sessions:[{sessionId:yi,name:Qt==="upper"?"Upper Strength":Qt==="lower"?"Lower Strength":Qt==="conditioning"?"Conditioning":"Core + Mobility",blocks:n}]}})}},O=ce=>{var Vt={};return(ce&&Array.isArray(ce.days)?ce.days:[]).forEach(v=>{var Te=v.dayKey,Se=v.sessions&&v.sessions[0]?v.sessions[0]:null;if(v.status==="TRAIN"&&Se){var yt=Se.blocks&&Se.blocks[0]?Se.blocks[0]:null,St=yt&&yt.blockType||"Strength";Vt[Te]=[{id:Se.sessionId||`ai_${Te}`,title:Se.name||"Session",type:St,dur:T,intensity:C((Se.name||"").toLowerCase().includes("lower")?"lower":(Se.name||"").toLowerCase().includes("cond")?"conditioning":(Se.name||"").toLowerCase().includes("core")?"core":"upper")}]}}),Vt},qe=(ce={})=>{var Vt="tpl_ai_"+Date.now(),Fe=Object.entries(oe).filter(([,Se])=>Se).map(([Se])=>Se).join(", ")||"none",v=Object.entries(Re).filter(([,Se])=>Se).map(([Se])=>Se).join(", ")||"balanced",Te=le(ce);return{id:Vt,name:`AI \u2022 ${f} (${D} days)`,desc:`Auto-generated \u2022 ${T} min \u2022 Equip: ${Fe} \u2022 Focus: ${v}${Et?" \u2022 Notes: "+Et:""}`,weeks:[Te],sessions:O(Te),meta:{createdAt:new Date().toISOString(),goal:f,daysPerWeek:D,sessionMins:T,equipment:oe,focus:Re,notes:Et}}},Pt=ce=>{var Vt=Ta(E,[]),Fe=Array.isArray(Vt)?Vt:[],v={...ce,schemaVersion:2,source:"AI_GENERATOR_V2"},Te=[v,...Fe.filter(St=>St&&St.id!==v.id)],Se=ti(E,Te),yt=na(m,v.id);try{Bt("plan.ai.generated",{tplId:v.id,daysPerWeek:D,sessionMins:T,goal:f,clientName:g,storage:Se&&yt?"localStorage":"memory"})}catch(St){}if(!(Se&&yt))try{ta("Saved in memory mode","Storage is blocked in this environment. Your AI template is available for assignment now, but it will NOT persist after refresh.")}catch(St){}return!0},Za=()=>{var ce=qe();Jt(ce),Tt(`Generated: ${ce.name}`),setTimeout(()=>{try{_t.current&&_t.current.scrollIntoView({behavior:"smooth",block:"start"})}catch(Vt){}},60)},Ma=()=>{if(!Ct||!Ct.weeks||!Ct.weeks[0])return;var ce=JSON.parse(JSON.stringify(Ct.weeks[0])),Vt=new Set;(ce.days||[]).forEach(Te=>{(Te.sessions||[]).forEach(Se=>(Se.blocks||[]).forEach(yt=>(yt.exercises||[]).forEach(St=>Vt.add(St.exerciseId))))});var Fe=Array.from(Vt);(ce.days||[]).forEach(Te=>{(Te.sessions||[]).forEach(Se=>(Se.blocks||[]).forEach(yt=>{(yt.exercises||[]).forEach((St,za)=>{if(Math.random()<.33){var Xe=(yt.blockType||"").toLowerCase().includes("cond")?"conditioning":(yt.blockType||"").toLowerCase().includes("mob")?"mobility":(Se.name||"").toLowerCase().includes("lower")?"lower":(Se.name||"").toLowerCase().includes("core")?"core":"upper",dt=ye(Xe,za,{beginner:!1,avoid:Fe});dt&&dt.exerciseId&&(St.exerciseId=dt.exerciseId,St.name=dt.name,St.notes=dt.notes||St.notes)}})}))});var v={...Ct,weeks:[ce],sessions:O(ce)};Jt(v),Tt("Improved: swapped exercises")},$a=()=>{if(!Ct||!Ct.weeks||!Ct.weeks[0])return;var ce=JSON.parse(JSON.stringify(Ct.weeks[0]));(ce.days||[]).forEach(Fe=>(Fe.sessions||[]).forEach(v=>(v.blocks||[]).forEach(Te=>{(Te.exercises||[]).forEach(Se=>{Se.sets=Math.max(1,Number(Se.sets||1)-1),Se.reps&&(Se.reps=Math.max(6,Number(Se.reps||10)-2)),Se.rest=Math.min(150,Math.max(60,Number(Se.rest||90)+15))})})));var Vt={...Ct,weeks:[ce],sessions:O(ce)};Jt(Vt),Tt("Improved: reduced volume")},Yt=()=>{if(!Ct||!Ct.weeks||!Ct.weeks[0])return;var ce=le({beginner:!0}),Vt={...Ct,name:(Ct.name||"AI")+" \u2022 Beginner",weeks:[ce],sessions:O(ce)};Jt(Vt),Tt("Improved: beginner-friendly")},it=()=>{if(!(!Ct||!Ct.weeks||!Ct.weeks[0])){try{var ce=window.__FOF_PB_IMPORT_WEEK?window.__FOF_PB_IMPORT_WEEK({name:Ct.name,meta:Ct.meta,week:Ct.weeks[0]}):null;if(ce&&ce.ok){try{ta("Sent to Plan Builder","AI week imported into Plan Draft. You can now edit blocks/exercises like a normal program.")}catch(Vt){}try{o("PLAN_BUILDER")}catch(Vt){}return}}catch(ce){}try{ta("Send failed","Could not import into Plan Builder in this environment.")}catch(ce){}}},Ut=()=>{if(!Ct)return;if(Pt(Ct)){try{ta("Ready to assign","Template added to your Custom templates. Opening Assign Plan now (it will auto-select this template).")}catch(Vt){}try{o("PLAN_ASSIGN")}catch(Vt){}}};return React.createElement("div",{className:"p-4 md:p-6"},React.createElement("div",{className:"max-w-5xl mx-auto"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"AI Generator V2"),React.createElement("div",{className:"text-[22px] md:text-[26px] font-extrabold tracking-tight"},"Generate a usable week draft"),React.createElement("div",{className:"text-[12px] text-white/70 mt-1"},"Client context: ",React.createElement("span",{className:"font-bold text-white/85"},g))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{o("PLAN_ASSIGN")}catch(ce){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"ChevronLeft",size:16})," Back to Assign"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-panel p-4 md:p-5"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Inputs"),React.createElement("div",{className:"text-[11px] text-white/60"},"Minimal + practical")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Goal"),React.createElement("select",{value:f,onChange:ce=>F(ce.target.value),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},React.createElement("option",null,"Build strength"),React.createElement("option",null,"Hypertrophy"),React.createElement("option",null,"Fat loss"),React.createElement("option",null,"Sports performance"),React.createElement("option",null,"General fitness"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Days / week"),React.createElement("select",{value:D,onChange:ce=>k(parseInt(ce.target.value||"3",10)),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},React.createElement("option",{value:2},"2"),React.createElement("option",{value:3},"3"),React.createElement("option",{value:4},"4"),React.createElement("option",{value:5},"5"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Session duration"),React.createElement("select",{value:T,onChange:ce=>he(parseInt(ce.target.value||"55",10)),className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"},React.createElement("option",{value:35},"35 min"),React.createElement("option",{value:45},"45 min"),React.createElement("option",{value:55},"55 min"),React.createElement("option",{value:70},"70 min"))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Notes (optional)"),React.createElement("input",{value:Et,onChange:ce=>ya(ce.target.value),placeholder:"e.g., knee friendly, travel week",className:"mt-1 w-full px-3 py-2 rounded-2xl border border-white/12 bg-titanium-950 text-[12px] text-white/90"}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-titanium-950 p-3"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Equipment"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement(I,{label:"Gym",active:oe.gym,onClick:()=>P(oe,"gym",ke)}),React.createElement(I,{label:"Dumbbells",active:oe.dumbbells,onClick:()=>P(oe,"dumbbells",ke)}),React.createElement(I,{label:"Bands",active:oe.bands,onClick:()=>P(oe,"bands",ke)}),React.createElement(I,{label:"Bodyweight",active:oe.bodyweight,onClick:()=>P(oe,"bodyweight",ke)}),React.createElement(I,{label:"Cardio",active:oe.cardio,onClick:()=>P(oe,"cardio",ke)}))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-titanium-950 p-3"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Focus"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},React.createElement(I,{label:"Upper",active:Re.upper,onClick:()=>P(Re,"upper",Me)}),React.createElement(I,{label:"Lower",active:Re.lower,onClick:()=>P(Re,"lower",Me)}),React.createElement(I,{label:"Core",active:Re.core,onClick:()=>P(Re,"core",Me)}),React.createElement(I,{label:"Conditioning",active:Re.conditioning,onClick:()=>P(Re,"conditioning",Me)})))),React.createElement("div",{className:"mt-4 flex items-center gap-2"},React.createElement("button",{type:"button",onClick:Za,className:"px-4 py-2.5 rounded-2xl bg-lime-400 text-black font-extrabold text-[12px] inline-flex items-center gap-2 hover:brightness-110"},React.createElement(_,{name:"Sparkles",size:16})," Generate week"),React.createElement("button",{type:"button",onClick:()=>{Jt(null),Tt("")},className:"px-4 py-2.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/85"},"Reset"),React.createElement("div",{className:"ml-auto text-[11px] text-white/55"},"Output becomes a ",React.createElement("span",{className:"font-bold text-white/70"},"week draft")," (edit) or a ",React.createElement("span",{className:"font-bold text-white/70"},"custom template")," (assign).")),Ct?React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-titanium-950 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Improve tools"),React.createElement("div",{className:"text-[11px] text-white/60"},"Quick refinements (no real AI call in prototype)")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:Ma,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"Shuffle",size:16})," Swap exercises"),React.createElement("button",{type:"button",onClick:$a,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"Minus",size:16})," Reduce volume"),React.createElement("button",{type:"button",onClick:Yt,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] font-extrabold text-white/85 inline-flex items-center gap-2"},React.createElement(_,{name:"Baby",size:16})," Beginner-friendly"))):null,Ye?React.createElement("div",{className:"mt-3 rounded-2xl border border-lime-400/30 bg-lime-400/10 px-4 py-3 text-[12px] text-lime-50"},React.createElement("span",{className:"font-extrabold"},"\u2705 ",Ye),React.createElement("button",{type:"button",onClick:()=>Tt(""),className:"ml-3 underline text-lime-100/80 hover:text-lime-50"},"dismiss")):null,Ct?React.createElement("div",{ref:_t,className:"mt-4 rounded-3xl border border-white/10 bg-panel p-4 md:p-5"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"Preview"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1 truncate"},Ct.name),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},Ct.desc)),React.createElement("div",{className:"flex flex-wrap gap-2 justify-end"},React.createElement("button",{type:"button",onClick:it,className:"px-4 py-2.5 rounded-2xl border border-cyan-400/30 bg-cyan-400/10 hover:bg-cyan-400/15 text-[12px] font-extrabold text-cyan-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Pencil",size:16})," Send to Plan Builder"),React.createElement("button",{type:"button",onClick:Ut,className:"px-4 py-2.5 rounded-2xl bg-cyan-400 text-black font-extrabold text-[12px] inline-flex items-center gap-2 hover:brightness-110"},React.createElement(_,{name:"ArrowRight",size:16})," Send to Assign Plan"))),React.createElement("div",{className:"mt-4 space-y-3"},Ct.weeks&&Ct.weeks[0]&&Array.isArray(Ct.weeks[0].days)?Ct.weeks[0].days.map(ce=>React.createElement("div",{key:ce.dayKey,className:"rounded-2xl border border-white/10 bg-titanium-950 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/85 uppercase"},ce.label||ce.dayKey),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest "+(ce.status==="TRAIN"?"text-lime-200":"text-white/40")},ce.status==="TRAIN"?"WORKOUT":"REST")),ce.status==="TRAIN"&&ce.sessions&&ce.sessions[0]?React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[12px] font-bold text-white/85"},ce.sessions[0].name),React.createElement("div",{className:"mt-2 space-y-2"},(ce.sessions[0].blocks||[]).map(Vt=>React.createElement("div",{key:Vt.blockId,className:"rounded-xl border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white/80"},Vt.blockType," \u2022 ",Vt.blockKind||"single"),React.createElement("div",{className:"text-[10px] text-white/50"},(Vt.exercises||[]).length," items")),React.createElement("div",{className:"mt-2 space-y-1"},(Vt.exercises||[]).map(Fe=>React.createElement("div",{key:Fe.exerciseId,className:"flex items-start justify-between gap-3 text-[11px]"},React.createElement("div",{className:"text-white/85 font-semibold min-w-0 truncate"},Fe.name),React.createElement("div",{className:"text-white/55 shrink-0"},Fe.reps?`${Fe.sets}\xD7${Fe.reps}`:`${Fe.sets} sets`," \u2022 ",Fe.rest,"s")))))))):React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"No session"))):null),React.createElement("div",{className:"mt-4 text-[10px] text-white/45"},"Safety: prototype generator (no real AI call). Output is structured to match your Plan Builder week schema.")):null)),React.createElement("div",{className:"lg:col-span-1"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-panel p-4 md:p-5"},React.createElement("div",{className:"text-[12px] font-extrabold text-white/90"},"How this matches PBEF Step 7"),React.createElement("ul",{className:"mt-3 space-y-2 text-[12px] text-white/70"},React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"text-lime-300"},"\u2022")," Output includes day structure + workouts + exercise blocks + basic set schemes."),React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"text-lime-300"},"\u2022")," Improve tools: swap exercises, reduce volume, beginner-friendly."),React.createElement("li",{className:"flex gap-2"},React.createElement("span",{className:"text-lime-300"},"\u2022")," Send to Plan Builder (edit) or Assign Plan (deploy).")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-titanium-950 p-3"},React.createElement("div",{className:"text-[10px] font-mono font-bold uppercase text-zinc-400"},"Tip"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70"},"Generate \u2192 Improve \u2192 send to Builder for detailed edits (supersets, circuits, drag/drop), then assign.")),React.createElement("div",{className:"mt-4"},React.createElement("button",{type:"button",onClick:()=>{try{o("PLAN_BUILDER")}catch(ce){}},className:"w-full px-4 py-2.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 font-extrabold text-[12px] text-white/85 inline-flex items-center justify-center gap-2"},React.createElement(_,{name:"LayoutGrid",size:16})," Go to Plan Builder"))))),React.createElement("div",{className:"mt-5 glass-panel border border-white/12 rounded-3xl p-5"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-xs font-bold uppercase tracking-wide text-white"},"Phase 1 foundations"),React.createElement("div",{className:"mt-1 text-[12px] text-zinc-300"},"TAX-REPORTING + PAYOUT-TRIGGER are supported here as foundations (not full finance operations yet).")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(eo,{compact:!0}),React.createElement(Hl,{compact:!0}))),panel==="TAX-REPORTING"&&React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-5"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-300"},"TAX-REPORTING"),React.createElement("div",{className:"mt-1 text-lg font-bold text-white"},"Tax Summary (Foundation)"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-300"},"Generates a tax summary stub for the selected date range and exports via the shared Export Engine v1."),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-3 flex-wrap"},React.createElement(Pd,{title:"Tax_Summary",getRows:()=>{var ce,Vt;return[{jurisdiction:"UAE",rate:"5%",taxable_amount:1e3,tax:50,range:((ce=sf==null?void 0:sf.dateRange)==null?void 0:ce.preset)||""},{jurisdiction:"KSA",rate:"15%",taxable_amount:600,tax:90,range:((Vt=sf==null?void 0:sf.dateRange)==null?void 0:Vt.preset)||""}]}})),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},[{k:"Taxable Amount",v:"1,600"},{k:"Estimated Tax",v:"140"}].map((ce,Vt)=>React.createElement("div",{key:Vt,className:"rounded-2xl border border-white/10 bg-black/10 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},ce.k),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},ce.v))))),panel==="PAYOUT-TRIGGER"&&React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-5"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-300"},"PAYOUT-TRIGGER"),React.createElement("div",{className:"mt-1 text-lg font-bold text-white"},"Payout Trigger (Foundation)"),React.createElement("div",{className:"mt-2 text-[12px] text-zinc-300"},"Phase 1 supports the rule stub: run payouts monthly if the last payout is \u2265 ",React.createElement("span",{className:"text-white font-semibold"},"11 days")," ago (default)."),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/10 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Default threshold"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},"11 days")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/10 p-4 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},"Last payout date (simulate)"),React.createElement("input",{id:"__payout_last",type:"date",className:"mt-2 w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 text-white text-[12px]"}),React.createElement("button",{type:"button",onClick:()=>{var ce;try{var Vt=(ce=document.getElementById("__payout_last"))==null?void 0:ce.value;if(!Vt)return alert("Choose a date");var Fe=tr(new Date(Vt)),v=tr(new Date),Te=Math.floor((v-Fe)/(1e3*60*60*24)),Se=Te>=11;sf==null||sf.logEvent("payout_trigger_checked",{days_since_last:Te,threshold:11,triggered:Se}),alert(Se?`TRIGGERED \u2705 (${Te} days since last payout)`:`NOT READY (${Te} days since last payout)`)}catch(Vt){}},className:"mt-3 w-full px-3 py-2 rounded-2xl bg-amber-500/10 border border-amber-400/30 hover:bg-amber-500/20 text-amber-100 text-[11px] font-mono uppercase tracking-widest"},"Check Trigger")))),panel==="FH-ENTRY"&&React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/10 p-4 text-[12px] text-zinc-300"},"Tip: click ",React.createElement("span",{className:"text-white font-semibold"},"TAX-REPORTING")," or ",React.createElement("span",{className:"text-white font-semibold"},"PAYOUT-TRIGGER")," above to open the Phase 1 foundation panels."))))},bc=()=>{var hr,Xr,Qr,Zr,Pl,Ml,Fl;if(!ct)return null;var o=typeof window!="undefined"?(hr=window.__FOF_TDEP)==null?void 0:hr.TRIAGE:null,d=Fr(ct),m=React.useMemo(()=>{try{return((typeof _e=="function"?_e([]):[])||[]).filter(A=>A&&String(A.clientId)===String(d)).slice(0,30)}catch(l){return[]}},[d]),E=React.useMemo(()=>{try{return((typeof N=="function"?N([]):[])||[]).filter(A=>A&&String(A.clientId)===String(d)).slice(0,30)}catch(l){return[]}},[d]),g=React.useRef(null);React.useEffect(()=>{var l,A,Ze;try{var Ue=(Ze=(A=(l=ct==null?void 0:ct.capacityScoreNow)!=null?l:ct==null?void 0:ct.capacityScore)!=null?A:ct==null?void 0:ct.readiness)!=null?Ze:null;if(g.current==null){g.current=Ue;return}var It=g.current;g.current=Ue;var va=typeof It=="number"?It:Number(It),ji=typeof Ue=="number"?Ue:Number(Ue);if(!Number.isFinite(va)||!Number.isFinite(ji))return;var ao=Math.abs(ji-va);if(ao<15)return;var Qs=(m||[]).filter(en=>en&&en.requiresReviewOnCapacityShift).slice(0,5);if(!Qs.length)return;var _s={id:`sig_cap_${d}_${Date.now()}`,clientId:String(d),type:"COMPLIANCE",severity:"MED",confidence:.7,evidence:[{k:"capacity_prev",v:String(va)},{k:"capacity_now",v:String(ji)},{k:"delta",v:String(ao)},{k:"assignments",v:Qs.map(en=>en.itemTitle).join(" | ").slice(0,180)}],summary:"Capacity shift detected \u2014 review upcoming assigned content",recommendedActions:[{id:"open_plan",label:"Open Plan tab",cta:{nav:{target:"CLIENT_ACTION",clientId:String(d),tab:"PLAN"}}},{id:"adjust",label:"Adjust plan based on Capacity Score",cta:{nav:{target:"CLIENT_ACTION",clientId:String(d),tab:"PLAN"}}}],status:"OPEN",meta:{source:"capacity_shift_guardrail",clientId:String(d),delta:ao,at:ps()}};gt(_s)}catch(Ue){}},[d,ct==null?void 0:ct.capacityScoreNow,ct==null?void 0:ct.capacityScore,m.length]);var[f,F]=React.useState([]),D=(l,A="info")=>{var Ze=`am_${Date.now()}_${Math.random().toString(16).slice(2)}`,Ue={id:Ze,msg:String(l||""),kind:A,ts:Date.now()};F(It=>[Ue,...It||[]].slice(0,4)),setTimeout(()=>F(It=>(It||[]).filter(va=>va.id!==Ze)),2400)},k=(l,A)=>{try{return JSON.parse(l)}catch(Ze){return A}},T=(l,A)=>{try{return on.set(l,JSON.stringify(A)),!0}catch(Ze){return!1}},he="fof.tdep.client_notes.v1",oe="fof.tdep.client_checkins.v1",ke="fof.td.nutrition.assignments.v1",Re="fof.td.yoga.assignments.v1",Me="fof.td.nutrition.plan_templates.v1",Et="fof.td.yoga.flows.v1",ya=()=>{try{return new Date().toISOString().slice(0,10)}catch(l){return"2026-01-02"}},Ct=(l,A)=>{try{var Ze=on.get(l)||localStorage.getItem(l);return Ze?JSON.parse(Ze):A||[]}catch(Ze){return A||[]}},Jt=(l,A)=>{try{on.set(l,JSON.stringify(A))}catch(Ze){try{localStorage.setItem(l,JSON.stringify(A))}catch(Ue){}}},Ye=React.useMemo(()=>{var l=Ct(Me,[]);return Array.isArray(l)?l:[]},[Kt,d]),Tt=React.useMemo(()=>{var l=Ct(Et,[]);return Array.isArray(l)?l:[]},[Kt,d]),_t=React.useMemo(()=>{var l=Ct(ke,[]);return(Array.isArray(l)?l:[]).filter(A=>String((A==null?void 0:A.clientId)||"")===String(d)).slice(0,50)},[Kt,d]),P=React.useMemo(()=>{var l=Ct(Re,[]);return(Array.isArray(l)?l:[]).filter(A=>String((A==null?void 0:A.clientId)||"")===String(d)).slice(0,50)},[Kt,d]),[I,te]=React.useState({templateId:"",startDate:"",durationDays:28,calories:"",protein:"",carbs:"",fat:""}),[Ce,C]=React.useState({flowId:"",startDate:"",durationDays:28,freqPerWeek:3,intensityCap:"FLOW"});React.useEffect(()=>{try{te(l=>({...l||{},startDate:ya()}))}catch(l){}try{C(l=>({...l||{},startDate:ya()}))}catch(l){}},[d]);var ye=()=>{try{var l=String((I==null?void 0:I.templateId)||"");if(!l)return D("Pick a nutrition template","error");var A=(Ye||[]).find(Qs=>String(Qs.id)===l)||null,Ze=String((I==null?void 0:I.startDate)||ya()),Ue=Math.max(1,Number((I==null?void 0:I.durationDays)||28)),It={calories:I!=null&&I.calories?Number(I.calories):null,protein:I!=null&&I.protein?Number(I.protein):null,carbs:I!=null&&I.carbs?Number(I.carbs):null,fat:I!=null&&I.fat?Number(I.fat):null},va=Ct(ke,[]),ji=new Date().toISOString(),ao={id:`nut_asn_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(d),templateId:l,templateName:String((A==null?void 0:A.name)||(A==null?void 0:A.title)||"Nutrition Template"),startDate:Ze,durationDays:Ue,macroOverride:It,status:"ACTIVE",createdAt:ji,source:"CLIENT_PROFILE"};Jt(ke,[ao,...Array.isArray(va)?va:[]].slice(0,5e3));try{window.dispatchEvent(new StorageEvent("storage",{key:ke}))}catch(Qs){}D("Nutrition plan assigned","success"),p("nutrition.assigned",{clientId:String(d),templateId:l,startDate:Ze,durationDays:Ue}),Na(Qs=>(Qs+1)%1e6)}catch(l){D("Assign failed","error")}},le=()=>{try{var l=String((Ce==null?void 0:Ce.flowId)||"");if(!l)return D("Pick a yoga flow","error");var A=(Tt||[]).find(_s=>String(_s.id)===l)||null,Ze=String((Ce==null?void 0:Ce.startDate)||ya()),Ue=Math.max(1,Number((Ce==null?void 0:Ce.durationDays)||28)),It=Math.max(1,Math.min(14,Number((Ce==null?void 0:Ce.freqPerWeek)||3))),va=String((Ce==null?void 0:Ce.intensityCap)||"FLOW"),ji=Ct(Re,[]),ao=new Date().toISOString(),Qs={id:`yoga_asn_${Date.now()}_${Math.random().toString(16).slice(2)}`,clientId:String(d),flowId:l,flowName:String((A==null?void 0:A.name)||(A==null?void 0:A.title)||"Yoga Flow"),startDate:Ze,durationDays:Ue,freqPerWeek:It,intensityCap:va,status:"ACTIVE",createdAt:ao,source:"CLIENT_PROFILE"};Jt(Re,[Qs,...Array.isArray(ji)?ji:[]].slice(0,5e3));try{window.dispatchEvent(new StorageEvent("storage",{key:Re}))}catch(_s){}D("Yoga flow assigned","success"),p("yoga.assigned",{clientId:String(d),flowId:l,startDate:Ze,durationDays:Ue,freqPerWeek:It,intensityCap:va}),Na(_s=>(_s+1)%1e6)}catch(l){D("Assign failed","error")}},O=(l,A)=>{try{var Ze=Ct(l,[]),Ue=(Array.isArray(Ze)?Ze:[]).map(It=>String((It==null?void 0:It.id)||"")===String(A)?{...It,status:"COMPLETED",completedAt:new Date().toISOString()}:It);Jt(l,Ue);try{window.dispatchEvent(new StorageEvent("storage",{key:l}))}catch(It){}D("Marked complete","success"),Na(It=>(It+1)%1e6)}catch(Ze){D("Could not mark complete","error")}},qe=(l,A)=>{try{var Ze=Ct(l,[]),Ue=(Array.isArray(Ze)?Ze:[]).map(It=>String((It==null?void 0:It.id)||"")===String(A)?{...It,status:"ARCHIVED",archivedAt:new Date().toISOString()}:It);Jt(l,Ue);try{window.dispatchEvent(new StorageEvent("storage",{key:l}))}catch(It){}D("Archived","success"),Na(It=>(It+1)%1e6)}catch(Ze){D("Could not archive","error")}},Pt="fof.tdep.sport_context.v1",Za="fof.tdep.library_launch_ctx.v1",Ma=React.useMemo(()=>[{id:"GENERAL",label:"General / Fitness",tags:["strength","conditioning"]},{id:"RUNNING",label:"Running",tags:["aerobic","threshold","intervals"]},{id:"FOOTBALL",label:"Football",tags:["speed","power","conditioning"]},{id:"SOCCER",label:"Soccer",tags:["speed","conditioning","agility"]},{id:"CYCLING",label:"Cycling",tags:["endurance","power","intervals"]},{id:"CROSSFIT",label:"CrossFit",tags:["metcon","strength","skills"]},{id:"BODYBUILDING",label:"Bodybuilding",tags:["hypertrophy","volume"]},{id:"POWERLIFTING",label:"Powerlifting",tags:["strength","peaking"]},{id:"HYROX",label:"Hyrox",tags:["hybrid","conditioning","strength"]}],[]),$a=["OFFSEASON","PRESEASON","INSEASON","TAPER","REHAB"],Yt=["BEGINNER","INTERMEDIATE","ADVANCED","ELITE"],it=React.useCallback(()=>{try{var l=on.get(Pt);return(k(l||"null",null)||{})[d]||null}catch(l){return null}},[d]),Ut=React.useCallback(l=>{try{var A=on.get(Pt),Ze=k(A||"null",null)||{};Ze[d]=l,T(Pt,Ze);try{window.dispatchEvent(new CustomEvent("fof:sport_context_updated",{detail:{clientId:String(d),sportId:l==null?void 0:l.sportId}}))}catch(Ue){}return Na(Ue=>(Ue+1)%1e6),!0}catch(A){return!1}},[d]),[ce,Vt]=React.useState(()=>it()||{sportId:"GENERAL",seasonPhase:"OFFSEASON",level:"INTERMEDIATE",updatedAt:new Date().toISOString()});React.useEffect(()=>{var l=it();Vt(l||{sportId:"GENERAL",seasonPhase:"OFFSEASON",level:"INTERMEDIATE",updatedAt:new Date().toISOString()})},[d]);var Fe=React.useMemo(()=>{var l=String((ce==null?void 0:ce.sportId)||"GENERAL");return(Ma||[]).find(A=>String(A.id)===l)||(Ma||[])[0]},[ce==null?void 0:ce.sportId,Ma]),v=()=>{var A;var l={...ce||{},updatedAt:new Date().toISOString(),updatedBy:"trainer"};Ut(l);try{(A=sf==null?void 0:sf.logEvent)==null||A.call(sf,"sport.context.set",{clientId:String(d),sportId:l.sportId,seasonPhase:l.seasonPhase,level:l.level})}catch(Ze){}D(`Sport context set: ${(Fe==null?void 0:Fe.label)||l.sportId}`,"success")},Te=()=>{var l;try{var A={clientId:String(d),sportId:String((ce==null?void 0:ce.sportId)||"GENERAL"),q:String((Fe==null?void 0:Fe.label)||""),tagHint:((Fe==null?void 0:Fe.tags)||[])[0]||"",ts:Date.now()};T(Za,A);try{(l=sf==null?void 0:sf.logEvent)==null||l.call(sf,"sport.context.open_library",A)}catch(Ze){}D("Opening library with sport bias\u2026","info"),u("CONTENT_LIBRARY")}catch(A){try{u("CONTENT_LIBRARY")}catch(Ze){}}},[Se,yt]=React.useState("OVERVIEW"),[St,za]=React.useState({open:!1,mode:"ASSIGN",templateId:"",assignmentId:null}),[Xe,dt]=React.useState(!1),Qt="fof.tdep.periodization.v1",yi=()=>{try{return new Date().toISOString().slice(0,10)}catch(l){return"2026-01-02"}},zi=()=>{try{return k(on.get(Qt)||"null",null)||{}}catch(l){return{}}},os=l=>{try{return T(Qt,l||{}),!0}catch(A){return!1}},as=(Zr=(Qr=(Xr=ct==null?void 0:ct.capacityScoreNow)!=null?Xr:ct==null?void 0:ct.capacityScore)!=null?Qr:ct==null?void 0:ct.readiness)!=null?Zr:70,ro=(()=>{var l=Number(as);return Number.isFinite(l)?l<45?"LOW":l>=75?"HIGH":"MID":"MID"})(),n=ro==="LOW"?.8:ro==="HIGH"?1.05:.95,y=(l,A,Ze,Ue)=>{var It=String(l||"GENERAL"),va=(Ma||[]).find(el=>String(el.id)===It)||(Ma||[])[0],ji=Number(Ue||12),ao=Math.max(3,Math.round(ji*.35)),Qs=Math.max(3,Math.round(ji*.35)),_s=Math.max(2,Math.round(ji*.2)),en=Math.max(1,ji-(ao+Qs+_s)),dr=[{id:`meso_${Math.random().toString(16).slice(2)}`,name:"Base",weeks:ao,focus:((va==null?void 0:va.tags)||[])[0]||"general",intensity:"LOW\u2192MID",deloadEvery:4},{id:`meso_${Math.random().toString(16).slice(2)}`,name:"Build",weeks:Qs,focus:((va==null?void 0:va.tags)||[])[1]||((va==null?void 0:va.tags)||[])[0]||"strength",intensity:"MID\u2192HIGH",deloadEvery:4},{id:`meso_${Math.random().toString(16).slice(2)}`,name:"Peak",weeks:_s,focus:((va==null?void 0:va.tags)||[])[2]||((va==null?void 0:va.tags)||[])[1]||"performance",intensity:"HIGH",deloadEvery:0},{id:`meso_${Math.random().toString(16).slice(2)}`,name:"Deload",weeks:en,focus:"recovery",intensity:"LOW",deloadEvery:0}].filter(el=>el.weeks>0);return{id:`peri_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`,clientId:String(d||""),sportId:It,seasonPhase:String(A||"OFFSEASON"),level:String(Ze||"INTERMEDIATE"),startDate:yi(),totalWeeks:ji,capZone:ro,capModifier:n,macroGoal:It==="BODYBUILDING"?"HYPERTROPHY":It==="POWERLIFTING"?"STRENGTH":It==="RUNNING"||It==="CYCLING"?"ENDURANCE":"PERFORMANCE",mesocycles:dr,notes:"",updatedAt:new Date().toISOString()}},be=()=>{var A=zi()[String(d||"")];return A&&A.mesocycles?A:y(ce==null?void 0:ce.sportId,ce==null?void 0:ce.seasonPhase,ce==null?void 0:ce.level,12)},[ie,Dt]=React.useState(()=>be());React.useEffect(()=>{try{Dt(be())}catch(l){}},[d]);var b=l=>{var A;try{var Ze=zi();Ze[String(d||"")]=l,os(Ze);try{(A=sf==null?void 0:sf.logEvent)==null||A.call(sf,"periodization.saved",{clientId:String(d),sportId:l==null?void 0:l.sportId,weeks:l==null?void 0:l.totalWeeks})}catch(Ue){}D("Periodization saved","success")}catch(Ze){D("Could not save periodization","error")}},We=()=>{var l=Number((ie==null?void 0:ie.totalWeeks)||12),A=y(ce==null?void 0:ce.sportId,ce==null?void 0:ce.seasonPhase,ce==null?void 0:ce.level,l);Dt(A),D("Regenerated from Sport Context","info")},da=()=>{var l,A;try{var Ze=ps(),Ue=`Periodization (${String((ie==null?void 0:ie.sportId)||"GENERAL")}) \u2022 ${Number((ie==null?void 0:ie.totalWeeks)||12)}w`,It={id:`pq_peri_${Date.now()}_${Math.random().toString(16).slice(2)}`,assignmentId:String((ie==null?void 0:ie.id)||""),clientId:String(d||""),clientName:String((ct==null?void 0:ct.name)||""),itemId:String((ie==null?void 0:ie.id)||""),itemType:"PERIODIZATION",title:Ue,scheduledFor:String((ie==null?void 0:ie.startDate)||Ze.slice(0,10)),delivery:"PLAN",status:"SCHEDULED",createdAt:Ze,meta:{periPlan:ie}};try{G(It)}catch(va){}try{(A=(l=window.__FOF_TDEP)==null?void 0:l.logEvent)==null||A.call(l,"periodization.exported",{clientId:It.clientId,planQueueId:It.id,title:Ue,periId:It.itemId,startDate:It.scheduledFor,totalWeeks:Number((ie==null?void 0:ie.totalWeeks)||0)},{surface:"client_action_mode",module:"periodization"})}catch(va){}D("Exported to Plan Queue","success"),yt("PLAN")}catch(Ze){D("Export failed","error")}};React.useEffect(()=>{try{yt("OVERVIEW")}catch(l){}},[d]);var[ii,jt]=React.useState("ALL"),[Kt,Na]=React.useState(0);React.useEffect(()=>{var l=()=>Na(Ue=>(Ue+1)%1e6),A=()=>l(),Ze=Ue=>{try{var It=String((Ue==null?void 0:Ue.key)||"");(It.startsWith("fof.tdep.triage_")||It==="fof.tdep.action_log.v1"||It==="fof_inbox_v1"||It===he||It===oe||It==="fof.td.nutrition.assignments.v1"||It==="fof.td.yoga.assignments.v1")&&l()}catch(It){}};try{window.addEventListener("fof:triage_updated",A)}catch(Ue){}try{window.addEventListener("storage",Ze)}catch(Ue){}return()=>{try{window.removeEventListener("fof:triage_updated",A)}catch(Ue){}try{window.removeEventListener("storage",Ze)}catch(Ue){}}},[]);var ra=l=>{try{return(typeof l=="number"?new Date(l):new Date(l)).toLocaleString([],{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(A){return"\u2014"}},Ti=()=>{var l=on.get(he),A=k(l||"null",null)||{};return Array.isArray(A[d])?A[d]:[]},Ee=l=>{var A=on.get(he),Ze=k(A||"null",null)||{};Ze[d]=l,T(he,Ze),Na(Ue=>(Ue+1)%1e6)},ae=()=>{var l=on.get(oe);return(k(l||"null",null)||{})[d]||null},Ot=l=>{var A=on.get(oe),Ze=k(A||"null",null)||{};Ze[d]={nextAt:l,updatedAt:new Date().toISOString()},T(oe,Ze),Na(Ue=>(Ue+1)%1e6)},xe=()=>{var l="fof_inbox_v1";if(!d||typeof localStorage=="undefined")return null;var A=localStorage.getItem(l);var Ze=k(A||"null",null);(!Ze||!Ze.threads||!Ze.messages)&&(Ze={threads:[],messages:{}});var Ue="t_client_"+d;if(!(Ze.threads||[]).find(va=>va.id===Ue)){var va={id:Ue,type:"CLIENT",clientId:d,title:ct.name,participants:["You",ct.name],lastAt:Date.now(),unread:0};Ze.threads=[va,...Ze.threads||[]],Ze.messages={...Ze.messages||{},[Ue]:[{id:"m_seed",from:"You",ts:Date.now(),body:"Hey! Quick note from your coach."}]},localStorage.setItem(l,JSON.stringify(Ze));try{Bt("trainer.inbox.thread_created",{type:"CLIENT",clientId:d,source:"client_action_mode"})}catch(ji){}}try{window.__FOF_TDEP=window.__FOF_TDEP||{},window.__FOF_TDEP.__pendingOpenThreadId=Ue,window.__FOF_TDEP.__pendingOpenThreadAt=new Date().toISOString()}catch(va){}return Ue},p=(l,A)=>{var Ze,Ue;try{(Ue=(Ze=window.__FOF_TDEP)==null?void 0:Ze.logEvent)==null||Ue.call(Ze,l,A,{surface:"client_action_mode",module:"client"})}catch(It){}},R=React.useMemo(()=>{var l;try{return(((l=o==null?void 0:o.getQueue)==null?void 0:l.call(o))||[]).filter(Ze=>String(Ze.clientId||"")===String(d))}catch(A){return[]}},[o,d,Kt]),Ve=React.useMemo(()=>Ti(),[d,Kt]),pa=React.useMemo(()=>ae(),[d,Kt]),qt=typeof ct.capacityScoreNow=="number"?ct.capacityScoreNow:typeof ct.readiness=="number"?ct.readiness:null,pi=(l=>{var A=Number(l||0);return isFinite(A)?A>=80?{txt:`${Math.round(A)}/100 High`,cls:"text-emerald-300"}:A>=65?{txt:`${Math.round(A)}/100 OK`,cls:"text-amber-300"}:A>=50?{txt:`${Math.round(A)}/100 Low`,cls:"text-orange-300"}:{txt:`${Math.round(A)}/100 Critical`,cls:"text-red-300"}:{txt:"\u2014",cls:"text-white/70"}})(qt),cs=()=>{xe(),p("client_action.message_open",{clientId:d}),u("INBOX"),D("Opened client thread","success")},Gi=()=>{p("client_action.capacity_open",{clientId:d}),u("READINESS_DETAIL")},pe=()=>{try{window.__FOF_TDEP=window.__FOF_TDEP||{},window.__FOF_TDEP.__aiPrefill={clientId:d,clientName:ct.name,goal:ct.goal||ct.segment||"General",equipment:"mixed",sessionMins:45,daysPerWeek:4}}catch(l){}p("client_action.ai_program_open",{clientId:d}),u("PLAN_AI_GENERATOR"),D("AI Program Generator opened (prefilled)","success")},Sa=()=>{var l=prompt("Add a coach note (saved to client record):");if(!l||!String(l).trim())return;var A=[{id:"n_"+Date.now(),ts:new Date().toISOString(),body:String(l).trim()},...Ve||[]];Ee(A.slice(0,100)),p("client_action.note_added",{clientId:d,len:String(l).trim().length}),D("Note saved","success")},Ji=()=>{var l=new Date;l.setDate(l.getDate()+7);var A=l.toISOString();Ot(A),p("client_action.checkin_scheduled",{clientId:d,nextAt:A,days:7}),D("Check-in scheduled (7 days)","success")},wo=l=>{var A;try{(A=o==null?void 0:o.markInProgress)==null||A.call(o,l),p("triage.in_progress",{clientId:d,sigId:l}),D("Marked in progress","success"),Na(Ze=>(Ze+1)%1e6)}catch(Ze){D("Could not update status","error")}},Ns=l=>{var A;try{(A=o==null?void 0:o.snoozeSignal)==null||A.call(o,l,60),p("triage.snooze",{clientId:d,sigId:l,minutes:60}),D("Snoozed 60 minutes","warn"),Na(Ze=>(Ze+1)%1e6)}catch(Ze){D("Could not snooze","error")}},Us=l=>{var A;try{(A=o==null?void 0:o.resolveSignal)==null||A.call(o,l),p("triage.resolve",{clientId:d,sigId:l}),D("Resolved","success"),Na(Ze=>(Ze+1)%1e6)}catch(Ze){D("Could not resolve","error")}},Uo=({id:l,label:A})=>React.createElement("button",{type:"button",onClick:()=>yt(l),className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(Se===l?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)] text-white":"border-white/12 bg-white/5 hover:bg-white/10 text-white/70")},A);return React.createElement("div",{className:"relative w-full overflow-y-auto scroll-area",style:{height:"calc(var(--vh, 1vh) * 100)"}},React.createElement("div",{className:"px-4 py-4 space-y-5 pb-28"},f.length?React.createElement("div",{className:"fixed top-4 right-4 z-[9999] space-y-2"},f.map(l=>React.createElement("div",{key:l.id,className:"max-w-[360px] rounded-2xl border px-3 py-2 shadow-xl backdrop-blur "+(l.kind==="success"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-50":l.kind==="warn"?"border-amber-400/30 bg-amber-500/10 text-amber-50":l.kind==="error"?"border-red-400/30 bg-red-500/10 text-red-50":"border-white/15 bg-black/40 text-white")},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest opacity-70"},l.kind==="success"?"Done":l.kind==="warn"?"Update":l.kind==="error"?"Error":"Info"),React.createElement("div",{className:"text-[12px] font-semibold"},l.msg)))):null,React.createElement("div",{className:"sticky top-0 z-40 -mx-4 px-4 pt-2 pb-3 backdrop-blur bg-zinc-900/80 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>u("CLIENT_LIST"),className:"text-zinc-400 hover:text-white text-xs font-bold uppercase flex items-center gap-2"},React.createElement(_,{name:"ArrowLeft",size:14})," Back to Clients"),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{u("CLIENT_CRM")}catch(l){}},className:"px-3 py-2 rounded-2xl border border-amber-400/25 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-mono uppercase tracking-widest text-amber-100",title:"Open client records (CRM)"},"Records"),React.createElement("button",{type:"button",onClick:cs,className:"px-3 py-2 rounded-2xl border border-sky-400/20 bg-sky-500/10 hover:bg-sky-500/15 text-[11px] font-mono uppercase tracking-widest text-sky-100"},"Message"),React.createElement("button",{type:"button",onClick:pe,className:"px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] font-mono uppercase tracking-widest text-emerald-100"},"Assign program"),React.createElement("button",{type:"button",onClick:Sa,className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Log note"),React.createElement("button",{type:"button",onClick:Ji,className:"px-3 py-2 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-mono uppercase tracking-widest text-amber-100"},"Schedule check-in"))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Client"),React.createElement("div",{className:"text-white font-extrabold text-[18px] truncate"},ci(ct.name)),React.createElement("div",{className:"mt-1 flex flex-wrap gap-2 text-[11px] text-white/70"},React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},"ID: ",String(d||"\u2014")),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},"Tier: ",String(ct.tier||"\u2014")),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5"},"Goal: ",String(ct.goal||ct.segment||"\u2014")),React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5 "+pi.cls},"Capacity: ",pi.txt),pa!=null&&pa.nextAt?React.createElement("span",{className:"px-2 py-1 rounded-full border border-amber-400/20 bg-amber-500/10 text-amber-100"},"Next check-in: ",ra(pa.nextAt)):React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/12 bg-white/5 text-white/60"},"Next check-in: \u2014"))),React.createElement("button",{type:"button",onClick:Gi,className:"px-3 py-2 rounded-2xl border border-orange-400/20 bg-orange-500/10 hover:bg-orange-500/15 text-[11px] font-mono uppercase tracking-widest text-orange-100"},"View Capacity"))),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(Uo,{id:"OVERVIEW",label:"Overview"}),React.createElement(Uo,{id:"PLAN",label:"Plan"}),React.createElement(Uo,{id:"LOGS",label:"Logs"}),React.createElement(Uo,{id:"MESSAGES",label:"Messages"}),React.createElement(Uo,{id:"NOTES",label:"Notes"}),React.createElement(Uo,{id:"ADMIN",label:"Admin"}))),Se==="OVERVIEW"&&React.createElement("div",{className:"grid grid-cols-12 gap-4"},React.createElement("div",{className:"col-span-12 lg:col-span-9 space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Phase C"),React.createElement("div",{className:"mt-1 text-white font-extrabold text-[13px]"},"Booking-aware client"),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},"Upcoming sessions timeline \xB7 One-click book next session \xB7 History + no-show tracking")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{var l="FOF_TD_BOOKING_PREFILL_V1",A=new Date,Ze=ji=>String(ji).padStart(2,"0"),Ue=new Date(A.getTime()+24*60*60*1e3),It=`${Ue.getFullYear()}-${Ze(Ue.getMonth()+1)}-${Ze(Ue.getDate())}`,va={clientId:String(d||""),clientName:String((ct==null?void 0:ct.name)||""),date:It,time:"10:00",durationMin:60,type:"PT",source:"CLIENT_ACTION_MODE_PHASE_C",ts:Date.now()};localStorage.setItem(l,JSON.stringify(va)),D("Booking draft created \u2014 opening Calendar\u2026","info"),u("CALENDAR")}catch(l){try{u("CALENDAR")}catch(A){}}},className:"px-3 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"CalendarPlus",size:14})," Book next session"))),(()=>{var l="FOF_TD_SESSIONS_V1",A=(Rs,Gn)=>{try{return JSON.parse(Rs)}catch(vc){return Gn}},Ze=()=>{try{return A(localStorage.getItem(l)||"[]",[])||[]}catch(Rs){return[]}},Ue=Rs=>{try{localStorage.setItem(l,JSON.stringify(Rs||[]))}catch(Gn){}},It=Date.now(),va=Rs=>{try{return new Date(Rs).getTime()}catch(Gn){return NaN}},ji=(Ze()||[]).filter(Rs=>Rs&&String(Rs.clientId||"")===String(d||"")),ao=ji.filter(Rs=>String(Rs.status||"SCHEDULED").toUpperCase()==="SCHEDULED"&&va(Rs.startAt||Rs.start||Rs.when||0)>=It).sort((Rs,Gn)=>va(Rs.startAt||Rs.start||Rs.when||0)-va(Gn.startAt||Gn.start||Gn.when||0)).slice(0,5),Qs=ji.filter(Rs=>va(Rs.startAt||Rs.start||Rs.when||0)<It).sort((Rs,Gn)=>va(Gn.startAt||Gn.start||Gn.when||0)-va(Rs.startAt||Rs.start||Rs.when||0)).slice(0,8),_s=ji.filter(Rs=>String(Rs.status||"").toUpperCase()==="NO_SHOW").length,en=(ji||[]).filter(Rs=>String(Rs.status||"").toUpperCase()==="COMPLETED"),dr=en.filter(Rs=>!Rs.paid&&String(Rs.billTo||"PAYG").toUpperCase()!=="PACKAGE").length,el=en.filter(Rs=>!Rs.paid&&String(Rs.billTo||"PAYG").toUpperCase()!=="PACKAGE").reduce((Rs,Gn)=>Rs+Number(Gn.price||0),0),Zd=Rs=>{try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"AED",maximumFractionDigits:0}).format(Number(Rs||0))}catch(Gn){return String(Number(Rs||0).toFixed(0))}},ec=((()=>{try{return k(localStorage.getItem("FOF_TD_PACKAGES_V1")||"[]",[])||[]}catch(Rs){return[]}})()||[]).filter(Rs=>Rs&&String(Rs.clientId||"")===String(d||"")),Ul=en.filter(Rs=>String(Rs.billTo||"PAYG").toUpperCase()==="PACKAGE").length,hc=(ec||[]).reduce((Rs,Gn)=>Rs+Number(Gn.totalSessions||0),0),_c=Math.max(0,hc-Ul),gc=Rs=>{try{return new Date(Rs).toLocaleString([],{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(Gn){return"\u2014"}},tc=(Rs,Gn)=>{try{var kc=(Ze()||[]).map(gd=>String(gd.id||"")===String(Rs||"")?{...gd||{},status:Gn,updatedAt:new Date().toISOString()}:gd);Ue(kc),Na(gd=>(gd+1)%1e6),D(`Session marked: ${Gn}`,"success")}catch(vc){D("Could not update session","error")}};if(!ji.length)try{var Rs=[{id:`sess_${d}_1`,clientId:String(d),clientName:String((ct==null?void 0:ct.name)||""),startAt:new Date(Date.now()+72e5).toISOString(),durationMin:60,type:"PT",status:"SCHEDULED"},{id:`sess_${d}_2`,clientId:String(d),clientName:String((ct==null?void 0:ct.name)||""),startAt:new Date(Date.now()-2592e5).toISOString(),durationMin:60,type:"PT",status:"COMPLETED"}],Gn=Ze();Ue([...Gn||[],...Rs])}catch(Rs){}return React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 lg:col-span-2"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white"},"Upcoming sessions"),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Next 5")),(ao||[]).length?React.createElement("div",{className:"mt-2 space-y-2"},ao.map(Rs=>React.createElement("div",{key:Rs.id,className:"rounded-2xl border border-white/10 bg-black/25 p-3 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white font-bold truncate"},gc(Rs.startAt||Rs.start||Rs.when)),React.createElement("div",{className:"text-[11px] text-white/55 mt-0.5"},String(Rs.type||"Session")," \u2022 ",Number(Rs.durationMin||60),"m")),React.createElement("button",{type:"button","data-no-nav":!0,onClick:()=>{try{localStorage.setItem("FOF_TD_BOOKING_PREFILL_V1",JSON.stringify({...Rs||{},id:Rs.id||null}))}catch(Gn){}try{u("CALENDAR")}catch(Gn){}},className:"shrink-0 px-2.5 py-1.5 rounded-2xl border border-cyan-400/25 bg-cyan-500/10 hover:bg-cyan-500/15 text-[10px] font-mono uppercase tracking-widest text-cyan-100"},"Open")))):React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/25 p-3 text-[11px] text-white/60"},"No upcoming sessions. Use ",React.createElement("span",{className:"text-white/80 font-semibold"},"Book next session"),".")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white"},"Attendance"),React.createElement("button",{type:"button",className:"rounded-lg border border-white/15 bg-white/5 px-2 py-1 text-[10px] font-semibold text-white hover:bg-white/10",onClick:()=>{try{u("SESSION_RECON")}catch(Rs){}}},"Reconciliation")),React.createElement("div",{className:"mt-2 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"No-shows"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},_s)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"History"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},Qs.length)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Pkg left"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},_c),React.createElement("div",{className:"mt-1 text-[10px] text-white/45"},"used ",Ul,"/",hc)),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Unpaid PAYG"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white"},dr),React.createElement("div",{className:"mt-1 text-[10px] text-white/45"},Zd(el)))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Track no-shows for retention risk.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 lg:col-span-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-extrabold text-white"},"Session history"),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Last 8")),(Qs||[]).length?React.createElement("div",{className:"mt-2 space-y-2"},Qs.map(Rs=>React.createElement("div",{key:Rs.id,className:"rounded-2xl border border-white/10 bg-black/25 p-3 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] text-white font-bold truncate"},gc(Rs.startAt||Rs.start||Rs.when)),React.createElement("div",{className:"text-[11px] text-white/55 mt-0.5"},String(Rs.type||"Session")," \u2022 ",Number(Rs.durationMin||60),"m \u2022 ",React.createElement("span",{className:"text-white/80 font-semibold"},String(Rs.status||"\u2014")))),React.createElement("div",{className:"flex items-center gap-1.5 shrink-0","data-no-nav":!0},React.createElement("button",{type:"button",onClick:()=>tc(Rs.id,"COMPLETED"),className:"px-2 py-1 rounded-xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Done"),React.createElement("button",{type:"button",onClick:()=>tc(Rs.id,"NO_SHOW"),className:"px-2 py-1 rounded-xl border border-rose-400/20 bg-rose-500/10 hover:bg-rose-500/15 text-[10px] font-mono uppercase tracking-widest text-rose-100"},"No-show"),React.createElement("button",{type:"button",onClick:()=>tc(Rs.id,"CANCELLED"),className:"px-2 py-1 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Cancel"))))):React.createElement("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/25 p-3 text-[11px] text-white/60"},"No history yet.")))})()),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Sport Context"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Changes ",React.createElement("span",{className:"text-white/85 font-semibold"},"templates")," + ",React.createElement("span",{className:"text-white/85 font-semibold"},"metrics panels")," only.",React.createElement("span",{className:"text-white/45"}," (Core OS unchanged)"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:Te,className:"px-3 py-2 rounded-2xl border border-cyan-400/25 bg-cyan-500/10 hover:bg-cyan-500/15 text-cyan-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Library",size:14})," Open Library"),React.createElement("button",{type:"button",onClick:v,className:"px-3 py-2 rounded-2xl border border-lime-400/25 bg-lime-500/10 hover:bg-lime-500/15 text-lime-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Check",size:14})," Apply"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Sport"),React.createElement("select",{value:(ce==null?void 0:ce.sportId)||"GENERAL",onChange:l=>Vt(A=>({...A||{},sportId:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},(Ma||[]).map(l=>React.createElement("option",{key:l.id,value:l.id},l.label))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Tags: ",((Fe==null?void 0:Fe.tags)||[]).slice(0,3).join(" \u2022 ")||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Season"),React.createElement("select",{value:(ce==null?void 0:ce.seasonPhase)||"OFFSEASON",onChange:l=>Vt(A=>({...A||{},seasonPhase:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},$a.map(l=>React.createElement("option",{key:l,value:l},l))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Applies panel emphasis.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Level"),React.createElement("select",{value:(ce==null?void 0:ce.level)||"INTERMEDIATE",onChange:l=>Vt(A=>({...A||{},level:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},Yt.map(l=>React.createElement("option",{key:l,value:l},l))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Saved per client."))),React.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Readiness"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},Math.round((Fl=(Ml=(Pl=ct==null?void 0:ct.capacityScoreNow)!=null?Pl:ct==null?void 0:ct.capacityScore)!=null?Ml:ct==null?void 0:ct.readiness)!=null?Fl:70))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Assignments"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},(m||[]).length)),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},((Fe==null?void 0:Fe.tags)||[])[0]||"Focus 1"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Preset signal")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},((Fe==null?void 0:Fe.tags)||[])[1]||"Focus 2"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Preset signal")))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Open coaching items"),React.createElement("div",{className:"text-[11px] text-white/55"},"From Unified AI Triage")),React.createElement("div",{className:"text-[11px] text-white/55 font-mono"},R.length," open")),React.createElement("div",{className:"p-4 space-y-2"},R.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"No urgent items"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Use quick actions above to message, assign, or schedule check-ins.")):R.slice(0,6).map(l=>{var A;return React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},l.title||l.type),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Severity ",Math.round(Number(l.severity||0))," \u2022 Confidence ",Math.round(Number(l.confidence||0)*100),"%"),(A=l.evidence)!=null&&A.length?React.createElement("div",{className:"text-[11px] text-white/70 mt-2"},React.createElement("span",{className:"text-white/45"},"Evidence:")," ",l.evidence.slice(0,2).join(" \u2022 ")):null),React.createElement("div",{className:"flex items-center gap-2 shrink-0"},React.createElement("button",{onClick:()=>wo(l.id),className:"px-2.5 py-1.5 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[10px] font-mono uppercase tracking-widest text-amber-100"},"In progress"),React.createElement("button",{onClick:()=>Ns(l.id),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Snooze"),React.createElement("button",{onClick:()=>Us(l.id),className:"px-2.5 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Resolve"))))}))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Next best actions"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Fast actions used daily by real coaches"),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("button",{onClick:cs,className:"text-left rounded-2xl border border-white/12 bg-black/20 hover:bg-black/30 p-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-sky-400/20 bg-sky-500/10 flex items-center justify-center"},React.createElement(_,{name:"MessageSquare",size:18,className:"text-sky-100"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"Send a check-in message"),React.createElement("div",{className:"text-[11px] text-white/55"},"Use templates, confirm plan, unblock adherence")))),React.createElement("button",{onClick:pe,className:"text-left rounded-2xl border border-white/12 bg-black/20 hover:bg-black/30 p-4"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-emerald-100"})),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"Generate / adjust program"),React.createElement("div",{className:"text-[11px] text-white/55"},"AI draft \u2192 coach edits \u2192 assign"))))))),React.createElement("div",{className:"col-span-12 lg:col-span-3 space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Client notes"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Private to coach (saved)"),React.createElement("div",{className:"mt-3 space-y-2"},(Ve||[]).length?(Ve||[]).slice(0,4).map(l=>React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},ra(l.ts)),React.createElement("div",{className:"text-[12px] text-white/85 mt-1"},l.body))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"No notes yet.")),React.createElement("button",{onClick:Sa,className:"mt-3 w-full px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Add note")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Check-in schedule"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Keep consistency and reduce churn"),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/60"},"Next check-in"),React.createElement("div",{className:"text-[12px] text-white/85 font-mono mt-1"},pa!=null&&pa.nextAt?ra(pa.nextAt):"\u2014")),React.createElement("button",{onClick:Ji,className:"mt-3 w-full px-3 py-2 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-mono uppercase tracking-widest text-amber-100"},"Schedule +7 days")))),Se==="PLAN"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Plan"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Assign and adjust programs for this client"),React.createElement("div",{className:"mt-3 flex gap-2 flex-wrap"},React.createElement("button",{onClick:pe,className:"px-3 py-2 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[11px] font-mono uppercase tracking-widest text-emerald-100"},"Open AI Program Generator"),React.createElement("button",{onClick:()=>{p("client_action.plan_builder_open",{clientId:d}),u("PLAN_HOME"),D("Opened Plan Hub","success")},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open Plan Hub")),React.createElement("div",{className:"mt-4 text-[12px] text-white/60"},"Phase 1.5+ will surface assigned instances directly here (editable timeline). For now, use ",React.createElement("span",{className:"text-white font-semibold"},"Plan Hub")," to assign and preview.")),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Nutrition assignments"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Assign a nutrition plan template (trainer-side). Client UI unchanged.")),React.createElement("button",{type:"button",onClick:()=>{try{u("NUTRITION_PLAN_BUILDER")}catch(l){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open Builder")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Template"),React.createElement("select",{value:I.templateId,onChange:l=>te(A=>({...A||{},templateId:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},React.createElement("option",{value:""},"Select template\u2026"),(Ye||[]).slice(0,500).map(l=>React.createElement("option",{key:l.id,value:l.id},l.name||l.title||"Template "+l.id)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Start date"),React.createElement("input",{type:"date",value:I.startDate||ya(),onChange:l=>te(A=>({...A||{},startDate:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(I.durationDays||28),onChange:l=>te(A=>({...A||{},durationDays:Number(l.target.value||28)})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/70"},"Quick adjust macros (optional)"),React.createElement("div",{className:"text-[10px] text-white/45"},"Set any field to override template defaults.")),React.createElement("button",{type:"button",onClick:()=>{var l,A,Ze,Ue,It,va,ji,ao;try{var Qs=(Ye||[]).find(Ul=>String(Ul.id||Ul._id)===String(I.templateId||"")),_s=Qs&&(Qs.macroOverride||Qs.macros)?Qs.macroOverride||Qs.macros:{},en=activeClient||client||{},dr=window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestMacroOverride=="function"?window.__FOF.AI.suggestMacroOverride(en,_s||{}):{},el=Number((A=(l=dr.calories)!=null?l:_s.calories)!=null?A:2e3),Zd=Number((Ue=(Ze=dr.protein)!=null?Ze:_s.protein)!=null?Ue:150),xc=Number((va=(It=dr.carbs)!=null?It:_s.carbs)!=null?va:200),ec=Number((ao=(ji=dr.fat)!=null?ji:_s.fat)!=null?ao:70);te(Ul=>({...Ul||{},calories:String(Math.round(el)),protein:String(Math.round(Zd)),carbs:String(Math.round(xc)),fat:String(Math.round(ec))}));try{setToast&&setToast({tone:"lime",msg:"AI: Macro suggestion applied."})}catch(Ul){}}catch(Qs){console.warn("AI Suggest Macros failed",Qs);try{setToast&&setToast({tone:"red",msg:"AI Suggest Macros failed (see console)."})}catch(_s){}}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"AI Suggest Macros"),React.createElement("button",{type:"button",onClick:ye,className:"px-3 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Assign")),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("input",{placeholder:"Calories",value:I.calories,onChange:l=>te(A=>({...A||{},calories:l.target.value})),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}),React.createElement("input",{placeholder:"Protein",value:I.protein,onChange:l=>te(A=>({...A||{},protein:l.target.value})),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}),React.createElement("input",{placeholder:"Carbs",value:I.carbs,onChange:l=>te(A=>({...A||{},carbs:l.target.value})),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}),React.createElement("input",{placeholder:"Fat",value:I.fat,onChange:l=>te(A=>({...A||{},fat:l.target.value})),className:"px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Active assignments"),React.createElement("div",{className:"mt-2 space-y-2"},(_t||[]).filter(l=>String(l.status||"")==="ACTIVE").length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"No active nutrition assignments yet."):(_t||[]).filter(l=>String(l.status||"")==="ACTIVE").slice(0,6).map(l=>React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},l.templateName),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Start ",l.startDate," \u2022 ",Number(l.durationDays||0),"d")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>O(ke,l.id),className:"px-2.5 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Complete"),React.createElement("button",{type:"button",onClick:()=>qe(ke,l.id),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Archive")))))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Yoga & wellness assignments"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Assign a flow / session (trainer-side). Client UI unchanged.")),React.createElement("button",{type:"button",onClick:()=>{try{u("YOGA_FLOW_BUILDER")}catch(l){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Open Builder")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Flow"),React.createElement("select",{value:Ce.flowId,onChange:l=>C(A=>({...A||{},flowId:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},React.createElement("option",{value:""},"Select flow\u2026"),(Tt||[]).slice(0,500).map(l=>React.createElement("option",{key:l.id,value:l.id},l.name||l.title||"Flow "+l.id)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Start date"),React.createElement("input",{type:"date",value:Ce.startDate||ya(),onChange:l=>C(A=>({...A||{},startDate:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Duration (days)"),React.createElement("input",{type:"number",min:"1",value:String(Ce.durationDays||28),onChange:l=>C(A=>({...A||{},durationDays:Number(l.target.value||28)})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Frequency"),React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("input",{type:"number",min:"1",max:"14",value:String(Ce.freqPerWeek||3),onChange:l=>C(A=>({...A||{},freqPerWeek:Number(l.target.value||3)})),className:"w-24 px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"}),React.createElement("div",{className:"text-[12px] text-white/70"},"sessions / week"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Intensity cap"),React.createElement("select",{value:Ce.intensityCap||"FLOW",onChange:l=>C(A=>({...A||{},intensityCap:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["GENTLE","FLOW","POWER"].map(l=>React.createElement("option",{key:l,value:l},l)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 flex items-end justify-end"},React.createElement("button",{type:"button",onClick:()=>{try{var l=(Tt||[]).find(Ue=>String(Ue.id||Ue._id)===String(Ce.flowId||""))||null,A={freqPerWeek:Ce.freqPerWeek||3,intensityCap:String(Ce.intensityCap||"FLOW").toUpperCase()};var Ze=null;if(window.__FOF&&window.__FOF.AI&&typeof window.__FOF.AI.suggestYogaAssignment=="function"&&(Ze=window.__FOF.AI.suggestYogaAssignment(activeClient||client||{},l||{},A)),!Ze){var Ue=String((activeClient||client||{}).goal||(activeClient||client||{}).tags||"").toLowerCase();Ze={...A},(Ue.includes("stress")||Ue.includes("recovery")||Ue.includes("sleep"))&&(Ze.freqPerWeek=Math.min(7,Math.max(3,Number(Ze.freqPerWeek||3)+1)),Ze.intensityCap="GENTLE"),(Ue.includes("strength")||Ue.includes("performance"))&&(Ze.freqPerWeek=Math.min(6,Math.max(2,Number(Ze.freqPerWeek||3))),Ze.intensityCap=String(Ze.intensityCap).toUpperCase()==="GENTLE"?"FLOW":String(Ze.intensityCap).toUpperCase()),(Ue.includes("mobility")||Ue.includes("pain")||Ue.includes("posture"))&&(Ze.intensityCap="GENTLE")}C(Ue=>({...Ue||{},freqPerWeek:Math.max(1,Math.min(14,Number(Ze.freqPerWeek||A.freqPerWeek))),intensityCap:String(Ze.intensityCap||A.intensityCap).toUpperCase()}));try{setToast&&setToast({tone:"fuchsia",msg:"AI: Yoga suggestion applied."})}catch(Ue){}}catch(l){console.warn("AI suggestYogaAssignment failed",l);try{setToast&&setToast({tone:"rose",msg:"AI failed."})}catch(A){}}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"AI Suggest Yoga"),React.createElement("button",{type:"button",onClick:le,className:"px-3 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono uppercase tracking-widest"},"Assign"))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Active assignments"),React.createElement("div",{className:"mt-2 space-y-2"},(P||[]).filter(l=>String(l.status||"")==="ACTIVE").length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"No active yoga assignments yet."):(P||[]).filter(l=>String(l.status||"")==="ACTIVE").slice(0,6).map(l=>React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white font-bold text-[12px] truncate"},l.flowName),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Start ",l.startDate," \u2022 ",Number(l.durationDays||0),"d \u2022 ",Number(l.freqPerWeek||0),"x/wk \u2022 cap ",String(l.intensityCap||"FLOW"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>O(Re,l.id),className:"px-2.5 py-1.5 rounded-2xl border border-emerald-400/20 bg-emerald-500/10 hover:bg-emerald-500/15 text-[10px] font-mono uppercase tracking-widest text-emerald-100"},"Complete"),React.createElement("button",{type:"button",onClick:()=>qe(Re,l.id),className:"px-2.5 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/70"},"Archive")))))))),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Periodization Planner"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Macro \u2192 meso cycle planner with deterministic Capacity modifier (no new engine).")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:We,className:"px-3 py-2 rounded-2xl border border-cyan-400/25 bg-cyan-500/10 hover:bg-cyan-500/15 text-cyan-100 text-[11px] font-mono uppercase tracking-widest"},"Regenerate"),React.createElement("button",{type:"button",onClick:()=>b({...ie||{},updatedAt:new Date().toISOString(),capZone:ro,capModifier:n}),className:"px-3 py-2 rounded-2xl border border-lime-400/25 bg-lime-500/10 hover:bg-lime-500/15 text-lime-100 text-[11px] font-mono uppercase tracking-widest"},"Save"),React.createElement("button",{type:"button",onClick:da,className:"px-3 py-2 rounded-2xl border border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Send",size:14})," Export to Plan Queue"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Sport"),React.createElement("div",{className:"mt-1 text-[12px] text-white/85 font-semibold"},String((ie==null?void 0:ie.sportId)||"GENERAL")),React.createElement("div",{className:"text-[10px] text-white/45 mt-1"},"Season: ",String((ie==null?void 0:ie.seasonPhase)||"OFFSEASON"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Start date"),React.createElement("input",{type:"date",value:(ie==null?void 0:ie.startDate)||yi(),onChange:l=>Dt(A=>({...A||{},startDate:l.target.value})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Total weeks"),React.createElement("select",{value:String((ie==null?void 0:ie.totalWeeks)||12),onChange:l=>Dt(A=>({...A||{},totalWeeks:Number(l.target.value)})),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},[4,6,8,10,12,16,20].map(l=>React.createElement("option",{key:l,value:l},l," weeks"))),React.createElement("div",{className:"mt-2 text-[10px] text-white/45"},"Tip: click Regenerate to re-balance mesocycles.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Capacity modifier"),React.createElement("div",{className:"mt-1 text-[12px] text-white/85 font-extrabold"},ro),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Suggested load: ",React.createElement("span",{className:"text-white/80 font-semibold"},Math.round(n*100),"%")))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/20 overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},"Mesocycles"),React.createElement("button",{type:"button",onClick:()=>Dt(l=>({...l||{},mesocycles:[...(l==null?void 0:l.mesocycles)||[],{id:`meso_${Math.random().toString(16).slice(2)}`,name:"New block",weeks:2,focus:"general",intensity:"MID",deloadEvery:4}]})),className:"px-3 py-1.5 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[10px] font-mono uppercase tracking-widest text-white/80"},"+ Add block")),React.createElement("div",{className:"p-4 space-y-2"},((ie==null?void 0:ie.mesocycles)||[]).map(l=>React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"grid grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"col-span-12 md:col-span-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Name"),React.createElement("input",{value:l.name||"",onChange:A=>Dt(Ze=>({...Ze||{},mesocycles:((Ze==null?void 0:Ze.mesocycles)||[]).map(Ue=>Ue.id===l.id?{...Ue,name:A.target.value}:Ue)})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"col-span-6 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Weeks"),React.createElement("input",{type:"number",min:"1",value:String(l.weeks||1),onChange:A=>Dt(Ze=>({...Ze||{},mesocycles:((Ze==null?void 0:Ze.mesocycles)||[]).map(Ue=>Ue.id===l.id?{...Ue,weeks:Math.max(1,Number(A.target.value||1))}:Ue)})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"col-span-6 md:col-span-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Focus"),React.createElement("input",{value:l.focus||"",onChange:A=>Dt(Ze=>({...Ze||{},mesocycles:((Ze==null?void 0:Ze.mesocycles)||[]).map(Ue=>Ue.id===l.id?{...Ue,focus:A.target.value}:Ue)})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"})),React.createElement("div",{className:"col-span-10 md:col-span-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Intensity"),React.createElement("select",{value:String(l.intensity||"MID"),onChange:A=>Dt(Ze=>({...Ze||{},mesocycles:((Ze==null?void 0:Ze.mesocycles)||[]).map(Ue=>Ue.id===l.id?{...Ue,intensity:A.target.value}:Ue)})),className:"mt-1 w-full px-3 py-2 rounded-xl border border-white/12 bg-black/30 text-[12px] text-white/85"},["LOW","LOW\u2192MID","MID","MID\u2192HIGH","HIGH"].map(A=>React.createElement("option",{key:A,value:A},A)))),React.createElement("div",{className:"col-span-2 md:col-span-1 flex justify-end"},React.createElement("button",{type:"button",onClick:()=>Dt(A=>({...A||{},mesocycles:((A==null?void 0:A.mesocycles)||[]).filter(Ze=>Ze.id!==l.id)})),className:"mt-5 px-3 py-2 rounded-xl border border-rose-400/20 bg-rose-500/10 hover:bg-rose-500/15 text-[11px] font-mono uppercase tracking-widest text-rose-100"},React.createElement(_,{name:"Trash2",size:14})))))),!(ie!=null&&ie.mesocycles)||ie.mesocycles.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/55"},"No blocks yet. Click ",React.createElement("span",{className:"text-white/80 font-semibold"},"Regenerate")," or ",React.createElement("span",{className:"text-white/80 font-semibold"},"Add block"),"."):null)),React.createElement("div",{className:"mt-4 text-[11px] text-white/55"},"Export writes a ",React.createElement("span",{className:"text-white/80 font-semibold"},"PERIODIZATION")," entry into Plan Queue (Plan Hub can consume later) \u2014 core OS unchanged."))),Se==="LOGS"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"History"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Timeline from ",React.createElement("span",{className:"text-white/80 font-semibold"},"Triage")," + ",React.createElement("span",{className:"text-white/80 font-semibold"},"Messages")," + ",React.createElement("span",{className:"text-white/80 font-semibold"},"Assignments")," (canonical ActionLog)")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},[{k:"ALL",label:"All"},{k:"TRIAGE",label:"Triage"},{k:"MESSAGES",label:"Messages"},{k:"PLANS",label:"Plans"},{k:"NOTES",label:"Notes"}].map(l=>React.createElement("button",{key:l.k,type:"button",onClick:()=>jt(l.k),className:"px-3 py-1.5 rounded-2xl border text-[10px] font-mono uppercase tracking-widest "+(ii===l.k?"border-[rgba(77,233,255,0.55)] bg-[rgba(77,233,255,0.12)] text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/8")},l.label)))),React.createElement("div",{className:"mt-4 space-y-2"},(()=>{var Ze=(((typeof window!="undefined"&&window.__FOF_EVENT_LOG_V1?window.__FOF_EVENT_LOG_V1.read?window.__FOF_EVENT_LOG_V1.read():[]:[])||[]).filter(Ue=>{var It;return Ue&&(String(Ue.clientId||"")===String(d)||String(((It=Ue==null?void 0:Ue.payload)==null?void 0:It.clientId)||"")===String(d))}).slice(0,60)||[]).filter(Ue=>{if(ii==="ALL")return!0;var It=String(Ue.type||Ue.event||"").toLowerCase();return ii==="TRIAGE"?It.includes("triage")||It.includes("signal")||It.includes("resolve")||It.includes("snooze"):ii==="MESSAGES"?It.includes("message")||It.includes("thread")||It.includes("inbox")||It.includes("template"):ii==="PLANS"?It.includes("plan")||It.includes("assign")||It.includes("library"):ii==="NOTES"?It.includes("note"):!0});return Ze.length?Ze.map((Ue,It)=>React.createElement("div",{key:String(Ue.id||It),className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/55"},String(Ue.type||Ue.event||"event")),React.createElement("div",{className:"mt-1 text-[12px] text-white/85"},String(Ue.payload&&(Ue.payload.summary||Ue.payload.title||Ue.payload.message)||Ue.summary||Ue.title||Ue.message||Ue.detail||"").slice(0,140)||"\u2014")),React.createElement("div",{className:"text-[10px] text-white/40 whitespace-nowrap"},String(Ue.ts||Ue.at||"").slice(0,19).replace("T"," "))))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-[12px] text-white/55"},"No history yet for this filter.")})())),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Assessments"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Assign, record results, and compare trends over time (Flowchart 3H).")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>za({open:!0,mode:"ASSIGN",templateId:"",assignmentId:null}),className:"px-3 py-2 rounded-2xl border border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.14)] hover:bg-[rgba(77,233,255,0.20)] text-[11px] font-extrabold text-white"},"Assign"),React.createElement("button",{type:"button",onClick:()=>za({open:!0,mode:"RECORD",templateId:"",assignmentId:null}),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Record result"),React.createElement("button",{type:"button",onClick:()=>dt(!0),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Templates"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Pending"),(()=>{var l=$d(d).filter(A=>A&&A.status==="PENDING");return l.length?React.createElement("div",{className:"mt-2 space-y-2"},l.slice(0,3).map(A=>React.createElement("div",{key:A.id,className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] text-white font-bold truncate"},A.templateName),React.createElement("div",{className:"text-[10px] text-white/50 mt-1"},"Due: ",A.dueAt?String(A.dueAt).slice(0,10):"\u2014"),React.createElement("button",{type:"button",onClick:()=>za({open:!0,mode:"RECORD",templateId:A.templateId,assignmentId:A.id}),className:"mt-2 px-3 py-2 rounded-xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Enter results")))):React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"No pending assessments.")})()),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Latest result"),(()=>{var l=Ad(d);if(!l.length)return React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"No recorded results yet.");var A=l[0];return React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[12px] text-white font-extrabold"},A.templateName),React.createElement("div",{className:"text-[10px] text-white/45 mt-1"},String(A.takenAt||"").slice(0,19).replace("T"," ")),React.createElement("div",{className:"mt-3 space-y-1"},Object.keys(A.values||{}).slice(0,4).map(Ze=>React.createElement("div",{key:Ze,className:"flex items-center justify-between text-[11px]"},React.createElement("span",{className:"text-white/55 truncate"},Ze),React.createElement("span",{className:"text-white/85 font-semibold"},String(A.values[Ze]))))))})()),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Trend (last 3)"),(()=>{var l=Ad(d);if(l.length<2)return React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"Add at least 2 results to see deltas.");var A={};l.forEach(Qs=>{if(!Qs)return;var _s=String(Qs.templateId||"");_s&&(A[_s]=A[_s]||[],A[_s].push(Qs))});var Ze=Object.keys(A).sort((Qs,_s)=>A[_s].length-A[Qs].length)[0],Ue=(A[Ze]||[]).slice(0,3),It=(er()||[]).find(Qs=>Qs&&Qs.id===Ze)||null,va=(()=>{try{var Qs=It&&Array.isArray(It.fields)?It.fields.map(_s=>_s.key):Object.keys(Ue[0].values||{});for(var _s of Qs){var en=Ue[0].values?Ue[0].values[_s]:null;if(en==null)continue;var dr=Number(String(en).replace(/[^0-9.\-]/g,""));if(Number.isFinite(dr))return _s}}catch(Qs){}return null})();if(!va)return React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"No numeric fields found to chart.");var ji=Ue.map(Qs=>{var _s=Qs.values?Qs.values[va]:null,en=Number(String(_s).replace(/[^0-9.\-]/g,""));return Number.isFinite(en)?en:null}).filter(Qs=>Qs!=null);if(ji.length<2)return React.createElement("div",{className:"mt-2 text-[12px] text-white/55"},"Not enough numeric points.");var ao=ji[0]-ji[Math.min(ji.length-1,1)];return React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"text-[12px] text-white font-bold truncate"},It?It.name:"Assessment"),React.createElement("div",{className:"text-[11px] text-white/55 mt-2"},"Field: ",React.createElement("span",{className:"text-white/80 font-semibold"},va)),React.createElement("div",{className:"mt-2 flex items-center justify-between text-[12px]"},React.createElement("span",{className:"text-white/55"},"Latest"),React.createElement("span",{className:"text-white font-extrabold"},ji[0])),React.createElement("div",{className:"mt-1 flex items-center justify-between text-[11px]"},React.createElement("span",{className:"text-white/45"},"\u0394 vs previous"),React.createElement("span",{className:"font-semibold "+(ao>=0?"text-emerald-200":"text-rose-200")},ao>=0?"+":"",ao.toFixed(2))),React.createElement("div",{className:"mt-3 text-[10px] text-white/40"},"Tip: record results consistently to unlock richer comparisons."))})())),React.createElement(nc,{open:St.open,mode:St.mode,clientId:String(d),sportId:function(){try{var l=on.get("fof.tdep.sport_context.v1");return(JSON.parse(l||"{}")[String(d)]||{}).sportId||"GENERAL"}catch(l){return"GENERAL"}}(),templateId:St.templateId,assignmentId:St.assignmentId,onClose:()=>za({open:!1,mode:"ASSIGN",templateId:"",assignmentId:null}),onSaved:()=>{try{za({open:!1,mode:"ASSIGN",templateId:"",assignmentId:null}),setToast({message:"Assessment saved",onUndo:null})}catch(l){}}}),React.createElement(rc,{open:Xe,sportId:function(){try{var l=on.get("fof.tdep.sport_context.v1");return(JSON.parse(l||"{}")[String(d)]||{}).sportId||"GENERAL"}catch(l){return"GENERAL"}}(),onClose:()=>dt(!1)}))),Se==="MESSAGES"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Messages"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Open the client thread in Inbox"),React.createElement("button",{onClick:cs,className:"mt-3 px-3 py-2 rounded-2xl border border-sky-400/20 bg-sky-500/10 hover:bg-sky-500/15 text-[11px] font-mono uppercase tracking-widest text-sky-100"},"Open thread")),Se==="NOTES"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Notes"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Private coach notes (saved)"),React.createElement("button",{onClick:Sa,className:"mt-3 px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Add note"),React.createElement("div",{className:"mt-3 space-y-2"},(Ve||[]).length?(Ve||[]).map(l=>React.createElement("div",{key:l.id,className:"rounded-2xl border border-white/12 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},ra(l.ts)),React.createElement("div",{className:"text-[12px] text-white/85 mt-1"},l.body))):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"No notes."))),Se==="ADMIN"&&React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Admin"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Client operations (tags, tier, flags)"),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-black/20 p-3 text-[11px] text-white/70"},"Phase 6 will add tags + bulk actions. Phase 2 will add messaging templates and staff threads."))))},Cd=typeof window!="undefined"&&window.__FOF_DOCS_KEY?window.__FOF_DOCS_KEY:"fof.crm.docs.v1",Id=typeof window!="undefined"&&window.__FOF_METRICS_KEY?window.__FOF_METRICS_KEY:"fof.crm.metrics.v1",Rd=typeof window!="undefined"&&window.__FOF_CRM_NOTES_KEY?window.__FOF_CRM_NOTES_KEY:"fof.crm.notes.v1",rl=(o,d,m="")=>{try{return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[9px] font-mono uppercase tracking-widest text-white/45"},o),React.createElement("div",{className:"mt-1 text-[18px] font-extrabold text-white"},d),m?React.createElement("div",{className:"mt-0.5 text-[10px] text-white/45"},m):null)}catch(E){return null}};function Xd({open:o,onClose:d,title:m="Actions",items:E=[]}){if(!o)return null;var g=Array.isArray(E)?E.filter(Boolean):[];return React.createElement("div",{className:"fixed inset-0 z-[9999]"},React.createElement("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:d}),React.createElement("div",{className:"absolute inset-x-0 bottom-0 sm:inset-0 sm:flex sm:items-center sm:justify-center p-3"},React.createElement("div",{className:"w-full sm:max-w-md rounded-3xl border border-white/10 bg-zinc-950/95 shadow-2xl overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-white font-extrabold tracking-tight"},m),React.createElement("button",{type:"button",onClick:d,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Close")),React.createElement("div",{className:"p-3 space-y-2"},g.length===0?React.createElement("div",{className:"p-3 rounded-2xl border border-white/10 bg-white/5 text-white/70 text-[12px]"},"No actions available."):g.map((f,F)=>React.createElement("button",{key:F,type:"button",onClick:()=>{try{f.onClick&&f.onClick()}catch(D){}try{d&&d()}catch(D){}},className:"w-full text-left px-4 py-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition flex items-start justify-between gap-3 "+(f.accent||"")},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},f.label||"Action"),f.hint?React.createElement("div",{className:"text-white/60 text-[11px] mt-0.5"},f.hint):null),f.badge?React.createElement("div",{className:"shrink-0 px-2 py-1 rounded-xl border border-white/10 bg-black/40 text-[10px] font-bold text-white/70"},f.badge):null))))))}var Qd=({client:o,onBack:d,setView:m,onSetSelectedClient:E})=>{var dt,Qt,yi,zi,os,as,ro,n;var g=o||null,f=co(g),[F,D]=React.useState("OVERVIEW"),[k,T]=React.useState(!1),he=React.useCallback(()=>{try{T(!0)}catch(y){}},[]),oe=React.useCallback(()=>{try{T(!1)}catch(y){}},[]),[ke,Re]=React.useState(()=>ai(Cd,{})),[Me,Et]=React.useState(()=>ai(Id,{})),[ya,Ct]=React.useState(()=>ai(Rd,{}));React.useEffect(()=>{try{Re(ai(Cd,{}))}catch(y){}},[f]),React.useEffect(()=>{try{Et(ai(Id,{}))}catch(y){}},[f]),React.useEffect(()=>{try{Ct(ai(Rd,{}))}catch(y){}},[f]);var Jt=React.useMemo(()=>f&&Array.isArray(ke[f])?ke[f]:[],[ke,f]),Ye=React.useMemo(()=>f&&Array.isArray(Me[f])?Me[f]:[],[Me,f]),Tt=React.useMemo(()=>f&&Array.isArray(ya[f])?ya[f]:[],[ya,f]),_t=Ye[0]||null,P=Date.now(),I=y=>{var be=Number(y);return Number.isFinite(be)?be:0},te=(...y)=>{try{var be=y.map(I).filter(ie=>ie>0);return be.length?Math.max.apply(null,be):0}catch(be){return 0}},Ce=te(g&&(g.lastSessionTs||g.lastSessionAt||g.lastSession||g.lastWorkoutAt||g.lastTrainingAt),g&&g.activity&&(g.activity.lastSessionTs||g.activity.lastSessionAt),_t&&(_t.ts||_t.createdAt||_t.dateTs)),C=te(Tt&&Tt[0]&&(Tt[0].ts||Tt[0].createdAt)),ye=te(Jt&&Jt[0]&&(Jt[0].ts||Jt[0].createdAt)),le=te(Ye&&Ye[0]&&(Ye[0].ts||Ye[0].createdAt||Ye[0].dateTs)),O=te(C,ye),qe=te(Ce,le,O),Pt=y=>{try{return y?Math.floor((P-y)/(1e3*60*60*24)):9999}catch(be){return 9999}},Za=(()=>{var y=Pt(qe);return y<=7?{k:"ACTIVE",label:"Active",tone:"emerald",hint:`Last activity ${y}d ago`}:y<=30?{k:"RISK",label:"At\u2011Risk",tone:"amber",hint:`Last activity ${y}d ago`}:{k:"DORMANT",label:"Dormant",tone:"rose",hint:y>=9999?"No activity yet":`Last activity ${y}d ago`}})(),Ma=(()=>{var y=!!(g&&(g.activePlanId||g.planId||g.assignedPlanId||g.programId||g.plan&&g.plan.id)),be=String(g&&(g.planStatus||g.plan&&g.plan.status)||"").toUpperCase(),ie=I(g&&(g.planUpdatedAt||g.planAssignedAt||g.plan&&(g.plan.updatedAt||g.plan.createdAt))),Dt=be==="EXPIRED"||be==="ENDED"||be==="ARCHIVED"?!0:y&&ie&&Ce&&ie<Ce-1e3*60*60*24*21;return y?Dt?{k:"NEEDS",label:"Needs update",tone:"amber",hint:"Plan may be outdated"}:{k:"ASSIGNED",label:"Assigned",tone:"cyan",hint:"Plan assigned"}:{k:"NONE",label:"None",tone:"zinc",hint:"No plan assigned"}})(),$a=(()=>{var y=I(g&&(g.balanceDue||g.unpaid||g.billing&&g.billing.balanceDue||g.billing&&g.billing.due)),be=String(g&&(g.billingStatus||g.billing&&g.billing.status)||"").toUpperCase();return y>0||["OVERDUE","PAST_DUE","DUE"].includes(be)?{k:"ATTN",label:"Attention",tone:"rose",hint:y>0?`Balance due: ${y}`:"Billing attention needed"}:{k:"OK",label:"OK",tone:"emerald",hint:"Billing looks OK"}})(),Yt=(()=>{var y=te(O,Ce,le),be=(ie,Dt)=>({k:ie,label:Dt,ts:y});return y===Ce&&Ce?be("SESSION","Session"):y===O&&O?C>=ye?be("NOTE","Note"):ye?be("DOC","Doc"):be("COACH","Coach"):y===le&&le?be("METRIC","Metric"):{k:"NONE",label:"\u2014",ts:0}})(),it=y=>{try{if(!y)return"";var be=Pt(y);return be<=0?"today":be===1?"1d ago":`${be}d ago`}catch(be){return""}},Ut=y=>{var be=String(y||"").toLowerCase();return be==="emerald"?"border-emerald-400/20 bg-emerald-500/10 text-emerald-100":be==="amber"?"border-amber-400/25 bg-amber-500/10 text-amber-100":be==="rose"?"border-rose-400/20 bg-rose-500/10 text-rose-100":be==="cyan"?"border-cyan-400/20 bg-cyan-500/10 text-cyan-100":"border-white/10 bg-white/5 text-white/70"},ce=y=>{if(!f)return;var be={...ke},ie=Array.isArray(be[f])?be[f].slice():[];ie.unshift(y),be[f]=ie,Re(be),qi(Cd,be)},Vt=(y,be="DOCUMENT")=>{var ie;try{var Dt=Array.from(y||[]),b=Date.now();Dt.forEach(We=>{ce({id:"d_"+Math.random().toString(16).slice(2),ts:b,type:be,title:We.name,status:"UPLOADED",source:"upload",fileName:We.name,mime:We.type||"application/octet-stream",size:We.size||0})});try{(ie=window.__fofToast)==null||ie.call(window,"Uploaded")}catch(We){}}catch(Dt){}},Fe=()=>{var b,We,da,ii,jt,Kt;if(!f)return;var y=Date.now(),be={...Me},ie=Array.isArray(be[f])?be[f].slice():[],Dt={id:"m_"+y,ts:y,weightKg:Number(((b=_t==null?void 0:_t.weightKg)!=null?b:0)||0),bodyFatPct:Number(((We=_t==null?void 0:_t.bodyFatPct)!=null?We:0)||0),restingHR:Number(((da=_t==null?void 0:_t.restingHR)!=null?da:0)||0),readiness:Number(((jt=(ii=g==null?void 0:g.capacityScore)!=null?ii:g==null?void 0:g.readiness)!=null?jt:60)||60),note:"Check-in"};ie.unshift(Dt),be[f]=ie,Et(be),qi(Id,be);try{(Kt=window.__fofToast)==null||Kt.call(window,"Metric logged")}catch(Na){}},v=y=>{if(!f)return;var be=Date.now(),ie={...ya},Dt=Array.isArray(ie[f])?ie[f].slice():[];String(y||"").trim()&&(Dt.unshift({id:"n_"+be,ts:be,body:String(y).trim(),kind:"NOTE"}),ie[f]=Dt,Ct(ie),qi(Rd,ie))},[Te,Se]=React.useState("");React.useEffect(()=>{Se("")},[f]);var yt=(y,be,ie=100)=>{var Dt=Number(be||0),b=Math.max(0,Math.min(100,ie?Dt/ie*100:0));return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},y),React.createElement("div",{className:"text-[11px] text-white/60 font-mono"},Number.isFinite(Dt)?Dt:"\u2014")),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-white/40",style:{width:b+"%"}})))},St=()=>{if(g){try{E&&E(g)}catch(y){}try{var y={clientId:g.id,clientName:g.name,date:new Date(Date.now()+864e5).toISOString().slice(0,10),time:"10:00",durationMin:60,type:"PT Session",location:"Studio",note:"Booked from Client CRM"};localStorage.setItem("fof.calendar.draft.v1",JSON.stringify(y))}catch(y){}try{m&&m("CALENDAR")}catch(y){}}},za=React.useCallback(()=>{try{var y=Nr(g||{});try{(window.__fofToast||Fn)({title:"Magic link copied",message:y.url})}catch(be){}}catch(y){try{(window.__fofToast||Fn)({title:"Magic link failed",message:String((y==null?void 0:y.message)||y||"Unknown error")})}catch(be){}}},[g]),Xe=React.useMemo(()=>{if(!g)return[];var y=g.planAssigned||g.planId||g.activePlanId?"Assigned":"None",be=String(g.financial||"").toUpperCase()!=="OK"&&String(g.financial||"").toUpperCase()!=="ACTIVE"?"Attention":"OK",ie=[];return ie.push({label:y==="None"?"Assign plan":"Update plan",hint:y==="None"?"Create or assign a plan for this client":"Adjust plan based on progress",badge:y,accent:"border-amber-400/30",onClick:()=>{try{m&&m("CLIENT_ACTION_MODE")}catch(Dt){}}}),ie.push({label:"Book next session",hint:"Schedule the next coaching session",onClick:()=>{try{St&&St()}catch(Dt){}}}),ie.push({label:"Send check-in",hint:"Ask for updates (notes / feedback)",onClick:()=>{try{D&&D("NOTES")}catch(Dt){}}}),ie.push({label:"Send magic link",hint:"Copy login link to clipboard",onClick:()=>{try{za&&za()}catch(Dt){}}}),ie.push({label:"Add note",hint:"Record coaching context and decisions",onClick:()=>{try{D&&D("NOTES")}catch(Dt){}}}),ie.push({label:"Billing",hint:"Review payments and flags",badge:be,accent:be==="Attention"?"border-red-400/30":"",onClick:()=>{try{D&&D("BILLING")}catch(Dt){}}}),ie},[g,m,D,St,za]);return g?React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-6xl mx-auto space-y-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-cyan-300/90"},"Client CRM"),React.createElement("div",{className:"mt-1 flex items-center gap-3 min-w-0"},React.createElement("div",{className:"w-11 h-11 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center text-white/70 font-extrabold"},(g.name||"C").slice(0,1).toUpperCase()),React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[18px] font-extrabold text-white truncate"},g.name),React.createElement("div",{className:"text-[12px] text-white/55 truncate"},g.email||g.phone||"\u2014"," \u2022 ",String(g.tier||"").toUpperCase()," \u2022 ",String(g.status||""))))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{d&&d()}catch(y){}},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Back"),React.createElement("button",{type:"button",onClick:()=>{try{E&&E(g||null)}catch(y){}try{m&&m("CLIENT_ACTION_MODE")}catch(y){}},className:"px-3 py-2 rounded-2xl border border-amber-400/25 bg-amber-500/10 hover:bg-amber-500/15 text-[12px] font-bold text-amber-100"},"Back to Client"),React.createElement("button",{type:"button",onClick:()=>{try{E&&E(g||o||null)}catch(y){}try{m&&m("CLIENT_DETAIL")}catch(y){}},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80",title:"Back to client overview"},"Back to Client"),React.createElement("button",{type:"button",onClick:za,className:"px-3 py-2 rounded-2xl border border-amber-500/30 bg-amber-500/15 hover:bg-amber-500/20 text-[12px] font-extrabold text-amber-200",title:"Send / Copy a login magic link for this client"},"Send Magic Link"),React.createElement("button",{type:"button",onClick:St,className:"px-4 py-2 rounded-2xl border border-cyan-400/25 bg-cyan-500/10 hover:bg-cyan-500/15 text-[12px] font-extrabold text-cyan-100"},"Book next session"),React.createElement("button",{type:"button",onClick:he,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Actions"))),React.createElement(Xd,{open:k,onClose:oe,title:"Client actions",items:Xe}),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-gradient-to-r from-white/5 via-black/20 to-white/5 p-3.5 shadow-[0_0_0_1px_rgba(255,255,255,0.06)]"},React.createElement("div",{className:"flex items-center justify-between gap-3 mb-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/65"},"Status intelligence"),React.createElement("div",{className:"text-[10px] text-white/45"},"Derived from sessions / notes / billing hints")),React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2"},React.createElement("div",{className:"rounded-2xl border p-3 "+Ut(Za.tone),title:Za.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Engagement"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold text-white flex items-center gap-2"},React.createElement("span",null,Za.k==="ACTIVE"?"\u{1F7E2}":Za.k==="RISK"?"\u{1F7E1}":"\u{1F534}"),React.createElement("span",null,Za.label))),React.createElement("div",{className:"rounded-2xl border p-3 "+Ut(Ma.tone),title:Ma.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Plan"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold text-white flex items-center gap-2"},React.createElement("span",null,Ma.k==="ASSIGNED"?"\u{1F535}":Ma.k==="NEEDS"?"\u{1F7E1}":"\u26AA"),React.createElement("span",null,Ma.label))),React.createElement("div",{className:"rounded-2xl border p-3 "+Ut(Yt.k==="SESSION"?"cyan":Yt.k==="NONE"?"zinc":"emerald"),title:Yt.k==="NONE"?"No recent actions":`Last: ${Yt.label} \u2022 ${it(Yt.ts)}`},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Last action"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold text-white"},Yt.k==="NONE"?"\u2014":Yt.label,Yt.k==="NONE"?null:React.createElement("span",{className:"ml-2 text-[11px] font-mono text-white/55"},"\u2022 ",it(Yt.ts)))),React.createElement("div",{className:"rounded-2xl border p-3 "+Ut($a.tone),title:$a.hint},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest opacity-80"},"Billing"),React.createElement("div",{className:"mt-1 text-[13px] font-extrabold text-white flex items-center gap-2"},React.createElement("span",null,$a.k==="ATTN"?"\u{1F7E0}":"\u2705"),React.createElement("span",null,$a.label))))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/30 overflow-hidden"},React.createElement("div",{className:"p-3 border-b border-white/10 flex items-center gap-2 flex-wrap"},[["OVERVIEW","Overview"],["HISTORY","Sessions"],["NOTES","Notes"],["METRICS","Metrics"],["BILLING","Billing"],["DOCUMENTS","Documents"]].map(([y,be])=>React.createElement("button",{key:y,type:"button",onClick:()=>D(y),className:"px-3 py-2 rounded-2xl border text-[11px] font-mono uppercase tracking-widest "+(F===y?"border-white/15 bg-white/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-white/75")},be))),React.createElement("div",{className:"p-4"},F==="OVERVIEW"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Snapshot"),React.createElement("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2"},rl("Readiness",String((Qt=(dt=g.capacityScore)!=null?dt:g.readiness)!=null?Qt:"\u2014"),"Capacity Score"),rl("Docs",String(Jt.length),"Files + consents"),rl("Notes",String(Tt.length),"CRM notes"),rl("Metrics",String(Ye.length),"Check-ins")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-2"},yt("Adherence (7d)",Math.round(Number(g.adherence7d||0)*100),100),yt("Risk / attention",g.segment==="ATTENTION"?75:35,100))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Profile & intake"),React.createElement("div",{className:"mt-2 text-[12px] text-white/70"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Goal"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},((yi=g.profile)==null?void 0:yi.goal)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Availability"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},((zi=g.profile)==null?void 0:zi.availability)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Limitations / injuries"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},((os=g.profile)==null?void 0:os.limitations)||"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Coach notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80 whitespace-pre-wrap"},((as=g.profile)==null?void 0:as.notes)||"\u2014")))))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Next actions"),React.createElement("button",{type:"button",onClick:Fe,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"+ Log metric")),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("button",{type:"button",onClick:()=>D("DOCUMENTS"),className:"w-full text-left px-3 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Documents"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Upload plan / PAR-Q / waiver / photos")),React.createElement("button",{type:"button",onClick:()=>D("NOTES"),className:"w-full text-left px-3 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Notes"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Session notes, flags, follow-ups")),React.createElement("button",{type:"button",onClick:St,className:"w-full text-left px-3 py-3 rounded-2xl border border-cyan-400/15 bg-cyan-500/10 hover:bg-cyan-500/15"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-cyan-100/80"},"Book next session"),React.createElement("div",{className:"mt-1 text-[12px] text-cyan-50/80"},"Creates a draft + opens Calendar")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Latest metrics"),React.createElement("div",{className:"mt-3 space-y-2"},_t?React.createElement(React.Fragment,null,yt("Weight (kg)",_t.weightKg,150),yt("Body fat %",_t.bodyFatPct,50),yt("Resting HR",_t.restingHR,120)):React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"No metrics yet. Use \u201C+ Log metric\u201D."))))),F==="METRICS"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Metrics timeline"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Check-ins + vitals. Add more later (wearables import in future phases).")),React.createElement("button",{type:"button",onClick:Fe,className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"+ Log metric")),React.createElement("div",{className:"mt-3 space-y-2"},(Ye||[]).slice(0,20).map(y=>React.createElement("div",{key:y.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},new Date(y.ts).toLocaleString()),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},y.note||"Metric")),React.createElement("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2"},rl("Weight",y.weightKg?y.weightKg+" kg":"\u2014"),rl("Body fat",y.bodyFatPct?y.bodyFatPct+"%":"\u2014"),rl("Rest HR",y.restingHR?String(y.restingHR):"\u2014"),rl("Readiness",Number.isFinite(y.readiness)?String(y.readiness):"\u2014")))),!Ye||!Ye.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"No metrics yet."):null)),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Quick insights"),React.createElement("div",{className:"mt-3 space-y-2"},yt("Readiness",Number((n=(ro=g.capacityScore)!=null?ro:g.readiness)!=null?n:60),100),yt("Adherence (7d)",Math.round(Number(g.adherence7d||0)*100),100),yt("Check-in frequency",Math.min(100,(Ye.length||0)*10),100)),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"Future: wearable import + trend charts + anomalies."))),F==="DOCUMENTS"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Documents"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"PAR-Q, waiver, photos, progress docs, contracts.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest cursor-pointer"},"+ Upload",React.createElement("input",{type:"file",multiple:!0,className:"hidden",onChange:y=>Vt(y.target.files,"DOCUMENT")})),React.createElement("label",{className:"px-3 py-2 rounded-2xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-mono uppercase tracking-widest cursor-pointer text-amber-100"},"+ Contract",React.createElement("input",{type:"file",multiple:!0,className:"hidden",onChange:y=>Vt(y.target.files,"CONTRACT")})))),React.createElement("div",{className:"mt-3 space-y-2"},(Jt||[]).slice(0,30).map(y=>React.createElement("div",{key:y.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},y.type),React.createElement("div",{className:"mt-1 text-[12px] font-semibold text-white truncate"},y.title),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},new Date(y.ts).toLocaleString()," \u2022 ",y.fileName||""," ",y.mime?"\u2022 "+y.mime:"")),React.createElement("span",{className:"px-2 py-1 rounded-full text-[10px] font-bold uppercase border "+(y.status==="SIGNED"?"border-emerald-400/20 bg-emerald-500/10 text-emerald-100":y.status==="PENDING"?"border-amber-400/20 bg-amber-500/10 text-amber-100":"border-white/10 bg-white/5 text-white/70")},y.status||"FILE"))),!Jt||!Jt.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"No documents yet."):null)),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Compliance checklist"),React.createElement("div",{className:"mt-3 space-y-2"},["WAIVER","HEALTH_CONSENT","MARKETING_CONSENT"].map(y=>{var be=(Jt||[]).find(Dt=>Dt.type===y),ie=(be==null?void 0:be.status)||"MISSING";return React.createElement("div",{key:y,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},y.replaceAll("_"," ")),React.createElement("span",{className:"px-2 py-1 rounded-full text-[10px] font-bold uppercase border "+(ie==="SIGNED"?"border-emerald-400/20 bg-emerald-500/10 text-emerald-100":ie==="PENDING"?"border-amber-400/20 bg-amber-500/10 text-amber-100":"border-white/10 bg-white/5 text-white/70")},ie)))})),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"Future: e-sign + audit trail."))),F==="NOTES"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Notes"),React.createElement("div",{className:"text-[11px] text-white/55 mt-1"},"Session notes, follow-ups, flags \u2014 like a CRM timeline.")),React.createElement("button",{type:"button",onClick:()=>{v(Te),Se("")},className:"px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-bold text-white/80"},"Add note")),React.createElement("textarea",{value:Te,onChange:y=>Se(y.target.value),rows:3,placeholder:"Write a note\u2026",className:"mt-3 w-full px-3 py-2 rounded-2xl bg-white/5 border border-white/10 text-white text-[12px] outline-none focus:border-white/20"}),React.createElement("div",{className:"mt-3 space-y-2"},(Tt||[]).slice(0,40).map(y=>React.createElement("div",{key:y.id,className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},new Date(y.ts).toLocaleString()),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},y.kind||"NOTE")),React.createElement("div",{className:"mt-2 text-[12px] text-white/80 whitespace-pre-wrap"},y.body))),!Tt||!Tt.length?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/60"},"No notes yet."):null)),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Flags"),React.createElement("div",{className:"mt-3 space-y-2"},yt("No-show risk",g.segment==="ATTENTION"?70:30,100),yt("Engagement",Math.round(Number(g.adherence7d||0)*100),100)),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/60"},"Future: auto-tags from Ops Feed (missed check-ins, missed payments)."))),F==="BILLING"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Billing & packages"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"CRM-grade billing will wire into Finance Hub (Phase 4.2+) \u2014 for now, this shows structured placeholders."),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Plan"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},String(g.tier||"PAID"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Status"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"In good standing")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Next invoice"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"\u2014")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Shortcuts"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("button",{type:"button",onClick:()=>{var y,be;try{(y=window.__FOF_setView)==null||y.call(window,"FINANCE_HUB"),(be=window.__fofToast)==null||be.call(window,"Opening Finance Hub (stub)")}catch(ie){}},className:"w-full text-left px-3 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Finance Hub"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Invoices, payouts, tax exports")),React.createElement("button",{type:"button",onClick:()=>{try{m&&m("REPORTS")}catch(y){}},className:"w-full text-left px-3 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Reports"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Client reporting export"))))),F==="HISTORY"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Sessions & history"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Booking-aware timeline (upcoming + past) will fully wire to Calendar data in Phase C+. For now, we show a safe stub + actions."),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},"Upcoming sessions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Use \u201CBook next session\u201D to create a draft and schedule.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[11px] text-white/70 font-semibold"},"No-show tracking"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Future: mark attended / no-show / late-cancel \u2192 feeds Ops Feed + billing.")))),React.createElement("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-extrabold text-white"},"Quick actions"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("button",{type:"button",onClick:St,className:"w-full text-left px-3 py-3 rounded-2xl border border-cyan-400/15 bg-cyan-500/10 hover:bg-cyan-500/15"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-cyan-100/80"},"Book next"),React.createElement("div",{className:"mt-1 text-[12px] text-cyan-50/80"},"Calendar draft")),React.createElement("button",{type:"button",onClick:()=>{try{m&&m("CLIENT_ACTION_MODE")}catch(y){}},className:"w-full text-left px-3 py-3 rounded-2xl border border-white/10 bg-black/20 hover:bg-black/30"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/45"},"Open actions"),React.createElement("div",{className:"mt-1 text-[12px] text-white/80"},"Programs, messages, flags"))))))))):React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto rounded-3xl border border-white/10 bg-black/40 p-6"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/55"},"Client CRM"),React.createElement("div",{className:"mt-2 text-[14px] text-white/70"},"No client selected."),React.createElement("button",{type:"button",onClick:()=>{try{d&&d()}catch(y){}},className:"mt-4 px-3 py-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/80"},"Back to clients")))};var Xl="fof.tdep.master_content_library.v1",Td=(o=[])=>{try{var d=typeof Ta=="function"?Ta(Xl,JSON.stringify(o)):localStorage.getItem(Xl)||JSON.stringify(o),m=JSON.parse(d);return Array.isArray(m)?m:o}catch(d){return o}},cd=o=>{try{var d=JSON.stringify(Array.isArray(o)?o:[]);typeof ti=="function"?ti(Xl,d):localStorage.setItem(Xl,d)}catch(d){}},Ql="fof.tdep.mcl.favorites.v1",e="fof.tdep.mcl.recent.v1",a=(o=[])=>{try{var d=typeof Ta=="function"?Ta(Ql,JSON.stringify(o)):localStorage.getItem(Ql)||JSON.stringify(o),m=JSON.parse(d);return Array.isArray(m)?m:o}catch(d){return o}},r=(o=[])=>{try{var d=JSON.stringify(Array.isArray(o)?o.slice(0,500):[]);typeof ti=="function"?ti(Ql,d):localStorage.setItem(Ql,d)}catch(d){}},c=(o=[])=>{try{var d=typeof Ta=="function"?Ta(e,JSON.stringify(o)):localStorage.getItem(e)||JSON.stringify(o),m=JSON.parse(d);return Array.isArray(m)?m:o}catch(d){return o}},h=(o=[])=>{try{var d=JSON.stringify(Array.isArray(o)?o.slice(0,200):[]);typeof ti=="function"?ti(e,d):localStorage.setItem(e,d)}catch(d){}},V=(o=150)=>{var d=ps(),m=oe=>String(oe).padStart(3,"0"),E=(oe,ke)=>oe[ke%oe.length],g=["Full Body","Upper Body","Lower Body","Core","Back","Chest","Shoulders","Arms","Legs","Posterior Chain","Hips","Knees","Ankles","T-Spine"],f=["Bodyweight","Dumbbell","Barbell","Kettlebell","Cable","Machine","Bands","Gym","Home","Mixed","Track","Pool","Bike","Sled"],F=["General","Bodybuilding","Powerlifting","Running","Soccer","Basketball","Tennis","Swimming","Cycling","CrossFit","MMA","Golf","Rugby","Cricket","Triathlon","Hyrox","Padel"],D=["Beginner","Intermediate","Advanced","All"],k=["TEAM","COMMUNITY"],T=[{type:"PROGRAM",baseTitles:["4-Week Strength Base","6-Week Fat Loss + Conditioning","8-Week Hypertrophy Split","5-Week Powerlifting Peak","12-Week Body Recomp","3-Week Deload + Skill Reset","6-Week Endurance Base","4-Week Mobility & Strength Hybrid","6-Week Athletic Performance Block","4-Week Posture + Core Restore"],desc:"Structured program with progressions and built-in deload logic. Capacity Score scales volume/intensity.",tagPools:[["strength","progression","full-body"],["fat-loss","conditioning","circuits"],["hypertrophy","split","rir"],["powerlifting","peak","intensity"],["recomp","habit","nutrition-support"],["deload","technique","recovery"],["endurance","zone2","aerobic"],["mobility","strength","hybrid"],["athletic","speed","agility"],["posture","core","mobility"]],bodyTpl:oe=>`Overview
- Duration: ${E([4,6,8,12],oe)} weeks
- Frequency: ${E(["3x","4x","5x"],oe)} / week
- Progression: ${E(["double progression","RIR-based","%1RM wave","density"],oe)}

Coach notes
- Scale sets/reps using Capacity Score zone
- Add deload every 4th week if needed`},{type:"WORKOUT",baseTitles:["Full-Body Strength Session","Upper Body Push + Pull","Lower Body Strength + Core","Hypertrophy Pump Session","Conditioning Intervals Session","Mobility Reset Session","Glute + Hamstring Focus","Back + Biceps Builder","Chest + Triceps Builder","Shoulders + Core Stability"],desc:"Single-session template that can be assigned as a standalone day or inserted into a program.",tagPools:[["workout","strength"],["workout","upper"],["workout","lower"],["workout","hypertrophy"],["workout","conditioning"],["workout","mobility"],["workout","posterior-chain"],["workout","pull"],["workout","push"],["workout","core"]],bodyTpl:oe=>`Warm-up (8\u201310 min)
- RAMP based on goal + mobility

Main block
- 3\u20135 lifts, ${E(["3x8","4x6","5x5","4x10"],oe)}
- Rest: ${E(["60\u201390s","90\u2013120s","2\u20133m"],oe)}

Finisher
- ${E(["sled","bike","row","carry","core"],oe)} ${E(["8 min","10 min","12 min"],oe)}

Notes: swap exercises based on equipment & pain rules.`},{type:"ASSESSMENT",baseTitles:["Movement Screen Mini","Strength Baseline Test","Aerobic Capacity Check","Mobility Snapshot","Core Endurance Battery","Return-to-Training Readiness"],desc:"Assessment protocol with clear pass/fail criteria and next-step recommendations.",tagPools:[["assessment","movement"],["assessment","strength"],["assessment","aerobic"],["assessment","mobility"],["assessment","core"],["assessment","readiness"]],bodyTpl:oe=>`Protocol
1) Brief intake + pain scale
2) Test sequence: ${E(["squat/hinge/push/pull","plank/side plank/dead bug","bike 6-min","walk/run test","ROM checks"],oe)}
3) Record RPE + notes

Scoring
- Green: proceed
- Yellow: reduce volume + add prehab
- Red: refer out / deload`},{type:"NUTRITION_TEMPLATE",baseTitles:["High-Protein Fat Loss Day","Body Recomp Meal Template","Performance Carb Timing Day","Vegetarian High-Protein Day","Mediterranean Template Day","Simple Portion Guide Day"],desc:"Nutrition template to pair with training blocks. Easy to customize per preference.",tagPools:[["nutrition","fat-loss","high-protein"],["nutrition","recomp","balanced"],["nutrition","performance","carbs"],["nutrition","vegetarian","high-protein"],["nutrition","mediterranean","heart-health"],["nutrition","portion-control","habits"]],bodyTpl:oe=>`Meals
- Breakfast: protein + fiber
- Lunch: lean protein + carbs + veg
- Snack: protein + fruit
- Dinner: protein + veg + fats

Guidelines
- Water: 2\u20133L
- Protein: ${E(["1.6","1.8","2.0"],oe)} g/kg
- Swap list included (halal-friendly options supported)`},{type:"RECOVERY_PROTOCOL",baseTitles:["Deload Week Protocol","Sleep + Stress Reset (7 Days)","Active Recovery Routine","Low Back Recovery Routine","Knee-Friendly Recovery Routine","Shoulder Care Routine"],desc:"Recovery routine to reduce fatigue and improve readiness (Capacity Score).",tagPools:[["recovery","deload"],["recovery","sleep","stress"],["recovery","active"],["recovery","low-back"],["recovery","knee"],["recovery","shoulder"]],bodyTpl:oe=>`Plan (daily 10\u201320 min)
- Breathwork: 3\u20135 min
- Mobility: 6\u201310 min
- Easy cardio: ${E(["10 min","15 min","20 min"],oe)} Zone 1\u20132

Rules
- If soreness high: reduce intensity
- If Capacity Score low: prioritize sleep + walking`},{type:"YOGA_FLOW",baseTitles:["Hip Opener Flow","Shoulder Mobility Flow","Hamstring + Calf Flow","Thoracic Spine Flow","Morning Energizer Flow","Evening Wind-Down Flow"],desc:"Yoga flow template with safe progressions and clear breath cues.",tagPools:[["yoga","mobility","hips"],["yoga","mobility","shoulders"],["yoga","mobility","hamstrings"],["yoga","mobility","t-spine"],["yoga","morning","energize"],["yoga","evening","relax"]],bodyTpl:oe=>`Sequence (12\u201320 min)
- Breath: 1\u20132 min
- Flow: 6\u201312 poses
- Cool down: 2\u20134 min

Breath cue: inhale expand / exhale soften.
Modify for contraindications.`},{type:"REHAB_PROTOCOL",baseTitles:["Ankle Stability Progression","Knee Tendon Care Progression","Hamstring Strain Return","Shoulder Impingement Care","Low Back Resilience Progression","Neck + Upper Trap Relief"],desc:"Prehab/rehab progression template. Not a substitute for medical advice; intended for low-risk cases.",tagPools:[["rehab","ankle"],["rehab","knee"],["rehab","hamstring"],["rehab","shoulder"],["rehab","low-back"],["rehab","neck"]],bodyTpl:oe=>`Phase 1 (pain-free range)
- Isometrics + activation

Phase 2 (capacity)
- controlled eccentrics

Phase 3 (return to sport)
- plyo / change of direction as tolerated

Stop if pain > 3/10 or symptoms increase.`},{type:"SPORT_BLOCK",baseTitles:["Soccer Pre-Season Block","Basketball Explosiveness Block","Tennis Footwork + Power Block","Swimming Dryland Block","Cycling Strength Support Block","Hyrox Prep Block"],desc:"Sport-specific mini-block (2\u20134 weeks) to layer on top of base training.",tagPools:[["sport","soccer","speed"],["sport","basketball","plyo"],["sport","tennis","agility"],["sport","swimming","shoulders"],["sport","cycling","legs"],["sport","hyrox","engine"]],bodyTpl:oe=>`Focus
- Skill: ${E(["acceleration","COD","power","aerobic","repeat sprints"],oe)}
- Gym: 2 sessions
- Field/skill: 2 sessions
- Recovery: 1\u20132 sessions

Adjust volumes to match match-load and Capacity Score.`}],he=[];for(var oe=1;oe<=o;oe++){var ke=T[(oe-1)%T.length],Re=E(ke.baseTitles,oe-1),Me=E(F,oe+2),Et=E(f,oe+5),ya=E(g,oe+7),Ct=E(D,oe+3),Jt=E(k,oe),Ye=Array.from(new Set([...E(ke.tagPools,oe-1)||[],Me.toLowerCase(),Et.toLowerCase()].filter(Boolean))),Tt=ke.type==="NUTRITION_TEMPLATE"?0:E([20,30,35,45,60,75],oe),P=E([["acute-injury"],["knee-pain"],["low-back-pain"],["shoulder-pain"],["ankle-instability"],[]],oe+11);he.push({id:`MCL-${ke.type.replace(/_/g,"").slice(0,4)}-${m(oe)}`,type:ke.type,title:`${Re} \u2014 ${Me}`,description:ke.desc,tags:Ye,muscleGroup:ya,equipment:Et,sport:Me,durationMin:Tt,difficulty:Ct,contraindications:P,governance:Jt,status:"PUBLISHED",version:`v${E([1,1,1,2],oe)}.${E([0,0,1],oe+1)}`,createdAt:d,updatedAt:d,updatedBy:"trainer_demo",body:ke.bodyTpl(oe-1)})}return he},de=(o,d)=>{try{var m=typeof Ta=="function"?Ta(o,d):wt(o,d);return m==null?d:m}catch(m){return d}},M=(o,d)=>{try{typeof ti=="function"?ti(o,d):na(o,d)}catch(m){}},De="fof.tdep.library.assignments.v1",Ae="fof.tdep.library.assignments.undo.v1",Oe="fof.tdep.plan_queue.v1",N=(o=[])=>{try{var d=typeof Ta=="function"?Ta(Oe,JSON.stringify(o)):localStorage.getItem(Oe)||JSON.stringify(o),m=JSON.parse(d);return Array.isArray(m)?m:o}catch(d){return o}},Ne=(o=[])=>{try{var d=JSON.stringify(Array.isArray(o)?o.slice(0,2e3):[]);typeof ti=="function"?ti(Oe,d):localStorage.setItem(Oe,d)}catch(d){}},G=o=>{var d=N([]),m=[o,...d||[]].slice(0,2e3);return Ne(m),m},we=o=>{var d,m,E;try{var g=o||{},f=Array.isArray(g.equipment)?g.equipment:Array.isArray(g.equipmentAccess)?g.equipmentAccess:[],F=Array.isArray(g.injuries)?g.injuries:Array.isArray(g.constraints)?g.constraints:[];return{clientId:String(g.id||""),clientName:String(g.name||""),tier:String(g.tier||""),tags:Array.isArray(g.tags)?g.tags.slice(0,25):[],goal:String(g.goal||g.primaryGoal||g.focus||""),equipment:f.slice(0,50),constraints:F.slice(0,50),capacityScore:(E=(m=(d=g.capacityScoreNow)!=null?d:g.capacityScore)!=null?m:g.readiness)!=null?E:null,capturedAt:ps()}}catch(g){return{capturedAt:ps()}}},$t=o=>{try{var d=o||{},m=String(d.governance||d.scope||d.visibility||""),E=d.origin||(m==="AI"?"AI_GENERATED":m==="COMMUNITY"?"COMMUNITY":m==="TEAM"?"TEAM":"MANUAL");return{origin:String(E||"MANUAL"),parentVersionId:d.parentVersionId||d.parentId||null,versionId:d.versionId||d.updatedAt||d.createdAt||null,governance:m||"PRIVATE"}}catch(d){return{origin:"MANUAL",governance:"PRIVATE"}}},gt=o=>{var d,m,E,g;try{var f=(d=window.__FOF_TDEP)==null?void 0:d.TRIAGE,F=(m=window.__FOF_TDEP)==null?void 0:m.normalizeTriageSignal;if(!f||typeof f.getTriageState!="function"||typeof f.setTriageState!="function")return null;var D=typeof F=="function"?F(o):o,k=f.getTriageState(),T=k&&k.signalsById&&typeof k.signalsById=="object"?k.signalsById:{};T[D.id]=D;var he=Array.isArray(k.order)?k.order.slice(0):[],oe=[D.id,...he.filter(Re=>Re!==D.id)].slice(0,500),ke={...k||{},signalsById:T,order:oe};try{var Re=Object.values(T),Me={total:Re.length,open:0,snoozed:0,inProgress:0,resolved:0};Re.forEach(Et=>{var ya=String((Et==null?void 0:Et.status)||"OPEN");ya==="RESOLVED"?Me.resolved+=1:ya==="SNOOZED"?Me.snoozed+=1:ya==="IN_PROGRESS"?Me.inProgress+=1:Me.open+=1}),ke.stats=Me}catch(Re){}f.setTriageState(ke);try{(g=(E=window.__FOF_TDEP)==null?void 0:E.logEvent)==null||g.call(E,"triage.signal.injected",{id:D.id,type:D.type,clientId:D.clientId,summary:D.summary},{surface:"triage",module:"library"})}catch(Re){}return D}catch(f){return null}},_e=(o=[])=>{var d=de(De,o);return Array.isArray(d)?d:o},ve=(o=[])=>M(De,Array.isArray(o)?o:[]),me=()=>`asn_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`,j=()=>{try{var o=window.__FOF_DEMO_CLIENTS||[];if(Array.isArray(o)&&o.length)return o.map(d=>({id:String(d.id),name:String(d.name||d.fullName||d.displayName||d.id)}))}catch(o){}return Array.from({length:8}).map((o,d)=>({id:`demo_${d+1}`,name:`Demo Client ${d+1}`}))},je=({open:o,item:d,onClose:m,onConfirm:E})=>{var[g,f]=React.useState(""),[F,D]=React.useState(()=>{var Me=new Date,Et=ya=>String(ya).padStart(2,"0");return`${Me.getFullYear()}-${Et(Me.getMonth()+1)}-${Et(Me.getDate())}`}),[k,T]=React.useState("PLAN"),[he,oe]=React.useState(""),ke=React.useMemo(()=>j(),[]);if(React.useEffect(()=>{var Me;if(o){try{f(((Me=ke==null?void 0:ke[0])==null?void 0:Me.id)||"")}catch(Et){}try{T("PLAN"),oe("")}catch(Et){}}},[o]),!o||!d)return null;var Re=()=>{var Me=(ke||[]).find(ya=>String(ya.id)===String(g))||(ke||[])[0]||{id:g||"unknown",name:"Client"},Et={id:me(),itemId:String(d.id||""),itemType:String(d.type||d.kind||"CONTENT"),itemTitle:String(d.title||d.name||"Untitled"),clientId:String(Me.id||""),clientName:String(Me.name||""),startDate:String(F||""),delivery:String(k||"PLAN"),note:String(he||""),createdAt:ps(),createdBy:"trainer_demo"};try{Et.contextSnapshot=we(Me)}catch(ya){}try{Et.lineage=$t(d)}catch(ya){}try{Et.isReusable=String((d==null?void 0:d.governance)||(d==null?void 0:d.scope)||"PRIVATE")!=="PRIVATE"}catch(ya){}try{var ya=String(Et.itemType||"").toUpperCase();Et.requiresReviewOnCapacityShift=ya==="PROGRAM"||ya==="WORKOUT"||ya==="PLAN"}catch(ya){}try{typeof E=="function"&&E(Et)}catch(ya){}};return React.createElement("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center p-4 bg-black/70"},React.createElement("div",{className:"w-full max-w-3xl rounded-2xl border border-white/12 bg-zinc-950/95 shadow-2xl overflow-hidden"},React.createElement("div",{className:"px-5 py-4 border-b border-white/10 flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Phase 3.3"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white truncate"},"Assign & Schedule"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 truncate"},String(d.title||d.name||"Untitled")," \xB7 ",React.createElement("span",{className:"text-white/80 font-semibold"},String(d.type||"CONTENT")))),React.createElement("button",{type:"button",onClick:m,className:"h-9 w-9 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/70"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"p-5 space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-bold text-white/80"},"Client"),React.createElement("select",{value:g,onChange:Me=>f(Me.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90"},(ke||[]).map(Me=>React.createElement("option",{key:Me.id,value:Me.id},Me.name))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Select who receives this assignment.")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-bold text-white/80"},"Start date"),React.createElement("input",{type:"date",value:F,onChange:Me=>D(Me.target.value),className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90"}),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Used for scheduling and history ordering."))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-bold text-white/80"},"Delivery"),React.createElement("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2"},[{id:"PLAN",label:"Add to Plan"},{id:"MESSAGE",label:"Send Message"},{id:"BOTH",label:"Plan + Message"}].map(Me=>React.createElement("button",{key:Me.id,type:"button",onClick:()=>T(Me.id),className:"px-3 py-2 rounded-xl border text-[12px] font-bold "+(k===Me.id?"border-lime-400/30 bg-lime-500/15 text-lime-100":"border-white/10 bg-black/20 text-white/70 hover:bg-white/5")},Me.label))),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},"Prototype wiring: logs assignment + enables Undo + History (Phase 3.3).")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"text-[12px] font-bold text-white/80"},"Note (optional)"),React.createElement("textarea",{value:he,onChange:Me=>oe(Me.target.value),rows:3,className:"mt-2 w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., focus on form, keep RPE 7, avoid knee pain..."}))),React.createElement("div",{className:"px-5 py-4 border-t border-white/10 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:m,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/75"},"Cancel"),React.createElement("button",{type:"button",onClick:Re,className:"px-4 py-2 rounded-xl border border-emerald-400/20 bg-emerald-500/15 hover:bg-emerald-500/20 text-[12px] font-extrabold text-emerald-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Check",size:16})," Assign"))))},re=({open:o,onClose:d,assignments:m,onUndo:E})=>{if(!o)return null;var g=Array.isArray(m)?m:[];return React.createElement("div",{className:"fixed inset-0 z-[9998] flex items-start justify-center p-4 bg-black/70"},React.createElement("div",{className:"w-full max-w-5xl rounded-2xl border border-white/12 bg-zinc-950/95 shadow-2xl overflow-hidden"},React.createElement("div",{className:"px-5 py-4 border-b border-white/10 flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-[0.28em] text-white/45"},"Phase 3.3"),React.createElement("div",{className:"mt-1 text-xl font-extrabold text-white"},"Assignment History"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},g.length," total")),React.createElement("button",{type:"button",onClick:d,className:"h-9 w-9 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/70"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"max-h-[70vh] overflow-y-auto trainer-scroll"},g.length===0?React.createElement("div",{className:"p-6 text-[12px] text-white/60"},"No assignments yet."):React.createElement("div",{className:"divide-y divide-white/5"},g.map(f=>React.createElement("div",{key:f.id,className:"p-4 flex items-start justify-between gap-4"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},f.itemTitle),React.createElement("div",{className:"mt-1 text-[11px] text-white/60 truncate"},f.clientName," \xB7 ",f.startDate," \xB7 ",React.createElement("span",{className:"text-white/80 font-semibold"},f.delivery)," \xB7 ",f.itemType),f.note?React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},f.note):null),React.createElement("button",{type:"button",onClick:()=>{try{E&&E(f.id)}catch(F){}},className:"shrink-0 px-3 py-2 rounded-xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-extrabold text-amber-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Undo2",size:14})," Undo"))))),React.createElement("div",{className:"px-5 py-4 border-t border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-[11px] text-white/55"},"Undo removes the record (prototype) and updates counts."),React.createElement("button",{type:"button",onClick:d,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[12px] font-bold text-white/75"},"Close"))))},Z=({setView:o,onAssign:d})=>{var Gi;var m=Pn(),[E,g]=React.useState(()=>{var pe=Td(null);if(!Array.isArray(pe)||pe.length<150){var Sa=V(150);try{cd(Sa)}catch(Ji){}return Sa}if(Array.isArray(pe)&&pe.length===0){var Sa=V();try{cd(Sa)}catch(Ji){}return Sa}return pe}),[f,F]=React.useState(!1);React.useEffect(()=>{cd(E)},[E]),React.useEffect(()=>{var pe;try{var Sa=Td([]);if(!f&&Array.isArray(Sa)&&Sa.length===0){var Ji=V();cd(Ji),g(Ji),F(!0);try{(pe=m==null?void 0:m.logEvent)==null||pe.call(m,"library.seeded",{count:Ji.length})}catch(wo){}}}catch(Sa){}},[f,m]);var D=["ALL","PRIVATE","TEAM","COMMUNITY","AI"],k=["ALL","DRAFT","PUBLISHED"],[T,he]=React.useState("ALL"),oe=React.useMemo(()=>[{id:"ALL",label:"All"},{id:"PROGRAMS",label:"Programs"},{id:"WORKOUTS",label:"Workouts"},{id:"ASSESSMENTS",label:"Assessments"},{id:"NUTRITION",label:"Nutrition"},{id:"REHAB",label:"Rehab"},{id:"YOGA",label:"Yoga"},{id:"SPORT_BLOCKS",label:"Sport Blocks"}],[]),ke=React.useMemo(()=>({PROGRAMS:["PROGRAM","PROGRAM_TEMPLATE","BLOCK","MESOCYCLE"],WORKOUTS:["WORKOUT","SESSION","WOD","WORKOUT_TEMPLATE"],ASSESSMENTS:["ASSESSMENT","TEST","SCREEN","CHECKIN_FORM"],NUTRITION:["NUTRITION","MEAL_PLAN","MACRO_TEMPLATE","NUTRITION_TEMPLATE","NUTRITION_TEMPLATE"],REHAB:["REHAB","PREHAB","PHYSIO","RECOVERY"],YOGA:["YOGA","MOBILITY","FLEXIBILITY","BREATHWORK"],SPORT_BLOCKS:["SPORT_BLOCK","SPORT","SPORT_SESSION"]}),[]),Re=React.useCallback(pe=>{if(!pe||pe==="ALL")return"PROGRAM";var Sa=ke&&ke[pe]?ke[pe]:null;return Array.isArray(Sa)&&Sa.length?String(Sa[0]):"PROGRAM"},[ke]),[Me,Et]=React.useState("ALL"),[ya,Ct]=React.useState("ALL"),[Jt,Ye]=React.useState(""),[Tt,_t]=React.useState("ALL"),[P,I]=React.useState("ALL"),[te,Ce]=React.useState("ALL"),[C,ye]=React.useState("ALL"),[le,O]=React.useState("ALL"),[qe,Pt]=React.useState("ALL"),[Za,Ma]=React.useState("ANY");React.useEffect(()=>{var pe;try{var Sa=on.get("fof.tdep.library_launch_ctx.v1");if(!Sa)return;var Ji=JSON.parse(Sa||"null");if(!Ji)return;Ji.q&&Ye(String(Ji.q)),Ji.tagHint&&Ji.tagHint!=="ALL"&&_t(String(Ji.tagHint)),Ji.sportId&&ye(String(Ji.sportId));try{on.remove("fof.tdep.library_launch_ctx.v1")}catch(wo){}try{(pe=m==null?void 0:m.logEvent)==null||pe.call(m,"library.launch_context_applied",{...Ji})}catch(wo){}}catch(Sa){}},[]);var[$a,Yt]=React.useState(!1),[it,Ut]=React.useState(!1),[ce,Vt]=React.useState("UPDATED"),[Fe,v]=React.useState(()=>a([])),[Te,Se]=React.useState(()=>c([]));React.useEffect(()=>{r(Fe)},[Fe]),React.useEffect(()=>{h(Te)},[Te]);var yt=React.useMemo(()=>new Set(Fe||[]),[Fe]),St=React.useMemo(()=>{var pe=new Map;return(Te||[]).forEach(Sa=>{Sa&&Sa.id&&pe.set(Sa.id,Sa.ts||0)}),pe},[Te]),za=pe=>{var Sa;v(Ji=>{var wo=new Set(Ji||[]);return wo.has(pe)?wo.delete(pe):wo.add(pe),Array.from(wo)});try{(Sa=m==null?void 0:m.logEvent)==null||Sa.call(m,"library.favorite_toggled",{id:pe})}catch(Ji){}},Xe=(pe,Sa="open")=>{try{var Ji=Date.now();Se(wo=>{var Ns=Array.isArray(wo)?wo.slice(0):[];return[{id:pe,ts:Ji,action:Sa},...Ns.filter(Uo=>Uo&&Uo.id!==pe)].slice(0,50)})}catch(Ji){}},[dt,Qt]=React.useState(null),[yi,zi]=React.useState(null),[os,as]=React.useState(()=>_e([])),[ro,n]=React.useState({open:!1,item:null}),[y,be]=React.useState(!1),[ie,Dt]=React.useState(null);React.useEffect(()=>{try{ve(os)}catch(pe){}},[os]);var b=pe=>!pe||pe==="ALL"?"All":String(pe).replaceAll("_"," ").replaceAll("-"," ").trim().split(/\s+/).map(Ji=>Ji&&Ji[0].toUpperCase()+Ji.slice(1)).join(" "),We=React.useMemo(()=>({tags:["strength","hypertrophy","fat loss","conditioning","hiit","mobility","rehab","yoga","pilates","endurance","power","warmup","cooldown"],muscle:["full body","upper body","lower body","push","pull","legs","chest","back","shoulders","arms","biceps","triceps","core","glutes","quads","hamstrings","calves"],equip:["bodyweight","dumbbells","barbell","kettlebell","bands","machines","cable","bench","pull-up bar","medicine ball","trx","treadmill","bike","rower","gym (mixed)"],sport:["general","football","soccer","basketball","tennis","padel","running","cycling","swimming","crossfit","mma","boxing","cricket","rugby","golf"],diff:["beginner","intermediate","advanced","elite"],contra:["knee pain","back pain","shoulder pain","pregnancy","hypertension","asthma","acute injury","post-surgery","diabetes","heart condition"]}),[]),da=(pe,Sa,Ji=!0)=>{var wo=Us=>{if(Us==null)return"";var Uo=String(Us).trim();return Ji?Uo.toLowerCase():Uo},Ns=new Set;return(pe||[]).forEach(Us=>{var Uo=wo(Us);Uo&&Ns.add(Uo)}),(Sa||[]).forEach(Us=>{var Uo=wo(Us);Uo&&Ns.add(Uo)}),["ALL",...Array.from(Ns).sort((Us,Uo)=>Us.localeCompare(Uo))]},ii=React.useMemo(()=>da(We.tags,(E||[]).flatMap(pe=>(pe.tags||[]).map(Sa=>String(Sa))),!0),[E,We]),jt=React.useMemo(()=>da(We.muscle,(E||[]).map(pe=>pe.muscleGroup).filter(Boolean),!0),[E,We]),Kt=React.useMemo(()=>da(We.equip,(E||[]).map(pe=>pe.equipment).filter(Boolean),!0),[E,We]),Na=React.useMemo(()=>da(We.sport,(E||[]).map(pe=>pe.sport).filter(Boolean),!0),[E,We]),ra=React.useMemo(()=>da(We.diff,(E||[]).map(pe=>pe.difficulty).filter(Boolean),!0),[E,We]),Ti=React.useMemo(()=>da(We.contra,(E||[]).flatMap(pe=>(pe.contraindications||[]).map(Sa=>String(Sa))),!0),[E,We]),Ee=React.useMemo(()=>{var pe=String(Jt||"").trim().toLowerCase(),Sa=Za==="ANY"||Za===""||Za==null?null:Number(Za),Ji=Us=>{if(T!=="ALL"&&!(ke[T]||[]).includes(String(Us.type||""))||Me!=="ALL"&&Us.governance!==Me||ya!=="ALL"&&Us.status!==ya||$a&&!yt.has(Us.id)||it&&!St.has(Us.id)||Tt!=="ALL"&&!(Us.tags||[]).map(hr=>String(hr).toLowerCase()).includes(String(Tt).toLowerCase())||P!=="ALL"&&String(Us.muscleGroup||"")!==String(P)||te!=="ALL"&&String(Us.equipment||"")!==String(te)||C!=="ALL"&&String(Us.sport||"")!==String(C)||le!=="ALL"&&String(Us.difficulty||"")!==String(le)||qe!=="ALL"&&!(Us.contraindications||[]).map(hr=>String(hr)).includes(String(qe)))return!1;if(Sa!=null){var Uo=Us.durationMin==null||Us.durationMin===""?null:Number(Us.durationMin);if(Uo!=null&&Uo>Sa)return!1}return!(pe&&!((Us.title||"")+" "+(Us.description||"")+" "+(Us.tags||[]).join(" ")+" "+(Us.muscleGroup||"")+" "+(Us.equipment||"")+" "+(Us.sport||"")+" "+(Us.difficulty||"")+" "+(Us.contraindications||[]).join(" ")).toLowerCase().includes(pe))},wo=(E||[]).filter(Ji),Ns=(Us,Uo)=>{if(ce==="RECENT"){var Qr=St.get(Us.id)||0,Zr=St.get(Uo.id)||0;if(Zr!==Qr)return Zr-Qr}var hr=Date.parse(Us.updatedAt||Us.createdAt||0)||0;return(Date.parse(Uo.updatedAt||Uo.createdAt||0)||0)-hr};return wo.sort(Ns)},[E,T,Me,ya,Jt,Tt,P,te,C,le,qe,Za,$a,it,ce,Fe,Te]),ae=pe=>{g(Sa=>(Sa||[]).find(Ns=>Ns.id===pe.id)?(Sa||[]).map(Ns=>Ns.id===pe.id?pe:Ns):[pe,...Sa||[]])},Ot=pe=>g(Sa=>(Sa||[]).filter(Ji=>Ji.id!==pe)),xe=(pe="PROGRAM")=>({id:xs(),type:pe,title:"Untitled "+pe.replaceAll("_"," ").toLowerCase(),description:"",tags:[],muscleGroup:"",equipment:"",sport:"",durationMin:null,difficulty:"",contraindications:[],governance:"PRIVATE",status:"DRAFT",version:"v1.0",createdAt:ps(),updatedAt:ps(),updatedBy:"trainer_demo",body:""}),p=pe=>{try{var Ji=String(pe||"v1.0").toLowerCase().replace("v","").split("."),wo=Math.max(0,parseInt(Ji[0]||"1",10)||1),Ns=Math.max(0,parseInt(Ji[1]||"0",10)||0);return"v"+wo+"."+(Ns+1)}catch(Sa){return"v1.1"}},R=pe=>{var Ji;var Sa={...pe,status:pe.status==="PUBLISHED"?"DRAFT":"PUBLISHED",updatedAt:ps(),updatedBy:"trainer_demo"};ae(Sa);try{(Ji=m==null?void 0:m.logEvent)==null||Ji.call(m,"library.publish_toggled",{id:pe.id,type:pe.type,nextStatus:Sa.status})}catch(wo){}},Ve=pe=>{var Ji;var Sa={...pe,id:xs(),title:(pe.title||"")+" (copy)",status:"DRAFT",version:pe.version||"v1.0",createdAt:ps(),updatedAt:ps(),updatedBy:"trainer_demo"};ae(Sa),Qt(Sa);try{Xe(Sa.id,"duplicate")}catch(wo){}try{(Ji=m==null?void 0:m.logEvent)==null||Ji.call(m,"library.duplicated",{from:pe.id,to:Sa.id,type:pe.type})}catch(wo){}},pa=pe=>{zi({...pe,tagsText:(pe.tags||[]).join(", "),contraText:(pe.contraindications||[]).join(", ")});try{Xe(pe.id,"edit")}catch(Sa){}},qt=()=>{var pe;try{if(!yi)return;var Sa=String(yi.tagsText||"").split(",").map(Us=>Us.trim()).filter(Boolean).slice(0,24),Ji=String(yi.contraText||"").split(",").map(Us=>Us.trim()).filter(Boolean).slice(0,24),wo=(E||[]).find(Us=>Us.id===yi.id),Ns={...yi,tags:Sa,contraindications:Ji,updatedAt:ps(),updatedBy:"trainer_demo",version:wo?p(wo.version):yi.version||"v1.0"};delete Ns.tagsText,delete Ns.contraText,ae(Ns),Qt(Ns),zi(null);try{(pe=m==null?void 0:m.logEvent)==null||pe.call(m,wo?"library.item_updated":"library.item_created",{id:Ns.id,type:Ns.type,governance:Ns.governance,status:Ns.status,version:Ns.version})}catch(Us){}}catch(Sa){}},ka=pe=>{var Sa;try{(Sa=m==null?void 0:m.logEvent)==null||Sa.call(m,"library.assign_clicked",{id:pe.id,type:pe.type})}catch(Ji){}try{Xe(pe.id,"assign")}catch(Ji){}n({open:!0,item:pe})},pi=({tone:pe="neutral",children:Sa})=>React.createElement("span",{className:"px-2 py-1 rounded-full text-[10px] font-mono uppercase tracking-widest border "+(pe==="lime"?"border-lime-400/30 bg-lime-500/10 text-lime-100":pe==="sky"?"border-sky-400/30 bg-sky-500/10 text-sky-100":pe==="amber"?"border-amber-400/30 bg-amber-500/10 text-amber-100":"border-white/12 bg-white/5 text-white/70")},Sa),cs=pe=>pe==="PROGRAM"?"lime":pe==="WORKOUT"?"sky":pe==="ASSESSMENT"?"amber":pe==="NUTRITION_TEMPLATE"?"sky":"neutral";return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-6xl mx-auto space-y-5"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-white/55 font-bold"},"Phase 3.2"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white tracking-tight"},"Master Content Library"),React.createElement("div",{className:"mt-2 text-[13px] text-white/65 max-w-2xl"},"Consolidated trainer assets with ",React.createElement("span",{className:"text-white/85 font-semibold"},"governance"),", ",React.createElement("span",{className:"text-white/85 font-semibold"},"publish states"),", and ",React.createElement("span",{className:"text-white/85 font-semibold"},"versioning"),".")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},(()=>{var pe=typeof Er=="function"?Er():window.__TD_FLAGS||{};return pe&&pe.nutritionEngineEnabled?React.createElement("button",{type:"button",onClick:()=>{try{o("NUTRITION_ENGINE")}catch(Sa){}},className:"px-3 py-2 rounded-sm border border-lime-400/30 bg-lime-500/10 hover:bg-lime-500/15 text-lime-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Utensils",size:14})," Nutrition Engine"):null})(),(()=>{var pe=typeof Er=="function"?Er():window.__TD_FLAGS||{};return pe&&pe.yogaWellnessEnabled?React.createElement("button",{type:"button",onClick:()=>{try{o("YOGA_WELLNESS_ENGINE")}catch(Sa){}},className:"px-3 py-2 rounded-sm border border-fuchsia-400/25 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-fuchsia-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"Lotus",size:14})," Yoga & Wellness"):null})(),React.createElement("button",{type:"button",onClick:()=>{var pe=xe(Re(T));zi({...pe,tagsText:""}),Qt(pe)},className:"px-3 py-2 rounded-sm border border-sky-400/30 bg-sky-500/10 hover:bg-sky-500/15 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"+ New"),React.createElement("button",{type:"button",onClick:()=>{var Sa;if(!confirm("Reset library to seeded demo items?"))return;var pe=V();g(pe);try{(Sa=m==null?void 0:m.logEvent)==null||Sa.call(m,"library.reset_seed",{count:pe.length})}catch(Ji){}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Reset seed"),React.createElement("button",{type:"button",onClick:()=>be(!0),className:"px-3 py-2 rounded-sm border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-amber-100 text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2"},React.createElement(_,{name:"History",size:14})," Assignments (",(os||[]).length,")"),React.createElement("button",{type:"button",onClick:()=>o("HUB"),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Back to Hub"))),React.createElement("div",{className:"rounded-sm border border-titanium-800 bg-titanium-950/40 p-4"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},oe.map(pe=>React.createElement("button",{key:pe.id,type:"button",onClick:()=>he(pe.id),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+(T===pe.id?"border-emerald-400/50 bg-emerald-500/15 text-emerald-100":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},pe.label))),React.createElement("div",{className:"mt-3 h-px bg-white/10"}),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap justify-end"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("select",{value:Me,onChange:pe=>Et(pe.target.value),className:"px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/80"},D.map(pe=>React.createElement("option",{key:pe,value:pe},pe))),React.createElement("select",{value:ya,onChange:pe=>Ct(pe.target.value),className:"px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/80"},k.map(pe=>React.createElement("option",{key:pe,value:pe},pe))),React.createElement("div",{className:"relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:Jt,onChange:pe=>Ye(pe.target.value),placeholder:"Search content\u2026",className:"pl-9 pr-3 py-2 w-64 max-w-[70vw] rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})))),React.createElement("div",{className:"mt-3 rounded-sm border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 xl:grid-cols-8 gap-2"},React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Tag"),React.createElement("select",{value:Tt,onChange:pe=>_t(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},ii.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Muscle"),React.createElement("select",{value:P,onChange:pe=>I(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},jt.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Equipment"),React.createElement("select",{value:te,onChange:pe=>Ce(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},Kt.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Sport"),React.createElement("select",{value:C,onChange:pe=>ye(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},Na.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Difficulty"),React.createElement("select",{value:le,onChange:pe=>O(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},ra.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Contra"),React.createElement("select",{value:qe,onChange:pe=>Pt(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},Ti.map(pe=>React.createElement("option",{key:pe,value:pe},pe==="ALL"?"All":b(pe))))),React.createElement("div",{className:"rounded-sm border border-white/10 bg-white/5 p-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Duration"),React.createElement("select",{value:Za,onChange:pe=>Ma(pe.target.value),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},[{k:"ANY",l:"Any"},{k:"15",l:"\u2264 15m"},{k:"30",l:"\u2264 30m"},{k:"45",l:"\u2264 45m"},{k:"60",l:"\u2264 60m"},{k:"90",l:"\u2264 90m"}].map(pe=>React.createElement("option",{key:pe.k,value:pe.k},pe.l)))))),React.createElement("div",{className:"mt-2 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>Yt(pe=>!pe),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+($a?"border-amber-400/40 bg-amber-500/10 text-amber-100":"border-white/12 bg-white/5 text-white/75 hover:bg-white/10"),title:"Show only favorites"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"Star",size:14})," Favorites")),React.createElement("button",{type:"button",onClick:()=>Ut(pe=>!pe),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+(it?"border-sky-400/40 bg-sky-500/10 text-sky-100":"border-white/12 bg-white/5 text-white/75 hover:bg-white/10"),title:"Show only recently used"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(_,{name:"Clock",size:14})," Recent")),React.createElement("select",{value:ce,onChange:pe=>Vt(pe.target.value),className:"ml-auto px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/80"},React.createElement("option",{value:"UPDATED"},"Sort: Updated"),React.createElement("option",{value:"RECENT"},"Sort: Recently used"))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Storage: ",React.createElement("span",{className:"font-mono text-white/70"},Xl)," \u2022 Auto-version bump on save (minor).")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4"},React.createElement("div",{className:"lg:col-span-3 space-y-3"},Ee.length===0?React.createElement("div",{className:"rounded-sm border border-white/12 bg-white/5 p-5"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold"},"No items match your filters."),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Tip: switch to \u201CAll\u201D or click ",React.createElement("span",{className:"text-white/70 font-semibold"},"Reset seed"),".")):Ee.map(pe=>React.createElement("div",{key:pe.id,role:"button",tabIndex:0,onClick:()=>{Qt(pe),Xe(pe.id,"open")},onKeyDown:Sa=>{(Sa.key==="Enter"||Sa.key===" ")&&(Sa.preventDefault(),Qt(pe),Xe(pe.id,"open"))},className:"w-full text-left rounded-sm border p-4 transition-colors "+((dt==null?void 0:dt.id)===pe.id?"border-sky-400/40 bg-sky-500/10":"border-titanium-800 bg-titanium-950/40 hover:bg-titanium-950/60")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(pi,{tone:cs(pe.type)},pe.type.replaceAll("_"," ")),React.createElement(pi,{tone:"neutral"},pe.governance),React.createElement(pi,{tone:pe.status==="PUBLISHED"?"lime":"neutral"},pe.status),React.createElement("span",{className:"text-[11px] text-white/45 font-mono"},pe.version||"v1.0")),React.createElement("div",{className:"mt-2 text-[14px] font-bold text-white truncate"},pe.title||"(untitled)"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60 line-clamp-2"},pe.description||"\u2014"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},(pe.tags||[]).slice(0,6).map((Sa,Ji)=>React.createElement("span",{key:Ji,className:"px-2 py-1 rounded-full border border-white/10 bg-white/5 text-[10px] text-white/70"},Sa)))),React.createElement("div",{className:"shrink-0 flex items-start gap-2"},React.createElement("button",{type:"button",onClick:Sa=>{Sa.preventDefault(),Sa.stopPropagation(),za(pe.id)},className:"p-2 rounded-sm border "+(yt.has(pe.id)?"border-amber-400/40 bg-amber-500/10 text-amber-100":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10"),title:yt.has(pe.id)?"Unfavorite":"Favorite"},React.createElement(_,{name:"Star",size:16})),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-[10px] text-white/40 font-mono uppercase tracking-widest"},"Updated"),React.createElement("div",{className:"text-[11px] text-white/65 font-mono"},String(pe.updatedAt||"").slice(0,10)))))))),React.createElement("div",{className:"lg:col-span-2"},React.createElement("div",{className:"rounded-sm border border-titanium-800 bg-titanium-950/40 p-4"},dt?React.createElement("div",null,React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement(pi,{tone:cs(dt.type)},dt.type.replaceAll("_"," ")),React.createElement(pi,null,dt.governance),React.createElement(pi,{tone:dt.status==="PUBLISHED"?"lime":"neutral"},dt.status),React.createElement("span",{className:"text-[11px] text-white/45 font-mono"},dt.version)),React.createElement("div",{className:"mt-2 text-[16px] font-extrabold text-white leading-tight"},dt.title),React.createElement("div",{className:"mt-2 text-[12px] text-white/65"},dt.description||"\u2014"),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-white/55"},React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Muscle"),React.createElement("div",{className:"text-white/70"},dt.muscleGroup||"\u2014")),React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Equipment"),React.createElement("div",{className:"text-white/70"},dt.equipment||"\u2014")),React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Sport"),React.createElement("div",{className:"text-white/70"},dt.sport||"\u2014")),React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Duration"),React.createElement("div",{className:"text-white/70"},dt.durationMin==null||dt.durationMin===""?"\u2014":`${dt.durationMin} min`)),React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Difficulty"),React.createElement("div",{className:"text-white/70"},dt.difficulty||"\u2014")),React.createElement("div",null,React.createElement("span",{className:"text-white/35 font-mono uppercase tracking-widest text-[10px]"},"Contra"),React.createElement("div",{className:"text-white/70"},(dt.contraindications||[]).slice(0,3).join(", ")||"\u2014"))))),React.createElement("div",{className:"mt-4 grid grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:()=>pa(dt),className:"px-3 py-2 rounded-sm border border-sky-400/30 bg-sky-500/10 hover:bg-sky-500/15 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"Edit"),React.createElement("button",{type:"button",onClick:()=>Ve(dt),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Duplicate"),React.createElement("button",{type:"button",onClick:()=>R(dt),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+(dt.status==="PUBLISHED"?"border-amber-400/30 bg-amber-500/10 hover:bg-amber-500/15 text-amber-100":"border-lime-400/30 bg-lime-500/10 hover:bg-lime-500/15 text-lime-100")},dt.status==="PUBLISHED"?"Unpublish":"Publish"),React.createElement("button",{type:"button",onClick:()=>ka(dt),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Assign")),React.createElement("div",{className:"mt-4 rounded-sm border border-white/10 bg-black/25 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Body"),React.createElement("pre",{className:"mt-2 text-[11px] text-white/70 whitespace-pre-wrap leading-relaxed"},(dt.body||"").slice(0,900)||"\u2014"),(dt.body||"").length>900&&React.createElement("div",{className:"mt-2 text-[10px] text-white/35"},"Preview truncated.")),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Updated by ",React.createElement("span",{className:"text-white/70 font-mono"},dt.updatedBy||"\u2014")," \u2022 ",String(dt.updatedAt||"").replace("T"," ").slice(0,16)),React.createElement("div",{className:"mt-3 flex items-center justify-between gap-2"},React.createElement("button",{type:"button",onClick:()=>{var pe;if(confirm("Delete this item?")){Ot(dt.id),Qt(null);try{(pe=m==null?void 0:m.logEvent)==null||pe.call(m,"library.deleted",{id:dt.id,type:dt.type})}catch(Sa){}}},className:"px-3 py-2 rounded-sm border border-red-400/30 bg-red-500/10 hover:bg-red-500/15 text-red-100 text-[11px] font-mono uppercase tracking-widest"},"Delete"),React.createElement("div",{className:"text-[10px] text-white/35 font-mono"},dt.id))):React.createElement("div",{className:"text-[12px] text-white/55"},"Select an item to see details."))))),yi&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-[90] bg-black/60 flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-3xl rounded-sm border border-white/12 bg-titanium-950 p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/55"},"Edit item"),React.createElement("div",{className:"mt-1 text-[15px] font-extrabold text-white"},yi.title),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Saving bumps version minor automatically.")),React.createElement("button",{type:"button",onClick:()=>zi(null),className:"p-2 rounded-sm hover:bg-white/5 text-white/75"},React.createElement(_,{name:"X",size:18}))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Type"),React.createElement("select",{value:yi.type,onChange:pe=>zi(Sa=>({...Sa,type:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},TYPES.filter(pe=>pe.id!=="ALL").map(pe=>React.createElement("option",{key:pe.id,value:pe.id},pe.label)))),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Governance"),React.createElement("select",{value:yi.governance,onChange:pe=>zi(Sa=>({...Sa,governance:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85"},D.filter(pe=>pe!=="ALL").map(pe=>React.createElement("option",{key:pe,value:pe},pe)))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Title"),React.createElement("input",{value:yi.title,onChange:pe=>zi(Sa=>({...Sa,title:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Description"),React.createElement("textarea",{value:yi.description,onChange:pe=>zi(Sa=>({...Sa,description:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90 h-20"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Tags (comma separated)"),React.createElement("input",{value:yi.tagsText||"",onChange:pe=>zi(Sa=>({...Sa,tagsText:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., strength, beginner, 4-week"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Muscle group"),React.createElement("input",{value:yi.muscleGroup||"",onChange:pe=>zi(Sa=>({...Sa,muscleGroup:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., Full Body / Push / Pull / Legs"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Equipment"),React.createElement("input",{value:yi.equipment||"",onChange:pe=>zi(Sa=>({...Sa,equipment:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., Bodyweight / Dumbbells / Gym"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Sport"),React.createElement("input",{value:yi.sport||"",onChange:pe=>zi(Sa=>({...Sa,sport:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., General / Football / Tennis"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Duration (minutes)"),React.createElement("input",{type:"number",value:(Gi=yi.durationMin)!=null?Gi:"",onChange:pe=>zi(Sa=>({...Sa,durationMin:pe.target.value===""?null:Number(pe.target.value)})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., 45"})),React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Difficulty"),React.createElement("input",{value:yi.difficulty||"",onChange:pe=>zi(Sa=>({...Sa,difficulty:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"Beginner / Intermediate / Advanced"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Contraindications (comma separated)"),React.createElement("input",{value:yi.contraText||(yi.contraindications||[]).join(", "),onChange:pe=>zi(Sa=>({...Sa,contraText:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90",placeholder:"e.g., knee-pain, pregnancy, acute-injury"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Body"),React.createElement("textarea",{value:yi.body||"",onChange:pe=>zi(Sa=>({...Sa,body:pe.target.value})),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90 h-56 font-mono",placeholder:"Write notes, structure, or template content here\u2026"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>zi(null),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Cancel"),React.createElement("button",{type:"button",onClick:qt,className:"px-3 py-2 rounded-sm border border-sky-400/30 bg-sky-500/15 hover:bg-sky-500/20 text-sky-100 text-[11px] font-mono uppercase tracking-widest"},"Save")))),React.createElement(je,{open:!!ro.open,item:ro.item,onClose:()=>n({open:!1,item:null}),onConfirm:pe=>{var Sa,Ji;try{as(Us=>{var Uo=Array.isArray(Us)?Us.slice(0):[];return[pe,...Uo].slice(0,500)});try{M("fof.tdep.assign.undo.v1",pe)}catch(Us){}var wo=ps(),Ns={id:`pq_${Date.now()}_${Math.random().toString(16).slice(2)}`,assignmentId:pe.id,clientId:String(pe.clientId||""),clientName:String(pe.clientName||""),itemId:String(pe.itemId||""),itemType:String(pe.itemType||""),title:String(pe.itemTitle||""),scheduledFor:String(pe.startDate||"").slice(0,10)?String(pe.startDate).slice(0,10):wo.slice(0,10),delivery:String(pe.delivery||"PLAN"),status:"SCHEDULED",createdAt:wo};try{G(Ns)}catch(Us){}try{(Ji=(Sa=window.__FOF_TDEP)==null?void 0:Sa.logEvent)==null||Ji.call(Sa,"library.assignment.created",{assignmentId:pe.id,planQueueId:Ns.id,clientId:Ns.clientId,itemId:Ns.itemId,itemType:Ns.itemType,title:Ns.title,scheduledFor:Ns.scheduledFor,delivery:Ns.delivery,contextSnapshot:pe.contextSnapshot||null,lineage:pe.lineage||null},{surface:"content_library",module:"library"})}catch(Us){}try{var Us=new Date(Date.now()+6048e5).toISOString(),Uo={id:`sig_asn_${pe.id}`,clientId:Ns.clientId,type:"OPPORTUNITY",severity:"LOW",confidence:.75,evidence:[{k:"item",v:Ns.title},{k:"type",v:Ns.itemType},{k:"scheduledFor",v:Ns.scheduledFor}],summary:`Review assigned ${Ns.itemType||"content"}: ${Ns.title}`,recommendedActions:[{id:"open_plan",label:"Open Plan tab",cta:{nav:{target:"CLIENT_ACTION",clientId:Ns.clientId,tab:"PLAN"}}},{id:"message",label:"Message client",cta:{nav:{target:"CLIENT_ACTION",clientId:Ns.clientId,tab:"MESSAGES"}}}],status:"OPEN",meta:{source:"library_assignment",assignmentId:pe.id,planQueueId:Ns.id,dueAt:Us}};gt(Uo)}catch(Us){}n({open:!1,item:null}),Dt({id:pe.id,title:pe.itemTitle,client:pe.clientName})}catch(wo){}}}),React.createElement(re,{open:!!y,onClose:()=>be(!1),assignments:os,onUndo:pe=>{try{as(Sa=>Array.isArray(Sa)?Sa.filter(Ji=>Ji&&Ji.id!==pe):[]),Dt({id:"",title:"Assignment removed",client:""})}catch(Sa){}}}),ie?React.createElement("div",{className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-[9999]"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-black/80 backdrop-blur px-4 py-3 shadow-xl flex items-center gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-extrabold text-white truncate"},"Assigned"),React.createElement("div",{className:"text-[11px] text-white/65 truncate"},ie.title,ie.client?` \u2192 ${ie.client}`:"")),React.createElement("button",{type:"button",onClick:()=>{try{var pe=de("fof.tdep.assign.undo.v1",null);pe&&pe.id&&(as(Sa=>Array.isArray(Sa)?Sa.filter(Ji=>Ji&&Ji.id!==pe.id):[]),M("fof.tdep.assign.undo.v1",null))}catch(pe){}Dt(null)},className:"px-3 py-2 rounded-xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-[11px] font-extrabold text-amber-100 inline-flex items-center gap-2"},React.createElement(_,{name:"Undo2",size:14})," Undo"),React.createElement("button",{type:"button",onClick:()=>Dt(null),className:"h-9 w-9 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/70"},React.createElement(_,{name:"X",size:16})))):null)},Qe=()=>{var f,F,D,k,T,he,oe,ke,Re;var o=ct||null,d=typeof window!="undefined"?(f=window.__FOF_TDEP)==null?void 0:f.TRIAGE:null,m=React.useMemo(()=>{var Me,Et;try{return(((Me=d==null?void 0:d.getQueue)==null?void 0:Me.call(d,{includeSnoozed:!0,includeResolved:!1}))||((Et=d==null?void 0:d.getQueue)==null?void 0:Et.call(d))||[]).find(Jt=>Jt&&String(Jt.clientId||"")===String((o==null?void 0:o.id)||""))||null}catch(ya){return null}},[o==null?void 0:o.id]),E=(k=(D=(F=o==null?void 0:o.capacityScoreNow)!=null?F:o==null?void 0:o.capacityScore)!=null?D:o==null?void 0:o.readiness)!=null?k:null,g=(Me=null)=>{try{o&&zt&&zt(o)}catch(Et){}try{typeof window!="undefined"&&(window.__FOF_TDEP_AI_INTENT=Me)}catch(Et){}try{u("AI_HUB")}catch(Et){}};return React.createElement("div",{className:"p-6 max-w-5xl mx-auto"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.26em] text-white/55 font-bold"},"Readiness Detail"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white truncate"},(o==null?void 0:o.name)||"Client"),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Readiness in flows = ",React.createElement("span",{className:"text-white font-semibold"},"Capacity Score"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>u("DAILY_HUB"),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Back"),React.createElement("button",{type:"button",onClick:()=>g({tool:"SHARED_PARAMS",source:"READINESS_DETAIL",clientId:String((o==null?void 0:o.id)||"")}),className:"px-3 py-2 rounded-2xl border border-purple-400/25 bg-purple-500/10 hover:bg-purple-500/15 text-[11px] font-mono uppercase tracking-widest text-purple-100"},"Open AI Hub"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4"},React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Capacity Score"),React.createElement("div",{className:"mt-2 text-4xl font-extrabold text-white"},E!=null?Math.round(Number(E||0)):"\u2014"),React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},"Sleep: ",(T=o==null?void 0:o.sleepAvg7d)!=null?T:"\u2014","h \u2022 RHR: ",(he=o==null?void 0:o.restingHR)!=null?he:"\u2014"," \u2022 Pain: ",(oe=o==null?void 0:o.painScore)!=null?oe:"\u2014","/10"),React.createElement("div",{className:"mt-3 text-[12px] text-white/60"},"Adherence (7d): ",(o==null?void 0:o.adherence7d)!=null?Math.round(Number(o.adherence7d)*100):"\u2014","% \u2022 Steps: ",(ke=o==null?void 0:o.stepsAvg7d)!=null?ke:"\u2014")),React.createElement("div",{className:"lg:col-span-2 rounded-3xl border border-white/12 bg-white/5 overflow-hidden"},React.createElement("div",{className:"p-4 border-b border-white/10 flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},"Triage context"),React.createElement("div",{className:"text-[11px] text-white/55"},"Why this client is surfaced (if applicable)")),m?React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2.5 py-1 rounded-full border border-white/12 bg-white/5 text-white/75"},m.type," \u2022 Severity ",Math.round(Number(m.severity||0))," \u2022 ",Math.round(Number(m.confidence||0)*100),"%"):React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2.5 py-1 rounded-full border border-emerald-400/20 bg-emerald-500/10 text-emerald-100"},"No active triage signal")),React.createElement("div",{className:"p-4"},m?React.createElement(React.Fragment,null,React.createElement("div",{className:"text-[12px] text-white/80 font-semibold"},m.title||m.summary),(Re=m.evidence)!=null&&Re.length?React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] text-white/45 font-mono uppercase tracking-widest"},"Evidence"),React.createElement("ul",{className:"mt-2 space-y-1"},m.evidence.slice(0,10).map((Me,Et)=>React.createElement("li",{key:Et,className:"text-[12px] text-white/70"},"\u2022 ",Me)))):React.createElement("div",{className:"mt-3 text-[12px] text-white/55"},"No evidence attached."),Array.isArray(m.recommendedActions)&&m.recommendedActions.length?React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},m.recommendedActions.slice(0,4).map((Me,Et)=>React.createElement("button",{key:Et,type:"button",onClick:()=>{var ya,Ct;try{(Me==null?void 0:Me.verb)==="OPEN_THREAD"?(ensureClientThread(o==null?void 0:o.id,m),u("INBOX")):(Me==null?void 0:Me.verb)==="OPEN_CLIENT"?u("CLIENT_ACTION_MODE"):g({tool:((ya=Me==null?void 0:Me.payload)==null?void 0:ya.tool)||"UNKNOWN_AI",mode:((Ct=Me==null?void 0:Me.payload)==null?void 0:Ct.mode)||null,source:"TRIAGE_ACTION",signalId:String((m==null?void 0:m.id)||""),clientId:String((o==null?void 0:o.id)||"")})}catch(Jt){}},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},Me.label||"Action"))):null):React.createElement("div",{className:"text-[12px] text-white/60"},"This client is not currently flagged by Unified AI Triage.")))))},nt=({clientRecords:o=[],selectedClient:d,setSelectedClient:m})=>{var E="FOF_TD_SESSIONS_V1",g="FOF_TD_PACKAGES_V1",f=(Fe,v)=>{try{var Te=localStorage.getItem(Fe);if(!Te)return v;var Se=JSON.parse(Te);return Se==null?v:Se}catch(Te){return v}},F=(Fe,v)=>{try{localStorage.setItem(Fe,JSON.stringify(v))}catch(Te){}try{window.dispatchEvent(new Event("fof_sessions_changed_v1"))}catch(Te){}},D=React.useMemo(()=>{var Fe=new Date;return Fe.setHours(0,0,0,0),Fe.toISOString()},[]),[k,T]=React.useState("SUMMARY"),[he,oe]=React.useState("THIS_MONTH"),[ke,Re]=React.useState("ALL"),[Me,Et]=React.useState(""),[ya,Ct]=React.useState("ALL"),[Jt,Ye]=React.useState(()=>{var Fe=f(E,[]);return Array.isArray(Fe)?Fe:[]}),[Tt,_t]=React.useState(()=>{var Fe=f(g,[]);return Array.isArray(Fe)?Fe:[]}),[P,I]=React.useState(!1);React.useEffect(()=>{var Fe=window.__FOF_OPEN_ADD_SESSION||0;var v=setInterval(()=>{var Te=window.__FOF_OPEN_ADD_SESSION||0;if(Te&&Te!==Fe){Fe=Te;try{window.__FOF_OPEN_ADD_SESSION=Date.now(),I(!0)}catch(Se){}}},250);return()=>clearInterval(v)},[]),React.useEffect(()=>{var Fe=window.__FOF_RECON_REFRESH||0;var v=setInterval(()=>{var Te=window.__FOF_RECON_REFRESH||0;if(Te&&Te!==Fe){Fe=Te;try{var Se=(()=>{try{return JSON.parse(localStorage.getItem(E)||"[]")}catch(yt){return[]}})();Ye(Array.isArray(Se)?Se:[])}catch(Se){}}},300);return()=>clearInterval(v)},[]);var[te,Ce]=React.useState(()=>({clientId:(d==null?void 0:d.id)||"",service:"PT Session",location:"\u2014",status:"BOOKED",billTo:"PAYG",price:250,currency:"AED",date:(()=>{try{return new Date().toISOString().slice(0,10)}catch(Fe){return""}})(),time:"09:00",durationMin:60,paid:!1,notes:""}));React.useEffect(()=>{P||Ce(Fe=>({...Fe,clientId:(d==null?void 0:d.id)||Fe.clientId||""}))},[d==null?void 0:d.id]),React.useEffect(()=>{var Fe=()=>{var v=f(E,[]);Array.isArray(v)&&Ye(v);var Te=f(g,[]);Array.isArray(Te)&&_t(Te)};try{window.addEventListener("storage",Fe)}catch(v){}try{window.addEventListener("fof_sessions_changed_v1",Fe)}catch(v){}return()=>{try{window.removeEventListener("storage",Fe)}catch(v){}try{window.removeEventListener("fof_sessions_changed_v1",Fe)}catch(v){}}},[]);var C=React.useMemo(()=>{if(he==="ALL")return{start:null,end:null};var Fe=new Date,v=new Date(Fe),Te=new Date(Fe),Se=Fe.getDay();if(he==="THIS_WEEK"){var yt=Se===0?6:Se-1;return v.setDate(Fe.getDate()-yt),v.setHours(0,0,0,0),Te.setTime(v.getTime()+7*24*60*60*1e3),{start:v,end:Te}}return he==="THIS_MONTH"?(v.setDate(1),v.setHours(0,0,0,0),Te.setMonth(v.getMonth()+1),Te.setDate(1),Te.setHours(0,0,0,0),{start:v,end:Te}):he==="LAST_MONTH"?(v.setDate(1),v.setHours(0,0,0,0),v.setMonth(v.getMonth()-1),Te.setDate(1),Te.setHours(0,0,0,0),{start:v,end:Te}):he==="90D"?(v.setDate(Fe.getDate()-90),v.setHours(0,0,0,0),Te.setHours(23,59,59,999),{start:v,end:Te}):{start:null,end:null}},[he]),ye=React.useMemo(()=>{var Fe=new Map;return(o||[]).forEach(v=>Fe.set(v.id,v)),Fe},[o]),le=Fe=>String(Fe||"").toLowerCase(),O=React.useMemo(()=>{var Fe=le(Me).trim();return(Jt||[]).filter(v=>{if(ke!=="ALL"&&v.status!==ke)return!1;if(ya!=="ALL"){var yt=!!v.paid;if(ya==="PAID"&&!yt||ya==="UNPAID"&&yt)return!1}if(d!=null&&d.id&&v.clientId!==d.id)return!1;if(C.start&&C.end){var yt=new Date(v.startISO||v.dateISO||v.createdAt||D).getTime();if(yt<C.start.getTime()||yt>=C.end.getTime())return!1}if(!Fe)return!0;var Te=ye.get(v.clientId);return[Te==null?void 0:Te.name,Te==null?void 0:Te.email,v.service,v.location,v.note,v.status].map(le).join(" ").includes(Fe)}).sort((v,Te)=>new Date(Te.startISO||Te.createdAt||0)-new Date(v.startISO||v.createdAt||0))},[Jt,ke,ya,Me,d,C,ye,D]),qe=React.useMemo(()=>{var Fe={booked:0,completed:0,cancelled:0,noShow:0,revenueCompleted:0,revenueBooked:0,unpaidCompleted:0};return(O||[]).forEach(v=>{var Te=Number(v.price||0);v.status==="BOOKED"&&(Fe.booked+=1,Fe.revenueBooked+=Te),v.status==="COMPLETED"&&(Fe.completed+=1,Fe.revenueCompleted+=Te,v.paid||(Fe.unpaidCompleted+=Te)),v.status==="CANCELLED"&&(Fe.cancelled+=1),v.status==="NO_SHOW"&&(Fe.noShow+=1)}),Fe},[O]),Pt=React.useMemo(()=>{var Fe=new Map;return(O||[]).forEach(v=>{var Te=v.clientId||"UNKNOWN";Fe.has(Te)||Fe.set(Te,[]),Fe.get(Te).push(v)}),Fe},[O]),Za=React.useMemo(()=>{var Fe=new Map;return(Tt||[]).forEach(v=>{var Te=v.clientId||"UNKNOWN";Fe.has(Te)||Fe.set(Te,[]),Fe.get(Te).push(v)}),Fe},[Tt]),Ma=Fe=>{var v=Pt.get(Fe)||[],Te=Za.get(Fe)||[],Se=v.filter(Qt=>Qt.status==="COMPLETED").length,yt=v.filter(Qt=>Qt.status==="COMPLETED"&&(Qt.billTo||"PACKAGE")==="PACKAGE").length,St=Te.reduce((Qt,yi)=>Qt+Number(yi.totalSessions||0),0),za=Math.max(0,St-yt),Xe=Math.max(0,yt-St),dt=v.filter(Qt=>Qt.status==="COMPLETED"&&!Qt.paid&&(Qt.billTo||"PACKAGE")!=="PACKAGE").reduce((Qt,yi)=>Qt+Number(yi.price||0),0);return{completedCount:Se,usedFromPackages:yt,totalPkgSessions:St,remaining:za,overage:Xe,unpaidCompleted:dt}},$a=(Fe,v)=>{var Se;var Te=(Jt||[]).map(yt=>yt.id===Fe?{...yt,...v,updatedAt:new Date().toISOString()}:yt);Ye(Te),F(E,Te);try{(Se=window.__fofToast)==null||Se.call(window,{message:"Session updated",tone:"good"})}catch(yt){}},Yt=()=>{var Fe,v,Te;try{var Se=String(te.clientId||"");if(!Se){try{(Fe=window.__fofToast)==null||Fe.call(window,{message:"Select a client first",tone:"warn"})}catch(dt){}return}var yt=ye.get(Se),St=(()=>{try{var dt=String(te.date||""),Qt=String(te.time||"09:00");return new Date(dt+"T"+Qt+":00").toISOString()}catch(dt){return new Date().toISOString()}})(),Xe=[{id:next(),clientId:Se,clientName:(yt==null?void 0:yt.name)||(yt==null?void 0:yt.email)||"Client",service:te.service||"Session",location:te.location||"\u2014",status:te.status||"BOOKED",billTo:te.billTo||"PAYG",price:Number(te.price||0),currency:String(te.currency||"AED"),startISO:St,durationMin:Number(te.durationMin||60),paid:!!te.paid,notes:String(te.notes||""),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...Jt||[]];Ye(Xe),F(E,Xe),I(!1);try{(v=window.__fofToast)==null||v.call(window,{message:"Session added (Booked)",tone:"good"})}catch(dt){}}catch(Se){try{(Te=window.__fofToast)==null||Te.call(window,{message:"Could not add session",tone:"warn"})}catch(yt){}}},it=Fe=>{var St;if(!Fe)return;var v=ye.get(Fe),Te=((v==null?void 0:v.name)||"Client")+" Package",yt=[{id:"pkg_"+Math.random().toString(16).slice(2)+Date.now(),clientId:Fe,name:Te,totalSessions:10,priceTotal:0,startISO:new Date().toISOString(),endISO:null,notes:"",createdAt:new Date().toISOString()},...Tt||[]];_t(yt);try{localStorage.setItem(g,JSON.stringify(yt))}catch(za){}try{(St=window.__fofToast)==null||St.call(window,{message:"Package created (edit it)",tone:"good"})}catch(za){}},Ut=(Fe,v)=>{var Te=(Tt||[]).map(Se=>Se.id===Fe?{...Se,...v,updatedAt:new Date().toISOString()}:Se);_t(Te);try{localStorage.setItem(g,JSON.stringify(Te))}catch(Se){}},ce=Fe=>Number(Fe||0).toLocaleString(void 0,{maximumFractionDigits:0}),Vt=({children:Fe,tone:v="neutral"})=>React.createElement("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] "+(v==="good"?"border-emerald-400/30 bg-emerald-400/10 text-emerald-100":v==="warn"?"border-amber-400/30 bg-amber-400/10 text-amber-100":v==="bad"?"border-rose-400/30 bg-rose-400/10 text-rose-100":"border-white/15 bg-white/5 text-white/75")},Fe);return React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-6xl mx-auto space-y-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white text-2xl font-semibold"},"Scheduling \u2022 Reconciliation"),React.createElement("div",{className:"text-white/55 text-sm mt-1"},"Track delivery vs packages, mark attendance, and reconcile revenue.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>T("SUMMARY"),className:"px-3 py-2 rounded-xl border text-sm "+(k==="SUMMARY"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},"Summary"),React.createElement("button",{onClick:()=>T("SESSIONS"),className:"px-3 py-2 rounded-xl border text-sm "+(k==="SESSIONS"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},"Sessions"),React.createElement("button",{onClick:()=>T("PACKAGES"),className:"px-3 py-2 rounded-xl border text-sm "+(k==="PACKAGES"?"border-white/20 bg-white/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:bg-white/8")},"Packages"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"md:col-span-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/45 mb-1"},"Client"),React.createElement("select",{value:(d==null?void 0:d.id)||"ALL",onChange:Fe=>{var v=Fe.target.value;if(v==="ALL"){m(null);return}var Te=ye.get(v);m(Te||null)},className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"ALL"},"All clients"),(o||[]).map(Fe=>React.createElement("option",{key:Fe.id,value:Fe.id},Fe.name||"Client")))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/45 mb-1"},"Range"),React.createElement("select",{value:he,onChange:Fe=>oe(Fe.target.value),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"THIS_WEEK"},"This week"),React.createElement("option",{value:"THIS_MONTH"},"This month"),React.createElement("option",{value:"LAST_MONTH"},"Last month"),React.createElement("option",{value:"90D"},"Last 90 days"),React.createElement("option",{value:"ALL"},"All time"))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/45 mb-1"},"Status"),React.createElement("select",{value:ke,onChange:Fe=>Re(Fe.target.value),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"BOOKED"},"Booked"),React.createElement("option",{value:"COMPLETED"},"Completed"),React.createElement("option",{value:"CANCELLED"},"Cancelled"),React.createElement("option",{value:"NO_SHOW"},"No-show"))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/45 mb-1"},"Payment"),React.createElement("select",{value:ya,onChange:Fe=>Ct(Fe.target.value),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"ALL"},"All"),React.createElement("option",{value:"PAID"},"Paid"),React.createElement("option",{value:"UNPAID"},"Unpaid"))),React.createElement("div",{className:"md:col-span-3"},React.createElement("div",{className:"text-[11px] uppercase tracking-widest text-white/45 mb-1"},"Search"),React.createElement("div",{className:"relative"},React.createElement("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"},React.createElement(_,{name:"Search",size:14})),React.createElement("input",{value:Me,onChange:Fe=>Et(Fe.target.value),placeholder:"Client, service, note\u2026",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-white/10 bg-black/25 text-sm text-white/85 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.25)]"}))))),k==="SUMMARY"&&React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white/70 text-sm"},"Delivery"),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Vt,null,"Booked: ",qe.booked),React.createElement(Vt,{tone:"good"},"Completed: ",qe.completed),React.createElement(Vt,{tone:"warn"},"No-show: ",qe.noShow),React.createElement(Vt,{tone:"neutral"},"Cancelled: ",qe.cancelled)),React.createElement("div",{className:"mt-4 text-white/50 text-xs"},"Tip: mark sessions as Completed to count toward packages.")),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white/70 text-sm"},"Revenue"),React.createElement("div",{className:"mt-2 text-3xl font-semibold text-white"},ce(qe.revenueCompleted)),React.createElement("div",{className:"text-white/45 text-sm"},"Completed (range)"),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement(Vt,null,"Booked pipeline: ",ce(qe.revenueBooked)),React.createElement(Vt,{tone:qe.unpaidCompleted>0?"warn":"good"},"Unpaid completed: ",ce(qe.unpaidCompleted)))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-white/70 text-sm"},"Reconciliation"),React.createElement("div",{className:"mt-3 text-white/55 text-sm"},"Per-client package usage and overage shows here."),React.createElement("div",{className:"mt-3"},React.createElement("button",{onClick:()=>T("SESSIONS"),className:"w-full rounded-xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 text-sm text-white/85"},"Review Sessions \u2192 mark Completed / Paid")),React.createElement("div",{className:"mt-2"},React.createElement("button",{onClick:()=>T("PACKAGES"),className:"w-full rounded-xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 text-sm text-white/85"},"Manage Packages \u2192"))),React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-white/80 text-sm font-semibold"},"Clients reconciliation"),React.createElement("div",{className:"text-white/45 text-xs"},O.length," sessions in scope")),React.createElement("div",{className:"divide-y divide-white/10"},(o||[]).filter(Fe=>!(d!=null&&d.id)||Fe.id===d.id).slice(0,200).map(Fe=>{var v=Ma(Fe.id),Te=v.overage>0?"bad":v.remaining<=2&&v.totalPkgSessions>0?"warn":"good";return React.createElement("div",{key:Fe.id,className:"px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-white/90 font-medium truncate"},Fe.name||"Client"),React.createElement("div",{className:"text-white/45 text-xs truncate"},"Completed: ",v.completedCount," \u2022 Package-used: ",v.usedFromPackages," / ",v.totalPkgSessions," \u2022 Remaining: ",v.remaining)),React.createElement("div",{className:"flex items-center gap-2"},v.totalPkgSessions>0?React.createElement(Vt,{tone:Te},v.overage>0?`Overage +${v.overage}`:`Remaining ${v.remaining}`):React.createElement(Vt,null,"Pay-as-you-go"),v.unpaidCompleted>0&&React.createElement(Vt,{tone:"warn"},"Unpaid ",ce(v.unpaidCompleted)),React.createElement("button",{onClick:()=>m(Fe),className:"rounded-xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 text-sm text-white/85"},"Focus"),React.createElement("button",{onClick:()=>{it(Fe.id),T("PACKAGES")},className:"rounded-xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 text-sm text-white/85"},"Add package")))})))),k==="SESSIONS"&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-white/80 text-sm font-semibold"},"Sessions"),React.createElement("button",{type:"button",onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),window.__FOF_OPEN_ADD_SESSION=Date.now(),I(!0)},className:"md:hidden fixed bottom-5 right-5 z-[140] rounded-full px-4 py-3 shadow-2xl border border-white/10 bg-emerald-500/20 hover:bg-emerald-500/25 text-emerald-50"},"+ Session"),React.createElement("button",{type:"button",onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),window.__FOF_OPEN_ADD_SESSION=Date.now(),I(!0)},className:"md:hidden rounded-2xl px-3 py-2 text-[12px] font-semibold border border-emerald-400/25 bg-emerald-400/10 text-emerald-100 hover:bg-emerald-400/15"},"Add Session")),React.createElement("div",{className:"flex items-center justify-between md:justify-end gap-2"},React.createElement("div",{className:"text-white/45 text-xs"},"Mark status + payment \u2022 Stored locally"),React.createElement("button",{type:"button",onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),window.__FOF_OPEN_ADD_SESSION=Date.now(),I(!0)},className:"hidden md:inline-flex rounded-2xl px-3 py-2 text-[12px] font-semibold border border-emerald-400/25 bg-emerald-400/10 text-emerald-100 hover:bg-emerald-400/15"},"Add Session"))),React.createElement("div",{className:"divide-y divide-white/10"},O.slice(0,300).map(Fe=>{var v=ye.get(Fe.clientId),Te=new Date(Fe.startISO||Fe.dateISO||Fe.createdAt||D),Se=Fe.status==="COMPLETED"?"good":Fe.status==="NO_SHOW"?"warn":(Fe.status==="CANCELLED","neutral");return React.createElement("div",{key:Fe.id,className:"px-4 py-3 grid grid-cols-1 md:grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"md:col-span-4 min-w-0"},React.createElement("div",{className:"text-white/90 font-medium truncate"},(v==null?void 0:v.name)||"Client"),React.createElement("div",{className:"text-white/45 text-xs truncate"},Te.toLocaleString()," \u2022 ",Fe.service||"Session"," \u2022 ",Fe.location||"\u2014")),React.createElement("div",{className:"md:col-span-2"},React.createElement("select",{value:Fe.status||"BOOKED",onChange:yt=>$a(Fe.id,{status:yt.target.value}),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"BOOKED"},"Booked"),React.createElement("option",{value:"COMPLETED"},"Completed"),React.createElement("option",{value:"CANCELLED"},"Cancelled"),React.createElement("option",{value:"NO_SHOW"},"No-show"))),React.createElement("div",{className:"md:col-span-2"},React.createElement("select",{value:Fe.billTo||"PAYG",onChange:yt=>$a(Fe.id,{billTo:yt.target.value}),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"},React.createElement("option",{value:"PAYG"},"Pay-as-you-go"),React.createElement("option",{value:"PACKAGE"},"Package"))),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{type:"number",value:Number(Fe.price||0),onChange:yt=>$a(Fe.id,{price:Number(yt.target.value||0)}),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"}),React.createElement("button",{onClick:()=>$a(Fe.id,{paid:!Fe.paid,paidAt:Fe.paid?null:new Date().toISOString()}),className:"shrink-0 rounded-xl border px-3 py-2 text-sm "+(Fe.paid?"border-emerald-400/25 bg-emerald-400/10 text-emerald-100":"border-white/10 bg-black/25 text-white/80 hover:bg-black/35")},Fe.paid?"Paid":"Unpaid"))),React.createElement("div",{className:"md:col-span-2 flex items-center justify-end gap-2"},React.createElement(Vt,{tone:Se},Fe.status||"BOOKED"),Fe.billTo==="PACKAGE"&&React.createElement(Vt,null,"Package")))}),O.length===0&&React.createElement("div",{className:"px-4 py-8 text-center text-white/55"},"No sessions match the current filters."))),k==="PACKAGES"&&React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 overflow-hidden"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},React.createElement("div",{className:"text-white/80 text-sm font-semibold"},"Packages"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>{var v;var Fe=(d==null?void 0:d.id)||((v=o==null?void 0:o[0])==null?void 0:v.id);it(Fe)},className:"rounded-xl border border-white/10 bg-black/25 hover:bg-black/35 px-3 py-2 text-sm text-white/85"},"Add package"))),React.createElement("div",{className:"divide-y divide-white/10"},(Tt||[]).filter(Fe=>!(d!=null&&d.id)||Fe.clientId===d.id).slice(0,300).map(Fe=>{var v=ye.get(Fe.clientId),Te=Ma(Fe.clientId);return React.createElement("div",{key:Fe.id,className:"px-4 py-3 grid grid-cols-1 md:grid-cols-12 gap-2 items-center"},React.createElement("div",{className:"md:col-span-4 min-w-0"},React.createElement("div",{className:"text-white/90 font-medium truncate"},Fe.name||"Package"," ",React.createElement("span",{className:"text-white/45 text-xs"},"\u2022 ",(v==null?void 0:v.name)||"Client")),React.createElement("div",{className:"text-white/45 text-xs"},"Remaining (client): ",Te.remaining," \u2022 Total sessions purchased: ",Te.totalPkgSessions)),React.createElement("div",{className:"md:col-span-3"},React.createElement("div",{className:"text-white/45 text-xs mb-1"},"Sessions"),React.createElement("input",{type:"number",value:Number(Fe.totalSessions||0),onChange:Se=>Ut(Fe.id,{totalSessions:Number(Se.target.value||0)}),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"})),React.createElement("div",{className:"md:col-span-3"},React.createElement("div",{className:"text-white/45 text-xs mb-1"},"Total price"),React.createElement("input",{type:"number",value:Number(Fe.priceTotal||0),onChange:Se=>Ut(Fe.id,{priceTotal:Number(Se.target.value||0)}),className:"w-full rounded-xl border border-white/10 bg-black/25 px-3 py-2 text-sm text-white/85"})),React.createElement("div",{className:"md:col-span-2 flex items-center justify-end gap-2"},React.createElement(Vt,{tone:Te.overage>0?"bad":Te.remaining<=2&&Te.totalPkgSessions>0?"warn":"good"},Te.overage>0?`Overage +${Te.overage}`:`Remaining ${Te.remaining}`)))}),(Tt||[]).filter(Fe=>!(d!=null&&d.id)||Fe.clientId===d.id).length===0&&React.createElement("div",{className:"px-4 py-8 text-center text-white/55"},"No packages yet. Create one to reconcile delivery vs credits.")))))},Lt=({title:o,subtitle:d,icon:m,tone:E="amber",onClick:g})=>{var f=E==="emerald"?"border-emerald-400/30 bg-emerald-500/10 hover:bg-emerald-500/15":E==="sky"?"border-sky-400/30 bg-sky-500/10 hover:bg-sky-500/15":E==="violet"?"border-violet-400/30 bg-violet-500/10 hover:bg-violet-500/15":"border-amber-400/30 bg-amber-500/10 hover:bg-amber-500/15",F=E==="emerald"?"text-emerald-300":E==="sky"?"text-sky-300":E==="violet"?"text-violet-300":"text-amber-300";return React.createElement("button",{type:"button",onClick:g,className:"w-full text-left rounded-2xl border p-5 transition-colors "+f},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},o),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},d)),React.createElement("div",{className:"p-2 rounded-xl border border-white/10 bg-white/5 "+F},React.createElement(_,{name:m,size:18}))),React.createElement("div",{className:"mt-4 flex items-center gap-2 text-[11px] text-white/55"},React.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-white/10 bg-white/5"},React.createElement(_,{name:"ArrowRight",size:12}),"Open"),React.createElement("span",{className:"text-white/35"},"Opens a full action page")))},ze=({onOpen:o})=>React.createElement("div",{className:"flex-1 h-full flex flex-col overflow-hidden"},React.createElement("div",{className:"px-6 pt-6 pb-4 border-b border-white/10 bg-titanium-900/40"},React.createElement("div",{className:"flex items-end justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] tracking-[0.28em] text-white/55 font-mono uppercase"},"Engagement OS"),React.createElement("div",{className:"text-xl font-semibold text-white"},"Engagement OS"),React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},"Run campaigns, award rewards, and manage community engagement \u2014 from one operating system.")),React.createElement("div",{className:"hidden md:flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:info",{detail:{title:"Engagement OS",message:"This is a tile-based hub. Click a tile to open a dedicated action page. This pattern will be reused across hubs wherever applicable."}}))}catch(d){try{alert("Engagement OS: Tile hub \u2192 action pages.")}catch(m){}}},className:"px-3 py-2 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80"},"Info")))),React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},React.createElement(Lt,{title:"Campaigns",subtitle:"Challenges, leaderboards, events and missions (run programs at scale).",icon:"Trophy",tone:"amber",onClick:()=>o("ENGAGEMENT_CAMPAIGNS")}),React.createElement(Lt,{title:"Rewards & Gamification",subtitle:"Badges, milestones, XP rules, trophy cases, and perks.",icon:"Award",tone:"violet",onClick:()=>o("ENGAGEMENT_REWARDS")}),React.createElement(Lt,{title:"Community",subtitle:"Posts, announcements, group engagement, and share cards.",icon:"Users",tone:"sky",onClick:()=>o("ENGAGEMENT_COMMUNITY")}),React.createElement(Lt,{title:"Insights",subtitle:"Participation, drop-off, adherence lift, and triage signal exports.",icon:"BarChart3",tone:"emerald",onClick:()=>o("ENGAGEMENT_INSIGHTS")})),React.createElement("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] text-white/70 font-semibold"},"Coach workflow"),React.createElement("div",{className:"text-[12px] text-white/55 mt-1"},"Pick a tile \u2192 complete the task in a dedicated page \u2192 return here to open the next tool.")))),Le=({titleKicker:o="Engagement OS",title:d="Page",description:m="",onBack:E,children:g,actions:f})=>React.createElement("div",{className:"flex-1 h-full flex flex-col overflow-hidden"},React.createElement("div",{className:"px-6 pt-6 pb-4 border-b border-white/10 bg-titanium-900/40"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:E,className:"px-3 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"ArrowLeft",size:14}),"Back"),React.createElement("div",{className:"text-[11px] tracking-[0.28em] text-white/55 font-mono uppercase"},o)),React.createElement("div",{className:"text-xl font-semibold text-white mt-2"},d),m?React.createElement("div",{className:"text-[12px] text-white/60 mt-1"},m):null),React.createElement("div",{className:"hidden md:flex items-center gap-2"},f))),React.createElement("div",{className:"flex-1 overflow-hidden"},g)),se=({setView:o})=>React.createElement("div",{className:"flex-1 h-full flex flex-col overflow-hidden"},React.createElement("div",{className:"h-12 shrink-0 px-4 border-b border-white/10 bg-zinc-950/55 backdrop-blur flex items-center gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{o("ENGAGEMENT_HOME")}catch(d){}},className:"px-2.5 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"ArrowLeft",size:14}),"Back"),React.createElement("div",{className:"text-sm font-semibold text-white"},"Campaigns"),React.createElement("div",{className:"ml-auto flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("flowofit:engagement:newCampaign"))}catch(d){}},className:"px-3 py-1.5 rounded-sm text-[12px] border border-white/10 bg-white/5 hover:bg-white/10 text-white/80"},"New"))),React.createElement("div",{className:"flex-1 min-h-0 overflow-hidden"},React.createElement(qn,{setView:o,hideTopBar:!0}))),at=({setView:o})=>React.createElement(Le,{titleKicker:"Engagement OS \u2022 Rewards",title:"Rewards & Gamification",description:"Badges \u2022 milestones \u2022 XP rules \u2022 reward marketplace (Phase 6.3.4+).",onBack:()=>{try{o("ENGAGEMENT_HOME")}catch(d){}}},React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement(Ur,{title:"Rewards & Gamification",description:"Badges \u2022 milestones \u2022 XP rules \u2022 reward marketplace. (Phase 6.3.4+ will wire awards to campaign completion.)"}))),Pe=({setView:o})=>React.createElement(Le,{titleKicker:"Engagement OS \u2022 Community",title:"Community",description:"Posts, announcements, and group engagement (Phase 6.3.5+).",onBack:()=>{try{o("ENGAGEMENT_HOME")}catch(d){}}},React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement(Ur,{title:"Community",description:"Community posts, group challenges, announcements, and shareable progress cards will live here (Phase 6.3.5+)."}))),Wt=({setView:o})=>React.createElement(Le,{titleKicker:"Engagement OS \u2022 Insights",title:"Engagement Insights",description:"Participation, drop-off, adherence lift and exports back into Unified AI Triage (Phase 6.3.6+).",onBack:()=>{try{o("ENGAGEMENT_HOME")}catch(d){}}},React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement(Ur,{title:"Engagement Insights",description:"Participation, drop-off, adherence lift and exports back into Unified AI Triage (Phase 6.3.6+)."}))),Ha=({onBack:o})=>{var I,te,Ce,C,ye,le,O,qe,Pt,Za,Ma,$a,Yt,it,Ut,ce,Vt,Fe;var d="fof.education.integrations.v1",m="fof.public_profile.badges.v1",E=(v,Te)=>{try{var Se=localStorage.getItem(v);return Se?JSON.parse(Se):Te}catch(Se){return Te}},g=(v,Te)=>{try{localStorage.setItem(v,JSON.stringify(Te))}catch(Se){}},[f,F]=React.useState("CERTS"),[D,k]=React.useState(()=>E(d,{certs:{NASM:{enrolled:!1,progress:0,ceus:0,status:"NOT_STARTED"},ACE:{enrolled:!1,progress:0,ceus:0,status:"NOT_STARTED"},ISSA:{enrolled:!1,progress:0,ceus:0,status:"NOT_STARTED"}},perks:{unlocked:!1,appliedCount:0,lastAppliedAt:null},cocreate:{drafts:[],submitted:[],approved:[]},badges:{publish:!0}}));React.useEffect(()=>{g(d,D)},[D]);var T=v=>{k(Te=>{var Se=JSON.parse(JSON.stringify(Te||{}));return Se.certs||(Se.certs={}),Se.certs[v]||(Se.certs[v]={enrolled:!1,progress:0,ceus:0,status:"NOT_STARTED"}),Se.certs[v].enrolled=!0,Se.certs[v].status="ENROLLED",Se.certs[v].progress=Math.max(5,Number(Se.certs[v].progress||0)),Se})},he=(v,Te=15)=>{k(Se=>{var Xe;var yt=JSON.parse(JSON.stringify(Se||{})),St=((Xe=yt==null?void 0:yt.certs)==null?void 0:Xe[v])||{enrolled:!0,progress:0,ceus:0,status:"ENROLLED"};St.enrolled=!0;var za=Math.max(0,Math.min(100,Number(St.progress||0)+Number(Te||0)));St.progress=za,St.status=za>=100?"COMPLETED":"IN_PROGRESS",St.ceus=Math.max(Number(St.ceus||0),Math.floor(za/25)),yt.certs[v]=St;try{if(St.status==="COMPLETED"){var dt=E(m,[]),Qt=`CERT_${v}`,yi=Array.isArray(dt)&&dt.some(as=>String((as==null?void 0:as.id)||"")===Qt),zi={id:Qt,label:`${v} Certified`,provider:v,earnedAt:new Date().toISOString().slice(0,10),type:"CERT"},os=yi?dt.map(as=>String((as==null?void 0:as.id)||"")===Qt?zi:as):[zi,...Array.isArray(dt)?dt:[]];g(m,os)}}catch(dt){}return yt})},oe=()=>{k(v=>{var Te=JSON.parse(JSON.stringify(v||{}));return Te.perks=Te.perks||{unlocked:!1,appliedCount:0,lastAppliedAt:null},Te.perks.unlocked=!0,Te})},ke=()=>{k(v=>{var Te=JSON.parse(JSON.stringify(v||{}));return Te.perks=Te.perks||{unlocked:!1,appliedCount:0,lastAppliedAt:null},Te.perks.unlocked=!0,Te.perks.appliedCount=Number(Te.perks.appliedCount||0)+1,Te.perks.lastAppliedAt=new Date().toISOString(),Te});try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:{title:"Applied",message:"Perk template applied to your Library (stub).",tone:"success"}}))}catch(v){}},Re=(v,Te)=>{v&&k(Se=>{var yt=JSON.parse(JSON.stringify(Se||{}));yt.cocreate=yt.cocreate||{drafts:[],submitted:[],approved:[]};var St={id:crypto!=null&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random(),title:v,notes:Te,partner:"NASM/Precision",status:"SUBMITTED",at:new Date().toISOString()};return yt.cocreate.submitted=[St,...yt.cocreate.submitted||[]],yt})},Me=()=>{k(v=>{var St;var Te=JSON.parse(JSON.stringify(v||{})),Se=Array.isArray((St=Te==null?void 0:Te.cocreate)==null?void 0:St.submitted)?Te.cocreate.submitted:[];if(!Se.length)return Te;var yt=Se[0];return yt.status="APPROVED",Te.cocreate.submitted=Se.slice(1),Te.cocreate.approved=[yt,...Te.cocreate.approved||[]],Te})},Et=React.useMemo(()=>{try{return E(m,[])}catch(v){return[]}},[(te=(I=D==null?void 0:D.certs)==null?void 0:I.NASM)==null?void 0:te.status,(C=(Ce=D==null?void 0:D.certs)==null?void 0:Ce.ACE)==null?void 0:C.status,(le=(ye=D==null?void 0:D.certs)==null?void 0:ye.ISSA)==null?void 0:le.status]),ya=({title:v,subtitle:Te})=>React.createElement("div",{className:"sticky top-0 z-20 bg-black/70 backdrop-blur border-b border-white/10"},React.createElement("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-emerald-300/90"},"Education Integrations"),React.createElement("div",{className:"mt-1 text-[16px] font-extrabold text-white truncate"},v),Te?React.createElement("div",{className:"mt-1 text-[12px] text-white/55 line-clamp-1"},Te):null),React.createElement("button",{type:"button",onClick:()=>{try{o&&o()}catch(Se){}},className:"shrink-0 px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Back")),React.createElement("div",{className:"max-w-5xl mx-auto px-4 pb-3"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},[{k:"CERTS",label:"Certifications"},{k:"PERKS",label:"Partner Perks"},{k:"COCREATE",label:"Co-Create"},{k:"CREDENTIALS",label:"My Credentials"},{k:"BADGES",label:"Public Badges"}].map(Se=>React.createElement("button",{key:Se.k,type:"button",onClick:()=>F(Se.k),className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+(f===Se.k?"border-emerald-400/30 bg-emerald-500/10 text-emerald-100":"border-white/10 bg-white/5 hover:bg-white/10 text-white/70")},Se.label))))),Ct=({children:v})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},v),Jt=({k:v,title:Te,desc:Se,highlight:yt})=>{var zi;var St=((zi=D==null?void 0:D.certs)==null?void 0:zi[v])||{enrolled:!1,progress:0,ceus:0,status:"NOT_STARTED"},za=String(St.status||"NOT_STARTED"),Xe=!!St.enrolled,dt=Math.max(0,Math.min(100,Number(St.progress||0))),Qt=Number(St.ceus||0);return React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},Te),yt?React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2 py-[2px] rounded-full border border-fuchsia-400/30 bg-fuchsia-500/10 text-fuchsia-200"},yt):null,React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2 py-[2px] rounded-full border "+(za==="COMPLETED"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":za==="IN_PROGRESS"?"border-sky-400/30 bg-sky-500/10 text-sky-200":za==="ENROLLED"?"border-amber-400/30 bg-amber-500/10 text-amber-200":"border-white/10 bg-white/5 text-white/60")},za.replaceAll("_"," "))),React.createElement("div",{className:"mt-1 text-[12px] text-white/55"},Se)),React.createElement("div",{className:"shrink-0 flex flex-col gap-2 items-end"},Xe?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>he(v,20),className:"px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Track Progress"),React.createElement("button",{type:"button",onClick:()=>he(v,100),className:"px-3 py-2 rounded-xl bg-amber-500/10 border border-amber-400/20 hover:bg-amber-500/15 text-amber-100 text-[11px] font-mono uppercase tracking-widest"},"Mark Complete")):React.createElement("button",{type:"button",onClick:()=>T(v),className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Enroll"))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"flex items-center justify-between text-[11px] text-white/55"},React.createElement("div",null,"Progress"),React.createElement("div",null,dt,"% \u2022 CEUs: ",Qt)),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-2 bg-emerald-500/60",style:{width:dt+"%"}})),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},v==="NASM"?"Seamless enrollment (stub) \u2022 24/7 access \u2022 embedded CEU library":v==="ACE"?"Access remote courses (stub) \u2022 auto-track completion \u2022 sync to profile":"Explore partner specials (stub) \u2022 discounts + badge integration")))},[Ye,Tt]=React.useState(""),[_t,P]=React.useState("");return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll"},React.createElement(ya,{title:f==="CERTS"?"Certifications & Courses":f==="PERKS"?"Partner Perks":f==="COCREATE"?"Co-Create Partner Content":f==="CREDENTIALS"?"My Credentials":"Public Badges",subtitle:"Partner integrations are stubbed locally. The UX + data contracts are locked for real integrations later."}),React.createElement("div",{className:"max-w-5xl mx-auto p-4 space-y-4"},f==="CERTS"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(Jt,{k:"NASM",title:"NASM / ACE via Partner Portal",highlight:"NEW",desc:"Direct integration concept: enroll, auto-track completion, and sync CEUs to your profile."}),React.createElement(Jt,{k:"ISSA",title:"ISSA & Other Programs",desc:"Explore partnerships: enroll in courses, discounts on certifications, and badge integration."}),React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Collaborative Perks"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Unlock exclusive templates, nutrition modules, and trainer discounts."),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:oe,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Unlock Perks"),React.createElement("button",{type:"button",disabled:!((O=D==null?void 0:D.perks)!=null&&O.unlocked),onClick:ke,className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+((qe=D==null?void 0:D.perks)!=null&&qe.unlocked?"border-emerald-400/20 bg-emerald-500/10 text-emerald-200 hover:bg-emerald-500/15":"border-white/10 bg-white/5 text-white/40 opacity-60 cursor-not-allowed")},"Apply to Library / Plans")),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Applied count: ",React.createElement("span",{className:"text-white/70 font-semibold"},Number(((Pt=D==null?void 0:D.perks)==null?void 0:Pt.appliedCount)||0)),(Za=D==null?void 0:D.perks)!=null&&Za.lastAppliedAt?React.createElement("span",{className:"ml-2"},"\u2022 Last: ",String(D.perks.lastAppliedAt).slice(0,19).replace("T"," ")):null)),React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Discovery & Trust"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Completed certifications can display as public badges to improve discovery & credibility."),React.createElement("button",{type:"button",onClick:()=>F("BADGES"),className:"mt-3 px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-400/20 hover:bg-sky-500/15 text-sky-200 text-[11px] font-mono uppercase tracking-widest"},"Manage Public Badges"))),f==="PERKS"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Perks Library"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"NASM/ACE templates \u2022 nutrition modules \u2022 partner discounts."),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:oe,className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},(Ma=D==null?void 0:D.perks)!=null&&Ma.unlocked?"Perks Unlocked":"Unlock Perks"),React.createElement("button",{type:"button",disabled:!(($a=D==null?void 0:D.perks)!=null&&$a.unlocked),onClick:ke,className:"px-3 py-2 rounded-xl border text-[11px] font-mono uppercase tracking-widest "+((Yt=D==null?void 0:D.perks)!=null&&Yt.unlocked?"border-sky-400/20 bg-sky-500/10 text-sky-200 hover:bg-sky-500/15":"border-white/10 bg-white/5 text-white/40 opacity-60 cursor-not-allowed")},"Apply to Client Plans")),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"This is a stub integration: the action logs locally, and later will deep-link into Library/PlanBuilder.")),React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Recommended Modules"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Precision Nutrition basics \u2022 assessment templates \u2022 onboarding checklists."),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},[{t:"NASM Onboarding Templates",d:"Apply a partner template to your Library"},{t:"Nutrition Quickstart Module",d:"Add a co-branded nutrition module to onboarding"},{t:"Client Check-In Pack",d:"Messaging + forms + reminders"}].map((v,Te)=>React.createElement("div",{key:Te,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},v.t),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},v.d),React.createElement("button",{type:"button",onClick:ke,className:"mt-2 px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"Add to Library")))))),f==="COCREATE"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Submit an Idea"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Propose templates or co-branded modules for approval (NASM, Precision, etc.)."),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement("input",{value:Ye,onChange:v=>Tt(v.target.value),placeholder:"Idea title",className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-white placeholder:text-white/30 text-[12px]"}),React.createElement("textarea",{value:_t,onChange:v=>P(v.target.value),placeholder:"Notes / outline",className:"w-full px-3 py-2 rounded-xl border border-white/10 bg-black/30 text-white placeholder:text-white/30 text-[12px] min-h-[90px]"}),React.createElement("button",{type:"button",onClick:()=>{Re(Ye.trim(),_t.trim()),Tt(""),P("")},className:"px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Submit to Partners")),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Approval is simulated. Later this becomes a real partner workflow.")),React.createElement(Ct,null,React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Partner Inbox"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Submitted \u2192 Approved \u2192 Published to templates.")),React.createElement("button",{type:"button",onClick:Me,className:"px-3 py-2 rounded-xl border border-amber-400/20 bg-amber-500/10 hover:bg-amber-500/15 text-amber-100 text-[11px] font-mono uppercase tracking-widest"},"Approve One (Sim)")),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Submitted"),React.createElement("div",{className:"mt-2 space-y-2"},(((it=D==null?void 0:D.cocreate)==null?void 0:it.submitted)||[]).slice(0,5).map(v=>React.createElement("div",{key:v.id,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},v.title),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-sky-200/80"},"SUBMITTED")),v.notes?React.createElement("div",{className:"mt-1 text-[11px] text-white/55 line-clamp-2"},v.notes):null,React.createElement("div",{className:"mt-1 text-[11px] text-white/40"},String(v.partner||"Partner")," \u2022 ",String(v.at||"").slice(0,10)))),!(((Ut=D==null?void 0:D.cocreate)==null?void 0:Ut.submitted)||[]).length&&React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No submissions yet.")),React.createElement("div",{className:"mt-4 text-[10px] font-mono uppercase tracking-widest text-white/50"},"Approved"),React.createElement("div",{className:"mt-2 space-y-2"},(((ce=D==null?void 0:D.cocreate)==null?void 0:ce.approved)||[]).slice(0,5).map(v=>React.createElement("div",{key:v.id,className:"rounded-xl border border-emerald-400/20 bg-emerald-500/10 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-emerald-50"},v.title),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-100/80"},"APPROVED")),React.createElement("div",{className:"mt-1 text-[11px] text-emerald-50/70"},"Now available as a co-branded template (stub)."))),!(((Vt=D==null?void 0:D.cocreate)==null?void 0:Vt.approved)||[]).length&&React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No approved items yet."))))),f==="CREDENTIALS"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Certification Status"),React.createElement("div",{className:"mt-2 space-y-2"},["NASM","ACE","ISSA"].map(v=>{var za;var Te=((za=D==null?void 0:D.certs)==null?void 0:za[v])||{},Se=String(Te.status||"NOT_STARTED"),yt=Math.max(0,Math.min(100,Number(Te.progress||0))),St=Number(Te.ceus||0);return React.createElement("div",{key:v,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},v),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/60"},Se.replaceAll("_"," "))),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},"Progress ",yt,"% \u2022 CEUs ",St),React.createElement("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-2 bg-sky-500/60",style:{width:yt+"%"}})))}))),React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Sync to Profile"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"When completed, certifications auto-add a public badge (stub) that can be toggled in \u201CPublic Badges\u201D."),React.createElement("button",{type:"button",onClick:()=>F("BADGES"),className:"mt-3 px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-400/20 hover:bg-emerald-500/15 text-emerald-200 text-[11px] font-mono uppercase tracking-widest"},"Review Badges"),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"In production, NASM/ACE APIs would be used for true CEU sync."))),f==="BADGES"&&React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement(Ct,null,React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Public Badges"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Display credentials on your public profile for discovery.")),React.createElement("label",{className:"flex items-center gap-2 text-[11px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!((Fe=D==null?void 0:D.badges)!=null&&Fe.publish),onChange:v=>k(Te=>({...Te||{},badges:{...(Te==null?void 0:Te.badges)||{},publish:!!v.target.checked}}))}),"Publish")),React.createElement("div",{className:"mt-3 space-y-2"},Array.isArray(Et)&&Et.length?Et.slice(0,8).map(v=>React.createElement("div",{key:v.id,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},v.label),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-emerald-200/80"},String(v.provider||""))),React.createElement("div",{className:"mt-1 text-[11px] text-white/55"},"Earned: ",String(v.earnedAt||"").slice(0,10)))):React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No badges yet. Complete a certification to unlock badges."))),React.createElement(Ct,null,React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Preview"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"This is a stub preview of what clients see."),React.createElement("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},"Your Public Profile"),React.createElement("div",{className:"mt-2 text-[11px] text-white/60"},"Badges (",Array.isArray(Et)?Et.length:0,")"),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},(Array.isArray(Et)?Et:[]).slice(0,6).map(v=>React.createElement("span",{key:v.id,className:"px-2 py-1 rounded-full border border-emerald-400/20 bg-emerald-500/10 text-emerald-100 text-[11px]"},v.label)),!(Array.isArray(Et)?Et:[]).length&&React.createElement("span",{className:"text-[11px] text-white/45"},"Complete a certification to display badges."))),React.createElement("div",{className:"mt-2 text-[11px] text-white/45"},"Later: these badges also improve discovery surfaces.")))))},qa=({onBack:o})=>{var d="fof.white_label.v1",m=(Jt,Ye)=>{try{var Tt=localStorage.getItem(Jt);return Tt?JSON.parse(Tt):Ye}catch(Tt){return Ye}},E=(Jt,Ye)=>{try{localStorage.setItem(Jt,JSON.stringify(Ye))}catch(Tt){}},[g,f]=React.useState("SETUP"),[F,D]=React.useState("");React.useEffect(()=>{try{f("SETUP")}catch(Jt){}},[]);var[k,T]=React.useState(()=>m(d,{entitlement:{level:"NONE"},assets:{appName:"",icon:null,splash:null,primary:"#3b82f6",logo:null,domain:"",slug:""},publish:{wantsPublish:!1,iosDevAccount:!1,googlePlayAccount:!1,status:"NOT_STARTED"},analytics:{downloads:0,activeUsers:0,lastUpdatedAt:null},reseller:{enabled:!1,subCoaches:0}}));React.useEffect(()=>{E(d,k)},[k]);var he=String(localStorage.getItem("FOF_BUSINESS_PLAN")||localStorage.getItem("FOF_PLAN")||"").toUpperCase(),oe=he.includes("STUDIO")||he.includes("ENTERPRISE")||he.includes("WHITE")||k.entitlement.level!=="NONE",ke=Jt=>T(Ye=>({...Ye,entitlement:{...Ye.entitlement,level:Jt}})),Re=()=>{T(Jt=>{var Ye=Number(Jt.analytics.downloads||0)+12,Tt=Number(Jt.analytics.activeUsers||0)+3;return{...Jt,analytics:{downloads:Ye,activeUsers:Tt,lastUpdatedAt:new Date().toISOString()}}})},Me=({title:Jt,desc:Ye,children:Tt,right:_t})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[14px] font-extrabold text-white"},Jt),Ye?React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},Ye):null),_t?React.createElement("div",{className:"shrink-0"},_t):null),Tt?React.createElement("div",{className:"mt-3"},Tt):null),Et=[{id:"SETUP",label:"Setup"},{id:"CUSTOMIZE",label:"Customize"},{id:"PUBLISH",label:"Publish"},{id:"ANALYTICS",label:"Analytics"}],ya=React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("button",{type:"button",onClick:()=>{try{o&&o()}catch(Jt){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[12px]"},"\u2190 Back"),React.createElement("div",{className:"text-center flex-1"},React.createElement("div",{className:"text-[16px] font-extrabold text-white"},"White-Label App & Site"),React.createElement("div",{className:"text-[12px] text-white/60"},"Pro app branding \u2022 Enterprise site \u2022 Store publishing guide \u2022 Usage analytics")),React.createElement("div",{className:"w-[80px]"})),Ct=!oe;return React.createElement("div",{className:"max-w-6xl mx-auto px-4 py-4"},ya,React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2"},Et.map((Jt,Ye)=>{var Tt=Jt.id!=="SETUP"&&String(k.entitlement.level||"NONE")==="NONE",_t=g===Jt.id;return React.createElement("button",{key:Jt.id,type:"button",disabled:Tt,onClick:()=>{if(Tt){try{D("Start with Setup: choose App or Site first.")}catch(P){}try{f("SETUP")}catch(P){}return}try{D("")}catch(P){}try{f(Jt.id)}catch(P){}},className:"px-3 py-2 rounded-xl text-[12px] border transition flex items-center gap-2 "+(_t?"border-sky-400/30 bg-sky-500/10 text-sky-100":Tt?"border-white/10 bg-white/5 text-white/35":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},React.createElement("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-lg text-[11px] font-extrabold "+(_t?"bg-sky-500/20 text-sky-100":"bg-white/5 text-white/70")},Ye+1),React.createElement("span",null,Jt.label),Tt?React.createElement("span",{className:"ml-1 text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-white/45"},"Locked"):null)}),F?React.createElement("div",{className:"w-full mt-1 text-[11px] text-amber-100/80"},F):null),Ct&&React.createElement("div",{className:"mt-4 rounded-2xl border border-amber-400/20 bg-amber-500/10 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[14px] font-extrabold text-amber-100"},"Locked: Enterprise Feature"),React.createElement("div",{className:"mt-1 text-[12px] text-amber-100/70"},"Your current plan does not include White-Label publishing. You can still explore this setup flow in demo mode.")),React.createElement("button",{type:"button",onClick:()=>ke("PRO_APP"),className:"px-3 py-2 rounded-xl bg-amber-500/20 border border-amber-400/30 text-amber-100 text-[12px]"},"Unlock Demo"))),React.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4"},g==="SETUP"&&React.createElement(React.Fragment,null,React.createElement(Me,{title:"Choose your white-label level",desc:"Pick the experience you want to ship. You can upgrade later.",right:React.createElement("span",{className:"text-[10px] font-mono uppercase tracking-widest px-2 py-1 rounded-full border border-white/15 bg-white/5 text-white/70"},k.entitlement.level)},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("button",{type:"button",onClick:()=>ke("PRO_APP"),className:"text-left rounded-2xl p-4 border transition "+(k.entitlement.level==="PRO_APP"?"border-emerald-400/30 bg-emerald-400/10":"border-white/10 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Pro White-Label App"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Custom icon, app name, splash, palette, in-app logos."),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Own App Store / Google Play listings. iOS requires a developer account.")),React.createElement("button",{type:"button",onClick:()=>ke("ENTERPRISE_SITE"),className:"text-left rounded-2xl p-4 border transition "+(k.entitlement.level==="ENTERPRISE_SITE"?"border-sky-400/30 bg-sky-400/10":"border-white/10 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-[13px] font-extrabold text-white"},"Enterprise White-Label Site"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Custom domain, portal branding, resell tools for sub-coaches."),React.createElement("div",{className:"mt-2 text-[11px] text-white/50"},"Data remains synced with the core platform.")))),React.createElement(Me,{title:"Launch & distribute",desc:"Clients download your branded app or visit your custom domain \u2014 login stays the same."},React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>f("CUSTOMIZE"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[12px]"},"Continue to Customize \u2192"),React.createElement("button",{type:"button",onClick:()=>{try{navigator.clipboard&&navigator.clipboard.writeText("https://yourbrand.app.link")}catch(Jt){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 text-[12px]"},"Copy sample install link")))),g==="CUSTOMIZE"&&React.createElement(React.Fragment,null,React.createElement(Me,{title:"Brand assets",desc:"Upload assets and set your palette. Changes apply to app + site skins (demo)."},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"App Name"),React.createElement("input",{value:k.assets.appName,onChange:Jt=>T(Ye=>({...Ye,assets:{...Ye.assets,appName:Jt.target.value}})),placeholder:"e.g., Ismail Coaching",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white placeholder-white/40 text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Primary Color"),React.createElement("input",{type:"color",value:k.assets.primary,onChange:Jt=>T(Ye=>({...Ye,assets:{...Ye.assets,primary:Jt.target.value}})),className:"mt-2 w-16 h-10 rounded-lg border border-white/10 bg-black/20"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Custom Domain (site)"),React.createElement("input",{value:k.assets.domain,onChange:Jt=>T(Ye=>({...Ye,assets:{...Ye.assets,domain:Jt.target.value}})),placeholder:"e.g., app.yourdomain.com",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white placeholder-white/40 text-[13px]"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Microsite Slug"),React.createElement("input",{value:k.assets.slug,onChange:Jt=>T(Ye=>({...Ye,assets:{...Ye.assets,slug:Jt.target.value}})),placeholder:"e.g., ismailcoaching",className:"mt-1 w-full px-3 py-2 rounded-xl bg-black/30 border border-white/10 text-white placeholder-white/40 text-[13px]"}))),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>f("PUBLISH"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[12px]"},"Continue to Publish \u2192"),React.createElement("button",{type:"button",onClick:()=>T(Jt=>({...Jt,assets:{...Jt.assets,appName:"FOF Branded",domain:"",slug:""}})),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/60 text-[12px]"},"Use sample values"))),React.createElement(Me,{title:"Reseller tools (optional)",desc:"Enable sub-coach reseller access (enterprise sites only)."},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Allow sub-coaches to resell under your brand"),React.createElement("button",{type:"button",onClick:()=>T(Jt=>({...Jt,reseller:{...Jt.reseller,enabled:!Jt.reseller.enabled}})),className:"px-3 py-2 rounded-xl border text-[12px] "+(k.reseller.enabled?"border-emerald-400/30 bg-emerald-400/10 text-emerald-100":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},k.reseller.enabled?"Enabled":"Disabled")),k.reseller.enabled&&React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Sub-coaches: ",React.createElement("b",{className:"text-white"},k.reseller.subCoaches||0)," (demo)"))),g==="PUBLISH"&&React.createElement(React.Fragment,null,React.createElement(Me,{title:"Publish to app stores?",desc:"Guided setup for iOS + Google Play (demo checklist)."},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",{className:"text-[12px] text-white/70"},"Do you want your own store listings?"),React.createElement("button",{type:"button",onClick:()=>T(Jt=>({...Jt,publish:{...Jt.publish,wantsPublish:!Jt.publish.wantsPublish}})),className:"px-3 py-2 rounded-xl border text-[12px] "+(k.publish.wantsPublish?"border-sky-400/30 bg-sky-400/10 text-sky-100":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},k.publish.wantsPublish?"Yes":"No"))),k.publish.wantsPublish?React.createElement(Me,{title:"Store setup checklist",desc:"iOS requires a developer account. We guide you through assets + submissions."},React.createElement("div",{className:"space-y-2"},React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!k.publish.iosDevAccount,onChange:Jt=>T(Ye=>({...Ye,publish:{...Ye.publish,iosDevAccount:Jt.target.checked}}))}),"iOS Developer account ready"),React.createElement("label",{className:"flex items-center gap-2 text-[12px] text-white/70"},React.createElement("input",{type:"checkbox",checked:!!k.publish.googlePlayAccount,onChange:Jt=>T(Ye=>({...Ye,publish:{...Ye.publish,googlePlayAccount:Jt.target.checked}}))}),"Google Play Console account ready")),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>T(Jt=>({...Jt,publish:{...Jt.publish,status:"IN_REVIEW"}})),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[12px]"},"Submit for review"),React.createElement("button",{type:"button",onClick:()=>T(Jt=>({...Jt,publish:{...Jt.publish,status:"LIVE"}})),className:"px-3 py-2 rounded-xl border border-emerald-400/30 bg-emerald-400/10 text-emerald-100 text-[12px]"},"Mark Live (demo)"),React.createElement("span",{className:"px-2 py-2 text-[12px] text-white/60"},"Status: ",React.createElement("b",{className:"text-white"},k.publish.status)))):React.createElement(Me,{title:"Skip publishing",desc:"You can distribute via web portal or private links."},React.createElement("button",{type:"button",onClick:()=>f("ANALYTICS"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 text-[12px]"},"Continue \u2192"))),g==="ANALYTICS"&&React.createElement(React.Fragment,null,React.createElement(Me,{title:"Downloads & usage",desc:"Track adoption in your dashboard (demo).",right:React.createElement("button",{type:"button",onClick:Re,className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 text-[12px]"},"Simulate activity")},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Downloads"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white"},Number(k.analytics.downloads||0))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/50"},"Active users"),React.createElement("div",{className:"mt-1 text-[22px] font-extrabold text-white"},Number(k.analytics.activeUsers||0)))),React.createElement("div",{className:"mt-2 text-[12px] text-white/60"},"Last updated: ",k.analytics.lastUpdatedAt?new Date(k.analytics.lastUpdatedAt).toLocaleString():"\u2014")),React.createElement(Me,{title:"Next steps",desc:"Connect Partner Hub to automate app-store updates and reseller tooling (coming soon)."},React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{type:"button",onClick:()=>f("SETUP"),className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 text-[12px]"},"Back to Setup"),React.createElement("button",{type:"button",onClick:()=>{try{alert("Integration & Partner Hub: coming soon")}catch(Jt){}},className:"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 text-[12px]"},"Go to Integration & Partner Hub"))))))},oa=({initialRole:o="TRAINER",onDone:d,onBack:m})=>{var Me,Et,ya,Ct,Jt,Ye,Tt,_t,P,I,te,Ce,C,ye,le,O,qe,Pt,Za,Ma,$a,Yt,it,Ut,ce,Vt,Fe,v,Te;var E="FOF_BIZ_SETUP_V1",g=()=>{try{var Se=localStorage.getItem(E),yt=Se?JSON.parse(Se):{};return yt&&typeof yt=="object"?yt:{}}catch(Se){return{}}},[f,F]=React.useState(()=>{var Se=g(),yt=String(Se.role||o||"TRAINER").toUpperCase();return{step:Se.step||"BRAND",complete:!!Se.complete,role:yt==="NUTRITION"||yt==="NUTRITIONIST"?"NUTRITION":yt,brand:Se.brand||{name:"",color:"#10FF61",logoDataUrl:""},payments:Se.payments||{stripe:!1,paypal:!1},service:Se.service||{name:"",price:"",duration:"",submitted:!1},microsite:Se.microsite||{active:!0,leadForm:!0,slug:""},automation:Se.automation||{welcomeEmail:!0}}});React.useEffect(()=>{try{localStorage.setItem(E,JSON.stringify({...f,step:f.step,complete:!!f.complete}))}catch(Se){}},[f]);var D=Se=>F(yt=>({...yt,step:Se})),k=React.useMemo(()=>{var Se=String(f.role||"TRAINER").toUpperCase();return Se==="NUTRITION"?"Nutrition Consult":Se==="YOGA"?"Yoga Session":Se==="SMT"?"Recovery / Bodywork Session":"Coaching Consult"},[f.role]),T=({kicker:Se,title:yt,sub:St})=>React.createElement("div",{className:"mb-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.22em] text-emerald-300"},ci(Se)),React.createElement("div",{className:"mt-1 text-xl font-bold text-white"},ci(yt)),St?React.createElement("div",{className:"mt-1 text-sm text-zinc-400"},ci(St)):null),he=({children:Se,className:yt=""})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 "+yt},Se),oe=({children:Se,onClick:yt,disabled:St=!1})=>React.createElement("button",{type:"button",onClick:St?void 0:yt,disabled:St,className:"w-full mt-4 py-3 rounded-2xl font-semibold "+(St?"bg-white/10 text-zinc-500 border border-white/10 cursor-not-allowed":"bg-emerald-400 text-black border border-emerald-300 hover:brightness-110 shadow-[0_0_24px_rgba(16,255,97,0.25)]")},ci(Se)),ke=({children:Se,onClick:yt})=>React.createElement("button",{type:"button",onClick:yt,className:"w-full mt-3 py-3 rounded-2xl font-semibold border border-white/10 bg-white/5 text-white hover:bg-white/10"},ci(Se)),Re=({stepIndex:Se,total:yt,title:St,children:za})=>React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-xl mx-auto space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{try{m&&m()}catch(Xe){}},className:"inline-flex items-center gap-2 text-sm text-zinc-300 hover:text-white"},React.createElement(_,{name:"ChevronLeft",size:16}),"Back"),React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.22em] text-zinc-400"},"Step ",Se,"/",yt)),React.createElement("div",{className:"h-1.5 w-full rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-emerald-400 rounded-full",style:{width:Se/yt*100+"%"}})),React.createElement("div",{className:"pt-1"},React.createElement("div",{className:"text-2xl font-bold text-white"},ci(St))),za));if(f.step==="LIST_ITEM")return React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:3,total:5,title:"List your first service"},React.createElement(T,{kicker:"Business Setup \u2022 Listing",title:"Create a sellable service",sub:"This is your first item clients can buy. You can add more later in Business Hub."}),React.createElement(he,null,React.createElement("div",{className:"grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Suggested"),React.createElement("div",{className:"text-sm text-white font-semibold"},ci(k))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Role"),React.createElement("select",{value:f.role,onChange:Se=>F(yt=>({...yt,role:String(Se.target.value||"TRAINER").toUpperCase()})),className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"},React.createElement("option",{value:"TRAINER"},"Trainer"),React.createElement("option",{value:"NUTRITION"},"Nutritionist"),React.createElement("option",{value:"YOGA"},"Yoga"),React.createElement("option",{value:"SMT"},"SMT/Bodywork"))),React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Service name"),React.createElement("input",{value:((Me=f.service)==null?void 0:Me.name)||"",onChange:Se=>F(yt=>({...yt,service:{...yt.service||{},name:Se.target.value}})),placeholder:k,className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"}))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Price"),React.createElement("input",{value:((Et=f.service)==null?void 0:Et.price)||"",onChange:Se=>F(yt=>({...yt,service:{...yt.service||{},price:Se.target.value}})),placeholder:"e.g. 199",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Duration"),React.createElement("input",{value:((ya=f.service)==null?void 0:ya.duration)||"",onChange:Se=>F(yt=>({...yt,service:{...yt.service||{},duration:Se.target.value}})),placeholder:"e.g. 60 min",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"}))),React.createElement("div",{className:"text-xs text-zinc-500"},"In the real build this opens the Listing tool; here it\u2019s an inline mock that persists to localStorage."))),React.createElement(oe,{disabled:!String(((Ct=f.service)==null?void 0:Ct.name)||k).trim(),onClick:()=>{var yt;var Se=String(((yt=f.service)==null?void 0:yt.name)||"").trim()||k;F(St=>({...St,service:{...St.service||{},name:Se,submitted:!0},step:"SERVICE_RETURN"}))}},"Submit service"),React.createElement(ke,{onClick:()=>D("SERVICE")},"Cancel")));if(f.step==="SERVICE_RETURN")return React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:3,total:5,title:"Service submitted"},React.createElement(he,{className:"border-emerald-400/40 bg-emerald-400/10"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-emerald-400/20 flex items-center justify-center"},React.createElement(_,{name:"CheckCircle2",size:18,className:"text-emerald-300"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-sm font-semibold text-white"},"Item Submitted!"),React.createElement("div",{className:"text-xs text-zinc-300 mt-1"},React.createElement("span",{className:"text-zinc-400"},"Service:")," ",ci(((Jt=f.service)==null?void 0:Jt.name)||k))))),React.createElement(oe,{onClick:()=>D("MICROSITE")},"Continue"),React.createElement(ke,{onClick:()=>D("SERVICE")},"Edit service")));if(f.step==="BRAND")return React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:1,total:5,title:"Brand your space"},React.createElement(T,{kicker:"Business Setup \u2022 Branding",title:"Make it feel like your studio",sub:"Upload a logo and choose your primary accent color."}),React.createElement(he,null,React.createElement("div",{className:"grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Business name"),React.createElement("input",{value:((Ye=f.brand)==null?void 0:Ye.name)||"",onChange:Se=>F(yt=>({...yt,brand:{...yt.brand||{},name:Se.target.value}})),placeholder:"e.g. Apex Performance",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"})),React.createElement("div",{className:"grid grid-cols-2 gap-3 items-center"},React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Primary color"),React.createElement("input",{type:"color",value:((Tt=f.brand)==null?void 0:Tt.color)||"#10FF61",onChange:Se=>F(yt=>({...yt,brand:{...yt.brand||{},color:Se.target.value}})),className:"w-full h-10 bg-black/40 border border-white/10 rounded-xl px-2"})),React.createElement("div",null,React.createElement("div",{className:"text-xs text-zinc-400 mb-1"},"Logo"),React.createElement("label",{className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-black/40 border border-white/10 text-sm text-white cursor-pointer hover:bg-white/10"},React.createElement(_,{name:"UploadCloud",size:16}),"Upload",React.createElement("input",{type:"file",accept:"image/*",className:"hidden",onChange:Se=>{try{var yt=Se.target.files&&Se.target.files[0];if(!yt)return;var St=new FileReader;St.onload=()=>F(za=>({...za,brand:{...za.brand||{},logoDataUrl:String(St.result||"")}})),St.readAsDataURL(yt)}catch(yt){}}})))),React.createElement("div",{className:"flex items-center gap-3 pt-1"},React.createElement("div",{className:"w-10 h-10 rounded-xl border border-white/10",style:{background:((_t=f.brand)==null?void 0:_t.color)||"#10FF61"}}),React.createElement("div",{className:"text-xs text-zinc-400"},"Preview accent color applied across your microsite and invoices.")))),React.createElement(oe,{onClick:()=>D("PAYMENTS")},"Continue")));if(f.step==="PAYMENTS")return React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:2,total:5,title:"Connect payments"},React.createElement(T,{kicker:"Business Setup \u2022 Payments",title:"Get paid with one tap",sub:"Connect your payment provider to accept cards and automate receipts."}),React.createElement("div",{className:"space-y-3"},React.createElement(he,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Stripe"),React.createElement("div",{className:"text-xs text-zinc-400"},"Recommended for subscriptions and invoices.")),React.createElement("button",{type:"button",onClick:()=>F(Se=>{var yt;return{...Se,payments:{...Se.payments||{},stripe:!((yt=Se.payments)!=null&&yt.stripe)}}}),className:"px-3 py-2 rounded-xl text-sm font-semibold border "+((P=f.payments)!=null&&P.stripe?"bg-emerald-400/20 border-emerald-300 text-emerald-200":"bg-white/5 border-white/10 text-white")},(I=f.payments)!=null&&I.stripe?"Connected":"Connect"))),React.createElement(he,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"PayPal"),React.createElement("div",{className:"text-xs text-zinc-400"},"Good for one-time payments and international clients.")),React.createElement("button",{type:"button",onClick:()=>F(Se=>{var yt;return{...Se,payments:{...Se.payments||{},paypal:!((yt=Se.payments)!=null&&yt.paypal)}}}),className:"px-3 py-2 rounded-xl text-sm font-semibold border "+((te=f.payments)!=null&&te.paypal?"bg-emerald-400/20 border-emerald-300 text-emerald-200":"bg-white/5 border-white/10 text-white")},(Ce=f.payments)!=null&&Ce.paypal?"Connected":"Connect")))),React.createElement(oe,{onClick:()=>D("SERVICE")},"Continue"),React.createElement(ke,{onClick:()=>D("BRAND")},"Back to branding")));if(f.step==="SERVICE"){var Se=String(((C=f.service)==null?void 0:C.name)||"").trim()||k;return React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:3,total:5,title:"List your first service"},React.createElement(T,{kicker:"Business Setup \u2022 Services",title:"Your first offer",sub:"Create a service listing so clients can buy directly."}),React.createElement(he,null,React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:"Package",size:18,className:"text-zinc-200"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-sm font-semibold text-white"},ci(Se)),React.createElement("div",{className:"text-xs text-zinc-400 mt-1"},"Role-aware default: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci(String(f.role||"TRAINER")))),(ye=f.service)!=null&&ye.submitted?React.createElement("div",{className:"mt-2 inline-flex items-center gap-2 text-xs text-emerald-200"},React.createElement(_,{name:"Check",size:14}),"Item already submitted"):React.createElement("div",{className:"mt-2 text-xs text-zinc-500"},"Not submitted yet.")))),React.createElement(oe,{onClick:()=>D("LIST_ITEM")},"Go to \u201CList an Item\u201D"),React.createElement(ke,{onClick:()=>D("PAYMENTS")},"Back to payments")))}return f.step==="MICROSITE"?React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:4,total:5,title:"Activate your microsite"},React.createElement(T,{kicker:"Business Setup \u2022 Microsite",title:"Start collecting leads",sub:"Turn on your public microsite and (optionally) a lead form."}),React.createElement("div",{className:"space-y-3"},React.createElement(he,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Microsite"),React.createElement("div",{className:"text-xs text-zinc-400"},"A shareable link to your services and story.")),React.createElement("button",{type:"button",onClick:()=>F(Se=>{var yt;return{...Se,microsite:{...Se.microsite||{},active:!((yt=Se.microsite)!=null&&yt.active)}}}),className:"px-3 py-2 rounded-xl text-sm font-semibold border "+((le=f.microsite)!=null&&le.active?"bg-emerald-400/20 border-emerald-300 text-emerald-200":"bg-white/5 border-white/10 text-white")},(O=f.microsite)!=null&&O.active?"Active":"Off")),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2"},React.createElement("div",{className:"text-xs text-zinc-400"},"Slug"),React.createElement("input",{value:((qe=f.microsite)==null?void 0:qe.slug)||"",onChange:Se=>F(yt=>({...yt,microsite:{...yt.microsite||{},slug:Se.target.value}})),placeholder:"e.g. apex-performance",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white"}),React.createElement("div",{className:"text-[11px] text-zinc-500"},"Prototype link: https://flowofit.app/",ci(((Pt=f.microsite)==null?void 0:Pt.slug)||"your-slug")))),React.createElement(he,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Lead form"),React.createElement("div",{className:"text-xs text-zinc-400"},"Capture name/email for automated follow-up.")),React.createElement("button",{type:"button",onClick:()=>F(Se=>{var yt;return{...Se,microsite:{...Se.microsite||{},leadForm:!((yt=Se.microsite)!=null&&yt.leadForm)}}}),className:"px-3 py-2 rounded-xl text-sm font-semibold border "+((Za=f.microsite)!=null&&Za.leadForm?"bg-emerald-400/20 border-emerald-300 text-emerald-200":"bg-white/5 border-white/10 text-white")},(Ma=f.microsite)!=null&&Ma.leadForm?"Enabled":"Disabled")))),React.createElement(oe,{onClick:()=>D("AUTOMATION")},"Continue"),React.createElement(ke,{onClick:()=>D("SERVICE")},"Back to services"))):f.step==="AUTOMATION"?React.createElement("div",{className:"flex flex-col h-full"},React.createElement(Re,{stepIndex:5,total:5,title:"Welcome automation"},React.createElement(T,{kicker:"Business Setup \u2022 Automation",title:"Auto-reply to new leads",sub:"Send a welcome email when someone submits your lead form."}),React.createElement(he,null,React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Welcome email"),React.createElement("div",{className:"text-xs text-zinc-400"},"Instant response increases conversion.")),React.createElement("button",{type:"button",onClick:()=>F(Se=>{var yt;return{...Se,automation:{...Se.automation||{},welcomeEmail:!((yt=Se.automation)!=null&&yt.welcomeEmail)}}}),className:"px-3 py-2 rounded-xl text-sm font-semibold border "+(($a=f.automation)!=null&&$a.welcomeEmail?"bg-emerald-400/20 border-emerald-300 text-emerald-200":"bg-white/5 border-white/10 text-white")},(Yt=f.automation)!=null&&Yt.welcomeEmail?"On":"Off")),React.createElement("div",{className:"mt-3 text-xs text-zinc-500"},"In production this would configure your Automation Engine. Here it\u2019s saved locally.")),React.createElement(oe,{onClick:()=>{F(Se=>({...Se,complete:!0,step:"DONE"}))}},"Finish setup"),React.createElement(ke,{onClick:()=>D("MICROSITE")},"Back to microsite"))):React.createElement("div",{className:"flex flex-col h-full"},React.createElement("div",{className:"flex-1 h-full overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-xl mx-auto space-y-4"},React.createElement("div",{className:"rounded-3xl border border-emerald-300/30 bg-emerald-400/10 p-5"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-11 h-11 rounded-2xl bg-emerald-400/20 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-emerald-200"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-lg font-bold text-white"},"Business setup complete"),React.createElement("div",{className:"text-sm text-zinc-300 mt-1"},"Your branding, payments, service listing, microsite and welcome automation are configured."),React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-2 text-xs text-zinc-400"},React.createElement("div",null,"Brand: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci(((it=f.brand)==null?void 0:it.name)||"\u2014"))),React.createElement("div",null,"Payments: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci(((Ut=f.payments)!=null&&Ut.stripe?"Stripe ":"")+((ce=f.payments)!=null&&ce.paypal?"PayPal":"")||"\u2014"))),React.createElement("div",null,"Service: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci(((Vt=f.service)==null?void 0:Vt.name)||k))),React.createElement("div",null,"Microsite: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci((Fe=f.microsite)!=null&&Fe.active?"Active":"Off"))),React.createElement("div",null,"Lead form: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci((v=f.microsite)!=null&&v.leadForm?"Enabled":"Disabled"))),React.createElement("div",null,"Welcome email: ",React.createElement("span",{className:"text-zinc-200 font-semibold"},ci((Te=f.automation)!=null&&Te.welcomeEmail?"On":"Off"))))))),React.createElement("button",{type:"button",onClick:()=>{try{d&&d()}catch(Se){}},className:"w-full py-3 rounded-2xl bg-emerald-400 text-black font-semibold border border-emerald-300 hover:brightness-110 shadow-[0_0_24px_rgba(16,255,97,0.25)]"},"Go to Business Hub"),React.createElement("button",{type:"button",onClick:()=>{try{F(Se=>({...Se,step:"BRAND",complete:!1}))}catch(Se){}},className:"w-full py-3 rounded-2xl bg-white/5 text-white font-semibold border border-white/10 hover:bg-white/10"},"Restart wizard"))))},Ra=()=>React.createElement("div",{className:"w-full h-full flex flex-col"},fe!=="TRAINER"&&!ne?React.createElement("div",{className:"px-4 py-3 border-b border-white/10 bg-amber-500/10"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5"},React.createElement(_,{name:"Info",size:18,className:"text-amber-300"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-bold text-amber-100"},"Specialist AI Triage coming soon"),React.createElement("div",{className:"mt-0.5 text-[11px] text-amber-50/80 leading-relaxed"},"You are set as ",React.createElement("span",{className:"font-mono text-amber-100"},String(fe||"SPECIALIST")),". For now, you're using Trainer AI Triage as a fallback.")),React.createElement("button",{type:"button",onClick:J,className:"px-2 py-1 rounded-sm text-[11px] border border-amber-300/30 bg-amber-500/10 hover:bg-amber-500/15 text-amber-50"},"Dismiss"))):null,React.createElement("div",{className:"flex-1 min-h-0"},React.createElement(ql,null))),ri=(o,d)=>{try{var m=on.get(o);if(!m)return d;var E=JSON.parse(m);return E==null?d:E}catch(m){return d}},Da=(o,d)=>{try{on.set(o,JSON.stringify(d))}catch(m){try{localStorage.setItem(o,JSON.stringify(d))}catch(E){}return!1}try{window.dispatchEvent(new CustomEvent("fof:tdstore",{detail:{key:o}}))}catch(m){}return!0},Va=(o="id")=>o+"_"+Math.random().toString(16).slice(2)+"_"+Date.now().toString(16),Y=o=>o[Math.floor(Math.random()*o.length)],ft=(o,d)=>o+Math.floor(Math.random()*(d-o+1)),_a=(o=6)=>Math.random().toString(16).slice(2,2+o),Ja=(()=>{var o=["Chicken","Turkey","Beef","Salmon","Tuna","Shrimp","Eggs","Greek Yogurt","Tofu","Lentils","Chickpeas","Whey","Cottage Cheese"],d=["Rice","Potatoes","Sweet Potato","Oats","Quinoa","Pasta","Bread","Tortilla","Beans","Berries","Banana"],m=["Olive Oil","Avocado","Nuts","Peanut Butter","Tahini","Cheese","Seeds"],E=["Broccoli","Spinach","Kale","Peppers","Mushrooms","Zucchini","Tomato","Cucumber","Carrots","Onion"],g=["Mediterranean","Asian","Mexican","Middle Eastern","Indian","Classic","Fusion"],f=["high-protein","meal-prep","quick","budget","low-carb","balanced","vegetarian","gluten-free","dairy-free","recovery","performance","cut","bulk"],F=["Foundational","Standing","Seated","Balance","Backbend","Twist","Restorative"],D=["Downward Dog","Warrior I","Warrior II","Triangle","Chair","Cobra","Bridge","Child\u2019s Pose","Cat-Cow","Seated Twist","Pigeon","Plank","Tree","Boat","Happy Baby","Savasana"],k=["Box Breathing","4-7-8","Coherent Breathing","Alternate Nostril","Physiological Sigh","Wim Hof (Light)","Extended Exhale"],T=["Body Scan","Breath Awareness","Loving Kindness","Visualization","Mindful Walking","Sleep Meditation","Open Monitoring"],he=["Gentle","Flow","Power"];return{bulk:(Ye,Tt)=>{var _t=[];for(var P=0;P<Tt;P++)_t.push(Ye(P));return _t},makeMeal:()=>{var Ye=Y(o),Tt=Y(d),_t=Y(E),P=ft(280,820),I=ft(18,65),te=ft(15,110),Ce=Math.max(5,Math.round((P-(I*4+te*4))/9)),C=Y(["Breakfast","Lunch","Dinner","Snack"]);return{id:Va("meal"),name:`${Ye} ${Tt} + ${_t}`,mealType:C,calories:P,protein:I,carbs:te,fat:Ce,tags:[Y(f),Y(f),Y(g)].filter(Boolean).slice(0,3).join(", "),notes:`Auto-seeded \u2022 ${Y(g)}`}},makeRecipe:()=>{var Ye=Y(o),Tt=Y(d),_t=Y(E),P=ft(2,6),I=ft(280,650),te=ft(18,55),Ce=ft(15,95),C=ft(6,28),ye=[`${Ye} (${ft(200,600)}g)`,`${Tt} (${ft(1,3)} cup)`,`${_t} (${ft(1,3)} cup)`,`${Y(m)} (${ft(1,2)} tbsp)`,"Spices + salt"].join(`
`),le=["Prep ingredients",`Cook ${Ye.toLowerCase()} until done`,`Combine with ${Tt.toLowerCase()} + ${_t.toLowerCase()}`,"Season and serve"].join(`
`);return{id:Va("rcp"),name:`${Y(g)} ${Ye} Bowl ${_a(3).toUpperCase()}`,servings:P,caloriesPerServing:I,protein:te,carbs:Ce,fat:C,ingredients:ye,instructions:le,tags:[Y(f),Y(f),Y(g)].filter(Boolean).slice(0,3).join(", "),notes:"Auto-seeded"}},makeMacro:(Ye=0)=>{var Tt=Y(["Fat Loss","Maintenance","Lean Gain","Performance"]),_t=ft(1600,3200),P=ft(110,220),I=ft(45,95),te=Math.max(60,Math.round((_t-(P*4+I*9))/4));return{id:Va("macro"),name:`${Tt} Profile ${Ye+1}`,calories:_t,protein:P,carbs:te,fat:I,method:Y(["Fixed","% Split"]),notes:"Auto-seeded"}},makeAsana:()=>{var Ye=Y(D),Tt=Y(F),_t=`${ft(20,90)}s`;return{id:Va("asana"),name:`${Ye} ${_a(2).toUpperCase()}`,category:Tt,duration:_t,cues:"Breathe \u2022 Align \u2022 Control",tags:[Y(["hips","hamstrings","shoulders","spine","core","balance","mobility"]),Y(["strength","stretch","flow","reset"])].join(", "),notes:"Auto-seeded"}},makeFlow:()=>{var Ye=ft(6,16),Tt=[];for(var P=0;P<Ye;P++)Math.random()<.12?Tt.push({kind:"REST",seconds:ft(10,45)}):Tt.push({kind:"POSE",poseName:Y(D),seconds:ft(20,75),restAfter:Math.random()<.2?ft(10,25):0});var _t=Tt.map(P=>P.kind==="REST"?`Rest (${Number(P.seconds||20)}s)`:`${P.poseName} (${Number(P.seconds||30)}s)`+(Number(P.restAfter||0)>0?` + Rest ${Number(P.restAfter)}s`:"")).join(`
`);return{id:Va("flow"),name:`${Y(["Morning","Evening","Mobility","Strength","Reset","Power","Recovery"])} Flow (${ft(8,25)}m)`,intensity:Y(he),steps:Tt,stepsText:_t,tags:[Y(["mobility","strength","stress","hips","spine","energy","recovery"]),Y(["beginner","intermediate","advanced"])].join(", "),notes:"Auto-seeded",updatedAt:Date.now()}},makeBreathwork:()=>({id:Va("bw"),name:`${Y(k)} ${_a(2).toUpperCase()}`,duration:`${ft(3,15)}m`,protocol:`Inhale ${ft(3,6)} \u2022 Hold ${ft(2,6)} \u2022 Exhale ${ft(4,8)} \u2022 Hold ${ft(0,4)}`,tags:[Y(["stress","focus","sleep","energy","recovery","anxiety"]),Y(["beginner","intermediate"])].join(", "),notes:"Auto-seeded"}),makeMeditation:()=>({id:Va("med"),name:`${Y(T)} ${_a(2).toUpperCase()}`,duration:`${ft(5,20)}m`,guidance:"Guided cues \u2022 Breath anchor \u2022 Soft attention",tags:[Y(["sleep","recovery","focus","stress","mindset"]),Y(["guided","unguided"])].join(", "),notes:"Auto-seeded"})}})(),Ui=(o,d,m=1e3)=>{var E=ri(o,[])||[];if(E.length>=m)return{changed:!1,count:E.length};var g=m-E.length,f=Ja.bulk(d,g),F=E.concat(f);return Da(o,F),{changed:!0,count:F.length}},qs=(o=1e3)=>{var d=[];return d.push(Ui("fof.td.nutrition.meals.v1",Ja.makeMeal,o)),d.push(Ui("fof.td.nutrition.recipes.v1",Ja.makeRecipe,o)),d.push(Ui("fof.td.nutrition.macros.v1",m=>Ja.makeMacro(m),Math.max(200,Math.min(o,1e3)))),d.push(Ui("fof.td.nutrition.templates.v1",m=>({id:Va("tpl"),name:`Template ${m+1}`,slots:"Breakfast, Lunch, Dinner, Snack",notes:"Auto-seeded"}),Math.max(200,Math.min(o,1e3)))),d.push(Ui("fof.td.yoga.asanas.v1",Ja.makeAsana,o)),d.push(Ui("fof.td.yoga.flows.v1",Ja.makeFlow,o)),d.push(Ui("fof.td.wellness.breathwork.v1",Ja.makeBreathwork,o)),d.push(Ui("fof.td.wellness.meditation.v1",Ja.makeMeditation,o)),d},_o="fixed inset-0 z-[90] bg-black/70 backdrop-blur-sm flex items-end md:items-center justify-center p-3",ki="w-full max-w-2xl rounded-2xl bg-titanium-950 border border-white/10 shadow-2xl",Vs=({label:o,children:d})=>React.createElement("label",{className:"block"},React.createElement("div",{className:"text-[11px] text-white/55 font-mono uppercase tracking-widest"},o),React.createElement("div",{className:"mt-1"},d)),Ke=o=>React.createElement("input",{...o,className:"w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/85 placeholder:text-white/35 "+(o.className||"")}),ua=o=>React.createElement("textarea",{...o,className:"w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/85 placeholder:text-white/35 min-h-[90px] "+(o.className||"")}),ga=({value:o,onChange:d,options:m})=>React.createElement("select",{value:o,onChange:d,className:"w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/85"},(m||[]).map(E=>React.createElement("option",{key:E,value:E},E))),Vi=({toast:o,onClear:d})=>{if(React.useEffect(()=>{if(!o)return;var g=setTimeout(()=>{try{d()}catch(f){}},2200);return()=>clearTimeout(g)},[o]),!o)return null;var m=o.tone||"neutral";return React.createElement("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[95]"},React.createElement("div",{className:"px-4 py-3 rounded-2xl border shadow-xl text-sm "+(m==="green"?"border-emerald-400/30 bg-emerald-500/10 text-emerald-100":m==="red"?"border-red-400/30 bg-red-500/10 text-red-100":"border-white/12 bg-white/5 text-white/85")},o.msg))},$i=({title:o,subtitle:d,badges:m=[],onEdit:E,onDelete:g})=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 hover:bg-white/7 transition-colors"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-sm font-semibold text-white truncate"},o),d?React.createElement("div",{className:"mt-1 text-[12px] text-white/55 line-clamp-2"},d):null,m!=null&&m.length?React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},m.map((f,F)=>React.createElement("span",{key:F,className:"px-2 py-1 rounded-full text-[10px] font-mono uppercase tracking-widest border border-white/10 bg-white/5 text-white/70"},f))):null),React.createElement("div",{className:"flex items-center gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:E,className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Edit"),React.createElement("button",{type:"button",onClick:g,className:"px-3 py-2 rounded-sm border border-red-400/20 bg-red-500/10 hover:bg-red-500/15 text-red-100 text-[11px] font-mono uppercase tracking-widest"},"Delete")))),Ya=({headerKicker:o,headerTitle:d,headerIcon:m,headerTone:E="lime",backTo:g,setView:f,tabs:F,extraActions:D})=>{var ye,le;var[k,T]=React.useState(((ye=F==null?void 0:F[0])==null?void 0:ye.id)||"TAB"),[he,oe]=React.useState(""),[ke,Re]=React.useState(null),[Me,Et]=React.useState(null),[ya,Ct]=React.useState(0);React.useEffect(()=>{var O=()=>{try{Ct(qe=>qe+1)}catch(qe){}};try{window.addEventListener("fof:tdstore",O)}catch(qe){}return()=>{try{window.removeEventListener("fof:tdstore",O)}catch(qe){}}},[]);var Jt=E==="fuchsia"?"border-fuchsia-400/25 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-fuchsia-100":"border-lime-400/30 bg-lime-500/10 hover:bg-lime-500/15 text-lime-100",Ye=React.useMemo(()=>(F||[]).find(O=>O.id===k)||(F==null?void 0:F[0]),[k,F]);React.useEffect(()=>{try{(F||[]).forEach(O=>{var qe=ri(O.storageKey,null);(!Array.isArray(qe)||qe.length===0)&&(O.seed&&O.seed.length?Da(O.storageKey,O.seed):Da(O.storageKey,[]))});try{if(String(o||"").toLowerCase().includes("nutrition")||String(o||"").toLowerCase().includes("yoga")){var qe=ri("fof.td.nutrition.meals.v1",[])||[],Pt=ri("fof.td.yoga.asanas.v1",[])||[];qe.length<10&&Pt.length<10&&qs(1e3)}}catch(O){}Ct(O=>O+1)}catch(O){}},[]),React.useEffect(()=>{var O=qe=>{var Pt,Za;try{var Ma=qe&&((Pt=qe.detail)!=null&&Pt.key||qe.key)?String(((Za=qe.detail)==null?void 0:Za.key)||qe.key):"";if(!Ma)return;(F||[]).some(Yt=>String(Yt.storageKey||"")===Ma)&&Ct(Yt=>Yt+1)}catch(Ma){}};try{window.addEventListener("fof:tdstore",O)}catch(qe){}try{window.addEventListener("storage",O)}catch(qe){}return()=>{try{window.removeEventListener("fof:tdstore",O)}catch(qe){}try{window.removeEventListener("storage",O)}catch(qe){}}},[F]);var Tt=React.useMemo(()=>{var O=ri(Ye==null?void 0:Ye.storageKey,[])||[],qe=String(he||"").trim().toLowerCase();return qe?O.filter(Pt=>JSON.stringify(Pt||{}).toLowerCase().includes(qe)):O},[Ye,he,ya]),_t=()=>{var O=Ye!=null&&Ye.newDraft?Ye.newDraft():{id:Va("it"),name:""};Et({tabId:Ye.id,draft:O,isNew:!0})},P=O=>{var qe=Ye!=null&&Ye.editDraft?Ye.editDraft(O):{...O||{}};Et({tabId:Ye.id,draft:qe,isNew:!1})},I=()=>{if(!Me)return;var O=(F||[]).find($a=>$a.id===Me.tabId),qe=ri(O.storageKey,[])||[],Pt=O!=null&&O.clean?O.clean(Me.draft):Me.draft;if(!String((Pt==null?void 0:Pt.name)||"").trim()){Re({tone:"red",msg:"Name is required."});return}var Za=qe.findIndex($a=>String(($a==null?void 0:$a.id)||"")===String(Pt.id)),Ma=qe.slice(0);Za>=0?Ma[Za]=Pt:Ma.unshift(Pt),Da(O.storageKey,Ma),Et(null),Ct($a=>$a+1),Re({tone:"green",msg:"Saved."})},te=O=>{var qe=Ye,Pt=ri(qe.storageKey,[])||[];Da(qe.storageKey,Pt.filter(Za=>String((Za==null?void 0:Za.id)||"")!==String(O))),Ct(Za=>Za+1),Re({tone:"neutral",msg:"Deleted."})},Ce=({id:O,label:qe,icon:Pt})=>React.createElement("button",{type:"button",onClick:()=>T(O),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest inline-flex items-center gap-2 "+(k===O?Jt:"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},React.createElement(_,{name:Pt,size:14})," ",qe),C=Me?(F||[]).find(O=>O.id===Me.tabId):null;return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-6xl mx-auto space-y-5"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-white/55 font-bold"},o),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white tracking-tight flex items-center gap-3"},React.createElement(_,{name:m,size:20,className:E==="fuchsia"?"text-fuchsia-300":"text-lime-300"}),d),React.createElement("div",{className:"mt-2 text-[13px] text-white/65 max-w-2xl"},"Trainer-side reusable assets \u2014 Phase 2 will add builders, Phase 3 will add assignments.")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:_t,className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+Jt},"+ New"),D||null,React.createElement("button",{type:"button",onClick:()=>{try{f(g||"CONTENT_LIBRARY")}catch(O){}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Back to Library"))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},(F||[]).map(O=>React.createElement(Ce,{key:O.id,...O}))),React.createElement("div",{className:"relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:he,onChange:O=>oe(O.target.value),placeholder:"Search\u2026",className:"pl-9 pr-3 py-2 w-56 max-w-[70vw] rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})))),React.createElement("div",{className:"grid grid-cols-1 gap-3"},Tt.map(O=>React.createElement($i,{key:O.id,title:O.name||"Untitled",subtitle:Ye!=null&&Ye.subtitle?Ye.subtitle(O):O.notes||"",badges:Ye!=null&&Ye.badges?Ye.badges(O):[],onEdit:()=>P(O),onDelete:()=>te(O.id)})),Tt.length?null:React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-8 text-center text-white/60"},"No items yet. Tap ",React.createElement("span",{className:"text-white/85 font-semibold"},"+ New")," to create one."))),Me?React.createElement("div",{className:_o,onMouseDown:O=>{O.target===O.currentTarget&&Et(null)}},React.createElement("div",{className:ki},React.createElement("div",{className:"p-5 border-b border-white/10 flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-white/55 font-bold"},o),React.createElement("div",{className:"mt-1 text-lg font-bold text-white"},Me.isNew?"Create":"Edit"," ",(C==null?void 0:C.label)||"Item")),React.createElement("button",{type:"button",onClick:()=>Et(null),className:"p-2 rounded-xl hover:bg-white/10 text-white/70"},React.createElement(_,{name:"X",size:18}))),React.createElement("div",{className:"p-5 space-y-4"},(le=C==null?void 0:C.fields)==null?void 0:le.map(O=>{var qe,Pt,Za,Ma;return React.createElement(Vs,{key:O.key,label:O.label},O.type==="select"?React.createElement(ga,{value:(Pt=(qe=Me.draft[O.key])!=null?qe:O.defaultValue)!=null?Pt:"",onChange:$a=>Et(Yt=>({...Yt,draft:{...Yt.draft,[O.key]:$a.target.value}})),options:O.options||[]}):O.type==="textarea"?React.createElement(ua,{value:(Za=Me.draft[O.key])!=null?Za:"",onChange:$a=>Et(Yt=>({...Yt,draft:{...Yt.draft,[O.key]:$a.target.value}})),placeholder:O.placeholder||""}):React.createElement(Ke,{value:(Ma=Me.draft[O.key])!=null?Ma:"",onChange:$a=>Et(Yt=>({...Yt,draft:{...Yt.draft,[O.key]:$a.target.value}})),placeholder:O.placeholder||""}))})),React.createElement("div",{className:"p-5 border-t border-white/10 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>Et(null),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{try{var O=window.__td_read(LS_ASANAS,[]),qe=window.__FOF.AI.generateYogaFlow({intensity:String(Me.intensity||"FLOW").toUpperCase(),durationMin:Number(Me.durationMin||20)},O),Pt=qe&&qe.steps?qe.steps:qe;Et(Za=>({...Za||{},steps:Array.isArray(Pt)?Pt:[]})),Re({tone:"fuchsia",msg:"AI: Flow generated."})}catch(O){console.error("AI generateYogaFlow failed",O),Re({tone:"red",msg:"AI failed: "+(O&&O.message?O.message:"unknown error")})}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"AI Generate flow"),React.createElement("button",{type:"button",onClick:I,className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+Jt},"Save")))):null,React.createElement(Vi,{toast:ke,onClear:()=>Re(null)}))},Zt=({setView:o})=>{var d=[{id:"MEALS",label:"Meals",icon:"Utensils",storageKey:"fof.td.nutrition.meals.v1",seed:[{id:Va("meal"),name:"Protein Oats",mealType:"Breakfast",calories:520,protein:38,carbs:62,fat:14,tags:"high-protein, simple",notes:"Oats + whey + berries + PB"},{id:Va("meal"),name:"Chicken Rice Bowl",mealType:"Lunch",calories:640,protein:48,carbs:70,fat:16,tags:"meal-prep",notes:"Chicken, rice, veg"}],newDraft:()=>({id:Va("meal"),name:"",mealType:"Breakfast",calories:"",protein:"",carbs:"",fat:"",tags:"",notes:""}),fields:[{key:"name",label:"Meal name",type:"text",placeholder:"e.g., Chicken rice bowl"},{key:"mealType",label:"Meal type",type:"select",options:["Breakfast","Lunch","Dinner","Snack"]},{key:"calories",label:"Calories",type:"text",placeholder:"e.g., 600"},{key:"protein",label:"Protein (g)",type:"text",placeholder:"e.g., 45"},{key:"carbs",label:"Carbs (g)",type:"text",placeholder:"e.g., 70"},{key:"fat",label:"Fat (g)",type:"text",placeholder:"e.g., 18"},{key:"tags",label:"Tags (comma separated)",type:"text",placeholder:"meal-prep, high-protein"},{key:"notes",label:"Notes",type:"textarea",placeholder:"Optional notes\u2026"}],clean:m=>({...m,calories:m.calories===""?"":Number(m.calories||0),protein:m.protein===""?"":Number(m.protein||0),carbs:m.carbs===""?"":Number(m.carbs||0),fat:m.fat===""?"":Number(m.fat||0)}),subtitle:m=>`${m.mealType||"Meal"} \u2022 ${m.calories||0} kcal \u2022 P${m.protein||0}/C${m.carbs||0}/F${m.fat||0}`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)},{id:"RECIPES",label:"Recipes",icon:"BookOpen",storageKey:"fof.td.nutrition.recipes.v1",seed:[],newDraft:()=>({id:Va("rcp"),name:"",servings:1,caloriesPerServing:"",protein:"",carbs:"",fat:"",ingredients:"",instructions:"",tags:"",notes:""}),fields:[{key:"name",label:"Recipe name",type:"text",placeholder:"e.g., Turkey chili"},{key:"servings",label:"Servings",type:"text",placeholder:"e.g., 4"},{key:"caloriesPerServing",label:"Calories per serving",type:"text",placeholder:"e.g., 420"},{key:"protein",label:"Protein (g)",type:"text"},{key:"carbs",label:"Carbs (g)",type:"text"},{key:"fat",label:"Fat (g)",type:"text"},{key:"ingredients",label:"Ingredients (one per line)",type:"textarea"},{key:"instructions",label:"Instructions (one per line)",type:"textarea"},{key:"tags",label:"Tags",type:"text"},{key:"notes",label:"Notes",type:"textarea"}],clean:m=>({...m,servings:Number(m.servings||1)}),subtitle:m=>`${m.servings||1} servings \u2022 ${m.caloriesPerServing||0} kcal/serv`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)},{id:"TEMPLATES",label:"Templates",icon:"LayoutTemplate",storageKey:"fof.td.nutrition.templates.v1",seed:[{id:Va("tpl"),name:"4 Meals / Day (Standard)",slots:"Breakfast, Lunch, Snack, Dinner",notes:"Default cadence"}],newDraft:()=>({id:Va("tpl"),name:"",slots:"Breakfast, Lunch, Dinner",notes:""}),fields:[{key:"name",label:"Template name",type:"text"},{key:"slots",label:"Slots (comma separated)",type:"text",placeholder:"Breakfast, Lunch, Dinner"},{key:"notes",label:"Notes",type:"textarea"}],subtitle:m=>`Slots: ${m.slots||""}`,badges:()=>["template"]},{id:"MACROS",label:"Macro Profiles",icon:"Target",storageKey:"fof.td.nutrition.macros.v1",seed:[{id:Va("macro"),name:"Fat Loss (Moderate)",calories:1900,protein:160,carbs:185,fat:55,method:"Fixed",notes:""}],newDraft:()=>({id:Va("macro"),name:"",calories:"",protein:"",carbs:"",fat:"",method:"Fixed",notes:""}),fields:[{key:"name",label:"Profile name",type:"text"},{key:"method",label:"Method",type:"select",options:["Fixed","% Split","Auto (Phase 2)"]},{key:"calories",label:"Calories",type:"text"},{key:"protein",label:"Protein (g)",type:"text"},{key:"carbs",label:"Carbs (g)",type:"text"},{key:"fat",label:"Fat (g)",type:"text"},{key:"notes",label:"Notes",type:"textarea"}],clean:m=>({...m,calories:m.calories===""?"":Number(m.calories||0),protein:m.protein===""?"":Number(m.protein||0),carbs:m.carbs===""?"":Number(m.carbs||0),fat:m.fat===""?"":Number(m.fat||0)}),subtitle:m=>`${m.calories||0} kcal \u2022 P${m.protein||0}/C${m.carbs||0}/F${m.fat||0} \u2022 ${m.method||"Fixed"}`,badges:m=>[String(m.method||"Fixed")]}];return React.createElement(Ya,{headerKicker:"Nutrition Engine",headerTitle:"Coach Library & Targets",headerIcon:"Utensils",headerTone:"lime",backTo:"CONTENT_LIBRARY",setView:o,tabs:d,extraActions:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{o("NUTRITION_PLAN_BUILDER")}catch(m){}},className:"px-3 py-2 rounded-sm border border-lime-400/25 bg-lime-500/10 hover:bg-lime-500/15 text-[11px] font-mono uppercase tracking-widest text-lime-100"},"Builder"),React.createElement("button",{type:"button",onClick:()=>{try{qs(1e3)}catch(m){}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/75"},"Populate 1000+"))})},Ki=({setView:o})=>{var d=[{id:"ASANAS",label:"Asanas",icon:"Lotus",storageKey:"fof.td.yoga.asanas.v1",seed:[{id:Va("asana"),name:"Downward Dog",category:"Foundational",duration:"45s",cues:"Lengthen spine; press heels",tags:"hamstrings, shoulders",notes:""},{id:Va("asana"),name:"Warrior II",category:"Standing",duration:"30s",cues:"Knee stacks over ankle",tags:"hips, legs",notes:""}],newDraft:()=>({id:Va("asana"),name:"",category:"Foundational",duration:"30s",cues:"",tags:"",notes:""}),fields:[{key:"name",label:"Pose name",type:"text"},{key:"category",label:"Category",type:"select",options:["Foundational","Standing","Seated","Balance","Backbend","Twist","Restorative"]},{key:"duration",label:"Default duration",type:"text",placeholder:"e.g., 30s"},{key:"cues",label:"Coaching cues",type:"textarea"},{key:"tags",label:"Tags",type:"text",placeholder:"hips, hamstrings"},{key:"notes",label:"Notes",type:"textarea"}],subtitle:m=>`${m.category||"Pose"} \u2022 ${m.duration||""}`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)},{id:"FLOWS",label:"Flows",icon:"Rows",storageKey:"fof.td.yoga.flows.v1",seed:[{id:Va("flow"),name:"Morning Mobility (10m)",intensity:"Gentle",steps:`Downward Dog (45s)
Warrior II (30s)
Child\u2019s Pose (60s)`,tags:"mobility, morning",notes:""}],newDraft:()=>({id:Va("flow"),name:"",intensity:"Gentle",steps:"",tags:"",notes:""}),fields:[{key:"name",label:"Flow name",type:"text"},{key:"intensity",label:"Intensity",type:"select",options:["Gentle","Flow","Power"]},{key:"steps",label:"Steps (one per line)",type:"textarea",placeholder:`Pose (duration)
Pose (duration)`},{key:"tags",label:"Tags",type:"text"},{key:"notes",label:"Notes",type:"textarea"}],subtitle:m=>`${m.intensity||"Gentle"} \u2022 ${Array.isArray(m.steps)?m.steps.length:String(m.stepsText||m.steps||"").split(`
`).filter(Boolean).length} steps`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)},{id:"BREATHWORK",label:"Breathwork",icon:"Wind",storageKey:"fof.td.wellness.breathwork.v1",seed:[{id:Va("bw"),name:"Box Breathing (4-4-4-4)",duration:"5m",protocol:"Inhale 4 \u2022 Hold 4 \u2022 Exhale 4 \u2022 Hold 4",tags:"stress, focus",notes:""}],newDraft:()=>({id:Va("bw"),name:"",duration:"5m",protocol:"",tags:"",notes:""}),fields:[{key:"name",label:"Session name",type:"text"},{key:"duration",label:"Duration",type:"text",placeholder:"e.g., 5m"},{key:"protocol",label:"Protocol",type:"textarea",placeholder:"Describe the breathing protocol\u2026"},{key:"tags",label:"Tags",type:"text"},{key:"notes",label:"Notes",type:"textarea"}],subtitle:m=>`${m.duration||""} \u2022 ${m.protocol?"Protocol set":"No protocol"}`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)},{id:"MEDITATION",label:"Meditation",icon:"Sparkles",storageKey:"fof.td.wellness.meditation.v1",seed:[{id:Va("med"),name:"Body Scan",duration:"10m",guidance:"Scan head to toe; observe sensations",tags:"recovery, sleep",notes:""}],newDraft:()=>({id:Va("med"),name:"",duration:"10m",guidance:"",tags:"",notes:""}),fields:[{key:"name",label:"Session name",type:"text"},{key:"duration",label:"Duration",type:"text"},{key:"guidance",label:"Guidance",type:"textarea"},{key:"tags",label:"Tags",type:"text"},{key:"notes",label:"Notes",type:"textarea"}],subtitle:m=>`${m.duration||""} \u2022 ${m.guidance?"Guided":"Unguided"}`,badges:m=>String(m.tags||"").split(",").map(E=>E.trim()).filter(Boolean).slice(0,4)}];return React.createElement(Ya,{headerKicker:"Yoga & Wellness",headerTitle:"Poses, Flows & Sessions",headerIcon:"Lotus",headerTone:"fuchsia",backTo:"CONTENT_LIBRARY",setView:o,tabs:d,extraActions:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{o("YOGA_FLOW_BUILDER")}catch(m){}},className:"px-3 py-2 rounded-sm border border-fuchsia-400/25 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-[11px] font-mono uppercase tracking-widest text-fuchsia-100"},"Builder"),React.createElement("button",{type:"button",onClick:()=>{try{qs(1e3)}catch(m){}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/75"},"Populate 1000+"))})},Fa=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ni=["Breakfast","Lunch","Dinner","Snacks"],ys=({setView:o})=>{var d="fof.td.nutrition.plan_templates.v1",m="fof.td.nutrition.assigned_plans_draft.v1",E="fof.td.nutrition.macros.v1",g="fof.td.nutrition.meals.v1",f="fof.td.nutrition.recipes.v1",[F,D]=React.useState(0),[k,T]=React.useState(null),he=React.useMemo(()=>ri(E,[])||[],[F]),oe=React.useMemo(()=>ri(g,[])||[],[F]),ke=React.useMemo(()=>ri(f,[])||[],[F]),Re=React.useMemo(()=>ri(d,[])||[],[F]),Me=React.useMemo(()=>ri(m,[])||[],[F]),[Et,ya]=React.useState("TEMPLATES"),[Ct,Jt]=React.useState(""),[Ye,Tt]=React.useState(""),[_t,P]=React.useState("Mon"),[I,te]=React.useState("Breakfast"),Ce=React.useCallback(()=>{var Ut={};return Fa.forEach(ce=>{Ut[ce]={},Ni.forEach(Vt=>{Ut[ce][Vt]=[]})}),Ut},[]),[C,ye]=React.useState(null),le=()=>{ye({id:Va("nplan"),name:"",notes:"",macroProfileId:he&&he[0]?he[0].id:"",week:Ce(),source:"NEW"}),P("Mon"),te("Breakfast")},O=(Ut,ce)=>{var Vt=Ut&&Ut.week?Ut.week:Ce();ye({id:Ut.id||Va("nplan"),name:Ut.name||"",notes:Ut.notes||"",macroProfileId:Ut.macroProfileId||"",week:Vt,source:ce||"TEMPLATE"}),P("Mon"),te("Breakfast")},qe=Ut=>{if(!C)return;var ce=String(C.name||"").trim();if(!ce){T({tone:"red",msg:"Name is required."});return}var Vt={id:C.id||Va("nplan"),name:ce,notes:C.notes||"",macroProfileId:C.macroProfileId||"",week:C.week||Ce(),updatedAt:Date.now(),kind:Ut==="TEMPLATE"?"NUTRITION_PLAN_TEMPLATE":"NUTRITION_ASSIGNED_DRAFT"},Fe=Ut==="TEMPLATE"?d:m,v=ri(Fe,[])||[],Te=v.findIndex(yt=>String((yt==null?void 0:yt.id)||"")===String(Vt.id)),Se=v.slice(0);Te>=0?Se[Te]=Vt:Se.unshift(Vt),Da(Fe,Se),T({tone:"green",msg:Ut==="TEMPLATE"?"Saved as template.":"Saved as assigned draft."}),D(yt=>yt+1)},Pt=(Ut,ce,Vt)=>{ye(Fe=>{var v={...Fe.week||{}},Te={...v[Ut]||{}},Se=Array.isArray(Te[ce])?Te[ce].slice(0):[];return Se.splice(Vt,1),Te[ce]=Se,v[Ut]=Te,{...Fe,week:v}})},Za=Ut=>{if(!C)return;var ce=_t,Vt=I;ye(Fe=>{var v={...Fe.week||{}},Te={...v[ce]||{}},Se=Array.isArray(Te[Vt])?Te[Vt].slice(0):[];return Se.push(Ut),Te[Vt]=Se,v[ce]=Te,{...Fe,week:v}})},Ma=React.useMemo(()=>{var Ut=String(Ye||"").trim().toLowerCase(),ce=(oe||[]).map(v=>({type:"MEAL",id:v.id,name:v.name||"Meal",subtitle:`${v.mealType||"Meal"} \u2022 ${Number(v.calories||0)} kcal \u2022 P${Number(v.protein||0)}/C${Number(v.carbs||0)}/F${Number(v.fat||0)}`})),Vt=(ke||[]).map(v=>({type:"RECIPE",id:v.id,name:v.name||"Recipe",subtitle:`${Number(v.servings||1)} servings \u2022 ${Number(v.caloriesPerServing||0)} kcal/serv`})),Fe=[...ce,...Vt];return Ut?Fe.filter(v=>String(v.name||"").toLowerCase().includes(Ut)||String(v.subtitle||"").toLowerCase().includes(Ut)):Fe},[oe,ke,Ye]),$a=React.useMemo(()=>{var Ut=Et==="TEMPLATES"?Re:Me,ce=String(Ct||"").trim().toLowerCase(),Vt=(Ut||[]).slice(0);return ce?Vt.filter(Fe=>String(Fe.name||"").toLowerCase().includes(ce)):Vt},[Et,Re,Me,Ct]),Yt=Ut=>{var ce=(he||[]).find(Vt=>String(Vt.id)===String(Ut));return ce?`${ce.name||"Macro Profile"} \u2022 ${Number(ce.calories||0)} kcal \u2022 P${Number(ce.protein||0)}/C${Number(ce.carbs||0)}/F${Number(ce.fat||0)}`:"\u2014"},it=React.useMemo(()=>{if(!C)return[];try{var Ut=C.week&&C.week[_t]?C.week[_t]:{};return Array.isArray(Ut[I])?Ut[I]:[]}catch(Ut){return[]}},[C,_t,I]);return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-7xl mx-auto space-y-5"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-white/55 font-bold"},"Nutrition Builder"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white tracking-tight flex items-center gap-3"},React.createElement(_,{name:"Utensils",size:20,className:"text-lime-300"}),"Nutrition Plan Builder"),React.createElement("div",{className:"mt-2 text-[13px] text-white/65 max-w-2xl"},"Build a weekly structure (Mon\u2013Sun) and attach meals/recipes into meal slots. Save as templates or assigned drafts (Phase 3 will link to clients).")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>o("NUTRITION_ENGINE"),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Back to Nutrition Engine"),React.createElement("button",{type:"button",onClick:le,className:"px-3 py-2 rounded-sm border border-lime-400/25 bg-lime-500/10 hover:bg-lime-500/15 text-[11px] font-mono uppercase tracking-widest text-lime-100"},"+ New Plan"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/70"},"Saved"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ya("TEMPLATES"),className:"px-2.5 py-1.5 rounded-sm border text-[10px] font-mono uppercase tracking-widest "+(Et==="TEMPLATES"?"border-lime-400/25 bg-lime-500/10 text-lime-100":"border-white/12 bg-white/5 text-white/65 hover:bg-white/10")},"Templates"),React.createElement("button",{type:"button",onClick:()=>ya("DRAFTS"),className:"px-2.5 py-1.5 rounded-sm border text-[10px] font-mono uppercase tracking-widest "+(Et==="DRAFTS"?"border-sky-400/25 bg-sky-500/10 text-sky-100":"border-white/12 bg-white/5 text-white/65 hover:bg-white/10")},"Drafts"))),React.createElement("div",{className:"mt-3 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:Ct,onChange:Ut=>Jt(Ut.target.value),placeholder:"Search\u2026",className:"pl-9 pr-3 py-2 w-full rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})),React.createElement("div",{className:"mt-3 space-y-2 max-h-[520px] overflow-auto trainer-scroll pr-1"},$a.length===0?React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No items yet."):$a.map(Ut=>React.createElement("button",{key:Ut.id,type:"button",onClick:()=>O(Ut,Et==="TEMPLATES"?"TEMPLATE":"DRAFT"),className:"w-full text-left rounded-xl border p-3 hover:bg-white/8 "+(String((C==null?void 0:C.id)||"")===String(Ut.id)?"border-white/20 bg-white/8":"border-white/10 bg-black/20")},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},Ut.name||"Untitled"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50 truncate"},Yt(Ut.macroProfileId)),React.createElement("div",{className:"mt-2 text-[10px] font-mono uppercase tracking-widest text-white/40"},Et==="TEMPLATES"?"TEMPLATE":"DRAFT"," \u2022 ",Ut.updatedAt?new Date(Ut.updatedAt).toLocaleDateString():"\u2014"))))),React.createElement("div",{className:"lg:col-span-6 rounded-2xl border border-white/10 bg-white/5 p-4"},C?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Plan name"),React.createElement("input",{value:C.name,onChange:Ut=>ye(ce=>({...ce,name:Ut.target.value})),placeholder:"e.g., Fat loss \u2014 4 meals/day",className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90 placeholder:text-white/35"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Macro profile"),React.createElement("select",{value:C.macroProfileId||"",onChange:Ut=>ye(ce=>({...ce,macroProfileId:Ut.target.value})),className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90"},React.createElement("option",{value:""},"\u2014 Select \u2014"),(he||[]).map(Ut=>React.createElement("option",{key:Ut.id,value:Ut.id},Ut.name||"Macro Profile"," \u2022 ",Number(Ut.calories||0)," kcal"))),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},Yt(C.macroProfileId)))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Week structure"),React.createElement("div",{className:"mt-3 flex items-center gap-2 flex-wrap"},Fa.map(Ut=>React.createElement("button",{key:Ut,type:"button",onClick:()=>P(Ut),className:"px-3 py-2 rounded-sm border text-[11px] font-mono uppercase tracking-widest "+(_t===Ut?"border-white/20 bg-white/10 text-white":"border-white/12 bg-white/5 text-white/65 hover:bg-white/10")},Ut))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/3 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-semibold text-white/80"},"Meal slots"),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},_t)),React.createElement("div",{className:"mt-3 space-y-2"},Ni.map(Ut=>React.createElement("button",{key:Ut,type:"button",onClick:()=>te(Ut),className:"w-full text-left rounded-xl border p-3 hover:bg-white/8 "+(I===Ut?"border-lime-400/25 bg-lime-500/10":"border-white/10 bg-black/20")},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[12px] font-semibold "+(I===Ut?"text-lime-100":"text-white/85")},Ut),React.createElement("div",{className:"text-[11px] text-white/50"},(()=>{var ce,Vt;try{var Fe=(Vt=(ce=C.week)==null?void 0:ce[_t])==null?void 0:Vt[Ut];return(Array.isArray(Fe)?Fe.length:0)+" items"}catch(Fe){return"0 items"}})())),React.createElement("div",{className:"mt-1 text-[11px] text-white/45"},"Tap to edit this slot \u2022 Add from Library \u2192"))))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-white/3 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-semibold text-white/80"},I," \u2014 ",_t),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},it.length," items")),React.createElement("div",{className:"mt-3 space-y-2 max-h-[260px] overflow-auto trainer-scroll pr-1"},it.length===0?React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No items yet. Add meals/recipes from the Library."):it.map((Ut,ce)=>React.createElement("div",{key:ce,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},Ut.name||"Item"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50"},Ut.type||Ut.refType||"\u2014")),React.createElement("button",{type:"button",onClick:()=>Pt(_t,I,ce),className:"px-2.5 py-1.5 rounded-sm border border-rose-400/25 bg-rose-500/10 hover:bg-rose-500/15 text-[10px] font-mono uppercase tracking-widest text-rose-100"},"Remove"))))),React.createElement("div",{className:"mt-3 text-[11px] text-white/45"},"Tip: Use templates to standardize, then Phase 3 will var you assign + adjust per client.")))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Notes"),React.createElement("textarea",{value:C.notes,onChange:Ut=>ye(ce=>({...ce,notes:Ut.target.value})),placeholder:"Optional coaching notes\u2026",className:"mt-2 w-full min-h-[90px] px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90 placeholder:text-white/35"})),React.createElement("div",{className:"flex items-center justify-end gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>{try{var Ut=__td_read(g,[]),ce=__td_read(f,[]),Vt=window.__FOF.AI.autoBuildNutritionWeek(C,Ut,ce);ye(()=>Vt&&Vt.week?Vt:{...C||{},week:Vt}),T({tone:"lime",msg:"AI: Week auto-built (fills empty slots)."})}catch(Ut){T({tone:"red",msg:"AI failed."})}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"AI Auto-build week"),React.createElement("button",{type:"button",onClick:()=>qe("TEMPLATE"),className:"px-3 py-2 rounded-sm border border-lime-400/25 bg-lime-500/10 hover:bg-lime-500/15 text-[11px] font-mono uppercase tracking-widest text-lime-100"},"Save as Template"),React.createElement("button",{type:"button",onClick:()=>qe("DRAFT"),className:"px-3 py-2 rounded-sm border border-sky-400/25 bg-sky-500/10 hover:bg-sky-500/15 text-[11px] font-mono uppercase tracking-widest text-sky-100"},"Save as Assigned Draft"))):React.createElement("div",{className:"p-8 rounded-2xl border border-white/10 bg-black/20 text-center text-white/60"},"Select a template/draft, or create a new plan.")),React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/70"},"Library"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Meals + Recipes")),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Add \u2192 ",_t,"/",I)),React.createElement("div",{className:"mt-3 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:Ye,onChange:Ut=>Tt(Ut.target.value),placeholder:"Search meals/recipes\u2026",className:"pl-9 pr-3 py-2 w-full rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})),React.createElement("div",{className:"mt-3 space-y-2 max-h-[560px] overflow-auto trainer-scroll pr-1"},Ma.map(Ut=>React.createElement("div",{key:Ut.type+"_"+Ut.id,className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},Ut.name),React.createElement("div",{className:"mt-1 text-[11px] text-white/50 truncate"},Ut.subtitle),React.createElement("div",{className:"mt-2 text-[10px] font-mono uppercase tracking-widest text-white/40"},Ut.type)),React.createElement("button",{type:"button",disabled:!C,onClick:()=>{try{Za({refType:Ut.type,refId:Ut.id,name:Ut.name,subtitle:Ut.subtitle}),T({tone:"green",msg:`Added to ${_t} / ${I}`})}catch(ce){}},className:"px-2.5 py-1.5 rounded-sm border text-[10px] font-mono uppercase tracking-widest "+(C?"border-emerald-400/25 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-100":"opacity-50 cursor-not-allowed border-white/10 bg-white/5 text-white/40")},"Add")))),Ma.length===0?React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"Nothing found."):null),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/55"},"Library is managed in ",React.createElement("span",{className:"text-white/80 font-semibold"},"Nutrition Engine")," (Meals/Recipes/Macro Profiles)."))),React.createElement(Vi,{toast:k,onClear:()=>T(null)})))},Ps=({setView:o})=>{var d="fof.td.yoga.asanas.v1",m="fof.td.yoga.flows.v1",[E,g]=React.useState(0),[f,F]=React.useState(null),D=React.useMemo(()=>ri(d,[])||[],[E]),k=React.useMemo(()=>ri(m,[])||[],[E]),[T,he]=React.useState(""),[oe,ke]=React.useState(""),[Re,Me]=React.useState(null),Et=()=>{Me({id:Va("flow"),name:"",intensity:"Gentle",durationMin:20,tags:"",notes:"",steps:[]})},ya=le=>{var O=Array.isArray(le==null?void 0:le.steps)?le.steps:[];Me({id:le.id||Va("flow"),name:le.name||"",intensity:le.intensity||"Gentle",durationMin:Number((le==null?void 0:le.durationMin)||20),tags:le.tags||"",notes:le.notes||"",steps:O.length?O:Ct((le==null?void 0:le.steps)||(le==null?void 0:le.stepsText)||"")})};function Ct(le){try{var O=String(le||"").split(`
`).map(Pt=>Pt.trim()).filter(Boolean),qe=[];return O.forEach(Pt=>{var Za=/^rest\s*\((\d+)s\)/i.exec(Pt);if(Za){qe.push({kind:"REST",seconds:Number(Za[1]||15)});return}var Ma=/^(.*)\((\d+)s\)\s*$/.exec(Pt);Ma?qe.push({kind:"POSE",poseName:Ma[1].trim(),seconds:Number(Ma[2]||30)}):qe.push({kind:"POSE",poseName:Pt,seconds:30})}),qe}catch(O){return[]}}var Jt=React.useMemo(()=>{var le=String(oe||"").trim().toLowerCase(),O=(D||[]).slice(0);return le?O.filter(qe=>String(qe.name||"").toLowerCase().includes(le)||String(qe.category||"").toLowerCase().includes(le)||String(qe.tags||"").toLowerCase().includes(le)):O},[D,oe]),Ye=React.useMemo(()=>{var le=String(T||"").trim().toLowerCase(),O=(k||[]).slice(0);return le?O.filter(qe=>String(qe.name||"").toLowerCase().includes(le)):O},[k,T]),Tt=le=>{if(!Re)return;var O=(D||[]).find(Ma=>String(Ma.id)===String(le)),qe=(O==null?void 0:O.name)||"Pose",Pt=O!=null&&O.duration?String(O.duration):"30s",Za=(()=>{var Ma=/([0-9]+)\s*s/i.exec(Pt);if(Ma)return Number(Ma[1]||30);var $a=/([0-9]+)\s*m/i.exec(Pt);return $a?Number($a[1]||1)*60:30})();Me(Ma=>({...Ma,steps:[...Ma.steps||[],{kind:"POSE",poseId:le,poseName:qe,seconds:Za,restAfter:0}]}))},_t=()=>{Re&&Me(le=>({...le,steps:[...le.steps||[],{kind:"REST",seconds:20}]}))},P=(le,O)=>{try{le.dataTransfer.setData("text/plain",String(O))}catch(qe){}},I=(le,O)=>{try{le.dataTransfer.setData("application/x-step-index",String(O))}catch(qe){}},te=(le,O=null)=>{if(le.preventDefault(),!Re)return;var qe=(()=>{try{return le.dataTransfer.getData("text/plain")}catch(Za){return""}})(),Pt=(()=>{try{return le.dataTransfer.getData("application/x-step-index")}catch(Za){return""}})();if(Pt!==""){var Za=Number(Pt);if(Number.isNaN(Za))return;Me(Ma=>{var $a=Array.isArray(Ma.steps)?Ma.steps.slice(0):[];if(Za<0||Za>=$a.length)return Ma;var[Yt]=$a.splice(Za,1),it=O==null?$a.length:Math.max(0,Math.min($a.length,O));return $a.splice(it,0,Yt),{...Ma,steps:$a}});return}if(qe){if(O==null){Tt(qe);return}var Za=(D||[]).find(it=>String(it.id)===String(qe)),Ma=(Za==null?void 0:Za.name)||"Pose",$a=Za!=null&&Za.duration?String(Za.duration):"30s",Yt=(()=>{var it=/([0-9]+)\s*s/i.exec($a);if(it)return Number(it[1]||30);var Ut=/([0-9]+)\s*m/i.exec($a);return Ut?Number(Ut[1]||1)*60:30})();Me(it=>{var Ut=Array.isArray(it.steps)?it.steps.slice(0):[],ce=Math.max(0,Math.min(Ut.length,O));return Ut.splice(ce,0,{kind:"POSE",poseId:qe,poseName:Ma,seconds:Yt,restAfter:0}),{...it,steps:Ut}})}},Ce=()=>{if(!Re)return;var le=String(Re.name||"").trim();if(!le){F({tone:"red",msg:"Flow name is required."});return}var O=Array.isArray(Re.steps)?Re.steps:[],qe=O.map(Yt=>Yt.kind==="REST"?`Rest (${Number(Yt.seconds||20)}s)`:`${Yt.poseName||"Pose"} (${Number(Yt.seconds||30)}s)`+(Number(Yt.restAfter||0)>0?` + Rest ${Number(Yt.restAfter)}s`:"")).join(`
`),Pt={id:Re.id||Va("flow"),name:le,intensity:Re.intensity||"Gentle",durationMin:Number(Re.durationMin||20),tags:Re.tags||"",notes:Re.notes||"",steps:O,stepsText:qe,updatedAt:Date.now()},Za=ri(m,[])||[],Ma=Za.findIndex(Yt=>String((Yt==null?void 0:Yt.id)||"")===String(Pt.id)),$a=Za.slice(0);Ma>=0?$a[Ma]=Pt:$a.unshift(Pt),Da(m,$a),F({tone:"green",msg:"Flow saved."}),g(Yt=>Yt+1)},C=le=>{Me(O=>{var qe=Array.isArray(O.steps)?O.steps.slice(0):[];return qe.splice(le,1),{...O,steps:qe}})},ye=(le,O)=>{Me(qe=>{var Pt=Array.isArray(qe.steps)?qe.steps.slice(0):[];return Pt[le]={...Pt[le]||{},...O||{}},{...qe,steps:Pt}})};return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-7xl mx-auto space-y-5"},React.createElement("div",{className:"flex items-start justify-between gap-4 flex-wrap"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"text-[10px] uppercase tracking-[0.28em] text-white/55 font-bold"},"Yoga Builder"),React.createElement("div",{className:"mt-1 text-2xl font-extrabold text-white tracking-tight flex items-center gap-3"},React.createElement(_,{name:"Lotus",size:20,className:"text-fuchsia-300"}),"Yoga Flow Builder"),React.createElement("div",{className:"mt-2 text-[13px] text-white/65 max-w-2xl"},"Drag poses into a sequence, set time per pose and rest blocks, tag intensity, and save as a reusable Flow.")),React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("button",{type:"button",onClick:()=>o("YOGA_WELLNESS_ENGINE"),className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-white/80 text-[11px] font-mono uppercase tracking-widest"},"Back to Yoga & Wellness Engine"),React.createElement("button",{type:"button",onClick:Et,className:"px-3 py-2 rounded-sm border border-fuchsia-400/25 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-[11px] font-mono uppercase tracking-widest text-fuchsia-100"},"+ New Flow"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4"},React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/70"},"Saved flows"),React.createElement("div",{className:"mt-3 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:T,onChange:le=>he(le.target.value),placeholder:"Search flows\u2026",className:"pl-9 pr-3 py-2 w-full rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})),React.createElement("div",{className:"mt-3 space-y-2 max-h-[540px] overflow-auto trainer-scroll pr-1"},Ye.length===0?React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No flows yet."):Ye.map(le=>React.createElement("button",{key:le.id,type:"button",onClick:()=>ya(le),className:"w-full text-left rounded-xl border p-3 hover:bg-white/8 "+(String((Re==null?void 0:Re.id)||"")===String(le.id)?"border-white/20 bg-white/8":"border-white/10 bg-black/20")},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},le.name||"Untitled"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50 truncate"},le.intensity||"Gentle"," \u2022 ",Array.isArray(le.steps)?le.steps.length:String(le.stepsText||"").split(`
`).filter(Boolean).length," steps"),React.createElement("div",{className:"mt-2 text-[10px] font-mono uppercase tracking-widest text-white/40"},le.updatedAt?new Date(le.updatedAt).toLocaleDateString():"\u2014"))))),React.createElement("div",{className:"lg:col-span-6 rounded-2xl border border-white/10 bg-white/5 p-4"},Re?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Flow name"),React.createElement("input",{value:Re.name,onChange:le=>Me(O=>({...O,name:le.target.value})),placeholder:"e.g., Morning Mobility (10m)",className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90 placeholder:text-white/35"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Intensity"),React.createElement("select",{value:Re.intensity||"Gentle",onChange:le=>Me(O=>({...O,intensity:le.target.value})),className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90"},React.createElement("option",null,"Gentle"),React.createElement("option",null,"Flow"),React.createElement("option",null,"Power")),React.createElement("div",{className:"mt-2 text-[11px] text-white/55"},"Used for coaching tags + future assignment caps.")),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 mt-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Duration (minutes)"),React.createElement("div",{className:"text-[11px] text-white/40"},"AI uses this to size the flow")),React.createElement("input",{type:"number",min:"5",max:"120",value:Number(Re.durationMin||20),onChange:le=>Me(O=>({...O,durationMin:Number(le.target.value||20)})),className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90"}))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-semibold text-white/80"},"Sequence"),React.createElement("div",{className:"text-[11px] text-white/50"},"Drag poses from the library \u2192 drop here. Drag steps to reorder.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{F({tone:"fuchsia",msg:"AI: generating flow\u2026"});var le=ri(d,[])||[],O=window.__FOF&&window.__FOF.AI&&window.__FOF.AI.generateYogaFlow?window.__FOF.AI.generateYogaFlow({intensity:String((Re==null?void 0:Re.intensity)||"Gentle").toUpperCase(),durationMin:Number((Re==null?void 0:Re.durationMin)||20)},le):null,qe=O&&O.steps?O.steps:Array.isArray(O)?O:[];qe&&qe.length?(Me(Pt=>({...Pt||{},steps:qe})),F({tone:"fuchsia",msg:"AI: Flow generated."})):F({tone:"red",msg:"AI: no steps generated (check Asanas library)."})}catch(le){console.error("AI generateYogaFlow failed",le),F({tone:"red",msg:"AI failed: "+(le&&le.message?le.message:"unknown error")})}},className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"AI Generate flow"),React.createElement("button",{type:"button",onClick:_t,className:"px-3 py-2 rounded-sm border border-white/12 bg-white/5 hover:bg-white/10 text-[11px] font-mono uppercase tracking-widest text-white/80"},"+ Rest block"),React.createElement("button",{type:"button",onClick:Ce,className:"px-3 py-2 rounded-sm border border-fuchsia-400/25 bg-fuchsia-500/10 hover:bg-fuchsia-500/15 text-[11px] font-mono uppercase tracking-widest text-fuchsia-100"},"Save Flow"))),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/3 p-3 min-h-[260px]",onDragOver:le=>le.preventDefault(),onDrop:le=>te(le,null)},(Re.steps||[]).length===0?React.createElement("div",{className:"p-6 text-center text-white/55 text-[12px]"},"Drop poses here to build your flow. Add rest blocks as needed."):React.createElement("div",{className:"space-y-2"},(Re.steps||[]).map((le,O)=>React.createElement("div",{key:O,draggable:!0,onDragStart:qe=>I(qe,O),onDragOver:qe=>qe.preventDefault(),onDrop:qe=>te(qe,O),className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},le.kind==="REST"?"Rest":le.poseName||"Pose"),React.createElement("span",{className:"px-2 py-0.5 rounded-full border text-[10px] font-mono uppercase tracking-widest "+(le.kind==="REST"?"border-white/12 bg-white/5 text-white/70":"border-fuchsia-400/20 bg-fuchsia-500/10 text-fuchsia-100")},le.kind==="REST"?"REST":"POSE")),React.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Time (sec)"),React.createElement("input",{value:Number(le.seconds||0),onChange:qe=>ye(O,{seconds:Number(qe.target.value||0)}),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90"})),le.kind!=="REST"?React.createElement("div",null,React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},"Rest after (sec)"),React.createElement("input",{value:Number(le.restAfter||0),onChange:qe=>ye(O,{restAfter:Number(qe.target.value||0)}),className:"mt-1 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/90"})):React.createElement("div",{className:"hidden md:block"}),React.createElement("div",{className:"flex items-end justify-end"},React.createElement("button",{type:"button",onClick:()=>C(O),className:"px-2.5 py-2 rounded-sm border border-rose-400/25 bg-rose-500/10 hover:bg-rose-500/15 text-[10px] font-mono uppercase tracking-widest text-rose-100"},"Remove")))),React.createElement("div",{className:"shrink-0 text-[10px] font-mono uppercase tracking-widest text-white/35"},"Drag"))))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Tags"),React.createElement("input",{value:Re.tags,onChange:le=>Me(O=>({...O,tags:le.target.value})),placeholder:"mobility, morning, hips\u2026",className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90 placeholder:text-white/35"})),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3"},React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/50"},"Notes"),React.createElement("input",{value:Re.notes,onChange:le=>Me(O=>({...O,notes:le.target.value})),placeholder:"Optional coaching notes\u2026",className:"mt-2 w-full px-3 py-2 rounded-sm border border-white/12 bg-black/30 text-[13px] text-white/90 placeholder:text-white/35"}))),React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/55"},"Saved flows also appear in ",React.createElement("span",{className:"text-white/80 font-semibold"},"Yoga & Wellness Engine \u2192 Flows"),".")):React.createElement("div",{className:"p-8 rounded-2xl border border-white/10 bg-black/20 text-center text-white/60"},"Select a flow or create a new one.")),React.createElement("div",{className:"lg:col-span-3 rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-widest text-white/70"},"Pose library"),React.createElement("div",{className:"mt-1 text-[12px] text-white/60"},"Drag poses \u2192 sequence")),React.createElement("div",{className:"text-[10px] font-mono uppercase tracking-widest text-white/45"},Jt.length," poses")),React.createElement("div",{className:"mt-3 relative"},React.createElement(_,{name:"Search",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/45"}),React.createElement("input",{value:oe,onChange:le=>ke(le.target.value),placeholder:"Search poses\u2026",className:"pl-9 pr-3 py-2 w-full rounded-sm border border-white/12 bg-black/30 text-[12px] text-white/85 placeholder:text-white/35"})),React.createElement("div",{className:"mt-3 space-y-2 max-h-[600px] overflow-auto trainer-scroll pr-1"},Jt.map(le=>React.createElement("div",{key:le.id,draggable:!0,onDragStart:O=>P(O,le.id),className:"rounded-xl border border-white/10 bg-black/20 p-3 cursor-grab active:cursor-grabbing",title:"Drag into the sequence"},React.createElement("div",{className:"text-[12px] font-semibold text-white truncate"},le.name||"Pose"),React.createElement("div",{className:"mt-1 text-[11px] text-white/50 truncate"},le.category||"\u2014"," \u2022 ",le.duration||"30s"),React.createElement("div",{className:"mt-2 text-[10px] font-mono uppercase tracking-widest text-white/40"},String(le.tags||"").slice(0,40)))),Jt.length===0?React.createElement("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3 text-[12px] text-white/55"},"No poses found."):null),React.createElement("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/20 p-3 text-[11px] text-white/55"},"Pose content is managed in ",React.createElement("span",{className:"text-white/80 font-semibold"},"Yoga & Wellness Engine \u2192 Asanas"),"."))),React.createElement(Vi,{toast:f,onClear:()=>F(null)})))};return React.createElement("div",{className:"relative flex h-screen bg-zinc-900 text-zinc-100 font-sans selection:bg-yellow-400 selection:text-black overflow-hidden transition-colors duration-500"},xa&&di&&React.createElement("div",{onClick:()=>Ua(!1),className:"fixed inset-0 overflow-y-auto z-[70] bg-black/60"}),React.createElement(_l,{mobile:xa,open:!xa||di,onClose:()=>Ua(!1),sidebarExpanded:sa,setSidebarExpanded:vt,view:S,clientRecords:Oi,onSelectClient:o=>{try{zt(o),u("CLIENT_ACTION_MODE")}catch(d){}},goView:He,goBusinessHub:la,copyMagicLink:cn,openInfo:ta,logout:et}),React.createElement("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative"},React.createElement(gs,null),!(S==="HUB"||S==="MAIN_HUB")&&React.createElement(Do,null),React.createElement("div",{className:"flex-1 p-6 overflow-hidden relative"},React.createElement("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(to right, #3f3f46 1px, transparent 1px), linear-gradient(to bottom, #3f3f46 1px, transparent 1px)",backgroundSize:"40px 40px"}}),React.createElement("div",{className:"relative z-10 h-full overflow-y-auto trainer-scroll pr-2"},At==="TRAINER"?(()=>{switch(S){case"HUB":case"MAIN_HUB":return React.createElement(zl,{hubDensity:ut,hubPersonal:ht});case"DASHBOARD":case"DASHBOARD_MODE":return React.createElement(sr,{hubDensity:ut,hubPersonal:ht,go:u});case"INBOX":return React.createElement(lr,null);case"SPECIALIST_TRIAGE":return React.createElement("div",{className:"w-full h-full flex flex-col"},React.createElement("div",{className:"px-4 py-3 border-b border-white/10 bg-fuchsia-500/10"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"mt-0.5"},React.createElement(_,{name:"Sparkles",size:18,className:"text-fuchsia-300"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-bold text-fuchsia-100"},"Specialist AI Triage"),React.createElement("div",{className:"mt-0.5 text-[11px] text-fuchsia-50/80 leading-relaxed"},"Role: ",React.createElement("span",{className:"font-mono px-1.5 py-0.5 rounded bg-white/10 border border-white/10"},String(fe||"SPECIALIST")),". Specialist triage is in progress \u2014 we're safely showing the Trainer triage queue until the specialist logic is shipped."),React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("button",{type:"button",onClick:()=>{try{u("DAILY_HUB")}catch(o){}},className:"px-3 py-1.5 rounded-lg text-[11px] border border-white/15 bg-white/10 hover:bg-white/15"},"Open Trainer AI Triage"),React.createElement("button",{type:"button",onClick:J,className:"px-3 py-1.5 rounded-lg text-[11px] border border-white/15 bg-white/5 hover:bg-white/10 opacity-80"},"Dismiss banner"))))),React.createElement("div",{className:"flex-1 min-h-0"},Ra()));case"DAILY_HUB":return Ra();case"APP_QUEUE":return React.createElement(AppQueue,null);case"APP_REVIEW":return React.createElement(AppReview,null);case"GHOST":return React.createElement(wr,null);case"ADD_CLIENT":return React.createElement(Ys,{onBack:()=>{try{u("CLIENT_LIST")}catch(o){}},onCreated:o=>{try{jo(d=>{var m=String((o==null?void 0:o.id)||""),E=Array.isArray(d)?d.slice():[];return m&&E.some(g=>String((g==null?void 0:g.id)||"")===m)?E:[o,...E]})}catch(d){}try{zt(o)}catch(d){}try{u("CLIENT_CRM")}catch(d){}}});case"MANUAL_LOG":return React.createElement(ManualLog,null);case"CLIENT_LIST":return React.createElement(Rl,null);case"CLIENT_TAGS":return React.createElement(Yo,{setView:u});case"BULK_ACTIONS":return React.createElement(gn,{setView:u});case"ENGAGEMENT":case"ENGAGEMENT_HOME":return React.createElement(ze,{onOpen:o=>{try{u(o)}catch(d){}}});case"ENGAGEMENT_CAMPAIGNS":return React.createElement(se,{setView:u});case"ENGAGEMENT_REWARDS":return React.createElement(at,{setView:u});case"ENGAGEMENT_COMMUNITY":return React.createElement(Pe,{setView:u});case"ENGAGEMENT_INSIGHTS":return React.createElement(Wt,{setView:u});case"CHALLENGES":return React.createElement(se,{setView:u});case"APPLICATION_DETAIL":return React.createElement(ApplicationDetail,null);case"CLIENT_DETAIL":return React.createElement(lc,null);case"CLIENT_CRM":return React.createElement(Qd,{client:ct,onBack:()=>{try{u("CLIENT_LIST")}catch(o){}},setView:u,onSetSelectedClient:zt});case"CLIENT_ACTION_MODE":return React.createElement(bc,null);case"MAGIC_LINKS":return React.createElement(ol,{clients:Oi||window.__FOF_DEMO_CLIENTS||[],pickedClient:ct,onPickClient:o=>{try{zt==null||zt(o)}catch(d){}}});case"MAGIC_LINK":return React.createElement(ol,{clients:Oi||window.__FOF_DEMO_CLIENTS||[],pickedClient:ct,onPickClient:o=>{try{zt==null||zt(o)}catch(d){}}});case"MAGIC_LOGIN":return React.createElement(zr,{token:$,onGoTrainer:()=>{try{u("CLIENT_LIST"),window.location.hash="#/hub"}catch(o){}}});case"PLAN_INSTANCE_PREVIEW":return React.createElement(PlanInstancePreview,null);case"PLAN_HOME":return React.createElement(wn,{setView:u});case"PLAN_ASSIGN":return React.createElement(mc,null);case"PLAN_AI_GENERATOR":return React.createElement(pc,{setView:u});case"PLAN_BUILDER":return React.createElement(cc,null);case"EXERCISE_LIBRARY":return React.createElement(uc,null);case"CONTENT_LIBRARY":return React.createElement(Z,{setView:u});case"NUTRITION_PLAN_BUILDER":return React.createElement(ys,{setView:u});case"YOGA_FLOW_BUILDER":return React.createElement(Ps,{setView:u});case"NUTRITION_ENGINE":return React.createElement(Zt,{setView:u});case"YOGA_WELLNESS_ENGINE":return React.createElement(Ki,{setView:u});case"BUSINESS_SETUP_WIZARD":return React.createElement(oa,{initialRole:"TRAINER",onDone:()=>{try{window.__FOF_ONB3A&&window.__FOF_ONB3A.set&&window.__FOF_ONB3A.set({firstLoginDone:!0,businessWizardDone:!0,lastStep:"BSW_DONE"}),u("T_SETUP_TASKS")}catch(o){try{u("BUSINESS_HUB")}catch(d){}}},onBack:()=>{try{ha()}catch(o){}}});case"T_SETUP_TASKS":return React.createElement("div",{className:"p-4 space-y-4"},React.createElement("div",{className:"rounded-2xl p-4 bg-white/5 border border-white/10"},React.createElement("div",{className:"text-lg font-semibold"},"First time setup"),React.createElement("div",{className:"text-sm opacity-80 mt-1"},"Choose one to get started. You can skip and do this later.")),React.createElement("button",{className:"w-full rounded-2xl p-4 bg-white/10 hover:bg-white/15 border border-white/10 text-left",onClick:()=>{try{window.__FOF_ONB3A&&window.__FOF_ONB3A.set&&window.__FOF_ONB3A.set({setupTasksDone:!0,lastStep:"SETUP_BULK_IMPORT"}),u("T_BULK_IMPORT_V2")}catch(o){}}},React.createElement("div",{className:"font-semibold"},"Bulk import clients (CSV)"),React.createElement("div",{className:"text-sm opacity-80"},"Upload a CSV and review before importing.")),React.createElement("button",{className:"w-full rounded-2xl p-4 bg-white/10 hover:bg-white/15 border border-white/10 text-left",onClick:()=>{try{window.__FOF_ONB3A&&window.__FOF_ONB3A.set&&window.__FOF_ONB3A.set({setupTasksDone:!0,lastStep:"SETUP_ADD_CLIENT"}),typeof u=="function"&&u("ADD_CLIENT")}catch(o){try{u("CLIENTS")}catch(d){}}}},React.createElement("div",{className:"font-semibold"},"Add your first client"),React.createElement("div",{className:"text-sm opacity-80"},"Create a client manually.")),React.createElement("button",{className:"w-full rounded-2xl p-4 bg-white/10 hover:bg-white/15 border border-white/10 text-left",onClick:()=>{try{window.__FOF_ONB3A&&window.__FOF_ONB3A.set&&window.__FOF_ONB3A.set({setupTasksDone:!0,lastStep:"SETUP_SKIPPED"}),u("CLIENTS")}catch(o){try{u("BUSINESS_HUB")}catch(d){}}}},React.createElement("div",{className:"font-semibold"},"Skip for now"),React.createElement("div",{className:"text-sm opacity-80"},"Go to your dashboard.")));case"T_BULK_IMPORT_V2":return React.createElement(Gs,{onDone:()=>{try{window.__FOF_ONB3A&&window.__FOF_ONB3A.set&&window.__FOF_ONB3A.set({lastStep:"BULK_IMPORT_DONE"}),u("CLIENTS")}catch(o){try{u("BUSINESS_HUB")}catch(d){}}},onBack:()=>{try{u("T_SETUP_TASKS")}catch(o){}}});case"EDUCATION_INTEGRATIONS_HUB":return React.createElement(Ha,{onBack:()=>{try{u("BUSINESS_HUB"),setBhPage(BH_PAGES.OVERVIEW),setBhPageMeta(null)}catch(o){}}});case"WHITE_LABEL_HUB":return React.createElement(qa,{onBack:()=>{try{u("BUSINESS_HUB"),setBhPage(BH_PAGES.OVERVIEW),setBhPageMeta(null)}catch(o){}}});case"SETTINGS":return React.createElement(or,{onBack:K,hubDensity:ut,setHubDensity:ot,hubPersonal:ht,setHubPersonal:ba});case"READINESS_DETAIL":return React.createElement(Qe,null);case"ASSESSMENT_BUILDER":return React.createElement(AssessmentBuilder,null);case"MARKETPLACE":return React.createElement(fr,null);case"AUTOMATION":return React.createElement(vl,{label:"Automations",onGo:()=>la({section:"MA-ENTRY"})});case"CALENDAR":return React.createElement(dc,{selectedClient:ct,setView:u});case"SESSION_RECON":return React.createElement(nt,{clientRecords:Oi,selectedClient:ct,setSelectedClient:zt});case"BUSINESS_HUB":return React.createElement(Fd,{route:aa,onRoute:Mt,onOpenAutomations:()=>la({section:"MA-ENTRY"})});case"P1_DATE_RANGE":return React.createElement(al,null);case"P1_EXPORT":return React.createElement(wd,{payload:Q});case"P1_TAX_REPORTING":return React.createElement(fd,null);case"P1_PAYOUT_TRIGGER":return React.createElement(Md,null);case"P1_INSIGHTS_DASH":return React.createElement(gi,null);case"FINANCE_HUB":return React.createElement(Rt,{key:"fh_"+Nt,onHome:K});case"REPORTS":return React.createElement(Ud,{clientRecords:Oi,selectedClient:ct});case"REVIEWS":return React.createElement(Ur,{title:"Review Management",description:"ReviewManagementDashboard_RMD_Entry \u2013 manage public and in-app reviews."});case"REWARDS":return React.createElement(at,{setView:u});case"MORE_TOOLS":return React.createElement("div",{className:"flex-1 overflow-y-auto trainer-scroll p-6"},React.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-bold text-white font-mono uppercase tracking-widest"},"More tools"),React.createElement("p",{className:"text-xs text-zinc-400"},"Additional utilities and experimental modules inside your trainer workspace."))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},React.createElement("button",{type:"button",onClick:()=>ta("Info"," this would open the Bulk_Import_Wizard / DataImportsModule so you can import clients later from the trainer dashboard."),className:"text-left bg-titanium-800 border border-titanium-700 hover:border-emerald-400/80 hover:bg-titanium-700 transition-colors rounded-sm p-4 flex flex-col justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-9 h-9 rounded-sm bg-emerald-500/15 flex items-center justify-center"},React.createElement(_,{name:"FileSpreadsheet",size:18,className:"text-emerald-300"})),React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Bulk Import & Data Migration"),React.createElement("div",{className:"text-[11px] text-zinc-400"},"Upload CSVs and map fields to bring in existing clients and history."))),React.createElement("div",{className:"text-[11px] text-emerald-300 font-mono uppercase"},"Uses Bulk_Import_Wizard \u2022 Post_Import_Processing")),React.createElement("button",{type:"button",onClick:()=>{try{u("BUSINESS_SETUP_WIZARD")}catch(o){}},className:"text-left bg-titanium-800 border border-titanium-700 hover:border-emerald-400/80 hover:bg-titanium-700 transition-colors rounded-sm p-4 flex flex-col justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-9 h-9 rounded-sm bg-emerald-500/15 flex items-center justify-center"},React.createElement(_,{name:"Store",size:18,className:"text-emerald-300"})),React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Business Setup Wizard"),React.createElement("div",{className:"text-[11px] text-zinc-400"},"Brand your space, connect payments, list your first service, and activate your microsite."))),React.createElement("div",{className:"text-[11px] text-emerald-300 font-mono uppercase"},"Setup \u2022 Payments \u2022 Microsite \u2022 Automation")),React.createElement("button",{type:"button",onClick:()=>{try{u("CONTENT_LIBRARY")}catch(o){}},className:"text-left bg-titanium-800 border border-titanium-700 hover:border-sky-400/80 hover:bg-titanium-700 transition-colors rounded-sm p-4"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"w-9 h-9 rounded-sm bg-sky-500/15 flex items-center justify-center"},React.createElement(_,{name:"Library",size:18,className:"text-sky-300"})),React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Master Content Library"),React.createElement("div",{className:"text-[11px] text-zinc-400"},"Exercises \u2022 Workouts \u2022 Programs \u2022 Assessments \u2022 Nutrition templates (governance + versions)."))),React.createElement("div",{className:"text-[11px] text-sky-200 font-mono uppercase"},"Phase 3.2 \u2022 search + filters \u2022 favorites \u2022 recent")),React.createElement("button",{type:"button",onClick:()=>{try{la({section:"MA-ENTRY"})}catch(o){}},className:"text-left bg-titanium-800 border border-titanium-700 hover:border-orange-400/70 hover:bg-titanium-700 transition-colors rounded-sm p-4"},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("div",{className:"w-9 h-9 rounded-sm bg-purple-500/15 flex items-center justify-center"},React.createElement(_,{name:"Sparkles",size:18,className:"text-purple-300"})),React.createElement("div",null,React.createElement("div",{className:"text-sm font-semibold text-white"},"Automation Lab"),React.createElement("div",{className:"text-[11px] text-zinc-400"},"Space for experimental rules, triggers and AI-driven workflows."))),React.createElement("div",{className:"text-[11px] text-zinc-500"},"Shortcut into Business Hub \u2192 Marketing & Automation (single engine).")))));case"ADMIN_PORTAL":return React.createElement(ic,{onBack:ha,onHome:K,canGoBack:Ca});case"AI_HUB":return React.createElement(jl,{selectedClient:ct,clientRecords:Oi,onSelectClient:o=>{try{zt(o)}catch(d){}}});case"HELP":return React.createElement(Ur,{title:"Support Desk",description:"TD_Help \u2013 internal support / docs / chat with ops."});case"CLIENT_APP_PREVIEW":return React.createElement("div",{className:"h-full w-full bg-midnight-950/90"},React.createElement(Od.VitaminClientApp,{onLogout:()=>u("HUB"),initialClientMode:"LINKED",initialDashboardType:"LINKED",initialEntryStep:"PLAN",initialStartMode:"LINKED",initialIndependentTier:"FREE"}));default:return React.createElement(Ur,{title:"Coming soon: "+S,description:"This route isn't wired yet in the prototype. Use Home to return to Main Hub."})}})():React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"mb-3 flex items-center justify-between"},React.createElement("div",null,React.createElement("h3",{className:"text-sm font-semibold text-white"},"Client preview"),React.createElement("p",{className:"text-xs text-zinc-400"},"You\u2019re previewing the independent client dashboard inside your trainer workspace.")),React.createElement("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-indigo-500/10 text-indigo-300 border border-indigo-500/40"},"Read-only preview")),React.createElement("div",{className:"border border-zinc-800 rounded-xl overflow-hidden bg-zinc-950"},React.createElement(Od.VitaminClientApp,{initialClientMode:"INDEPENDENT",initialDashboardType:"INDEPENDENT",initialEntryStep:"PLAN",initialStartMode:null,initialIndependentTier:"FREE",onLogout:()=>{}})))))),React.createElement(Dr,null),React.createElement(ir,null),React.createElement(rr,null),React.createElement(mr,null),xl&&React.createElement("div",{className:"fixed inset-0 overflow-y-auto bg-black/70 flex items-center justify-center z-50"},React.createElement("div",{className:"bg-titanium-900 border border-orange-500 rounded-sm p-6 w-full max-w-md"},React.createElement("h3",{className:"text-sm font-bold text-white uppercase mb-3"},"Unlock Bodywork Tools (SMT_Upsell)"),React.createElement("p",{className:"text-xs text-zinc-300 mb-4"},"This feature requires SMT/Pro add-on. Go to Finance & Admin to upgrade."),React.createElement("div",{className:"flex justify-end gap-2"},React.createElement("button",{onClick:()=>qr(!1),className:"px-3 py-2 text-[11px] uppercase text-zinc-400 bg-titanium-950 border border-titanium-700 rounded-sm hover:text-white"},"Close"),React.createElement("button",{onClick:()=>{qr(!1),Sn(!0),u("SOAP_ENTRY")},className:"px-3 py-2 text-[11px] uppercase bg-yellow-400 text-black rounded-sm font-bold"},"Simulate Upgrade & Continue")))))},jn=({step:i,onNext:s,mlInvite:x,setMlInvite:S,mlValidation:u,setMlValidation:$,copyMagicLink:tt,...ue})=>{var[Ie,fe]=Ai(""),[B,X]=Ai(""),[ne,W]=Ai(""),[J,z]=Ai(""),[H,Ht]=Ai(null),Nt=(w,L)=>S(ut=>({...ut,[w]:L})),U=()=>{var w=((x==null?void 0:x.email)||"").trim(),L=((x==null?void 0:x.code)||"").trim(),ut=((x==null?void 0:x.link)||"").trim(),ht=(((x==null?void 0:x.mode)||"code")==="link"?ut:L).toUpperCase();if(!w||!ht){$(Je=>({...Je,status:"INVALID",scenario:null,message:"Enter the invited email and your invite link or code."})),s("INPUT");return}if(ht.includes("EXP")||ht.includes("EXPIRED")){$(Je=>({...Je,status:"EXPIRED",scenario:null,message:"This invitation has expired. Please request a new one from your coach or clinic."})),s("INPUT");return}if(ht.includes("BAD")||ht.includes("INVALID")){$(Je=>({...Je,status:"INVALID",scenario:null,message:"We could not verify this invitation. Double-check the code/link and try again."})),s("INPUT");return}var ba=w.toLowerCase();var et="NEEDS_SETUP";(ba.includes("done")||ba.includes("ready")||ba.includes("setup"))&&(et="ALREADY_SETUP"),(ba.includes("activate")||ba.includes("newpass")||ba.includes("firstlogin"))&&(et="NEEDS_ACTIVATION");var At=et==="ALREADY_SETUP"?"Current Active Program":"Flow Starter Plan (Coach Assigned)",ma=et==="ALREADY_SETUP"?"Resuming your current plan where you left off.":"Week 1 starts simple so you build momentum fast \u2014 then we progress.";$(Je=>({...Je,status:"OK",scenario:et,planName:At,planNote:ma,message:et==="ALREADY_SETUP"?"Welcome back \u2014 taking you to your dashboard.":et==="NEEDS_ACTIVATION"?"Invitation verified. Create a password to activate your account.":"Invitation verified. Let\u2019s finish your dashboard setup."})),s("ML_Validate")},Q=()=>{if(W(""),!Ie||Ie.length<8){W("Password must be at least 8 characters.");return}if(Ie!==B){W("Passwords do not match.");return}s("ML_ROUTE")};return React.useEffect(()=>{try{var w=String(window.location.href||""),L=new URL(w),ut=L.searchParams,ot=(L.hash||"").replace(/^#/,""),ht=(ut.get("invite")||ut.get("code")||ut.get("token")||"").trim()||(ot.includes("invite=")?ot.split("invite=")[1]:"")||(ot.includes("code=")?ot.split("code=")[1]:"")||(ot.includes("token=")?ot.split("token=")[1]:""),ba=(ut.get("link")||ut.get("magic")||"").trim(),et=(ut.get("email")||"").trim();if(u!=null&&u.status)return;et&&S(At=>({...At,email:et})),(ht||ba)&&(S(At=>({...At,mode:ba?"link":"code",code:ht?String(ht).trim():At.code,link:ba?String(ba).trim():At.link})),Promise.resolve().then(()=>U()))}catch(w){}},[]),i==="INPUT"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand/15 border border-brand/30 mb-3"},React.createElement(_,{name:"Link2",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Claim your invitation"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"If you were invited by a coach, gym, or clinic, verify your invite to set up your FlowOFIT dashboard.")),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Email"),React.createElement("input",{value:(x==null?void 0:x.email)||"",onChange:w=>Nt("email",w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"you@domain.com",inputMode:"email",autoComplete:"email"})),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Nt("mode","code"),className:"flex-1 py-2 rounded-xl text-xs font-semibold border "+((x==null?void 0:x.mode)!=="link"?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},"Invite code"),React.createElement("button",{type:"button",onClick:()=>Nt("mode","link"),className:"flex-1 py-2 rounded-xl text-xs font-semibold border "+((x==null?void 0:x.mode)==="link"?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},"Invite link")),(x==null?void 0:x.mode)==="link"?React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Invite link"),React.createElement("input",{value:(x==null?void 0:x.link)||"",onChange:w=>Nt("link",w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Paste the link you received",autoComplete:"off"})):React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Invite code"),React.createElement("input",{value:(x==null?void 0:x.code)||"",onChange:w=>Nt("code",w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-center tracking-widest uppercase rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"E.g. A1B2C3",autoComplete:"one-time-code"})),u!=null&&u.status&&u.status!=="OK"&&(u!=null&&u.message)?React.createElement("div",{className:"rounded-2xl border border-red-500/40 bg-red-950/40 px-3 py-2.5 text-[11px] leading-relaxed text-red-100"},ci(u.message)):null,React.createElement("button",{onClick:U,className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Verify invite"),React.createElement("div",{className:"text-center text-[11px] text-slate-500 pt-2"},"Invites are typically sent by your coach, gym, or physiotherapy clinic."),React.createElement("div",{className:"mt-4 border-t border-midnight-700 pt-4 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>ue.onBack&&ue.onBack(),className:"text-xs text-slate-400 hover:text-white underline"},"Back to sign in"),React.createElement("button",{type:"button",onClick:tt,className:"text-xs text-slate-400 hover:text-white underline"},"Copy demo invite")))))):i==="ML_SET_PASSWORD"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand-green/15 border border-brand-green/30 mb-3"},React.createElement(_,{name:"KeyRound",size:22,className:"text-brand-green"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Create your password"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"This secures your account and lets you access your invited dashboard anytime.")),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"New password"),React.createElement("input",{type:"password",value:Ie,onChange:w=>fe(w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Minimum 8 characters",autoComplete:"new-password"})),React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Confirm password"),React.createElement("input",{type:"password",value:B,onChange:w=>X(w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Re-enter password",autoComplete:"new-password"})),ne?React.createElement("div",{className:"rounded-2xl border border-red-500/40 bg-red-950/40 px-3 py-2.5 text-[11px] leading-relaxed text-red-100"},ci(ne)):null,React.createElement("button",{onClick:Q,className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("div",{className:"text-center text-[11px] text-slate-500"},"By continuing, you confirm you\u2019re setting up the account linked to this invitation."))))):i==="ML_ROUTE"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand/15 border border-brand/30 mb-3"},React.createElement(_,{name:"BadgeCheck",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"You\u2019re in"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},u!=null&&u.orgName?"Your invite from "+u.orgName+" is verified.":"Your invite is verified.")),React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-900/50 px-4 py-3 text-sm text-slate-200 mb-4"},"This invite links you to your coach / clinic / gym. Next we\u2019ll confirm a few preferences so your dashboard is ready on day one."),React.createElement("div",{className:"space-y-3"},React.createElement("button",{onClick:()=>s("ML_PRO_COUNT"),className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>s("INPUT"),className:"w-full py-3 bg-white/5 border border-white/10 text-white font-semibold rounded-xl hover:bg-white/10 transition-colors"},"Use a different invite"))))):i==="ML_PROFILE"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand-purple/15 border border-brand-purple/30 mb-3"},React.createElement(_,{name:"UserRound",size:22,className:"text-brand-purple"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Finish your profile"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"A few details help your coach tailor your plan and dashboard.")),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Display name"),React.createElement("input",{value:J,onChange:w=>z(w.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Your name",autoComplete:"name"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-slate-400 uppercase tracking-wide mb-2"},"Primary focus"),React.createElement("div",{className:"grid grid-cols-4 gap-2"},[{id:"PERFORMANCE",label:"Performance",icon:"Zap"},{id:"RECOVERY",label:"Recovery",icon:"HeartPulse"},{id:"HABITS",label:"Habits",icon:"Leaf"}].map(w=>React.createElement("button",{key:w.id,type:"button",onClick:()=>Ht(w.id),className:"p-3 rounded-2xl border text-xs flex flex-col items-center justify-center gap-1 transition-colors "+(H===w.id?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},React.createElement(_,{name:w.icon,size:18,className:H===w.id?"text-brand":"text-slate-500"}),React.createElement("span",{className:"font-semibold"},ci(w.label)))))),React.createElement("button",{onClick:()=>s("ML_PRO_COUNT"),className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors disabled:opacity-40",disabled:!J||!H},"Continue setup"))))):i==="ML_STATUS"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl text-center w-full max-w-md"},React.createElement("h2",{className:"text-xl font-bold mb-6 text-white"},"Continue with your invite"),React.createElement("div",{className:"space-y-3"},React.createElement("button",{onClick:()=>s("ML_LinkToCoach"),className:"w-full py-3 border border-midnight-700 rounded-xl hover:bg-midnight-800 text-white transition-colors"},"I already have an account"),React.createElement("button",{onClick:()=>s("ML_Signup"),className:"w-full py-3 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Create a new account"))))):i==="ML_Signup"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl text-center w-full max-w-md"},React.createElement("h2",{className:"text-xl font-bold mb-2 text-white"},"Create your account"),React.createElement("p",{className:"text-sm text-slate-400 mb-6"},"Set your password to continue and link your invite."),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl mb-3 text-white focus:outline-none focus:border-brand",placeholder:"Set Password",type:"password"}),React.createElement("button",{onClick:()=>s("ML_LinkToCoach"),className:"w-full py-3 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Create & Continue")))):i==="ML_PRO_COUNT"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-center gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand/20 border border-brand/40 flex items-center justify-center"},React.createElement(_,{name:"Users",size:20,className:"text-brand"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-slate-400"},"You're invited"),React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},(u==null?void 0:u.orgName)||"Your Coach / Studio")),React.createElement("div",{className:"px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/40 text-emerald-200 text-[11px] font-semibold"},"Verified")),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-midnight-700 p-4 mb-6"},React.createElement("div",{className:"text-sm font-semibold text-slate-100 mb-1"},"Finish setup"),React.createElement("div",{className:"text-xs text-slate-400"},"We\u2019ll personalize your dashboard, sync your data (optional), and set the right privacy controls.")),React.createElement("button",{onClick:()=>s("ML_WEARABLE"),className:"w-full py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>s("LINKED_DASH"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Skip setup for now"),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"You can update these settings any time from Settings.")))):i==="ML_WEARABLE"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-start gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand-orange/15 border border-brand-orange/40 flex items-center justify-center"},React.createElement(_,{name:"Watch",size:20,className:"text-brand-orange"})),React.createElement("div",null,React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},"Connect a wearable"),React.createElement("div",{className:"text-xs text-slate-400"},"Optional \u2014 unlock readiness, recovery insights, and automatic plan adjustments."))),React.createElement("div",{className:"grid gap-3 mb-6"},[{id:"APPLE",label:"Apple Health",icon:"Smartphone"},{id:"GOOGLE",label:"Google Fit",icon:"Activity"},{id:"GARMIN",label:"Garmin",icon:"Map"},{id:"FITBIT",label:"Fitbit",icon:"HeartPulse"}].map(w=>React.createElement("button",{key:w.id,type:"button",onClick:()=>s("ML_DATASHARE"),className:"w-full rounded-2xl bg-midnight-950 border border-midnight-700 p-4 flex items-center justify-between hover:border-brand/50 hover:bg-midnight-900 transition-colors"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(_,{name:w.icon,size:18,className:"text-slate-200"})),React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-sm font-semibold text-white"},ci(w.label)),React.createElement("div",{className:"text-[11px] text-slate-400"},"Connect in seconds"))),React.createElement(_,{name:"ChevronRight",size:18,className:"text-slate-400"})))),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{type:"button",onClick:()=>s("ML_DATASHARE"),className:"flex-1 py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Connect later"),React.createElement("button",{type:"button",onClick:()=>s("ML_DATASHARE"),className:"px-4 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Skip")),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"We only request the minimum permissions needed. You control what gets shared.")))):i==="ML_DATASHARE"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-start gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand-purple/15 border border-brand-purple/40 flex items-center justify-center"},React.createElement(_,{name:"Shield",size:20,className:"text-brand-purple"})),React.createElement("div",null,React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},"Privacy & sharing"),React.createElement("div",{className:"text-xs text-slate-400"},"Choose what your coach can access. You can change this any time."))),React.createElement("div",{className:"space-y-3 mb-6"},[{label:"Training & check-ins",desc:"Sessions, adherence, feedback and check-in notes."},{label:"Health signals",desc:"Steps, HR, sleep summaries and recovery trends (if available)."},{label:"Progress insights",desc:"Body metrics, photos and key milestones you choose to log."}].map((w,L)=>React.createElement("div",{key:L,className:"rounded-2xl bg-midnight-950 border border-midnight-700 p-4 flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 w-5 h-5 rounded-md bg-emerald-500/15 border border-emerald-500/40 flex items-center justify-center"},React.createElement(_,{name:"Check",size:14,className:"text-emerald-200"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-sm font-semibold text-slate-100"},ci(w.label)),React.createElement("div",{className:"text-[11px] text-slate-400"},ci(w.desc)))))),React.createElement("button",{onClick:()=>s("ML_GAMIFY"),className:"w-full py-3 rounded-xl bg-brand-green text-white font-bold hover:bg-emerald-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>s("ML_GAMIFY"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Keep everything private for now"),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"You can update sharing permissions any time from Settings.")))):i==="ML_GAMIFY"?React.createElement(ns,{...ue},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-center"},React.createElement("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-brand/15 border border-brand/40 mb-4"},React.createElement(_,{name:"Sparkles",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold mb-2 text-white"},"You're all set"),React.createElement("p",{className:"text-sm text-slate-400 mb-6"},"Your dashboard is ready. We\u2019ll sync updates from ",(u==null?void 0:u.orgName)||"your coach"," automatically."),React.createElement("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-500/10 border border-emerald-400/30"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-emerald-400/15 border border-emerald-400/30 flex items-center justify-center text-emerald-300"},React.createElement(_,{name:"BadgeCheck",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-emerald-300"},"Assigned plan"),React.createElement("div",{className:"text-sm font-extrabold text-white mt-1"},(u==null?void 0:u.planName)||"Flow Starter Plan"),React.createElement("div",{className:"text-[12px] text-slate-300 mt-1"},u!=null&&u.coachName?"Coach: "+u.coachName+". ":"",(u==null?void 0:u.planNote)||"We\u2019ll adapt this plan using your check-ins and wearable data.")))),React.createElement("button",{onClick:()=>s("LINKED_DASH"),className:"w-full py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Go to dashboard"),React.createElement("button",{type:"button",onClick:()=>s("LINKED_DASH"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"View onboarding checklist")))):React.createElement(Cs,{label:"PROCESSING...",onComplete:()=>s("NEXT")})},In=({onLogout:i,initialClientMode:s="SELECT",initialDashboardType:x="INDEPENDENT",initialEntryStep:S="MODE",initialStartMode:u=null,initialIndependentTier:$="FREE",coachContext:tt=null})=>{var ue=()=>s==="LINKED"?"LINKED":s==="INDEPENDENT"?"INDEPENDENT":x==="LINKED"||x==="HYBRID"?"LINKED":"INDEPENDENT",[Ie,fe]=React.useState(ue()),[B,X]=React.useState(S==="PLAN"?"PLAN":"HOME"),[ne,W]=React.useState($||"FREE"),[J,z]=React.useState(s==="SELECT"&&S==="MODE"),[H,Ht]=React.useState(()=>x==="YOGA"?"YOGA":x==="HYBRID"?"HYBRID":"FITNESS"),[Nt,U]=React.useState(()=>62),[Q,w]=React.useState(()=>48),[L,ut]=React.useState(()=>71),ot=Math.max(0,Math.min(100,Number(Nt)||0)),ht=ui=>ui>=75?"HIGH":ui>=50?"MID":"LOW",ba=(ui,vi)=>{if(vi==null||Number.isNaN(vi))return"STABLE";var hi=ui-vi;return hi>=5?"UP":hi<=-5?"DOWN":"STABLE"},et=(ui,vi)=>{var hi=String(ui||"").toUpperCase(),Bi=(Pa=>Pa==="LOW"?"EASY":Pa==="MID"?"MODERATE":Pa==="HIGH"?"HARD":Pa)(hi||"MODERATE");return vi==="HIGH"?Bi:vi==="MID"?Bi==="HARD"?"MODERATE":Bi:Bi==="HARD"?"MODERATE":"EASY"},At=React.useMemo(()=>"fof_capacity_prev_v1_"+xa,[xa]),ma=React.useMemo(()=>{try{var ui=localStorage.getItem(At);if(ui==null)return null;var vi=Number(ui);return Number.isFinite(vi)?vi:null}catch(ui){return null}},[At]),Je=React.useMemo(()=>ht(ot),[ot]),Oa=React.useMemo(()=>ba(ot,ma),[ot,ma]);React.useEffect(()=>{try{localStorage.setItem(At,String(ot))}catch(ui){}},[At,ot]);var[He,Ca]=React.useState(()=>[{id:"h_water",label:"Hydration",target:"2.5L",done:!1,streak:4},{id:"h_steps",label:"Steps",target:"8k+",done:!0,streak:7},{id:"h_sleep",label:"Sleep",target:"7.5h",done:!1,streak:2},{id:"h_mob",label:"Mobility",target:"10 min",done:!0,streak:5}]),[ha,K]=React.useState("FOR_YOU"),[aa,Mt]=React.useState(()=>{try{return new Set(JSON.parse(localStorage.getItem("fof_saved_library_v1")||"[]"))}catch(ui){return new Set}});React.useEffect(()=>{try{localStorage.setItem("fof_saved_library_v1",JSON.stringify(Array.from(aa)))}catch(ui){}},[aa]);var la=React.useMemo(()=>Ie==="LINKED"?"Coach":ne==="AI"?"AI Coach":"Guidance",[Ie,ne]),xa=React.useMemo(()=>"client:"+Ie+":"+ne+":"+H,[Ie,ne,H]);React.useEffect(()=>{Ie==="LINKED"&&ne!=="FREE"&&W("FREE")},[Ie]),React.useEffect(()=>{try{Bt("dashboard.client.opened",{mode:Ie,tier:ne,focusPillar:H,dashboardType:x,source:"CLIENT_DASH"})}catch(ui){}},[]);var ei=(ui,vi,hi)=>Math.max(vi,Math.min(hi,ui));function di({label:ui,value:vi,tone:hi="brand",onClick:ls}){return React.createElement("button",{type:"button",onClick:Bi=>{try{Bi.preventDefault(),Bi.stopPropagation()}catch(Pa){}ls&&ls(Bi)},className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-[12px] font-semibold backdrop-blur
                `+(hi==="good"?"border-emerald-400/40 bg-emerald-400/10 text-emerald-200":hi==="warn"?"border-amber-400/40 bg-amber-400/10 text-amber-100":"border-sky-400/40 bg-sky-400/10 text-sky-100"),title:ui+" details"},React.createElement("span",{className:"uppercase tracking-widest text-[9px] opacity-80"},ui),React.createElement("span",{className:"text-white font-extrabold"},vi),React.createElement(_,{name:"ChevronRight",size:14,className:"opacity-80"}))}var Ua=({title:ui,subtitle:vi,right:hi,children:ls,className:Bi=""})=>React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl shadow-[0_20px_80px_rgba(0,0,0,0.45)] "+Bi},React.createElement("div",{className:"px-5 pt-5 pb-3 flex items-start justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},ui),vi?React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},vi):null),hi),React.createElement("div",{className:"px-5 pb-5"},ls));var sa=ui=>{try{return localStorage.getItem(ui)||null}catch(vi){return null}},vt=(ui,vi)=>{try{localStorage.setItem(ui,vi)}catch(hi){}},Ge=(ui,vi)=>{var[hi,ls]=React.useState(vi);return React.useEffect(()=>{var Bi=sa(ui);if(Bi)try{var Pa=JSON.parse(Bi);if(!Array.isArray(Pa))return;var Ga=Pa.filter(La=>vi.includes(La)),ca=vi.filter(La=>!Ga.includes(La));ls([...Ga,...ca])}catch(Pa){}},[ui]),React.useEffect(()=>{vt(ui,JSON.stringify(hi))},[ui,hi]),[hi,ls]},$e=({storageKey:ui,tiles:vi,isFree:hi=!1,isLinked:ls=!1})=>{var Bi=React.useMemo(()=>vi.map(ds=>ds.id),[vi]),[Pa,Ga]=Ge(ui,Bi),ca=React.useRef(null),La=React.useMemo(()=>{var ds=new Map(vi.map(Po=>[Po.id,Po])),Xs=Pa.map(Po=>ds.get(Po)).filter(Boolean),Wo=vi.filter(Po=>!Pa.includes(Po.id));return[...Xs,...Wo]},[vi,Pa]),fi=ds=>Xs=>{ca.current=ds;try{Xs.dataTransfer.effectAllowed="move"}catch(Wo){}},ms=ds=>Xs=>{Xs.preventDefault();var Wo=ca.current;!Wo||Wo===ds||Ga(Po=>{var Eo=[...Po],Oi=Eo.indexOf(Wo),jo=Eo.indexOf(ds);return Oi<0||jo<0?Po:(Eo.splice(Oi,1),Eo.splice(jo,0,Wo),Eo)})},ss=()=>()=>{ca.current=null};return React.createElement("div",{className:"space-y-4"},hi&&React.createElement(Ua,{title:"Upgrade to edit your plan",subtitle:"Swap + reschedule + change log unlock in Trial / AI",right:React.createElement(NeonPill,{tone:"amber"},"Locked")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[13px] text-white/80"},"You can view your week, but edits are disabled on the Free tier."),React.createElement("div",{className:"mt-3 flex gap-2"},React.createElement(zt,{tone:"aqua",onClick:()=>ta("Upgrade","In production, this would open your upgrade flow (Trial / AI).")},"Start Trial / Upgrade"),React.createElement("button",{type:"button",className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80",onClick:()=>ta("Why locked?","Swap/reschedule requires readiness + recovery logic and is offered on Trial/AI.")},"Why locked?")))),ls&&React.createElement(Ua,{title:"Requests",subtitle:"Your changes require coach approval",right:React.createElement(NeonPill,{tone:"purple"},"Coach")},React.createElement("div",{className:"space-y-2"},requests&&requests.length>0?requests.slice(0,6).map(ds=>{var Xs,Wo;return React.createElement("div",{key:ds.id,className:"rounded-2xl border border-white/12 bg-white/5 p-3 flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[12px]"},ds.kind," \u2022 ",(Xs=ds.from)==null?void 0:Xs.day," \u2192 ",((Wo=ds.to)==null?void 0:Wo.day)||"TBD"),React.createElement("div",{className:"text-[11px] text-white/70"},ds.status==="PENDING"?"Pending coach approval":ds.status==="APPROVED"?"Approved":"Rejected")),ds.status==="PENDING"&&React.createElement(zt,{tone:"lime",onClick:()=>approveRequest(ds.id)},"Simulate coach approval"))}):React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3 text-[12px] text-white/70"},"No requests yet. Use \u201CAsk coach to approve\u201D inside a session."))),La.map(ds=>React.createElement("div",{key:ds.id,draggable:!0,onDragStart:fi(ds.id),onDragOver:ms(ds.id),onDrop:ss(),className:"cursor-move",title:"Drag to reorder"},ds.node)))},Xa=()=>{var ui=React.useMemo(()=>Ie==="LINKED"?{title:"Next best action",main:"Complete today\u2019s check-in",sub:"Your coach uses this to auto-adjust your plan this week.",cta:"Open check-in",icon:"ClipboardCheck",tone:"violet",onClick:()=>{try{Bt("client.action.open_checkin",{surfaceKey:xa})}catch(vi){}ta("Daily check-in",`Client-facing flow.

In production this opens the check-in experience and emits:
- checkin.opened
- checkin.submitted
- readiness.recomputed (if applicable)`)}}:ne==="AI"?{title:"Next best action",main:"Run an AI plan tune-up",sub:"We\u2019ll update intensity + recovery from your week so far.",cta:"Tune my plan",icon:"Sparkles",tone:"lime",onClick:()=>{try{Bt("client.action.ai_tuneup",{surfaceKey:xa})}catch(vi){}ta("AI tune-up",`AI Coach action (paid / trial).

In production this would:
- compute weekly load + readiness
- suggest adjustments (volume/intensity/recovery)
- allow user confirmation
- emit ai.plan.adjusted`)}}:{title:"Next best action",main:"Pick today\u2019s focus",sub:"Follow the simplest action that moves your goal forward.",cta:"Show options",icon:"Target",tone:"sky",onClick:()=>{try{Bt("client.action.pick_focus",{surfaceKey:xa})}catch(vi){}ta("Today focus options",`For free users, we keep guidance lightweight.

In production:
- show 2\u20133 curated options
- offer upgrade to AI Coach for deeper tuning`)}},[Ie,ne,xa]);return React.createElement(Ua,{title:ui.title,subtitle:ui.sub,right:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"hidden sm:block text-[9px] font-mono text-white/50"},"drag tiles below"),React.createElement("button",{type:"button",onClick:()=>ta("Dashboard personalization",`This dashboard supports card-level drag & drop.

We save your layout per dashboard surface:
- Mode: `+Ie+`
- Tier: `+ne+`
- Focus: `+H),className:"fof-icon-btn p-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10",title:"About layout"},React.createElement(_,{name:"Info",size:16}))),className:"border-white/20"},React.createElement("div",{className:"flex items-start justify-between gap-4"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center border
                            `+(ui.tone==="lime"?"bg-[rgba(16,255,97,0.12)] border-[rgba(16,255,97,0.35)]":ui.tone==="violet"?"bg-[rgba(168,85,255,0.12)] border-[rgba(168,85,255,0.35)]":"bg-[rgba(77,233,255,0.12)] border-[rgba(77,233,255,0.35)]")},React.createElement(_,{name:ui.icon,size:22,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white text-[16px] font-extrabold leading-tight"},ui.main),React.createElement("div",{className:"mt-1 text-white/65 text-[12px] max-w-[520px]"},Ie==="LINKED"?"Fastest way for your coach to keep your plan aligned with your week.":ne==="AI"?"Your AI Coach adapts week-to-week as your data changes.":"Keep it simple. Consistency beats perfection."))),React.createElement("div",{className:"min-w-[160px]"},React.createElement(zt,{tone:ui.tone,onClick:ui.onClick,icon:"ChevronRight"},ui.cta))))},mi=()=>{var ui=(()=>{try{return(new Date().getDay()+6)%7}catch(Ga){return 0}})(),vi=week&&week[ui]?week[ui]:null,hi=vi&&vi.intensity?vi.intensity:vi&&vi.kind==="TRAIN"?"HARD":null,ls=hi?et(hi,Je):null,Bi=hi&&ls?String(ls).toUpperCase()!==String(hi).toUpperCase():!1,Pa=React.useMemo(()=>{var Ga=[{id:"t1",label:"Warm-up (6\u20138 min)",meta:"Mobility + activation",icon:"Flame",tone:"sky"},{id:"t2",label:"Main session",meta:(()=>{var ca=H==="YOGA"?"Yoga (20 min)":"Workout (45 min)";if(!hi)return ca;var La=String(ls||"").toUpperCase(),fi=String(hi||"").toUpperCase();return Bi?ca+" \u2022 "+La+" version (cap "+Je+")":ca+" \u2022 "+fi+" (cap "+Je+")"})(),icon:"Dumbbell",tone:"violet"},{id:"t3",label:"Recovery",meta:"Breathwork / stretch",icon:"HeartPulse",tone:"lime"}];return Ie==="LINKED"?Ga.unshift({id:"t0",label:"Coach check-in",meta:"Due today",icon:"ClipboardCheck",tone:"violet"}):ne==="AI"&&Ga.unshift({id:"t0",label:"AI readiness scan",meta:"2 taps",icon:"Sparkles",tone:"lime"}),Ga.slice(0,4)},[Ie,ne,H,Nt,Je,week]);return React.createElement(Ua,{title:"Today",subtitle:"A clean, role-aware timeline (not clutter).",right:React.createElement("button",{type:"button",onClick:()=>ta("Today timeline",`This is the client-facing \u201Cdo this next\u201D list.

Rules:
- Max 4 items
- Ordered by impact
- Adapts based on Linked vs Independent + tier + focus`),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Details")},React.createElement("div",{className:"space-y-3"},Pa.map((Ga,ca)=>React.createElement("button",{key:Ga.id,type:"button",onClick:()=>{try{Bt("client.today.item.opened",{id:Ga.id,label:Ga.label,surfaceKey:xa})}catch(La){}ta(Ga.label,Ga.meta+"\\n\\nIn production this would deep-link into the correct module (training, yoga, recovery, check-in).")},className:"w-full rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 px-4 py-3 flex items-center justify-between gap-4 transition-colors"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center border
                                    `+(Ga.tone==="lime"?"bg-[rgba(16,255,97,0.10)] border-[rgba(16,255,97,0.30)]":Ga.tone==="violet"?"bg-[rgba(168,85,255,0.10)] border-[rgba(168,85,255,0.30)]":"bg-[rgba(77,233,255,0.10)] border-[rgba(77,233,255,0.30)]")},React.createElement(_,{name:Ga.icon,size:18,className:"text-white"})),React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-white font-semibold text-[13px]"},Ga.label),React.createElement("div",{className:"text-white/60 text-[11px]"},Ga.meta))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-[9px] font-mono text-white/45"},"#",ca+1),React.createElement(_,{name:"ChevronRight",size:18,className:"text-white/70"}))))))},xi=({modeKey:ui="default"}={})=>{var vi=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],hi="fof_client_plan_week_v1::"+ui,ls="fof_client_plan_log_v1::"+ui;var Bi="fof_client_plan_requests_v1::"+ui;var Pa=(fi,ms)=>{try{var ss=JSON.parse(localStorage.getItem(fi)||"null");return ss==null?ms:ss}catch(ss){return ms}},Ga=(fi,ms)=>{try{localStorage.setItem(fi,JSON.stringify(ms))}catch(ss){}},ca=(fi,ms={})=>{var ss={id:xs(),ts:ps(),type:fi,payload:ms};setChangeLog(ds=>{var Xs=[ss,...ds||[]].slice(0,30);return Ga(ls,Xs),Xs})},La=React.useMemo(()=>{var fi=vi.map((ss,ds)=>({d:ss,kind:"REST",label:"Rest"}));return(H==="YOGA"?[1,3,5]:H==="HYBRID"?[0,2,4,6]:[0,2,4]).forEach((ss,ds)=>{fi[ss]={d:vi[ss],kind:"TRAIN",label:H==="YOGA"?"Yoga":ds%2===0?"Train":"Recover"}}),fi},[H]);return React.createElement(Ua,{title:"This week",subtitle:"A compact strip \u2014 tap any day to open the plan.",right:React.createElement("button",{type:"button",onClick:()=>{X("PLAN");try{Bt("client.nav.to_plan",{surfaceKey:xa})}catch(fi){}},className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 inline-flex items-center gap-2"},"Open plan ",React.createElement(_,{name:"ChevronRight",size:16}))},React.createElement("div",{className:"grid grid-cols-7 gap-2"},La.map(fi=>React.createElement("button",{key:fi.d,type:"button",onClick:()=>{X("PLAN"),ta("Weekly plan","Open "+fi.d+": "+fi.label)},className:`rounded-2xl border px-2 py-2 text-center transition-colors
                                `+(fi.kind==="TRAIN"?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)] hover:bg-[rgba(77,233,255,0.14)]":"border-white/12 bg-white/5 hover:bg-white/8")},React.createElement("div",{className:"text-[9px] font-bold text-white/70"},fi.d),React.createElement("div",{className:"mt-1 text-[11px] font-semibold text-white"},fi.label)))))},rs=()=>React.createElement(Ua,{title:"Insights",subtitle:ne==="AI"?"AI-generated weekly signals (demo).":"Lightweight guidance (free).",right:ne==="AI"?React.createElement("span",{className:"text-[9px] font-mono text-white/55"},"AI Coach"):React.createElement("button",{type:"button",onClick:()=>{W("AI");try{Bt("subscription.upgrade.clicked",{surfaceKey:xa,from:"FREE"})}catch(ui){}},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.10)] hover:bg-[rgba(168,85,255,0.16)] text-[12px] text-white"},"Upgrade")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"TrendingUp",size:16})," Weekly momentum"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Consistency is trending up. Keep the same training days this week.")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"HeartPulse",size:16})," Recovery focus"),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},"Add 10 minutes of mobility on non-training days to reduce tightness.")))),ct=()=>{var ui=React.useMemo(()=>[{id:"hero",node:React.createElement(Xa,null)},{id:"today",node:React.createElement(mi,null)},{id:"week",node:React.createElement(xi,null)},{id:"ins",node:React.createElement(rs,null)}],[Ie,ne,H,xa]);return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white text-[18px] font-extrabold leading-tight"},"Today"),React.createElement("div",{className:"text-white/60 text-[12px]"},"Your next best actions, simplified.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(di,{label:"Capacity Score",value:Nt,tone:Nt>=70?"good":Nt>=45?"warn":"brand",onClick:()=>ta("Capacity Score","Capacity Score detail view (weekly evolution + wearables impact).")}))),React.createElement($e,{storageKey:"fof_flowos_order_"+xa,tiles:ui}))};try{window.NeonButton||(window.NeonButton=({children:ui,onClick:vi,tone:hi="sky",className:ls="",icon:Bi=null,disabled:Pa=!1,title:Ga=null})=>React.createElement("button",{type:"button",title:Ga||void 0,onClick:La=>{La&&La.preventDefault&&La.preventDefault();try{vi&&vi(La)}catch(fi){}},disabled:!!Pa,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-2xl border text-[12px] font-extrabold text-white/90 "+(hi==="lime"?"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] hover:bg-[rgba(16,255,97,0.16)]":hi==="violet"?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.10)] hover:bg-[rgba(168,85,255,0.16)]":hi==="amber"?"border-[rgba(251,191,36,0.35)] bg-[rgba(251,191,36,0.10)] hover:bg-[rgba(251,191,36,0.16)]":"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)] hover:bg-[rgba(77,233,255,0.16)]")+" "+(Pa?"opacity-60 cursor-not-allowed":"")+" "+ls},Bi?React.createElement("span",{className:"opacity-90"},Bi):null,React.createElement("span",{className:"truncate"},ui)))}catch(ui){}var zt=window.NeonButton,Wi=({clientMode:ui="INDEPENDENT",tier:vi="FREE",coachContext:hi=null,focusPillar:ls="FITNESS"})=>{var Bi=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Pa=ui==="LINKED",Ga=!Pa&&vi==="FREE",ca=!Pa&&(vi==="AI"||vi==="TRIAL"||vi==="PAID"),La=(Pa?"LINKED":"INDEPENDENT")+"::"+(vi||"FREE");var fi="fof_client_plan_requests_v1::"+xa+"__"+La;var ms=React.useCallback(Fi=>{var ws=Bi.map((fs,Mo)=>({id:fs+"_"+Mo,d:fs,kind:"REST",title:"Rest",subtitle:"Recovery + mobility",icon:"Moon"}));(Fi==="YOGA"?[1,3,5]:Fi==="HYBRID"?[0,2,4,6]:Fi==="NUTRITION"?[0,2,4]:[0,2,4]).forEach((fs,Mo)=>{Fi==="YOGA"?ws[fs]={id:Bi[fs]+"_"+fs,d:Bi[fs],kind:"YOGA",title:"Yoga",subtitle:Mo%2===0?"Flow + breath":"Mobility reset",icon:"Lotus"}:Fi==="NUTRITION"?ws[fs]={id:Bi[fs]+"_"+fs,d:Bi[fs],kind:"NUTRITION",title:"Nutrition",subtitle:"Meals + targets",icon:"Utensils"}:Fi==="HYBRID"?ws[fs]={id:Bi[fs]+"_"+fs,d:Bi[fs],kind:Mo%3===0?"TRAIN":Mo%3===1?"YOGA":"NUTRITION",title:Mo%3===0?"Train":Mo%3===1?"Yoga":"Nutrition",subtitle:Mo%3===0?"Strength + conditioning":Mo%3===1?"Flow + mobility":"Meals + targets",icon:Mo%3===0?"Dumbbell":Mo%3===1?"Lotus":"Utensils"}:ws[fs]={id:Bi[fs]+"_"+fs,d:Bi[fs],kind:"TRAIN",title:Mo%2===0?"Train":"Recover",subtitle:Mo%2===0?"Strength + cardio":"Mobility + walk",icon:Mo%2===0?"Dumbbell":"HeartPulse"}});try{var fs=0;var Mo=["HARD","MODERATE","EASY"];for(var Di=0;Di<ws.length;Di++){var dn=ws[Di],An=String((dn==null?void 0:dn.kind)||"").toUpperCase();An&&An!=="REST"&&!dn.intensity&&(ws[Di]={...dn,intensity:Mo[fs++%3]})}}catch(fs){}return ws},[Bi]),ss=React.useMemo(()=>"fof_plan_week_v1_"+xa,[xa]),ds=React.useMemo(()=>"fof_plan_changelog_v1_"+xa+"__"+La,[xa,La]),[Xs,Wo]=React.useState(()=>{try{var Fi=localStorage.getItem(ss);if(Fi)return JSON.parse(Fi)}catch(Fi){}return ms(ls)}),[Po,Eo]=React.useState(()=>{try{var Fi=localStorage.getItem(ds);if(Fi)return JSON.parse(Fi)}catch(Fi){}return[]}),[Oi,jo]=React.useState(()=>{try{var Fi=localStorage.getItem(fi);if(Fi)return JSON.parse(Fi)}catch(Fi){}return[]}),to=React.useRef(null);React.useEffect(()=>{try{localStorage.setItem(fi,JSON.stringify(Oi))}catch(Fi){}try{window.dispatchEvent(new Event("fof_plan_requests_updated"))}catch(Fi){}},[Oi]);var Rn=(Fi,ws,mo=null)=>{var Di,dn;var fs=Xs[ws],Mo={id:xs(),ts:ps(),status:"PENDING",kind:Fi,fromIdx:ws,toIdx:mo,from:{day:fs==null?void 0:fs.d,title:fs==null?void 0:fs.title},to:mo!=null?{day:(Di=Xs[mo])==null?void 0:Di.d,title:(dn=Xs[mo])==null?void 0:dn.title}:null};jo(An=>[Mo,...An].slice(0,30)),Eo(An=>[{ts:Mo.ts,msg:"Change requested ("+Fi+") \u2022 pending coach approval."},...An].slice(0,40));try{Bt("plan.change.requested",{kind:Fi,fromIdx:ws,toIdx:mo,modeKey:La,surfaceKey:xa})}catch(An){}return Mo},Io=Fi=>{var ws=(Oi||[]).find(mo=>mo.id===Fi);if(!(!ws||ws.status!=="PENDING")){Wo(mo=>{var fs=mo.slice();if(ws.kind==="SWAP"&&ws.toIdx!=null){var Mo=fs[ws.fromIdx];fs[ws.fromIdx]=fs[ws.toIdx],fs[ws.toIdx]=Mo}if(ws.kind==="RESCHEDULE"){var Mo=ws.fromIdx;var Di=ws.toIdx;if(Di==null&&(Di=fs.findIndex((dn,An)=>An!==Mo&&(dn.kind==="REST"||/Rest/i.test(dn.title)))),Di!=null&&Di>=0){var dn=fs[Di];fs[Di]=fs[Mo],fs[Mo]=dn}}return fs}),jo(mo=>mo.map(fs=>fs.id===Fi?{...fs,status:"APPROVED",resolved_ts:ps()}:fs)),Eo(mo=>[{ts:ps(),msg:"Coach approved request \u2022 "+ws.kind+"."},...mo].slice(0,40));try{Bt("plan.change.approved",{reqId:Fi,kind:ws.kind,modeKey:La,surfaceKey:xa})}catch(mo){}}},[bs,Ao]=React.useState(null),[sn,Li]=React.useState(null);React.useEffect(()=>{try{localStorage.setItem(ss,JSON.stringify(Xs))}catch(Fi){}},[Xs,ss]),React.useEffect(()=>{try{localStorage.setItem(ds,JSON.stringify(Po.slice(-40)))}catch(Fi){}},[Po,ds]),React.useEffect(()=>{Wo(ms(ls)),Ao(null),Li(null),Eo(Fi=>[...Fi,{ts:new Date().toISOString(),msg:"Plan regenerated for "+ls+"."}].slice(-40))},[ls]);var po=(Fi,ws={})=>{Eo(mo=>[...mo,{ts:new Date().toISOString(),msg:Fi,...ws}].slice(-40))},Tn=(Fi,ws)=>{if(!(Fi==null||ws==null||Fi===ws)){Wo(mo=>{var fs=[...mo],Mo=fs[Fi];return fs[Fi]={...fs[ws]},fs[ws]={...Mo},fs[Fi].d=mo[Fi].d,fs[ws].d=mo[ws].d,fs}),po("Swapped "+Bi[Fi]+" \u2194 "+Bi[ws]+".",{type:"SWAP",a:Fi,b:ws});try{Bt("client.plan.swap",{a:Fi,b:ws,surfaceKey:xa})}catch(mo){}}},cr=Fi=>{var ws=Xs.findIndex((mo,fs)=>fs!==Fi&&mo.kind==="REST");if(ws===-1){ta("No rest day available","Your week has no rest day to move this session into. Try swapping with another day instead.");return}Tn(Fi,ws),po("Rescheduled "+Bi[Fi]+" \u2192 "+Bi[ws]+".",{type:"RESCHEDULE",from:Fi,to:ws});try{Bt("client.plan.reschedule",{from:Fi,to:ws,surfaceKey:xa})}catch(mo){}},_r=()=>{var Fi=ms(ls);Wo(Fi),Ao(null),Li(null),Eo(ws=>[...ws,{ts:new Date().toISOString(),msg:"Plan reset to default week."}].slice(-40));try{Bt("client.plan.reset",{surfaceKey:xa,focusPillar:ls})}catch(ws){}},$o=({open:Fi,title:ws,children:mo,onClose:fs})=>Fi?React.createElement("div",{className:"fixed inset-0 overflow-y-auto z-50 flex items-end md:items-center justify-center bg-black/70 p-3 modal-overlay",onMouseDown:fs},React.createElement("div",{className:"w-full max-w-xl rounded-[28px] border border-white/12 bg-[rgba(2,6,23,0.92)] backdrop-blur-2xl shadow-[0_30px_90px_rgba(0,0,0,0.7)] p-4 md:p-5 modal-card",onMouseDown:Mo=>Mo.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Plan"),React.createElement("div",{className:"text-white font-extrabold text-[16px]"},ws)),React.createElement("button",{type:"button",onClick:fs,className:"fof-icon-btn p-2 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-white/70 hover:text-white"},React.createElement(_,{name:"X",size:16}))),React.createElement("div",{className:"mt-4 space-y-2"},mo))):null,Vo=({item:Fi,idx:ws})=>{var mo=Fi.kind==="TRAIN"?"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)]":Fi.kind==="YOGA"?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)]":Fi.kind==="NUTRITION"?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)]":"border-white/12 bg-white/5",fs=Fi&&Fi.intensity?Fi.intensity:Fi&&Fi.kind==="TRAIN"?"HARD":null,Mo=fs?et(fs,Je):null,Di=fs&&Mo?String(Mo).toUpperCase()!==String(fs).toUpperCase():!1;return React.createElement("button",{type:"button",onClick:()=>{Ao(ws),Li(null);try{Bt("client.plan.day.opened",{idx:ws,kind:Fi.kind,surfaceKey:xa})}catch(dn){}},className:"w-full rounded-2xl border p-4 text-left transition-colors hover:bg-white/10 "+mo},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(_,{name:Fi.icon||"Calendar",size:18,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[13px]"},Fi.d),React.createElement("div",{className:"text-white font-semibold text-[13px]"},Fi.title),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/65"},Fi.subtitle))),React.createElement("div",{className:"flex flex-col items-end gap-1"},React.createElement("div",{className:"text-[9px] font-mono text-white/45"},Fi.kind),fs&&React.createElement("div",{className:"px-2 py-1 rounded-full border text-[10px] font-extrabold uppercase "+(Di?"border-amber-400/40 bg-amber-400/10 text-amber-100":"border-white/15 bg-white/5 text-white/70")},Di?String(fs).toUpperCase()+" \u2192 "+String(Mo).toUpperCase():String(fs).toUpperCase(),React.createElement("span",{className:"ml-2 text-[9px] font-mono text-white/40"},"cap ",Je)))),React.createElement("div",{className:"mt-3 flex items-center justify-between"},React.createElement("div",{className:"text-[9px] text-white/55"},"Tap for swap / reschedule"),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/70"})))},xn=()=>{if(bs==null)return null;var Fi=Xs[bs];return React.createElement($o,{open:bs!=null,title:Fi.d+" \u2022 "+Fi.title,onClose:()=>{Ao(null),Li(null)}},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Session"),React.createElement("div",{className:"text-[9px] font-mono text-white/45"},Fi.kind)),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},Fi.subtitle),Fi&&Fi.intensity&&React.createElement("div",{className:"mt-2 text-[11px] text-white/70"},"Intensity: ",React.createElement("span",{className:"font-extrabold text-white"},String(Fi.intensity).toUpperCase()),React.createElement("span",{className:"text-white/35"}," \u2022 "),"Recommended: ",React.createElement("span",{className:"font-extrabold text-white"},String(et(Fi.intensity,Je)).toUpperCase()),React.createElement("span",{className:"text-white/35"}," (Capacity ",Je,Oa!=="STABLE"?", "+Oa:"",")"))),React.createElement("button",{type:"button",onClick:()=>{if(Ga){ta("Upgrade required","Swap days unlocks in Trial / AI.");return}Li(bs)},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(Ga?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"Shuffle",size:16})," ",Pa?"Request a swap":"Swap with another day"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},Ga?"Locked on Free. Start Trial / AI to swap sessions.":Pa?"Coach approval required \u2014 choose the day to request.":"Pick a target day to swap sessions.")),React.createElement("button",{type:"button",onClick:()=>{var ws;if(Ga){ta("Upgrade required","Reschedule unlocks in Trial / AI.");return}if(Pa){var mo=Rn("RESCHEDULE",bs,null);ta("Request sent","Reschedule request submitted for "+(((ws=mo==null?void 0:mo.from)==null?void 0:ws.day)||"this day")+" (pending coach approval).");return}cr(bs)},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(Ga?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"CalendarClock",size:16})," ",Pa?"Request reschedule":"Reschedule"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/60"},Ga?"Locked on Free. Start Trial / AI to reschedule sessions.":Pa?"Sends a request to your coach for approval.":"Move this session to the next rest day automatically.")),ui==="LINKED"?React.createElement("button",{type:"button",onClick:()=>{bs!=null&&(Rn("SWAP",bs,null),ta("Request sent","In production, this opens a pre-filled message to your coach with the selected day and your requested change."))},className:"w-full rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] px-4 py-3 text-left"},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"MessageCircle",size:16})," Ask coach to approve"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/70"},"Linked clients require coach approval.")):React.createElement("button",{type:"button",onClick:()=>{if(Ga){ta("Upgrade required","AI tuning unlocks in Trial / AI.");return}ta(vi==="AI"?"Tune my plan":"Tune (Trial)","AI will rebalance the week using readiness + wearables + schedule constraints.")},className:"w-full rounded-2xl border px-4 py-3 text-left transition-colors "+(Ga?"border-white/10 bg-white/5 opacity-60 cursor-not-allowed":"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] hover:bg-[rgba(16,255,97,0.14)]")},React.createElement("div",{className:"flex items-center gap-2 text-white font-semibold text-[13px]"},React.createElement(_,{name:"Sparkles",size:16})," ",vi==="AI"?"Tune with AI":vi==="TRIAL"?"Tune (Trial preview)":"Unlock AI tuning"),React.createElement("div",{className:"mt-0.5 text-[11px] text-white/70"},Ga?"Locked on Free. Start Trial / AI to unlock auto-adjustments.":"Independent plans can be auto-adjusted week-to-week.")),React.createElement("div",{className:"pt-2 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>{Ao(null),Li(null)},className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Close"),React.createElement("button",{type:"button",onClick:_r,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Reset week")))},Xn=()=>{if(sn==null)return null;var Fi=Xs[sn];return React.createElement($o,{open:sn!=null,title:"Swap: "+Fi.d+" \u2022 "+Fi.title,onClose:()=>Li(null)},React.createElement("div",{className:"text-[11px] text-white/70"},"Choose a target day to swap with."),React.createElement("div",{className:"grid grid-cols-2 gap-2"},Xs.map((ws,mo)=>React.createElement("button",{key:ws.id||mo,type:"button",disabled:mo===sn,onClick:()=>{var fs,Mo;if(Ga){ta("Upgrade required","Swap days unlocks in Trial / AI.");return}if(Pa){var Di=Rn("SWAP",sn,mo);Li(null),Ao(null),ta("Request sent","Swap request submitted: "+(((fs=Di==null?void 0:Di.from)==null?void 0:fs.day)||"From")+" \u2192 "+(((Mo=Di==null?void 0:Di.to)==null?void 0:Mo.day)||"To")+" (pending coach approval).");return}Tn(sn,mo),Li(null),Ao(null)},className:`rounded-2xl border px-3 py-3 text-left transition-colors
                                    `+(mo===sn?"border-white/10 bg-white/5 opacity-50 cursor-not-allowed":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},ws.d),React.createElement("div",{className:"mt-0.5 text-[9px] text-white/60"},ws.title)))),React.createElement("button",{type:"button",onClick:()=>Li(null),className:"w-full mt-2 px-4 py-3 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Cancel"))};return React.createElement("div",{className:"space-y-4"},ui==="LINKED"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Linked"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Plan edits become requests your coach can approve.")),React.createElement("button",{type:"button",onClick:()=>ta("Linked plan","In LINKED mode, plan edits are requests. Coach can approve/reject."),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"))):vi==="FREE"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Free"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"View + basic swaps. AI suggestions are locked.")),React.createElement("button",{type:"button",onClick:()=>{try{Bt("upsell.ai_from_plan",{surfaceKey:xa})}catch(Fi){}ta("Unlock AI planning","Upgrade unlocks readiness-based suggestions + weekly load balancing.")},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI"))):React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI / Trial"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"AI can suggest swaps based on readiness + recovery.")),React.createElement("button",{type:"button",onClick:()=>ta("AI planning","In AI tier, the system suggests swaps/reschedules and can regenerate your week based on readiness trend."),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"What changes?"))),React.createElement(Ua,{title:"Plan",subtitle:"Weekly calendar \u2022 swap / reschedule \u2022 change log",right:React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ta("Plan module",`This is the client Plan tab.

Key UX:
\u2022 Weekly calendar view
\u2022 Swap/reschedule actions (client-side demo)
\u2022 Change log (audit style)

In production: coach locks / approvals (Linked), AI suggestions (AI tier), and a full audit log stored per-tenant.`),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"),React.createElement("button",{type:"button",onClick:_r,className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80",title:"Reset week"},"Reset"))},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},[{k:"FITNESS",t:"Fitness",i:"Dumbbell",d:"Strength + conditioning"},{k:"NUTRITION",t:"Nutrition",i:"Utensils",d:"Meals + targets"},{k:"YOGA",t:"Yoga",i:"Lotus",d:"Mobility + breath"},{k:"HYBRID",t:"Hybrid",i:"Layers",d:"Fitness + Yoga + Nutrition"}].map(Fi=>React.createElement("button",{key:Fi.k,type:"button",onClick:()=>Ht(Fi.k),className:`rounded-2xl border p-4 text-left transition-colors
                                    `+(ls===Fi.k?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)]":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center gap-2 text-white font-bold"},React.createElement(_,{name:Fi.i,size:18})," ",Fi.t),React.createElement("div",{className:"mt-1 text-[11px] text-white/65"},Fi.d)))),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("div",{className:"text-white font-bold text-[12px]"},"Weekly calendar"),React.createElement("button",{type:"button",onClick:()=>ta("Calendar","Tap any day to swap or reschedule. The change log below records what you did."),className:"text-[11px] text-white/70 hover:text-white"},"Tips ",React.createElement(_,{name:"Info",size:14,className:"inline"}))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},Xs.map((Fi,ws)=>React.createElement(Vo,{key:Fi.id||ws,item:Fi,idx:ws})))),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Quick actions"),React.createElement("div",{className:"mt-3 space-y-2"},React.createElement(zt,{tone:"sky",icon:"Calendar",onClick:()=>ta("Weekly view","Weekly calendar view (demo). In production: constraints + month view + coach locks.")},"Open calendar view"),ui==="LINKED"?React.createElement(React.Fragment,null,React.createElement(zt,{tone:"lime",icon:"MessageCircle",onClick:()=>{var Fi=Xs.findIndex(fs=>fs&&fs.kind!=="REST"),ws=Fi>=0?Fi:0,mo=Rn("RESCHEDULE",ws,null);ta("Plan request created","Request submitted ("+mo.kind+`). Status: PENDING.

In production: your coach receives this request, can approve/reject, and you see the decision here.`)}},"Create plan request"),React.createElement(zt,{tone:"violet",icon:"ClipboardCheck",onClick:()=>{}},"View requests")):vi==="FREE"?React.createElement(React.Fragment,null,React.createElement(zt,{tone:"lime",icon:"Shuffle",onClick:()=>{Ao(0),Li(0)}},"Swap a day"),React.createElement(zt,{tone:"violet",icon:"Lock",onClick:()=>{try{Bt("upsell.ai_from_plan_quick",{surfaceKey:xa})}catch(Fi){}ta("Locked","AI suggestions unlock in Trial/AI.")}},"AI suggestions (locked)")):React.createElement(React.Fragment,null,React.createElement(zt,{tone:"lime",icon:"Shuffle",onClick:()=>{Ao(0),Li(0)}},"Swap a day"),React.createElement(zt,{tone:"violet",icon:"Sparkles",onClick:()=>ta("AI suggestions","AI suggests swaps based on readiness + schedule. (Demo)")},"Suggest changes (AI)"),React.createElement(zt,{tone:"brand",icon:"Wand2",onClick:()=>{Wo(ms(ls)),po("AI regenerated this week (demo).")}},"Regenerate week")))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Change log"),React.createElement("button",{type:"button",onClick:()=>{Eo([]);try{localStorage.removeItem(ds)}catch(Fi){}},className:"text-[11px] text-white/70 hover:text-white"},"Clear")),React.createElement("div",{className:"mt-3 max-h-[220px] overflow-auto scroll-area space-y-2 pr-1"},Po.length===0?React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 text-[11px] text-white/60"},"No changes yet. Swap or reschedule a day to create a log entry."):Po.slice().reverse().map((Fi,ws)=>React.createElement("div",{key:ws,className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-[11px] font-semibold text-white"},Fi.msg),React.createElement("div",{className:"text-[9px] font-mono text-white/45"},(Fi.ts||"").toString().slice(11,16))),React.createElement("div",{className:"mt-1 text-[9px] text-white/50"},(Fi.ts||"").toString().slice(0,10)))))))),React.createElement(xn,null),React.createElement(Xn,null))},Wa=({clientMode:ui="INDEPENDENT",tier:vi="FREE",coachContext:hi=null,habits:ls=null,setHabits:Bi=null,readiness:Pa=62,recovery:Ga=71,strain:ca=48})=>{var La=ui==="LINKED",fi=!La&&vi==="FREE",ms=!La&&(vi==="AI"||vi==="TRIAL"||vi==="PAID"),ss=(La?"LINKED":"INDEPENDENT")+"::"+(vi||"FREE"),ds="fof_wearables_connected_v1::"+ss,Xs="fof_recovery_log_v1::"+ss,Wo=($o,Vo)=>{try{var xn=JSON.parse(localStorage.getItem($o)||"null");return xn==null?Vo:xn}catch(xn){return Vo}},Po=($o,Vo)=>{try{localStorage.setItem($o,JSON.stringify(Vo))}catch(xn){}},Eo=Array.isArray(ls)?ls:[],Oi=typeof Bi=="function"?Bi:()=>{},jo=fi?Eo.slice(0,3):Eo,[to,Rn]=React.useState(()=>{try{return localStorage.getItem(ds)==="1"}catch($o){return!1}}),Io=React.useMemo(()=>{var $o=Math.max(25,Math.min(90,Number(Pa)||60));return[-6,-2,1,-3,4,2,0].map((xn,Xn)=>Math.max(10,Math.min(100,Math.round($o+xn+(Xn%2===0?1:-1)))))},[Pa]),bs=React.useMemo(()=>{var $o=Math.max(25,Math.min(95,Number(Ga)||70));return[-4,1,-1,3,-2,2,0].map((xn,Xn)=>Math.max(10,Math.min(100,Math.round($o+xn+(Xn%2===0?0:1)))))},[Ga]),Ao=$o=>{Rn($o);try{localStorage.setItem(ds,$o?"1":"0")}catch(Vo){}},sn=()=>{if(fi){ta("Upgrade required","Wearables + insights unlock in Trial / AI.");return}Ao(!0);try{Bt("wearable.connected",{provider:"demo_multi",surfaceKey:xa})}catch($o){}ta("Wearables connected",`You\u2019re now connected (demo).

This unlocks:
\u2022 More accurate readiness + recovery
\u2022 Auto-updated steps / sleep / workouts
\u2022 Smarter week-to-week plan adjustments`)},Li=()=>{Ao(!1);try{Bt("wearable.disconnected",{surfaceKey:xa})}catch($o){}ta("Wearables disconnected","Disconnected (demo). You can reconnect anytime.")},po=to?7800+Pa%800:0,Tn=to?6.9+Ga%9/10:null,cr=to?42+Ga%18:null,_r=to?56+ca%10:null;return React.createElement("div",{className:"space-y-4"},ui==="LINKED"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Linked"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Your coach sees your check-ins and can adjust your week.")),React.createElement("button",{type:"button",onClick:()=>ta("Linked mode","In LINKED mode, your coach can assign sessions, review logs, and adjust intensity. Your actions here sync to the coach dashboard."),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works"))):vi==="FREE"?React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Free"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"You can log habits and basics. AI insights and auto-adjustments are preview-only.")),React.createElement("button",{type:"button",onClick:()=>{try{Bt("upsell.ai_from_track",{surfaceKey:xa})}catch($o){}ta("Upgrade to AI Coach","Upgrade unlocks: auto-adjusted readiness, recovery-based suggestions, and weekly load balancing.")},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI"))):React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI Coach"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Insights adapt based on readiness + recovery + your logs.")),React.createElement("button",{type:"button",onClick:()=>ta("AI insights","In AI tier, habits + recovery + wearable signals tune your plan week-to-week."),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"What changes?"))),React.createElement(Ua,{title:"Track",subtitle:"Habits + recovery + wearables in one place.",right:React.createElement("button",{type:"button",onClick:()=>ta("How Track works",`Track is client-facing.

\u2022 Habits: you check off daily targets
\u2022 Recovery: you see how your body is doing
\u2022 Wearables: improve accuracy + reduce manual logging

Nothing here shows backend notes.`),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Capacity Score"),React.createElement("span",{className:"text-[11px] text-white/70"},Pa,"/100")),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-[rgba(16,255,97,0.85)]",style:{width:Pa+"%"}})),React.createElement("div",{className:"mt-2 flex items-end gap-1 h-10"},Io.map(($o,Vo)=>React.createElement("div",{key:Vo,className:"flex-1 rounded-lg bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/40",style:{height:Math.max(10,$o)+"%"}})))),React.createElement("div",{className:"mt-1 text-[9px] text-white/55"},"7\u2011day trend"))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Recovery"),React.createElement("span",{className:"text-[11px] text-white/70"},Ga,"/100")),React.createElement("div",{className:"mt-2"},React.createElement("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden"},React.createElement("div",{className:"h-full bg-[rgba(77,233,255,0.85)]",style:{width:Ga+"%"}})),React.createElement("div",{className:"mt-2 flex items-end gap-1 h-10"},bs.map(($o,Vo)=>React.createElement("div",{key:Vo,className:"flex-1 rounded-lg bg-white/10 overflow-hidden"},React.createElement("div",{className:"w-full bg-white/40",style:{height:Math.max(10,$o)+"%"}})))),React.createElement("div",{className:"mt-1 text-[9px] text-white/55"},"7\u2011day trend"))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Wearables"),React.createElement("span",{className:"text-[11px] "+(to?"text-[rgba(16,255,97,0.9)]":"text-white/60")},to?"Connected":"Not connected")),React.createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2"},React.createElement("div",{className:"text-[9px] text-white/55"},"Steps"),React.createElement("div",{className:"text-[13px] font-bold text-white"},to?po.toLocaleString():"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2"},React.createElement("div",{className:"text-[9px] text-white/55"},"Sleep"),React.createElement("div",{className:"text-[13px] font-bold text-white"},to?Tn.toFixed(1)+"h":"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2"},React.createElement("div",{className:"text-[9px] text-white/55"},"HRV"),React.createElement("div",{className:"text-[13px] font-bold text-white"},to?cr+" ms":"\u2014")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-2"},React.createElement("div",{className:"text-[9px] text-white/55"},"Resting HR"),React.createElement("div",{className:"text-[13px] font-bold text-white"},to?_r+" bpm":"\u2014"))),React.createElement("div",{className:"mt-3"},to?React.createElement("div",{className:"flex gap-2"},React.createElement(zt,{tone:"aqua",onClick:()=>ta("Providers","Apple Health \u2022 Google Fit \u2022 Garmin \u2022 WHOOP \u2022 Oura (demo).")},"Providers"),React.createElement("button",{type:"button",onClick:Li,className:"flex-1 py-3 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Disconnect")):React.createElement("div",null,React.createElement(zt,{tone:fi?"sky":"lime",onClick:sn,disabled:fi},fi?"Unlock wearables (Start Trial)":"Connect wearables"),fi&&React.createElement("div",{className:"mt-1 text-[11px] text-white/60"},"Wearables + recovery unlock in Trial / AI.")))))),React.createElement(Ua,{title:"Habits",subtitle:"Quick daily check\u2011ins (tap to complete).",right:React.createElement("button",{type:"button",onClick:()=>ta("Habits",`Habits are lightweight daily targets.

In production they power:
\u2022 streaks + nudges
\u2022 coach visibility (Linked)
\u2022 weekly adherence insights`),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Details")},React.createElement("div",{className:"max-h-[calc(100vh-280px)] overflow-y-auto space-y-2 pr-1"},jo.map($o=>React.createElement("button",{key:$o.id,type:"button",onClick:()=>{Oi(Vo=>Vo.map(xn=>xn.id===$o.id?{...xn,done:!xn.done,streak:xn.done?Math.max(0,xn.streak-1):xn.streak+1}:xn));try{Bt("client.habit.toggled",{id:$o.id,done:!$o.done,surfaceKey:xa})}catch(Vo){}},className:"w-full rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 px-3 py-2 flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-7 h-7 rounded-xl flex items-center justify-center border "+($o.done?"bg-[rgba(16,255,97,0.18)] border-[rgba(16,255,97,0.35)]":"bg-white/5 border-white/15")},React.createElement(_,{name:$o.done?"Check":"Circle",size:14,className:"text-white"})),React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-[12px] font-semibold text-white"},$o.label),React.createElement("div",{className:"text-[9px] text-white/60"},"Target: ",$o.target," \u2022 Streak: ",$o.streak,"d"))),React.createElement(_,{name:"ChevronRight",size:16,className:"text-white/45"}))))),React.createElement(Ua,{title:"Recovery",subtitle:"How your body is doing today.",right:React.createElement("button",{type:"button",onClick:()=>ta("Recovery signals",to?"Recovery uses sleep + HRV + resting HR + recent training load (demo).":"Connect wearables to unlock more accurate recovery signals (demo)."),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Signals")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Sleep quality"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},to?"Good":"\u2014"),React.createElement("div",{className:"text-[9px] text-white/50 mt-1"},to?Tn.toFixed(1)+"h logged":"Connect wearables to track")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Soreness"),React.createElement("div",{className:"mt-1 text-[14px] font-bold text-white"},ca>65?"High":ca>45?"Moderate":"Low"),React.createElement("div",{className:"text-[9px] text-white/50 mt-1"},"Based on training load (demo)")),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-3"},React.createElement("div",{className:"text-[11px] text-white/55"},"Recovery note"),React.createElement("div",{className:"mt-1 text-[12px] text-white/85 leading-snug"},Pa>=70?"You\u2019re primed \u2014 push intensity if your schedule allows.":Pa>=50?"Solid day \u2014 keep the plan, watch fatigue.":"Take it easier \u2014 prioritize mobility and sleep."))),!to&&React.createElement("div",{className:"mt-3 rounded-2xl border border-white/12 bg-white/5 p-3 flex items-start gap-3"},React.createElement("div",{className:"fof-icon-btn p-2 rounded-2xl bg-white/5 border border-white/12"},React.createElement(_,{name:"Watch",size:18,className:"text-white/80"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[12px] font-bold text-white"},"Connect a wearable to improve accuracy"),React.createElement("div",{className:"text-[9px] text-white/60 mt-1"},"You\u2019ll get sleep-aware recovery + auto-adjusted week-to-week tracking.")),React.createElement("button",{type:"button",onClick:sn,className:"px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 border border-white/15 text-[12px] text-white font-semibold"},"Connect"))))},Hs=({clientMode:ui="INDEPENDENT",tier:vi="FREE"})=>{var hi=ui==="LINKED",ls=vi==="FREE",Bi=vi!=="FREE",[Pa,Ga]=React.useState("FOR_YOU"),[ca,La]=React.useState(""),[fi,ms]=React.useState("RELEVANCE"),[ss,ds]=React.useState(!1);React.useEffect(()=>{Ga("FOR_YOU"),La(""),ms("RELEVANCE"),ds(!1)},[ui,vi]);var Xs=bs=>{Mt(Ao=>{var sn=new Set(Array.from(Ao));return sn.has(bs)?sn.delete(bs):sn.add(bs),sn});try{Bt("client.library.save.toggled",{id:bs,surfaceKey:xa,clientMode:ui,tier:vi})}catch(Ao){}},Wo=aa&&aa.size?aa.size:0,Po=React.useMemo(()=>[{k:"FOR_YOU",t:hi?"Assigned + For you":"For you",icon:"Sparkles"},{k:"TRAIN",t:"Training",icon:"Dumbbell"},{k:"YOGA",t:"Yoga",icon:"Lotus"},{k:"NUTRITION",t:"Nutrition",icon:"Utensils",locked:ls},{k:"RECOVERY",t:"Recovery",icon:"HeartPulse"},{k:"SAVED",t:"Saved ("+Wo+")",icon:"Bookmark"}],[hi,ls,Wo]),Eo=React.useMemo(()=>hi?[{id:"assigned_1",cat:"TRAIN",title:"Coach-assigned: Strength A",meta:"Assigned \u2022 Today",duration:35,intensity:"Moderate",icon:"ClipboardCheck",tag:"ASSIGNED"},{id:"assigned_2",cat:"RECOVERY",title:"Coach note: Mobility reset",meta:"Assigned \u2022 10 min",duration:10,intensity:"Low",icon:"HeartPulse",tag:"ASSIGNED"},{id:"assigned_3",cat:"YOGA",title:"Coach pick: Yoga flow (hips)",meta:"Assigned \u2022 20 min",duration:20,intensity:"Low",icon:"Lotus",tag:"ASSIGNED"}]:[],[hi]),Oi=React.useMemo(()=>[{id:"lib_1",cat:"TRAIN",title:"Strength foundations (4 weeks)",meta:"Program \u2022 Beginner friendly",duration:45,intensity:"Moderate",icon:"Dumbbell",tag:"PROGRAM"},{id:"lib_2",cat:"RECOVERY",title:"Mobility reset (10 min)",meta:"Recovery \u2022 Daily habit",duration:10,intensity:"Low",icon:"HeartPulse",tag:"HABIT"},{id:"lib_3",cat:"YOGA",title:"Yoga flow: hips & hamstrings",meta:"Yoga \u2022 20 min",duration:20,intensity:"Low",icon:"Lotus",tag:"SESSION"},{id:"lib_4",cat:"NUTRITION",title:"High-protein meal pack",meta:"Nutrition \u2022 Recipes",duration:0,intensity:"\u2014",icon:"Utensils",tag:"RECIPES"},{id:"lib_5",cat:"TRAIN",title:"Conditioning builder",meta:"Program \u2022 3 days/week",duration:30,intensity:"High",icon:"Flame",tag:"PROGRAM"},{id:"lib_6",cat:"RECOVERY",title:"Breathwork downshift",meta:"Recovery \u2022 5 min",duration:5,intensity:"Low",icon:"Wind",tag:"SESSION"},{id:"lib_7",cat:"YOGA",title:"Power yoga (strength)",meta:"Yoga \u2022 25 min",duration:25,intensity:"Moderate",icon:"Lotus",tag:"SESSION"},{id:"lib_8",cat:"TRAIN",title:"Gym split: Upper/Lower",meta:"Program \u2022 Intermediate",duration:55,intensity:"Moderate",icon:"Dumbbell",tag:"PROGRAM"},{id:"lib_9",cat:"RECOVERY",title:"Sleep wind-down routine",meta:"Recovery \u2022 8 min",duration:8,intensity:"Low",icon:"Moon",tag:"HABIT"}],[]),jo=React.useMemo(()=>!Bi||hi?[]:[{id:"ai_1",cat:"TRAIN",title:"AI pick: Capacity Score-based training day",meta:"Auto-adjusts intensity \u2022 Today",duration:40,intensity:"Adaptive",icon:"Cpu",tag:"AI PICK"},{id:"ai_2",cat:"RECOVERY",title:"AI pick: Recovery micro-session",meta:"Sleep-aware \u2022 8 min",duration:8,intensity:"Adaptive",icon:"Cpu",tag:"AI PICK"}],[Bi,hi]),to=React.useMemo(()=>{var bs=Oi.slice();return ls&&(bs=bs.filter(Ao=>Ao.cat!=="NUTRITION").slice(0,6)),Bi&&(bs=bs.slice(0,9)),bs},[Oi,ls,Bi]),Rn=React.useMemo(()=>{var bs=(ca||"").trim().toLowerCase();var Ao=[];Pa==="FOR_YOU"?Ao=hi?[...Eo,...to]:[...jo,...to]:Pa==="SAVED"?Ao=[...Eo,...jo,...to].filter(po=>aa&&aa.has(po.id)):Ao=[...Eo,...jo,...to].filter(po=>po.cat===Pa),ls&&(Ao=Ao.filter(po=>po.cat!=="NUTRITION")),bs&&(Ao=Ao.filter(po=>{var Tn=(po.title||"").toLowerCase(),cr=(po.meta||"").toLowerCase();return Tn.includes(bs)||cr.includes(bs)||(po.cat||"").toLowerCase().includes(bs)})),fi==="NEW"&&(Ao=Ao.slice().reverse()),fi==="SHORT"&&(Ao=Ao.slice().sort((po,Tn)=>(po.duration||999)-(Tn.duration||999)));var sn=new Set,Li=[];for(var po of Ao)sn.has(po.id)||(sn.add(po.id),Li.push(po));return Li},[Pa,ca,fi,hi,ls,Eo,jo,to,aa]),Io=()=>React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-5 text-center"},React.createElement("div",{className:"mx-auto w-12 h-12 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(_,{name:"Search",size:18,className:"text-white"})),React.createElement("div",{className:"mt-3 text-white font-semibold"},"No matches"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Try a different filter or clear your search."),React.createElement("button",{type:"button",onClick:()=>{La(""),Ga("FOR_YOU")},className:"mt-4 px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85"},"Reset"));return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"rounded-3xl border border-white/15 bg-white/6 backdrop-blur-xl px-5 py-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},hi?"Linked Library":ls?"Free Library":"AI / Trial Library"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},hi?"Your coach can assign sessions. You\u2019ll see assigned items first, then the full catalog.":ls?"Browse core training, yoga, and recovery. Nutrition and AI picks are locked on Free.":"Browse the full catalog. \u201CAI picks\u201D adapt to your capacity score and week-to-week recovery.")),React.createElement("div",{className:"flex items-center gap-2"},!hi&&ls?React.createElement("button",{type:"button",onClick:()=>{try{Bt("upsell.ai_from_library",{surfaceKey:xa})}catch(bs){}ta("Unlock full library","Upgrade unlocks Nutrition packs + AI picks + smarter weekly adjustments.")},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock"):React.createElement("button",{type:"button",onClick:()=>ta("Library module",`Library is shared across the FlowOFIT ecosystem.

Client:
\u2022 Browse + save
\u2022 Start sessions (demo)
`+(hi?`\u2022 Receives coach assignments (Linked)
`:"")+(Bi?`\u2022 Gets AI recommendations (AI/Trial)
`:"")+`

Coach:
\u2022 Assign sessions/programs (Linked)

Admin:
\u2022 Curate and govern content`),className:"px-3 py-2 rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it connects"))),React.createElement("div",{className:"mt-4 flex flex-col sm:flex-row gap-2"},React.createElement("div",{className:"flex-1 relative"},React.createElement("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/60"},React.createElement(_,{name:"Search",size:16})),React.createElement("input",{value:ca,onChange:bs=>La(bs.target.value),placeholder:hi?"Search assigned + catalog\u2026":"Search the library\u2026",className:"w-full pl-9 pr-3 py-2.5 rounded-2xl border border-white/12 bg-white/5 text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-[rgba(77,233,255,0.28)]"})),React.createElement("select",{value:fi,onChange:bs=>ms(bs.target.value),className:"sm:w-[180px] w-full px-3 py-2.5 rounded-2xl border border-white/12 bg-white/5 text-white focus:outline-none"},React.createElement("option",{value:"RELEVANCE"},"Sort: Relevance"),React.createElement("option",{value:"NEW"},"Sort: Newest"),React.createElement("option",{value:"SHORT"},"Sort: Shortest")))),React.createElement("div",{className:"flex flex-wrap gap-2"},Po.map(bs=>{var Ao=Pa===bs.k,sn=!!bs.locked;return React.createElement("button",{key:bs.k,type:"button",onClick:()=>{if(sn){try{Bt("upsell.library_filter_locked",{filter:bs.k,surfaceKey:xa})}catch(Li){}return ta("Locked on Free","Nutrition packs unlock on AI / Trial. You can still browse Training, Yoga, and Recovery on Free.")}Ga(bs.k)},className:`px-3 py-2 rounded-full border text-[12px] font-semibold transition-colors inline-flex items-center gap-2
                                    `+(Ao?"border-[rgba(77,233,255,0.40)] bg-[rgba(77,233,255,0.12)] text-white":sn?"border-white/10 bg-white/3 text-white/45 hover:bg-white/5":"border-white/12 bg-white/5 text-white/70 hover:text-white hover:bg-white/10"),title:sn?"Locked on Free":bs.t},React.createElement(_,{name:bs.icon,size:14,className:sn?"text-white/35":"text-white"}),bs.t,sn?React.createElement(_,{name:"Lock",size:14,className:"text-white/35"}):null)})),React.createElement("div",{className:"rounded-3xl border border-white/12 bg-white/5 p-4"},React.createElement("button",{type:"button",onClick:()=>ds(bs=>!bs),className:"w-full flex items-center justify-between text-left"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-9 h-9 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center"},React.createElement(_,{name:"Info",size:16,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"text-white font-semibold text-[13px]"},"How to use Library"),React.createElement("div",{className:"text-white/60 text-[11px]"},hi?"Assigned items first \u2022 Save favorites for your coach":ls?"Browse basics \u2022 Upgrade to unlock more":"AI picks adapt to your week"))),React.createElement(_,{name:ss?"ChevronUp":"ChevronDown",size:18,className:"text-white/70"})),ss?React.createElement("div",{className:"mt-3 text-[12px] text-white/70 leading-relaxed space-y-2"},hi?React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 ",React.createElement("span",{className:"text-white/90 font-semibold"},"Assigned")," items are your coach\u2019s picks. Completing them improves plan accuracy."),React.createElement("div",null,"\u2022 Tap ",React.createElement("span",{className:"text-white/90 font-semibold"},"Save")," to bookmark sessions you want more of (helps your coach personalize).")):ls?React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 Free includes Training, Yoga and Recovery basics."),React.createElement("div",null,"\u2022 Nutrition packs + AI picks unlock on AI/Trial.")):React.createElement(React.Fragment,null,React.createElement("div",null,"\u2022 ",React.createElement("span",{className:"text-white/90 font-semibold"},"AI picks")," adapt based on readiness, recovery and weekly load."),React.createElement("div",null,"\u2022 Saves become your shortcuts \u2014 use ",React.createElement("span",{className:"text-white/90 font-semibold"},"Saved")," to quickly start sessions."))):null),React.createElement("div",{className:"space-y-3"},Rn.length===0?React.createElement(Io,null):Rn.map(bs=>{var Ao=aa&&aa.has(bs.id),sn=ls&&bs.cat==="NUTRITION",Li=bs.tag==="ASSIGNED",po=bs.tag==="AI PICK";return React.createElement("div",{key:bs.id,className:`rounded-3xl border p-4 flex items-start justify-between gap-3
                                `+(Li?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.08)]":po?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.08)]":"border-white/12 bg-white/5")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-11 h-11 rounded-2xl border border-white/12 bg-white/5 flex items-center justify-center shrink-0"},React.createElement(_,{name:bs.icon,size:18,className:"text-white"})),React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-white font-semibold text-[13px]"},bs.title),React.createElement("span",{className:`px-2 py-1 rounded-full text-[9px] font-bold tracking-widest border
                                                `+(Li?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.12)] text-white":po?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] text-white":"border-white/10 bg-white/5 text-white/70")},bs.tag),React.createElement("span",{className:"px-2 py-1 rounded-full text-[9px] border border-white/10 bg-white/5 text-white/70"},bs.cat)),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},bs.meta),React.createElement("div",{className:"mt-2 flex flex-wrap gap-2 text-[9px] text-white/70"},bs.duration?React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/10 bg-white/5"},bs.duration," min"):null,bs.intensity?React.createElement("span",{className:"px-2 py-1 rounded-full border border-white/10 bg-white/5"},"Intensity: ",bs.intensity):null,Ao?React.createElement("span",{className:"px-2 py-1 rounded-full border border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] text-white"},"Saved"):null))),React.createElement("div",{className:"flex flex-col items-end gap-2 shrink-0"},React.createElement("button",{type:"button",onClick:()=>Xs(bs.id),className:`px-3 py-2 rounded-2xl border text-[12px] font-semibold inline-flex items-center gap-2
                                            `+(Ao?"border-[rgba(16,255,97,0.40)] bg-[rgba(16,255,97,0.12)] text-white":"border-white/12 bg-white/5 text-white/75 hover:bg-white/10"),title:Ao?"Unsave":"Save"},React.createElement(_,{name:Ao?"BookmarkCheck":"Bookmark",size:16}),Ao?"Saved":"Save"),React.createElement("button",{type:"button",onClick:()=>{if(sn){try{Bt("upsell.library_item_locked",{id:bs.id,surfaceKey:xa})}catch(Tn){}return ta("Locked on Free","Nutrition packs unlock on AI / Trial.")}try{Bt("client.library.item.opened",{id:bs.id,cat:bs.cat,source:Li?"ASSIGNED":po?"AI_PICK":"CATALOG",surfaceKey:xa})}catch(Tn){}ta("Demo: Start item",`In a real build this would open the session/program detail screen, with:
\u2022 content metadata
\u2022 equipment needs
\u2022 coach notes (Linked)
\u2022 AI adjustments (AI tier)`,{id:bs.id,cat:bs.cat,tag:bs.tag})},className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80 inline-flex items-center gap-2"},React.createElement(_,{name:"Play",size:16}),"Open")))})),!hi&&Bi?React.createElement("div",{className:"rounded-3xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-5"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI tools"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Generate a suggested session list based on your capacity score trend.")),React.createElement("button",{type:"button",onClick:()=>{try{Bt("client.library.ai_generate_clicked",{surfaceKey:xa})}catch(bs){}ta("AI generate (demo)","In production: AI uses readiness trend + recent workouts + recovery + time constraints to recommend sessions. This also feeds Admin analytics and your \u201CWeekly Capacity Score\u201D evolution.")},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white inline-flex items-center gap-2"},React.createElement(_,{name:"Sparkles",size:16})," Generate"))):null)},ks=({surfaceKey:ui="client",clientMode:vi="INDEPENDENT",tier:hi="FREE",coachContext:ls=null})=>{var Bi=vi==="LINKED",Pa=hi==="AI",Ga=React.useMemo(()=>"fof_checkin_v1::"+ui+"__"+vi,[ui,vi]),[ca,La]=React.useState(()=>{try{var Oi=localStorage.getItem(Ga);if(Oi)return JSON.parse(Oi)}catch(Oi){}return{status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,note:""}});React.useEffect(()=>{try{var Oi=localStorage.getItem(Ga);if(Oi){La(JSON.parse(Oi));return}}catch(Oi){}La({status:"DUE",lastTs:null,mood:null,soreness:null,sleep:null,note:""})},[Ga]),React.useEffect(()=>{try{localStorage.setItem(Ga,JSON.stringify(ca))}catch(Oi){}},[Ga,ca]);var fi=()=>{var Oi=ps(),jo=to=>({...to,status:"UP_TO_DATE",lastTs:Oi});La(to=>{var Rn=jo(to);try{localStorage.setItem(Ga,JSON.stringify(Rn))}catch(Io){}return Rn});try{window.dispatchEvent(new Event("fof_checkin_updated"))}catch(to){}try{Bt("client.coach.checkin.completed",{modeKey:ds,surfaceKey:ui,ts:Oi})}catch(to){}ta("Check-in submitted","Nice \u2014 your coach will see this in their dashboard. In production: this would create a secure, timestamped entry and update compliance states.")},ms=()=>{La(Oi=>({...Oi,status:"DUE"}));try{Bt("client.coach.checkin.set_due",{modeKey:ds,surfaceKey:ui})}catch(Oi){}},ss=(Oi,jo)=>La(to=>({...to,[Oi]:jo})),ds=React.useMemo(()=>(Bi?"LINKED":"INDEPENDENT")+"::"+(hi||"FREE"),[Bi,hi]),Xs=React.useMemo(()=>"fof_client_plan_requests_v1::"+ui+"__"+ds,[ui,ds]),[Wo,Po]=React.useState(0),Eo=React.useCallback(()=>{try{var Oi=localStorage.getItem(Xs);if(!Oi)return Po(0);var jo=JSON.parse(Oi)||[];Po(jo.filter(to=>to&&to.status==="PENDING").length)}catch(Oi){Po(0)}},[Xs]);if(React.useEffect(()=>{var Oi=()=>Eo();try{window.addEventListener("fof_planreq_updated",Oi)}catch(jo){}return()=>{try{window.removeEventListener("fof_planreq_updated",Oi)}catch(jo){}}},[Eo]),React.useEffect(()=>{Eo();var Oi=()=>Eo(),jo=to=>{to&&to.key===Xs&&Eo()};return window.addEventListener("fof_plan_requests_updated",Oi),window.addEventListener("storage",jo),()=>{window.removeEventListener("fof_plan_requests_updated",Oi),window.removeEventListener("storage",jo)}},[Eo,Xs]),Bi){var Oi=ls&&(ls.coachName||ls.name)?ls.coachName||ls.name:"Your coach",jo=ls&&ls.planName?ls.planName:"Your plan",to=ca.status==="UP_TO_DATE"?"good":"warn",Rn=ca.status==="UP_TO_DATE"?"Up to date":"Due";return React.createElement("div",{className:"space-y-4"},React.createElement(Ua,{title:"Coach",subtitle:"Updates, check-ins, and messages \u2014 client-facing and clean.",right:React.createElement("span",{className:"text-[9px] font-mono text-white/55"},"Linked")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-extrabold text-[14px] leading-tight"},Oi),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},jo," \u2022 your coach can review your check-ins and adjust your week.")),React.createElement("button",{type:"button",onClick:()=>ta("Coach profile","Coach profile view (client-facing). In production: coach bio, specialties, availability, and contact preferences."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"View ",React.createElement(_,{name:"ChevronRight",size:14,className:"inline"}))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement(zt,{tone:"violet",icon:"MessageSquare",onClick:()=>{try{Bt("client.coach.message.clicked",{surfaceKey:ui})}catch(Io){}ta("Message","Secure client\u2194coach messaging (demo).")}},"Message"),React.createElement(zt,{tone:"sky",icon:"ClipboardCheck",onClick:()=>{try{Bt("client.coach.checkin.opened",{surfaceKey:ui})}catch(Io){}ta("Check-in","Scroll down \u2014 the Check-in card is right below.")}},"Check-in"),React.createElement(zt,{tone:"lime",icon:"Calendar",onClick:()=>{try{Bt("client.coach.plan.opened",{surfaceKey:ui})}catch(Io){}X("PLAN")}},"Plan"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Check-in"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"A quick signal for your coach \u2014 takes 20 seconds.")),React.createElement(di,{label:"Status",value:Rn,tone:to,onClick:()=>ta("Check-in status",ca.status==="UP_TO_DATE"?"Last submitted: "+(ca.lastTs||"\u2014"):"Check-in is due. Submit to keep your coach updated.")})),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[9px] uppercase tracking-widest text-white/60 font-bold"},"Mood"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Great","Okay","Low"].map(Io=>React.createElement("button",{key:Io,type:"button",onClick:()=>ss("mood",Io),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(ca.mood===Io?"border-sky-400/40 bg-sky-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Io)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[9px] uppercase tracking-widest text-white/60 font-bold"},"Soreness"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Low","Moderate","High"].map(Io=>React.createElement("button",{key:Io,type:"button",onClick:()=>ss("soreness",Io),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(ca.soreness===Io?"border-amber-400/40 bg-amber-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Io)))),React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/4 p-3"},React.createElement("div",{className:"text-[9px] uppercase tracking-widest text-white/60 font-bold"},"Sleep"),React.createElement("div",{className:"mt-2 flex gap-2 flex-wrap"},["Good","Mixed","Poor"].map(Io=>React.createElement("button",{key:Io,type:"button",onClick:()=>ss("sleep",Io),className:`px-3 py-2 rounded-full border text-[12px] font-semibold
                                                    `+(ca.sleep===Io?"border-emerald-400/40 bg-emerald-400/10 text-white":"border-white/12 bg-white/5 text-white/70 hover:bg-white/10")},Io))))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement("button",{type:"button",onClick:fi,className:`rounded-2xl px-4 py-3 font-semibold text-[13px] flex items-center justify-center gap-2 border transition-colors
                                        `+(ca.status==="UP_TO_DATE"?"bg-white/5 border-white/12 text-white/70 hover:bg-white/10":"bg-[rgba(77,233,255,0.12)] border-[rgba(77,233,255,0.35)] text-white hover:bg-[rgba(77,233,255,0.18)]")},React.createElement(_,{name:"Send",size:16})," ",ca.status==="UP_TO_DATE"?"Submitted":"Submit check-in"),React.createElement("button",{type:"button",onClick:()=>ta("What your coach sees","In production: your coach sees your check-in timeline, readiness trend, and adherence. They can adjust your plan, assign content, and send notes back to you."),className:"rounded-2xl px-4 py-3 font-semibold text-[13px] flex items-center justify-center gap-2 border border-white/12 bg-white/5 hover:bg-white/10 text-white"},React.createElement(_,{name:"Eye",size:16})," What coach sees")),React.createElement("div",{className:"mt-3 text-[11px] text-white/55"},ca.status==="UP_TO_DATE"?React.createElement("button",{type:"button",onClick:ms,className:"underline underline-offset-4 hover:text-white/80"},"Set as due (demo)"):React.createElement("span",null,"Tip: keep it short \u2014 the coach only needs signals, not essays."))),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Status snapshot"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"Lightweight status indicators (no scary labels).")),Wo>0?React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-amber-400/10 text-amber-200 border border-amber-400/35"},Wo," plan request",Wo>1?"s":""," pending"):React.createElement("span",{className:"px-2.5 py-1 rounded-full text-[11px] bg-emerald-400/10 text-emerald-200 border border-emerald-400/35"},"On track")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},[{t:"Check-in",v:Rn,tone:to},{t:"Wearable",v:"Not yet",tone:"brand"},{t:"Plan",v:Wo>0?"Waiting":"Active",tone:Wo>0?"warn":"good"}].map(Io=>React.createElement("div",{key:Io.t,className:`rounded-2xl border px-3 py-2
                                        `+(Io.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":Io.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[9px] uppercase tracking-widest text-white/60 font-bold"},Io.t),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold text-white"},Io.v)))),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement(zt,{tone:"sky",icon:"ShieldCheck",onClick:()=>ta("Status details","In production: detailed compliance timeline and coach notes appear here. This stays client-friendly (no internal risk labels).")},"View details"),React.createElement(zt,{tone:"violet",icon:"ClipboardList",onClick:()=>{X("PLAN"),ta("Plan requests","If you request swaps/reschedules, they show up for your coach. In this demo you can create requests inside the Plan tab.")}},"Review plan requests"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"AI + Coach blend"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Your coach stays in control. AI helps with suggestions and summaries \u2014 your coach approves the final plan.")),React.createElement("button",{type:"button",onClick:()=>ta("AI + Coach blend","Linked clients: AI can propose session swaps based on readiness/sleep and summarize your check-ins. Your coach is the decision-maker (approvals + plan locks)."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"How it works")))))}return Pa?React.createElement("div",{className:"space-y-4"},React.createElement(Ua,{title:"AI Coach",subtitle:"Quick tools \u2014 no clutter. Uses your capacity score trend to guide the week.",right:React.createElement("span",{className:"text-[9px] font-mono text-white/55"},"AI")},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},React.createElement(zt,{tone:"violet",icon:"Sparkles",onClick:()=>{try{Bt("client.ai.ask.opened",{surfaceKey:ui})}catch(Oi){}ta("Ask AI (demo)","In production: chat with context (goals, readiness, equipment, schedule).")}},"Ask AI"),React.createElement(zt,{tone:"sky",icon:"Calendar",onClick:()=>{try{Bt("client.ai.plan.adjust.clicked",{surfaceKey:ui})}catch(Oi){}X("PLAN"),ta("AI planning","In Plan: AI suggests swaps/reschedules using readiness trend.")}},"Adjust my week"),React.createElement(zt,{tone:"lime",icon:"HeartPulse",onClick:()=>{try{Bt("client.ai.recovery.insights.clicked",{surfaceKey:ui})}catch(Oi){}ta("Recovery insights (demo)","Sleep + soreness + strain summary. With wearables, this becomes automatic.")}},"Recovery insights"),React.createElement(zt,{tone:"sky",icon:"Utensils",onClick:()=>{try{Bt("client.ai.nutrition.clicked",{surfaceKey:ui})}catch(Oi){}ta("AI nutrition (demo)","Generate meal suggestions + macro guidance based on your goal and training load.")}},"Nutrition help")),React.createElement("div",{className:"mt-4 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"Weekly readiness tune"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"AI can nudge intensity up/down based on your trend.")),React.createElement("button",{type:"button",onClick:()=>ta("Capacity Score evolution","In production: a weekly graph and \u201Cwhy it changed\u201D explanation (sleep, load, recovery, adherence)."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Preview")),React.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},[{t:"Trend",v:"Stable",tone:"good"},{t:"Load",v:"Moderate",tone:"warn"},{t:"Next week",v:"Adjust",tone:"brand"}].map(Oi=>React.createElement("div",{key:Oi.t,className:`rounded-2xl border px-3 py-2
                                        `+(Oi.tone==="good"?"border-emerald-400/35 bg-emerald-400/10":Oi.tone==="warn"?"border-amber-400/35 bg-amber-400/10":"border-sky-400/35 bg-sky-400/10")},React.createElement("div",{className:"text-[9px] uppercase tracking-widest text-white/60 font-bold"},Oi.t),React.createElement("div",{className:"mt-1 text-[12px] font-extrabold text-white"},Oi.v))))))):React.createElement("div",{className:"space-y-4"},React.createElement(Ua,{title:"Guidance",subtitle:"Basic guidance + navigation. Upgrade unlocks AI coaching.",right:React.createElement("span",{className:"text-[9px] font-mono text-white/55"},"Free")},React.createElement("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-white font-bold text-[12px]"},"What you can do here"),React.createElement("div",{className:"text-white/60 text-[11px] mt-1"},"Browse the library, track basics, and follow your plan.")),React.createElement("button",{type:"button",onClick:()=>ta("Guidance vs AI","Free: basic content + tracking. AI tier: readiness-based planning, smart suggestions, and summaries."),className:"px-3 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Compare")),React.createElement("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement(zt,{tone:"sky",icon:"Library",onClick:()=>X("LIBRARY")},"Open Library"),React.createElement(zt,{tone:"lime",icon:"Calendar",onClick:()=>X("PLAN")},"View Plan"),React.createElement(zt,{tone:"violet",icon:"Activity",onClick:()=>X("TRACK")},"Track"))),React.createElement("div",{className:"mt-4 rounded-2xl border border-[rgba(168,85,255,0.25)] bg-[rgba(168,85,255,0.08)] p-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Upgrade to AI Coach"),React.createElement("div",{className:"mt-1 text-[13px] text-white/80"},"Unlock readiness-based suggestions, smarter weekly planning, and AI insights.")),React.createElement("button",{type:"button",onClick:()=>{try{Bt("upsell.ai_from_coach_tab",{surfaceKey:ui})}catch(Oi){}ta("Unlock AI Coach","In production: subscription paywall. For demo: switch tier using the Account button in header.")},className:"px-3 py-2 rounded-2xl border border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.18)] text-[12px] text-white"},"Unlock AI")))))},so=()=>React.createElement(ns,{onBack:()=>{},onHome:()=>{},canGoBack:!1},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"w-full max-w-lg rounded-[28px] border border-white/15 bg-white/6 backdrop-blur-2xl shadow-[0_25px_90px_rgba(0,0,0,0.55)] p-6"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/60 font-bold"},"Choose how you train"),React.createElement("div",{className:"mt-2 text-white text-[18px] font-extrabold"},"Pick your dashboard mode"),React.createElement("div",{className:"mt-1 text-[12px] text-white/65"},"Linked is for coach-led training. Independent is for solo plans (free, trial, or AI)."),React.createElement("div",{className:"mt-5 space-y-3"},React.createElement(zt,{tone:"violet",icon:"Users",onClick:()=>{fe("LINKED"),z(!1),X("HOME")}},"Linked with my coach"),React.createElement(zt,{tone:"sky",icon:"User",onClick:()=>{fe("INDEPENDENT"),z(!1),X("HOME")}},"Independent (solo)")),React.createElement("div",{className:"mt-5 rounded-2xl border border-white/12 bg-white/5 p-4"},React.createElement("div",{className:"text-white font-bold text-[12px] flex items-center gap-2"},React.createElement(_,{name:"Sparkles",size:16})," Tier"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2"},React.createElement("button",{onClick:()=>W("FREE"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(ne==="FREE"?"border-sky-400/45 bg-sky-400/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Free"),React.createElement("div",{className:"text-white/60 text-[9px]"},"Guidance")),React.createElement("button",{onClick:()=>W("TRIAL"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(ne==="TRIAL"?"border-amber-400/45 bg-amber-400/10":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"Trial"),React.createElement("div",{className:"text-white/60 text-[9px]"},"Full access")),React.createElement("button",{onClick:()=>W("AI"),type:"button",className:"rounded-2xl border px-3 py-2 text-left "+(ne==="AI"?"border-[rgba(168,85,255,0.45)] bg-[rgba(168,85,255,0.12)]":"border-white/12 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"text-white font-semibold text-[12px]"},"AI Coach"),React.createElement("div",{className:"text-white/60 text-[9px]"},"Paid"))),React.createElement("div",{className:"mt-5 flex justify-between"},React.createElement("button",{type:"button",onClick:i,className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Log out"),React.createElement("button",{type:"button",onClick:()=>ta("Mode choice","This is used when the user reaches dashboard from Login (not onboarding).\\n\\nFrom onboarding, we can skip this and route directly to the correct dashboard type."),className:"px-4 py-2 rounded-2xl border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/80"},"Why this?")))))),uo=()=>{var ui=B==="HOME"?"Today":B==="PLAN"?"Plan":B==="TRACK"?"Track":B==="LIBRARY"?"Library":la,vi=B==="HOME"?Ie==="LINKED"?"Coach-led day, simplified.":ne==="AI"?"AI-led day, simplified.":"Simple guidance for today.":B==="PLAN"?"Your week, your focus.":B==="TRACK"?"Scores, habits, and logs.":B==="LIBRARY"?"Programs, sessions, packs.":Ie==="LINKED"?"Coach hub.":ne==="AI"?"AI coach hub.":"Guidance hub.";return React.createElement("div",{className:"shrink-0 z-40"},React.createElement("div",{className:"px-4 pt-4 pb-3"},React.createElement("div",{className:"rounded-[26px] border border-white/15 bg-white/6 backdrop-blur-2xl shadow-[0_20px_80px_rgba(0,0,0,0.45)] px-4 py-3"},React.createElement("div",{className:"mt-2 rounded-[20px] border border-white/12 bg-white/5 px-3 py-2.5"},React.createElement("div",{className:"flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-8 h-8 rounded-xl bg-midnight-950 border border-white/12 flex items-center justify-center"},React.createElement("span",{className:"font-display font-extrabold text-white text-[14px]"},"F")),React.createElement("div",{className:"font-display font-extrabold text-white text-[14px] tracking-tight"},"FlowOFit")),React.createElement("span",{className:"inline-flex items-center gap-1 rounded-full border border-white/12 bg-midnight-950/40 px-2 py-1 text-[11px] text-white/70"},React.createElement(_,{name:"Sparkles",size:12}),"FlowOS")),React.createElement("div",{className:"mt-2 flex items-center justify-between gap-2 flex-wrap"},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("div",{className:"text-[11px] uppercase tracking-[0.22em] text-white/55 font-bold"},"Mode"),React.createElement("div",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold border "+(Ie==="LINKED"?"border-[rgba(168,85,255,0.45)] bg-[rgba(168,85,255,0.14)]":ne==="AI"?"border-[rgba(16,255,97,0.45)] bg-[rgba(16,255,97,0.14)]":ne==="TRIAL"?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.14)]":"border-white/12 bg-white/5")},Ie==="LINKED"?"Linked \u2022 Coach-led":ne==="AI"?"Independent \u2022 AI":ne==="TRIAL"?"Independent \u2022 Trial":"Independent \u2022 Free"),React.createElement("button",{type:"button",onClick:()=>{Ie!=="LINKED"&&ne==="FREE"?ta("Start Trial","Trial unlocks full Plan + Track actions (swap/reschedule, wearables, habits)."):Ie!=="LINKED"&&ne==="TRIAL"?ta("Trial","You have full access during Trial (demo)."):Ie!=="LINKED"&&ne==="AI"?ta("AI Coach","AI mode: tune your week based on readiness + schedule constraints."):ta("Linked mode","Linked clients: your coach approves plan changes.")},className:"px-3 py-2 whitespace-nowrap rounded-full border text-[12px] font-semibold inline-flex items-center gap-2 "+(Ie==="LINKED"?"border-[rgba(168,85,255,0.35)] bg-[rgba(168,85,255,0.12)] hover:bg-[rgba(168,85,255,0.16)] text-white":ne==="FREE"||ne==="TRIAL"?"border-[rgba(77,233,255,0.35)] bg-[rgba(77,233,255,0.10)] hover:bg-[rgba(77,233,255,0.14)] text-white":"border-[rgba(16,255,97,0.35)] bg-[rgba(16,255,97,0.10)] hover:bg-[rgba(16,255,97,0.14)] text-white"),title:"What changes in this mode?"},React.createElement(_,{name:"Sparkles",size:14}),Ie==="LINKED"?"Mode details":ne==="FREE"?"Start Trial":ne==="TRIAL"?"Trial details":"AI details"))),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},Ie==="LINKED"?"Coach approves changes. Your plan requests are queued for review.":ne==="FREE"?"Limited actions. Start Trial or AI to unlock swaps, wearables, and deeper tracking.":ne==="TRIAL"?"Full access (demo). Try wearables + week adjustments before choosing a plan.":"AI adjusts your week using readiness + wearables signals (when connected)."),React.createElement("div",{className:"mt-2 flex items-center gap-2 flex-wrap justify-end"},React.createElement("button",{type:"button",onClick:()=>z(!0),className:"px-3 py-2 whitespace-nowrap rounded-full border border-white/12 bg-white/5 hover:bg-white/10 text-[12px] text-white/85 inline-flex items-center gap-2",title:"Change mode"},React.createElement(_,{name:"Sliders",size:14}),"Change"),React.createElement("button",{type:"button",onClick:()=>Ht(hi=>hi==="FITNESS"?"NUTRITION":hi==="NUTRITION"?"YOGA":"FITNESS"),className:"px-3 py-2 whitespace-nowrap rounded-xl border border-white/12 bg-midnight-950/40 hover:bg-white/10 text-[12px] text-white/85 inline-flex items-center gap-2",title:"Toggle focus pillar"},React.createElement(_,{name:"Target",size:14}),"Focus: ",H),React.createElement("button",{type:"button",onClick:()=>{try{Bt&&Bt("auth.logout",{role:"CLIENT"})}catch(hi){}i&&i()},className:"px-3 py-2 whitespace-nowrap rounded-xl border border-white/12 bg-midnight-950/40 hover:bg-white/10 text-[12px] text-white/85 inline-flex items-center gap-2",title:"Logout"},React.createElement(_,{name:"LogOut",size:14}),"Logout"))))))},an=()=>React.createElement("div",{className:"shrink-0 z-40"},React.createElement("div",{className:"px-4 pb-4 pt-2"},React.createElement("div",{className:"rounded-[26px] border border-white/15 bg-white/6 backdrop-blur-2xl shadow-[0_20px_80px_rgba(0,0,0,0.45)] p-2"},React.createElement("div",{className:"grid grid-cols-5 gap-2"},[{k:"HOME",t:"Home",i:"Home"},{k:"PLAN",t:"Plan",i:"CalendarDays"},{k:"TRACK",t:"Track",i:"Activity"},{k:"LIBRARY",t:"Library",i:"Library"},{k:"COACH",t:la,i:Ie==="LINKED"?"Users":"Sparkles"}].map(vi=>{var hi=B===vi.k||vi.k==="COACH"&&B==="COACH";return React.createElement("button",{key:vi.k,type:"button",onClick:()=>{X(vi.k);try{Bt("client.nav",{to:vi.k,surfaceKey:xa})}catch(ls){}},className:`rounded-2xl px-2 py-2.5 border transition-colors text-center
                                            `+(hi?"border-[rgba(77,233,255,0.45)] bg-[rgba(77,233,255,0.12)]":"border-white/10 bg-white/5 hover:bg-white/10")},React.createElement("div",{className:"flex items-center justify-center"},React.createElement(_,{name:vi.i,size:18,className:"text-white"})),React.createElement("div",{className:"mt-1 text-[9px] font-bold "+(hi?"text-white":"text-white/65")},vi.t))}))))),Qi=({children:ui})=>React.createElement("div",{className:"min-h-screen w-full overflow-hidden",style:{background:"radial-gradient(circle at 10% 0%, rgba(77,233,255,0.20), transparent 55%),radial-gradient(circle at 90% 10%, rgba(168,85,255,0.18), transparent 60%),radial-gradient(circle at 50% 100%, rgba(16,255,97,0.14), transparent 55%),linear-gradient(180deg, rgba(2,6,23,0.96) 0%, rgba(5,11,39,0.96) 100%)"}},React.createElement("div",{className:"pointer-events-none absolute inset-0 opacity-[0.12]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.08) 1px, transparent 1px)",backgroundSize:"46px 46px"}}),React.createElement("div",{className:"relative z-10"},ui));return J?React.createElement(so,null):React.createElement(Qi,null,React.createElement("div",{className:"h-screen min-h-screen flex flex-col overflow-hidden"},React.createElement(uo,null),React.createElement("div",{className:"flex-1 px-4 pb-2 overflow-y-auto scroll-area"},React.createElement("div",{className:"max-w-5xl mx-auto"},B==="HOME"&&React.createElement(ct,{key:"home_"+xa}),B==="PLAN"&&React.createElement(Wi,{key:"plan_"+xa,clientMode:Ie,tier:ne,coachContext:tt,focusPillar:H}),B==="TRACK"&&React.createElement(Wa,{key:"track_"+xa,clientMode:Ie,tier:ne,coachContext:tt,habits:He,setHabits:Ca,readiness:Nt,recovery:L,strain:Q}),B==="LIBRARY"&&React.createElement(Hs,{key:"lib_"+xa,clientMode:Ie,tier:ne}),B==="COACH"&&React.createElement(ks,{key:"coach_"+xa+"__"+Ie+"__"+ne,surfaceKey:xa,clientMode:Ie,tier:ne,coachContext:tt}))),React.createElement(an,null)))},Jn=i=>{try{var s=typeof PlanBuilder!="undefined"?PlanBuilder:null;return s?React.createElement(s,{...i}):React.createElement("div",{className:"rounded-2xl border border-rose-400/20 bg-rose-500/10 p-4"},React.createElement("div",{className:"text-sm font-extrabold text-rose-100"},"Plan Builder unavailable"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"This build expects a ",React.createElement("span",{className:"font-mono"},"PlanBuilder")," component, but it isn't defined in the current scope. If you recently merged files, ensure the PlanBuilder block exists above this route."))}catch(s){return React.createElement("div",{className:"rounded-2xl border border-rose-400/20 bg-rose-500/10 p-4"},React.createElement("div",{className:"text-sm font-extrabold text-rose-100"},"Plan Builder crashed"),React.createElement("div",{className:"mt-1 text-[12px] text-white/70"},"An error occurred while rendering Plan Builder."))}},wn=({setView:i})=>React.createElement("div",{className:"h-full flex flex-col gap-4"},React.createElement("div",{className:"flex items-end justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-2xl font-semibold"},"Plans"),React.createElement("div",{className:"text-white/60 text-sm mt-1"},"Choose what you want to do."))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("button",{onClick:()=>i("PLAN_ASSIGN"),className:"text-left bg-panel border border-white/10 rounded-2xl p-5 hover:border-white/20 hover:bg-white/[0.03] transition"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-lg font-semibold"},"Assign Plan"),React.createElement("div",{className:"text-white/50 text-sm"},"\u2192")),React.createElement("div",{className:"text-white/60 text-sm mt-2"},"Select a client or group, attach an existing plan, or start a new one."),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Client / Group"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Use existing"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Review calendar"))),React.createElement("button",{onClick:()=>i("PLAN_BUILDER"),className:"text-left bg-panel border border-white/10 rounded-2xl p-5 hover:border-white/20 hover:bg-white/[0.03] transition"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-lg font-semibold"},"Plan Builder"),React.createElement("div",{className:"text-white/50 text-sm"},"\u2192")),React.createElement("div",{className:"text-white/60 text-sm mt-2"},"Build or edit plans in the full builder workspace."),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Templates"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Week editor"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Save & iterate"))),React.createElement("button",{onClick:()=>i("PLAN_AI_GENERATOR"),className:"text-left bg-panel border border-white/10 rounded-2xl p-5 hover:border-white/20 hover:bg-white/[0.03] transition"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-11 h-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement("span",{className:"text-xl"},"\u2728")),React.createElement("div",null,React.createElement("div",{className:"text-lg font-semibold"},"AI Generator"),React.createElement("div",{className:"text-white/60 text-sm"},"Generate a week draft you can edit or assign."))),React.createElement("div",{className:"text-white/50 text-sm"},"\u2192")),React.createElement("div",{className:"text-white/60 text-sm mt-2"},"Create structured workouts (blocks + exercises) and send to Plan Builder or Assign Plan."),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Week draft"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Swap / Reduce"),React.createElement("span",{className:"px-2 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/70"},"Send to Assign"))))),fr=()=>React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-lg font-semibold"},"Marketplace"),React.createElement("div",{className:"mt-1 text-sm text-white/60"},"This surface isn\u2019t wired in this prototype yet.")),Vl=({active:i,done:s,label:x,onClick:S})=>React.createElement("button",{onClick:S,className:"rounded-full px-3 py-1 text-xs border "+(i?"border-white/20 bg-white/10":s?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10"),type:"button"},x),sd="fof_magic_links_v2",yr=7*24*60*60*1e3,Mn=()=>{try{var i=JSON.parse(localStorage.getItem(sd)||"[]");return Array.isArray(i)?i:[]}catch(i){return[]}},Gr=i=>{try{localStorage.setItem(sd,JSON.stringify((i||[]).slice(0,50)))}catch(s){}},En=i=>{var s=Date.now();return i?i.revokedAt?"revoked":i.activatedAt?"activated":i.openedAt?"opened":i.expiresAt&&s>i.expiresAt?"expired":i.status||"sent":"unknown"},Ir=i=>{try{return String((i==null?void 0:i.id)||(i==null?void 0:i._id)||(i==null?void 0:i.email)||(i==null?void 0:i.name)||"unknown")}catch(s){return"unknown"}},Vn=i=>{var s=Ir(i);if(!s)return null;try{return(Mn()||[]).find(u=>String((u==null?void 0:u.clientId)||"")===s)||null}catch(x){return null}},od=i=>{var s=String(i||"unknown");return s==="activated"?{label:"Activated",cls:"border-emerald-500/35 bg-emerald-500/15 text-emerald-100"}:s==="opened"?{label:"Opened",cls:"border-cyan-400/30 bg-cyan-500/10 text-cyan-100"}:s==="expired"?{label:"Expired",cls:"border-rose-500/30 bg-rose-500/10 text-rose-100"}:s==="revoked"?{label:"Revoked",cls:"border-white/10 bg-white/5 text-white/40"}:s==="sent"?{label:"Sent",cls:"border-amber-500/30 bg-amber-500/10 text-amber-100"}:{label:s.toUpperCase(),cls:"border-white/10 bg-white/5 text-white/70"}};function Rr({client:i,className:s="",hideWhenNone:x=!1}){var[S,u]=React.useState(0);React.useEffect(()=>{var B=setInterval(()=>u(X=>X+1),1200);return()=>clearInterval(B)},[]);var $=React.useMemo(()=>Vn(i),[i,S]);if(!$&&x)return null;var tt=En($),ue=od(tt);var Ie="No link issued yet";if($){var B=$.expiresAt?new Date($.expiresAt).toLocaleString():"\u2014";Ie=`Latest magic link: ${ue.label} \u2022 Expires: ${B}`}var fe="";try{if($!=null&&$.expiresAt&&!($!=null&&$.revokedAt)){var B=$.expiresAt-Date.now();if(B>0){var X=Math.floor(B/6e4),ne=Math.floor(X/60),W=Math.floor(ne/24);W>=1?fe=`${W}d`:ne>=1?fe=`${ne}h`:fe=`${Math.max(1,X)}m`}}}catch(B){}return React.createElement("span",{title:Ie,className:"inline-flex items-center gap-1 rounded-full border px-2 py-1 text-[9px] font-extrabold uppercase tracking-wider "+ue.cls+" "+(s||"")},React.createElement("span",null,ue.label),fe?React.createElement("span",{className:"opacity-80"},"\u2022 ",fe):null)}var nd=i=>{var s=Mn(),x=String((i==null?void 0:i.id)||""),S=[i,...s.filter(u=>String((u==null?void 0:u.id)||"")!==x)];return Gr(S),S},pl=i=>{var s=String(i||"");if(!s)return;var S=Mn().map(u=>{if(String((u==null?void 0:u.id)||"")!==s)return u;var $=Date.now();return{...u,revokedAt:$,status:"revoked"}});return Gr(S),!0},rd=(i,s)=>{var x=String(i||""),S=Number(s||0);if(!x||!S)return;var $=Mn().map(tt=>{if(String((tt==null?void 0:tt.id)||"")!==x)return tt;var ue=tt.expiresAt&&tt.expiresAt>Date.now()?tt.expiresAt:Date.now();return{...tt,expiresAt:ue+S}});return Gr($),!0},bl=i=>{var s=String(i||"");if(!s)return;var x=Mn();var S=!1;var u=x.map($=>{if(String(($==null?void 0:$.id)||"")!==s||$.revokedAt)return $;var tt=Date.now(),ue=$.openedAt||tt;return S=!0,{...$,openedAt:ue,status:"opened"}});return S&&Gr(u),S},El=i=>{var s=String(i||"");if(!s)return;var x=Mn();var S=!1;var u=x.map($=>{if(String(($==null?void 0:$.id)||"")!==s||$.revokedAt)return $;var tt=Date.now(),ue=$.openedAt||tt,Ie=$.activatedAt||tt;return S=!0,{...$,openedAt:ue,activatedAt:Ie,status:"activated"}});return S&&Gr(u),S},Nr=(i,s={})=>{var Ie,fe;var x=(Math.random().toString(16).slice(2)+Math.random().toString(16).slice(2)).slice(0,28),S=Number((Ie=s.ttlMs)!=null?Ie:yr)||yr,u=Date.now(),$=u+S,tt=`${location.origin}${location.pathname}#magic-login?token=${x}`,ue={id:x,clientId:(i==null?void 0:i.id)||(i==null?void 0:i._id)||(i==null?void 0:i.email)||(i==null?void 0:i.name)||"unknown",clientName:(i==null?void 0:i.name)||(i==null?void 0:i.fullName)||"Client",email:(i==null?void 0:i.email)||"",url:tt,issuedAt:u,expiresAt:$,status:"sent",openedAt:null,activatedAt:null,revokedAt:null};nd(ue);try{(fe=navigator.clipboard)==null||fe.writeText(tt)}catch(B){}return ue},Fn=i=>{var s=typeof i=="string"?{message:i}:i||{},x=String(s.message||s.title||"");if(x){try{window.dispatchEvent(new CustomEvent("fof:toast",{detail:s}))}catch(S){}try{window.dispatchEvent(new CustomEvent("flowofit:toast",{detail:s}))}catch(S){}try{var S="fof_dom_toast__v1";var u=document.getElementById(S);u||(u=document.createElement("div"),u.id=S,u.style.position="fixed",u.style.left="50%",u.style.bottom="18px",u.style.transform="translateX(-50%)",u.style.zIndex="99999",u.style.pointerEvents="none",document.body.appendChild(u)),u.innerHTML="";var $=document.createElement("div");$.style.pointerEvents="none",$.style.maxWidth="92vw",$.style.background="rgba(0,0,0,0.75)",$.style.border="1px solid rgba(255,255,255,0.12)",$.style.backdropFilter="blur(8px)",$.style.webkitBackdropFilter="blur(8px)",$.style.color="rgba(255,255,255,0.92)",$.style.padding="10px 12px",$.style.borderRadius="16px",$.style.fontSize="12px",$.style.fontFamily='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',$.style.boxShadow="0 10px 30px rgba(0,0,0,0.35)",$.textContent=x.length>140?x.slice(0,140)+"\u2026":x,u.appendChild($),clearTimeout(window.__fof_dom_toast_timer__),window.__fof_dom_toast_timer__=setTimeout(()=>{try{u.innerHTML=""}catch(tt){}},1800)}catch(S){}}};try{window.__fofToast=Fn}catch(i){}var Sr=({client:i,label:s="Send Magic Link",className:x="",onDone:S=null})=>i?React.createElement("button",{type:"button",onMouseDown:u=>{try{u.preventDefault(),u.stopPropagation()}catch($){}},onClick:u=>{try{u.preventDefault(),u.stopPropagation()}catch($){}try{var $=Nr(i);try{navigator.clipboard&&navigator.clipboard.writeText($.url)}catch(tt){}try{(window.__fofToast||Fn)({title:"Magic link copied",message:$.url})}catch(tt){}try{S&&S($)}catch(tt){}}catch($){try{(window.__fofToast||Fn)({title:"Magic link failed",message:String(($==null?void 0:$.message)||$||"Unknown error")})}catch(tt){}}},className:"rounded-xl border border-amber-500/25 bg-amber-500/10 hover:bg-amber-500/15 px-2.5 py-1.5 text-[11px] font-extrabold text-amber-200 transition-colors "+(x||""),title:"Send / Copy magic link"},s):null,ol=({clients:i=[],onPickClient:s,pickedClient:x})=>{var[S,u]=React.useState("INDIVIDUAL"),[$,tt]=React.useState(""),[ue,Ie]=React.useState(Mn()),[fe,B]=React.useState(()=>[]),[X,ne]=React.useState(()=>"ALL"),[W,J]=React.useState(()=>yr);React.useEffect(()=>{var et=setInterval(()=>Ie(Mn()),800);return()=>clearInterval(et)},[]);var z=React.useMemo(()=>{var et=$.trim().toLowerCase();return et?i.filter(At=>(At.name||"").toLowerCase().includes(et)||(At.email||"").toLowerCase().includes(et)||String(At.id||"").toLowerCase().includes(et)):i},[i,$]),H=et=>En(et),Ht=et=>!["revoked","expired"].includes(H(et)),Nt=et=>Ht(et),U=React.useMemo(()=>new Set((fe||[]).map(String)),[fe]),Q=et=>{var At=String(et);B(ma=>{var Je=Array.isArray(ma)?ma.slice():[],Oa=Je.indexOf(At);return Oa>=0?Je.splice(Oa,1):Je.push(At),Je})},w=()=>{B(z.map(et=>String(et.id||et.email||et.name)))},L=()=>B([]),ut=et=>{var ma;var At=Nr(et,{ttlMs:W});try{(ma=navigator.clipboard)==null||ma.writeText(At.url)}catch(Je){}try{Fn({title:"Magic link copied",message:At.url})}catch(Je){}return At},ot=et=>{var At=[];(et||[]).forEach(ma=>{try{At.push(Nr(ma))}catch(Je){}}),Ie(Mn());try{Fn({title:"Magic links generated",message:`${At.length} link(s) created`})}catch(ma){}return At},ht=React.useMemo(()=>{if(X==="ALL")return z;try{if(window.__tagStore&&typeof window.__tagStore.getClientTagIds=="function")return(z||[]).filter(et=>(window.__tagStore.getClientTagIds(String(et.id))||[]||[]).map(String).includes(String(X)))}catch(et){}return z},[z,X]),ba=React.useMemo(()=>{var et=[{id:"ALL",name:"All clients"}];try{var At=window.__tagStore&&window.__tagStore.byId?window.__tagStore.byId:null;(At?Object.keys(At):[]).forEach(Je=>{var Oa=At[String(Je)];Oa&&Oa.name&&et.push({id:String(Je),name:String(Oa.name)})})}catch(At){}return et},[]);return React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},React.createElement("div",null,React.createElement("div",{className:"text-sm text-white/60"},"Utilities"),React.createElement("div",{className:"text-xl font-semibold"},"Magic Links"),React.createElement("div",{className:"mt-1 text-xs text-white/55"},"Generate secure login links for clients (single, group, or filtered bulk).")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"hidden sm:flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-2 py-1"},React.createElement("div",{className:"text-[11px] text-white/60"},"Expiry"),React.createElement("select",{value:String(W),onChange:et=>J(Number(et.target.value)||yr),className:"bg-transparent text-[11px] text-white/80 outline-none"},React.createElement("option",{value:String(60*60*1e3)},"1 hour"),React.createElement("option",{value:String(24*60*60*1e3)},"24 hours"),React.createElement("option",{value:String(7*24*60*60*1e3)},"7 days"),React.createElement("option",{value:String(30*24*60*60*1e3)},"30 days"))),["INDIVIDUAL","GROUP","BULK"].map(et=>React.createElement("button",{key:et,type:"button",onClick:()=>u(et),className:"rounded-xl px-3 py-2 text-xs font-extrabold uppercase tracking-wider border transition-colors "+(S===et?"border-amber-500/35 bg-amber-500/15 text-amber-100":"border-white/10 bg-white/5 text-white/70 hover:bg-white/10")},et==="INDIVIDUAL"?"Individual":et==="GROUP"?"Group":"Bulk")))),React.createElement("div",{className:"grid gap-3 lg:grid-cols-2"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",{className:"text-sm font-semibold"},"Client list"),S==="GROUP"?React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:w,className:"text-[11px] px-2 py-1 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10"},"Select all"),React.createElement("button",{type:"button",onClick:L,className:"text-[11px] px-2 py-1 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10"},"Clear")):null),React.createElement("input",{value:$,onChange:et=>tt(et.target.value),placeholder:"Search client\u2026",className:"mt-2 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm outline-none focus:border-white/20"}),S==="BULK"?React.createElement("div",{className:"mt-2 flex items-center gap-2"},React.createElement("div",{className:"text-[11px] text-white/60"},"Filter:"),React.createElement("select",{value:X,onChange:et=>ne(et.target.value),className:"flex-1 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm outline-none focus:border-white/20"},ba.map(et=>React.createElement("option",{key:et.id,value:et.id},et.name)))):null,React.createElement("div",{className:"mt-3 max-h-[360px] overflow-auto space-y-2"},(S==="BULK"?ht:z).slice(0,80).map(et=>{var At=String(et.id||et.email||et.name),ma=((x==null?void 0:x.id)||(x==null?void 0:x.email))===(et.id||et.email),Je=U.has(At);return React.createElement("button",{key:At,type:"button",onClick:()=>{if(S==="GROUP"){Q(At);return}s==null||s(et)},className:"w-full text-left rounded-xl border px-3 py-2 text-sm transition-colors flex items-center gap-2 "+(S==="GROUP"?Je?"border-white/20 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/10":ma?"border-white/20 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/10")},S==="GROUP"?React.createElement("span",{className:"h-4 w-4 rounded border flex items-center justify-center "+(Je?"border-amber-400/50 bg-amber-500/15":"border-white/15 bg-black/20")},Je?React.createElement(_,{name:"Check",size:12}):null):null,React.createElement("div",{className:"min-w-0 flex-1"},React.createElement("div",{className:"font-medium truncate"},et.name||"Client"),React.createElement("div",{className:"text-xs text-white/60 truncate"},et.email||et.phone||"")),React.createElement("span",{className:"text-[10px] text-white/40"},String(et.status||"").toUpperCase()))}),z.length===0&&React.createElement("div",{className:"text-sm text-white/60"},"No clients match."))),React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3"},S==="INDIVIDUAL"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Individual link"),React.createElement("button",{className:"rounded-xl px-3 py-2 text-sm border "+(x?"border-amber-500/40 bg-amber-500/15 hover:bg-amber-500/20":"border-white/10 bg-white/5 text-white/50"),disabled:!x,onClick:()=>{x&&(ut(x),Ie(Mn()))},type:"button"},"Send / Copy")),React.createElement("div",{className:"mt-3 text-sm text-white/70"},x?React.createElement("div",null,"Issuing for ",React.createElement("span",{className:"font-semibold"},x.name)):React.createElement("div",null,"Select a client on the left."))),S==="GROUP"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Group send"),React.createElement("button",{type:"button",disabled:(fe||[]).length===0,onClick:()=>{var et=(i||[]).filter(At=>U.has(String(At.id||At.email||At.name)));ot(et)},className:"rounded-xl px-3 py-2 text-sm border "+((fe||[]).length?"border-amber-500/40 bg-amber-500/15 hover:bg-amber-500/20":"border-white/10 bg-white/5 text-white/50")},"Generate ",(fe||[]).length||0," link(s)")),React.createElement("div",{className:"mt-3 text-sm text-white/70"},"Select multiple clients on the left, then generate links in one action.")),S==="BULK"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Bulk send"),React.createElement("button",{type:"button",disabled:(ht||[]).length===0,onClick:()=>{ot(ht)},className:"rounded-xl px-3 py-2 text-sm border "+((ht||[]).length?"border-amber-500/40 bg-amber-500/15 hover:bg-amber-500/20":"border-white/10 bg-white/5 text-white/50")},"Generate for ",ht.length)),React.createElement("div",{className:"mt-3 text-sm text-white/70"},"Generates a fresh link for each client in the current filter.")),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-sm font-semibold"},"Recent links"),React.createElement("button",{type:"button",onClick:()=>{try{Gr([]),Ie([]),Fn("Cleared recent links")}catch(et){}},className:"text-[11px] px-2 py-1 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10"},"Clear")),React.createElement("div",{className:"mt-2 space-y-2 max-h-[320px] overflow-auto"},ue.slice(0,20).map(et=>{var At=H(et),ma=Ht(et),Je=et.expiresAt?new Date(et.expiresAt).toLocaleString():"\u2014",Oa=et.openedAt?new Date(et.openedAt).toLocaleString():null,He=et.activatedAt?new Date(et.activatedAt).toLocaleString():null,Ca=ha=>{var K="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-bold border ";return ha==="activated"?K+"border-emerald-500/30 bg-emerald-500/15 text-emerald-100":ha==="opened"?K+"border-sky-500/30 bg-sky-500/15 text-sky-100":ha==="revoked"?K+"border-rose-500/30 bg-rose-500/15 text-rose-100":ha==="expired"?K+"border-white/10 bg-white/5 text-white/60":K+"border-amber-500/30 bg-amber-500/15 text-amber-100"};return React.createElement("div",{key:et.id,className:"rounded-xl border border-white/10 bg-black/25 p-2"},React.createElement("div",{className:"flex items-start justify-between gap-2"},React.createElement("div",{className:"min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"text-sm font-medium truncate"},et.clientName),React.createElement("span",{className:Ca(At)},At.toUpperCase())),React.createElement("div",{className:"mt-1 text-xs text-white/60 break-all"},et.url),React.createElement("div",{className:"mt-2 flex flex-wrap items-center gap-x-3 gap-y-1 text-[11px] text-white/50"},React.createElement("div",null,"Issued: ",new Date(et.issuedAt).toLocaleString()),React.createElement("div",null,"Expires: ",Je),Oa&&React.createElement("div",null,"Opened: ",Oa),He&&React.createElement("div",null,"Activated: ",He))),React.createElement("div",{className:"flex flex-col items-end gap-2 shrink-0"},React.createElement("button",{className:"rounded-lg border px-2 py-1 text-xs "+(ma?"border-white/10 bg-white/5 hover:bg-white/10":"border-white/10 bg-white/5 text-white/40 cursor-not-allowed"),onClick:()=>{var ha;if(ma)try{(ha=navigator.clipboard)==null||ha.writeText(et.url),Fn("Copied")}catch(K){}},type:"button"},"Copy"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{className:"rounded-lg border px-2 py-1 text-xs "+(At==="sent"||At==="opened"?"border-sky-500/30 bg-sky-500/10 hover:bg-sky-500/15 text-sky-100":"border-white/10 bg-white/5 text-white/40 cursor-not-allowed"),onClick:()=>{if(At==="sent"||At==="opened")try{El(et.id),Ie(Mn()),Fn({title:"Marked activated",message:et.clientName})}catch(ha){}},type:"button"},"Mark Activated"),React.createElement("button",{className:"rounded-lg border px-2 py-1 text-xs "+(At!=="revoked"?"border-rose-500/30 bg-rose-500/10 hover:bg-rose-500/15 text-rose-100":"border-white/10 bg-white/5 text-white/40 cursor-not-allowed"),onClick:()=>{if(At!=="revoked")try{pl(et.id),Ie(Mn()),Fn({title:"Revoked",message:et.clientName})}catch(ha){}},type:"button"},"Revoke")),React.createElement("button",{className:"rounded-lg border px-2 py-1 text-xs "+(At==="revoked"?"border-white/10 bg-white/5 text-white/40 cursor-not-allowed":"border-amber-500/30 bg-amber-500/10 hover:bg-amber-500/15 text-amber-100"),onClick:()=>{if(At!=="revoked")try{rd(et.id,24*60*60*1e3),Ie(Mn()),Fn("Extended +24h")}catch(ha){}},type:"button"},"Extend +24h"))))}),ue.length===0&&React.createElement("div",{className:"text-sm text-white/60"},"No links issued yet."))))))},zr=({token:i,onGoTrainer:s})=>{var tt;var[x,S]=React.useState(()=>{try{return Mn().find(Ie=>String(Ie.id)===String(i))||null}catch(ue){return null}});React.useEffect(()=>{if(i)try{bl(i);var ue=Mn();S(ue.find(Ie=>String(Ie.id)===String(i))||null)}catch(ue){}},[i]);var u=En(x),$=x&&!x.revokedAt&&(!x.expiresAt||Date.now()<=x.expiresAt);return React.createElement("div",{className:"p-4 space-y-4"},React.createElement("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4"},React.createElement("div",{className:"text-sm text-white/60"},"Magic Link"),React.createElement("div",{className:"text-xl font-semibold mt-1"},"Secure Login"),React.createElement("div",{className:"mt-2 text-sm text-white/70"},x?React.createElement(React.Fragment,null,"Client: ",React.createElement("span",{className:"font-semibold text-white"},x.clientName)):React.createElement(React.Fragment,null,"This link token wasn\u2019t found in local storage on this device (prototype limitation).")),React.createElement("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs"},React.createElement("span",{className:"rounded-full border border-white/10 bg-black/30 px-2 py-1 text-white/70"},"Status: ",String(u).toUpperCase()),(x==null?void 0:x.expiresAt)&&React.createElement("span",{className:"rounded-full border border-white/10 bg-black/30 px-2 py-1 text-white/70"},"Expires: ",new Date(x.expiresAt).toLocaleString())),React.createElement("div",{className:"mt-4 flex flex-wrap items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>{if(!$){try{Fn("Link not usable")}catch(ue){}return}try{El(i),Fn({title:"Activated",message:(x==null?void 0:x.clientName)||"Client"})}catch(ue){}try{S(Mn().find(ue=>String(ue.id)===String(i))||null)}catch(ue){}},className:"rounded-xl px-4 py-3 text-sm font-extrabold uppercase tracking-wider border "+($?"border-emerald-500/35 bg-emerald-500/15 text-emerald-100 hover:bg-emerald-500/20":"border-white/10 bg-white/5 text-white/50")},"Activate & Continue"),React.createElement("button",{type:"button",onClick:()=>{try{s==null||s()}catch(ue){}},className:"rounded-xl px-4 py-3 text-sm font-extrabold uppercase tracking-wider border border-white/10 bg-white/5 text-white/70 hover:bg-white/10"},"Back to Trainer")),React.createElement("div",{className:"mt-3 text-xs text-white/50"},"Prototype note: \u201COpened\u201D is recorded when this screen loads; \u201CActivated\u201D when you press Activate.",showAddSession&&React.createElement("div",{className:"fixed inset-0 z-[120] flex items-end md:items-center justify-center"},React.createElement("div",{className:"absolute inset-0 bg-black/60",onClick:()=>setShowAddSession(!1)}),React.createElement("div",{className:"relative w-full md:max-w-lg rounded-t-3xl md:rounded-3xl border border-white/10 bg-[#0b0f14] p-4 shadow-2xl"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-white/90 font-semibold"},"Add session"),React.createElement("div",{className:"text-white/50 text-xs mt-0.5"},"Booked / Completed / No\u2011show / Cancelled \u2022 PAYG or Package")),React.createElement("button",{onClick:()=>setShowAddSession(!1),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-2 text-xs text-white/80"},"Close")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Client"),React.createElement("select",{value:draftSession.clientId||"",onChange:ue=>setDraftSession(Ie=>({...Ie,clientId:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none"},React.createElement("option",{value:""},"Select a client\u2026"),clientRecords.map(ue=>React.createElement("option",{key:ue.id,value:ue.id},ue.name||ue.email||ue.id)))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Date"),React.createElement("input",{type:"date",value:draftSession.date||"",onChange:ue=>setDraftSession(Ie=>({...Ie,date:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Time"),React.createElement("input",{type:"time",value:draftSession.time||"09:00",onChange:ue=>setDraftSession(Ie=>({...Ie,time:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Status"),React.createElement("select",{value:draftSession.status||"BOOKED",onChange:ue=>setDraftSession(Ie=>({...Ie,status:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none"},React.createElement("option",{value:"BOOKED"},"Booked"),React.createElement("option",{value:"COMPLETED"},"Completed"),React.createElement("option",{value:"NO_SHOW"},"No-show"),React.createElement("option",{value:"CANCELLED"},"Cancelled"))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Billing"),React.createElement("select",{value:draftSession.billTo||"PAYG",onChange:ue=>setDraftSession(Ie=>({...Ie,billTo:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none"},React.createElement("option",{value:"PAYG"},"Pay-as-you-go"),React.createElement("option",{value:"PACKAGE"},"Package"))),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Price"),React.createElement("input",{type:"number",inputMode:"decimal",value:String((tt=draftSession.price)!=null?tt:""),onChange:ue=>setDraftSession(Ie=>({...Ie,price:ue.target.value})),className:"w-full rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none",placeholder:"0"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Paid"),React.createElement("button",{type:"button",onClick:()=>setDraftSession(ue=>({...ue,paid:!ue.paid})),className:"w-full rounded-2xl border px-3 py-2 text-[13px] text-white/85 "+(draftSession.paid?"border-emerald-400/30 bg-emerald-400/10":"border-white/10 bg-white/5 hover:bg-white/10")},draftSession.paid?"Paid":"Unpaid")),React.createElement("div",{className:"md:col-span-2"},React.createElement("div",{className:"text-[11px] text-white/55 mb-1"},"Notes"),React.createElement("textarea",{value:draftSession.notes||"",onChange:ue=>setDraftSession(Ie=>({...Ie,notes:ue.target.value})),className:"w-full min-h-[72px] rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[13px] text-white/85 outline-none",placeholder:"Optional\u2026"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{onClick:()=>setShowAddSession(!1),className:"rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 px-3 py-2 text-xs text-white/80"},"Cancel"),React.createElement("button",{onClick:()=>{var ue;try{addSession()}catch(Ie){try{(ue=window.__fofToast)==null||ue.call(window,{message:"Could not add session",tone:"warn"})}catch(fe){}}},className:"rounded-2xl border border-emerald-400/25 bg-emerald-400/10 hover:bg-emerald-400/15 px-4 py-2 text-xs font-semibold text-emerald-100"},"Add session")))))))},Al=()=>{React.useEffect(()=>{try{document.querySelectorAll("button:not([type])").forEach(Ge=>Ge.setAttribute("type","button"))}catch(Ge){}var sa=Ge=>{try{var $e=Ge&&Ge.target,Xa=$e&&$e.closest?$e.closest("a"):null;if(Xa&&Xa.getAttribute){var xi=Xa.getAttribute("href")||"";(xi==="#"||xi===""||xi.startsWith("#"))&&Ge.preventDefault()}var mi=$e&&$e.closest?$e.closest("button"):null;if(mi){var xi=(mi.getAttribute("type")||"").toLowerCase();!!(mi.closest&&mi.closest("form"))&&(xi===""||xi==="submit")&&Ge.preventDefault()}}catch($e){}},vt=Ge=>{try{Ge.preventDefault()}catch($e){}};return document.addEventListener("click",sa,!0),window.addEventListener("submit",vt,!0),()=>{document.removeEventListener("click",sa,!0),window.removeEventListener("submit",vt,!0)}},[]);var[i,s]=Ai(null),[x,S]=Ai({open:!1,client:null}),u=sa=>{try{S({open:!0,client:sa})}catch(vt){}},[$,tt]=Ai(()=>localStorage.getItem("flowofit_dev_mode")==="1"),ue=()=>{tt(sa=>{var vt=!sa;return localStorage.setItem("flowofit_dev_mode",vt?"1":"0"),Bt("admin.action.performed",{action:"dev_mode.toggle",enabled:vt}),ta("Developer Mode",vt?"Developer Mode enabled. Debug badges and a live event dock are now visible.":"Developer Mode disabled."),vt})};no(()=>{var sa=vt=>s(vt.detail);return window.addEventListener("flowofit:info",sa),()=>window.removeEventListener("flowofit:info",sa)},[]);var Ie=window.__FOF_BOOT_MODE||null,fe=Ie==="TRAINER",B=Ie==="CLIENT",[X,ne]=Ai(()=>fe||B?"DASHBOARD":"TENANT_CHECK");no(()=>{try{window.__FOF_SET_VIEW=sa=>{try{ne(sa)}catch(vt){}}}catch(sa){}return()=>{try{delete window.__FOF_SET_VIEW}catch(sa){}}},[ne]);var[W,J]=Ai(()=>fe?"TRAINER":B?"CLIENT":null);no(()=>{var vt;var sa=null;try{var Ge=W==="CLIENT"&&X==="DASHBOARD",$e=document.documentElement,Xa=document.body;if(sa={htmlFontSize:$e.style.fontSize,bodyMargin:Xa.style.margin,bodyPadding:Xa.style.padding,bodyFontFamily:Xa.style.fontFamily,bodyFontSize:Xa.style.fontSize,bodyOverflow:Xa.style.overflow,rootHeight:(vt=(document.getElementById("root")||{}).style)==null?void 0:vt.height},Ge){$e.classList.add("mode-client"),$e.style.fontSize="17px",Xa.style.margin="0",Xa.style.padding="0",Xa.style.fontFamily="'Plus Jakarta Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",Xa.style.fontSize="16px",Xa.style.overflowX="hidden",Xa.style.overflowY="auto";var mi=document.getElementById("root");mi&&mi.style&&(mi.style.height="100vh")}else{$e.classList.remove("mode-client"),$e.style.fontSize=sa.htmlFontSize||"",Xa.style.margin=sa.bodyMargin||"",Xa.style.padding=sa.bodyPadding||"",Xa.style.fontFamily=sa.bodyFontFamily||"",Xa.style.fontSize=sa.bodyFontSize||"",Xa.style.overflowX="",Xa.style.overflowY="",Xa.style.overflow=sa.bodyOverflow||"";var mi=document.getElementById("root");mi&&mi.style&&(mi.style.height=sa.rootHeight||"")}}catch(Ge){}return()=>{try{var Ge=document.documentElement,$e=document.body;if(Ge.classList.remove("mode-client"),sa){Ge.style.fontSize=sa.htmlFontSize||"",$e.style.margin=sa.bodyMargin||"",$e.style.padding=sa.bodyPadding||"",$e.style.fontFamily=sa.bodyFontFamily||"",$e.style.fontSize=sa.bodyFontSize||"",$e.style.overflowX="",$e.style.overflowY="",$e.style.overflow=sa.bodyOverflow||"";var Xa=document.getElementById("root");Xa&&Xa.style&&(Xa.style.height=sa.rootHeight||"")}}catch(Ge){}}},[W,X]);var[z,H]=Ai(null),[Ht,Nt]=Ai({}),[U,Q]=Ai(()=>"INDEPENDENT"),[w,L]=Ai([]),[ut,ot]=Ai(()=>fe||B?"DIRECT":null),[ht,ba]=Ai(""),[et,At]=Ai({email:"",mode:"code",code:"",link:""}),[ma,Je]=Ai({status:null,scenario:null,orgName:"Alex's Coaching",coachName:"Coach Alex",message:""}),[Oa,He]=Ai({icTotalCompleted:0,icYogaPureCompleted:0,events:[]}),Ca=(sa,vt={})=>{sa==="IC_ONBOARD_COMPLETE"&&He(Ge=>{var $e=new Date().toISOString(),Xa=Ge.events||[],mi={id:$e+"_"+(Xa.length+1),timestamp:$e,variant:vt.variant||"STANDARD",primaryGoal:vt.primaryGoal||null,secondaryGoal:vt.secondaryGoal||null,ageBand:vt.ageBand||null,experienceLevel:vt.experienceLevel||null,tenantId:vt.tenantId||"TENANT_DEMO",planType:vt.planType||null,trainerId:vt.trainerId||null};return{icTotalCompleted:Ge.icTotalCompleted+1,icYogaPureCompleted:Ge.icYogaPureCompleted+(mi.variant==="PURE_YOGA"?1:0),events:[...Xa,mi]}})},ha=()=>{!X.startsWith("SYSTEM")&&!X.includes("LOADER")&&X!=="TENANT_CHECK"&&L(sa=>[...sa,{view:X,wizardStep:z}])},K=()=>{if(w.length===0)return;var sa=w[w.length-1];L(vt=>vt.slice(0,-1)),ne(sa.view),H(sa.wizardStep)},aa=()=>{ne("LANDING"),H(null),J(null),Nt({}),L([]),Q("INDEPENDENT")},Mt=sa=>{ha(),ne(sa)},la=sa=>{ha();try{var vt=z||null;sa==="Client_Onboarding_Entry"&&Bt("onboarding.started",{source:X||null||"UNKNOWN"}),vt&&vt!==sa&&(String(vt).startsWith("IC_")||String(vt).startsWith("Q")||String(vt).startsWith("Checklist_")||String(vt).startsWith("WCF_"))&&Bt("onboarding.step.completed",{from_step:vt,to_step:sa||null,dashboard_type_intent:U||null}),sa==="TrialActivated"&&Bt("subscription.started",{plan:"TRIAL",source:"onboarding"})}catch(vt){}if(sa==="Client_Onboarding_Entry")return ne("SYSTEM_CLIENT_INIT");if(sa==="TrialActivated")return ne("SYSTEM_TRIAL");if(sa==="IC_CombinedAI_Hybrid")return ne("SYSTEM_AI");if(sa==="IC_Secondary_Interests_NEW"){H("IC_Secondary_Interests_NEW");return}if(sa==="IC_Check_Wearables_NEW"){H("IC_Check_Wearables_NEW");return}if(sa==="IC_Wearable_Upsell"){H("IC_Wearable_Upsell");return}if(sa==="WCF_CONNECT"){H("WCF_CONNECT");return}if(sa!=="ROADMAP"){if(sa==="Q2_ActivityLevel"){H("Q2_ActivityLevel");return}if(sa==="Checklist_Gamify1"){H("Checklist_Gamify1");return}if(sa==="ROUTING_ENGINE"){var vt=Ht.q1_goal==="Yoga & Wellness",Ge=Ht.hasSecondary===!0,$e=vt&&!Ge;try{var Xa=Ht&&Ht.v10_onboarding?Ht.v10_onboarding:null,mi=Array.isArray(Xa&&Xa.focusAreas)?Xa.focusAreas:[],xi=mi.includes("YOGA_WELLNESS")||Ht.q1_goal==="Yoga & Wellness",rs=mi.includes("NUTRITION_FIRST")||Ht.q1_goal==="Nutrition & Habits",ct=mi.includes("FITNESS_FIRST")||Ht.q1_goal==="General Fitness";var zt="FITNESS";xi&&rs||xi&&ct||rs&&ct?zt="HYBRID":xi?zt="YOGA":rs?zt="NUTRITION":zt="FITNESS",window.initialDashboardEmphasis=zt,window.__FOF_INITIAL_EMPHASIS=zt}catch(Xa){}Q($e?"YOGA":"INDEPENDENT"),ot("ROUTING_ENGINE");try{Bt("dashboard.view.opened",{dashboardType:$e?"YOGA":"INDEPENDENT",source:"ROUTING_ENGINE"})}catch(Xa){}return ne("DASHBOARD")}if(sa==="ML_Validate")return ne("ML_LOADER");if(sa==="ML_LinkToCoach")return ne("ML_LINK_LOADER");if(sa==="ML_PRO_COUNT"){H("ML_PRO_COUNT");return}if(sa==="ML_WEARABLE"){H("ML_WEARABLE");return}if(sa==="ML_DATASHARE"){H("ML_DATASHARE");return}if(sa==="ML_GAMIFY"){H("ML_GAMIFY");return}if(sa==="ML_ROUTE"){ne("MAGIC_FLOW"),H("ML_PRO_COUNT");return}if(sa==="LINKED_DASH")return Q("LINKED"),ot("LINKED_DASH"),ne("DASHBOARD");if(sa==="HYBRID_DASH")return Q("HYBRID"),ot("HYBRID_DASH"),ne("DASHBOARD");if(sa==="ML_Signup"){H("ML_Signup");return}if(sa==="T1"){H("T1");return}if(sa==="SO1"){H("SO1");return}if(sa==="PHYSIO_NOTICE"){H("PHYSIO_NOTICE");return}if(sa==="HYBRID_CHECK"){H("HYBRID_CHECK");return}if(sa==="SEC_ROLE_SELECT"){H("SEC_ROLE_SELECT");return}if(sa==="T1a"){H("T1a");return}if(sa==="T2"){H("T2");return}if(sa==="T3_PROVISION")return ne("SYSTEM_PROVISION");if(sa==="T_WHITE_LABEL"){H("T_WHITE_LABEL");return}if(sa==="BULK_IMPORT"){H("BULK_IMPORT");return}if(sa==="BI_MAPPING"){H("BI_MAPPING");return}if(sa==="BI_PROCESS")return ne("SYSTEM_IMPORT");if(sa==="SO_CREDENTIALS"){H("SO_CREDENTIALS");return}if(sa==="SO2_VERIFY")return ne("SYSTEM_VERIFY");if(sa==="DASHBOARD")return ot("DIRECT"),ne("DASHBOARD");if(sa==="GYM_CHECK"){H("GYM_CHECK");return}if(sa==="GYM_ONBOARD"){H("GYM_ONBOARD");return}if(sa==="CORP_CHECK"){H("CORP_CHECK");return}if(sa==="CORP_ONBOARD"){H("CORP_ONBOARD");return}if(sa==="GO_TO_PRO_WIZARD"){ne("PRO_WIZARD"),H("Pro_RoleSelect");return}typeof sa=="string"&&!sa.includes("SYSTEM")?H(sa):H(vt=>typeof vt=="number"?vt+1:vt)}},xa=sa=>sa?sa.toLowerCase().includes("linked")?"LINKED":"INDEPENDENT":null,ei=()=>{var sa="https://flowofit.app/magic/invite-demo";try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(sa);else{var vt=document.createElement("textarea");vt.value=sa,vt.style.position="fixed",vt.style.left="-9999px",document.body.appendChild(vt),vt.select(),document.execCommand("copy"),document.body.removeChild(vt)}window.__toast&&window.__toast("Invite link copied")}catch(vt){console.warn("Copy failed",vt)}},di={onBack:K,onHome:aa,canGoBack:w.length>0,devMode:$,toggleDevMode:ue};if(X==="TENANT_CHECK")return React.createElement(Cs,{label:"CHECKING TENANT ID...",subtext:"Loading App Bundle Configuration",onComplete:()=>ne("LANDING")});if(X==="SYSTEM_CLIENT_INIT")return React.createElement(Cs,{label:"INITIALIZING...",onComplete:()=>{ne("CLIENT_WIZARD"),H("Q1_PrimaryGoal")}});if(X==="SYSTEM_TRIAL")return React.createElement(Cs,{label:"ACTIVATING TRIAL...",onComplete:()=>{ne("CLIENT_WIZARD"),H("IC_Secondary_Interests_NEW")}});if(X==="SYSTEM_AI")return React.createElement(Cs,{label:"GENERATING HYBRID PLAN...",onComplete:()=>{ne("CLIENT_WIZARD"),H("IC_Hybrid_Explain_NEW")}});if(X==="SYSTEM_VERIFY")return React.createElement(Cs,{label:"VERIFYING CREDENTIALS...",subtext:"Admin Review Queue",onComplete:()=>Mt("DASHBOARD")});if(X==="SYSTEM_PROVISION")return React.createElement(Cs,{label:"SETTING UP...",subtext:"Allocating Resources",onComplete:()=>{H("BULK_IMPORT"),ne("PRO_WIZARD")}});if(X==="SYSTEM_IMPORT")return React.createElement(Cs,{label:"IMPORTING CLIENTS...",subtext:"142 Records Processed",onComplete:()=>Mt("DASHBOARD")});if(X==="ML_LOADER")return React.createElement(Cs,{label:"VALIDATING INVITATION...",subtext:"Checking your access and dashboard status",onComplete:()=>{if(ma!=null&&ma.status&&ma.status!=="OK"){ne("MAGIC_FLOW"),H("INPUT");return}if(Q("LINKED"),ot("MAGIC_LINK"),(ma==null?void 0:ma.scenario)==="ALREADY_SETUP"){ne("DASHBOARD");return}if((ma==null?void 0:ma.scenario)==="NEEDS_ACTIVATION"){ne("MAGIC_FLOW"),H("ML_SET_PASSWORD");return}ne("MAGIC_FLOW"),H("ML_PRO_COUNT")}});if(X==="ML_LINK_LOADER")return React.createElement(Cs,{label:"LINKING TO COACH...",onComplete:()=>{ne("MAGIC_FLOW"),H("ML_PRO_COUNT")}});var Ua=(()=>{switch(X){case"LANDING":return React.createElement(us,{onStart:()=>ne("ROLE_SELECT"),onSelect:sa=>{J(sa),sa==="CLIENT"?(ne("CLIENT_WIZARD"),H(null)):ne("AUTH")},onAdminLogin:()=>{J("ADMIN"),ne("LOGIN")},...di});case"ROLE_SELECT":return React.createElement(Hi,{onSelect:sa=>{J(sa),sa==="TRAINER"?ne("AUTH"):(ne("SYSTEM_CLIENT_INIT"),H(null))},...di});case"AUTH":return React.createElement(wi,{role:W,onNavigate:sa=>{sa==="SIGNUP"?W==="CLIENT"?(ne("CLIENT_WIZARD"),H("ClientSignUp")):W==="TRAINER"?(ne("BUSINESS_WIZARD"),H("TYPE_SELECT")):Mt("LOGIN"):Mt("LOGIN")},extra:W==="CLIENT"?React.createElement("div",{className:"mt-4 space-y-3 text-left"},React.createElement("button",{onClick:()=>{ne("MAGIC_FLOW"),H("INPUT")},className:"w-full py-3 rounded-xl border border-brand/60 text-brand font-semibold text-sm hover:bg-brand/10 hover:text-white transition-colors flex items-center justify-center gap-2"},React.createElement(_,{name:"Sparkles",size:16}),"Use Magic Link"),React.createElement("div",{className:"rounded-2xl border border-amber-400/70 bg-amber-950/80 px-3 py-2.5 text-[11px] leading-relaxed text-amber-50"},"Already training with a coach? Sign in or ask your coach to share your personal magic link.")):null,...di});case"MAGIC_FLOW":return React.createElement(jn,{step:z,onNext:la,mlInvite:et,setMlInvite:At,mlValidation:ma,setMlValidation:Je,copyMagicLink:ei,...di});case"CLIENT_WIZARD":return React.createElement(ml,{step:z,onNext:la,onConversionEvent:Ca,onUpdate:(sa,vt)=>Nt({...Ht,[sa]:vt}),context:Ht,onExistingLogin:sa=>{J("CLIENT");var vt=sa&&sa.email?sa.email:Ht&&Ht.email?Ht.email:"";xa(vt)==="LINKED"?(Q("LINKED"),ot("CLIENT_LOGIN_LINKED")):(Q("INDEPENDENT"),ot("CLIENT_LOGIN_INDEPENDENT"));try{window.initialDashboardEmphasis="FITNESS",window.__FOF_INITIAL_EMPHASIS="FITNESS"}catch($e){}ne("DASHBOARD"),H(null)},onMagicLink:()=>{J("CLIENT"),ne("MAGIC_FLOW"),H("INPUT")},...di});case"PRO_WIZARD":return React.createElement(vr,{step:z,onNext:la,onUpdate:(sa,vt)=>sa==="role"?{}:null,...di});case"BUSINESS_WIZARD":return React.createElement(Is,{step:z,onNext:la,...di});case"DASHBOARD":if(W==="ADMIN")return React.createElement(li,{...di,conversionAnalytics:Oa});if(W==="TRAINER")return React.createElement(Kn,{onNavigate:Mt,conversionAnalytics:Oa,openPlanAssigner:u});if(W==="CLIENT"){var sa=U==="LINKED"||U==="HYBRID"?"LINKED":"INDEPENDENT",vt="MODE",Ge=sa;return ut==="ROUTING_ENGINE"&&(U==="YOGA"?(sa="INDEPENDENT",vt="PLAN",Ge="INDEPENDENT"):(sa="SELECT",vt="PLAN",Ge="INDEPENDENT")),(ut==="CLIENT_LOGIN_LINKED"||ut==="CLIENT_LOGIN_INDEPENDENT")&&(sa="SELECT",vt="MODE",Ge=null),React.createElement("div",{className:"w-full h-full"},React.createElement(Od.VitaminClientApp,{onLogout:()=>{J(null),ne("LANDING"),H(null),Nt({}),L([]),Q("INDEPENDENT"),ot(null)},initialClientMode:sa,initialDashboardType:U,initialEntryStep:vt,initialStartMode:Ge,initialIndependentTier:"FREE",coachContext:ma}))}return React.createElement(DashboardLayout,{role:W,onNavigate:Mt,...di},React.createElement("div",{className:"p-8 text-slate-200"},React.createElement("h3",{className:"text-2xl font-bold"},"Professional Command Center"),React.createElement("p",{className:"text-slate-500 mt-2"},"Active preview View")));case"LOGIN":return React.createElement(ns,{...di},React.createElement(vn,{data:i,onClose:()=>s(null)}),React.createElement(Ri,{open:!!x.open,client:x.client,onClose:()=>S({open:!1,client:null}),onAssigned:sa=>{try{s({title:"Assigned",body:`Assigned \u201C${sa.planName}\u201D to ${sa.clientName}.`})}catch(vt){}}}),React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl max-w-md w-full"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-center text-white"},W==="ADMIN"?"Admin Portal Login":"Welcome Back"),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-slate-400 mb-1"},"Email"),React.createElement("input",{className:"w-full bg-midnight-900 border border-slate-700 rounded-xl px-4 py-2.5 text-sm text-slate-100 focus:outline-none focus:border-brand transition-colors",placeholder:"you@example.com"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-slate-400 mb-1"},"Password"),React.createElement("input",{type:"password",className:"w-full bg-midnight-900 border border-slate-700 rounded-xl px-4 py-2.5 text-sm text-slate-100 focus:outline-none focus:border-brand transition-colors",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})),React.createElement("button",{onClick:()=>{Bt("auth.login",{role:W}),ne("DASHBOARD")},className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-brand-dark transition-colors flex items-center justify-center gap-2"},"Continue ",React.createElement(_,{name:"ArrowRight",size:18}))))));default:return React.createElement("div",{className:"text-white p-10"},"404 View")}})();return React.createElement(React.Fragment,null,React.createElement(vn,{data:i,onClose:()=>s(null)}),React.createElement(Ri,{open:!!x.open,client:x.client,onClose:()=>S({open:!1,client:null}),onAssigned:sa=>{try{s({title:"Assigned",body:`Assigned \u201C${sa.planName}\u201D to ${sa.clientName}.`})}catch(vt){}}}),Ua)};class nl extends React.Component{constructor(x){super(x);wc(this,"reset",()=>{this.setState({hasError:!1,error:null,info:null})});this.state={hasError:!1,error:null,info:null}}static getDerivedStateFromError(x){return{hasError:!0,error:x}}componentDidCatch(x,S){try{console.error("FlowOFit ErrorBoundary",x,S)}catch(u){}this.setState({info:S})}render(){if(!this.state.hasError)return this.props.children;var x=this.state.error,S=x&&(x.message||String(x))||"Unknown error";return React.createElement("div",{className:"min-h-screen bg-[#06070b] text-white p-6"},React.createElement("div",{className:"max-w-3xl mx-auto bg-white/5 border border-white/10 rounded-2xl p-5"},React.createElement("div",{className:"text-sm font-semibold text-white/80"},"Something crashed in this module"),React.createElement("div",{className:"mt-2 text-xs text-white/60"},S),React.createElement("div",{className:"mt-4 flex gap-2"},React.createElement("button",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 text-xs",onClick:this.reset},"Reset View"),React.createElement("button",{className:"px-3 py-2 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15 text-xs",onClick:()=>location.reload()},"Reload")),React.createElement("details",{className:"mt-4"},React.createElement("summary",{className:"cursor-pointer text-xs text-white/60"},"Show details"),React.createElement("pre",{className:"mt-2 text-[11px] whitespace-pre-wrap text-white/60"},x&&x.stack||""))))}}return function(){var s,x;try{if(Array.isArray(window.__FOF_UNIVERSAL_CLIENTS)&&window.__FOF_UNIVERSAL_CLIENTS.length>=25)return;var S=$=>new Date(Date.now()-$*864e5).toISOString(),u=[{id:"c1",name:"Leila Al Shamsi",tier:"PAID",tags:["LINKED","FATLOSS","DESK_JOB"],segment:"ATTENTION",status:"Check-in overdue",city:"Dubai",age:34,sex:"F",goalPrimary:"Fat loss + energy",sessionsPerWeek:4,equipment:["Dumbbells","Bands"],constraints:["Knee discomfort","Travel 2x/month"],injury:"Patellofemoral knee pain",sleepAvg7d:5.6,restingHR:78,stepsAvg7d:4200,weightKg:84.2,weightChange7d:.6,painScore:6,adherence7d:.36,capacityScoreNow:27,lastCheckInAt:S(33),evidenceExtras:{missedSessions7d:3,unreadMessagesDays:9,travelDaysLast14d:6,nutritionLoggedDays:1,note:"Returned from travel; asked to reduce intensity."}},{id:"c2",name:"Omar Al Farsi",tier:"PAID",tags:["LINKED","REHAB","SHOULDER"],segment:"ATTENTION",status:"Recovery flag",city:"Abu Dhabi",age:41,sex:"M",goalPrimary:"Return to training safely",sessionsPerWeek:3,equipment:["Gym"],constraints:["Shoulder impingement"],injury:"Right shoulder impingement",sleepAvg7d:6.1,restingHR:74,stepsAvg7d:5100,weightKg:92.4,weightChange7d:.2,painScore:7,adherence7d:.62,capacityScoreNow:29,lastCheckInAt:S(8),evidenceExtras:{restingHRDelta:9,lastPainSpikeDays:3,deloadIgnored:!0,note:"Pain spikes after pressing; needs deload + physio check."}},{id:"c3",name:"Priya Nair",tier:"TRIAL",tags:["LINKED","BEGINNER","FATLOSS"],segment:"ATTENTION",status:"Low adherence",city:"Sharjah",age:29,sex:"F",goalPrimary:"Lose 6\u20138kg sustainably",sessionsPerWeek:4,equipment:["Bodyweight","Bands"],constraints:["New parent","Sleep disruption"],injury:"None",sleepAvg7d:4.9,restingHR:82,stepsAvg7d:3600,weightKg:71,weightChange7d:.9,painScore:1,adherence7d:.41,capacityScoreNow:43,lastCheckInAt:S(17),evidenceExtras:{missedSessions7d:4,nutritionLoggedDays:0,unreadMessagesDays:4,note:"Requests <30 min sessions; schedule chaotic this month."}},{id:"c4",name:"Hassan El-Sayed",tier:"FREE",tags:["LINKED","BEGINNER","CARDIO"],segment:"ATTENTION",status:"Overdue check-in",city:"Dubai",age:26,sex:"M",goalPrimary:"Build consistency + stamina",sessionsPerWeek:3,equipment:["Gym"],constraints:["Shift work"],injury:"Lower-back tightness",sleepAvg7d:6.4,restingHR:70,stepsAvg7d:6800,weightKg:78.6,weightChange7d:.1,painScore:4,adherence7d:.52,capacityScoreNow:44,lastCheckInAt:S(16),evidenceExtras:{unreadMessagesDays:6,missedSessions7d:2,travelDaysLast14d:0,note:"Night shifts \u2192 missed gym windows. Needs plan simplification."}},{id:"c5",name:"Marites Santos",tier:"TRIAL",tags:["LINKED","RUN","5K"],segment:"ATTENTION",status:"Low adherence",city:"Ajman",age:32,sex:"F",goalPrimary:"Run 5K comfortably",sessionsPerWeek:4,equipment:["Treadmill","Bands"],constraints:["Mild asthma"],injury:"Shin splints history",sleepAvg7d:6,restingHR:76,stepsAvg7d:7200,weightKg:64.3,weightChange7d:-.2,painScore:5,adherence7d:.33,capacityScoreNow:61,lastCheckInAt:S(11),evidenceExtras:{missedSessions7d:3,rpeLastSession:9,lastPainSpikeDays:5,note:"Shin pain after intervals; swap to low-impact + rehab."}},{id:"c6",name:"Daniel Cooper",tier:"PAID",tags:["LINKED","STRENGTH","HIGH_STRESS"],segment:"ATTENTION",status:"Capacity critical",city:"Dubai",age:38,sex:"M",goalPrimary:"Strength (but sustainable)",sessionsPerWeek:5,equipment:["Gym"],constraints:["High work stress"],injury:"Elbow tendinopathy",sleepAvg7d:5.4,restingHR:81,stepsAvg7d:3900,weightKg:103.8,weightChange7d:1.1,painScore:6,adherence7d:.79,capacityScoreNow:26,lastCheckInAt:S(6),evidenceExtras:{deloadIgnored:!0,restingHRDelta:11,note:"Added extra sets despite fatigue. Recommend deload + sleep focus."}},{id:"c7",name:"Aisha Al Nuaimi",tier:"PAID",tags:["LINKED","MOBILITY","POSTURE"],segment:"ATTENTION",status:"Check-in due",city:"Ras Al Khaimah",age:45,sex:"F",goalPrimary:"Reduce neck/desk pain",sessionsPerWeek:3,equipment:["Mat","Bands"],constraints:["Desk job","Headaches"],injury:"Neck tension",sleepAvg7d:6.2,restingHR:72,stepsAvg7d:5400,weightKg:69.8,weightChange7d:.1,painScore:5,adherence7d:.58,capacityScoreNow:49,lastCheckInAt:S(14),evidenceExtras:{missedSessions7d:2,unreadMessagesDays:3,note:"Reported headaches; needs mobility micro-sessions + stress control."}},{id:"c8",name:"Rohit Mehta",tier:"FREE",tags:["LINKED","FATLOSS","NUTRITION"],segment:"ATTENTION",status:"Nutrition inconsistency",city:"Abu Dhabi",age:30,sex:"M",goalPrimary:"Fat loss + better habits",sessionsPerWeek:4,equipment:["Gym"],constraints:["Frequent dining out"],injury:"None",sleepAvg7d:6.7,restingHR:67,stepsAvg7d:6200,weightKg:88.1,weightChange7d:.4,painScore:0,adherence7d:.68,capacityScoreNow:58,lastCheckInAt:S(9),evidenceExtras:{nutritionLoggedDays:1,proteinAvgG:62,missedSessions7d:1,note:"Eating out daily; needs simple meal template + protein target."}},{id:"c9",name:"Fatima Al Zahra",tier:"PAID",tags:["LINKED","REHAB","KNEE"],segment:"ATTENTION",status:"Injury risk",city:"Dubai",age:27,sex:"F",goalPrimary:"Knee resilience + strength",sessionsPerWeek:3,equipment:["Gym","Bands"],constraints:["Stairs at work"],injury:"Knee irritation (L)",sleepAvg7d:5.8,restingHR:79,stepsAvg7d:9100,weightKg:62,weightChange7d:-.3,painScore:7,adherence7d:.71,capacityScoreNow:31,lastCheckInAt:S(4),evidenceExtras:{lastPainSpikeDays:2,deloadIgnored:!1,restingHRDelta:8,note:"Pain increased after leg day; swap to rehab focus + deload."}},{id:"c10",name:"Yusuf Al Kindi",tier:"TRIAL",tags:["LINKED","MUSCLE","BEGINNER"],segment:"ATTENTION",status:"Ghosting risk",city:"Sharjah",age:24,sex:"M",goalPrimary:"Build muscle + confidence",sessionsPerWeek:4,equipment:["Gym"],constraints:["Irregular schedule"],injury:"None",sleepAvg7d:6.5,restingHR:69,stepsAvg7d:7400,weightKg:68.2,weightChange7d:.2,painScore:0,adherence7d:.47,capacityScoreNow:55,lastCheckInAt:S(19),evidenceExtras:{unreadMessagesDays:10,missedSessions7d:3,note:"Stopped replying after week 2; send re-engagement message + simplify plan."}},{id:"c11",name:"Salma Al Marri",tier:"PAID",tags:["LINKED","STRENGTH","RECOMP"],segment:"ACTIVE",status:"Active",city:"Dubai",age:36,sex:"F",goalPrimary:"Recomp + strength",sessionsPerWeek:4,equipment:["Gym"],constraints:["None"],injury:"None",sleepAvg7d:7.4,restingHR:57,stepsAvg7d:8800,weightKg:66.1,weightChange7d:-.1,painScore:1,adherence7d:.84,capacityScoreNow:76,lastCheckInAt:S(2),evidenceExtras:{note:"Consistent. Ready for progressive overload."}},{id:"c12",name:"Ahmed Al Mazrouei",tier:"PAID",tags:["LINKED","HYBRID","ENDURANCE"],segment:"ACTIVE",status:"Active",city:"Abu Dhabi",age:33,sex:"M",goalPrimary:"Hybrid conditioning",sessionsPerWeek:5,equipment:["Gym","RowErg"],constraints:["Travel quarterly"],injury:"None",sleepAvg7d:7.1,restingHR:55,stepsAvg7d:10500,weightKg:81.4,weightChange7d:0,painScore:0,adherence7d:.86,capacityScoreNow:79,lastCheckInAt:S(1),evidenceExtras:{note:"Great momentum; add a benchmark session."}},{id:"c13",name:"Emily Watson",tier:"TRIAL",tags:["LINKED","YOGA","STRESS"],segment:"ACTIVE",status:"Active",city:"Dubai",age:31,sex:"F",goalPrimary:"Stress reduction + mobility",sessionsPerWeek:3,equipment:["Mat","Blocks"],constraints:["High stress"],injury:"None",sleepAvg7d:7,restingHR:58,stepsAvg7d:7600,weightKg:55.4,weightChange7d:0,painScore:0,adherence7d:.82,capacityScoreNow:73,lastCheckInAt:S(2)},{id:"c14",name:"Faisal Rahman",tier:"FREE",tags:["LINKED","CARDIO","10K"],segment:"ACTIVE",status:"Active",city:"Abu Dhabi",age:31,sex:"M",goalPrimary:"Improve cardio (10K)",sessionsPerWeek:4,equipment:["Outdoor","Treadmill"],constraints:["None"],injury:"None",sleepAvg7d:7.1,restingHR:57,stepsAvg7d:12e3,weightKg:74.8,weightChange7d:-.3,painScore:0,adherence7d:.87,capacityScoreNow:80,lastCheckInAt:S(3)},{id:"c15",name:"Sara Al Haddad",tier:"PAID",tags:["LINKED","RECOMP","STRENGTH"],segment:"ACTIVE",status:"Active",city:"Dubai",age:39,sex:"F",goalPrimary:"Strength + posture",sessionsPerWeek:4,equipment:["Gym"],constraints:["Mild scoliosis"],injury:"None",sleepAvg7d:7.2,restingHR:61,stepsAvg7d:8400,weightKg:66.7,weightChange7d:-.1,painScore:2,adherence7d:.81,capacityScoreNow:74,lastCheckInAt:S(3)},{id:"c16",name:"Bilal Younis",tier:"PAID",tags:["LINKED","REHAB","KNEE"],segment:"ACTIVE",status:"Active",city:"Al Ain",age:43,sex:"M",goalPrimary:"Knee resilience + strength",sessionsPerWeek:3,equipment:["Gym","Bands"],constraints:["ACL history"],injury:"Post-ACL strengthening",sleepAvg7d:6.8,restingHR:66,stepsAvg7d:6500,weightKg:95.1,weightChange7d:-.2,painScore:3,adherence7d:.78,capacityScoreNow:68,lastCheckInAt:S(4)},{id:"c17",name:"Mariam Al Kaabi",tier:"PAID",tags:["LINKED","MOBILITY","PILATES"],segment:"ACTIVE",status:"Active",city:"Dubai",age:28,sex:"F",goalPrimary:"Core + mobility",sessionsPerWeek:4,equipment:["Mat","Bands"],constraints:["None"],injury:"None",sleepAvg7d:7.6,restingHR:56,stepsAvg7d:9800,weightKg:54.9,weightChange7d:.1,painScore:0,adherence7d:.85,capacityScoreNow:78,lastCheckInAt:S(1)},{id:"c18",name:"Ibrahim Saleh",tier:"TRIAL",tags:["LINKED","STRENGTH","BEGINNER"],segment:"ACTIVE",status:"Active",city:"Dubai",age:22,sex:"M",goalPrimary:"Build muscle + confidence",sessionsPerWeek:3,equipment:["Gym"],constraints:["New to lifting"],injury:"None",sleepAvg7d:7.9,restingHR:55,stepsAvg7d:8700,weightKg:62.8,weightChange7d:.2,painScore:0,adherence7d:.8,capacityScoreNow:72,lastCheckInAt:S(2)},{id:"c19",name:"Noor Al Hamadi",tier:"FREE",tags:["LINKED","BEGINNER","FATLOSS"],segment:"ACTIVE",status:"Active",city:"Sharjah",age:40,sex:"F",goalPrimary:"Healthy habits",sessionsPerWeek:3,equipment:["Bodyweight"],constraints:["Time-limited"],injury:"None",sleepAvg7d:7,restingHR:64,stepsAvg7d:7800,weightKg:79.3,weightChange7d:-.4,painScore:0,adherence7d:.83,capacityScoreNow:77,lastCheckInAt:S(2)},{id:"c20",name:"Adnan Malik",tier:"PAID",tags:["LINKED","HYBRID","MUSCLE"],segment:"ACTIVE",status:"Active",city:"Dubai",age:35,sex:"M",goalPrimary:"Hybrid strength + endurance",sessionsPerWeek:5,equipment:["Gym","RowErg"],constraints:["None"],injury:"None",sleepAvg7d:7.1,restingHR:59,stepsAvg7d:9100,weightKg:82.2,weightChange7d:0,painScore:1,adherence7d:.82,capacityScoreNow:75,lastCheckInAt:S(1)},{id:"c21",name:"Reem Al Mansouri",tier:"PAID",tags:["LINKED","YOGA","RECOVERY"],segment:"ACTIVE",status:"Active",city:"Abu Dhabi",age:33,sex:"F",goalPrimary:"Recovery + flexibility",sessionsPerWeek:3,equipment:["Mat","Blocks"],constraints:["None"],injury:"None",sleepAvg7d:7.8,restingHR:54,stepsAvg7d:8400,weightKg:57.1,weightChange7d:0,painScore:0,adherence7d:.88,capacityScoreNow:81,lastCheckInAt:S(1)},{id:"c22",name:"Tariq Nasser",tier:"PAID",tags:["LINKED","RUN","HALF_MARATHON"],segment:"ACTIVE",status:"Active",city:"Dubai",age:29,sex:"M",goalPrimary:"Half marathon prep",sessionsPerWeek:5,equipment:["Outdoor"],constraints:["Calf tightness"],injury:"None",sleepAvg7d:7.2,restingHR:52,stepsAvg7d:13500,weightKg:70.5,weightChange7d:-.1,painScore:2,adherence7d:.81,capacityScoreNow:73,lastCheckInAt:S(2)},{id:"c23",name:"Huda Al Qasimi",tier:"TRIAL",tags:["LINKED","FATLOSS","NUTRITION"],segment:"ACTIVE",status:"Active",city:"Ajman",age:27,sex:"F",goalPrimary:"Fat loss + nutrition consistency",sessionsPerWeek:4,equipment:["Gym"],constraints:["Sugar cravings"],injury:"None",sleepAvg7d:7,restingHR:63,stepsAvg7d:8600,weightKg:62,weightChange7d:-.3,painScore:0,adherence7d:.8,capacityScoreNow:71,lastCheckInAt:S(2)},{id:"c24",name:"Yasir Al Kindi",tier:"PAID",tags:["LINKED","POWERLIFT","STRENGTH"],segment:"ACTIVE",status:"Active",city:"Dubai",age:44,sex:"M",goalPrimary:"Maintain strength",sessionsPerWeek:4,equipment:["Gym"],constraints:["Old shoulder issue"],injury:"None",sleepAvg7d:6.9,restingHR:65,stepsAvg7d:6200,weightKg:98.7,weightChange7d:.2,painScore:2,adherence7d:.79,capacityScoreNow:69,lastCheckInAt:S(3)},{id:"c25",name:"Amal Farooq",tier:"PAID",tags:["LINKED","POSTURE","CORE"],segment:"ACTIVE",status:"Active",city:"Sharjah",age:32,sex:"F",goalPrimary:"Posture + core",sessionsPerWeek:3,equipment:["Bodyweight","Bands"],constraints:["Desk job"],injury:"None",sleepAvg7d:7.3,restingHR:60,stepsAvg7d:7900,weightKg:60.6,weightChange7d:-.1,painScore:1,adherence7d:.82,capacityScoreNow:74,lastCheckInAt:S(1)}];window.__FOF_UNIVERSAL_CLIENTS=u;try{window.__FOF_DEMO_CLIENTS=u}catch($){}try{(x=(s=window.__FOF_TDEP)==null?void 0:s.TRIAGE)!=null&&x.runTriage&&window.__FOF_TDEP.TRIAGE.runTriage({clients:u,force:!0,source:"seed_universal_clients"})}catch($){}}catch(S){}}(),{TrainerDashboard:Kn}})(),tu=wt=>{var na=wt||{},si=na.onNavigate,Ii=na.conversionAnalytics,Ta=typeof na.openPlanAssigner=="function"?na.openPlanAssigner:()=>{};return React.createElement(eu.TrainerDashboard,{onNavigate:si,conversionAnalytics:Ii,openPlanAssigner:Ta})},au=({step:wt,onNext:na,mlInvite:si,setMlInvite:Ii,mlValidation:Ta,setMlValidation:ti,copyMagicLink:ai,...qi})=>{var[co,Ys]=Ws(""),[bi,hs]=Ws(""),[fo,go]=Ws(""),[Ei,As]=Ws(""),[yo,Ks]=Ws(null),Fs=(es,Ai)=>Ii(no=>({...no,[es]:Ai})),Lo=()=>{var es=((si==null?void 0:si.email)||"").trim(),Ai=((si==null?void 0:si.code)||"").trim(),no=((si==null?void 0:si.link)||"").trim(),Mi=(((si==null?void 0:si.mode)||"code")==="link"?no:Ai).toUpperCase();if(!es||!Mi){ti(is=>({...is,status:"INVALID",scenario:null,message:"Enter the invited email and your invite link or code."})),na("INPUT");return}if(Mi.includes("EXP")||Mi.includes("EXPIRED")){ti(is=>({...is,status:"EXPIRED",scenario:null,message:"This invitation has expired. Please request a new one from your coach or clinic."})),na("INPUT");return}if(Mi.includes("BAD")||Mi.includes("INVALID")){ti(is=>({...is,status:"INVALID",scenario:null,message:"We could not verify this invitation. Double-check the code/link and try again."})),na("INPUT");return}var ts=es.toLowerCase();var vs="NEEDS_SETUP";(ts.includes("done")||ts.includes("ready")||ts.includes("setup"))&&(vs="ALREADY_SETUP"),(ts.includes("activate")||ts.includes("newpass")||ts.includes("firstlogin"))&&(vs="NEEDS_ACTIVATION");var ko=vs==="ALREADY_SETUP"?"Current Active Program":"Flow Starter Plan (Coach Assigned)",$s=vs==="ALREADY_SETUP"?"Resuming your current plan where you left off.":"Week 1 starts simple so you build momentum fast \u2014 then we progress.";ti(is=>({...is,status:"OK",scenario:vs,planName:ko,planNote:$s,message:vs==="ALREADY_SETUP"?"Welcome back \u2014 taking you to your dashboard.":vs==="NEEDS_ACTIVATION"?"Invitation verified. Create a password to activate your account.":"Invitation verified. Let\u2019s finish your dashboard setup."})),na("ML_Validate")},Hn=()=>{if(go(""),!co||co.length<8){go("Password must be at least 8 characters.");return}if(co!==bi){go("Passwords do not match.");return}na("ML_ROUTE")};return React.useEffect(()=>{try{var es=String(window.location.href||""),Ai=new URL(es),no=Ai.searchParams,Co=(Ai.hash||"").replace(/^#/,""),Mi=(no.get("invite")||no.get("code")||no.get("token")||"").trim()||(Co.includes("invite=")?Co.split("invite=")[1]:"")||(Co.includes("code=")?Co.split("code=")[1]:"")||(Co.includes("token=")?Co.split("token=")[1]:""),ts=(no.get("link")||no.get("magic")||"").trim(),vs=(no.get("email")||"").trim();if(Ta!=null&&Ta.status)return;vs&&Ii(ko=>({...ko,email:vs})),(Mi||ts)&&(Ii(ko=>({...ko,mode:ts?"link":"code",code:Mi?String(Mi).trim():ko.code,link:ts?String(ts).trim():ko.link})),Promise.resolve().then(()=>Lo()))}catch(es){}},[]),wt==="INPUT"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand/15 border border-brand/30 mb-3"},React.createElement(ni,{name:"Link2",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Claim your invitation"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"If you were invited by a coach, gym, or clinic, verify your invite to set up your FlowOFIT dashboard.")),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Email"),React.createElement("input",{value:(si==null?void 0:si.email)||"",onChange:es=>Fs("email",es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"you@domain.com",inputMode:"email",autoComplete:"email"})),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Fs("mode","code"),className:"flex-1 py-2 rounded-xl text-xs font-semibold border "+((si==null?void 0:si.mode)!=="link"?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},"Invite code"),React.createElement("button",{type:"button",onClick:()=>Fs("mode","link"),className:"flex-1 py-2 rounded-xl text-xs font-semibold border "+((si==null?void 0:si.mode)==="link"?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},"Invite link")),(si==null?void 0:si.mode)==="link"?React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Invite link"),React.createElement("input",{value:(si==null?void 0:si.link)||"",onChange:es=>Fs("link",es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Paste the link you received",autoComplete:"off"})):React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Invite code"),React.createElement("input",{value:(si==null?void 0:si.code)||"",onChange:es=>Fs("code",es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-center tracking-widest uppercase rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"E.g. A1B2C3",autoComplete:"one-time-code"})),Ta!=null&&Ta.status&&Ta.status!=="OK"&&(Ta!=null&&Ta.message)?React.createElement("div",{className:"rounded-2xl border border-red-500/40 bg-red-950/40 px-3 py-2.5 text-[11px] leading-relaxed text-red-100"},lo(Ta.message)):null,React.createElement("button",{onClick:Lo,className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Verify invite"),React.createElement("div",{className:"text-center text-[11px] text-slate-500 pt-2"},"Invites are typically sent by your coach, gym, or physiotherapy clinic."),React.createElement("div",{className:"mt-4 border-t border-midnight-700 pt-4 flex items-center justify-between"},React.createElement("button",{type:"button",onClick:()=>qi.onBack&&qi.onBack(),className:"text-xs text-slate-400 hover:text-white underline"},"Back to sign in"),React.createElement("button",{type:"button",onClick:ai,className:"text-xs text-slate-400 hover:text-white underline"},"Copy demo invite")))))):wt==="ML_SET_PASSWORD"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand-green/15 border border-brand-green/30 mb-3"},React.createElement(ni,{name:"KeyRound",size:22,className:"text-brand-green"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Create your password"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"This secures your account and lets you access your invited dashboard anytime.")),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"New password"),React.createElement("input",{type:"password",value:co,onChange:es=>Ys(es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Minimum 8 characters",autoComplete:"new-password"})),React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Confirm password"),React.createElement("input",{type:"password",value:bi,onChange:es=>hs(es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Re-enter password",autoComplete:"new-password"})),fo?React.createElement("div",{className:"rounded-2xl border border-red-500/40 bg-red-950/40 px-3 py-2.5 text-[11px] leading-relaxed text-red-100"},lo(fo)):null,React.createElement("button",{onClick:Hn,className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("div",{className:"text-center text-[11px] text-slate-500"},"By continuing, you confirm you\u2019re setting up the account linked to this invitation."))))):wt==="ML_ROUTE"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand/15 border border-brand/30 mb-3"},React.createElement(ni,{name:"BadgeCheck",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"You\u2019re in"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},Ta!=null&&Ta.orgName?"Your invite from "+Ta.orgName+" is verified.":"Your invite is verified.")),React.createElement("div",{className:"rounded-2xl border border-midnight-700 bg-midnight-900/50 px-4 py-3 text-sm text-slate-200 mb-4"},"This invite links you to your coach / clinic / gym. Next we\u2019ll confirm a few preferences so your dashboard is ready on day one."),React.createElement("div",{className:"space-y-3"},React.createElement("button",{onClick:()=>na("ML_PRO_COUNT"),className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>na("INPUT"),className:"w-full py-3 bg-white/5 border border-white/10 text-white font-semibold rounded-xl hover:bg-white/10 transition-colors"},"Use a different invite"))))):wt==="ML_PROFILE"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md"},React.createElement("div",{className:"text-center mb-6"},React.createElement("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-brand-purple/15 border border-brand-purple/30 mb-3"},React.createElement(ni,{name:"UserRound",size:22,className:"text-brand-purple"})),React.createElement("h2",{className:"text-xl font-bold text-white"},"Finish your profile"),React.createElement("p",{className:"text-sm text-slate-400 mt-1"},"A few details help your coach tailor your plan and dashboard.")),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"text-[11px] text-slate-400 uppercase tracking-wide"},"Display name"),React.createElement("input",{value:Ei,onChange:es=>As(es.target.value),className:"w-full mt-1 bg-midnight-950 border border-midnight-700 p-3 rounded-xl text-white focus:outline-none focus:border-brand",placeholder:"Your name",autoComplete:"name"})),React.createElement("div",null,React.createElement("div",{className:"text-[11px] text-slate-400 uppercase tracking-wide mb-2"},"Primary focus"),React.createElement("div",{className:"grid grid-cols-3 gap-2"},[{id:"PERFORMANCE",label:"Performance",icon:"Zap"},{id:"RECOVERY",label:"Recovery",icon:"HeartPulse"},{id:"HABITS",label:"Habits",icon:"Leaf"}].map(es=>React.createElement("button",{key:es.id,type:"button",onClick:()=>Ks(es.id),className:"p-3 rounded-2xl border text-xs flex flex-col items-center justify-center gap-1 transition-colors "+(yo===es.id?"bg-brand/20 border-brand text-white":"border-midnight-700 text-slate-400 hover:text-white hover:bg-midnight-800")},React.createElement(ni,{name:es.icon,size:18,className:yo===es.id?"text-brand":"text-slate-500"}),React.createElement("span",{className:"font-semibold"},lo(es.label)))))),React.createElement("button",{onClick:()=>na("ML_PRO_COUNT"),className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors disabled:opacity-40",disabled:!Ei||!yo},"Continue setup"))))):wt==="ML_STATUS"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl text-center w-full max-w-md"},React.createElement("h2",{className:"text-xl font-bold mb-6 text-white"},"Continue with your invite"),React.createElement("div",{className:"space-y-3"},React.createElement("button",{onClick:()=>na("ML_LinkToCoach"),className:"w-full py-3 border border-midnight-700 rounded-xl hover:bg-midnight-800 text-white transition-colors"},"I already have an account"),React.createElement("button",{onClick:()=>na("ML_Signup"),className:"w-full py-3 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Create a new account"))))):wt==="ML_Signup"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl text-center w-full max-w-md"},React.createElement("h2",{className:"text-xl font-bold mb-2 text-white"},"Create your account"),React.createElement("p",{className:"text-sm text-slate-400 mb-6"},"Set your password to continue and link your invite."),React.createElement("input",{className:"w-full bg-midnight-950 border border-midnight-700 p-3 rounded-xl mb-3 text-white focus:outline-none focus:border-brand",placeholder:"Set Password",type:"password"}),React.createElement("button",{onClick:()=>na("ML_LinkToCoach"),className:"w-full py-3 bg-brand text-white rounded-xl font-bold hover:bg-blue-600 transition-colors"},"Create & Continue")))):wt==="ML_PRO_COUNT"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-center gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand/20 border border-brand/40 flex items-center justify-center"},React.createElement(ni,{name:"Users",size:20,className:"text-brand"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-slate-400"},"You're invited"),React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},(Ta==null?void 0:Ta.orgName)||"Your Coach / Studio")),React.createElement("div",{className:"px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/40 text-emerald-200 text-[11px] font-semibold"},"Verified")),React.createElement("div",{className:"rounded-2xl bg-midnight-950 border border-midnight-700 p-4 mb-6"},React.createElement("div",{className:"text-sm font-semibold text-slate-100 mb-1"},"Finish setup"),React.createElement("div",{className:"text-xs text-slate-400"},"We\u2019ll personalize your dashboard, sync your data (optional), and set the right privacy controls.")),React.createElement("button",{onClick:()=>na("ML_WEARABLE"),className:"w-full py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>na("LINKED_DASH"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Skip setup for now"),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"You can update these settings any time from Settings.")))):wt==="ML_WEARABLE"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-start gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand-orange/15 border border-brand-orange/40 flex items-center justify-center"},React.createElement(ni,{name:"Watch",size:20,className:"text-brand-orange"})),React.createElement("div",null,React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},"Connect a wearable"),React.createElement("div",{className:"text-xs text-slate-400"},"Optional \u2014 unlock readiness, recovery insights, and automatic plan adjustments."))),React.createElement("div",{className:"grid gap-3 mb-6"},[{id:"APPLE",label:"Apple Health",icon:"Smartphone"},{id:"GOOGLE",label:"Google Fit",icon:"Activity"},{id:"GARMIN",label:"Garmin",icon:"Map"},{id:"FITBIT",label:"Fitbit",icon:"HeartPulse"}].map(es=>React.createElement("button",{key:es.id,type:"button",onClick:()=>na("ML_DATASHARE"),className:"w-full rounded-2xl bg-midnight-950 border border-midnight-700 p-4 flex items-center justify-between hover:border-brand/50 hover:bg-midnight-900 transition-colors"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center"},React.createElement(ni,{name:es.icon,size:18,className:"text-slate-200"})),React.createElement("div",{className:"text-left"},React.createElement("div",{className:"text-sm font-semibold text-white"},lo(es.label)),React.createElement("div",{className:"text-[11px] text-slate-400"},"Connect in seconds"))),React.createElement(ni,{name:"ChevronRight",size:18,className:"text-slate-400"})))),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{type:"button",onClick:()=>na("ML_DATASHARE"),className:"flex-1 py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Connect later"),React.createElement("button",{type:"button",onClick:()=>na("ML_DATASHARE"),className:"px-4 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Skip")),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"We only request the minimum permissions needed. You control what gets shared.")))):wt==="ML_DATASHARE"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-left"},React.createElement("div",{className:"flex items-start gap-3 mb-5"},React.createElement("div",{className:"w-12 h-12 rounded-2xl bg-brand-purple/15 border border-brand-purple/40 flex items-center justify-center"},React.createElement(ni,{name:"Shield",size:20,className:"text-brand-purple"})),React.createElement("div",null,React.createElement("div",{className:"text-lg font-bold text-white leading-tight"},"Privacy & sharing"),React.createElement("div",{className:"text-xs text-slate-400"},"Choose what your coach can access. You can change this any time."))),React.createElement("div",{className:"space-y-3 mb-6"},[{label:"Training & check-ins",desc:"Sessions, adherence, feedback and check-in notes."},{label:"Health signals",desc:"Steps, HR, sleep summaries and recovery trends (if available)."},{label:"Progress insights",desc:"Body metrics, photos and key milestones you choose to log."}].map((es,Ai)=>React.createElement("div",{key:Ai,className:"rounded-2xl bg-midnight-950 border border-midnight-700 p-4 flex items-start gap-3"},React.createElement("div",{className:"mt-0.5 w-5 h-5 rounded-md bg-emerald-500/15 border border-emerald-500/40 flex items-center justify-center"},React.createElement(ni,{name:"Check",size:14,className:"text-emerald-200"})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-sm font-semibold text-slate-100"},lo(es.label)),React.createElement("div",{className:"text-[11px] text-slate-400"},lo(es.desc)))))),React.createElement("button",{onClick:()=>na("ML_GAMIFY"),className:"w-full py-3 rounded-xl bg-brand-green text-white font-bold hover:bg-emerald-600 transition-colors"},"Continue"),React.createElement("button",{type:"button",onClick:()=>na("ML_GAMIFY"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"Keep everything private for now"),React.createElement("p",{className:"text-[11px] text-slate-500 mt-4"},"You can update sharing permissions any time from Settings.")))):wt==="ML_GAMIFY"?React.createElement(Lr,{...qi},React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-8 rounded-3xl w-full max-w-md text-center"},React.createElement("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-brand/15 border border-brand/40 mb-4"},React.createElement(ni,{name:"Sparkles",size:22,className:"text-brand"})),React.createElement("h2",{className:"text-xl font-bold mb-2 text-white"},"You're all set"),React.createElement("p",{className:"text-sm text-slate-400 mb-6"},"Your dashboard is ready. We\u2019ll sync updates from ",(Ta==null?void 0:Ta.orgName)||"your coach"," automatically."),React.createElement("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-500/10 border border-emerald-400/30"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-emerald-400/15 border border-emerald-400/30 flex items-center justify-center text-emerald-300"},React.createElement(ni,{name:"BadgeCheck",size:18})),React.createElement("div",{className:"flex-1"},React.createElement("div",{className:"text-[11px] font-mono uppercase tracking-[0.25em] text-emerald-300"},"Assigned plan"),React.createElement("div",{className:"text-sm font-extrabold text-white mt-1"},(Ta==null?void 0:Ta.planName)||"Flow Starter Plan"),React.createElement("div",{className:"text-[12px] text-slate-300 mt-1"},Ta!=null&&Ta.coachName?"Coach: "+Ta.coachName+". ":"",(Ta==null?void 0:Ta.planNote)||"We\u2019ll adapt this plan using your check-ins and wearable data.")))),React.createElement("button",{onClick:()=>na("LINKED_DASH"),className:"w-full py-3 rounded-xl bg-brand text-white font-bold hover:bg-blue-600 transition-colors"},"Go to dashboard"),React.createElement("button",{type:"button",onClick:()=>na("LINKED_DASH"),className:"w-full mt-3 py-3 rounded-xl border border-midnight-700 text-slate-200 hover:bg-midnight-800 transition-colors"},"View onboarding checklist")))):React.createElement(ll,{label:"PROCESSING...",onComplete:()=>na("NEXT")})};var iu=()=>{React.useEffect(()=>{try{document.querySelectorAll("button:not([type])").forEach(io=>io.setAttribute("type","button"))}catch(io){}var Ka=io=>{try{var _=io&&io.target,Zs=_&&_.closest?_.closest("a"):null;if(Zs&&Zs.getAttribute){var nn=Zs.getAttribute("href")||"";(nn==="#"||nn===""||nn.startsWith("#"))&&io.preventDefault()}var Zo=_&&_.closest?_.closest("button"):null;if(Zo){var nn=(Zo.getAttribute("type")||"").toLowerCase();!!(Zo.closest&&Zo.closest("form"))&&(nn===""||nn==="submit")&&io.preventDefault()}}catch(_){}},oi=io=>{try{io.preventDefault()}catch(_){}};return document.addEventListener("click",Ka,!0),window.addEventListener("submit",oi,!0),()=>{document.removeEventListener("click",Ka,!0),window.removeEventListener("submit",oi,!0)}},[]);var[wt,na]=Ws(null),[si,Ii]=Ws(()=>localStorage.getItem("flowofit_dev_mode")==="1"),Ta=()=>{Ii(Ka=>{var oi=!Ka;return localStorage.setItem("flowofit_dev_mode",oi?"1":"0"),Ar("admin.action.performed",{action:"dev_mode.toggle",enabled:oi}),Bl("Developer Mode",oi?"Developer Mode enabled. Debug badges and a live event dock are now visible.":"Developer Mode disabled."),oi})};Gl(()=>{var Ka=oi=>na(oi.detail);return window.addEventListener("flowofit:info",Ka),()=>window.removeEventListener("flowofit:info",Ka)},[]);var[ti,ai]=Ws("TENANT_CHECK"),[qi,co]=Ws(null),[Ys,bi]=Ws(null),[hs,fo]=Ws({}),[go,Ei]=Ws("INDEPENDENT"),[As,yo]=Ws([]),[Ks,Fs]=Ws(null),[Lo,Hn]=Ws(""),[es,Ai]=Ws({email:"",mode:"code",code:"",link:""}),[no,Co]=Ws({status:null,scenario:null,orgName:"Alex's Coaching",coachName:"Coach Alex",message:""}),[Mi,ts]=Ws({icTotalCompleted:0,icYogaPureCompleted:0,events:[]}),vs=(Ka,oi={})=>{Ka==="IC_ONBOARD_COMPLETE"&&ts(io=>{var _=new Date().toISOString(),Zs=io.events||[],Zo={id:_+"_"+(Zs.length+1),timestamp:_,variant:oi.variant||"STANDARD",primaryGoal:oi.primaryGoal||null,secondaryGoal:oi.secondaryGoal||null,ageBand:oi.ageBand||null,experienceLevel:oi.experienceLevel||null,tenantId:oi.tenantId||"TENANT_DEMO",planType:oi.planType||null,trainerId:oi.trainerId||null};return{icTotalCompleted:io.icTotalCompleted+1,icYogaPureCompleted:io.icYogaPureCompleted+(Zo.variant==="PURE_YOGA"?1:0),events:[...Zs,Zo]}})},ko=()=>{!ti.startsWith("SYSTEM")&&!ti.includes("LOADER")&&ti!=="TENANT_CHECK"&&yo(Ka=>[...Ka,{view:ti,wizardStep:Ys}])},$s=()=>{if(As.length===0)return;var Ka=As[As.length-1];yo(oi=>oi.slice(0,-1)),ai(Ka.view),bi(Ka.wizardStep)},is=()=>{ai("LANDING"),bi(null),co(null),fo({}),yo([]),Ei("INDEPENDENT")},xs=Ka=>{ko(),ai(Ka)},ps=Ka=>{ko();try{var oi=Ys||null;Ka==="Client_Onboarding_Entry"&&Ar("onboarding.started",{source:ti||null||"UNKNOWN"}),oi&&oi!==Ka&&(String(oi).startsWith("IC_")||String(oi).startsWith("Q")||String(oi).startsWith("Checklist_")||String(oi).startsWith("WCF_"))&&Ar("onboarding.step.completed",{from_step:oi,to_step:Ka||null,dashboard_type_intent:go||null}),Ka==="TrialActivated"&&Ar("subscription.started",{plan:"TRIAL",source:"onboarding"})}catch(oi){}if(Ka==="Client_Onboarding_Entry")return ai("SYSTEM_CLIENT_INIT");if(Ka==="TrialActivated")return ai("SYSTEM_TRIAL");if(Ka==="IC_CombinedAI_Hybrid")return ai("SYSTEM_AI");if(Ka==="IC_Secondary_Interests_NEW"){bi("IC_Secondary_Interests_NEW");return}if(Ka==="IC_Check_Wearables_NEW"){bi("IC_Check_Wearables_NEW");return}if(Ka==="IC_Wearable_Upsell"){bi("IC_Wearable_Upsell");return}if(Ka==="WCF_CONNECT"){bi("WCF_CONNECT");return}if(Ka!=="ROADMAP"){if(Ka==="Q2_ActivityLevel"){bi("Q2_ActivityLevel");return}if(Ka==="Checklist_Gamify1"){bi("Checklist_Gamify1");return}if(Ka==="ROUTING_ENGINE"){var oi=hs.q1_goal==="Yoga & Wellness",io=hs.hasSecondary===!0,_=oi&&!io;try{var Zs=hs&&hs.v10_onboarding?hs.v10_onboarding:null,Zo=Array.isArray(Zs&&Zs.focusAreas)?Zs.focusAreas:[],nn=Zo.includes("YOGA_WELLNESS")||hs.q1_goal==="Yoga & Wellness",Bn=Zo.includes("NUTRITION_FIRST")||hs.q1_goal==="Nutrition & Habits",yn=Zo.includes("FITNESS_FIRST")||hs.q1_goal==="General Fitness";var Os="FITNESS";nn&&Bn||nn&&yn||Bn&&yn?Os="HYBRID":nn?Os="YOGA":Bn?Os="NUTRITION":Os="FITNESS",window.initialDashboardEmphasis=Os,window.__FOF_INITIAL_EMPHASIS=Os}catch(Zs){}Ei(_?"YOGA":"INDEPENDENT"),Fs("ROUTING_ENGINE");try{Ar("dashboard.view.opened",{dashboardType:_?"YOGA":"INDEPENDENT",source:"ROUTING_ENGINE"})}catch(Zs){}return ai("DASHBOARD")}if(Ka==="ML_Validate")return ai("ML_LOADER");if(Ka==="ML_LinkToCoach")return ai("ML_LINK_LOADER");if(Ka==="ML_PRO_COUNT"){bi("ML_PRO_COUNT");return}if(Ka==="ML_WEARABLE"){bi("ML_WEARABLE");return}if(Ka==="ML_DATASHARE"){bi("ML_DATASHARE");return}if(Ka==="ML_GAMIFY"){bi("ML_GAMIFY");return}if(Ka==="ML_ROUTE"){ai("MAGIC_FLOW"),bi("ML_PRO_COUNT");return}if(Ka==="LINKED_DASH")return Ei("LINKED"),Fs("LINKED_DASH"),ai("DASHBOARD");if(Ka==="HYBRID_DASH")return Ei("HYBRID"),Fs("HYBRID_DASH"),ai("DASHBOARD");if(Ka==="ML_Signup"){bi("ML_Signup");return}if(Ka==="T1"){bi("T1");return}if(Ka==="SO1"){bi("SO1");return}if(Ka==="PHYSIO_NOTICE"){bi("PHYSIO_NOTICE");return}if(Ka==="HYBRID_CHECK"){bi("HYBRID_CHECK");return}if(Ka==="SEC_ROLE_SELECT"){bi("SEC_ROLE_SELECT");return}if(Ka==="T1a"){bi("T1a");return}if(Ka==="T2"){bi("T2");return}if(Ka==="T3_PROVISION")return ai("SYSTEM_PROVISION");if(Ka==="T_WHITE_LABEL"){bi("T_WHITE_LABEL");return}if(Ka==="BULK_IMPORT"){bi("BULK_IMPORT");return}if(Ka==="BI_MAPPING"){bi("BI_MAPPING");return}if(Ka==="BI_PROCESS")return ai("SYSTEM_IMPORT");if(Ka==="SO_CREDENTIALS"){bi("SO_CREDENTIALS");return}if(Ka==="SO2_VERIFY")return ai("SYSTEM_VERIFY");if(Ka==="DASHBOARD")return Fs("DIRECT"),ai("DASHBOARD");if(Ka==="GYM_CHECK"){bi("GYM_CHECK");return}if(Ka==="GYM_ONBOARD"){bi("GYM_ONBOARD");return}if(Ka==="CORP_CHECK"){bi("CORP_CHECK");return}if(Ka==="CORP_ONBOARD"){bi("CORP_ONBOARD");return}if(Ka==="GO_TO_PRO_WIZARD"){ai("PRO_WIZARD"),bi("Pro_RoleSelect");return}typeof Ka=="string"&&!Ka.includes("SYSTEM")?bi(Ka):bi(oi=>typeof oi=="number"?oi+1:oi)}},Ho=Ka=>Ka?Ka.toLowerCase().includes("linked")?"LINKED":"INDEPENDENT":null,Bt=()=>{var Ka="https://flowofit.app/magic/invite-demo";try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(Ka);else{var oi=document.createElement("textarea");oi.value=Ka,oi.style.position="fixed",oi.style.left="-9999px",document.body.appendChild(oi),oi.select(),document.execCommand("copy"),document.body.removeChild(oi)}window.__toast&&window.__toast("Invite link copied")}catch(oi){console.warn("Copy failed",oi)}},ta={onBack:$s,onHome:is,canGoBack:As.length>0,devMode:si,toggleDevMode:Ta};if(ti==="TENANT_CHECK")return React.createElement(ll,{label:"CHECKING TENANT ID...",subtext:"Loading App Bundle Configuration",onComplete:()=>ai("LANDING")});if(ti==="SYSTEM_CLIENT_INIT")return React.createElement(ll,{label:"INITIALIZING...",onComplete:()=>{ai("CLIENT_WIZARD"),bi("Q1_PrimaryGoal")}});if(ti==="SYSTEM_TRIAL")return React.createElement(ll,{label:"ACTIVATING TRIAL...",onComplete:()=>{ai("CLIENT_WIZARD"),bi("IC_Secondary_Interests_NEW")}});if(ti==="SYSTEM_AI")return React.createElement(ll,{label:"GENERATING HYBRID PLAN...",onComplete:()=>{ai("CLIENT_WIZARD"),bi("IC_Hybrid_Explain_NEW")}});if(ti==="SYSTEM_VERIFY")return React.createElement(ll,{label:"VERIFYING CREDENTIALS...",subtext:"Admin Review Queue",onComplete:()=>xs("DASHBOARD")});if(ti==="SYSTEM_PROVISION")return React.createElement(ll,{label:"SETTING UP...",subtext:"Allocating Resources",onComplete:()=>{bi("BULK_IMPORT"),ai("PRO_WIZARD")}});if(ti==="SYSTEM_IMPORT")return React.createElement(ll,{label:"IMPORTING CLIENTS...",subtext:"142 Records Processed",onComplete:()=>xs("DASHBOARD")});if(ti==="ML_LOADER")return React.createElement(ll,{label:"VALIDATING INVITATION...",subtext:"Checking your access and dashboard status",onComplete:()=>{if(no!=null&&no.status&&no.status!=="OK"){ai("MAGIC_FLOW"),bi("INPUT");return}if(Ei("LINKED"),Fs("MAGIC_LINK"),(no==null?void 0:no.scenario)==="ALREADY_SETUP"){ai("DASHBOARD");return}if((no==null?void 0:no.scenario)==="NEEDS_ACTIVATION"){ai("MAGIC_FLOW"),bi("ML_SET_PASSWORD");return}ai("MAGIC_FLOW"),bi("ML_PRO_COUNT")}});if(ti==="ML_LINK_LOADER")return React.createElement(ll,{label:"LINKING TO COACH...",onComplete:()=>{ai("MAGIC_FLOW"),bi("ML_PRO_COUNT")}});switch(ti){case"LANDING":return React.createElement(Lc,{onStart:()=>ai("ROLE_SELECT"),onSelect:Ka=>{co(Ka),Ka==="CLIENT"?(ai("CLIENT_WIZARD"),bi(null)):ai("AUTH")},onAdminLogin:()=>{co("ADMIN"),ai("LOGIN")},...ta});case"ROLE_SELECT":return React.createElement(Dc,{onSelect:Ka=>{co(Ka),Ka==="TRAINER"?ai("AUTH"):(ai("SYSTEM_CLIENT_INIT"),bi(null))},...ta});case"AUTH":return React.createElement(Pc,{role:qi,onNavigate:Ka=>{Ka==="SIGNUP"?qi==="CLIENT"?(ai("CLIENT_WIZARD"),bi("ClientSignUp")):qi==="TRAINER"?(ai("BUSINESS_WIZARD"),bi("TYPE_SELECT")):xs("LOGIN"):xs("LOGIN")},extra:qi==="CLIENT"?React.createElement("div",{className:"mt-4 space-y-3 text-left"},React.createElement("button",{onClick:()=>{ai("MAGIC_FLOW"),bi("INPUT")},className:"w-full py-3 rounded-xl border border-brand/60 text-brand font-semibold text-sm hover:bg-brand/10 hover:text-white transition-colors flex items-center justify-center gap-2"},React.createElement(ni,{name:"Sparkles",size:16}),"Use Magic Link"),React.createElement("div",{className:"rounded-2xl border border-amber-400/70 bg-amber-950/80 px-3 py-2.5 text-[11px] leading-relaxed text-amber-50"},"Already training with a coach? Sign in or ask your coach to share your personal magic link.")):null,...ta});case"MAGIC_FLOW":return React.createElement(au,{step:Ys,onNext:ps,mlInvite:es,setMlInvite:Ai,mlValidation:no,setMlValidation:Co,copyMagicLink:Bt,...ta});case"CLIENT_WIZARD":return React.createElement(Qc,{step:Ys,onNext:ps,onConversionEvent:vs,onUpdate:(Ka,oi)=>fo({...hs,[Ka]:oi}),context:hs,onExistingLogin:Ka=>{co("CLIENT");var oi=Ka&&Ka.email?Ka.email:hs&&hs.email?hs.email:"";Ho(oi)==="LINKED"?(Ei("LINKED"),Fs("CLIENT_LOGIN_LINKED")):(Ei("INDEPENDENT"),Fs("CLIENT_LOGIN_INDEPENDENT"));try{window.initialDashboardEmphasis="FITNESS",window.__FOF_INITIAL_EMPHASIS="FITNESS"}catch(_){}ai("DASHBOARD"),bi(null)},onMagicLink:()=>{co("CLIENT"),ai("MAGIC_FLOW"),bi("INPUT")},...ta});case"PRO_WIZARD":return React.createElement(Zc,{step:Ys,onNext:ps,onUpdate:(Ka,oi)=>Ka==="role"?{}:null,...ta});case"BUSINESS_WIZARD":return React.createElement(Mc,{step:Ys,onNext:ps,...ta});case"DASHBOARD":if(qi==="ADMIN")return React.createElement(Oc,{...ta,conversionAnalytics:Mi});if(qi==="TRAINER")return React.createElement(tu,{onNavigate:xs,conversionAnalytics:Mi});if(qi==="CLIENT"){var Ka=go==="LINKED"||go==="HYBRID"?"LINKED":"INDEPENDENT",oi="MODE",io=Ka;return Ks==="ROUTING_ENGINE"&&(go==="YOGA"?(Ka="INDEPENDENT",oi="PLAN",io="INDEPENDENT"):(Ka="SELECT",oi="PLAN",io="INDEPENDENT")),(Ks==="CLIENT_LOGIN_LINKED"||Ks==="CLIENT_LOGIN_INDEPENDENT")&&(Ka="SELECT",oi="MODE",io=null),React.createElement("div",{className:"w-full h-full"},React.createElement(Od.VitaminClientApp,{onLogout:()=>{co(null),ai("LANDING"),bi(null),fo({}),yo([]),Ei("INDEPENDENT"),Fs(null)},initialClientMode:Ka,initialDashboardType:go,initialEntryStep:oi,initialStartMode:io,initialIndependentTier:"FREE",coachContext:no}))}return React.createElement(DashboardLayout,{role:qi,onNavigate:xs,...ta},React.createElement("div",{className:"p-8 text-slate-200"},React.createElement("h3",{className:"text-2xl font-bold"},"Professional Command Center"),React.createElement("p",{className:"text-slate-500 mt-2"},"Active preview View")));case"LOGIN":return React.createElement(Lr,{...ta},React.createElement(Rc,{data:wt,onClose:()=>na(null)}),React.createElement("div",{className:"flex-1 flex items-center justify-center p-6"},React.createElement("div",{className:"glass-panel p-10 rounded-3xl max-w-md w-full"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-center text-white"},qi==="ADMIN"?"Admin Portal Login":"Welcome Back"),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-slate-400 mb-1"},"Email"),React.createElement("input",{className:"w-full bg-midnight-900 border border-slate-700 rounded-xl px-4 py-2.5 text-sm text-slate-100 focus:outline-none focus:border-brand transition-colors",placeholder:"you@example.com"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-slate-400 mb-1"},"Password"),React.createElement("input",{type:"password",className:"w-full bg-midnight-900 border border-slate-700 rounded-xl px-4 py-2.5 text-sm text-slate-100 focus:outline-none focus:border-brand transition-colors",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})),React.createElement("button",{onClick:()=>{Ar("auth.login",{role:qi}),ai("DASHBOARD")},className:"w-full py-3 bg-brand text-white font-semibold rounded-xl hover:bg-brand-dark transition-colors flex items-center justify-center gap-2"},"Continue ",React.createElement(ni,{name:"ArrowRight",size:18}))))));default:return React.createElement("div",{className:"text-white p-10"},"404 View")}},su=ReactDOM.createRoot(document.getElementById("root"));su.render(React.createElement(iu,null));})();
